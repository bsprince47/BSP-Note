const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D-5rahc_.js","assets/index-Bkohaulx.js","assets/index-Ch_qCilz.js","assets/default-0Dp3JUBc.js","assets/index-DdbShWyY.js","assets/index-nOtcpH01.js","assets/index-5Zz36bbo.js","assets/index-C2o2j-tx.js","assets/index-c2V3InAJ.js","assets/index-D4Wp6AEg.js","assets/index-CeoFZv18.js","assets/index-CfyObm-o.js","assets/index-CS_xzTwR.js","assets/index-BdmKeUBW.js","assets/index-D7-7PmSP.js","assets/index-DpipQwVu.js","assets/index-DTzQ7r7Q.js","assets/index-3OOFrDax.js","assets/index-C_aolqmU.js","assets/index-BuQLf8Am.js","assets/blank-line-D3C7De5j.js","assets/index-hRuAkC1j.js","assets/index-UBgLExeH.js","assets/index-CtreMsrK.js","assets/index--n2O05f-.js","assets/index-Tlm8e_FK.js","assets/index-BxE2facF.js","assets/index-DoJwJBw7.js","assets/index-BCPnb1JI.js"])))=>i.map(i=>d[i]);
function mW(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(t,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var gW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var BE={exports:{}},Ag={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sP;function yW(){if(sP)return Ag;sP=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,i){var s=null;if(i!==void 0&&(s=""+i),o.key!==void 0&&(s=""+o.key),"key"in o){i={};for(var a in o)a!=="key"&&(i[a]=o[a])}else i=o;return o=i.ref,{$$typeof:t,type:r,key:s,ref:o!==void 0?o:null,props:i}}return Ag.Fragment=e,Ag.jsx=n,Ag.jsxs=n,Ag}var aP;function vW(){return aP||(aP=1,BE.exports=yW()),BE.exports}var C=vW(),$E={exports:{}},Qt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lP;function bW(){if(lP)return Qt;lP=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function p(Y){return Y===null||typeof Y!="object"?null:(Y=h&&Y[h]||Y["@@iterator"],typeof Y=="function"?Y:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function E(Y,se,te){this.props=Y,this.context=se,this.refs=b,this.updater=te||g}E.prototype.isReactComponent={},E.prototype.setState=function(Y,se){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,se,"setState")},E.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function T(){}T.prototype=E.prototype;function P(Y,se,te){this.props=Y,this.context=se,this.refs=b,this.updater=te||g}var D=P.prototype=new T;D.constructor=P,v(D,E.prototype),D.isPureReactComponent=!0;var z=Array.isArray,V={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function O(Y,se,te,ie,ue,ae){return te=ae.ref,{$$typeof:t,type:Y,key:se,ref:te!==void 0?te:null,props:ae}}function R(Y,se){return O(Y.type,se,void 0,void 0,void 0,Y.props)}function M(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function B(Y){var se={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(te){return se[te]})}var q=/\/+/g;function K(Y,se){return typeof Y=="object"&&Y!==null&&Y.key!=null?B(""+Y.key):se.toString(36)}function F(){}function ne(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(F,F):(Y.status="pending",Y.then(function(se){Y.status==="pending"&&(Y.status="fulfilled",Y.value=se)},function(se){Y.status==="pending"&&(Y.status="rejected",Y.reason=se)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function oe(Y,se,te,ie,ue){var ae=typeof Y;(ae==="undefined"||ae==="boolean")&&(Y=null);var ve=!1;if(Y===null)ve=!0;else switch(ae){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(Y.$$typeof){case t:case e:ve=!0;break;case f:return ve=Y._init,oe(ve(Y._payload),se,te,ie,ue)}}if(ve)return ue=ue(Y),ve=ie===""?"."+K(Y,0):ie,z(ue)?(te="",ve!=null&&(te=ve.replace(q,"$&/")+"/"),oe(ue,se,te,"",function(Oe){return Oe})):ue!=null&&(M(ue)&&(ue=R(ue,te+(ue.key==null||Y&&Y.key===ue.key?"":(""+ue.key).replace(q,"$&/")+"/")+ve)),se.push(ue)),1;ve=0;var De=ie===""?".":ie+":";if(z(Y))for(var Ue=0;Ue<Y.length;Ue++)ie=Y[Ue],ae=De+K(ie,Ue),ve+=oe(ie,se,te,ae,ue);else if(Ue=p(Y),typeof Ue=="function")for(Y=Ue.call(Y),Ue=0;!(ie=Y.next()).done;)ie=ie.value,ae=De+K(ie,Ue++),ve+=oe(ie,se,te,ae,ue);else if(ae==="object"){if(typeof Y.then=="function")return oe(ne(Y),se,te,ie,ue);throw se=String(Y),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return ve}function j(Y,se,te){if(Y==null)return Y;var ie=[],ue=0;return oe(Y,ie,"","",function(ae){return se.call(te,ae,ue++)}),ie}function U(Y){if(Y._status===-1){var se=Y._result;se=se(),se.then(function(te){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=te)},function(te){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=te)}),Y._status===-1&&(Y._status=0,Y._result=se)}if(Y._status===1)return Y._result.default;throw Y._result}var Z=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function J(){}return Qt.Children={map:j,forEach:function(Y,se,te){j(Y,function(){se.apply(this,arguments)},te)},count:function(Y){var se=0;return j(Y,function(){se++}),se},toArray:function(Y){return j(Y,function(se){return se})||[]},only:function(Y){if(!M(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},Qt.Component=E,Qt.Fragment=n,Qt.Profiler=o,Qt.PureComponent=P,Qt.StrictMode=r,Qt.Suspense=l,Qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Qt.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return V.H.useMemoCache(Y)}},Qt.cache=function(Y){return function(){return Y.apply(null,arguments)}},Qt.cloneElement=function(Y,se,te){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var ie=v({},Y.props),ue=Y.key,ae=void 0;if(se!=null)for(ve in se.ref!==void 0&&(ae=void 0),se.key!==void 0&&(ue=""+se.key),se)!$.call(se,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&se.ref===void 0||(ie[ve]=se[ve]);var ve=arguments.length-2;if(ve===1)ie.children=te;else if(1<ve){for(var De=Array(ve),Ue=0;Ue<ve;Ue++)De[Ue]=arguments[Ue+2];ie.children=De}return O(Y.type,ue,void 0,void 0,ae,ie)},Qt.createContext=function(Y){return Y={$$typeof:s,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:i,_context:Y},Y},Qt.createElement=function(Y,se,te){var ie,ue={},ae=null;if(se!=null)for(ie in se.key!==void 0&&(ae=""+se.key),se)$.call(se,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ue[ie]=se[ie]);var ve=arguments.length-2;if(ve===1)ue.children=te;else if(1<ve){for(var De=Array(ve),Ue=0;Ue<ve;Ue++)De[Ue]=arguments[Ue+2];ue.children=De}if(Y&&Y.defaultProps)for(ie in ve=Y.defaultProps,ve)ue[ie]===void 0&&(ue[ie]=ve[ie]);return O(Y,ae,void 0,void 0,null,ue)},Qt.createRef=function(){return{current:null}},Qt.forwardRef=function(Y){return{$$typeof:a,render:Y}},Qt.isValidElement=M,Qt.lazy=function(Y){return{$$typeof:f,_payload:{_status:-1,_result:Y},_init:U}},Qt.memo=function(Y,se){return{$$typeof:u,type:Y,compare:se===void 0?null:se}},Qt.startTransition=function(Y){var se=V.T,te={};V.T=te;try{var ie=Y(),ue=V.S;ue!==null&&ue(te,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(J,Z)}catch(ae){Z(ae)}finally{V.T=se}},Qt.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Qt.use=function(Y){return V.H.use(Y)},Qt.useActionState=function(Y,se,te){return V.H.useActionState(Y,se,te)},Qt.useCallback=function(Y,se){return V.H.useCallback(Y,se)},Qt.useContext=function(Y){return V.H.useContext(Y)},Qt.useDebugValue=function(){},Qt.useDeferredValue=function(Y,se){return V.H.useDeferredValue(Y,se)},Qt.useEffect=function(Y,se,te){var ie=V.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(Y,se)},Qt.useId=function(){return V.H.useId()},Qt.useImperativeHandle=function(Y,se,te){return V.H.useImperativeHandle(Y,se,te)},Qt.useInsertionEffect=function(Y,se){return V.H.useInsertionEffect(Y,se)},Qt.useLayoutEffect=function(Y,se){return V.H.useLayoutEffect(Y,se)},Qt.useMemo=function(Y,se){return V.H.useMemo(Y,se)},Qt.useOptimistic=function(Y,se){return V.H.useOptimistic(Y,se)},Qt.useReducer=function(Y,se,te){return V.H.useReducer(Y,se,te)},Qt.useRef=function(Y){return V.H.useRef(Y)},Qt.useState=function(Y){return V.H.useState(Y)},Qt.useSyncExternalStore=function(Y,se,te){return V.H.useSyncExternalStore(Y,se,te)},Qt.useTransition=function(){return V.H.useTransition()},Qt.version="19.1.0",Qt}var cP;function aA(){return cP||(cP=1,$E.exports=bW()),$E.exports}var _=aA();const Pe=sA(_),lA=mW({__proto__:null,default:Pe},[_]);var HE={exports:{}},Rg={},FE={exports:{}},zE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uP;function wW(){return uP||(uP=1,function(t){function e(j,U){var Z=j.length;j.push(U);e:for(;0<Z;){var J=Z-1>>>1,Y=j[J];if(0<o(Y,U))j[J]=U,j[Z]=Y,Z=J;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var U=j[0],Z=j.pop();if(Z!==U){j[0]=Z;e:for(var J=0,Y=j.length,se=Y>>>1;J<se;){var te=2*(J+1)-1,ie=j[te],ue=te+1,ae=j[ue];if(0>o(ie,Z))ue<Y&&0>o(ae,ie)?(j[J]=ae,j[ue]=Z,J=ue):(j[J]=ie,j[te]=Z,J=te);else if(ue<Y&&0>o(ae,Z))j[J]=ae,j[ue]=Z,J=ue;else break e}}return U}function o(j,U){var Z=j.sortIndex-U.sortIndex;return Z!==0?Z:j.id-U.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],u=[],f=1,h=null,p=3,g=!1,v=!1,b=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function z(j){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=j)r(u),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(u)}}function V(j){if(b=!1,z(j),!v)if(n(l)!==null)v=!0,$||($=!0,K());else{var U=n(u);U!==null&&oe(V,U.startTime-j)}}var $=!1,O=-1,R=5,M=-1;function B(){return E?!0:!(t.unstable_now()-M<R)}function q(){if(E=!1,$){var j=t.unstable_now();M=j;var U=!0;try{e:{v=!1,b&&(b=!1,P(O),O=-1),g=!0;var Z=p;try{t:{for(z(j),h=n(l);h!==null&&!(h.expirationTime>j&&B());){var J=h.callback;if(typeof J=="function"){h.callback=null,p=h.priorityLevel;var Y=J(h.expirationTime<=j);if(j=t.unstable_now(),typeof Y=="function"){h.callback=Y,z(j),U=!0;break t}h===n(l)&&r(l),z(j)}else r(l);h=n(l)}if(h!==null)U=!0;else{var se=n(u);se!==null&&oe(V,se.startTime-j),U=!1}}break e}finally{h=null,p=Z,g=!1}U=void 0}}finally{U?K():$=!1}}}var K;if(typeof D=="function")K=function(){D(q)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ne=F.port2;F.port1.onmessage=q,K=function(){ne.postMessage(null)}}else K=function(){T(q,0)};function oe(j,U){O=T(function(){j(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(j){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var Z=p;p=U;try{return j()}finally{p=Z}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(j,U){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Z=p;p=j;try{return U()}finally{p=Z}},t.unstable_scheduleCallback=function(j,U,Z){var J=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?J+Z:J):Z=J,j){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=Z+Y,j={id:f++,callback:U,priorityLevel:j,startTime:Z,expirationTime:Y,sortIndex:-1},Z>J?(j.sortIndex=Z,e(u,j),n(l)===null&&j===n(u)&&(b?(P(O),O=-1):b=!0,oe(V,Z-J))):(j.sortIndex=Y,e(l,j),v||g||(v=!0,$||($=!0,K()))),j},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(j){var U=p;return function(){var Z=p;p=U;try{return j.apply(this,arguments)}finally{p=Z}}}}(zE)),zE}var dP;function CW(){return dP||(dP=1,FE.exports=wW()),FE.exports}var UE={exports:{}},si={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fP;function SW(){if(fP)return si;fP=1;var t=aA();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function i(l,u,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:h==null?null:""+h,children:l,containerInfo:u,implementation:f}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return si.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,si.createPortal=function(l,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return i(l,u,null,f)},si.flushSync=function(l){var u=s.T,f=r.p;try{if(s.T=null,r.p=2,l)return l()}finally{s.T=u,r.p=f,r.d.f()}},si.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},si.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},si.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var f=u.as,h=a(f,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):f==="script"&&r.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},si.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=a(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},si.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,h=a(f,u.crossOrigin);r.d.L(l,f,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},si.preloadModule=function(l,u){if(typeof l=="string")if(u){var f=a(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},si.requestFormReset=function(l){r.d.r(l)},si.unstable_batchedUpdates=function(l,u){return l(u)},si.useFormState=function(l,u,f){return s.H.useFormState(l,u,f)},si.useFormStatus=function(){return s.H.useHostTransitionStatus()},si.version="19.1.0",si}var hP;function _6(){if(hP)return UE.exports;hP=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),UE.exports=SW(),UE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pP;function xW(){if(pP)return Rg;pP=1;var t=CW(),e=aA(),n=_6();function r(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function i(c){var d=c,m=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(m=d.return),c=d.return;while(c)}return d.tag===3?m:null}function s(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function a(c){if(i(c)!==c)throw Error(r(188))}function l(c){var d=c.alternate;if(!d){if(d=i(c),d===null)throw Error(r(188));return d!==c?null:c}for(var m=c,y=d;;){var x=m.return;if(x===null)break;var A=x.alternate;if(A===null){if(y=x.return,y!==null){m=y;continue}break}if(x.child===A.child){for(A=x.child;A;){if(A===m)return a(x),c;if(A===y)return a(x),d;A=A.sibling}throw Error(r(188))}if(m.return!==y.return)m=x,y=A;else{for(var G=!1,Q=x.child;Q;){if(Q===m){G=!0,m=x,y=A;break}if(Q===y){G=!0,y=x,m=A;break}Q=Q.sibling}if(!G){for(Q=A.child;Q;){if(Q===m){G=!0,m=A,y=x;break}if(Q===y){G=!0,y=A,m=x;break}Q=Q.sibling}if(!G)throw Error(r(189))}}if(m.alternate!==y)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?c:d}function u(c){var d=c.tag;if(d===5||d===26||d===27||d===6)return c;for(c=c.child;c!==null;){if(d=u(c),d!==null)return d;c=c.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),P=Symbol.for("react.consumer"),D=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function K(c){return c===null||typeof c!="object"?null:(c=q&&c[q]||c["@@iterator"],typeof c=="function"?c:null)}var F=Symbol.for("react.client.reference");function ne(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===F?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case v:return"Fragment";case E:return"Profiler";case b:return"StrictMode";case V:return"Suspense";case $:return"SuspenseList";case M:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case g:return"Portal";case D:return(c.displayName||"Context")+".Provider";case P:return(c._context.displayName||"Context")+".Consumer";case z:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case O:return d=c.displayName||null,d!==null?d:ne(c.type)||"Memo";case R:d=c._payload,c=c._init;try{return ne(c(d))}catch{}}return null}var oe=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},J=[],Y=-1;function se(c){return{current:c}}function te(c){0>Y||(c.current=J[Y],J[Y]=null,Y--)}function ie(c,d){Y++,J[Y]=c.current,c.current=d}var ue=se(null),ae=se(null),ve=se(null),De=se(null);function Ue(c,d){switch(ie(ve,d),ie(ae,c),ie(ue,null),d.nodeType){case 9:case 11:c=(c=d.documentElement)&&(c=c.namespaceURI)?OO(c):0;break;default:if(c=d.tagName,d=d.namespaceURI)d=OO(d),c=PO(d,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}te(ue),ie(ue,c)}function Oe(){te(ue),te(ae),te(ve)}function rt(c){c.memoizedState!==null&&ie(De,c);var d=ue.current,m=PO(d,c.type);d!==m&&(ie(ae,c),ie(ue,m))}function wt(c){ae.current===c&&(te(ue),te(ae)),De.current===c&&(te(De),xg._currentValue=Z)}var tt=Object.prototype.hasOwnProperty,mn=t.unstable_scheduleCallback,Ln=t.unstable_cancelCallback,$t=t.unstable_shouldYield,$n=t.unstable_requestPaint,At=t.unstable_now,sn=t.unstable_getCurrentPriorityLevel,Jt=t.unstable_ImmediatePriority,Vt=t.unstable_UserBlockingPriority,Ut=t.unstable_NormalPriority,gn=t.unstable_LowPriority,Wt=t.unstable_IdlePriority,an=t.log,_n=t.unstable_setDisableYieldValue,Ht=null,Ft=null;function un(c){if(typeof an=="function"&&_n(c),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Ht,c)}catch{}}var kn=Math.clz32?Math.clz32:xn,Vn=Math.log,kr=Math.LN2;function xn(c){return c>>>=0,c===0?32:31-(Vn(c)/kr|0)|0}var br=256,wr=4194304;function jn(c){var d=c&42;if(d!==0)return d;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function nt(c,d,m){var y=c.pendingLanes;if(y===0)return 0;var x=0,A=c.suspendedLanes,G=c.pingedLanes;c=c.warmLanes;var Q=y&134217727;return Q!==0?(y=Q&~A,y!==0?x=jn(y):(G&=Q,G!==0?x=jn(G):m||(m=Q&~c,m!==0&&(x=jn(m))))):(Q=y&~A,Q!==0?x=jn(Q):G!==0?x=jn(G):m||(m=y&~c,m!==0&&(x=jn(m)))),x===0?0:d!==0&&d!==x&&(d&A)===0&&(A=x&-x,m=d&-d,A>=m||A===32&&(m&4194048)!==0)?d:x}function Do(c,d){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&d)===0}function Br(c,d){switch(c){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nr(){var c=br;return br<<=1,(br&4194048)===0&&(br=256),c}function Qe(){var c=wr;return wr<<=1,(wr&62914560)===0&&(wr=4194304),c}function Oo(c){for(var d=[],m=0;31>m;m++)d.push(c);return d}function Cr(c,d){c.pendingLanes|=d,d!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function $r(c,d,m,y,x,A){var G=c.pendingLanes;c.pendingLanes=m,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=m,c.entangledLanes&=m,c.errorRecoveryDisabledLanes&=m,c.shellSuspendCounter=0;var Q=c.entanglements,ce=c.expirationTimes,ke=c.hiddenUpdates;for(m=G&~m;0<m;){var je=31-kn(m),$e=1<<je;Q[je]=0,ce[je]=-1;var Ae=ke[je];if(Ae!==null)for(ke[je]=null,je=0;je<Ae.length;je++){var Re=Ae[je];Re!==null&&(Re.lane&=-536870913)}m&=~$e}y!==0&&ft(c,y,0),A!==0&&x===0&&c.tag!==0&&(c.suspendedLanes|=A&~(G&~d))}function ft(c,d,m){c.pendingLanes|=d,c.suspendedLanes&=~d;var y=31-kn(d);c.entangledLanes|=d,c.entanglements[y]=c.entanglements[y]|1073741824|m&4194090}function Tn(c,d){var m=c.entangledLanes|=d;for(c=c.entanglements;m;){var y=31-kn(m),x=1<<y;x&d|c[y]&d&&(c[y]|=d),m&=~x}}function Hn(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function Fn(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function Qn(){var c=U.p;return c!==0?c:(c=window.event,c===void 0?32:eP(c.type))}function Gn(c,d){var m=U.p;try{return U.p=c,d()}finally{U.p=m}}var Yt=Math.random().toString(36).slice(2),Kn="__reactFiber$"+Yt,mt="__reactProps$"+Yt,qt="__reactContainer$"+Yt,il="__reactEvents$"+Yt,Jo="__reactListeners$"+Yt,Pi="__reactHandles$"+Yt,Jl="__reactResources$"+Yt,ec="__reactMarker$"+Yt;function Po(c){delete c[Kn],delete c[mt],delete c[il],delete c[Jo],delete c[Pi]}function ei(c){var d=c[Kn];if(d)return d;for(var m=c.parentNode;m;){if(d=m[qt]||m[Kn]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(c=BO(c);c!==null;){if(m=c[Kn])return m;c=BO(c)}return d}c=m,m=c.parentNode}return null}function co(c){if(c=c[Kn]||c[qt]){var d=c.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return c}return null}function Si(c){var d=c.tag;if(d===5||d===26||d===27||d===6)return c.stateNode;throw Error(r(33))}function Lo(c){var d=c[Jl];return d||(d=c[Jl]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function zn(c){c[ec]=!0}var su=new Set,Li={};function Vi(c,d){cs(c,d),cs(c+"Capture",d)}function cs(c,d){for(Li[c]=d,c=0;c<d.length;c++)su.add(d[c])}var cr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ls={},Vo={};function Xd(c){return tt.call(Vo,c)?!0:tt.call(Ls,c)?!1:cr.test(c)?Vo[c]=!0:(Ls[c]=!0,!1)}function xi(c,d,m){if(Xd(d))if(m===null)c.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":c.removeAttribute(d);return;case"boolean":var y=d.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){c.removeAttribute(d);return}}c.setAttribute(d,""+m)}}function Ei(c,d,m){if(m===null)c.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(d);return}c.setAttribute(d,""+m)}}function Hr(c,d,m,y){if(y===null)c.removeAttribute(m);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(m);return}c.setAttributeNS(d,m,""+y)}}var ba,Vs;function js(c){if(ba===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);ba=d&&d[1]||"",Vs=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ba+c+Vs}var wa=!1;function tc(c,d){if(!c||wa)return"";wa=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(d){var $e=function(){throw Error()};if(Object.defineProperty($e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($e,[])}catch(Re){var Ae=Re}Reflect.construct(c,[],$e)}else{try{$e.call()}catch(Re){Ae=Re}c.call($e.prototype)}}else{try{throw Error()}catch(Re){Ae=Re}($e=c())&&typeof $e.catch=="function"&&$e.catch(function(){})}}catch(Re){if(Re&&Ae&&typeof Re.stack=="string")return[Re.stack,Ae.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=y.DetermineComponentFrameRoot(),G=A[0],Q=A[1];if(G&&Q){var ce=G.split(`
`),ke=Q.split(`
`);for(x=y=0;y<ce.length&&!ce[y].includes("DetermineComponentFrameRoot");)y++;for(;x<ke.length&&!ke[x].includes("DetermineComponentFrameRoot");)x++;if(y===ce.length||x===ke.length)for(y=ce.length-1,x=ke.length-1;1<=y&&0<=x&&ce[y]!==ke[x];)x--;for(;1<=y&&0<=x;y--,x--)if(ce[y]!==ke[x]){if(y!==1||x!==1)do if(y--,x--,0>x||ce[y]!==ke[x]){var je=`
`+ce[y].replace(" at new "," at ");return c.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",c.displayName)),je}while(1<=y&&0<=x);break}}}finally{wa=!1,Error.prepareStackTrace=m}return(m=c?c.displayName||c.name:"")?js(m):""}function Xt(c){switch(c.tag){case 26:case 27:case 5:return js(c.type);case 16:return js("Lazy");case 13:return js("Suspense");case 19:return js("SuspenseList");case 0:case 15:return tc(c.type,!1);case 11:return tc(c.type.render,!1);case 1:return tc(c.type,!0);case 31:return js("Activity");default:return""}}function nc(c){try{var d="";do d+=Xt(c),c=c.return;while(c);return d}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function vo(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function au(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Wn(c){var d=au(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),y=""+c[d];if(!c.hasOwnProperty(d)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var x=m.get,A=m.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return x.call(this)},set:function(G){y=""+G,A.call(this,G)}}),Object.defineProperty(c,d,{enumerable:m.enumerable}),{getValue:function(){return y},setValue:function(G){y=""+G},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function Bs(c){c._valueTracker||(c._valueTracker=Wn(c))}function Ca(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var m=d.getValue(),y="";return c&&(y=au(c)?c.checked?"true":"false":c.value),c=y,c!==m?(d.setValue(c),!0):!1}function ji(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Qd=/[\n"\\]/g;function Sr(c){return c.replace(Qd,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function bo(c,d,m,y,x,A,G,Q){c.name="",G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?c.type=G:c.removeAttribute("type"),d!=null?G==="number"?(d===0&&c.value===""||c.value!=d)&&(c.value=""+vo(d)):c.value!==""+vo(d)&&(c.value=""+vo(d)):G!=="submit"&&G!=="reset"||c.removeAttribute("value"),d!=null?us(c,G,vo(d)):m!=null?us(c,G,vo(m)):y!=null&&c.removeAttribute("value"),x==null&&A!=null&&(c.defaultChecked=!!A),x!=null&&(c.checked=x&&typeof x!="function"&&typeof x!="symbol"),Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?c.name=""+vo(Q):c.removeAttribute("name")}function sl(c,d,m,y,x,A,G,Q){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(c.type=A),d!=null||m!=null){if(!(A!=="submit"&&A!=="reset"||d!=null))return;m=m!=null?""+vo(m):"",d=d!=null?""+vo(d):m,Q||d===c.value||(c.value=d),c.defaultValue=d}y=y??x,y=typeof y!="function"&&typeof y!="symbol"&&!!y,c.checked=Q?c.checked:!!y,c.defaultChecked=!!y,G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"&&(c.name=G)}function us(c,d,m){d==="number"&&ji(c.ownerDocument)===c||c.defaultValue===""+m||(c.defaultValue=""+m)}function $s(c,d,m,y){if(c=c.options,d){d={};for(var x=0;x<m.length;x++)d["$"+m[x]]=!0;for(m=0;m<c.length;m++)x=d.hasOwnProperty("$"+c[m].value),c[m].selected!==x&&(c[m].selected=x),x&&y&&(c[m].defaultSelected=!0)}else{for(m=""+vo(m),d=null,x=0;x<c.length;x++){if(c[x].value===m){c[x].selected=!0,y&&(c[x].defaultSelected=!0);return}d!==null||c[x].disabled||(d=c[x])}d!==null&&(d.selected=!0)}}function An(c,d,m){if(d!=null&&(d=""+vo(d),d!==c.value&&(c.value=d),m==null)){c.defaultValue!==d&&(c.defaultValue=d);return}c.defaultValue=m!=null?""+vo(m):""}function al(c,d,m,y){if(d==null){if(y!=null){if(m!=null)throw Error(r(92));if(oe(y)){if(1<y.length)throw Error(r(93));y=y[0]}m=y}m==null&&(m=""),d=m}m=vo(d),c.defaultValue=m,y=c.textContent,y===m&&y!==""&&y!==null&&(c.value=y)}function Bi(c,d){if(d){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=d;return}}c.textContent=d}var en=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lu(c,d,m){var y=d.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?y?c.setProperty(d,""):d==="float"?c.cssFloat="":c[d]="":y?c.setProperty(d,m):typeof m!="number"||m===0||en.has(d)?d==="float"?c.cssFloat=m:c[d]=(""+m).trim():c[d]=m+"px"}function Zd(c,d,m){if(d!=null&&typeof d!="object")throw Error(r(62));if(c=c.style,m!=null){for(var y in m)!m.hasOwnProperty(y)||d!=null&&d.hasOwnProperty(y)||(y.indexOf("--")===0?c.setProperty(y,""):y==="float"?c.cssFloat="":c[y]="");for(var x in d)y=d[x],d.hasOwnProperty(x)&&m[x]!==y&&lu(c,x,y)}else for(var A in d)d.hasOwnProperty(A)&&lu(c,A,d[A])}function Jd(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ll=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sa(c){return ll.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var wo=null;function _i(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Hs=null,Zn=null;function ti(c){var d=co(c);if(d&&(c=d.stateNode)){var m=c[mt]||null;e:switch(c=d.stateNode,d.type){case"input":if(bo(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),d=m.name,m.type==="radio"&&d!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Sr(""+d)+'"][type="radio"]'),d=0;d<m.length;d++){var y=m[d];if(y!==c&&y.form===c.form){var x=y[mt]||null;if(!x)throw Error(r(90));bo(y,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(d=0;d<m.length;d++)y=m[d],y.form===c.form&&Ca(y)}break e;case"textarea":An(c,m.value,m.defaultValue);break e;case"select":d=m.value,d!=null&&$s(c,!!m.multiple,d,!1)}}}var ni=!1;function cl(c,d,m){if(ni)return c(d,m);ni=!0;try{var y=c(d);return y}finally{if(ni=!1,(Hs!==null||Zn!==null)&&(I0(),Hs&&(d=Hs,c=Zn,Zn=Hs=null,ti(d),c)))for(d=0;d<c.length;d++)ti(c[d])}}function xa(c,d){var m=c.stateNode;if(m===null)return null;var y=m[mt]||null;if(y===null)return null;m=y[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(c=c.type,y=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!y;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(r(231,d,typeof m));return m}var Qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$i=!1;if(Qr)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){$i=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{$i=!1}var Hi=null,Ea=null,ds=null;function _a(){if(ds)return ds;var c,d=Ea,m=d.length,y,x="value"in Hi?Hi.value:Hi.textContent,A=x.length;for(c=0;c<m&&d[c]===x[c];c++);var G=m-c;for(y=1;y<=G&&d[m-y]===x[A-y];y++);return ds=x.slice(c,1<y?1-y:void 0)}function Fi(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function fs(){return!0}function ef(){return!1}function xr(c){function d(m,y,x,A,G){this._reactName=m,this._targetInst=x,this.type=y,this.nativeEvent=A,this.target=G,this.currentTarget=null;for(var Q in c)c.hasOwnProperty(Q)&&(m=c[Q],this[Q]=m?m(A):A[Q]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?fs:ef,this.isPropagationStopped=ef,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),d}var Dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cu=xr(Dn),Fs=f({},Dn,{view:0,detail:0}),rc=xr(Fs),ul,uu,zs,oc=f({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hs,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==zs&&(zs&&c.type==="mousemove"?(ul=c.screenX-zs.screenX,uu=c.screenY-zs.screenY):uu=ul=0,zs=c),ul)},movementY:function(c){return"movementY"in c?c.movementY:uu}}),ri=xr(oc),du=f({},oc,{dataTransfer:0}),Th=xr(du),Us=f({},Fs,{relatedTarget:0}),ka=xr(Us),dl=f({},Dn,{animationName:0,elapsedTime:0,pseudoElement:0}),ic=xr(dl),Ah=f({},Dn,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Ta=xr(Ah),tf=f({},Dn,{data:0}),sc=xr(tf),Aa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ra(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=Fr[c])?!!d[c]:!1}function hs(){return Ra}var nf=f({},Fs,{key:function(c){if(c.key){var d=Aa[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=Fi(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?fu[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hs,charCode:function(c){return c.type==="keypress"?Fi(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Fi(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Ma=xr(nf),rf=f({},oc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hu=xr(rf),zi=f({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hs}),pu=xr(zi),qs=f({},Dn,{propertyName:0,elapsedTime:0,pseudoElement:0}),mu=xr(qs),gu=f({},oc,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Ia=xr(gu),uo=f({},Dn,{newState:0,oldState:0}),of=xr(uo),Rh=[9,13,27,32],Ui=Qr&&"CompositionEvent"in window,w=null;Qr&&"documentMode"in document&&(w=document.documentMode);var N=Qr&&"TextEvent"in window&&!w,H=Qr&&(!Ui||w&&8<w&&11>=w),ee=" ",xe=!1;function Ne(c,d){switch(c){case"keyup":return Rh.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ze(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var dn=!1;function Dr(c,d){switch(c){case"compositionend":return Ze(d);case"keypress":return d.which!==32?null:(xe=!0,ee);case"textInput":return c=d.data,c===ee&&xe?null:c;default:return null}}function yn(c,d){if(dn)return c==="compositionend"||!Ui&&Ne(c,d)?(c=_a(),ds=Ea=Hi=null,dn=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return H&&d.locale!=="ko"?null:d.data;default:return null}}var zr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tr(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!zr[c.type]:d==="textarea"}function Gs(c,d,m,y){Hs?Zn?Zn.push(y):Zn=[y]:Hs=y,d=V0(d,"onChange"),0<d.length&&(m=new cu("onChange","change",null,m,y),c.push({event:m,listeners:d}))}var Zr=null,Ks=null;function sf(c){RO(c,0)}function Mh(c){var d=Si(c);if(Ca(d))return c}function af(c,d){if(c==="change")return d}var Ws=!1;if(Qr){var gr;if(Qr){var yu="oninput"in document;if(!yu){var ki=document.createElement("div");ki.setAttribute("oninput","return;"),yu=typeof ki.oninput=="function"}gr=yu}else gr=!1;Ws=gr&&(!document.documentMode||9<document.documentMode)}function e0(){Zr&&(Zr.detachEvent("onpropertychange",Ih),Ks=Zr=null)}function Ih(c){if(c.propertyName==="value"&&Mh(Ks)){var d=[];Gs(d,Ks,c,_i(c)),cl(sf,d)}}function t0(c,d,m){c==="focusin"?(e0(),Zr=d,Ks=m,Zr.attachEvent("onpropertychange",Ih)):c==="focusout"&&e0()}function ac(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Mh(Ks)}function Um(c,d){if(c==="click")return Mh(d)}function vu(c,d){if(c==="input"||c==="change")return Mh(d)}function fl(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var oi=typeof Object.is=="function"?Object.is:fl;function S(c,d){if(oi(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var m=Object.keys(c),y=Object.keys(d);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var x=m[y];if(!tt.call(d,x)||!oi(c[x],d[x]))return!1}return!0}function k(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function I(c,d){var m=k(c);c=0;for(var y;m;){if(m.nodeType===3){if(y=c+m.textContent.length,c<=d&&y>=d)return{node:m,offset:d-c};c=y}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=k(m)}}function L(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?L(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function W(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var d=ji(c.document);d instanceof c.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)c=d.contentWindow;else break;d=ji(c.document)}return d}function X(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}var re=Qr&&"documentMode"in document&&11>=document.documentMode,le=null,he=null,me=null,be=!1;function de(c,d,m){var y=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;be||le==null||le!==ji(y)||(y=le,"selectionStart"in y&&X(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),me&&S(me,y)||(me=y,y=V0(he,"onSelect"),0<y.length&&(d=new cu("onSelect","select",null,d,m),c.push({event:d,listeners:y}),d.target=le)))}function Ce(c,d){var m={};return m[c.toLowerCase()]=d.toLowerCase(),m["Webkit"+c]="webkit"+d,m["Moz"+c]="moz"+d,m}var fe={animationend:Ce("Animation","AnimationEnd"),animationiteration:Ce("Animation","AnimationIteration"),animationstart:Ce("Animation","AnimationStart"),transitionrun:Ce("Transition","TransitionRun"),transitionstart:Ce("Transition","TransitionStart"),transitioncancel:Ce("Transition","TransitionCancel"),transitionend:Ce("Transition","TransitionEnd")},ye={},Se={};Qr&&(Se=document.createElement("div").style,"AnimationEvent"in window||(delete fe.animationend.animation,delete fe.animationiteration.animation,delete fe.animationstart.animation),"TransitionEvent"in window||delete fe.transitionend.transition);function ge(c){if(ye[c])return ye[c];if(!fe[c])return c;var d=fe[c],m;for(m in d)if(d.hasOwnProperty(m)&&m in Se)return ye[c]=d[m];return c}var Te=ge("animationend"),Me=ge("animationiteration"),Ie=ge("animationstart"),Ve=ge("transitionrun"),Ke=ge("transitionstart"),Je=ge("transitioncancel"),qe=ge("transitionend"),Xe=new Map,et="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");et.push("scrollEnd");function Ge(c,d){Xe.set(c,d),Vi(d,[c])}var ot=new WeakMap;function yt(c,d){if(typeof c=="object"&&c!==null){var m=ot.get(c);return m!==void 0?m:(d={value:c,source:d,stack:nc(d)},ot.set(c,d),d)}return{value:c,source:d,stack:nc(d)}}var Et=[],jt=0,Bo=0;function It(){for(var c=jt,d=Bo=jt=0;d<c;){var m=Et[d];Et[d++]=null;var y=Et[d];Et[d++]=null;var x=Et[d];Et[d++]=null;var A=Et[d];if(Et[d++]=null,y!==null&&x!==null){var G=y.pending;G===null?x.next=x:(x.next=G.next,G.next=x),y.pending=x}A!==0&&So(m,x,A)}}function Ur(c,d,m,y){Et[jt++]=c,Et[jt++]=d,Et[jt++]=m,Et[jt++]=y,Bo|=y,c.lanes|=y,c=c.alternate,c!==null&&(c.lanes|=y)}function Jr(c,d,m,y){return Ur(c,d,m,y),Ys(c)}function Na(c,d){return Ur(c,null,null,d),Ys(c)}function So(c,d,m){c.lanes|=m;var y=c.alternate;y!==null&&(y.lanes|=m);for(var x=!1,A=c.return;A!==null;)A.childLanes|=m,y=A.alternate,y!==null&&(y.childLanes|=m),A.tag===22&&(c=A.stateNode,c===null||c._visibility&1||(x=!0)),c=A,A=A.return;return c.tag===3?(A=c.stateNode,x&&d!==null&&(x=31-kn(m),c=A.hiddenUpdates,y=c[x],y===null?c[x]=[d]:y.push(d),d.lane=m|536870912),A):null}function Ys(c){if(50<mg)throw mg=0,cE=null,Error(r(185));for(var d=c.return;d!==null;)c=d,d=c.return;return c.tag===3?c.stateNode:null}var hl={};function eK(c,d,m,y){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ps(c,d,m,y){return new eK(c,d,m,y)}function ox(c){return c=c.prototype,!(!c||!c.isReactComponent)}function lc(c,d){var m=c.alternate;return m===null?(m=ps(c.tag,d,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=d,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&65011712,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,d=c.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m.refCleanup=c.refCleanup,m}function pN(c,d){c.flags&=65011714;var m=c.alternate;return m===null?(c.childLanes=0,c.lanes=d,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=m.childLanes,c.lanes=m.lanes,c.child=m.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=m.memoizedProps,c.memoizedState=m.memoizedState,c.updateQueue=m.updateQueue,c.type=m.type,d=m.dependencies,c.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),c}function n0(c,d,m,y,x,A){var G=0;if(y=c,typeof c=="function")ox(c)&&(G=1);else if(typeof c=="string")G=nW(c,m,ue.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case M:return c=ps(31,m,d,x),c.elementType=M,c.lanes=A,c;case v:return lf(m.children,x,A,d);case b:G=8,x|=24;break;case E:return c=ps(12,m,d,x|2),c.elementType=E,c.lanes=A,c;case V:return c=ps(13,m,d,x),c.elementType=V,c.lanes=A,c;case $:return c=ps(19,m,d,x),c.elementType=$,c.lanes=A,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case T:case D:G=10;break e;case P:G=9;break e;case z:G=11;break e;case O:G=14;break e;case R:G=16,y=null;break e}G=29,m=Error(r(130,c===null?"null":typeof c,"")),y=null}return d=ps(G,m,d,x),d.elementType=c,d.type=y,d.lanes=A,d}function lf(c,d,m,y){return c=ps(7,c,y,d),c.lanes=m,c}function ix(c,d,m){return c=ps(6,c,null,d),c.lanes=m,c}function sx(c,d,m){return d=ps(4,c.children!==null?c.children:[],c.key,d),d.lanes=m,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}var Nh=[],Dh=0,r0=null,o0=0,Xs=[],Qs=0,cf=null,cc=1,uc="";function uf(c,d){Nh[Dh++]=o0,Nh[Dh++]=r0,r0=c,o0=d}function mN(c,d,m){Xs[Qs++]=cc,Xs[Qs++]=uc,Xs[Qs++]=cf,cf=c;var y=cc;c=uc;var x=32-kn(y)-1;y&=~(1<<x),m+=1;var A=32-kn(d)+x;if(30<A){var G=x-x%5;A=(y&(1<<G)-1).toString(32),y>>=G,x-=G,cc=1<<32-kn(d)+x|m<<x|y,uc=A+c}else cc=1<<A|m<<x|y,uc=c}function ax(c){c.return!==null&&(uf(c,1),mN(c,1,0))}function lx(c){for(;c===r0;)r0=Nh[--Dh],Nh[Dh]=null,o0=Nh[--Dh],Nh[Dh]=null;for(;c===cf;)cf=Xs[--Qs],Xs[Qs]=null,uc=Xs[--Qs],Xs[Qs]=null,cc=Xs[--Qs],Xs[Qs]=null}var Ti=null,Or=null,Bn=!1,df=null,pl=!1,cx=Error(r(519));function ff(c){var d=Error(r(418,""));throw Km(yt(d,c)),cx}function gN(c){var d=c.stateNode,m=c.type,y=c.memoizedProps;switch(d[Kn]=c,d[mt]=y,m){case"dialog":hn("cancel",d),hn("close",d);break;case"iframe":case"object":case"embed":hn("load",d);break;case"video":case"audio":for(m=0;m<yg.length;m++)hn(yg[m],d);break;case"source":hn("error",d);break;case"img":case"image":case"link":hn("error",d),hn("load",d);break;case"details":hn("toggle",d);break;case"input":hn("invalid",d),sl(d,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Bs(d);break;case"select":hn("invalid",d);break;case"textarea":hn("invalid",d),al(d,y.value,y.defaultValue,y.children),Bs(d)}m=y.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||d.textContent===""+m||y.suppressHydrationWarning===!0||DO(d.textContent,m)?(y.popover!=null&&(hn("beforetoggle",d),hn("toggle",d)),y.onScroll!=null&&hn("scroll",d),y.onScrollEnd!=null&&hn("scrollend",d),y.onClick!=null&&(d.onclick=j0),d=!0):d=!1,d||ff(c)}function yN(c){for(Ti=c.return;Ti;)switch(Ti.tag){case 5:case 13:pl=!1;return;case 27:case 3:pl=!0;return;default:Ti=Ti.return}}function qm(c){if(c!==Ti)return!1;if(!Bn)return yN(c),Bn=!0,!1;var d=c.tag,m;if((m=d!==3&&d!==27)&&((m=d===5)&&(m=c.type,m=!(m!=="form"&&m!=="button")||_E(c.type,c.memoizedProps)),m=!m),m&&Or&&ff(c),yN(c),d===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8)if(m=c.data,m==="/$"){if(d===0){Or=Oa(c.nextSibling);break e}d--}else m!=="$"&&m!=="$!"&&m!=="$?"||d++;c=c.nextSibling}Or=null}}else d===27?(d=Or,Ou(c.type)?(c=RE,RE=null,Or=c):Or=d):Or=Ti?Oa(c.stateNode.nextSibling):null;return!0}function Gm(){Or=Ti=null,Bn=!1}function vN(){var c=df;return c!==null&&(Ki===null?Ki=c:Ki.push.apply(Ki,c),df=null),c}function Km(c){df===null?df=[c]:df.push(c)}var ux=se(null),hf=null,dc=null;function bu(c,d,m){ie(ux,d._currentValue),d._currentValue=m}function fc(c){c._currentValue=ux.current,te(ux)}function dx(c,d,m){for(;c!==null;){var y=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,y!==null&&(y.childLanes|=d)):y!==null&&(y.childLanes&d)!==d&&(y.childLanes|=d),c===m)break;c=c.return}}function fx(c,d,m,y){var x=c.child;for(x!==null&&(x.return=c);x!==null;){var A=x.dependencies;if(A!==null){var G=x.child;A=A.firstContext;e:for(;A!==null;){var Q=A;A=x;for(var ce=0;ce<d.length;ce++)if(Q.context===d[ce]){A.lanes|=m,Q=A.alternate,Q!==null&&(Q.lanes|=m),dx(A.return,m,c),y||(G=null);break e}A=Q.next}}else if(x.tag===18){if(G=x.return,G===null)throw Error(r(341));G.lanes|=m,A=G.alternate,A!==null&&(A.lanes|=m),dx(G,m,c),G=null}else G=x.child;if(G!==null)G.return=x;else for(G=x;G!==null;){if(G===c){G=null;break}if(x=G.sibling,x!==null){x.return=G.return,G=x;break}G=G.return}x=G}}function Wm(c,d,m,y){c=null;for(var x=d,A=!1;x!==null;){if(!A){if((x.flags&524288)!==0)A=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var G=x.alternate;if(G===null)throw Error(r(387));if(G=G.memoizedProps,G!==null){var Q=x.type;oi(x.pendingProps.value,G.value)||(c!==null?c.push(Q):c=[Q])}}else if(x===De.current){if(G=x.alternate,G===null)throw Error(r(387));G.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(c!==null?c.push(xg):c=[xg])}x=x.return}c!==null&&fx(d,c,m,y),d.flags|=262144}function i0(c){for(c=c.firstContext;c!==null;){if(!oi(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function pf(c){hf=c,dc=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function ii(c){return bN(hf,c)}function s0(c,d){return hf===null&&pf(c),bN(c,d)}function bN(c,d){var m=d._currentValue;if(d={context:d,memoizedValue:m,next:null},dc===null){if(c===null)throw Error(r(308));dc=d,c.dependencies={lanes:0,firstContext:d},c.flags|=524288}else dc=dc.next=d;return m}var tK=typeof AbortController<"u"?AbortController:function(){var c=[],d=this.signal={aborted:!1,addEventListener:function(m,y){c.push(y)}};this.abort=function(){d.aborted=!0,c.forEach(function(m){return m()})}},nK=t.unstable_scheduleCallback,rK=t.unstable_NormalPriority,fo={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hx(){return{controller:new tK,data:new Map,refCount:0}}function Ym(c){c.refCount--,c.refCount===0&&nK(rK,function(){c.controller.abort()})}var Xm=null,px=0,Oh=0,Ph=null;function oK(c,d){if(Xm===null){var m=Xm=[];px=0,Oh=gE(),Ph={status:"pending",value:void 0,then:function(y){m.push(y)}}}return px++,d.then(wN,wN),d}function wN(){if(--px===0&&Xm!==null){Ph!==null&&(Ph.status="fulfilled");var c=Xm;Xm=null,Oh=0,Ph=null;for(var d=0;d<c.length;d++)(0,c[d])()}}function iK(c,d){var m=[],y={status:"pending",value:null,reason:null,then:function(x){m.push(x)}};return c.then(function(){y.status="fulfilled",y.value=d;for(var x=0;x<m.length;x++)(0,m[x])(d)},function(x){for(y.status="rejected",y.reason=x,x=0;x<m.length;x++)(0,m[x])(void 0)}),y}var CN=j.S;j.S=function(c,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&oK(c,d),CN!==null&&CN(c,d)};var mf=se(null);function mx(){var c=mf.current;return c!==null?c:ur.pooledCache}function a0(c,d){d===null?ie(mf,mf.current):ie(mf,d.pool)}function SN(){var c=mx();return c===null?null:{parent:fo._currentValue,pool:c}}var Qm=Error(r(460)),xN=Error(r(474)),l0=Error(r(542)),gx={then:function(){}};function EN(c){return c=c.status,c==="fulfilled"||c==="rejected"}function c0(){}function _N(c,d,m){switch(m=c[m],m===void 0?c.push(d):m!==d&&(d.then(c0,c0),d=m),d.status){case"fulfilled":return d.value;case"rejected":throw c=d.reason,TN(c),c;default:if(typeof d.status=="string")d.then(c0,c0);else{if(c=ur,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=d,c.status="pending",c.then(function(y){if(d.status==="pending"){var x=d;x.status="fulfilled",x.value=y}},function(y){if(d.status==="pending"){var x=d;x.status="rejected",x.reason=y}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw c=d.reason,TN(c),c}throw Zm=d,Qm}}var Zm=null;function kN(){if(Zm===null)throw Error(r(459));var c=Zm;return Zm=null,c}function TN(c){if(c===Qm||c===l0)throw Error(r(483))}var wu=!1;function yx(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vx(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Cu(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Su(c,d,m){var y=c.updateQueue;if(y===null)return null;if(y=y.shared,(Yn&2)!==0){var x=y.pending;return x===null?d.next=d:(d.next=x.next,x.next=d),y.pending=d,d=Ys(c),So(c,null,m),d}return Ur(c,y,d,m),Ys(c)}function Jm(c,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194048)!==0)){var y=d.lanes;y&=c.pendingLanes,m|=y,d.lanes=m,Tn(c,m)}}function bx(c,d){var m=c.updateQueue,y=c.alternate;if(y!==null&&(y=y.updateQueue,m===y)){var x=null,A=null;if(m=m.firstBaseUpdate,m!==null){do{var G={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};A===null?x=A=G:A=A.next=G,m=m.next}while(m!==null);A===null?x=A=d:A=A.next=d}else x=A=d;m={baseState:y.baseState,firstBaseUpdate:x,lastBaseUpdate:A,shared:y.shared,callbacks:y.callbacks},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=d}var wx=!1;function eg(){if(wx){var c=Ph;if(c!==null)throw c}}function tg(c,d,m,y){wx=!1;var x=c.updateQueue;wu=!1;var A=x.firstBaseUpdate,G=x.lastBaseUpdate,Q=x.shared.pending;if(Q!==null){x.shared.pending=null;var ce=Q,ke=ce.next;ce.next=null,G===null?A=ke:G.next=ke,G=ce;var je=c.alternate;je!==null&&(je=je.updateQueue,Q=je.lastBaseUpdate,Q!==G&&(Q===null?je.firstBaseUpdate=ke:Q.next=ke,je.lastBaseUpdate=ce))}if(A!==null){var $e=x.baseState;G=0,je=ke=ce=null,Q=A;do{var Ae=Q.lane&-536870913,Re=Ae!==Q.lane;if(Re?(Rn&Ae)===Ae:(y&Ae)===Ae){Ae!==0&&Ae===Oh&&(wx=!0),je!==null&&(je=je.next={lane:0,tag:Q.tag,payload:Q.payload,callback:null,next:null});e:{var Nt=c,_t=Q;Ae=d;var tr=m;switch(_t.tag){case 1:if(Nt=_t.payload,typeof Nt=="function"){$e=Nt.call(tr,$e,Ae);break e}$e=Nt;break e;case 3:Nt.flags=Nt.flags&-65537|128;case 0:if(Nt=_t.payload,Ae=typeof Nt=="function"?Nt.call(tr,$e,Ae):Nt,Ae==null)break e;$e=f({},$e,Ae);break e;case 2:wu=!0}}Ae=Q.callback,Ae!==null&&(c.flags|=64,Re&&(c.flags|=8192),Re=x.callbacks,Re===null?x.callbacks=[Ae]:Re.push(Ae))}else Re={lane:Ae,tag:Q.tag,payload:Q.payload,callback:Q.callback,next:null},je===null?(ke=je=Re,ce=$e):je=je.next=Re,G|=Ae;if(Q=Q.next,Q===null){if(Q=x.shared.pending,Q===null)break;Re=Q,Q=Re.next,Re.next=null,x.lastBaseUpdate=Re,x.shared.pending=null}}while(!0);je===null&&(ce=$e),x.baseState=ce,x.firstBaseUpdate=ke,x.lastBaseUpdate=je,A===null&&(x.shared.lanes=0),Mu|=G,c.lanes=G,c.memoizedState=$e}}function AN(c,d){if(typeof c!="function")throw Error(r(191,c));c.call(d)}function RN(c,d){var m=c.callbacks;if(m!==null)for(c.callbacks=null,c=0;c<m.length;c++)AN(m[c],d)}var Lh=se(null),u0=se(0);function MN(c,d){c=bc,ie(u0,c),ie(Lh,d),bc=c|d.baseLanes}function Cx(){ie(u0,bc),ie(Lh,Lh.current)}function Sx(){bc=u0.current,te(Lh),te(u0)}var xu=0,rn=null,Jn=null,eo=null,d0=!1,Vh=!1,gf=!1,f0=0,ng=0,jh=null,sK=0;function qr(){throw Error(r(321))}function xx(c,d){if(d===null)return!1;for(var m=0;m<d.length&&m<c.length;m++)if(!oi(c[m],d[m]))return!1;return!0}function Ex(c,d,m,y,x,A){return xu=A,rn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,j.H=c===null||c.memoizedState===null?hD:pD,gf=!1,A=m(y,x),gf=!1,Vh&&(A=NN(d,m,y,x)),IN(c),A}function IN(c){j.H=v0;var d=Jn!==null&&Jn.next!==null;if(xu=0,eo=Jn=rn=null,d0=!1,ng=0,jh=null,d)throw Error(r(300));c===null||xo||(c=c.dependencies,c!==null&&i0(c)&&(xo=!0))}function NN(c,d,m,y){rn=c;var x=0;do{if(Vh&&(jh=null),ng=0,Vh=!1,25<=x)throw Error(r(301));if(x+=1,eo=Jn=null,c.updateQueue!=null){var A=c.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}j.H=hK,A=d(m,y)}while(Vh);return A}function aK(){var c=j.H,d=c.useState()[0];return d=typeof d.then=="function"?rg(d):d,c=c.useState()[0],(Jn!==null?Jn.memoizedState:null)!==c&&(rn.flags|=1024),d}function _x(){var c=f0!==0;return f0=0,c}function kx(c,d,m){d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~m}function Tx(c){if(d0){for(c=c.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}d0=!1}xu=0,eo=Jn=rn=null,Vh=!1,ng=f0=0,jh=null}function qi(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return eo===null?rn.memoizedState=eo=c:eo=eo.next=c,eo}function to(){if(Jn===null){var c=rn.alternate;c=c!==null?c.memoizedState:null}else c=Jn.next;var d=eo===null?rn.memoizedState:eo.next;if(d!==null)eo=d,Jn=c;else{if(c===null)throw rn.alternate===null?Error(r(467)):Error(r(310));Jn=c,c={memoizedState:Jn.memoizedState,baseState:Jn.baseState,baseQueue:Jn.baseQueue,queue:Jn.queue,next:null},eo===null?rn.memoizedState=eo=c:eo=eo.next=c}return eo}function Ax(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rg(c){var d=ng;return ng+=1,jh===null&&(jh=[]),c=_N(jh,c,d),d=rn,(eo===null?d.memoizedState:eo.next)===null&&(d=d.alternate,j.H=d===null||d.memoizedState===null?hD:pD),c}function h0(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return rg(c);if(c.$$typeof===D)return ii(c)}throw Error(r(438,String(c)))}function Rx(c){var d=null,m=rn.updateQueue;if(m!==null&&(d=m.memoCache),d==null){var y=rn.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(d={data:y.data.map(function(x){return x.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),m===null&&(m=Ax(),rn.updateQueue=m),m.memoCache=d,m=d.data[d.index],m===void 0)for(m=d.data[d.index]=Array(c),y=0;y<c;y++)m[y]=B;return d.index++,m}function hc(c,d){return typeof d=="function"?d(c):d}function p0(c){var d=to();return Mx(d,Jn,c)}function Mx(c,d,m){var y=c.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=m;var x=c.baseQueue,A=y.pending;if(A!==null){if(x!==null){var G=x.next;x.next=A.next,A.next=G}d.baseQueue=x=A,y.pending=null}if(A=c.baseState,x===null)c.memoizedState=A;else{d=x.next;var Q=G=null,ce=null,ke=d,je=!1;do{var $e=ke.lane&-536870913;if($e!==ke.lane?(Rn&$e)===$e:(xu&$e)===$e){var Ae=ke.revertLane;if(Ae===0)ce!==null&&(ce=ce.next={lane:0,revertLane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),$e===Oh&&(je=!0);else if((xu&Ae)===Ae){ke=ke.next,Ae===Oh&&(je=!0);continue}else $e={lane:0,revertLane:ke.revertLane,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},ce===null?(Q=ce=$e,G=A):ce=ce.next=$e,rn.lanes|=Ae,Mu|=Ae;$e=ke.action,gf&&m(A,$e),A=ke.hasEagerState?ke.eagerState:m(A,$e)}else Ae={lane:$e,revertLane:ke.revertLane,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},ce===null?(Q=ce=Ae,G=A):ce=ce.next=Ae,rn.lanes|=$e,Mu|=$e;ke=ke.next}while(ke!==null&&ke!==d);if(ce===null?G=A:ce.next=Q,!oi(A,c.memoizedState)&&(xo=!0,je&&(m=Ph,m!==null)))throw m;c.memoizedState=A,c.baseState=G,c.baseQueue=ce,y.lastRenderedState=A}return x===null&&(y.lanes=0),[c.memoizedState,y.dispatch]}function Ix(c){var d=to(),m=d.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var y=m.dispatch,x=m.pending,A=d.memoizedState;if(x!==null){m.pending=null;var G=x=x.next;do A=c(A,G.action),G=G.next;while(G!==x);oi(A,d.memoizedState)||(xo=!0),d.memoizedState=A,d.baseQueue===null&&(d.baseState=A),m.lastRenderedState=A}return[A,y]}function DN(c,d,m){var y=rn,x=to(),A=Bn;if(A){if(m===void 0)throw Error(r(407));m=m()}else m=d();var G=!oi((Jn||x).memoizedState,m);G&&(x.memoizedState=m,xo=!0),x=x.queue;var Q=LN.bind(null,y,x,c);if(og(2048,8,Q,[c]),x.getSnapshot!==d||G||eo!==null&&eo.memoizedState.tag&1){if(y.flags|=2048,Bh(9,m0(),PN.bind(null,y,x,m,d),null),ur===null)throw Error(r(349));A||(xu&124)!==0||ON(y,d,m)}return m}function ON(c,d,m){c.flags|=16384,c={getSnapshot:d,value:m},d=rn.updateQueue,d===null?(d=Ax(),rn.updateQueue=d,d.stores=[c]):(m=d.stores,m===null?d.stores=[c]:m.push(c))}function PN(c,d,m,y){d.value=m,d.getSnapshot=y,VN(d)&&jN(c)}function LN(c,d,m){return m(function(){VN(d)&&jN(c)})}function VN(c){var d=c.getSnapshot;c=c.value;try{var m=d();return!oi(c,m)}catch{return!0}}function jN(c){var d=Na(c,2);d!==null&&bs(d,c,2)}function Nx(c){var d=qi();if(typeof c=="function"){var m=c;if(c=m(),gf){un(!0);try{m()}finally{un(!1)}}}return d.memoizedState=d.baseState=c,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hc,lastRenderedState:c},d}function BN(c,d,m,y){return c.baseState=m,Mx(c,Jn,typeof y=="function"?y:hc)}function lK(c,d,m,y,x){if(y0(c))throw Error(r(485));if(c=d.action,c!==null){var A={payload:x,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(G){A.listeners.push(G)}};j.T!==null?m(!0):A.isTransition=!1,y(A),m=d.pending,m===null?(A.next=d.pending=A,$N(d,A)):(A.next=m.next,d.pending=m.next=A)}}function $N(c,d){var m=d.action,y=d.payload,x=c.state;if(d.isTransition){var A=j.T,G={};j.T=G;try{var Q=m(x,y),ce=j.S;ce!==null&&ce(G,Q),HN(c,d,Q)}catch(ke){Dx(c,d,ke)}finally{j.T=A}}else try{A=m(x,y),HN(c,d,A)}catch(ke){Dx(c,d,ke)}}function HN(c,d,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(y){FN(c,d,y)},function(y){return Dx(c,d,y)}):FN(c,d,m)}function FN(c,d,m){d.status="fulfilled",d.value=m,zN(d),c.state=m,d=c.pending,d!==null&&(m=d.next,m===d?c.pending=null:(m=m.next,d.next=m,$N(c,m)))}function Dx(c,d,m){var y=c.pending;if(c.pending=null,y!==null){y=y.next;do d.status="rejected",d.reason=m,zN(d),d=d.next;while(d!==y)}c.action=null}function zN(c){c=c.listeners;for(var d=0;d<c.length;d++)(0,c[d])()}function UN(c,d){return d}function qN(c,d){if(Bn){var m=ur.formState;if(m!==null){e:{var y=rn;if(Bn){if(Or){t:{for(var x=Or,A=pl;x.nodeType!==8;){if(!A){x=null;break t}if(x=Oa(x.nextSibling),x===null){x=null;break t}}A=x.data,x=A==="F!"||A==="F"?x:null}if(x){Or=Oa(x.nextSibling),y=x.data==="F!";break e}}ff(y)}y=!1}y&&(d=m[0])}}return m=qi(),m.memoizedState=m.baseState=d,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:UN,lastRenderedState:d},m.queue=y,m=uD.bind(null,rn,y),y.dispatch=m,y=Nx(!1),A=jx.bind(null,rn,!1,y.queue),y=qi(),x={state:d,dispatch:null,action:c,pending:null},y.queue=x,m=lK.bind(null,rn,x,A,m),x.dispatch=m,y.memoizedState=c,[d,m,!1]}function GN(c){var d=to();return KN(d,Jn,c)}function KN(c,d,m){if(d=Mx(c,d,UN)[0],c=p0(hc)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var y=rg(d)}catch(G){throw G===Qm?l0:G}else y=d;d=to();var x=d.queue,A=x.dispatch;return m!==d.memoizedState&&(rn.flags|=2048,Bh(9,m0(),cK.bind(null,x,m),null)),[y,A,c]}function cK(c,d){c.action=d}function WN(c){var d=to(),m=Jn;if(m!==null)return KN(d,m,c);to(),d=d.memoizedState,m=to();var y=m.queue.dispatch;return m.memoizedState=c,[d,y,!1]}function Bh(c,d,m,y){return c={tag:c,create:m,deps:y,inst:d,next:null},d=rn.updateQueue,d===null&&(d=Ax(),rn.updateQueue=d),m=d.lastEffect,m===null?d.lastEffect=c.next=c:(y=m.next,m.next=c,c.next=y,d.lastEffect=c),c}function m0(){return{destroy:void 0,resource:void 0}}function YN(){return to().memoizedState}function g0(c,d,m,y){var x=qi();y=y===void 0?null:y,rn.flags|=c,x.memoizedState=Bh(1|d,m0(),m,y)}function og(c,d,m,y){var x=to();y=y===void 0?null:y;var A=x.memoizedState.inst;Jn!==null&&y!==null&&xx(y,Jn.memoizedState.deps)?x.memoizedState=Bh(d,A,m,y):(rn.flags|=c,x.memoizedState=Bh(1|d,A,m,y))}function XN(c,d){g0(8390656,8,c,d)}function QN(c,d){og(2048,8,c,d)}function ZN(c,d){return og(4,2,c,d)}function JN(c,d){return og(4,4,c,d)}function eD(c,d){if(typeof d=="function"){c=c();var m=d(c);return function(){typeof m=="function"?m():d(null)}}if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function tD(c,d,m){m=m!=null?m.concat([c]):null,og(4,4,eD.bind(null,d,c),m)}function Ox(){}function nD(c,d){var m=to();d=d===void 0?null:d;var y=m.memoizedState;return d!==null&&xx(d,y[1])?y[0]:(m.memoizedState=[c,d],c)}function rD(c,d){var m=to();d=d===void 0?null:d;var y=m.memoizedState;if(d!==null&&xx(d,y[1]))return y[0];if(y=c(),gf){un(!0);try{c()}finally{un(!1)}}return m.memoizedState=[y,d],y}function Px(c,d,m){return m===void 0||(xu&1073741824)!==0?c.memoizedState=d:(c.memoizedState=m,c=sO(),rn.lanes|=c,Mu|=c,m)}function oD(c,d,m,y){return oi(m,d)?m:Lh.current!==null?(c=Px(c,m,y),oi(c,d)||(xo=!0),c):(xu&42)===0?(xo=!0,c.memoizedState=m):(c=sO(),rn.lanes|=c,Mu|=c,d)}function iD(c,d,m,y,x){var A=U.p;U.p=A!==0&&8>A?A:8;var G=j.T,Q={};j.T=Q,jx(c,!1,d,m);try{var ce=x(),ke=j.S;if(ke!==null&&ke(Q,ce),ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var je=iK(ce,y);ig(c,d,je,vs(c))}else ig(c,d,y,vs(c))}catch($e){ig(c,d,{then:function(){},status:"rejected",reason:$e},vs())}finally{U.p=A,j.T=G}}function uK(){}function Lx(c,d,m,y){if(c.tag!==5)throw Error(r(476));var x=sD(c).queue;iD(c,x,d,Z,m===null?uK:function(){return aD(c),m(y)})}function sD(c){var d=c.memoizedState;if(d!==null)return d;d={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hc,lastRenderedState:Z},next:null};var m={};return d.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hc,lastRenderedState:m},next:null},c.memoizedState=d,c=c.alternate,c!==null&&(c.memoizedState=d),d}function aD(c){var d=sD(c).next.queue;ig(c,d,{},vs())}function Vx(){return ii(xg)}function lD(){return to().memoizedState}function cD(){return to().memoizedState}function dK(c){for(var d=c.return;d!==null;){switch(d.tag){case 24:case 3:var m=vs();c=Cu(m);var y=Su(d,c,m);y!==null&&(bs(y,d,m),Jm(y,d,m)),d={cache:hx()},c.payload=d;return}d=d.return}}function fK(c,d,m){var y=vs();m={lane:y,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},y0(c)?dD(d,m):(m=Jr(c,d,m,y),m!==null&&(bs(m,c,y),fD(m,d,y)))}function uD(c,d,m){var y=vs();ig(c,d,m,y)}function ig(c,d,m,y){var x={lane:y,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(y0(c))dD(d,x);else{var A=c.alternate;if(c.lanes===0&&(A===null||A.lanes===0)&&(A=d.lastRenderedReducer,A!==null))try{var G=d.lastRenderedState,Q=A(G,m);if(x.hasEagerState=!0,x.eagerState=Q,oi(Q,G))return Ur(c,d,x,0),ur===null&&It(),!1}catch{}finally{}if(m=Jr(c,d,x,y),m!==null)return bs(m,c,y),fD(m,d,y),!0}return!1}function jx(c,d,m,y){if(y={lane:2,revertLane:gE(),action:y,hasEagerState:!1,eagerState:null,next:null},y0(c)){if(d)throw Error(r(479))}else d=Jr(c,m,y,2),d!==null&&bs(d,c,2)}function y0(c){var d=c.alternate;return c===rn||d!==null&&d===rn}function dD(c,d){Vh=d0=!0;var m=c.pending;m===null?d.next=d:(d.next=m.next,m.next=d),c.pending=d}function fD(c,d,m){if((m&4194048)!==0){var y=d.lanes;y&=c.pendingLanes,m|=y,d.lanes=m,Tn(c,m)}}var v0={readContext:ii,use:h0,useCallback:qr,useContext:qr,useEffect:qr,useImperativeHandle:qr,useLayoutEffect:qr,useInsertionEffect:qr,useMemo:qr,useReducer:qr,useRef:qr,useState:qr,useDebugValue:qr,useDeferredValue:qr,useTransition:qr,useSyncExternalStore:qr,useId:qr,useHostTransitionStatus:qr,useFormState:qr,useActionState:qr,useOptimistic:qr,useMemoCache:qr,useCacheRefresh:qr},hD={readContext:ii,use:h0,useCallback:function(c,d){return qi().memoizedState=[c,d===void 0?null:d],c},useContext:ii,useEffect:XN,useImperativeHandle:function(c,d,m){m=m!=null?m.concat([c]):null,g0(4194308,4,eD.bind(null,d,c),m)},useLayoutEffect:function(c,d){return g0(4194308,4,c,d)},useInsertionEffect:function(c,d){g0(4,2,c,d)},useMemo:function(c,d){var m=qi();d=d===void 0?null:d;var y=c();if(gf){un(!0);try{c()}finally{un(!1)}}return m.memoizedState=[y,d],y},useReducer:function(c,d,m){var y=qi();if(m!==void 0){var x=m(d);if(gf){un(!0);try{m(d)}finally{un(!1)}}}else x=d;return y.memoizedState=y.baseState=x,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:x},y.queue=c,c=c.dispatch=fK.bind(null,rn,c),[y.memoizedState,c]},useRef:function(c){var d=qi();return c={current:c},d.memoizedState=c},useState:function(c){c=Nx(c);var d=c.queue,m=uD.bind(null,rn,d);return d.dispatch=m,[c.memoizedState,m]},useDebugValue:Ox,useDeferredValue:function(c,d){var m=qi();return Px(m,c,d)},useTransition:function(){var c=Nx(!1);return c=iD.bind(null,rn,c.queue,!0,!1),qi().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,d,m){var y=rn,x=qi();if(Bn){if(m===void 0)throw Error(r(407));m=m()}else{if(m=d(),ur===null)throw Error(r(349));(Rn&124)!==0||ON(y,d,m)}x.memoizedState=m;var A={value:m,getSnapshot:d};return x.queue=A,XN(LN.bind(null,y,A,c),[c]),y.flags|=2048,Bh(9,m0(),PN.bind(null,y,A,m,d),null),m},useId:function(){var c=qi(),d=ur.identifierPrefix;if(Bn){var m=uc,y=cc;m=(y&~(1<<32-kn(y)-1)).toString(32)+m,d=""+d+"R"+m,m=f0++,0<m&&(d+="H"+m.toString(32)),d+=""}else m=sK++,d=""+d+"r"+m.toString(32)+"";return c.memoizedState=d},useHostTransitionStatus:Vx,useFormState:qN,useActionState:qN,useOptimistic:function(c){var d=qi();d.memoizedState=d.baseState=c;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=m,d=jx.bind(null,rn,!0,m),m.dispatch=d,[c,d]},useMemoCache:Rx,useCacheRefresh:function(){return qi().memoizedState=dK.bind(null,rn)}},pD={readContext:ii,use:h0,useCallback:nD,useContext:ii,useEffect:QN,useImperativeHandle:tD,useInsertionEffect:ZN,useLayoutEffect:JN,useMemo:rD,useReducer:p0,useRef:YN,useState:function(){return p0(hc)},useDebugValue:Ox,useDeferredValue:function(c,d){var m=to();return oD(m,Jn.memoizedState,c,d)},useTransition:function(){var c=p0(hc)[0],d=to().memoizedState;return[typeof c=="boolean"?c:rg(c),d]},useSyncExternalStore:DN,useId:lD,useHostTransitionStatus:Vx,useFormState:GN,useActionState:GN,useOptimistic:function(c,d){var m=to();return BN(m,Jn,c,d)},useMemoCache:Rx,useCacheRefresh:cD},hK={readContext:ii,use:h0,useCallback:nD,useContext:ii,useEffect:QN,useImperativeHandle:tD,useInsertionEffect:ZN,useLayoutEffect:JN,useMemo:rD,useReducer:Ix,useRef:YN,useState:function(){return Ix(hc)},useDebugValue:Ox,useDeferredValue:function(c,d){var m=to();return Jn===null?Px(m,c,d):oD(m,Jn.memoizedState,c,d)},useTransition:function(){var c=Ix(hc)[0],d=to().memoizedState;return[typeof c=="boolean"?c:rg(c),d]},useSyncExternalStore:DN,useId:lD,useHostTransitionStatus:Vx,useFormState:WN,useActionState:WN,useOptimistic:function(c,d){var m=to();return Jn!==null?BN(m,Jn,c,d):(m.baseState=c,[c,m.queue.dispatch])},useMemoCache:Rx,useCacheRefresh:cD},$h=null,sg=0;function b0(c){var d=sg;return sg+=1,$h===null&&($h=[]),_N($h,c,d)}function ag(c,d){d=d.props.ref,c.ref=d!==void 0?d:null}function w0(c,d){throw d.$$typeof===h?Error(r(525)):(c=Object.prototype.toString.call(d),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c)))}function mD(c){var d=c._init;return d(c._payload)}function gD(c){function d(we,pe){if(c){var _e=we.deletions;_e===null?(we.deletions=[pe],we.flags|=16):_e.push(pe)}}function m(we,pe){if(!c)return null;for(;pe!==null;)d(we,pe),pe=pe.sibling;return null}function y(we){for(var pe=new Map;we!==null;)we.key!==null?pe.set(we.key,we):pe.set(we.index,we),we=we.sibling;return pe}function x(we,pe){return we=lc(we,pe),we.index=0,we.sibling=null,we}function A(we,pe,_e){return we.index=_e,c?(_e=we.alternate,_e!==null?(_e=_e.index,_e<pe?(we.flags|=67108866,pe):_e):(we.flags|=67108866,pe)):(we.flags|=1048576,pe)}function G(we){return c&&we.alternate===null&&(we.flags|=67108866),we}function Q(we,pe,_e,Be){return pe===null||pe.tag!==6?(pe=ix(_e,we.mode,Be),pe.return=we,pe):(pe=x(pe,_e),pe.return=we,pe)}function ce(we,pe,_e,Be){var lt=_e.type;return lt===v?je(we,pe,_e.props.children,Be,_e.key):pe!==null&&(pe.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===R&&mD(lt)===pe.type)?(pe=x(pe,_e.props),ag(pe,_e),pe.return=we,pe):(pe=n0(_e.type,_e.key,_e.props,null,we.mode,Be),ag(pe,_e),pe.return=we,pe)}function ke(we,pe,_e,Be){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==_e.containerInfo||pe.stateNode.implementation!==_e.implementation?(pe=sx(_e,we.mode,Be),pe.return=we,pe):(pe=x(pe,_e.children||[]),pe.return=we,pe)}function je(we,pe,_e,Be,lt){return pe===null||pe.tag!==7?(pe=lf(_e,we.mode,Be,lt),pe.return=we,pe):(pe=x(pe,_e),pe.return=we,pe)}function $e(we,pe,_e){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return pe=ix(""+pe,we.mode,_e),pe.return=we,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case p:return _e=n0(pe.type,pe.key,pe.props,null,we.mode,_e),ag(_e,pe),_e.return=we,_e;case g:return pe=sx(pe,we.mode,_e),pe.return=we,pe;case R:var Be=pe._init;return pe=Be(pe._payload),$e(we,pe,_e)}if(oe(pe)||K(pe))return pe=lf(pe,we.mode,_e,null),pe.return=we,pe;if(typeof pe.then=="function")return $e(we,b0(pe),_e);if(pe.$$typeof===D)return $e(we,s0(we,pe),_e);w0(we,pe)}return null}function Ae(we,pe,_e,Be){var lt=pe!==null?pe.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint")return lt!==null?null:Q(we,pe,""+_e,Be);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case p:return _e.key===lt?ce(we,pe,_e,Be):null;case g:return _e.key===lt?ke(we,pe,_e,Be):null;case R:return lt=_e._init,_e=lt(_e._payload),Ae(we,pe,_e,Be)}if(oe(_e)||K(_e))return lt!==null?null:je(we,pe,_e,Be,null);if(typeof _e.then=="function")return Ae(we,pe,b0(_e),Be);if(_e.$$typeof===D)return Ae(we,pe,s0(we,_e),Be);w0(we,_e)}return null}function Re(we,pe,_e,Be,lt){if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return we=we.get(_e)||null,Q(pe,we,""+Be,lt);if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case p:return we=we.get(Be.key===null?_e:Be.key)||null,ce(pe,we,Be,lt);case g:return we=we.get(Be.key===null?_e:Be.key)||null,ke(pe,we,Be,lt);case R:var ln=Be._init;return Be=ln(Be._payload),Re(we,pe,_e,Be,lt)}if(oe(Be)||K(Be))return we=we.get(_e)||null,je(pe,we,Be,lt,null);if(typeof Be.then=="function")return Re(we,pe,_e,b0(Be),lt);if(Be.$$typeof===D)return Re(we,pe,_e,s0(pe,Be),lt);w0(pe,Be)}return null}function Nt(we,pe,_e,Be){for(var lt=null,ln=null,gt=pe,Tt=pe=0,_o=null;gt!==null&&Tt<_e.length;Tt++){gt.index>Tt?(_o=gt,gt=null):_o=gt.sibling;var On=Ae(we,gt,_e[Tt],Be);if(On===null){gt===null&&(gt=_o);break}c&&gt&&On.alternate===null&&d(we,gt),pe=A(On,pe,Tt),ln===null?lt=On:ln.sibling=On,ln=On,gt=_o}if(Tt===_e.length)return m(we,gt),Bn&&uf(we,Tt),lt;if(gt===null){for(;Tt<_e.length;Tt++)gt=$e(we,_e[Tt],Be),gt!==null&&(pe=A(gt,pe,Tt),ln===null?lt=gt:ln.sibling=gt,ln=gt);return Bn&&uf(we,Tt),lt}for(gt=y(gt);Tt<_e.length;Tt++)_o=Re(gt,we,Tt,_e[Tt],Be),_o!==null&&(c&&_o.alternate!==null&&gt.delete(_o.key===null?Tt:_o.key),pe=A(_o,pe,Tt),ln===null?lt=_o:ln.sibling=_o,ln=_o);return c&&gt.forEach(function(Bu){return d(we,Bu)}),Bn&&uf(we,Tt),lt}function _t(we,pe,_e,Be){if(_e==null)throw Error(r(151));for(var lt=null,ln=null,gt=pe,Tt=pe=0,_o=null,On=_e.next();gt!==null&&!On.done;Tt++,On=_e.next()){gt.index>Tt?(_o=gt,gt=null):_o=gt.sibling;var Bu=Ae(we,gt,On.value,Be);if(Bu===null){gt===null&&(gt=_o);break}c&&gt&&Bu.alternate===null&&d(we,gt),pe=A(Bu,pe,Tt),ln===null?lt=Bu:ln.sibling=Bu,ln=Bu,gt=_o}if(On.done)return m(we,gt),Bn&&uf(we,Tt),lt;if(gt===null){for(;!On.done;Tt++,On=_e.next())On=$e(we,On.value,Be),On!==null&&(pe=A(On,pe,Tt),ln===null?lt=On:ln.sibling=On,ln=On);return Bn&&uf(we,Tt),lt}for(gt=y(gt);!On.done;Tt++,On=_e.next())On=Re(gt,we,Tt,On.value,Be),On!==null&&(c&&On.alternate!==null&&gt.delete(On.key===null?Tt:On.key),pe=A(On,pe,Tt),ln===null?lt=On:ln.sibling=On,ln=On);return c&&gt.forEach(function(pW){return d(we,pW)}),Bn&&uf(we,Tt),lt}function tr(we,pe,_e,Be){if(typeof _e=="object"&&_e!==null&&_e.type===v&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case p:e:{for(var lt=_e.key;pe!==null;){if(pe.key===lt){if(lt=_e.type,lt===v){if(pe.tag===7){m(we,pe.sibling),Be=x(pe,_e.props.children),Be.return=we,we=Be;break e}}else if(pe.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===R&&mD(lt)===pe.type){m(we,pe.sibling),Be=x(pe,_e.props),ag(Be,_e),Be.return=we,we=Be;break e}m(we,pe);break}else d(we,pe);pe=pe.sibling}_e.type===v?(Be=lf(_e.props.children,we.mode,Be,_e.key),Be.return=we,we=Be):(Be=n0(_e.type,_e.key,_e.props,null,we.mode,Be),ag(Be,_e),Be.return=we,we=Be)}return G(we);case g:e:{for(lt=_e.key;pe!==null;){if(pe.key===lt)if(pe.tag===4&&pe.stateNode.containerInfo===_e.containerInfo&&pe.stateNode.implementation===_e.implementation){m(we,pe.sibling),Be=x(pe,_e.children||[]),Be.return=we,we=Be;break e}else{m(we,pe);break}else d(we,pe);pe=pe.sibling}Be=sx(_e,we.mode,Be),Be.return=we,we=Be}return G(we);case R:return lt=_e._init,_e=lt(_e._payload),tr(we,pe,_e,Be)}if(oe(_e))return Nt(we,pe,_e,Be);if(K(_e)){if(lt=K(_e),typeof lt!="function")throw Error(r(150));return _e=lt.call(_e),_t(we,pe,_e,Be)}if(typeof _e.then=="function")return tr(we,pe,b0(_e),Be);if(_e.$$typeof===D)return tr(we,pe,s0(we,_e),Be);w0(we,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"||typeof _e=="bigint"?(_e=""+_e,pe!==null&&pe.tag===6?(m(we,pe.sibling),Be=x(pe,_e),Be.return=we,we=Be):(m(we,pe),Be=ix(_e,we.mode,Be),Be.return=we,we=Be),G(we)):m(we,pe)}return function(we,pe,_e,Be){try{sg=0;var lt=tr(we,pe,_e,Be);return $h=null,lt}catch(gt){if(gt===Qm||gt===l0)throw gt;var ln=ps(29,gt,null,we.mode);return ln.lanes=Be,ln.return=we,ln}finally{}}}var Hh=gD(!0),yD=gD(!1),Zs=se(null),ml=null;function Eu(c){var d=c.alternate;ie(ho,ho.current&1),ie(Zs,c),ml===null&&(d===null||Lh.current!==null||d.memoizedState!==null)&&(ml=c)}function vD(c){if(c.tag===22){if(ie(ho,ho.current),ie(Zs,c),ml===null){var d=c.alternate;d!==null&&d.memoizedState!==null&&(ml=c)}}else _u()}function _u(){ie(ho,ho.current),ie(Zs,Zs.current)}function pc(c){te(Zs),ml===c&&(ml=null),te(ho)}var ho=se(0);function C0(c){for(var d=c;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||AE(m)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function Bx(c,d,m,y){d=c.memoizedState,m=m(y,d),m=m==null?d:f({},d,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var $x={enqueueSetState:function(c,d,m){c=c._reactInternals;var y=vs(),x=Cu(y);x.payload=d,m!=null&&(x.callback=m),d=Su(c,x,y),d!==null&&(bs(d,c,y),Jm(d,c,y))},enqueueReplaceState:function(c,d,m){c=c._reactInternals;var y=vs(),x=Cu(y);x.tag=1,x.payload=d,m!=null&&(x.callback=m),d=Su(c,x,y),d!==null&&(bs(d,c,y),Jm(d,c,y))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var m=vs(),y=Cu(m);y.tag=2,d!=null&&(y.callback=d),d=Su(c,y,m),d!==null&&(bs(d,c,m),Jm(d,c,m))}};function bD(c,d,m,y,x,A,G){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(y,A,G):d.prototype&&d.prototype.isPureReactComponent?!S(m,y)||!S(x,A):!0}function wD(c,d,m,y){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,y),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,y),d.state!==c&&$x.enqueueReplaceState(d,d.state,null)}function yf(c,d){var m=d;if("ref"in d){m={};for(var y in d)y!=="ref"&&(m[y]=d[y])}if(c=c.defaultProps){m===d&&(m=f({},m));for(var x in c)m[x]===void 0&&(m[x]=c[x])}return m}var S0=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function CD(c){S0(c)}function SD(c){console.error(c)}function xD(c){S0(c)}function x0(c,d){try{var m=c.onUncaughtError;m(d.value,{componentStack:d.stack})}catch(y){setTimeout(function(){throw y})}}function ED(c,d,m){try{var y=c.onCaughtError;y(m.value,{componentStack:m.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Hx(c,d,m){return m=Cu(m),m.tag=3,m.payload={element:null},m.callback=function(){x0(c,d)},m}function _D(c){return c=Cu(c),c.tag=3,c}function kD(c,d,m,y){var x=m.type.getDerivedStateFromError;if(typeof x=="function"){var A=y.value;c.payload=function(){return x(A)},c.callback=function(){ED(d,m,y)}}var G=m.stateNode;G!==null&&typeof G.componentDidCatch=="function"&&(c.callback=function(){ED(d,m,y),typeof x!="function"&&(Iu===null?Iu=new Set([this]):Iu.add(this));var Q=y.stack;this.componentDidCatch(y.value,{componentStack:Q!==null?Q:""})})}function pK(c,d,m,y,x){if(m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(d=m.alternate,d!==null&&Wm(d,m,x,!0),m=Zs.current,m!==null){switch(m.tag){case 13:return ml===null?dE():m.alternate===null&&Pr===0&&(Pr=3),m.flags&=-257,m.flags|=65536,m.lanes=x,y===gx?m.flags|=16384:(d=m.updateQueue,d===null?m.updateQueue=new Set([y]):d.add(y),hE(c,y,x)),!1;case 22:return m.flags|=65536,y===gx?m.flags|=16384:(d=m.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([y])},m.updateQueue=d):(m=d.retryQueue,m===null?d.retryQueue=new Set([y]):m.add(y)),hE(c,y,x)),!1}throw Error(r(435,m.tag))}return hE(c,y,x),dE(),!1}if(Bn)return d=Zs.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=x,y!==cx&&(c=Error(r(422),{cause:y}),Km(yt(c,m)))):(y!==cx&&(d=Error(r(423),{cause:y}),Km(yt(d,m))),c=c.current.alternate,c.flags|=65536,x&=-x,c.lanes|=x,y=yt(y,m),x=Hx(c.stateNode,y,x),bx(c,x),Pr!==4&&(Pr=2)),!1;var A=Error(r(520),{cause:y});if(A=yt(A,m),pg===null?pg=[A]:pg.push(A),Pr!==4&&(Pr=2),d===null)return!0;y=yt(y,m),m=d;do{switch(m.tag){case 3:return m.flags|=65536,c=x&-x,m.lanes|=c,c=Hx(m.stateNode,y,c),bx(m,c),!1;case 1:if(d=m.type,A=m.stateNode,(m.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Iu===null||!Iu.has(A))))return m.flags|=65536,x&=-x,m.lanes|=x,x=_D(x),kD(x,c,m,y),bx(m,x),!1}m=m.return}while(m!==null);return!1}var TD=Error(r(461)),xo=!1;function $o(c,d,m,y){d.child=c===null?yD(d,null,m,y):Hh(d,c.child,m,y)}function AD(c,d,m,y,x){m=m.render;var A=d.ref;if("ref"in y){var G={};for(var Q in y)Q!=="ref"&&(G[Q]=y[Q])}else G=y;return pf(d),y=Ex(c,d,m,G,A,x),Q=_x(),c!==null&&!xo?(kx(c,d,x),mc(c,d,x)):(Bn&&Q&&ax(d),d.flags|=1,$o(c,d,y,x),d.child)}function RD(c,d,m,y,x){if(c===null){var A=m.type;return typeof A=="function"&&!ox(A)&&A.defaultProps===void 0&&m.compare===null?(d.tag=15,d.type=A,MD(c,d,A,y,x)):(c=n0(m.type,null,y,d,d.mode,x),c.ref=d.ref,c.return=d,d.child=c)}if(A=c.child,!Yx(c,x)){var G=A.memoizedProps;if(m=m.compare,m=m!==null?m:S,m(G,y)&&c.ref===d.ref)return mc(c,d,x)}return d.flags|=1,c=lc(A,y),c.ref=d.ref,c.return=d,d.child=c}function MD(c,d,m,y,x){if(c!==null){var A=c.memoizedProps;if(S(A,y)&&c.ref===d.ref)if(xo=!1,d.pendingProps=y=A,Yx(c,x))(c.flags&131072)!==0&&(xo=!0);else return d.lanes=c.lanes,mc(c,d,x)}return Fx(c,d,m,y,x)}function ID(c,d,m){var y=d.pendingProps,x=y.children,A=c!==null?c.memoizedState:null;if(y.mode==="hidden"){if((d.flags&128)!==0){if(y=A!==null?A.baseLanes|m:m,c!==null){for(x=d.child=c.child,A=0;x!==null;)A=A|x.lanes|x.childLanes,x=x.sibling;d.childLanes=A&~y}else d.childLanes=0,d.child=null;return ND(c,d,y,m)}if((m&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},c!==null&&a0(d,A!==null?A.cachePool:null),A!==null?MN(d,A):Cx(),vD(d);else return d.lanes=d.childLanes=536870912,ND(c,d,A!==null?A.baseLanes|m:m,m)}else A!==null?(a0(d,A.cachePool),MN(d,A),_u(),d.memoizedState=null):(c!==null&&a0(d,null),Cx(),_u());return $o(c,d,x,m),d.child}function ND(c,d,m,y){var x=mx();return x=x===null?null:{parent:fo._currentValue,pool:x},d.memoizedState={baseLanes:m,cachePool:x},c!==null&&a0(d,null),Cx(),vD(d),c!==null&&Wm(c,d,y,!0),null}function E0(c,d){var m=d.ref;if(m===null)c!==null&&c.ref!==null&&(d.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(c===null||c.ref!==m)&&(d.flags|=4194816)}}function Fx(c,d,m,y,x){return pf(d),m=Ex(c,d,m,y,void 0,x),y=_x(),c!==null&&!xo?(kx(c,d,x),mc(c,d,x)):(Bn&&y&&ax(d),d.flags|=1,$o(c,d,m,x),d.child)}function DD(c,d,m,y,x,A){return pf(d),d.updateQueue=null,m=NN(d,y,m,x),IN(c),y=_x(),c!==null&&!xo?(kx(c,d,A),mc(c,d,A)):(Bn&&y&&ax(d),d.flags|=1,$o(c,d,m,A),d.child)}function OD(c,d,m,y,x){if(pf(d),d.stateNode===null){var A=hl,G=m.contextType;typeof G=="object"&&G!==null&&(A=ii(G)),A=new m(y,A),d.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=$x,d.stateNode=A,A._reactInternals=d,A=d.stateNode,A.props=y,A.state=d.memoizedState,A.refs={},yx(d),G=m.contextType,A.context=typeof G=="object"&&G!==null?ii(G):hl,A.state=d.memoizedState,G=m.getDerivedStateFromProps,typeof G=="function"&&(Bx(d,m,G,y),A.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(G=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),G!==A.state&&$x.enqueueReplaceState(A,A.state,null),tg(d,y,A,x),eg(),A.state=d.memoizedState),typeof A.componentDidMount=="function"&&(d.flags|=4194308),y=!0}else if(c===null){A=d.stateNode;var Q=d.memoizedProps,ce=yf(m,Q);A.props=ce;var ke=A.context,je=m.contextType;G=hl,typeof je=="object"&&je!==null&&(G=ii(je));var $e=m.getDerivedStateFromProps;je=typeof $e=="function"||typeof A.getSnapshotBeforeUpdate=="function",Q=d.pendingProps!==Q,je||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(Q||ke!==G)&&wD(d,A,y,G),wu=!1;var Ae=d.memoizedState;A.state=Ae,tg(d,y,A,x),eg(),ke=d.memoizedState,Q||Ae!==ke||wu?(typeof $e=="function"&&(Bx(d,m,$e,y),ke=d.memoizedState),(ce=wu||bD(d,m,ce,y,Ae,ke,G))?(je||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(d.flags|=4194308)):(typeof A.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=y,d.memoizedState=ke),A.props=y,A.state=ke,A.context=G,y=ce):(typeof A.componentDidMount=="function"&&(d.flags|=4194308),y=!1)}else{A=d.stateNode,vx(c,d),G=d.memoizedProps,je=yf(m,G),A.props=je,$e=d.pendingProps,Ae=A.context,ke=m.contextType,ce=hl,typeof ke=="object"&&ke!==null&&(ce=ii(ke)),Q=m.getDerivedStateFromProps,(ke=typeof Q=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(G!==$e||Ae!==ce)&&wD(d,A,y,ce),wu=!1,Ae=d.memoizedState,A.state=Ae,tg(d,y,A,x),eg();var Re=d.memoizedState;G!==$e||Ae!==Re||wu||c!==null&&c.dependencies!==null&&i0(c.dependencies)?(typeof Q=="function"&&(Bx(d,m,Q,y),Re=d.memoizedState),(je=wu||bD(d,m,je,y,Ae,Re,ce)||c!==null&&c.dependencies!==null&&i0(c.dependencies))?(ke||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(y,Re,ce),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(y,Re,ce)),typeof A.componentDidUpdate=="function"&&(d.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof A.componentDidUpdate!="function"||G===c.memoizedProps&&Ae===c.memoizedState||(d.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||G===c.memoizedProps&&Ae===c.memoizedState||(d.flags|=1024),d.memoizedProps=y,d.memoizedState=Re),A.props=y,A.state=Re,A.context=ce,y=je):(typeof A.componentDidUpdate!="function"||G===c.memoizedProps&&Ae===c.memoizedState||(d.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||G===c.memoizedProps&&Ae===c.memoizedState||(d.flags|=1024),y=!1)}return A=y,E0(c,d),y=(d.flags&128)!==0,A||y?(A=d.stateNode,m=y&&typeof m.getDerivedStateFromError!="function"?null:A.render(),d.flags|=1,c!==null&&y?(d.child=Hh(d,c.child,null,x),d.child=Hh(d,null,m,x)):$o(c,d,m,x),d.memoizedState=A.state,c=d.child):c=mc(c,d,x),c}function PD(c,d,m,y){return Gm(),d.flags|=256,$o(c,d,m,y),d.child}var zx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ux(c){return{baseLanes:c,cachePool:SN()}}function qx(c,d,m){return c=c!==null?c.childLanes&~m:0,d&&(c|=Js),c}function LD(c,d,m){var y=d.pendingProps,x=!1,A=(d.flags&128)!==0,G;if((G=A)||(G=c!==null&&c.memoizedState===null?!1:(ho.current&2)!==0),G&&(x=!0,d.flags&=-129),G=(d.flags&32)!==0,d.flags&=-33,c===null){if(Bn){if(x?Eu(d):_u(),Bn){var Q=Or,ce;if(ce=Q){e:{for(ce=Q,Q=pl;ce.nodeType!==8;){if(!Q){Q=null;break e}if(ce=Oa(ce.nextSibling),ce===null){Q=null;break e}}Q=ce}Q!==null?(d.memoizedState={dehydrated:Q,treeContext:cf!==null?{id:cc,overflow:uc}:null,retryLane:536870912,hydrationErrors:null},ce=ps(18,null,null,0),ce.stateNode=Q,ce.return=d,d.child=ce,Ti=d,Or=null,ce=!0):ce=!1}ce||ff(d)}if(Q=d.memoizedState,Q!==null&&(Q=Q.dehydrated,Q!==null))return AE(Q)?d.lanes=32:d.lanes=536870912,null;pc(d)}return Q=y.children,y=y.fallback,x?(_u(),x=d.mode,Q=_0({mode:"hidden",children:Q},x),y=lf(y,x,m,null),Q.return=d,y.return=d,Q.sibling=y,d.child=Q,x=d.child,x.memoizedState=Ux(m),x.childLanes=qx(c,G,m),d.memoizedState=zx,y):(Eu(d),Gx(d,Q))}if(ce=c.memoizedState,ce!==null&&(Q=ce.dehydrated,Q!==null)){if(A)d.flags&256?(Eu(d),d.flags&=-257,d=Kx(c,d,m)):d.memoizedState!==null?(_u(),d.child=c.child,d.flags|=128,d=null):(_u(),x=y.fallback,Q=d.mode,y=_0({mode:"visible",children:y.children},Q),x=lf(x,Q,m,null),x.flags|=2,y.return=d,x.return=d,y.sibling=x,d.child=y,Hh(d,c.child,null,m),y=d.child,y.memoizedState=Ux(m),y.childLanes=qx(c,G,m),d.memoizedState=zx,d=x);else if(Eu(d),AE(Q)){if(G=Q.nextSibling&&Q.nextSibling.dataset,G)var ke=G.dgst;G=ke,y=Error(r(419)),y.stack="",y.digest=G,Km({value:y,source:null,stack:null}),d=Kx(c,d,m)}else if(xo||Wm(c,d,m,!1),G=(m&c.childLanes)!==0,xo||G){if(G=ur,G!==null&&(y=m&-m,y=(y&42)!==0?1:Hn(y),y=(y&(G.suspendedLanes|m))!==0?0:y,y!==0&&y!==ce.retryLane))throw ce.retryLane=y,Na(c,y),bs(G,c,y),TD;Q.data==="$?"||dE(),d=Kx(c,d,m)}else Q.data==="$?"?(d.flags|=192,d.child=c.child,d=null):(c=ce.treeContext,Or=Oa(Q.nextSibling),Ti=d,Bn=!0,df=null,pl=!1,c!==null&&(Xs[Qs++]=cc,Xs[Qs++]=uc,Xs[Qs++]=cf,cc=c.id,uc=c.overflow,cf=d),d=Gx(d,y.children),d.flags|=4096);return d}return x?(_u(),x=y.fallback,Q=d.mode,ce=c.child,ke=ce.sibling,y=lc(ce,{mode:"hidden",children:y.children}),y.subtreeFlags=ce.subtreeFlags&65011712,ke!==null?x=lc(ke,x):(x=lf(x,Q,m,null),x.flags|=2),x.return=d,y.return=d,y.sibling=x,d.child=y,y=x,x=d.child,Q=c.child.memoizedState,Q===null?Q=Ux(m):(ce=Q.cachePool,ce!==null?(ke=fo._currentValue,ce=ce.parent!==ke?{parent:ke,pool:ke}:ce):ce=SN(),Q={baseLanes:Q.baseLanes|m,cachePool:ce}),x.memoizedState=Q,x.childLanes=qx(c,G,m),d.memoizedState=zx,y):(Eu(d),m=c.child,c=m.sibling,m=lc(m,{mode:"visible",children:y.children}),m.return=d,m.sibling=null,c!==null&&(G=d.deletions,G===null?(d.deletions=[c],d.flags|=16):G.push(c)),d.child=m,d.memoizedState=null,m)}function Gx(c,d){return d=_0({mode:"visible",children:d},c.mode),d.return=c,c.child=d}function _0(c,d){return c=ps(22,c,null,d),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function Kx(c,d,m){return Hh(d,c.child,null,m),c=Gx(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function VD(c,d,m){c.lanes|=d;var y=c.alternate;y!==null&&(y.lanes|=d),dx(c.return,d,m)}function Wx(c,d,m,y,x){var A=c.memoizedState;A===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:x}:(A.isBackwards=d,A.rendering=null,A.renderingStartTime=0,A.last=y,A.tail=m,A.tailMode=x)}function jD(c,d,m){var y=d.pendingProps,x=y.revealOrder,A=y.tail;if($o(c,d,y.children,m),y=ho.current,(y&2)!==0)y=y&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&VD(c,m,d);else if(c.tag===19)VD(c,m,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}y&=1}switch(ie(ho,y),x){case"forwards":for(m=d.child,x=null;m!==null;)c=m.alternate,c!==null&&C0(c)===null&&(x=m),m=m.sibling;m=x,m===null?(x=d.child,d.child=null):(x=m.sibling,m.sibling=null),Wx(d,!1,x,m,A);break;case"backwards":for(m=null,x=d.child,d.child=null;x!==null;){if(c=x.alternate,c!==null&&C0(c)===null){d.child=x;break}c=x.sibling,x.sibling=m,m=x,x=c}Wx(d,!0,m,null,A);break;case"together":Wx(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function mc(c,d,m){if(c!==null&&(d.dependencies=c.dependencies),Mu|=d.lanes,(m&d.childLanes)===0)if(c!==null){if(Wm(c,d,m,!1),(m&d.childLanes)===0)return null}else return null;if(c!==null&&d.child!==c.child)throw Error(r(153));if(d.child!==null){for(c=d.child,m=lc(c,c.pendingProps),d.child=m,m.return=d;c.sibling!==null;)c=c.sibling,m=m.sibling=lc(c,c.pendingProps),m.return=d;m.sibling=null}return d.child}function Yx(c,d){return(c.lanes&d)!==0?!0:(c=c.dependencies,!!(c!==null&&i0(c)))}function mK(c,d,m){switch(d.tag){case 3:Ue(d,d.stateNode.containerInfo),bu(d,fo,c.memoizedState.cache),Gm();break;case 27:case 5:rt(d);break;case 4:Ue(d,d.stateNode.containerInfo);break;case 10:bu(d,d.type,d.memoizedProps.value);break;case 13:var y=d.memoizedState;if(y!==null)return y.dehydrated!==null?(Eu(d),d.flags|=128,null):(m&d.child.childLanes)!==0?LD(c,d,m):(Eu(d),c=mc(c,d,m),c!==null?c.sibling:null);Eu(d);break;case 19:var x=(c.flags&128)!==0;if(y=(m&d.childLanes)!==0,y||(Wm(c,d,m,!1),y=(m&d.childLanes)!==0),x){if(y)return jD(c,d,m);d.flags|=128}if(x=d.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ie(ho,ho.current),y)break;return null;case 22:case 23:return d.lanes=0,ID(c,d,m);case 24:bu(d,fo,c.memoizedState.cache)}return mc(c,d,m)}function BD(c,d,m){if(c!==null)if(c.memoizedProps!==d.pendingProps)xo=!0;else{if(!Yx(c,m)&&(d.flags&128)===0)return xo=!1,mK(c,d,m);xo=(c.flags&131072)!==0}else xo=!1,Bn&&(d.flags&1048576)!==0&&mN(d,o0,d.index);switch(d.lanes=0,d.tag){case 16:e:{c=d.pendingProps;var y=d.elementType,x=y._init;if(y=x(y._payload),d.type=y,typeof y=="function")ox(y)?(c=yf(y,c),d.tag=1,d=OD(null,d,y,c,m)):(d.tag=0,d=Fx(null,d,y,c,m));else{if(y!=null){if(x=y.$$typeof,x===z){d.tag=11,d=AD(null,d,y,c,m);break e}else if(x===O){d.tag=14,d=RD(null,d,y,c,m);break e}}throw d=ne(y)||y,Error(r(306,d,""))}}return d;case 0:return Fx(c,d,d.type,d.pendingProps,m);case 1:return y=d.type,x=yf(y,d.pendingProps),OD(c,d,y,x,m);case 3:e:{if(Ue(d,d.stateNode.containerInfo),c===null)throw Error(r(387));y=d.pendingProps;var A=d.memoizedState;x=A.element,vx(c,d),tg(d,y,null,m);var G=d.memoizedState;if(y=G.cache,bu(d,fo,y),y!==A.cache&&fx(d,[fo],m,!0),eg(),y=G.element,A.isDehydrated)if(A={element:y,isDehydrated:!1,cache:G.cache},d.updateQueue.baseState=A,d.memoizedState=A,d.flags&256){d=PD(c,d,y,m);break e}else if(y!==x){x=yt(Error(r(424)),d),Km(x),d=PD(c,d,y,m);break e}else{switch(c=d.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(Or=Oa(c.firstChild),Ti=d,Bn=!0,df=null,pl=!0,m=yD(d,null,y,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Gm(),y===x){d=mc(c,d,m);break e}$o(c,d,y,m)}d=d.child}return d;case 26:return E0(c,d),c===null?(m=zO(d.type,null,d.pendingProps,null))?d.memoizedState=m:Bn||(m=d.type,c=d.pendingProps,y=B0(ve.current).createElement(m),y[Kn]=d,y[mt]=c,Fo(y,m,c),zn(y),d.stateNode=y):d.memoizedState=zO(d.type,c.memoizedProps,d.pendingProps,c.memoizedState),null;case 27:return rt(d),c===null&&Bn&&(y=d.stateNode=$O(d.type,d.pendingProps,ve.current),Ti=d,pl=!0,x=Or,Ou(d.type)?(RE=x,Or=Oa(y.firstChild)):Or=x),$o(c,d,d.pendingProps.children,m),E0(c,d),c===null&&(d.flags|=4194304),d.child;case 5:return c===null&&Bn&&((x=y=Or)&&(y=zK(y,d.type,d.pendingProps,pl),y!==null?(d.stateNode=y,Ti=d,Or=Oa(y.firstChild),pl=!1,x=!0):x=!1),x||ff(d)),rt(d),x=d.type,A=d.pendingProps,G=c!==null?c.memoizedProps:null,y=A.children,_E(x,A)?y=null:G!==null&&_E(x,G)&&(d.flags|=32),d.memoizedState!==null&&(x=Ex(c,d,aK,null,null,m),xg._currentValue=x),E0(c,d),$o(c,d,y,m),d.child;case 6:return c===null&&Bn&&((c=m=Or)&&(m=UK(m,d.pendingProps,pl),m!==null?(d.stateNode=m,Ti=d,Or=null,c=!0):c=!1),c||ff(d)),null;case 13:return LD(c,d,m);case 4:return Ue(d,d.stateNode.containerInfo),y=d.pendingProps,c===null?d.child=Hh(d,null,y,m):$o(c,d,y,m),d.child;case 11:return AD(c,d,d.type,d.pendingProps,m);case 7:return $o(c,d,d.pendingProps,m),d.child;case 8:return $o(c,d,d.pendingProps.children,m),d.child;case 12:return $o(c,d,d.pendingProps.children,m),d.child;case 10:return y=d.pendingProps,bu(d,d.type,y.value),$o(c,d,y.children,m),d.child;case 9:return x=d.type._context,y=d.pendingProps.children,pf(d),x=ii(x),y=y(x),d.flags|=1,$o(c,d,y,m),d.child;case 14:return RD(c,d,d.type,d.pendingProps,m);case 15:return MD(c,d,d.type,d.pendingProps,m);case 19:return jD(c,d,m);case 31:return y=d.pendingProps,m=d.mode,y={mode:y.mode,children:y.children},c===null?(m=_0(y,m),m.ref=d.ref,d.child=m,m.return=d,d=m):(m=lc(c.child,y),m.ref=d.ref,d.child=m,m.return=d,d=m),d;case 22:return ID(c,d,m);case 24:return pf(d),y=ii(fo),c===null?(x=mx(),x===null&&(x=ur,A=hx(),x.pooledCache=A,A.refCount++,A!==null&&(x.pooledCacheLanes|=m),x=A),d.memoizedState={parent:y,cache:x},yx(d),bu(d,fo,x)):((c.lanes&m)!==0&&(vx(c,d),tg(d,null,null,m),eg()),x=c.memoizedState,A=d.memoizedState,x.parent!==y?(x={parent:y,cache:y},d.memoizedState=x,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=x),bu(d,fo,y)):(y=A.cache,bu(d,fo,y),y!==x.cache&&fx(d,[fo],m,!0))),$o(c,d,d.pendingProps.children,m),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function gc(c){c.flags|=4}function $D(c,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!WO(d)){if(d=Zs.current,d!==null&&((Rn&4194048)===Rn?ml!==null:(Rn&62914560)!==Rn&&(Rn&536870912)===0||d!==ml))throw Zm=gx,xN;c.flags|=8192}}function k0(c,d){d!==null&&(c.flags|=4),c.flags&16384&&(d=c.tag!==22?Qe():536870912,c.lanes|=d,qh|=d)}function lg(c,d){if(!Bn)switch(c.tailMode){case"hidden":d=c.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:y.sibling=null}}function Ar(c){var d=c.alternate!==null&&c.alternate.child===c.child,m=0,y=0;if(d)for(var x=c.child;x!==null;)m|=x.lanes|x.childLanes,y|=x.subtreeFlags&65011712,y|=x.flags&65011712,x.return=c,x=x.sibling;else for(x=c.child;x!==null;)m|=x.lanes|x.childLanes,y|=x.subtreeFlags,y|=x.flags,x.return=c,x=x.sibling;return c.subtreeFlags|=y,c.childLanes=m,d}function gK(c,d,m){var y=d.pendingProps;switch(lx(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ar(d),null;case 1:return Ar(d),null;case 3:return m=d.stateNode,y=null,c!==null&&(y=c.memoizedState.cache),d.memoizedState.cache!==y&&(d.flags|=2048),fc(fo),Oe(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(c===null||c.child===null)&&(qm(d)?gc(d):c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,vN())),Ar(d),null;case 26:return m=d.memoizedState,c===null?(gc(d),m!==null?(Ar(d),$D(d,m)):(Ar(d),d.flags&=-16777217)):m?m!==c.memoizedState?(gc(d),Ar(d),$D(d,m)):(Ar(d),d.flags&=-16777217):(c.memoizedProps!==y&&gc(d),Ar(d),d.flags&=-16777217),null;case 27:wt(d),m=ve.current;var x=d.type;if(c!==null&&d.stateNode!=null)c.memoizedProps!==y&&gc(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return Ar(d),null}c=ue.current,qm(d)?gN(d):(c=$O(x,y,m),d.stateNode=c,gc(d))}return Ar(d),null;case 5:if(wt(d),m=d.type,c!==null&&d.stateNode!=null)c.memoizedProps!==y&&gc(d);else{if(!y){if(d.stateNode===null)throw Error(r(166));return Ar(d),null}if(c=ue.current,qm(d))gN(d);else{switch(x=B0(ve.current),c){case 1:c=x.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:c=x.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":c=x.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":c=x.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":c=x.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof y.is=="string"?x.createElement("select",{is:y.is}):x.createElement("select"),y.multiple?c.multiple=!0:y.size&&(c.size=y.size);break;default:c=typeof y.is=="string"?x.createElement(m,{is:y.is}):x.createElement(m)}}c[Kn]=d,c[mt]=y;e:for(x=d.child;x!==null;){if(x.tag===5||x.tag===6)c.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break e;for(;x.sibling===null;){if(x.return===null||x.return===d)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}d.stateNode=c;e:switch(Fo(c,m,y),m){case"button":case"input":case"select":case"textarea":c=!!y.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&gc(d)}}return Ar(d),d.flags&=-16777217,null;case 6:if(c&&d.stateNode!=null)c.memoizedProps!==y&&gc(d);else{if(typeof y!="string"&&d.stateNode===null)throw Error(r(166));if(c=ve.current,qm(d)){if(c=d.stateNode,m=d.memoizedProps,y=null,x=Ti,x!==null)switch(x.tag){case 27:case 5:y=x.memoizedProps}c[Kn]=d,c=!!(c.nodeValue===m||y!==null&&y.suppressHydrationWarning===!0||DO(c.nodeValue,m)),c||ff(d)}else c=B0(c).createTextNode(y),c[Kn]=d,d.stateNode=c}return Ar(d),null;case 13:if(y=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(x=qm(d),y!==null&&y.dehydrated!==null){if(c===null){if(!x)throw Error(r(318));if(x=d.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[Kn]=d}else Gm(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Ar(d),x=!1}else x=vN(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=x),x=!0;if(!x)return d.flags&256?(pc(d),d):(pc(d),null)}if(pc(d),(d.flags&128)!==0)return d.lanes=m,d;if(m=y!==null,c=c!==null&&c.memoizedState!==null,m){y=d.child,x=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(x=y.alternate.memoizedState.cachePool.pool);var A=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(A=y.memoizedState.cachePool.pool),A!==x&&(y.flags|=2048)}return m!==c&&m&&(d.child.flags|=8192),k0(d,d.updateQueue),Ar(d),null;case 4:return Oe(),c===null&&wE(d.stateNode.containerInfo),Ar(d),null;case 10:return fc(d.type),Ar(d),null;case 19:if(te(ho),x=d.memoizedState,x===null)return Ar(d),null;if(y=(d.flags&128)!==0,A=x.rendering,A===null)if(y)lg(x,!1);else{if(Pr!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(A=C0(c),A!==null){for(d.flags|=128,lg(x,!1),c=A.updateQueue,d.updateQueue=c,k0(d,c),d.subtreeFlags=0,c=m,m=d.child;m!==null;)pN(m,c),m=m.sibling;return ie(ho,ho.current&1|2),d.child}c=c.sibling}x.tail!==null&&At()>R0&&(d.flags|=128,y=!0,lg(x,!1),d.lanes=4194304)}else{if(!y)if(c=C0(A),c!==null){if(d.flags|=128,y=!0,c=c.updateQueue,d.updateQueue=c,k0(d,c),lg(x,!0),x.tail===null&&x.tailMode==="hidden"&&!A.alternate&&!Bn)return Ar(d),null}else 2*At()-x.renderingStartTime>R0&&m!==536870912&&(d.flags|=128,y=!0,lg(x,!1),d.lanes=4194304);x.isBackwards?(A.sibling=d.child,d.child=A):(c=x.last,c!==null?c.sibling=A:d.child=A,x.last=A)}return x.tail!==null?(d=x.tail,x.rendering=d,x.tail=d.sibling,x.renderingStartTime=At(),d.sibling=null,c=ho.current,ie(ho,y?c&1|2:c&1),d):(Ar(d),null);case 22:case 23:return pc(d),Sx(),y=d.memoizedState!==null,c!==null?c.memoizedState!==null!==y&&(d.flags|=8192):y&&(d.flags|=8192),y?(m&536870912)!==0&&(d.flags&128)===0&&(Ar(d),d.subtreeFlags&6&&(d.flags|=8192)):Ar(d),m=d.updateQueue,m!==null&&k0(d,m.retryQueue),m=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),y=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(y=d.memoizedState.cachePool.pool),y!==m&&(d.flags|=2048),c!==null&&te(mf),null;case 24:return m=null,c!==null&&(m=c.memoizedState.cache),d.memoizedState.cache!==m&&(d.flags|=2048),fc(fo),Ar(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function yK(c,d){switch(lx(d),d.tag){case 1:return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return fc(fo),Oe(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 26:case 27:case 5:return wt(d),null;case 13:if(pc(d),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Gm()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return te(ho),null;case 4:return Oe(),null;case 10:return fc(d.type),null;case 22:case 23:return pc(d),Sx(),c!==null&&te(mf),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 24:return fc(fo),null;case 25:return null;default:return null}}function HD(c,d){switch(lx(d),d.tag){case 3:fc(fo),Oe();break;case 26:case 27:case 5:wt(d);break;case 4:Oe();break;case 13:pc(d);break;case 19:te(ho);break;case 10:fc(d.type);break;case 22:case 23:pc(d),Sx(),c!==null&&te(mf);break;case 24:fc(fo)}}function cg(c,d){try{var m=d.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var x=y.next;m=x;do{if((m.tag&c)===c){y=void 0;var A=m.create,G=m.inst;y=A(),G.destroy=y}m=m.next}while(m!==x)}}catch(Q){or(d,d.return,Q)}}function ku(c,d,m){try{var y=d.updateQueue,x=y!==null?y.lastEffect:null;if(x!==null){var A=x.next;y=A;do{if((y.tag&c)===c){var G=y.inst,Q=G.destroy;if(Q!==void 0){G.destroy=void 0,x=d;var ce=m,ke=Q;try{ke()}catch(je){or(x,ce,je)}}}y=y.next}while(y!==A)}}catch(je){or(d,d.return,je)}}function FD(c){var d=c.updateQueue;if(d!==null){var m=c.stateNode;try{RN(d,m)}catch(y){or(c,c.return,y)}}}function zD(c,d,m){m.props=yf(c.type,c.memoizedProps),m.state=c.memoizedState;try{m.componentWillUnmount()}catch(y){or(c,d,y)}}function ug(c,d){try{var m=c.ref;if(m!==null){switch(c.tag){case 26:case 27:case 5:var y=c.stateNode;break;case 30:y=c.stateNode;break;default:y=c.stateNode}typeof m=="function"?c.refCleanup=m(y):m.current=y}}catch(x){or(c,d,x)}}function gl(c,d){var m=c.ref,y=c.refCleanup;if(m!==null)if(typeof y=="function")try{y()}catch(x){or(c,d,x)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(x){or(c,d,x)}else m.current=null}function UD(c){var d=c.type,m=c.memoizedProps,y=c.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":m.autoFocus&&y.focus();break e;case"img":m.src?y.src=m.src:m.srcSet&&(y.srcset=m.srcSet)}}catch(x){or(c,c.return,x)}}function Xx(c,d,m){try{var y=c.stateNode;jK(y,c.type,m,d),y[mt]=d}catch(x){or(c,c.return,x)}}function qD(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Ou(c.type)||c.tag===4}function Qx(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||qD(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Ou(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Zx(c,d,m){var y=c.tag;if(y===5||y===6)c=c.stateNode,d?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(c,d):(d=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,d.appendChild(c),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=j0));else if(y!==4&&(y===27&&Ou(c.type)&&(m=c.stateNode,d=null),c=c.child,c!==null))for(Zx(c,d,m),c=c.sibling;c!==null;)Zx(c,d,m),c=c.sibling}function T0(c,d,m){var y=c.tag;if(y===5||y===6)c=c.stateNode,d?m.insertBefore(c,d):m.appendChild(c);else if(y!==4&&(y===27&&Ou(c.type)&&(m=c.stateNode),c=c.child,c!==null))for(T0(c,d,m),c=c.sibling;c!==null;)T0(c,d,m),c=c.sibling}function GD(c){var d=c.stateNode,m=c.memoizedProps;try{for(var y=c.type,x=d.attributes;x.length;)d.removeAttributeNode(x[0]);Fo(d,y,m),d[Kn]=c,d[mt]=m}catch(A){or(c,c.return,A)}}var yc=!1,Gr=!1,Jx=!1,KD=typeof WeakSet=="function"?WeakSet:Set,Eo=null;function vK(c,d){if(c=c.containerInfo,xE=q0,c=W(c),X(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var y=m.getSelection&&m.getSelection();if(y&&y.rangeCount!==0){m=y.anchorNode;var x=y.anchorOffset,A=y.focusNode;y=y.focusOffset;try{m.nodeType,A.nodeType}catch{m=null;break e}var G=0,Q=-1,ce=-1,ke=0,je=0,$e=c,Ae=null;t:for(;;){for(var Re;$e!==m||x!==0&&$e.nodeType!==3||(Q=G+x),$e!==A||y!==0&&$e.nodeType!==3||(ce=G+y),$e.nodeType===3&&(G+=$e.nodeValue.length),(Re=$e.firstChild)!==null;)Ae=$e,$e=Re;for(;;){if($e===c)break t;if(Ae===m&&++ke===x&&(Q=G),Ae===A&&++je===y&&(ce=G),(Re=$e.nextSibling)!==null)break;$e=Ae,Ae=$e.parentNode}$e=Re}m=Q===-1||ce===-1?null:{start:Q,end:ce}}else m=null}m=m||{start:0,end:0}}else m=null;for(EE={focusedElem:c,selectionRange:m},q0=!1,Eo=d;Eo!==null;)if(d=Eo,c=d.child,(d.subtreeFlags&1024)!==0&&c!==null)c.return=d,Eo=c;else for(;Eo!==null;){switch(d=Eo,A=d.alternate,c=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&A!==null){c=void 0,m=d,x=A.memoizedProps,A=A.memoizedState,y=m.stateNode;try{var Nt=yf(m.type,x,m.elementType===m.type);c=y.getSnapshotBeforeUpdate(Nt,A),y.__reactInternalSnapshotBeforeUpdate=c}catch(_t){or(m,m.return,_t)}}break;case 3:if((c&1024)!==0){if(c=d.stateNode.containerInfo,m=c.nodeType,m===9)TE(c);else if(m===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":TE(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=d.sibling,c!==null){c.return=d.return,Eo=c;break}Eo=d.return}}function WD(c,d,m){var y=m.flags;switch(m.tag){case 0:case 11:case 15:Tu(c,m),y&4&&cg(5,m);break;case 1:if(Tu(c,m),y&4)if(c=m.stateNode,d===null)try{c.componentDidMount()}catch(G){or(m,m.return,G)}else{var x=yf(m.type,d.memoizedProps);d=d.memoizedState;try{c.componentDidUpdate(x,d,c.__reactInternalSnapshotBeforeUpdate)}catch(G){or(m,m.return,G)}}y&64&&FD(m),y&512&&ug(m,m.return);break;case 3:if(Tu(c,m),y&64&&(c=m.updateQueue,c!==null)){if(d=null,m.child!==null)switch(m.child.tag){case 27:case 5:d=m.child.stateNode;break;case 1:d=m.child.stateNode}try{RN(c,d)}catch(G){or(m,m.return,G)}}break;case 27:d===null&&y&4&&GD(m);case 26:case 5:Tu(c,m),d===null&&y&4&&UD(m),y&512&&ug(m,m.return);break;case 12:Tu(c,m);break;case 13:Tu(c,m),y&4&&QD(c,m),y&64&&(c=m.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(m=TK.bind(null,m),qK(c,m))));break;case 22:if(y=m.memoizedState!==null||yc,!y){d=d!==null&&d.memoizedState!==null||Gr,x=yc;var A=Gr;yc=y,(Gr=d)&&!A?Au(c,m,(m.subtreeFlags&8772)!==0):Tu(c,m),yc=x,Gr=A}break;case 30:break;default:Tu(c,m)}}function YD(c){var d=c.alternate;d!==null&&(c.alternate=null,YD(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&Po(d)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var Er=null,Gi=!1;function vc(c,d,m){for(m=m.child;m!==null;)XD(c,d,m),m=m.sibling}function XD(c,d,m){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Ht,m)}catch{}switch(m.tag){case 26:Gr||gl(m,d),vc(c,d,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Gr||gl(m,d);var y=Er,x=Gi;Ou(m.type)&&(Er=m.stateNode,Gi=!1),vc(c,d,m),bg(m.stateNode),Er=y,Gi=x;break;case 5:Gr||gl(m,d);case 6:if(y=Er,x=Gi,Er=null,vc(c,d,m),Er=y,Gi=x,Er!==null)if(Gi)try{(Er.nodeType===9?Er.body:Er.nodeName==="HTML"?Er.ownerDocument.body:Er).removeChild(m.stateNode)}catch(A){or(m,d,A)}else try{Er.removeChild(m.stateNode)}catch(A){or(m,d,A)}break;case 18:Er!==null&&(Gi?(c=Er,jO(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,m.stateNode),Tg(c)):jO(Er,m.stateNode));break;case 4:y=Er,x=Gi,Er=m.stateNode.containerInfo,Gi=!0,vc(c,d,m),Er=y,Gi=x;break;case 0:case 11:case 14:case 15:Gr||ku(2,m,d),Gr||ku(4,m,d),vc(c,d,m);break;case 1:Gr||(gl(m,d),y=m.stateNode,typeof y.componentWillUnmount=="function"&&zD(m,d,y)),vc(c,d,m);break;case 21:vc(c,d,m);break;case 22:Gr=(y=Gr)||m.memoizedState!==null,vc(c,d,m),Gr=y;break;default:vc(c,d,m)}}function QD(c,d){if(d.memoizedState===null&&(c=d.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Tg(c)}catch(m){or(d,d.return,m)}}function bK(c){switch(c.tag){case 13:case 19:var d=c.stateNode;return d===null&&(d=c.stateNode=new KD),d;case 22:return c=c.stateNode,d=c._retryCache,d===null&&(d=c._retryCache=new KD),d;default:throw Error(r(435,c.tag))}}function eE(c,d){var m=bK(c);d.forEach(function(y){var x=AK.bind(null,c,y);m.has(y)||(m.add(y),y.then(x,x))})}function ms(c,d){var m=d.deletions;if(m!==null)for(var y=0;y<m.length;y++){var x=m[y],A=c,G=d,Q=G;e:for(;Q!==null;){switch(Q.tag){case 27:if(Ou(Q.type)){Er=Q.stateNode,Gi=!1;break e}break;case 5:Er=Q.stateNode,Gi=!1;break e;case 3:case 4:Er=Q.stateNode.containerInfo,Gi=!0;break e}Q=Q.return}if(Er===null)throw Error(r(160));XD(A,G,x),Er=null,Gi=!1,A=x.alternate,A!==null&&(A.return=null),x.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)ZD(d,c),d=d.sibling}var Da=null;function ZD(c,d){var m=c.alternate,y=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:ms(d,c),gs(c),y&4&&(ku(3,c,c.return),cg(3,c),ku(5,c,c.return));break;case 1:ms(d,c),gs(c),y&512&&(Gr||m===null||gl(m,m.return)),y&64&&yc&&(c=c.updateQueue,c!==null&&(y=c.callbacks,y!==null&&(m=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=m===null?y:m.concat(y))));break;case 26:var x=Da;if(ms(d,c),gs(c),y&512&&(Gr||m===null||gl(m,m.return)),y&4){var A=m!==null?m.memoizedState:null;if(y=c.memoizedState,m===null)if(y===null)if(c.stateNode===null){e:{y=c.type,m=c.memoizedProps,x=x.ownerDocument||x;t:switch(y){case"title":A=x.getElementsByTagName("title")[0],(!A||A[ec]||A[Kn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=x.createElement(y),x.head.insertBefore(A,x.querySelector("head > title"))),Fo(A,y,m),A[Kn]=c,zn(A),y=A;break e;case"link":var G=GO("link","href",x).get(y+(m.href||""));if(G){for(var Q=0;Q<G.length;Q++)if(A=G[Q],A.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&A.getAttribute("rel")===(m.rel==null?null:m.rel)&&A.getAttribute("title")===(m.title==null?null:m.title)&&A.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){G.splice(Q,1);break t}}A=x.createElement(y),Fo(A,y,m),x.head.appendChild(A);break;case"meta":if(G=GO("meta","content",x).get(y+(m.content||""))){for(Q=0;Q<G.length;Q++)if(A=G[Q],A.getAttribute("content")===(m.content==null?null:""+m.content)&&A.getAttribute("name")===(m.name==null?null:m.name)&&A.getAttribute("property")===(m.property==null?null:m.property)&&A.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&A.getAttribute("charset")===(m.charSet==null?null:m.charSet)){G.splice(Q,1);break t}}A=x.createElement(y),Fo(A,y,m),x.head.appendChild(A);break;default:throw Error(r(468,y))}A[Kn]=c,zn(A),y=A}c.stateNode=y}else KO(x,c.type,c.stateNode);else c.stateNode=qO(x,y,c.memoizedProps);else A!==y?(A===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):A.count--,y===null?KO(x,c.type,c.stateNode):qO(x,y,c.memoizedProps)):y===null&&c.stateNode!==null&&Xx(c,c.memoizedProps,m.memoizedProps)}break;case 27:ms(d,c),gs(c),y&512&&(Gr||m===null||gl(m,m.return)),m!==null&&y&4&&Xx(c,c.memoizedProps,m.memoizedProps);break;case 5:if(ms(d,c),gs(c),y&512&&(Gr||m===null||gl(m,m.return)),c.flags&32){x=c.stateNode;try{Bi(x,"")}catch(Re){or(c,c.return,Re)}}y&4&&c.stateNode!=null&&(x=c.memoizedProps,Xx(c,x,m!==null?m.memoizedProps:x)),y&1024&&(Jx=!0);break;case 6:if(ms(d,c),gs(c),y&4){if(c.stateNode===null)throw Error(r(162));y=c.memoizedProps,m=c.stateNode;try{m.nodeValue=y}catch(Re){or(c,c.return,Re)}}break;case 3:if(F0=null,x=Da,Da=$0(d.containerInfo),ms(d,c),Da=x,gs(c),y&4&&m!==null&&m.memoizedState.isDehydrated)try{Tg(d.containerInfo)}catch(Re){or(c,c.return,Re)}Jx&&(Jx=!1,JD(c));break;case 4:y=Da,Da=$0(c.stateNode.containerInfo),ms(d,c),gs(c),Da=y;break;case 12:ms(d,c),gs(c);break;case 13:ms(d,c),gs(c),c.child.flags&8192&&c.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(sE=At()),y&4&&(y=c.updateQueue,y!==null&&(c.updateQueue=null,eE(c,y)));break;case 22:x=c.memoizedState!==null;var ce=m!==null&&m.memoizedState!==null,ke=yc,je=Gr;if(yc=ke||x,Gr=je||ce,ms(d,c),Gr=je,yc=ke,gs(c),y&8192)e:for(d=c.stateNode,d._visibility=x?d._visibility&-2:d._visibility|1,x&&(m===null||ce||yc||Gr||vf(c)),m=null,d=c;;){if(d.tag===5||d.tag===26){if(m===null){ce=m=d;try{if(A=ce.stateNode,x)G=A.style,typeof G.setProperty=="function"?G.setProperty("display","none","important"):G.display="none";else{Q=ce.stateNode;var $e=ce.memoizedProps.style,Ae=$e!=null&&$e.hasOwnProperty("display")?$e.display:null;Q.style.display=Ae==null||typeof Ae=="boolean"?"":(""+Ae).trim()}}catch(Re){or(ce,ce.return,Re)}}}else if(d.tag===6){if(m===null){ce=d;try{ce.stateNode.nodeValue=x?"":ce.memoizedProps}catch(Re){or(ce,ce.return,Re)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===c)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break e;for(;d.sibling===null;){if(d.return===null||d.return===c)break e;m===d&&(m=null),d=d.return}m===d&&(m=null),d.sibling.return=d.return,d=d.sibling}y&4&&(y=c.updateQueue,y!==null&&(m=y.retryQueue,m!==null&&(y.retryQueue=null,eE(c,m))));break;case 19:ms(d,c),gs(c),y&4&&(y=c.updateQueue,y!==null&&(c.updateQueue=null,eE(c,y)));break;case 30:break;case 21:break;default:ms(d,c),gs(c)}}function gs(c){var d=c.flags;if(d&2){try{for(var m,y=c.return;y!==null;){if(qD(y)){m=y;break}y=y.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var x=m.stateNode,A=Qx(c);T0(c,A,x);break;case 5:var G=m.stateNode;m.flags&32&&(Bi(G,""),m.flags&=-33);var Q=Qx(c);T0(c,Q,G);break;case 3:case 4:var ce=m.stateNode.containerInfo,ke=Qx(c);Zx(c,ke,ce);break;default:throw Error(r(161))}}catch(je){or(c,c.return,je)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function JD(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var d=c;JD(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),c=c.sibling}}function Tu(c,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)WD(c,d.alternate,d),d=d.sibling}function vf(c){for(c=c.child;c!==null;){var d=c;switch(d.tag){case 0:case 11:case 14:case 15:ku(4,d,d.return),vf(d);break;case 1:gl(d,d.return);var m=d.stateNode;typeof m.componentWillUnmount=="function"&&zD(d,d.return,m),vf(d);break;case 27:bg(d.stateNode);case 26:case 5:gl(d,d.return),vf(d);break;case 22:d.memoizedState===null&&vf(d);break;case 30:vf(d);break;default:vf(d)}c=c.sibling}}function Au(c,d,m){for(m=m&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var y=d.alternate,x=c,A=d,G=A.flags;switch(A.tag){case 0:case 11:case 15:Au(x,A,m),cg(4,A);break;case 1:if(Au(x,A,m),y=A,x=y.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(ke){or(y,y.return,ke)}if(y=A,x=y.updateQueue,x!==null){var Q=y.stateNode;try{var ce=x.shared.hiddenCallbacks;if(ce!==null)for(x.shared.hiddenCallbacks=null,x=0;x<ce.length;x++)AN(ce[x],Q)}catch(ke){or(y,y.return,ke)}}m&&G&64&&FD(A),ug(A,A.return);break;case 27:GD(A);case 26:case 5:Au(x,A,m),m&&y===null&&G&4&&UD(A),ug(A,A.return);break;case 12:Au(x,A,m);break;case 13:Au(x,A,m),m&&G&4&&QD(x,A);break;case 22:A.memoizedState===null&&Au(x,A,m),ug(A,A.return);break;case 30:break;default:Au(x,A,m)}d=d.sibling}}function tE(c,d){var m=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),c=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(c=d.memoizedState.cachePool.pool),c!==m&&(c!=null&&c.refCount++,m!=null&&Ym(m))}function nE(c,d){c=null,d.alternate!==null&&(c=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==c&&(d.refCount++,c!=null&&Ym(c))}function yl(c,d,m,y){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)eO(c,d,m,y),d=d.sibling}function eO(c,d,m,y){var x=d.flags;switch(d.tag){case 0:case 11:case 15:yl(c,d,m,y),x&2048&&cg(9,d);break;case 1:yl(c,d,m,y);break;case 3:yl(c,d,m,y),x&2048&&(c=null,d.alternate!==null&&(c=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==c&&(d.refCount++,c!=null&&Ym(c)));break;case 12:if(x&2048){yl(c,d,m,y),c=d.stateNode;try{var A=d.memoizedProps,G=A.id,Q=A.onPostCommit;typeof Q=="function"&&Q(G,d.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(ce){or(d,d.return,ce)}}else yl(c,d,m,y);break;case 13:yl(c,d,m,y);break;case 23:break;case 22:A=d.stateNode,G=d.alternate,d.memoizedState!==null?A._visibility&2?yl(c,d,m,y):dg(c,d):A._visibility&2?yl(c,d,m,y):(A._visibility|=2,Fh(c,d,m,y,(d.subtreeFlags&10256)!==0)),x&2048&&tE(G,d);break;case 24:yl(c,d,m,y),x&2048&&nE(d.alternate,d);break;default:yl(c,d,m,y)}}function Fh(c,d,m,y,x){for(x=x&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var A=c,G=d,Q=m,ce=y,ke=G.flags;switch(G.tag){case 0:case 11:case 15:Fh(A,G,Q,ce,x),cg(8,G);break;case 23:break;case 22:var je=G.stateNode;G.memoizedState!==null?je._visibility&2?Fh(A,G,Q,ce,x):dg(A,G):(je._visibility|=2,Fh(A,G,Q,ce,x)),x&&ke&2048&&tE(G.alternate,G);break;case 24:Fh(A,G,Q,ce,x),x&&ke&2048&&nE(G.alternate,G);break;default:Fh(A,G,Q,ce,x)}d=d.sibling}}function dg(c,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var m=c,y=d,x=y.flags;switch(y.tag){case 22:dg(m,y),x&2048&&tE(y.alternate,y);break;case 24:dg(m,y),x&2048&&nE(y.alternate,y);break;default:dg(m,y)}d=d.sibling}}var fg=8192;function zh(c){if(c.subtreeFlags&fg)for(c=c.child;c!==null;)tO(c),c=c.sibling}function tO(c){switch(c.tag){case 26:zh(c),c.flags&fg&&c.memoizedState!==null&&oW(Da,c.memoizedState,c.memoizedProps);break;case 5:zh(c);break;case 3:case 4:var d=Da;Da=$0(c.stateNode.containerInfo),zh(c),Da=d;break;case 22:c.memoizedState===null&&(d=c.alternate,d!==null&&d.memoizedState!==null?(d=fg,fg=16777216,zh(c),fg=d):zh(c));break;default:zh(c)}}function nO(c){var d=c.alternate;if(d!==null&&(c=d.child,c!==null)){d.child=null;do d=c.sibling,c.sibling=null,c=d;while(c!==null)}}function hg(c){var d=c.deletions;if((c.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var y=d[m];Eo=y,oO(y,c)}nO(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)rO(c),c=c.sibling}function rO(c){switch(c.tag){case 0:case 11:case 15:hg(c),c.flags&2048&&ku(9,c,c.return);break;case 3:hg(c);break;case 12:hg(c);break;case 22:var d=c.stateNode;c.memoizedState!==null&&d._visibility&2&&(c.return===null||c.return.tag!==13)?(d._visibility&=-3,A0(c)):hg(c);break;default:hg(c)}}function A0(c){var d=c.deletions;if((c.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var y=d[m];Eo=y,oO(y,c)}nO(c)}for(c=c.child;c!==null;){switch(d=c,d.tag){case 0:case 11:case 15:ku(8,d,d.return),A0(d);break;case 22:m=d.stateNode,m._visibility&2&&(m._visibility&=-3,A0(d));break;default:A0(d)}c=c.sibling}}function oO(c,d){for(;Eo!==null;){var m=Eo;switch(m.tag){case 0:case 11:case 15:ku(8,m,d);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var y=m.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Ym(m.memoizedState.cache)}if(y=m.child,y!==null)y.return=m,Eo=y;else e:for(m=c;Eo!==null;){y=Eo;var x=y.sibling,A=y.return;if(YD(y),y===m){Eo=null;break e}if(x!==null){x.return=A,Eo=x;break e}Eo=A}}}var wK={getCacheForType:function(c){var d=ii(fo),m=d.data.get(c);return m===void 0&&(m=c(),d.data.set(c,m)),m}},CK=typeof WeakMap=="function"?WeakMap:Map,Yn=0,ur=null,fn=null,Rn=0,Xn=0,ys=null,Ru=!1,Uh=!1,rE=!1,bc=0,Pr=0,Mu=0,bf=0,oE=0,Js=0,qh=0,pg=null,Ki=null,iE=!1,sE=0,R0=1/0,M0=null,Iu=null,Ho=0,Nu=null,Gh=null,Kh=0,aE=0,lE=null,iO=null,mg=0,cE=null;function vs(){if((Yn&2)!==0&&Rn!==0)return Rn&-Rn;if(j.T!==null){var c=Oh;return c!==0?c:gE()}return Qn()}function sO(){Js===0&&(Js=(Rn&536870912)===0||Bn?Nr():536870912);var c=Zs.current;return c!==null&&(c.flags|=32),Js}function bs(c,d,m){(c===ur&&(Xn===2||Xn===9)||c.cancelPendingCommit!==null)&&(Wh(c,0),Du(c,Rn,Js,!1)),Cr(c,m),((Yn&2)===0||c!==ur)&&(c===ur&&((Yn&2)===0&&(bf|=m),Pr===4&&Du(c,Rn,Js,!1)),vl(c))}function aO(c,d,m){if((Yn&6)!==0)throw Error(r(327));var y=!m&&(d&124)===0&&(d&c.expiredLanes)===0||Do(c,d),x=y?EK(c,d):fE(c,d,!0),A=y;do{if(x===0){Uh&&!y&&Du(c,d,0,!1);break}else{if(m=c.current.alternate,A&&!SK(m)){x=fE(c,d,!1),A=!1;continue}if(x===2){if(A=d,c.errorRecoveryDisabledLanes&A)var G=0;else G=c.pendingLanes&-536870913,G=G!==0?G:G&536870912?536870912:0;if(G!==0){d=G;e:{var Q=c;x=pg;var ce=Q.current.memoizedState.isDehydrated;if(ce&&(Wh(Q,G).flags|=256),G=fE(Q,G,!1),G!==2){if(rE&&!ce){Q.errorRecoveryDisabledLanes|=A,bf|=A,x=4;break e}A=Ki,Ki=x,A!==null&&(Ki===null?Ki=A:Ki.push.apply(Ki,A))}x=G}if(A=!1,x!==2)continue}}if(x===1){Wh(c,0),Du(c,d,0,!0);break}e:{switch(y=c,A=x,A){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:Du(y,d,Js,!Ru);break e;case 2:Ki=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(x=sE+300-At(),10<x)){if(Du(y,d,Js,!Ru),nt(y,0,!0)!==0)break e;y.timeoutHandle=LO(lO.bind(null,y,m,Ki,M0,iE,d,Js,bf,qh,Ru,A,2,-0,0),x);break e}lO(y,m,Ki,M0,iE,d,Js,bf,qh,Ru,A,0,-0,0)}}break}while(!0);vl(c)}function lO(c,d,m,y,x,A,G,Q,ce,ke,je,$e,Ae,Re){if(c.timeoutHandle=-1,$e=d.subtreeFlags,($e&8192||($e&16785408)===16785408)&&(Sg={stylesheets:null,count:0,unsuspend:rW},tO(d),$e=iW(),$e!==null)){c.cancelPendingCommit=$e(mO.bind(null,c,d,A,m,y,x,G,Q,ce,je,1,Ae,Re)),Du(c,A,G,!ke);return}mO(c,d,A,m,y,x,G,Q,ce)}function SK(c){for(var d=c;;){var m=d.tag;if((m===0||m===11||m===15)&&d.flags&16384&&(m=d.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var y=0;y<m.length;y++){var x=m[y],A=x.getSnapshot;x=x.value;try{if(!oi(A(),x))return!1}catch{return!1}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Du(c,d,m,y){d&=~oE,d&=~bf,c.suspendedLanes|=d,c.pingedLanes&=~d,y&&(c.warmLanes|=d),y=c.expirationTimes;for(var x=d;0<x;){var A=31-kn(x),G=1<<A;y[A]=-1,x&=~G}m!==0&&ft(c,m,d)}function I0(){return(Yn&6)===0?(gg(0),!1):!0}function uE(){if(fn!==null){if(Xn===0)var c=fn.return;else c=fn,dc=hf=null,Tx(c),$h=null,sg=0,c=fn;for(;c!==null;)HD(c.alternate,c),c=c.return;fn=null}}function Wh(c,d){var m=c.timeoutHandle;m!==-1&&(c.timeoutHandle=-1,$K(m)),m=c.cancelPendingCommit,m!==null&&(c.cancelPendingCommit=null,m()),uE(),ur=c,fn=m=lc(c.current,null),Rn=d,Xn=0,ys=null,Ru=!1,Uh=Do(c,d),rE=!1,qh=Js=oE=bf=Mu=Pr=0,Ki=pg=null,iE=!1,(d&8)!==0&&(d|=d&32);var y=c.entangledLanes;if(y!==0)for(c=c.entanglements,y&=d;0<y;){var x=31-kn(y),A=1<<x;d|=c[x],y&=~A}return bc=d,It(),m}function cO(c,d){rn=null,j.H=v0,d===Qm||d===l0?(d=kN(),Xn=3):d===xN?(d=kN(),Xn=4):Xn=d===TD?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,ys=d,fn===null&&(Pr=1,x0(c,yt(d,c.current)))}function uO(){var c=j.H;return j.H=v0,c===null?v0:c}function dO(){var c=j.A;return j.A=wK,c}function dE(){Pr=4,Ru||(Rn&4194048)!==Rn&&Zs.current!==null||(Uh=!0),(Mu&134217727)===0&&(bf&134217727)===0||ur===null||Du(ur,Rn,Js,!1)}function fE(c,d,m){var y=Yn;Yn|=2;var x=uO(),A=dO();(ur!==c||Rn!==d)&&(M0=null,Wh(c,d)),d=!1;var G=Pr;e:do try{if(Xn!==0&&fn!==null){var Q=fn,ce=ys;switch(Xn){case 8:uE(),G=6;break e;case 3:case 2:case 9:case 6:Zs.current===null&&(d=!0);var ke=Xn;if(Xn=0,ys=null,Yh(c,Q,ce,ke),m&&Uh){G=0;break e}break;default:ke=Xn,Xn=0,ys=null,Yh(c,Q,ce,ke)}}xK(),G=Pr;break}catch(je){cO(c,je)}while(!0);return d&&c.shellSuspendCounter++,dc=hf=null,Yn=y,j.H=x,j.A=A,fn===null&&(ur=null,Rn=0,It()),G}function xK(){for(;fn!==null;)fO(fn)}function EK(c,d){var m=Yn;Yn|=2;var y=uO(),x=dO();ur!==c||Rn!==d?(M0=null,R0=At()+500,Wh(c,d)):Uh=Do(c,d);e:do try{if(Xn!==0&&fn!==null){d=fn;var A=ys;t:switch(Xn){case 1:Xn=0,ys=null,Yh(c,d,A,1);break;case 2:case 9:if(EN(A)){Xn=0,ys=null,hO(d);break}d=function(){Xn!==2&&Xn!==9||ur!==c||(Xn=7),vl(c)},A.then(d,d);break e;case 3:Xn=7;break e;case 4:Xn=5;break e;case 7:EN(A)?(Xn=0,ys=null,hO(d)):(Xn=0,ys=null,Yh(c,d,A,7));break;case 5:var G=null;switch(fn.tag){case 26:G=fn.memoizedState;case 5:case 27:var Q=fn;if(!G||WO(G)){Xn=0,ys=null;var ce=Q.sibling;if(ce!==null)fn=ce;else{var ke=Q.return;ke!==null?(fn=ke,N0(ke)):fn=null}break t}}Xn=0,ys=null,Yh(c,d,A,5);break;case 6:Xn=0,ys=null,Yh(c,d,A,6);break;case 8:uE(),Pr=6;break e;default:throw Error(r(462))}}_K();break}catch(je){cO(c,je)}while(!0);return dc=hf=null,j.H=y,j.A=x,Yn=m,fn!==null?0:(ur=null,Rn=0,It(),Pr)}function _K(){for(;fn!==null&&!$t();)fO(fn)}function fO(c){var d=BD(c.alternate,c,bc);c.memoizedProps=c.pendingProps,d===null?N0(c):fn=d}function hO(c){var d=c,m=d.alternate;switch(d.tag){case 15:case 0:d=DD(m,d,d.pendingProps,d.type,void 0,Rn);break;case 11:d=DD(m,d,d.pendingProps,d.type.render,d.ref,Rn);break;case 5:Tx(d);default:HD(m,d),d=fn=pN(d,bc),d=BD(m,d,bc)}c.memoizedProps=c.pendingProps,d===null?N0(c):fn=d}function Yh(c,d,m,y){dc=hf=null,Tx(d),$h=null,sg=0;var x=d.return;try{if(pK(c,x,d,m,Rn)){Pr=1,x0(c,yt(m,c.current)),fn=null;return}}catch(A){if(x!==null)throw fn=x,A;Pr=1,x0(c,yt(m,c.current)),fn=null;return}d.flags&32768?(Bn||y===1?c=!0:Uh||(Rn&536870912)!==0?c=!1:(Ru=c=!0,(y===2||y===9||y===3||y===6)&&(y=Zs.current,y!==null&&y.tag===13&&(y.flags|=16384))),pO(d,c)):N0(d)}function N0(c){var d=c;do{if((d.flags&32768)!==0){pO(d,Ru);return}c=d.return;var m=gK(d.alternate,d,bc);if(m!==null){fn=m;return}if(d=d.sibling,d!==null){fn=d;return}fn=d=c}while(d!==null);Pr===0&&(Pr=5)}function pO(c,d){do{var m=yK(c.alternate,c);if(m!==null){m.flags&=32767,fn=m;return}if(m=c.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!d&&(c=c.sibling,c!==null)){fn=c;return}fn=c=m}while(c!==null);Pr=6,fn=null}function mO(c,d,m,y,x,A,G,Q,ce){c.cancelPendingCommit=null;do D0();while(Ho!==0);if((Yn&6)!==0)throw Error(r(327));if(d!==null){if(d===c.current)throw Error(r(177));if(A=d.lanes|d.childLanes,A|=Bo,$r(c,m,A,G,Q,ce),c===ur&&(fn=ur=null,Rn=0),Gh=d,Nu=c,Kh=m,aE=A,lE=x,iO=y,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,RK(Ut,function(){return wO(),null})):(c.callbackNode=null,c.callbackPriority=0),y=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||y){y=j.T,j.T=null,x=U.p,U.p=2,G=Yn,Yn|=4;try{vK(c,d,m)}finally{Yn=G,U.p=x,j.T=y}}Ho=1,gO(),yO(),vO()}}function gO(){if(Ho===1){Ho=0;var c=Nu,d=Gh,m=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||m){m=j.T,j.T=null;var y=U.p;U.p=2;var x=Yn;Yn|=4;try{ZD(d,c);var A=EE,G=W(c.containerInfo),Q=A.focusedElem,ce=A.selectionRange;if(G!==Q&&Q&&Q.ownerDocument&&L(Q.ownerDocument.documentElement,Q)){if(ce!==null&&X(Q)){var ke=ce.start,je=ce.end;if(je===void 0&&(je=ke),"selectionStart"in Q)Q.selectionStart=ke,Q.selectionEnd=Math.min(je,Q.value.length);else{var $e=Q.ownerDocument||document,Ae=$e&&$e.defaultView||window;if(Ae.getSelection){var Re=Ae.getSelection(),Nt=Q.textContent.length,_t=Math.min(ce.start,Nt),tr=ce.end===void 0?_t:Math.min(ce.end,Nt);!Re.extend&&_t>tr&&(G=tr,tr=_t,_t=G);var we=I(Q,_t),pe=I(Q,tr);if(we&&pe&&(Re.rangeCount!==1||Re.anchorNode!==we.node||Re.anchorOffset!==we.offset||Re.focusNode!==pe.node||Re.focusOffset!==pe.offset)){var _e=$e.createRange();_e.setStart(we.node,we.offset),Re.removeAllRanges(),_t>tr?(Re.addRange(_e),Re.extend(pe.node,pe.offset)):(_e.setEnd(pe.node,pe.offset),Re.addRange(_e))}}}}for($e=[],Re=Q;Re=Re.parentNode;)Re.nodeType===1&&$e.push({element:Re,left:Re.scrollLeft,top:Re.scrollTop});for(typeof Q.focus=="function"&&Q.focus(),Q=0;Q<$e.length;Q++){var Be=$e[Q];Be.element.scrollLeft=Be.left,Be.element.scrollTop=Be.top}}q0=!!xE,EE=xE=null}finally{Yn=x,U.p=y,j.T=m}}c.current=d,Ho=2}}function yO(){if(Ho===2){Ho=0;var c=Nu,d=Gh,m=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||m){m=j.T,j.T=null;var y=U.p;U.p=2;var x=Yn;Yn|=4;try{WD(c,d.alternate,d)}finally{Yn=x,U.p=y,j.T=m}}Ho=3}}function vO(){if(Ho===4||Ho===3){Ho=0,$n();var c=Nu,d=Gh,m=Kh,y=iO;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Ho=5:(Ho=0,Gh=Nu=null,bO(c,c.pendingLanes));var x=c.pendingLanes;if(x===0&&(Iu=null),Fn(m),d=d.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Ht,d,void 0,(d.current.flags&128)===128)}catch{}if(y!==null){d=j.T,x=U.p,U.p=2,j.T=null;try{for(var A=c.onRecoverableError,G=0;G<y.length;G++){var Q=y[G];A(Q.value,{componentStack:Q.stack})}}finally{j.T=d,U.p=x}}(Kh&3)!==0&&D0(),vl(c),x=c.pendingLanes,(m&4194090)!==0&&(x&42)!==0?c===cE?mg++:(mg=0,cE=c):mg=0,gg(0)}}function bO(c,d){(c.pooledCacheLanes&=d)===0&&(d=c.pooledCache,d!=null&&(c.pooledCache=null,Ym(d)))}function D0(c){return gO(),yO(),vO(),wO()}function wO(){if(Ho!==5)return!1;var c=Nu,d=aE;aE=0;var m=Fn(Kh),y=j.T,x=U.p;try{U.p=32>m?32:m,j.T=null,m=lE,lE=null;var A=Nu,G=Kh;if(Ho=0,Gh=Nu=null,Kh=0,(Yn&6)!==0)throw Error(r(331));var Q=Yn;if(Yn|=4,rO(A.current),eO(A,A.current,G,m),Yn=Q,gg(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Ht,A)}catch{}return!0}finally{U.p=x,j.T=y,bO(c,d)}}function CO(c,d,m){d=yt(m,d),d=Hx(c.stateNode,d,2),c=Su(c,d,2),c!==null&&(Cr(c,2),vl(c))}function or(c,d,m){if(c.tag===3)CO(c,c,m);else for(;d!==null;){if(d.tag===3){CO(d,c,m);break}else if(d.tag===1){var y=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Iu===null||!Iu.has(y))){c=yt(m,c),m=_D(2),y=Su(d,m,2),y!==null&&(kD(m,y,d,c),Cr(y,2),vl(y));break}}d=d.return}}function hE(c,d,m){var y=c.pingCache;if(y===null){y=c.pingCache=new CK;var x=new Set;y.set(d,x)}else x=y.get(d),x===void 0&&(x=new Set,y.set(d,x));x.has(m)||(rE=!0,x.add(m),c=kK.bind(null,c,d,m),d.then(c,c))}function kK(c,d,m){var y=c.pingCache;y!==null&&y.delete(d),c.pingedLanes|=c.suspendedLanes&m,c.warmLanes&=~m,ur===c&&(Rn&m)===m&&(Pr===4||Pr===3&&(Rn&62914560)===Rn&&300>At()-sE?(Yn&2)===0&&Wh(c,0):oE|=m,qh===Rn&&(qh=0)),vl(c)}function SO(c,d){d===0&&(d=Qe()),c=Na(c,d),c!==null&&(Cr(c,d),vl(c))}function TK(c){var d=c.memoizedState,m=0;d!==null&&(m=d.retryLane),SO(c,m)}function AK(c,d){var m=0;switch(c.tag){case 13:var y=c.stateNode,x=c.memoizedState;x!==null&&(m=x.retryLane);break;case 19:y=c.stateNode;break;case 22:y=c.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(d),SO(c,m)}function RK(c,d){return mn(c,d)}var O0=null,Xh=null,pE=!1,P0=!1,mE=!1,wf=0;function vl(c){c!==Xh&&c.next===null&&(Xh===null?O0=Xh=c:Xh=Xh.next=c),P0=!0,pE||(pE=!0,IK())}function gg(c,d){if(!mE&&P0){mE=!0;do for(var m=!1,y=O0;y!==null;){if(c!==0){var x=y.pendingLanes;if(x===0)var A=0;else{var G=y.suspendedLanes,Q=y.pingedLanes;A=(1<<31-kn(42|c)+1)-1,A&=x&~(G&~Q),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(m=!0,kO(y,A))}else A=Rn,A=nt(y,y===ur?A:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(A&3)===0||Do(y,A)||(m=!0,kO(y,A));y=y.next}while(m);mE=!1}}function MK(){xO()}function xO(){P0=pE=!1;var c=0;wf!==0&&(BK()&&(c=wf),wf=0);for(var d=At(),m=null,y=O0;y!==null;){var x=y.next,A=EO(y,d);A===0?(y.next=null,m===null?O0=x:m.next=x,x===null&&(Xh=m)):(m=y,(c!==0||(A&3)!==0)&&(P0=!0)),y=x}gg(c)}function EO(c,d){for(var m=c.suspendedLanes,y=c.pingedLanes,x=c.expirationTimes,A=c.pendingLanes&-62914561;0<A;){var G=31-kn(A),Q=1<<G,ce=x[G];ce===-1?((Q&m)===0||(Q&y)!==0)&&(x[G]=Br(Q,d)):ce<=d&&(c.expiredLanes|=Q),A&=~Q}if(d=ur,m=Rn,m=nt(c,c===d?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),y=c.callbackNode,m===0||c===d&&(Xn===2||Xn===9)||c.cancelPendingCommit!==null)return y!==null&&y!==null&&Ln(y),c.callbackNode=null,c.callbackPriority=0;if((m&3)===0||Do(c,m)){if(d=m&-m,d===c.callbackPriority)return d;switch(y!==null&&Ln(y),Fn(m)){case 2:case 8:m=Vt;break;case 32:m=Ut;break;case 268435456:m=Wt;break;default:m=Ut}return y=_O.bind(null,c),m=mn(m,y),c.callbackPriority=d,c.callbackNode=m,d}return y!==null&&y!==null&&Ln(y),c.callbackPriority=2,c.callbackNode=null,2}function _O(c,d){if(Ho!==0&&Ho!==5)return c.callbackNode=null,c.callbackPriority=0,null;var m=c.callbackNode;if(D0()&&c.callbackNode!==m)return null;var y=Rn;return y=nt(c,c===ur?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),y===0?null:(aO(c,y,d),EO(c,At()),c.callbackNode!=null&&c.callbackNode===m?_O.bind(null,c):null)}function kO(c,d){if(D0())return null;aO(c,d,!0)}function IK(){HK(function(){(Yn&6)!==0?mn(Jt,MK):xO()})}function gE(){return wf===0&&(wf=Nr()),wf}function TO(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Sa(""+c)}function AO(c,d){var m=d.ownerDocument.createElement("input");return m.name=d.name,m.value=d.value,c.id&&m.setAttribute("form",c.id),d.parentNode.insertBefore(m,d),c=new FormData(c),m.parentNode.removeChild(m),c}function NK(c,d,m,y,x){if(d==="submit"&&m&&m.stateNode===x){var A=TO((x[mt]||null).action),G=y.submitter;G&&(d=(d=G[mt]||null)?TO(d.formAction):G.getAttribute("formAction"),d!==null&&(A=d,G=null));var Q=new cu("action","action",null,y,x);c.push({event:Q,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(wf!==0){var ce=G?AO(x,G):new FormData(x);Lx(m,{pending:!0,data:ce,method:x.method,action:A},null,ce)}}else typeof A=="function"&&(Q.preventDefault(),ce=G?AO(x,G):new FormData(x),Lx(m,{pending:!0,data:ce,method:x.method,action:A},A,ce))},currentTarget:x}]})}}for(var yE=0;yE<et.length;yE++){var vE=et[yE],DK=vE.toLowerCase(),OK=vE[0].toUpperCase()+vE.slice(1);Ge(DK,"on"+OK)}Ge(Te,"onAnimationEnd"),Ge(Me,"onAnimationIteration"),Ge(Ie,"onAnimationStart"),Ge("dblclick","onDoubleClick"),Ge("focusin","onFocus"),Ge("focusout","onBlur"),Ge(Ve,"onTransitionRun"),Ge(Ke,"onTransitionStart"),Ge(Je,"onTransitionCancel"),Ge(qe,"onTransitionEnd"),cs("onMouseEnter",["mouseout","mouseover"]),cs("onMouseLeave",["mouseout","mouseover"]),cs("onPointerEnter",["pointerout","pointerover"]),cs("onPointerLeave",["pointerout","pointerover"]),Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PK=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yg));function RO(c,d){d=(d&4)!==0;for(var m=0;m<c.length;m++){var y=c[m],x=y.event;y=y.listeners;e:{var A=void 0;if(d)for(var G=y.length-1;0<=G;G--){var Q=y[G],ce=Q.instance,ke=Q.currentTarget;if(Q=Q.listener,ce!==A&&x.isPropagationStopped())break e;A=Q,x.currentTarget=ke;try{A(x)}catch(je){S0(je)}x.currentTarget=null,A=ce}else for(G=0;G<y.length;G++){if(Q=y[G],ce=Q.instance,ke=Q.currentTarget,Q=Q.listener,ce!==A&&x.isPropagationStopped())break e;A=Q,x.currentTarget=ke;try{A(x)}catch(je){S0(je)}x.currentTarget=null,A=ce}}}}function hn(c,d){var m=d[il];m===void 0&&(m=d[il]=new Set);var y=c+"__bubble";m.has(y)||(MO(d,c,2,!1),m.add(y))}function bE(c,d,m){var y=0;d&&(y|=4),MO(m,c,y,d)}var L0="_reactListening"+Math.random().toString(36).slice(2);function wE(c){if(!c[L0]){c[L0]=!0,su.forEach(function(m){m!=="selectionchange"&&(PK.has(m)||bE(m,!1,c),bE(m,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[L0]||(d[L0]=!0,bE("selectionchange",!1,d))}}function MO(c,d,m,y){switch(eP(d)){case 2:var x=lW;break;case 8:x=cW;break;default:x=OE}m=x.bind(null,d,m,c),x=void 0,!$i||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(x=!0),y?x!==void 0?c.addEventListener(d,m,{capture:!0,passive:x}):c.addEventListener(d,m,!0):x!==void 0?c.addEventListener(d,m,{passive:x}):c.addEventListener(d,m,!1)}function CE(c,d,m,y,x){var A=y;if((d&1)===0&&(d&2)===0&&y!==null)e:for(;;){if(y===null)return;var G=y.tag;if(G===3||G===4){var Q=y.stateNode.containerInfo;if(Q===x)break;if(G===4)for(G=y.return;G!==null;){var ce=G.tag;if((ce===3||ce===4)&&G.stateNode.containerInfo===x)return;G=G.return}for(;Q!==null;){if(G=ei(Q),G===null)return;if(ce=G.tag,ce===5||ce===6||ce===26||ce===27){y=A=G;continue e}Q=Q.parentNode}}y=y.return}cl(function(){var ke=A,je=_i(m),$e=[];e:{var Ae=Xe.get(c);if(Ae!==void 0){var Re=cu,Nt=c;switch(c){case"keypress":if(Fi(m)===0)break e;case"keydown":case"keyup":Re=Ma;break;case"focusin":Nt="focus",Re=ka;break;case"focusout":Nt="blur",Re=ka;break;case"beforeblur":case"afterblur":Re=ka;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Re=ri;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Re=Th;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Re=pu;break;case Te:case Me:case Ie:Re=ic;break;case qe:Re=mu;break;case"scroll":case"scrollend":Re=rc;break;case"wheel":Re=Ia;break;case"copy":case"cut":case"paste":Re=Ta;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Re=hu;break;case"toggle":case"beforetoggle":Re=of}var _t=(d&4)!==0,tr=!_t&&(c==="scroll"||c==="scrollend"),we=_t?Ae!==null?Ae+"Capture":null:Ae;_t=[];for(var pe=ke,_e;pe!==null;){var Be=pe;if(_e=Be.stateNode,Be=Be.tag,Be!==5&&Be!==26&&Be!==27||_e===null||we===null||(Be=xa(pe,we),Be!=null&&_t.push(vg(pe,Be,_e))),tr)break;pe=pe.return}0<_t.length&&(Ae=new Re(Ae,Nt,null,m,je),$e.push({event:Ae,listeners:_t}))}}if((d&7)===0){e:{if(Ae=c==="mouseover"||c==="pointerover",Re=c==="mouseout"||c==="pointerout",Ae&&m!==wo&&(Nt=m.relatedTarget||m.fromElement)&&(ei(Nt)||Nt[qt]))break e;if((Re||Ae)&&(Ae=je.window===je?je:(Ae=je.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,Re?(Nt=m.relatedTarget||m.toElement,Re=ke,Nt=Nt?ei(Nt):null,Nt!==null&&(tr=i(Nt),_t=Nt.tag,Nt!==tr||_t!==5&&_t!==27&&_t!==6)&&(Nt=null)):(Re=null,Nt=ke),Re!==Nt)){if(_t=ri,Be="onMouseLeave",we="onMouseEnter",pe="mouse",(c==="pointerout"||c==="pointerover")&&(_t=hu,Be="onPointerLeave",we="onPointerEnter",pe="pointer"),tr=Re==null?Ae:Si(Re),_e=Nt==null?Ae:Si(Nt),Ae=new _t(Be,pe+"leave",Re,m,je),Ae.target=tr,Ae.relatedTarget=_e,Be=null,ei(je)===ke&&(_t=new _t(we,pe+"enter",Nt,m,je),_t.target=_e,_t.relatedTarget=tr,Be=_t),tr=Be,Re&&Nt)t:{for(_t=Re,we=Nt,pe=0,_e=_t;_e;_e=Qh(_e))pe++;for(_e=0,Be=we;Be;Be=Qh(Be))_e++;for(;0<pe-_e;)_t=Qh(_t),pe--;for(;0<_e-pe;)we=Qh(we),_e--;for(;pe--;){if(_t===we||we!==null&&_t===we.alternate)break t;_t=Qh(_t),we=Qh(we)}_t=null}else _t=null;Re!==null&&IO($e,Ae,Re,_t,!1),Nt!==null&&tr!==null&&IO($e,tr,Nt,_t,!0)}}e:{if(Ae=ke?Si(ke):window,Re=Ae.nodeName&&Ae.nodeName.toLowerCase(),Re==="select"||Re==="input"&&Ae.type==="file")var lt=af;else if(Tr(Ae))if(Ws)lt=vu;else{lt=ac;var ln=t0}else Re=Ae.nodeName,!Re||Re.toLowerCase()!=="input"||Ae.type!=="checkbox"&&Ae.type!=="radio"?ke&&Jd(ke.elementType)&&(lt=af):lt=Um;if(lt&&(lt=lt(c,ke))){Gs($e,lt,m,je);break e}ln&&ln(c,Ae,ke),c==="focusout"&&ke&&Ae.type==="number"&&ke.memoizedProps.value!=null&&us(Ae,"number",Ae.value)}switch(ln=ke?Si(ke):window,c){case"focusin":(Tr(ln)||ln.contentEditable==="true")&&(le=ln,he=ke,me=null);break;case"focusout":me=he=le=null;break;case"mousedown":be=!0;break;case"contextmenu":case"mouseup":case"dragend":be=!1,de($e,m,je);break;case"selectionchange":if(re)break;case"keydown":case"keyup":de($e,m,je)}var gt;if(Ui)e:{switch(c){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else dn?Ne(c,m)&&(Tt="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(Tt="onCompositionStart");Tt&&(H&&m.locale!=="ko"&&(dn||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&dn&&(gt=_a()):(Hi=je,Ea="value"in Hi?Hi.value:Hi.textContent,dn=!0)),ln=V0(ke,Tt),0<ln.length&&(Tt=new sc(Tt,c,null,m,je),$e.push({event:Tt,listeners:ln}),gt?Tt.data=gt:(gt=Ze(m),gt!==null&&(Tt.data=gt)))),(gt=N?Dr(c,m):yn(c,m))&&(Tt=V0(ke,"onBeforeInput"),0<Tt.length&&(ln=new sc("onBeforeInput","beforeinput",null,m,je),$e.push({event:ln,listeners:Tt}),ln.data=gt)),NK($e,c,ke,m,je)}RO($e,d)})}function vg(c,d,m){return{instance:c,listener:d,currentTarget:m}}function V0(c,d){for(var m=d+"Capture",y=[];c!==null;){var x=c,A=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||A===null||(x=xa(c,m),x!=null&&y.unshift(vg(c,x,A)),x=xa(c,d),x!=null&&y.push(vg(c,x,A))),c.tag===3)return y;c=c.return}return[]}function Qh(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function IO(c,d,m,y,x){for(var A=d._reactName,G=[];m!==null&&m!==y;){var Q=m,ce=Q.alternate,ke=Q.stateNode;if(Q=Q.tag,ce!==null&&ce===y)break;Q!==5&&Q!==26&&Q!==27||ke===null||(ce=ke,x?(ke=xa(m,A),ke!=null&&G.unshift(vg(m,ke,ce))):x||(ke=xa(m,A),ke!=null&&G.push(vg(m,ke,ce)))),m=m.return}G.length!==0&&c.push({event:d,listeners:G})}var LK=/\r\n?/g,VK=/\u0000|\uFFFD/g;function NO(c){return(typeof c=="string"?c:""+c).replace(LK,`
`).replace(VK,"")}function DO(c,d){return d=NO(d),NO(c)===d}function j0(){}function er(c,d,m,y,x,A){switch(m){case"children":typeof y=="string"?d==="body"||d==="textarea"&&y===""||Bi(c,y):(typeof y=="number"||typeof y=="bigint")&&d!=="body"&&Bi(c,""+y);break;case"className":Ei(c,"class",y);break;case"tabIndex":Ei(c,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Ei(c,m,y);break;case"style":Zd(c,y,A);break;case"data":if(d!=="object"){Ei(c,"data",y);break}case"src":case"href":if(y===""&&(d!=="a"||m!=="href")){c.removeAttribute(m);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){c.removeAttribute(m);break}y=Sa(""+y),c.setAttribute(m,y);break;case"action":case"formAction":if(typeof y=="function"){c.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(m==="formAction"?(d!=="input"&&er(c,d,"name",x.name,x,null),er(c,d,"formEncType",x.formEncType,x,null),er(c,d,"formMethod",x.formMethod,x,null),er(c,d,"formTarget",x.formTarget,x,null)):(er(c,d,"encType",x.encType,x,null),er(c,d,"method",x.method,x,null),er(c,d,"target",x.target,x,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){c.removeAttribute(m);break}y=Sa(""+y),c.setAttribute(m,y);break;case"onClick":y!=null&&(c.onclick=j0);break;case"onScroll":y!=null&&hn("scroll",c);break;case"onScrollEnd":y!=null&&hn("scrollend",c);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(m=y.__html,m!=null){if(x.children!=null)throw Error(r(60));c.innerHTML=m}}break;case"multiple":c.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":c.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){c.removeAttribute("xlink:href");break}m=Sa(""+y),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?c.setAttribute(m,""+y):c.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?c.setAttribute(m,""):c.removeAttribute(m);break;case"capture":case"download":y===!0?c.setAttribute(m,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?c.setAttribute(m,y):c.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?c.setAttribute(m,y):c.removeAttribute(m);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?c.removeAttribute(m):c.setAttribute(m,y);break;case"popover":hn("beforetoggle",c),hn("toggle",c),xi(c,"popover",y);break;case"xlinkActuate":Hr(c,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Hr(c,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Hr(c,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Hr(c,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Hr(c,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Hr(c,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Hr(c,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Hr(c,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Hr(c,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":xi(c,"is",y);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=jo.get(m)||m,xi(c,m,y))}}function SE(c,d,m,y,x,A){switch(m){case"style":Zd(c,y,A);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(m=y.__html,m!=null){if(x.children!=null)throw Error(r(60));c.innerHTML=m}}break;case"children":typeof y=="string"?Bi(c,y):(typeof y=="number"||typeof y=="bigint")&&Bi(c,""+y);break;case"onScroll":y!=null&&hn("scroll",c);break;case"onScrollEnd":y!=null&&hn("scrollend",c);break;case"onClick":y!=null&&(c.onclick=j0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Li.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(x=m.endsWith("Capture"),d=m.slice(2,x?m.length-7:void 0),A=c[mt]||null,A=A!=null?A[m]:null,typeof A=="function"&&c.removeEventListener(d,A,x),typeof y=="function")){typeof A!="function"&&A!==null&&(m in c?c[m]=null:c.hasAttribute(m)&&c.removeAttribute(m)),c.addEventListener(d,y,x);break e}m in c?c[m]=y:y===!0?c.setAttribute(m,""):xi(c,m,y)}}}function Fo(c,d,m){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":hn("error",c),hn("load",c);var y=!1,x=!1,A;for(A in m)if(m.hasOwnProperty(A)){var G=m[A];if(G!=null)switch(A){case"src":y=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:er(c,d,A,G,m,null)}}x&&er(c,d,"srcSet",m.srcSet,m,null),y&&er(c,d,"src",m.src,m,null);return;case"input":hn("invalid",c);var Q=A=G=x=null,ce=null,ke=null;for(y in m)if(m.hasOwnProperty(y)){var je=m[y];if(je!=null)switch(y){case"name":x=je;break;case"type":G=je;break;case"checked":ce=je;break;case"defaultChecked":ke=je;break;case"value":A=je;break;case"defaultValue":Q=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(r(137,d));break;default:er(c,d,y,je,m,null)}}sl(c,A,Q,ce,ke,G,x,!1),Bs(c);return;case"select":hn("invalid",c),y=G=A=null;for(x in m)if(m.hasOwnProperty(x)&&(Q=m[x],Q!=null))switch(x){case"value":A=Q;break;case"defaultValue":G=Q;break;case"multiple":y=Q;default:er(c,d,x,Q,m,null)}d=A,m=G,c.multiple=!!y,d!=null?$s(c,!!y,d,!1):m!=null&&$s(c,!!y,m,!0);return;case"textarea":hn("invalid",c),A=x=y=null;for(G in m)if(m.hasOwnProperty(G)&&(Q=m[G],Q!=null))switch(G){case"value":y=Q;break;case"defaultValue":x=Q;break;case"children":A=Q;break;case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(91));break;default:er(c,d,G,Q,m,null)}al(c,y,x,A),Bs(c);return;case"option":for(ce in m)if(m.hasOwnProperty(ce)&&(y=m[ce],y!=null))switch(ce){case"selected":c.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:er(c,d,ce,y,m,null)}return;case"dialog":hn("beforetoggle",c),hn("toggle",c),hn("cancel",c),hn("close",c);break;case"iframe":case"object":hn("load",c);break;case"video":case"audio":for(y=0;y<yg.length;y++)hn(yg[y],c);break;case"image":hn("error",c),hn("load",c);break;case"details":hn("toggle",c);break;case"embed":case"source":case"link":hn("error",c),hn("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ke in m)if(m.hasOwnProperty(ke)&&(y=m[ke],y!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:er(c,d,ke,y,m,null)}return;default:if(Jd(d)){for(je in m)m.hasOwnProperty(je)&&(y=m[je],y!==void 0&&SE(c,d,je,y,m,void 0));return}}for(Q in m)m.hasOwnProperty(Q)&&(y=m[Q],y!=null&&er(c,d,Q,y,m,null))}function jK(c,d,m,y){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,A=null,G=null,Q=null,ce=null,ke=null,je=null;for(Re in m){var $e=m[Re];if(m.hasOwnProperty(Re)&&$e!=null)switch(Re){case"checked":break;case"value":break;case"defaultValue":ce=$e;default:y.hasOwnProperty(Re)||er(c,d,Re,null,y,$e)}}for(var Ae in y){var Re=y[Ae];if($e=m[Ae],y.hasOwnProperty(Ae)&&(Re!=null||$e!=null))switch(Ae){case"type":A=Re;break;case"name":x=Re;break;case"checked":ke=Re;break;case"defaultChecked":je=Re;break;case"value":G=Re;break;case"defaultValue":Q=Re;break;case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(r(137,d));break;default:Re!==$e&&er(c,d,Ae,Re,y,$e)}}bo(c,G,Q,ce,ke,je,A,x);return;case"select":Re=G=Q=Ae=null;for(A in m)if(ce=m[A],m.hasOwnProperty(A)&&ce!=null)switch(A){case"value":break;case"multiple":Re=ce;default:y.hasOwnProperty(A)||er(c,d,A,null,y,ce)}for(x in y)if(A=y[x],ce=m[x],y.hasOwnProperty(x)&&(A!=null||ce!=null))switch(x){case"value":Ae=A;break;case"defaultValue":Q=A;break;case"multiple":G=A;default:A!==ce&&er(c,d,x,A,y,ce)}d=Q,m=G,y=Re,Ae!=null?$s(c,!!m,Ae,!1):!!y!=!!m&&(d!=null?$s(c,!!m,d,!0):$s(c,!!m,m?[]:"",!1));return;case"textarea":Re=Ae=null;for(Q in m)if(x=m[Q],m.hasOwnProperty(Q)&&x!=null&&!y.hasOwnProperty(Q))switch(Q){case"value":break;case"children":break;default:er(c,d,Q,null,y,x)}for(G in y)if(x=y[G],A=m[G],y.hasOwnProperty(G)&&(x!=null||A!=null))switch(G){case"value":Ae=x;break;case"defaultValue":Re=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==A&&er(c,d,G,x,y,A)}An(c,Ae,Re);return;case"option":for(var Nt in m)if(Ae=m[Nt],m.hasOwnProperty(Nt)&&Ae!=null&&!y.hasOwnProperty(Nt))switch(Nt){case"selected":c.selected=!1;break;default:er(c,d,Nt,null,y,Ae)}for(ce in y)if(Ae=y[ce],Re=m[ce],y.hasOwnProperty(ce)&&Ae!==Re&&(Ae!=null||Re!=null))switch(ce){case"selected":c.selected=Ae&&typeof Ae!="function"&&typeof Ae!="symbol";break;default:er(c,d,ce,Ae,y,Re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _t in m)Ae=m[_t],m.hasOwnProperty(_t)&&Ae!=null&&!y.hasOwnProperty(_t)&&er(c,d,_t,null,y,Ae);for(ke in y)if(Ae=y[ke],Re=m[ke],y.hasOwnProperty(ke)&&Ae!==Re&&(Ae!=null||Re!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(r(137,d));break;default:er(c,d,ke,Ae,y,Re)}return;default:if(Jd(d)){for(var tr in m)Ae=m[tr],m.hasOwnProperty(tr)&&Ae!==void 0&&!y.hasOwnProperty(tr)&&SE(c,d,tr,void 0,y,Ae);for(je in y)Ae=y[je],Re=m[je],!y.hasOwnProperty(je)||Ae===Re||Ae===void 0&&Re===void 0||SE(c,d,je,Ae,y,Re);return}}for(var we in m)Ae=m[we],m.hasOwnProperty(we)&&Ae!=null&&!y.hasOwnProperty(we)&&er(c,d,we,null,y,Ae);for($e in y)Ae=y[$e],Re=m[$e],!y.hasOwnProperty($e)||Ae===Re||Ae==null&&Re==null||er(c,d,$e,Ae,y,Re)}var xE=null,EE=null;function B0(c){return c.nodeType===9?c:c.ownerDocument}function OO(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function PO(c,d){if(c===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&d==="foreignObject"?0:c}function _E(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var kE=null;function BK(){var c=window.event;return c&&c.type==="popstate"?c===kE?!1:(kE=c,!0):(kE=null,!1)}var LO=typeof setTimeout=="function"?setTimeout:void 0,$K=typeof clearTimeout=="function"?clearTimeout:void 0,VO=typeof Promise=="function"?Promise:void 0,HK=typeof queueMicrotask=="function"?queueMicrotask:typeof VO<"u"?function(c){return VO.resolve(null).then(c).catch(FK)}:LO;function FK(c){setTimeout(function(){throw c})}function Ou(c){return c==="head"}function jO(c,d){var m=d,y=0,x=0;do{var A=m.nextSibling;if(c.removeChild(m),A&&A.nodeType===8)if(m=A.data,m==="/$"){if(0<y&&8>y){m=y;var G=c.ownerDocument;if(m&1&&bg(G.documentElement),m&2&&bg(G.body),m&4)for(m=G.head,bg(m),G=m.firstChild;G;){var Q=G.nextSibling,ce=G.nodeName;G[ec]||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&G.rel.toLowerCase()==="stylesheet"||m.removeChild(G),G=Q}}if(x===0){c.removeChild(A),Tg(d);return}x--}else m==="$"||m==="$?"||m==="$!"?x++:y=m.charCodeAt(0)-48;else y=0;m=A}while(m);Tg(d)}function TE(c){var d=c.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var m=d;switch(d=d.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":TE(m),Po(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}c.removeChild(m)}}function zK(c,d,m,y){for(;c.nodeType===1;){var x=m;if(c.nodeName.toLowerCase()!==d.toLowerCase()){if(!y&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(y){if(!c[ec])switch(d){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(A=c.getAttribute("rel"),A==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(A!==x.rel||c.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||c.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||c.getAttribute("title")!==(x.title==null?null:x.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(A=c.getAttribute("src"),(A!==(x.src==null?null:x.src)||c.getAttribute("type")!==(x.type==null?null:x.type)||c.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&A&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(d==="input"&&c.type==="hidden"){var A=x.name==null?null:""+x.name;if(x.type==="hidden"&&c.getAttribute("name")===A)return c}else return c;if(c=Oa(c.nextSibling),c===null)break}return null}function UK(c,d,m){if(d==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!m||(c=Oa(c.nextSibling),c===null))return null;return c}function AE(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function qK(c,d){var m=c.ownerDocument;if(c.data!=="$?"||m.readyState==="complete")d();else{var y=function(){d(),m.removeEventListener("DOMContentLoaded",y)};m.addEventListener("DOMContentLoaded",y),c._reactRetry=y}}function Oa(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return c}var RE=null;function BO(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(d===0)return c;d--}else m==="/$"&&d++}c=c.previousSibling}return null}function $O(c,d,m){switch(d=B0(m),c){case"html":if(c=d.documentElement,!c)throw Error(r(452));return c;case"head":if(c=d.head,!c)throw Error(r(453));return c;case"body":if(c=d.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function bg(c){for(var d=c.attributes;d.length;)c.removeAttributeNode(d[0]);Po(c)}var ea=new Map,HO=new Set;function $0(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var wc=U.d;U.d={f:GK,r:KK,D:WK,C:YK,L:XK,m:QK,X:JK,S:ZK,M:eW};function GK(){var c=wc.f(),d=I0();return c||d}function KK(c){var d=co(c);d!==null&&d.tag===5&&d.type==="form"?aD(d):wc.r(c)}var Zh=typeof document>"u"?null:document;function FO(c,d,m){var y=Zh;if(y&&typeof d=="string"&&d){var x=Sr(d);x='link[rel="'+c+'"][href="'+x+'"]',typeof m=="string"&&(x+='[crossorigin="'+m+'"]'),HO.has(x)||(HO.add(x),c={rel:c,crossOrigin:m,href:d},y.querySelector(x)===null&&(d=y.createElement("link"),Fo(d,"link",c),zn(d),y.head.appendChild(d)))}}function WK(c){wc.D(c),FO("dns-prefetch",c,null)}function YK(c,d){wc.C(c,d),FO("preconnect",c,d)}function XK(c,d,m){wc.L(c,d,m);var y=Zh;if(y&&c&&d){var x='link[rel="preload"][as="'+Sr(d)+'"]';d==="image"&&m&&m.imageSrcSet?(x+='[imagesrcset="'+Sr(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(x+='[imagesizes="'+Sr(m.imageSizes)+'"]')):x+='[href="'+Sr(c)+'"]';var A=x;switch(d){case"style":A=Jh(c);break;case"script":A=ep(c)}ea.has(A)||(c=f({rel:"preload",href:d==="image"&&m&&m.imageSrcSet?void 0:c,as:d},m),ea.set(A,c),y.querySelector(x)!==null||d==="style"&&y.querySelector(wg(A))||d==="script"&&y.querySelector(Cg(A))||(d=y.createElement("link"),Fo(d,"link",c),zn(d),y.head.appendChild(d)))}}function QK(c,d){wc.m(c,d);var m=Zh;if(m&&c){var y=d&&typeof d.as=="string"?d.as:"script",x='link[rel="modulepreload"][as="'+Sr(y)+'"][href="'+Sr(c)+'"]',A=x;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=ep(c)}if(!ea.has(A)&&(c=f({rel:"modulepreload",href:c},d),ea.set(A,c),m.querySelector(x)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Cg(A)))return}y=m.createElement("link"),Fo(y,"link",c),zn(y),m.head.appendChild(y)}}}function ZK(c,d,m){wc.S(c,d,m);var y=Zh;if(y&&c){var x=Lo(y).hoistableStyles,A=Jh(c);d=d||"default";var G=x.get(A);if(!G){var Q={loading:0,preload:null};if(G=y.querySelector(wg(A)))Q.loading=5;else{c=f({rel:"stylesheet",href:c,"data-precedence":d},m),(m=ea.get(A))&&ME(c,m);var ce=G=y.createElement("link");zn(ce),Fo(ce,"link",c),ce._p=new Promise(function(ke,je){ce.onload=ke,ce.onerror=je}),ce.addEventListener("load",function(){Q.loading|=1}),ce.addEventListener("error",function(){Q.loading|=2}),Q.loading|=4,H0(G,d,y)}G={type:"stylesheet",instance:G,count:1,state:Q},x.set(A,G)}}}function JK(c,d){wc.X(c,d);var m=Zh;if(m&&c){var y=Lo(m).hoistableScripts,x=ep(c),A=y.get(x);A||(A=m.querySelector(Cg(x)),A||(c=f({src:c,async:!0},d),(d=ea.get(x))&&IE(c,d),A=m.createElement("script"),zn(A),Fo(A,"link",c),m.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},y.set(x,A))}}function eW(c,d){wc.M(c,d);var m=Zh;if(m&&c){var y=Lo(m).hoistableScripts,x=ep(c),A=y.get(x);A||(A=m.querySelector(Cg(x)),A||(c=f({src:c,async:!0,type:"module"},d),(d=ea.get(x))&&IE(c,d),A=m.createElement("script"),zn(A),Fo(A,"link",c),m.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},y.set(x,A))}}function zO(c,d,m,y){var x=(x=ve.current)?$0(x):null;if(!x)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(d=Jh(m.href),m=Lo(x).hoistableStyles,y=m.get(d),y||(y={type:"style",instance:null,count:0,state:null},m.set(d,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){c=Jh(m.href);var A=Lo(x).hoistableStyles,G=A.get(c);if(G||(x=x.ownerDocument||x,G={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(c,G),(A=x.querySelector(wg(c)))&&!A._p&&(G.instance=A,G.state.loading=5),ea.has(c)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},ea.set(c,m),A||tW(x,c,m,G.state))),d&&y===null)throw Error(r(528,""));return G}if(d&&y!==null)throw Error(r(529,""));return null;case"script":return d=m.async,m=m.src,typeof m=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=ep(m),m=Lo(x).hoistableScripts,y=m.get(d),y||(y={type:"script",instance:null,count:0,state:null},m.set(d,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Jh(c){return'href="'+Sr(c)+'"'}function wg(c){return'link[rel="stylesheet"]['+c+"]"}function UO(c){return f({},c,{"data-precedence":c.precedence,precedence:null})}function tW(c,d,m,y){c.querySelector('link[rel="preload"][as="style"]['+d+"]")?y.loading=1:(d=c.createElement("link"),y.preload=d,d.addEventListener("load",function(){return y.loading|=1}),d.addEventListener("error",function(){return y.loading|=2}),Fo(d,"link",m),zn(d),c.head.appendChild(d))}function ep(c){return'[src="'+Sr(c)+'"]'}function Cg(c){return"script[async]"+c}function qO(c,d,m){if(d.count++,d.instance===null)switch(d.type){case"style":var y=c.querySelector('style[data-href~="'+Sr(m.href)+'"]');if(y)return d.instance=y,zn(y),y;var x=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return y=(c.ownerDocument||c).createElement("style"),zn(y),Fo(y,"style",x),H0(y,m.precedence,c),d.instance=y;case"stylesheet":x=Jh(m.href);var A=c.querySelector(wg(x));if(A)return d.state.loading|=4,d.instance=A,zn(A),A;y=UO(m),(x=ea.get(x))&&ME(y,x),A=(c.ownerDocument||c).createElement("link"),zn(A);var G=A;return G._p=new Promise(function(Q,ce){G.onload=Q,G.onerror=ce}),Fo(A,"link",y),d.state.loading|=4,H0(A,m.precedence,c),d.instance=A;case"script":return A=ep(m.src),(x=c.querySelector(Cg(A)))?(d.instance=x,zn(x),x):(y=m,(x=ea.get(A))&&(y=f({},m),IE(y,x)),c=c.ownerDocument||c,x=c.createElement("script"),zn(x),Fo(x,"link",y),c.head.appendChild(x),d.instance=x);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(y=d.instance,d.state.loading|=4,H0(y,m.precedence,c));return d.instance}function H0(c,d,m){for(var y=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=y.length?y[y.length-1]:null,A=x,G=0;G<y.length;G++){var Q=y[G];if(Q.dataset.precedence===d)A=Q;else if(A!==x)break}A?A.parentNode.insertBefore(c,A.nextSibling):(d=m.nodeType===9?m.head:m,d.insertBefore(c,d.firstChild))}function ME(c,d){c.crossOrigin==null&&(c.crossOrigin=d.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=d.referrerPolicy),c.title==null&&(c.title=d.title)}function IE(c,d){c.crossOrigin==null&&(c.crossOrigin=d.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=d.referrerPolicy),c.integrity==null&&(c.integrity=d.integrity)}var F0=null;function GO(c,d,m){if(F0===null){var y=new Map,x=F0=new Map;x.set(m,y)}else x=F0,y=x.get(m),y||(y=new Map,x.set(m,y));if(y.has(c))return y;for(y.set(c,null),m=m.getElementsByTagName(c),x=0;x<m.length;x++){var A=m[x];if(!(A[ec]||A[Kn]||c==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var G=A.getAttribute(d)||"";G=c+G;var Q=y.get(G);Q?Q.push(A):y.set(G,[A])}}return y}function KO(c,d,m){c=c.ownerDocument||c,c.head.insertBefore(m,d==="title"?c.querySelector("head > title"):null)}function nW(c,d,m){if(m===1||d.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return c=d.disabled,typeof d.precedence=="string"&&c==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function WO(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var Sg=null;function rW(){}function oW(c,d,m){if(Sg===null)throw Error(r(475));var y=Sg;if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var x=Jh(m.href),A=c.querySelector(wg(x));if(A){c=A._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(y.count++,y=z0.bind(y),c.then(y,y)),d.state.loading|=4,d.instance=A,zn(A);return}A=c.ownerDocument||c,m=UO(m),(x=ea.get(x))&&ME(m,x),A=A.createElement("link"),zn(A);var G=A;G._p=new Promise(function(Q,ce){G.onload=Q,G.onerror=ce}),Fo(A,"link",m),d.instance=A}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(d,c),(c=d.state.preload)&&(d.state.loading&3)===0&&(y.count++,d=z0.bind(y),c.addEventListener("load",d),c.addEventListener("error",d))}}function iW(){if(Sg===null)throw Error(r(475));var c=Sg;return c.stylesheets&&c.count===0&&NE(c,c.stylesheets),0<c.count?function(d){var m=setTimeout(function(){if(c.stylesheets&&NE(c,c.stylesheets),c.unsuspend){var y=c.unsuspend;c.unsuspend=null,y()}},6e4);return c.unsuspend=d,function(){c.unsuspend=null,clearTimeout(m)}}:null}function z0(){if(this.count--,this.count===0){if(this.stylesheets)NE(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var U0=null;function NE(c,d){c.stylesheets=null,c.unsuspend!==null&&(c.count++,U0=new Map,d.forEach(sW,c),U0=null,z0.call(c))}function sW(c,d){if(!(d.state.loading&4)){var m=U0.get(c);if(m)var y=m.get(null);else{m=new Map,U0.set(c,m);for(var x=c.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<x.length;A++){var G=x[A];(G.nodeName==="LINK"||G.getAttribute("media")!=="not all")&&(m.set(G.dataset.precedence,G),y=G)}y&&m.set(null,y)}x=d.instance,G=x.getAttribute("data-precedence"),A=m.get(G)||y,A===y&&m.set(null,x),m.set(G,x),this.count++,y=z0.bind(this),x.addEventListener("load",y),x.addEventListener("error",y),A?A.parentNode.insertBefore(x,A.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(x,c.firstChild)),d.state.loading|=4}}var xg={$$typeof:D,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function aW(c,d,m,y,x,A,G,Q){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oo(0),this.hiddenUpdates=Oo(null),this.identifierPrefix=y,this.onUncaughtError=x,this.onCaughtError=A,this.onRecoverableError=G,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function YO(c,d,m,y,x,A,G,Q,ce,ke,je,$e){return c=new aW(c,d,m,G,Q,ce,ke,$e),d=1,A===!0&&(d|=24),A=ps(3,null,null,d),c.current=A,A.stateNode=c,d=hx(),d.refCount++,c.pooledCache=d,d.refCount++,A.memoizedState={element:y,isDehydrated:m,cache:d},yx(A),c}function XO(c){return c?(c=hl,c):hl}function QO(c,d,m,y,x,A){x=XO(x),y.context===null?y.context=x:y.pendingContext=x,y=Cu(d),y.payload={element:m},A=A===void 0?null:A,A!==null&&(y.callback=A),m=Su(c,y,d),m!==null&&(bs(m,c,d),Jm(m,c,d))}function ZO(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<d?m:d}}function DE(c,d){ZO(c,d),(c=c.alternate)&&ZO(c,d)}function JO(c){if(c.tag===13){var d=Na(c,67108864);d!==null&&bs(d,c,67108864),DE(c,67108864)}}var q0=!0;function lW(c,d,m,y){var x=j.T;j.T=null;var A=U.p;try{U.p=2,OE(c,d,m,y)}finally{U.p=A,j.T=x}}function cW(c,d,m,y){var x=j.T;j.T=null;var A=U.p;try{U.p=8,OE(c,d,m,y)}finally{U.p=A,j.T=x}}function OE(c,d,m,y){if(q0){var x=PE(y);if(x===null)CE(c,d,y,G0,m),tP(c,y);else if(dW(x,c,d,m,y))y.stopPropagation();else if(tP(c,y),d&4&&-1<uW.indexOf(c)){for(;x!==null;){var A=co(x);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var G=jn(A.pendingLanes);if(G!==0){var Q=A;for(Q.pendingLanes|=2,Q.entangledLanes|=2;G;){var ce=1<<31-kn(G);Q.entanglements[1]|=ce,G&=~ce}vl(A),(Yn&6)===0&&(R0=At()+500,gg(0))}}break;case 13:Q=Na(A,2),Q!==null&&bs(Q,A,2),I0(),DE(A,2)}if(A=PE(y),A===null&&CE(c,d,y,G0,m),A===x)break;x=A}x!==null&&y.stopPropagation()}else CE(c,d,y,null,m)}}function PE(c){return c=_i(c),LE(c)}var G0=null;function LE(c){if(G0=null,c=ei(c),c!==null){var d=i(c);if(d===null)c=null;else{var m=d.tag;if(m===13){if(c=s(d),c!==null)return c;c=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null)}}return G0=c,null}function eP(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sn()){case Jt:return 2;case Vt:return 8;case Ut:case gn:return 32;case Wt:return 268435456;default:return 32}default:return 32}}var VE=!1,Pu=null,Lu=null,Vu=null,Eg=new Map,_g=new Map,ju=[],uW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tP(c,d){switch(c){case"focusin":case"focusout":Pu=null;break;case"dragenter":case"dragleave":Lu=null;break;case"mouseover":case"mouseout":Vu=null;break;case"pointerover":case"pointerout":Eg.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":_g.delete(d.pointerId)}}function kg(c,d,m,y,x,A){return c===null||c.nativeEvent!==A?(c={blockedOn:d,domEventName:m,eventSystemFlags:y,nativeEvent:A,targetContainers:[x]},d!==null&&(d=co(d),d!==null&&JO(d)),c):(c.eventSystemFlags|=y,d=c.targetContainers,x!==null&&d.indexOf(x)===-1&&d.push(x),c)}function dW(c,d,m,y,x){switch(d){case"focusin":return Pu=kg(Pu,c,d,m,y,x),!0;case"dragenter":return Lu=kg(Lu,c,d,m,y,x),!0;case"mouseover":return Vu=kg(Vu,c,d,m,y,x),!0;case"pointerover":var A=x.pointerId;return Eg.set(A,kg(Eg.get(A)||null,c,d,m,y,x)),!0;case"gotpointercapture":return A=x.pointerId,_g.set(A,kg(_g.get(A)||null,c,d,m,y,x)),!0}return!1}function nP(c){var d=ei(c.target);if(d!==null){var m=i(d);if(m!==null){if(d=m.tag,d===13){if(d=s(m),d!==null){c.blockedOn=d,Gn(c.priority,function(){if(m.tag===13){var y=vs();y=Hn(y);var x=Na(m,y);x!==null&&bs(x,m,y),DE(m,y)}});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function K0(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var m=PE(c.nativeEvent);if(m===null){m=c.nativeEvent;var y=new m.constructor(m.type,m);wo=y,m.target.dispatchEvent(y),wo=null}else return d=co(m),d!==null&&JO(d),c.blockedOn=m,!1;d.shift()}return!0}function rP(c,d,m){K0(c)&&m.delete(d)}function fW(){VE=!1,Pu!==null&&K0(Pu)&&(Pu=null),Lu!==null&&K0(Lu)&&(Lu=null),Vu!==null&&K0(Vu)&&(Vu=null),Eg.forEach(rP),_g.forEach(rP)}function W0(c,d){c.blockedOn===d&&(c.blockedOn=null,VE||(VE=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,fW)))}var Y0=null;function oP(c){Y0!==c&&(Y0=c,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Y0===c&&(Y0=null);for(var d=0;d<c.length;d+=3){var m=c[d],y=c[d+1],x=c[d+2];if(typeof y!="function"){if(LE(y||m)===null)continue;break}var A=co(m);A!==null&&(c.splice(d,3),d-=3,Lx(A,{pending:!0,data:x,method:m.method,action:y},y,x))}}))}function Tg(c){function d(ce){return W0(ce,c)}Pu!==null&&W0(Pu,c),Lu!==null&&W0(Lu,c),Vu!==null&&W0(Vu,c),Eg.forEach(d),_g.forEach(d);for(var m=0;m<ju.length;m++){var y=ju[m];y.blockedOn===c&&(y.blockedOn=null)}for(;0<ju.length&&(m=ju[0],m.blockedOn===null);)nP(m),m.blockedOn===null&&ju.shift();if(m=(c.ownerDocument||c).$$reactFormReplay,m!=null)for(y=0;y<m.length;y+=3){var x=m[y],A=m[y+1],G=x[mt]||null;if(typeof A=="function")G||oP(m);else if(G){var Q=null;if(A&&A.hasAttribute("formAction")){if(x=A,G=A[mt]||null)Q=G.formAction;else if(LE(x)!==null)continue}else Q=G.action;typeof Q=="function"?m[y+1]=Q:(m.splice(y,3),y-=3),oP(m)}}}function jE(c){this._internalRoot=c}X0.prototype.render=jE.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(r(409));var m=d.current,y=vs();QO(m,y,c,d,null,null)},X0.prototype.unmount=jE.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;QO(c.current,2,null,c,null,null),I0(),d[qt]=null}};function X0(c){this._internalRoot=c}X0.prototype.unstable_scheduleHydration=function(c){if(c){var d=Qn();c={blockedOn:null,target:c,priority:d};for(var m=0;m<ju.length&&d!==0&&d<ju[m].priority;m++);ju.splice(m,0,c),m===0&&nP(c)}};var iP=e.version;if(iP!=="19.1.0")throw Error(r(527,iP,"19.1.0"));U.findDOMNode=function(c){var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(d),c=c!==null?u(c):null,c=c===null?null:c.stateNode,c};var hW={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Q0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Q0.isDisabled&&Q0.supportsFiber)try{Ht=Q0.inject(hW),Ft=Q0}catch{}}return Rg.createRoot=function(c,d){if(!o(c))throw Error(r(299));var m=!1,y="",x=CD,A=SD,G=xD,Q=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(x=d.onUncaughtError),d.onCaughtError!==void 0&&(A=d.onCaughtError),d.onRecoverableError!==void 0&&(G=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(Q=d.unstable_transitionCallbacks)),d=YO(c,1,!1,null,null,m,y,x,A,G,Q,null),c[qt]=d.current,wE(c),new jE(d)},Rg.hydrateRoot=function(c,d,m){if(!o(c))throw Error(r(299));var y=!1,x="",A=CD,G=SD,Q=xD,ce=null,ke=null;return m!=null&&(m.unstable_strictMode===!0&&(y=!0),m.identifierPrefix!==void 0&&(x=m.identifierPrefix),m.onUncaughtError!==void 0&&(A=m.onUncaughtError),m.onCaughtError!==void 0&&(G=m.onCaughtError),m.onRecoverableError!==void 0&&(Q=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(ce=m.unstable_transitionCallbacks),m.formState!==void 0&&(ke=m.formState)),d=YO(c,1,!0,d,m??null,y,x,A,G,Q,ce,ke),d.context=XO(null),m=d.current,y=vs(),y=Hn(y),x=Cu(y),x.callback=null,Su(m,x,y),m=y,d.current.lanes=m,Cr(d,m),vl(d),c[qt]=d.current,wE(c),new X0(d)},Rg.version="19.1.0",Rg}var mP;function EW(){if(mP)return HE.exports;mP=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),HE.exports=xW(),HE.exports}var k6=EW();function gP(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Uc(...t){return e=>{let n=!1;const r=t.map(o=>{const i=gP(o,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():gP(t[o],null)}}}}function Mr(...t){return _.useCallback(Uc(...t),t)}function Gf(t){const e=_W(t),n=_.forwardRef((r,o)=>{const{children:i,...s}=r,a=_.Children.toArray(i),l=a.find(kW);if(l){const u=l.props.children,f=a.map(h=>h===l?_.Children.count(u)>1?_.Children.only(null):_.isValidElement(u)?u.props.children:null:h);return C.jsx(e,{...s,ref:o,children:_.isValidElement(u)?_.cloneElement(u,void 0,f):null})}return C.jsx(e,{...s,ref:o,children:i})});return n.displayName=`${t}.Slot`,n}var cA=Gf("Slot");function _W(t){const e=_.forwardRef((n,r)=>{const{children:o,...i}=n;if(_.isValidElement(o)){const s=AW(o),a=TW(i,o.props);return o.type!==_.Fragment&&(a.ref=r?Uc(r,s):s),_.cloneElement(o,a)}return _.Children.count(o)>1?_.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var T6=Symbol("radix.slottable");function A6(t){const e=({children:n})=>C.jsx(C.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=T6,e}function kW(t){return _.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===T6}function TW(t,e){const n={...e};for(const r in e){const o=t[r],i=e[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...t,...n}}function AW(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function R6(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=R6(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function el(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=R6(t))&&(r&&(r+=" "),r+=e);return r}const yP=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,vP=el,M6=(t,e)=>n=>{var r;if(e?.variants==null)return vP(t,n?.class,n?.className);const{variants:o,defaultVariants:i}=e,s=Object.keys(o).map(u=>{const f=n?.[u],h=i?.[u];if(f===null)return null;const p=yP(f)||yP(h);return o[u][p]}),a=n&&Object.entries(n).reduce((u,f)=>{let[h,p]=f;return p===void 0||(u[h]=p),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,f)=>{let{class:h,className:p,...g}=f;return Object.entries(g).every(v=>{let[b,E]=v;return Array.isArray(E)?E.includes({...i,...a}[b]):{...i,...a}[b]===E})?[...u,h,p]:u},[]);return vP(t,s,l,n?.class,n?.className)};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MW=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),bP=t=>{const e=MW(t);return e.charAt(0).toUpperCase()+e.slice(1)},I6=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),IW=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DW=_.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:s,...a},l)=>_.createElement("svg",{ref:l,...NW,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:I6("lucide",o),...!i&&!IW(a)&&{"aria-hidden":"true"},...a},[...s.map(([u,f])=>_.createElement(u,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=(t,e)=>{const n=_.forwardRef(({className:r,...o},i)=>_.createElement(DW,{ref:i,iconNode:e,className:I6(`lucide-${RW(bP(t))}`,`lucide-${t}`,r),...o}));return n.displayName=bP(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OW=[["path",{d:"M15 5H9",key:"1tp3ed"}],["path",{d:"M15 9v3h4l-7 7-7-7h4V9z",key:"ncdc4b"}]],PW=as("arrow-big-down-dash",OW);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LW=[["path",{d:"M6 9h6V5l7 7-7 7v-4H6V9z",key:"7fvt9c"}]],VW=as("arrow-big-right",LW);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jW=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],$k=as("check",jW);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BW=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Hk=as("chevrons-up-down",BW);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $W=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],HW=as("database",$W);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FW=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],zW=as("file-plus",FW);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],qW=as("grip-vertical",UW);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GW=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],KW=as("loader-circle",GW);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WW=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],YW=as("package-open",WW);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XW=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],QW=as("panel-left",XW);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZW=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Fk=as("search",ZW);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JW=[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]],eY=as("sticky-note",JW);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],nY=as("user-round",tY);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rY=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],N6=as("x",rY),qE=768;function oY(){const[t,e]=_.useState(void 0);return _.useEffect(()=>{const n=window.matchMedia(`(max-width: ${qE-1}px)`),r=()=>{e(window.innerWidth<qE)};return n.addEventListener("change",r),e(window.innerWidth<qE),()=>n.removeEventListener("change",r)},[]),!!t}const uA="-",iY=t=>{const e=aY(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const a=s.split(uA);return a[0]===""&&a.length!==1&&a.shift(),D6(a,e)||sY(s)},getConflictingClassGroupIds:(s,a)=>{const l=n[s]||[];return a&&r[s]?[...l,...r[s]]:l}}},D6=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),o=r?D6(t.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const i=t.join(uA);return e.validators.find(({validator:s})=>s(i))?.classGroupId},wP=/^\[(.+)\]$/,sY=t=>{if(wP.test(t)){const e=wP.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},aY=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const o in n)zk(n[o],r,o,e);return r},zk=(t,e,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const i=o===""?e:CP(e,o);i.classGroupId=n;return}if(typeof o=="function"){if(lY(o)){zk(o(r),e,n,r);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([i,s])=>{zk(s,CP(e,i),n,r)})})},CP=(t,e)=>{let n=t;return e.split(uA).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},lY=t=>t.isThemeGetter,cY=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const o=(i,s)=>{n.set(i,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return o(i,s),s},set(i,s){n.has(i)?n.set(i,s):o(i,s)}}},Uk="!",qk=":",uY=qk.length,dY=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=o=>{const i=[];let s=0,a=0,l=0,u;for(let v=0;v<o.length;v++){let b=o[v];if(s===0&&a===0){if(b===qk){i.push(o.slice(l,v)),l=v+uY;continue}if(b==="/"){u=v;continue}}b==="["?s++:b==="]"?s--:b==="("?a++:b===")"&&a--}const f=i.length===0?o:o.substring(l),h=fY(f),p=h!==f,g=u&&u>l?u-l:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:g}};if(e){const o=e+qk,i=r;r=s=>s.startsWith(o)?i(s.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const o=r;r=i=>n({className:i,parseClassName:o})}return r},fY=t=>t.endsWith(Uk)?t.substring(0,t.length-1):t.startsWith(Uk)?t.substring(1):t,hY=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let i=[];return r.forEach(s=>{s[0]==="["||e[s]?(o.push(...i.sort(),s),i=[]):i.push(s)}),o.push(...i.sort()),o}},pY=t=>({cache:cY(t.cacheSize),parseClassName:dY(t),sortModifiers:hY(t),...iY(t)}),mY=/\s+/,gY=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:i}=e,s=[],a=t.trim().split(mY);let l="";for(let u=a.length-1;u>=0;u-=1){const f=a[u],{isExternal:h,modifiers:p,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:b}=n(f);if(h){l=f+(l.length>0?" "+l:l);continue}let E=!!b,T=r(E?v.substring(0,b):v);if(!T){if(!E){l=f+(l.length>0?" "+l:l);continue}if(T=r(v),!T){l=f+(l.length>0?" "+l:l);continue}E=!1}const P=i(p).join(":"),D=g?P+Uk:P,z=D+T;if(s.includes(z))continue;s.push(z);const V=o(T,E);for(let $=0;$<V.length;++$){const O=V[$];s.push(D+O)}l=f+(l.length>0?" "+l:l)}return l};function yY(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=O6(e))&&(r&&(r+=" "),r+=n);return r}const O6=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=O6(t[r]))&&(n&&(n+=" "),n+=e);return n};function vY(t,...e){let n,r,o,i=s;function s(l){const u=e.reduce((f,h)=>h(f),t());return n=pY(u),r=n.cache.get,o=n.cache.set,i=a,a(l)}function a(l){const u=r(l);if(u)return u;const f=gY(l,n);return o(l,f),f}return function(){return i(yY.apply(null,arguments))}}const po=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},P6=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,L6=/^\((?:(\w[\w-]*):)?(.+)\)$/i,bY=/^\d+\/\d+$/,wY=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CY=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,SY=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,xY=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,EY=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,tp=t=>bY.test(t),on=t=>!!t&&!Number.isNaN(Number(t)),$u=t=>!!t&&Number.isInteger(Number(t)),GE=t=>t.endsWith("%")&&on(t.slice(0,-1)),Cc=t=>wY.test(t),_Y=()=>!0,kY=t=>CY.test(t)&&!SY.test(t),V6=()=>!1,TY=t=>xY.test(t),AY=t=>EY.test(t),RY=t=>!ct(t)&&!ut(t),MY=t=>hm(t,$6,V6),ct=t=>P6.test(t),Cf=t=>hm(t,H6,kY),KE=t=>hm(t,PY,on),SP=t=>hm(t,j6,V6),IY=t=>hm(t,B6,AY),Z0=t=>hm(t,F6,TY),ut=t=>L6.test(t),Mg=t=>pm(t,H6),NY=t=>pm(t,LY),xP=t=>pm(t,j6),DY=t=>pm(t,$6),OY=t=>pm(t,B6),J0=t=>pm(t,F6,!0),hm=(t,e,n)=>{const r=P6.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},pm=(t,e,n=!1)=>{const r=L6.exec(t);return r?r[1]?e(r[1]):n:!1},j6=t=>t==="position"||t==="percentage",B6=t=>t==="image"||t==="url",$6=t=>t==="length"||t==="size"||t==="bg-size",H6=t=>t==="length",PY=t=>t==="number",LY=t=>t==="family-name",F6=t=>t==="shadow",VY=()=>{const t=po("color"),e=po("font"),n=po("text"),r=po("font-weight"),o=po("tracking"),i=po("leading"),s=po("breakpoint"),a=po("container"),l=po("spacing"),u=po("radius"),f=po("shadow"),h=po("inset-shadow"),p=po("text-shadow"),g=po("drop-shadow"),v=po("blur"),b=po("perspective"),E=po("aspect"),T=po("ease"),P=po("animate"),D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],V=()=>[...z(),ut,ct],$=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],R=()=>[ut,ct,l],M=()=>[tp,"full","auto",...R()],B=()=>[$u,"none","subgrid",ut,ct],q=()=>["auto",{span:["full",$u,ut,ct]},$u,ut,ct],K=()=>[$u,"auto",ut,ct],F=()=>["auto","min","max","fr",ut,ct],ne=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],oe=()=>["start","end","center","stretch","center-safe","end-safe"],j=()=>["auto",...R()],U=()=>[tp,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],Z=()=>[t,ut,ct],J=()=>[...z(),xP,SP,{position:[ut,ct]}],Y=()=>["no-repeat",{repeat:["","x","y","space","round"]}],se=()=>["auto","cover","contain",DY,MY,{size:[ut,ct]}],te=()=>[GE,Mg,Cf],ie=()=>["","none","full",u,ut,ct],ue=()=>["",on,Mg,Cf],ae=()=>["solid","dashed","dotted","double"],ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],De=()=>[on,GE,xP,SP],Ue=()=>["","none",v,ut,ct],Oe=()=>["none",on,ut,ct],rt=()=>["none",on,ut,ct],wt=()=>[on,ut,ct],tt=()=>[tp,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Cc],breakpoint:[Cc],color:[_Y],container:[Cc],"drop-shadow":[Cc],ease:["in","out","in-out"],font:[RY],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Cc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Cc],shadow:[Cc],spacing:["px",on],text:[Cc],"text-shadow":[Cc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",tp,ct,ut,E]}],container:["container"],columns:[{columns:[on,ct,ut,a]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:V()}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[$u,"auto",ut,ct]}],basis:[{basis:[tp,"full","auto",a,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[on,tp,"auto","initial","none",ct]}],grow:[{grow:["",on,ut,ct]}],shrink:[{shrink:["",on,ut,ct]}],order:[{order:[$u,"first","last","none",ut,ct]}],"grid-cols":[{"grid-cols":B()}],"col-start-end":[{col:q()}],"col-start":[{"col-start":K()}],"col-end":[{"col-end":K()}],"grid-rows":[{"grid-rows":B()}],"row-start-end":[{row:q()}],"row-start":[{"row-start":K()}],"row-end":[{"row-end":K()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":F()}],"auto-rows":[{"auto-rows":F()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...ne(),"normal"]}],"justify-items":[{"justify-items":[...oe(),"normal"]}],"justify-self":[{"justify-self":["auto",...oe()]}],"align-content":[{content:["normal",...ne()]}],"align-items":[{items:[...oe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...oe(),{baseline:["","last"]}]}],"place-content":[{"place-content":ne()}],"place-items":[{"place-items":[...oe(),"baseline"]}],"place-self":[{"place-self":["auto",...oe()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:j()}],mx:[{mx:j()}],my:[{my:j()}],ms:[{ms:j()}],me:[{me:j()}],mt:[{mt:j()}],mr:[{mr:j()}],mb:[{mb:j()}],ml:[{ml:j()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:U()}],w:[{w:[a,"screen",...U()]}],"min-w":[{"min-w":[a,"screen","none",...U()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...U()]}],h:[{h:["screen","lh",...U()]}],"min-h":[{"min-h":["screen","lh","none",...U()]}],"max-h":[{"max-h":["screen","lh",...U()]}],"font-size":[{text:["base",n,Mg,Cf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ut,KE]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",GE,ct]}],"font-family":[{font:[NY,ct,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,ut,ct]}],"line-clamp":[{"line-clamp":[on,"none",ut,KE]}],leading:[{leading:[i,...R()]}],"list-image":[{"list-image":["none",ut,ct]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ut,ct]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Z()}],"text-color":[{text:Z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:[on,"from-font","auto",ut,Cf]}],"text-decoration-color":[{decoration:Z()}],"underline-offset":[{"underline-offset":[on,"auto",ut,ct]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ut,ct]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ut,ct]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:Y()}],"bg-size":[{bg:se()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},$u,ut,ct],radial:["",ut,ct],conic:[$u,ut,ct]},OY,IY]}],"bg-color":[{bg:Z()}],"gradient-from-pos":[{from:te()}],"gradient-via-pos":[{via:te()}],"gradient-to-pos":[{to:te()}],"gradient-from":[{from:Z()}],"gradient-via":[{via:Z()}],"gradient-to":[{to:Z()}],rounded:[{rounded:ie()}],"rounded-s":[{"rounded-s":ie()}],"rounded-e":[{"rounded-e":ie()}],"rounded-t":[{"rounded-t":ie()}],"rounded-r":[{"rounded-r":ie()}],"rounded-b":[{"rounded-b":ie()}],"rounded-l":[{"rounded-l":ie()}],"rounded-ss":[{"rounded-ss":ie()}],"rounded-se":[{"rounded-se":ie()}],"rounded-ee":[{"rounded-ee":ie()}],"rounded-es":[{"rounded-es":ie()}],"rounded-tl":[{"rounded-tl":ie()}],"rounded-tr":[{"rounded-tr":ie()}],"rounded-br":[{"rounded-br":ie()}],"rounded-bl":[{"rounded-bl":ie()}],"border-w":[{border:ue()}],"border-w-x":[{"border-x":ue()}],"border-w-y":[{"border-y":ue()}],"border-w-s":[{"border-s":ue()}],"border-w-e":[{"border-e":ue()}],"border-w-t":[{"border-t":ue()}],"border-w-r":[{"border-r":ue()}],"border-w-b":[{"border-b":ue()}],"border-w-l":[{"border-l":ue()}],"divide-x":[{"divide-x":ue()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ue()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ae(),"hidden","none"]}],"divide-style":[{divide:[...ae(),"hidden","none"]}],"border-color":[{border:Z()}],"border-color-x":[{"border-x":Z()}],"border-color-y":[{"border-y":Z()}],"border-color-s":[{"border-s":Z()}],"border-color-e":[{"border-e":Z()}],"border-color-t":[{"border-t":Z()}],"border-color-r":[{"border-r":Z()}],"border-color-b":[{"border-b":Z()}],"border-color-l":[{"border-l":Z()}],"divide-color":[{divide:Z()}],"outline-style":[{outline:[...ae(),"none","hidden"]}],"outline-offset":[{"outline-offset":[on,ut,ct]}],"outline-w":[{outline:["",on,Mg,Cf]}],"outline-color":[{outline:Z()}],shadow:[{shadow:["","none",f,J0,Z0]}],"shadow-color":[{shadow:Z()}],"inset-shadow":[{"inset-shadow":["none",h,J0,Z0]}],"inset-shadow-color":[{"inset-shadow":Z()}],"ring-w":[{ring:ue()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Z()}],"ring-offset-w":[{"ring-offset":[on,Cf]}],"ring-offset-color":[{"ring-offset":Z()}],"inset-ring-w":[{"inset-ring":ue()}],"inset-ring-color":[{"inset-ring":Z()}],"text-shadow":[{"text-shadow":["none",p,J0,Z0]}],"text-shadow-color":[{"text-shadow":Z()}],opacity:[{opacity:[on,ut,ct]}],"mix-blend":[{"mix-blend":[...ve(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ve()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[on]}],"mask-image-linear-from-pos":[{"mask-linear-from":De()}],"mask-image-linear-to-pos":[{"mask-linear-to":De()}],"mask-image-linear-from-color":[{"mask-linear-from":Z()}],"mask-image-linear-to-color":[{"mask-linear-to":Z()}],"mask-image-t-from-pos":[{"mask-t-from":De()}],"mask-image-t-to-pos":[{"mask-t-to":De()}],"mask-image-t-from-color":[{"mask-t-from":Z()}],"mask-image-t-to-color":[{"mask-t-to":Z()}],"mask-image-r-from-pos":[{"mask-r-from":De()}],"mask-image-r-to-pos":[{"mask-r-to":De()}],"mask-image-r-from-color":[{"mask-r-from":Z()}],"mask-image-r-to-color":[{"mask-r-to":Z()}],"mask-image-b-from-pos":[{"mask-b-from":De()}],"mask-image-b-to-pos":[{"mask-b-to":De()}],"mask-image-b-from-color":[{"mask-b-from":Z()}],"mask-image-b-to-color":[{"mask-b-to":Z()}],"mask-image-l-from-pos":[{"mask-l-from":De()}],"mask-image-l-to-pos":[{"mask-l-to":De()}],"mask-image-l-from-color":[{"mask-l-from":Z()}],"mask-image-l-to-color":[{"mask-l-to":Z()}],"mask-image-x-from-pos":[{"mask-x-from":De()}],"mask-image-x-to-pos":[{"mask-x-to":De()}],"mask-image-x-from-color":[{"mask-x-from":Z()}],"mask-image-x-to-color":[{"mask-x-to":Z()}],"mask-image-y-from-pos":[{"mask-y-from":De()}],"mask-image-y-to-pos":[{"mask-y-to":De()}],"mask-image-y-from-color":[{"mask-y-from":Z()}],"mask-image-y-to-color":[{"mask-y-to":Z()}],"mask-image-radial":[{"mask-radial":[ut,ct]}],"mask-image-radial-from-pos":[{"mask-radial-from":De()}],"mask-image-radial-to-pos":[{"mask-radial-to":De()}],"mask-image-radial-from-color":[{"mask-radial-from":Z()}],"mask-image-radial-to-color":[{"mask-radial-to":Z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":z()}],"mask-image-conic-pos":[{"mask-conic":[on]}],"mask-image-conic-from-pos":[{"mask-conic-from":De()}],"mask-image-conic-to-pos":[{"mask-conic-to":De()}],"mask-image-conic-from-color":[{"mask-conic-from":Z()}],"mask-image-conic-to-color":[{"mask-conic-to":Z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:Y()}],"mask-size":[{mask:se()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ut,ct]}],filter:[{filter:["","none",ut,ct]}],blur:[{blur:Ue()}],brightness:[{brightness:[on,ut,ct]}],contrast:[{contrast:[on,ut,ct]}],"drop-shadow":[{"drop-shadow":["","none",g,J0,Z0]}],"drop-shadow-color":[{"drop-shadow":Z()}],grayscale:[{grayscale:["",on,ut,ct]}],"hue-rotate":[{"hue-rotate":[on,ut,ct]}],invert:[{invert:["",on,ut,ct]}],saturate:[{saturate:[on,ut,ct]}],sepia:[{sepia:["",on,ut,ct]}],"backdrop-filter":[{"backdrop-filter":["","none",ut,ct]}],"backdrop-blur":[{"backdrop-blur":Ue()}],"backdrop-brightness":[{"backdrop-brightness":[on,ut,ct]}],"backdrop-contrast":[{"backdrop-contrast":[on,ut,ct]}],"backdrop-grayscale":[{"backdrop-grayscale":["",on,ut,ct]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[on,ut,ct]}],"backdrop-invert":[{"backdrop-invert":["",on,ut,ct]}],"backdrop-opacity":[{"backdrop-opacity":[on,ut,ct]}],"backdrop-saturate":[{"backdrop-saturate":[on,ut,ct]}],"backdrop-sepia":[{"backdrop-sepia":["",on,ut,ct]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ut,ct]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[on,"initial",ut,ct]}],ease:[{ease:["linear","initial",T,ut,ct]}],delay:[{delay:[on,ut,ct]}],animate:[{animate:["none",P,ut,ct]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,ut,ct]}],"perspective-origin":[{"perspective-origin":V()}],rotate:[{rotate:Oe()}],"rotate-x":[{"rotate-x":Oe()}],"rotate-y":[{"rotate-y":Oe()}],"rotate-z":[{"rotate-z":Oe()}],scale:[{scale:rt()}],"scale-x":[{"scale-x":rt()}],"scale-y":[{"scale-y":rt()}],"scale-z":[{"scale-z":rt()}],"scale-3d":["scale-3d"],skew:[{skew:wt()}],"skew-x":[{"skew-x":wt()}],"skew-y":[{"skew-y":wt()}],transform:[{transform:[ut,ct,"","none","gpu","cpu"]}],"transform-origin":[{origin:V()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:tt()}],"translate-x":[{"translate-x":tt()}],"translate-y":[{"translate-y":tt()}],"translate-z":[{"translate-z":tt()}],"translate-none":["translate-none"],accent:[{accent:Z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ut,ct]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ut,ct]}],fill:[{fill:["none",...Z()]}],"stroke-w":[{stroke:[on,Mg,Cf,KE]}],stroke:[{stroke:["none",...Z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},jY=vY(VY);function Mt(...t){return jY(el(t))}const dA=M6("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Kf({className:t,variant:e,size:n,asChild:r=!1,...o}){const i=r?cA:"button";return C.jsx(i,{"data-slot":"button",className:Mt(dA({variant:e,size:n,className:t})),...o})}var ha=_6();const gC=sA(ha);var BY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Pn=BY.reduce((t,e)=>{const n=Gf(`Primitive.${e}`),r=_.forwardRef((o,i)=>{const{asChild:s,...a}=o,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function z6(t,e){t&&ha.flushSync(()=>t.dispatchEvent(e))}function kt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return e?.(o)}}function $Y(t,e){const n=_.createContext(e),r=i=>{const{children:s,...a}=i,l=_.useMemo(()=>a,Object.values(a));return C.jsx(n.Provider,{value:l,children:s})};r.displayName=t+"Provider";function o(i){const s=_.useContext(n);if(s)return s;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,o]}function Jc(t,e=[]){let n=[];function r(i,s){const a=_.createContext(s),l=n.length;n=[...n,s];const u=h=>{const{scope:p,children:g,...v}=h,b=p?.[t]?.[l]||a,E=_.useMemo(()=>v,Object.values(v));return C.jsx(b.Provider,{value:E,children:g})};u.displayName=i+"Provider";function f(h,p){const g=p?.[t]?.[l]||a,v=_.useContext(g);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,f]}const o=()=>{const i=n.map(s=>_.createContext(s));return function(a){const l=a?.[t]||i;return _.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,HY(o,...e)]}function HY(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const s=r.reduce((a,{useScope:l,scopeName:u})=>{const h=l(i)[`__scope${u}`];return{...a,...h}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}var vd=globalThis?.document?_.useLayoutEffect:()=>{},FY=lA[" useId ".trim().toString()]||(()=>{}),zY=0;function ts(t){const[e,n]=_.useState(FY());return vd(()=>{n(r=>r??String(zY++))},[t]),t||(e?`radix-${e}`:"")}var UY=lA[" useInsertionEffect ".trim().toString()]||vd;function iv({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[o,i,s]=qY({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:o;{const f=_.useRef(t!==void 0);_.useEffect(()=>{const h=f.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=a},[a,r])}const u=_.useCallback(f=>{if(a){const h=GY(f)?f(t):f;h!==t&&s.current?.(h)}else i(f)},[a,t,i,s]);return[l,u]}function qY({defaultProp:t,onChange:e}){const[n,r]=_.useState(t),o=_.useRef(n),i=_.useRef(e);return UY(()=>{i.current=e},[e]),_.useEffect(()=>{o.current!==n&&(i.current?.(n),o.current=n)},[n,o]),[n,r,i]}function GY(t){return typeof t=="function"}function qc(t){const e=_.useRef(t);return _.useEffect(()=>{e.current=t}),_.useMemo(()=>(...n)=>e.current?.(...n),[])}function KY(t,e=globalThis?.document){const n=qc(t);_.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var WY="DismissableLayer",Gk="dismissableLayer.update",YY="dismissableLayer.pointerDownOutside",XY="dismissableLayer.focusOutside",EP,U6=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),sv=_.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:s,onDismiss:a,...l}=t,u=_.useContext(U6),[f,h]=_.useState(null),p=f?.ownerDocument??globalThis?.document,[,g]=_.useState({}),v=Mr(e,O=>h(O)),b=Array.from(u.layers),[E]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),T=b.indexOf(E),P=f?b.indexOf(f):-1,D=u.layersWithOutsidePointerEventsDisabled.size>0,z=P>=T,V=JY(O=>{const R=O.target,M=[...u.branches].some(B=>B.contains(R));!z||M||(o?.(O),s?.(O),O.defaultPrevented||a?.())},p),$=eX(O=>{const R=O.target;[...u.branches].some(B=>B.contains(R))||(i?.(O),s?.(O),O.defaultPrevented||a?.())},p);return KY(O=>{P===u.layers.size-1&&(r?.(O),!O.defaultPrevented&&a&&(O.preventDefault(),a()))},p),_.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(EP=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),_P(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=EP)}},[f,p,n,u]),_.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),_P())},[f,u]),_.useEffect(()=>{const O=()=>g({});return document.addEventListener(Gk,O),()=>document.removeEventListener(Gk,O)},[]),C.jsx(Pn.div,{...l,ref:v,style:{pointerEvents:D?z?"auto":"none":void 0,...t.style},onFocusCapture:kt(t.onFocusCapture,$.onFocusCapture),onBlurCapture:kt(t.onBlurCapture,$.onBlurCapture),onPointerDownCapture:kt(t.onPointerDownCapture,V.onPointerDownCapture)})});sv.displayName=WY;var QY="DismissableLayerBranch",ZY=_.forwardRef((t,e)=>{const n=_.useContext(U6),r=_.useRef(null),o=Mr(e,r);return _.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),C.jsx(Pn.div,{...t,ref:o})});ZY.displayName=QY;function JY(t,e=globalThis?.document){const n=qc(t),r=_.useRef(!1),o=_.useRef(()=>{});return _.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){q6(YY,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",i),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function eX(t,e=globalThis?.document){const n=qc(t),r=_.useRef(!1);return _.useEffect(()=>{const o=i=>{i.target&&!r.current&&q6(XY,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function _P(){const t=new CustomEvent(Gk);document.dispatchEvent(t)}function q6(t,e,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?z6(o,i):o.dispatchEvent(i)}var WE="focusScope.autoFocusOnMount",YE="focusScope.autoFocusOnUnmount",kP={bubbles:!1,cancelable:!0},tX="FocusScope",yC=_.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=t,[a,l]=_.useState(null),u=qc(o),f=qc(i),h=_.useRef(null),p=Mr(e,b=>l(b)),g=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(r){let b=function(D){if(g.paused||!a)return;const z=D.target;a.contains(z)?h.current=z:Uu(h.current,{select:!0})},E=function(D){if(g.paused||!a)return;const z=D.relatedTarget;z!==null&&(a.contains(z)||Uu(h.current,{select:!0}))},T=function(D){if(document.activeElement===document.body)for(const V of D)V.removedNodes.length>0&&Uu(a)};document.addEventListener("focusin",b),document.addEventListener("focusout",E);const P=new MutationObserver(T);return a&&P.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",E),P.disconnect()}}},[r,a,g.paused]),_.useEffect(()=>{if(a){AP.add(g);const b=document.activeElement;if(!a.contains(b)){const T=new CustomEvent(WE,kP);a.addEventListener(WE,u),a.dispatchEvent(T),T.defaultPrevented||(nX(aX(G6(a)),{select:!0}),document.activeElement===b&&Uu(a))}return()=>{a.removeEventListener(WE,u),setTimeout(()=>{const T=new CustomEvent(YE,kP);a.addEventListener(YE,f),a.dispatchEvent(T),T.defaultPrevented||Uu(b??document.body,{select:!0}),a.removeEventListener(YE,f),AP.remove(g)},0)}}},[a,u,f,g]);const v=_.useCallback(b=>{if(!n&&!r||g.paused)return;const E=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,T=document.activeElement;if(E&&T){const P=b.currentTarget,[D,z]=rX(P);D&&z?!b.shiftKey&&T===z?(b.preventDefault(),n&&Uu(D,{select:!0})):b.shiftKey&&T===D&&(b.preventDefault(),n&&Uu(z,{select:!0})):T===P&&b.preventDefault()}},[n,r,g.paused]);return C.jsx(Pn.div,{tabIndex:-1,...s,ref:p,onKeyDown:v})});yC.displayName=tX;function nX(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Uu(r,{select:e}),document.activeElement!==n)return}function rX(t){const e=G6(t),n=TP(e,t),r=TP(e.reverse(),t);return[n,r]}function G6(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function TP(t,e){for(const n of t)if(!oX(n,{upTo:e}))return n}function oX(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function iX(t){return t instanceof HTMLInputElement&&"select"in t}function Uu(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&iX(t)&&e&&t.select()}}var AP=sX();function sX(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=RP(t,e),t.unshift(e)},remove(e){t=RP(t,e),t[0]?.resume()}}}function RP(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function aX(t){return t.filter(e=>e.tagName!=="A")}var lX="Portal",av=_.forwardRef((t,e)=>{const{container:n,...r}=t,[o,i]=_.useState(!1);vd(()=>i(!0),[]);const s=n||o&&globalThis?.document?.body;return s?gC.createPortal(C.jsx(Pn.div,{...r,ref:e}),s):null});av.displayName=lX;function cX(t,e){return _.useReducer((n,r)=>e[n][r]??n,t)}var ya=t=>{const{present:e,children:n}=t,r=uX(e),o=typeof n=="function"?n({present:r.isPresent}):_.Children.only(n),i=Mr(r.ref,dX(o));return typeof n=="function"||r.isPresent?_.cloneElement(o,{ref:i}):null};ya.displayName="Presence";function uX(t){const[e,n]=_.useState(),r=_.useRef(null),o=_.useRef(t),i=_.useRef("none"),s=t?"mounted":"unmounted",[a,l]=cX(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const u=eb(r.current);i.current=a==="mounted"?u:"none"},[a]),vd(()=>{const u=r.current,f=o.current;if(f!==t){const p=i.current,g=eb(u);t?l("MOUNT"):g==="none"||u?.display==="none"?l("UNMOUNT"):l(f&&p!==g?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),vd(()=>{if(e){let u;const f=e.ownerDocument.defaultView??window,h=g=>{const b=eb(r.current).includes(g.animationName);if(g.target===e&&b&&(l("ANIMATION_END"),!o.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",u=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},p=g=>{g.target===e&&(i.current=eb(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{f.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:_.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function eb(t){return t?.animationName||"none"}function dX(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var XE=0;function fA(){_.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??MP()),document.body.insertAdjacentElement("beforeend",t[1]??MP()),XE++,()=>{XE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),XE--}},[])}function MP(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var kl=function(){return kl=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kl.apply(this,arguments)};function K6(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function fX(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Fb="right-scroll-bar-position",zb="width-before-scroll-bar",hX="with-scroll-bars-hidden",pX="--removed-body-scroll-bar-size";function QE(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function mX(t,e){var n=_.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=e,n.facade}var gX=typeof window<"u"?_.useLayoutEffect:_.useEffect,IP=new WeakMap;function yX(t,e){var n=mX(null,function(r){return t.forEach(function(o){return QE(o,r)})});return gX(function(){var r=IP.get(n);if(r){var o=new Set(r),i=new Set(t),s=n.current;o.forEach(function(a){i.has(a)||QE(a,null)}),i.forEach(function(a){o.has(a)||QE(a,s)})}IP.set(n,t)},[t]),n}function vX(t){return t}function bX(t,e){e===void 0&&(e=vX);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var s=e(i,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(i),s=n}var l=function(){var f=s;s=[],f.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(f){s.push(f),u()},filter:function(f){return s=s.filter(f),n}}}};return o}function wX(t){t===void 0&&(t={});var e=bX(null);return e.options=kl({async:!0,ssr:!1},t),e}var W6=function(t){var e=t.sideCar,n=K6(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return _.createElement(r,kl({},n))};W6.isSideCarExport=!0;function CX(t,e){return t.useMedium(e),W6}var Y6=wX(),ZE=function(){},vC=_.forwardRef(function(t,e){var n=_.useRef(null),r=_.useState({onScrollCapture:ZE,onWheelCapture:ZE,onTouchMoveCapture:ZE}),o=r[0],i=r[1],s=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,f=t.enabled,h=t.shards,p=t.sideCar,g=t.noRelative,v=t.noIsolation,b=t.inert,E=t.allowPinchZoom,T=t.as,P=T===void 0?"div":T,D=t.gapMode,z=K6(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),V=p,$=yX([n,e]),O=kl(kl({},z),o);return _.createElement(_.Fragment,null,f&&_.createElement(V,{sideCar:Y6,removeScrollBar:u,shards:h,noRelative:g,noIsolation:v,inert:b,setCallbacks:i,allowPinchZoom:!!E,lockRef:n,gapMode:D}),s?_.cloneElement(_.Children.only(a),kl(kl({},O),{ref:$})):_.createElement(P,kl({},O,{className:l,ref:$}),a))});vC.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vC.classNames={fullWidth:zb,zeroRight:Fb};var SX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=SX();return e&&t.setAttribute("nonce",e),t}function EX(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function _X(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var kX=function(){var t=0,e=null;return{add:function(n){t==0&&(e=xX())&&(EX(e,n),_X(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},TX=function(){var t=kX();return function(e,n){_.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},X6=function(){var t=TX(),e=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return e},AX={left:0,top:0,right:0,gap:0},JE=function(t){return parseInt(t||"",10)||0},RX=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[JE(n),JE(r),JE(o)]},MX=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return AX;var e=RX(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},IX=X6(),_p="data-scroll-locked",NX=function(t,e,n,r){var o=t.left,i=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(hX,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(_p,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Fb,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(zb,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Fb," .").concat(Fb,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(zb," .").concat(zb,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(_p,`] {
    `).concat(pX,": ").concat(a,`px;
  }
`)},NP=function(){var t=parseInt(document.body.getAttribute(_p)||"0",10);return isFinite(t)?t:0},DX=function(){_.useEffect(function(){return document.body.setAttribute(_p,(NP()+1).toString()),function(){var t=NP()-1;t<=0?document.body.removeAttribute(_p):document.body.setAttribute(_p,t.toString())}},[])},OX=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;DX();var i=_.useMemo(function(){return MX(o)},[o]);return _.createElement(IX,{styles:NX(i,!e,o,n?"":"!important")})},Kk=!1;if(typeof window<"u")try{var tb=Object.defineProperty({},"passive",{get:function(){return Kk=!0,!0}});window.addEventListener("test",tb,tb),window.removeEventListener("test",tb,tb)}catch{Kk=!1}var np=Kk?{passive:!1}:!1,PX=function(t){return t.tagName==="TEXTAREA"},Q6=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!PX(t)&&n[e]==="visible")},LX=function(t){return Q6(t,"overflowY")},VX=function(t){return Q6(t,"overflowX")},DP=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=Z6(t,r);if(o){var i=J6(t,r),s=i[1],a=i[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},jX=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},BX=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Z6=function(t,e){return t==="v"?LX(e):VX(e)},J6=function(t,e){return t==="v"?jX(e):BX(e)},$X=function(t,e){return t==="h"&&e==="rtl"?-1:1},HX=function(t,e,n,r,o){var i=$X(t,window.getComputedStyle(e).direction),s=i*r,a=n.target,l=e.contains(a),u=!1,f=s>0,h=0,p=0;do{if(!a)break;var g=J6(t,a),v=g[0],b=g[1],E=g[2],T=b-E-i*v;(v||T)&&Z6(t,a)&&(h+=T,p+=v);var P=a.parentNode;a=P&&P.nodeType===Node.DOCUMENT_FRAGMENT_NODE?P.host:P}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(f&&Math.abs(h)<1||!f&&Math.abs(p)<1)&&(u=!0),u},nb=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},OP=function(t){return[t.deltaX,t.deltaY]},PP=function(t){return t&&"current"in t?t.current:t},FX=function(t,e){return t[0]===e[0]&&t[1]===e[1]},zX=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},UX=0,rp=[];function qX(t){var e=_.useRef([]),n=_.useRef([0,0]),r=_.useRef(),o=_.useState(UX++)[0],i=_.useState(X6)[0],s=_.useRef(t);_.useEffect(function(){s.current=t},[t]),_.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var b=fX([t.lockRef.current],(t.shards||[]).map(PP),!0).filter(Boolean);return b.forEach(function(E){return E.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),b.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=_.useCallback(function(b,E){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!s.current.allowPinchZoom;var T=nb(b),P=n.current,D="deltaX"in b?b.deltaX:P[0]-T[0],z="deltaY"in b?b.deltaY:P[1]-T[1],V,$=b.target,O=Math.abs(D)>Math.abs(z)?"h":"v";if("touches"in b&&O==="h"&&$.type==="range")return!1;var R=DP(O,$);if(!R)return!0;if(R?V=O:(V=O==="v"?"h":"v",R=DP(O,$)),!R)return!1;if(!r.current&&"changedTouches"in b&&(D||z)&&(r.current=V),!V)return!0;var M=r.current||V;return HX(M,E,b,M==="h"?D:z)},[]),l=_.useCallback(function(b){var E=b;if(!(!rp.length||rp[rp.length-1]!==i)){var T="deltaY"in E?OP(E):nb(E),P=e.current.filter(function(V){return V.name===E.type&&(V.target===E.target||E.target===V.shadowParent)&&FX(V.delta,T)})[0];if(P&&P.should){E.cancelable&&E.preventDefault();return}if(!P){var D=(s.current.shards||[]).map(PP).filter(Boolean).filter(function(V){return V.contains(E.target)}),z=D.length>0?a(E,D[0]):!s.current.noIsolation;z&&E.cancelable&&E.preventDefault()}}},[]),u=_.useCallback(function(b,E,T,P){var D={name:b,delta:E,target:T,should:P,shadowParent:GX(T)};e.current.push(D),setTimeout(function(){e.current=e.current.filter(function(z){return z!==D})},1)},[]),f=_.useCallback(function(b){n.current=nb(b),r.current=void 0},[]),h=_.useCallback(function(b){u(b.type,OP(b),b.target,a(b,t.lockRef.current))},[]),p=_.useCallback(function(b){u(b.type,nb(b),b.target,a(b,t.lockRef.current))},[]);_.useEffect(function(){return rp.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",l,np),document.addEventListener("touchmove",l,np),document.addEventListener("touchstart",f,np),function(){rp=rp.filter(function(b){return b!==i}),document.removeEventListener("wheel",l,np),document.removeEventListener("touchmove",l,np),document.removeEventListener("touchstart",f,np)}},[]);var g=t.removeScrollBar,v=t.inert;return _.createElement(_.Fragment,null,v?_.createElement(i,{styles:zX(o)}):null,g?_.createElement(OX,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function GX(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const KX=CX(Y6,qX);var bC=_.forwardRef(function(t,e){return _.createElement(vC,kl({},t,{ref:e,sideCar:KX}))});bC.classNames=vC.classNames;var WX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},op=new WeakMap,rb=new WeakMap,ob={},e_=0,e9=function(t){return t&&(t.host||e9(t.parentNode))},YX=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=e9(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},XX=function(t,e,n,r){var o=YX(e,Array.isArray(t)?t:[t]);ob[n]||(ob[n]=new WeakMap);var i=ob[n],s=[],a=new Set,l=new Set(o),u=function(h){!h||a.has(h)||(a.add(h),u(h.parentNode))};o.forEach(u);var f=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(p){if(a.has(p))f(p);else try{var g=p.getAttribute(r),v=g!==null&&g!=="false",b=(op.get(p)||0)+1,E=(i.get(p)||0)+1;op.set(p,b),i.set(p,E),s.push(p),b===1&&v&&rb.set(p,!0),E===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(T){console.error("aria-hidden: cannot operate on ",p,T)}})};return f(e),a.clear(),e_++,function(){s.forEach(function(h){var p=op.get(h)-1,g=i.get(h)-1;op.set(h,p),i.set(h,g),p||(rb.has(h)||h.removeAttribute(r),rb.delete(h)),g||h.removeAttribute(n)}),e_--,e_||(op=new WeakMap,op=new WeakMap,rb=new WeakMap,ob={})}},hA=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=WX(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),XX(r,o,n,"aria-hidden")):function(){return null}},wC="Dialog",[t9,n9]=Jc(wC),[QX,tl]=t9(wC),r9=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:s=!0}=t,a=_.useRef(null),l=_.useRef(null),[u,f]=iv({prop:r,defaultProp:o??!1,onChange:i,caller:wC});return C.jsx(QX,{scope:e,triggerRef:a,contentRef:l,contentId:ts(),titleId:ts(),descriptionId:ts(),open:u,onOpenChange:f,onOpenToggle:_.useCallback(()=>f(h=>!h),[f]),modal:s,children:n})};r9.displayName=wC;var o9="DialogTrigger",i9=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=tl(o9,n),i=Mr(e,o.triggerRef);return C.jsx(Pn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":yA(o.open),...r,ref:i,onClick:kt(t.onClick,o.onOpenToggle)})});i9.displayName=o9;var pA="DialogPortal",[ZX,s9]=t9(pA,{forceMount:void 0}),a9=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:o}=t,i=tl(pA,e);return C.jsx(ZX,{scope:e,forceMount:n,children:_.Children.map(r,s=>C.jsx(ya,{present:n||i.open,children:C.jsx(av,{asChild:!0,container:o,children:s})}))})};a9.displayName=pA;var b1="DialogOverlay",l9=_.forwardRef((t,e)=>{const n=s9(b1,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,i=tl(b1,t.__scopeDialog);return i.modal?C.jsx(ya,{present:r||i.open,children:C.jsx(eQ,{...o,ref:e})}):null});l9.displayName=b1;var JX=Gf("DialogOverlay.RemoveScroll"),eQ=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=tl(b1,n);return C.jsx(bC,{as:JX,allowPinchZoom:!0,shards:[o.contentRef],children:C.jsx(Pn.div,{"data-state":yA(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Wf="DialogContent",c9=_.forwardRef((t,e)=>{const n=s9(Wf,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,i=tl(Wf,t.__scopeDialog);return C.jsx(ya,{present:r||i.open,children:i.modal?C.jsx(tQ,{...o,ref:e}):C.jsx(nQ,{...o,ref:e})})});c9.displayName=Wf;var tQ=_.forwardRef((t,e)=>{const n=tl(Wf,t.__scopeDialog),r=_.useRef(null),o=Mr(e,n.contentRef,r);return _.useEffect(()=>{const i=r.current;if(i)return hA(i)},[]),C.jsx(u9,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:kt(t.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:kt(t.onPointerDownOutside,i=>{const s=i.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&i.preventDefault()}),onFocusOutside:kt(t.onFocusOutside,i=>i.preventDefault())})}),nQ=_.forwardRef((t,e)=>{const n=tl(Wf,t.__scopeDialog),r=_.useRef(!1),o=_.useRef(!1);return C.jsx(u9,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const s=i.target;n.triggerRef.current?.contains(s)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),u9=_.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,...s}=t,a=tl(Wf,n),l=_.useRef(null),u=Mr(e,l);return fA(),C.jsxs(C.Fragment,{children:[C.jsx(yC,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:C.jsx(sv,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":yA(a.open),...s,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),C.jsxs(C.Fragment,{children:[C.jsx(oQ,{titleId:a.titleId}),C.jsx(sQ,{contentRef:l,descriptionId:a.descriptionId})]})]})}),mA="DialogTitle",gA=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=tl(mA,n);return C.jsx(Pn.h2,{id:o.titleId,...r,ref:e})});gA.displayName=mA;var d9="DialogDescription",f9=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=tl(d9,n);return C.jsx(Pn.p,{id:o.descriptionId,...r,ref:e})});f9.displayName=d9;var h9="DialogClose",p9=_.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=tl(h9,n);return C.jsx(Pn.button,{type:"button",...r,ref:e,onClick:kt(t.onClick,()=>o.onOpenChange(!1))})});p9.displayName=h9;function yA(t){return t?"open":"closed"}var m9="DialogTitleWarning",[rQ,g9]=$Y(m9,{contentName:Wf,titleName:mA,docsSlug:"dialog"}),oQ=({titleId:t})=>{const e=g9(m9),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return _.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},iQ="DialogDescriptionWarning",sQ=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${g9(iQ).contentName}}.`;return _.useEffect(()=>{const o=t.current?.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},CC=r9,aQ=i9,SC=a9,xC=l9,EC=c9,vA=gA,bA=f9,mm=p9;function y9({...t}){return C.jsx(CC,{"data-slot":"sheet",...t})}function lQ({...t}){return C.jsx(mm,{"data-slot":"sheet-close",...t})}function cQ({...t}){return C.jsx(SC,{"data-slot":"sheet-portal",...t})}function uQ({className:t,...e}){return C.jsx(xC,{"data-slot":"sheet-overlay",className:Mt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function v9({className:t,children:e,side:n="right",...r}){return C.jsxs(cQ,{children:[C.jsx(uQ,{}),C.jsxs(EC,{"data-slot":"sheet-content",className:Mt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...r,children:[e,C.jsxs(mm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[C.jsx(N6,{className:"size-4"}),C.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function dQ({className:t,...e}){return C.jsx("div",{"data-slot":"sheet-header",className:Mt("flex flex-col gap-1.5 p-4",t),...e})}function fQ({className:t,...e}){return C.jsx("div",{"data-slot":"sheet-footer",className:Mt("mt-auto flex flex-col gap-2 p-4",t),...e})}function hQ({className:t,...e}){return C.jsx(vA,{"data-slot":"sheet-title",className:Mt("text-foreground font-semibold",t),...e})}function pQ({className:t,...e}){return C.jsx(bA,{"data-slot":"sheet-description",className:Mt("text-muted-foreground text-sm",t),...e})}const mQ=["top","right","bottom","left"],Ka=Math.min,fi=Math.max,w1=Math.round,ib=Math.floor,Rl=t=>({x:t,y:t}),gQ={left:"right",right:"left",bottom:"top",top:"bottom"},yQ={start:"end",end:"start"};function Wk(t,e,n){return fi(t,Ka(e,n))}function jl(t,e){return typeof t=="function"?t(e):t}function Wa(t){return t.split("-")[0]}function gm(t){return t.split("-")[1]}function wA(t){return t==="x"?"y":"x"}function CA(t){return t==="y"?"height":"width"}const vQ=new Set(["top","bottom"]);function Ba(t){return vQ.has(Wa(t))?"y":"x"}function SA(t){return wA(Ba(t))}function bQ(t,e,n){n===void 0&&(n=!1);const r=gm(t),o=SA(t),i=CA(o);let s=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(s=C1(s)),[s,C1(s)]}function wQ(t){const e=C1(t);return[Yk(t),e,Yk(e)]}function Yk(t){return t.replace(/start|end/g,e=>yQ[e])}const LP=["left","right"],VP=["right","left"],CQ=["top","bottom"],SQ=["bottom","top"];function xQ(t,e,n){switch(t){case"top":case"bottom":return n?e?VP:LP:e?LP:VP;case"left":case"right":return e?CQ:SQ;default:return[]}}function EQ(t,e,n,r){const o=gm(t);let i=xQ(Wa(t),n==="start",r);return o&&(i=i.map(s=>s+"-"+o),e&&(i=i.concat(i.map(Yk)))),i}function C1(t){return t.replace(/left|right|bottom|top/g,e=>gQ[e])}function _Q(t){return{top:0,right:0,bottom:0,left:0,...t}}function xA(t){return typeof t!="number"?_Q(t):{top:t,right:t,bottom:t,left:t}}function Fp(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function jP(t,e,n){let{reference:r,floating:o}=t;const i=Ba(e),s=SA(e),a=CA(s),l=Wa(e),u=i==="y",f=r.x+r.width/2-o.width/2,h=r.y+r.height/2-o.height/2,p=r[a]/2-o[a]/2;let g;switch(l){case"top":g={x:f,y:r.y-o.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-o.width,y:h};break;default:g={x:r.x,y:r.y}}switch(gm(e)){case"start":g[s]-=p*(n&&u?-1:1);break;case"end":g[s]+=p*(n&&u?-1:1);break}return g}const kQ=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=n,a=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let u=await s.getElementRects({reference:t,floating:e,strategy:o}),{x:f,y:h}=jP(u,r,l),p=r,g={},v=0;for(let b=0;b<a.length;b++){const{name:E,fn:T}=a[b],{x:P,y:D,data:z,reset:V}=await T({x:f,y:h,initialPlacement:r,placement:p,strategy:o,middlewareData:g,rects:u,platform:s,elements:{reference:t,floating:e}});f=P??f,h=D??h,g={...g,[E]:{...g[E],...z}},V&&v<=50&&(v++,typeof V=="object"&&(V.placement&&(p=V.placement),V.rects&&(u=V.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:o}):V.rects),{x:f,y:h}=jP(u,p,l)),b=-1)}return{x:f,y:h,placement:p,strategy:o,middlewareData:g}};async function yy(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:i,rects:s,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:g=0}=jl(e,t),v=xA(g),E=a[p?h==="floating"?"reference":"floating":h],T=Fp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(E)))==null||n?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:f,strategy:l})),P=h==="floating"?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,D=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),z=await(i.isElement==null?void 0:i.isElement(D))?await(i.getScale==null?void 0:i.getScale(D))||{x:1,y:1}:{x:1,y:1},V=Fp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:P,offsetParent:D,strategy:l}):P);return{top:(T.top-V.top+v.top)/z.y,bottom:(V.bottom-T.bottom+v.bottom)/z.y,left:(T.left-V.left+v.left)/z.x,right:(V.right-T.right+v.right)/z.x}}const TQ=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:i,platform:s,elements:a,middlewareData:l}=e,{element:u,padding:f=0}=jl(t,e)||{};if(u==null)return{};const h=xA(f),p={x:n,y:r},g=SA(o),v=CA(g),b=await s.getDimensions(u),E=g==="y",T=E?"top":"left",P=E?"bottom":"right",D=E?"clientHeight":"clientWidth",z=i.reference[v]+i.reference[g]-p[g]-i.floating[v],V=p[g]-i.reference[g],$=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let O=$?$[D]:0;(!O||!await(s.isElement==null?void 0:s.isElement($)))&&(O=a.floating[D]||i.floating[v]);const R=z/2-V/2,M=O/2-b[v]/2-1,B=Ka(h[T],M),q=Ka(h[P],M),K=B,F=O-b[v]-q,ne=O/2-b[v]/2+R,oe=Wk(K,ne,F),j=!l.arrow&&gm(o)!=null&&ne!==oe&&i.reference[v]/2-(ne<K?B:q)-b[v]/2<0,U=j?ne<K?ne-K:ne-F:0;return{[g]:p[g]+U,data:{[g]:oe,centerOffset:ne-oe-U,...j&&{alignmentOffset:U}},reset:j}}}),AQ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:i,rects:s,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,...E}=jl(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const T=Wa(o),P=Ba(a),D=Wa(a)===a,z=await(l.isRTL==null?void 0:l.isRTL(u.floating)),V=p||(D||!b?[C1(a)]:wQ(a)),$=v!=="none";!p&&$&&V.push(...EQ(a,b,v,z));const O=[a,...V],R=await yy(e,E),M=[];let B=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&M.push(R[T]),h){const ne=bQ(o,s,z);M.push(R[ne[0]],R[ne[1]])}if(B=[...B,{placement:o,overflows:M}],!M.every(ne=>ne<=0)){var q,K;const ne=(((q=i.flip)==null?void 0:q.index)||0)+1,oe=O[ne];if(oe&&(!(h==="alignment"?P!==Ba(oe):!1)||B.every(Z=>Z.overflows[0]>0&&Ba(Z.placement)===P)))return{data:{index:ne,overflows:B},reset:{placement:oe}};let j=(K=B.filter(U=>U.overflows[0]<=0).sort((U,Z)=>U.overflows[1]-Z.overflows[1])[0])==null?void 0:K.placement;if(!j)switch(g){case"bestFit":{var F;const U=(F=B.filter(Z=>{if($){const J=Ba(Z.placement);return J===P||J==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(J=>J>0).reduce((J,Y)=>J+Y,0)]).sort((Z,J)=>Z[1]-J[1])[0])==null?void 0:F[0];U&&(j=U);break}case"initialPlacement":j=a;break}if(o!==j)return{reset:{placement:j}}}return{}}}};function BP(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function $P(t){return mQ.some(e=>t[e]>=0)}const RQ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=jl(t,e);switch(r){case"referenceHidden":{const i=await yy(e,{...o,elementContext:"reference"}),s=BP(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:$P(s)}}}case"escaped":{const i=await yy(e,{...o,altBoundary:!0}),s=BP(i,n.floating);return{data:{escapedOffsets:s,escaped:$P(s)}}}default:return{}}}}};function b9(t){const e=Ka(...t.map(i=>i.left)),n=Ka(...t.map(i=>i.top)),r=fi(...t.map(i=>i.right)),o=fi(...t.map(i=>i.bottom));return{x:e,y:n,width:r-e,height:o-n}}function MQ(t){const e=t.slice().sort((o,i)=>o.y-i.y),n=[];let r=null;for(let o=0;o<e.length;o++){const i=e[o];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(o=>Fp(b9(o)))}const IQ=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:o,platform:i,strategy:s}=e,{padding:a=2,x:l,y:u}=jl(t,e),f=Array.from(await(i.getClientRects==null?void 0:i.getClientRects(r.reference))||[]),h=MQ(f),p=Fp(b9(f)),g=xA(a);function v(){if(h.length===2&&h[0].left>h[1].right&&l!=null&&u!=null)return h.find(E=>l>E.left-g.left&&l<E.right+g.right&&u>E.top-g.top&&u<E.bottom+g.bottom)||p;if(h.length>=2){if(Ba(n)==="y"){const B=h[0],q=h[h.length-1],K=Wa(n)==="top",F=B.top,ne=q.bottom,oe=K?B.left:q.left,j=K?B.right:q.right,U=j-oe,Z=ne-F;return{top:F,bottom:ne,left:oe,right:j,width:U,height:Z,x:oe,y:F}}const E=Wa(n)==="left",T=fi(...h.map(B=>B.right)),P=Ka(...h.map(B=>B.left)),D=h.filter(B=>E?B.left===P:B.right===T),z=D[0].top,V=D[D.length-1].bottom,$=P,O=T,R=O-$,M=V-z;return{top:z,bottom:V,left:$,right:O,width:R,height:M,x:$,y:z}}return p}const b=await i.getElementRects({reference:{getBoundingClientRect:v},floating:r.floating,strategy:s});return o.reference.x!==b.reference.x||o.reference.y!==b.reference.y||o.reference.width!==b.reference.width||o.reference.height!==b.reference.height?{reset:{rects:b}}:{}}}},w9=new Set(["left","top"]);async function NQ(t,e){const{placement:n,platform:r,elements:o}=t,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),s=Wa(n),a=gm(n),l=Ba(n)==="y",u=w9.has(s)?-1:1,f=i&&l?-1:1,h=jl(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof v=="number"&&(g=a==="end"?v*-1:v),l?{x:g*f,y:p*u}:{x:p*u,y:g*f}}const DQ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:i,placement:s,middlewareData:a}=e,l=await NQ(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:s}}}}},OQ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:E=>{let{x:T,y:P}=E;return{x:T,y:P}}},...l}=jl(t,e),u={x:n,y:r},f=await yy(e,l),h=Ba(Wa(o)),p=wA(h);let g=u[p],v=u[h];if(i){const E=p==="y"?"top":"left",T=p==="y"?"bottom":"right",P=g+f[E],D=g-f[T];g=Wk(P,g,D)}if(s){const E=h==="y"?"top":"left",T=h==="y"?"bottom":"right",P=v+f[E],D=v-f[T];v=Wk(P,v,D)}const b=a.fn({...e,[p]:g,[h]:v});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[p]:i,[h]:s}}}}}},PQ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:i,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=jl(t,e),f={x:n,y:r},h=Ba(o),p=wA(h);let g=f[p],v=f[h];const b=jl(a,e),E=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const D=p==="y"?"height":"width",z=i.reference[p]-i.floating[D]+E.mainAxis,V=i.reference[p]+i.reference[D]-E.mainAxis;g<z?g=z:g>V&&(g=V)}if(u){var T,P;const D=p==="y"?"width":"height",z=w9.has(Wa(o)),V=i.reference[h]-i.floating[D]+(z&&((T=s.offset)==null?void 0:T[h])||0)+(z?0:E.crossAxis),$=i.reference[h]+i.reference[D]+(z?0:((P=s.offset)==null?void 0:P[h])||0)-(z?E.crossAxis:0);v<V?v=V:v>$&&(v=$)}return{[p]:g,[h]:v}}}},LQ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:i,platform:s,elements:a}=e,{apply:l=()=>{},...u}=jl(t,e),f=await yy(e,u),h=Wa(o),p=gm(o),g=Ba(o)==="y",{width:v,height:b}=i.floating;let E,T;h==="top"||h==="bottom"?(E=h,T=p===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(T=h,E=p==="end"?"top":"bottom");const P=b-f.top-f.bottom,D=v-f.left-f.right,z=Ka(b-f[E],P),V=Ka(v-f[T],D),$=!e.middlewareData.shift;let O=z,R=V;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(R=D),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(O=P),$&&!p){const B=fi(f.left,0),q=fi(f.right,0),K=fi(f.top,0),F=fi(f.bottom,0);g?R=v-2*(B!==0||q!==0?B+q:fi(f.left,f.right)):O=b-2*(K!==0||F!==0?K+F:fi(f.top,f.bottom))}await l({...e,availableWidth:R,availableHeight:O});const M=await s.getDimensions(a.floating);return v!==M.width||b!==M.height?{reset:{rects:!0}}:{}}}};function _C(){return typeof window<"u"}function ym(t){return C9(t)?(t.nodeName||"").toLowerCase():"#document"}function ns(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Gl(t){var e;return(e=(C9(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function C9(t){return _C()?t instanceof Node||t instanceof ns(t).Node:!1}function dr(t){return _C()?t instanceof Element||t instanceof ns(t).Element:!1}function ks(t){return _C()?t instanceof HTMLElement||t instanceof ns(t).HTMLElement:!1}function Xk(t){return!_C()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ns(t).ShadowRoot}const VQ=new Set(["inline","contents"]);function lv(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=pa(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!VQ.has(o)}const jQ=new Set(["table","td","th"]);function BQ(t){return jQ.has(ym(t))}const $Q=[":popover-open",":modal"];function kC(t){return $Q.some(e=>{try{return t.matches(e)}catch{return!1}})}const HQ=["transform","translate","scale","rotate","perspective"],FQ=["transform","translate","scale","rotate","perspective","filter"],zQ=["paint","layout","strict","content"];function EA(t){const e=TC(),n=dr(t)?pa(t):t;return HQ.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||FQ.some(r=>(n.willChange||"").includes(r))||zQ.some(r=>(n.contain||"").includes(r))}function UQ(t){let e=Gc(t);for(;ks(e)&&!bd(e);){if(EA(e))return e;if(kC(e))return null;e=Gc(e)}return null}function TC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const qQ=new Set(["html","body","#document"]);function bd(t){return qQ.has(ym(t))}function pa(t){return ns(t).getComputedStyle(t)}function AC(t){return dr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Gc(t){if(ym(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Xk(t)&&t.host||Gl(t);return Xk(e)?e.host:e}function S9(t){const e=Gc(t);return bd(e)?t.ownerDocument?t.ownerDocument.body:t.body:ks(e)&&lv(e)?e:S9(e)}function Vc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=S9(t),i=o===((r=t.ownerDocument)==null?void 0:r.body),s=ns(o);if(i){const a=Qk(s);return e.concat(s,s.visualViewport||[],lv(o)?o:[],a&&n?Vc(a):[])}return e.concat(o,Vc(o,[],n))}function Qk(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function x9(t){const e=pa(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=ks(t),i=o?t.offsetWidth:n,s=o?t.offsetHeight:r,a=w1(n)!==i||w1(r)!==s;return a&&(n=i,r=s),{width:n,height:r,$:a}}function _A(t){return dr(t)?t:t.contextElement}function kp(t){const e=_A(t);if(!ks(e))return Rl(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:i}=x9(e);let s=(i?w1(n.width):n.width)/r,a=(i?w1(n.height):n.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const GQ=Rl(0);function E9(t){const e=ns(t);return!TC()||!e.visualViewport?GQ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function KQ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ns(t)?!1:e}function Yf(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),i=_A(t);let s=Rl(1);e&&(r?dr(r)&&(s=kp(r)):s=kp(t));const a=KQ(i,n,r)?E9(i):Rl(0);let l=(o.left+a.x)/s.x,u=(o.top+a.y)/s.y,f=o.width/s.x,h=o.height/s.y;if(i){const p=ns(i),g=r&&dr(r)?ns(r):r;let v=p,b=Qk(v);for(;b&&r&&g!==v;){const E=kp(b),T=b.getBoundingClientRect(),P=pa(b),D=T.left+(b.clientLeft+parseFloat(P.paddingLeft))*E.x,z=T.top+(b.clientTop+parseFloat(P.paddingTop))*E.y;l*=E.x,u*=E.y,f*=E.x,h*=E.y,l+=D,u+=z,v=ns(b),b=Qk(v)}}return Fp({width:f,height:h,x:l,y:u})}function kA(t,e){const n=AC(t).scrollLeft;return e?e.left+n:Yf(Gl(t)).left+n}function _9(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),o=r.left+e.scrollLeft-(n?0:kA(t,r)),i=r.top+e.scrollTop;return{x:o,y:i}}function WQ(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const i=o==="fixed",s=Gl(r),a=e?kC(e.floating):!1;if(r===s||a&&i)return n;let l={scrollLeft:0,scrollTop:0},u=Rl(1);const f=Rl(0),h=ks(r);if((h||!h&&!i)&&((ym(r)!=="body"||lv(s))&&(l=AC(r)),ks(r))){const g=Yf(r);u=kp(r),f.x=g.x+r.clientLeft,f.y=g.y+r.clientTop}const p=s&&!h&&!i?_9(s,l,!0):Rl(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+f.x+p.x,y:n.y*u.y-l.scrollTop*u.y+f.y+p.y}}function YQ(t){return Array.from(t.getClientRects())}function XQ(t){const e=Gl(t),n=AC(t),r=t.ownerDocument.body,o=fi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=fi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+kA(t);const a=-n.scrollTop;return pa(r).direction==="rtl"&&(s+=fi(e.clientWidth,r.clientWidth)-o),{width:o,height:i,x:s,y:a}}function QQ(t,e){const n=ns(t),r=Gl(t),o=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,a=0,l=0;if(o){i=o.width,s=o.height;const u=TC();(!u||u&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:i,height:s,x:a,y:l}}const ZQ=new Set(["absolute","fixed"]);function JQ(t,e){const n=Yf(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,i=ks(t)?kp(t):Rl(1),s=t.clientWidth*i.x,a=t.clientHeight*i.y,l=o*i.x,u=r*i.y;return{width:s,height:a,x:l,y:u}}function HP(t,e,n){let r;if(e==="viewport")r=QQ(t,n);else if(e==="document")r=XQ(Gl(t));else if(dr(e))r=JQ(e,n);else{const o=E9(t);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return Fp(r)}function k9(t,e){const n=Gc(t);return n===e||!dr(n)||bd(n)?!1:pa(n).position==="fixed"||k9(n,e)}function eZ(t,e){const n=e.get(t);if(n)return n;let r=Vc(t,[],!1).filter(a=>dr(a)&&ym(a)!=="body"),o=null;const i=pa(t).position==="fixed";let s=i?Gc(t):t;for(;dr(s)&&!bd(s);){const a=pa(s),l=EA(s);!l&&a.position==="fixed"&&(o=null),(i?!l&&!o:!l&&a.position==="static"&&!!o&&ZQ.has(o.position)||lv(s)&&!l&&k9(t,s))?r=r.filter(f=>f!==s):o=a,s=Gc(s)}return e.set(t,r),r}function tZ(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const s=[...n==="clippingAncestors"?kC(e)?[]:eZ(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((u,f)=>{const h=HP(e,f,o);return u.top=fi(h.top,u.top),u.right=Ka(h.right,u.right),u.bottom=Ka(h.bottom,u.bottom),u.left=fi(h.left,u.left),u},HP(e,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function nZ(t){const{width:e,height:n}=x9(t);return{width:e,height:n}}function rZ(t,e,n){const r=ks(e),o=Gl(e),i=n==="fixed",s=Yf(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Rl(0);function u(){l.x=kA(o)}if(r||!r&&!i)if((ym(e)!=="body"||lv(o))&&(a=AC(e)),r){const g=Yf(e,!0,i,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else o&&u();i&&!r&&o&&u();const f=o&&!r&&!i?_9(o,a):Rl(0),h=s.left+a.scrollLeft-l.x-f.x,p=s.top+a.scrollTop-l.y-f.y;return{x:h,y:p,width:s.width,height:s.height}}function t_(t){return pa(t).position==="static"}function FP(t,e){if(!ks(t)||pa(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Gl(t)===n&&(n=n.ownerDocument.body),n}function T9(t,e){const n=ns(t);if(kC(t))return n;if(!ks(t)){let o=Gc(t);for(;o&&!bd(o);){if(dr(o)&&!t_(o))return o;o=Gc(o)}return n}let r=FP(t,e);for(;r&&BQ(r)&&t_(r);)r=FP(r,e);return r&&bd(r)&&t_(r)&&!EA(r)?n:r||UQ(t)||n}const oZ=async function(t){const e=this.getOffsetParent||T9,n=this.getDimensions,r=await n(t.floating);return{reference:rZ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function iZ(t){return pa(t).direction==="rtl"}const sZ={convertOffsetParentRelativeRectToViewportRelativeRect:WQ,getDocumentElement:Gl,getClippingRect:tZ,getOffsetParent:T9,getElementRects:oZ,getClientRects:YQ,getDimensions:nZ,getScale:kp,isElement:dr,isRTL:iZ};function A9(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function aZ(t,e){let n=null,r;const o=Gl(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const u=t.getBoundingClientRect(),{left:f,top:h,width:p,height:g}=u;if(a||e(),!p||!g)return;const v=ib(h),b=ib(o.clientWidth-(f+p)),E=ib(o.clientHeight-(h+g)),T=ib(f),D={rootMargin:-v+"px "+-b+"px "+-E+"px "+-T+"px",threshold:fi(0,Ka(1,l))||1};let z=!0;function V($){const O=$[0].intersectionRatio;if(O!==l){if(!z)return s();O?s(!1,O):r=setTimeout(()=>{s(!1,1e-7)},1e3)}O===1&&!A9(u,t.getBoundingClientRect())&&s(),z=!1}try{n=new IntersectionObserver(V,{...D,root:o.ownerDocument})}catch{n=new IntersectionObserver(V,D)}n.observe(t)}return s(!0),i}function R9(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=_A(t),f=o||i?[...u?Vc(u):[],...Vc(e)]:[];f.forEach(T=>{o&&T.addEventListener("scroll",n,{passive:!0}),i&&T.addEventListener("resize",n)});const h=u&&a?aZ(u,n):null;let p=-1,g=null;s&&(g=new ResizeObserver(T=>{let[P]=T;P&&P.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var D;(D=g)==null||D.observe(e)})),n()}),u&&!l&&g.observe(u),g.observe(e));let v,b=l?Yf(t):null;l&&E();function E(){const T=Yf(t);b&&!A9(b,T)&&n(),b=T,v=requestAnimationFrame(E)}return n(),()=>{var T;f.forEach(P=>{o&&P.removeEventListener("scroll",n),i&&P.removeEventListener("resize",n)}),h?.(),(T=g)==null||T.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const lZ=DQ,cZ=OQ,uZ=AQ,dZ=LQ,fZ=RQ,zP=TQ,hZ=IQ,pZ=PQ,mZ=(t,e,n)=>{const r=new Map,o={platform:sZ,...n},i={...o.platform,_c:r};return kQ(t,e,{...o,platform:i})};var gZ=typeof document<"u",yZ=function(){},Ub=gZ?_.useLayoutEffect:yZ;function S1(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!S1(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&t.$$typeof)&&!S1(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function M9(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function UP(t,e){const n=M9(t);return Math.round(e*n)/n}function n_(t){const e=_.useRef(t);return Ub(()=>{e.current=t}),e}function I9(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:s}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[f,h]=_.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=_.useState(r);S1(p,r)||g(r);const[v,b]=_.useState(null),[E,T]=_.useState(null),P=_.useCallback(Z=>{Z!==$.current&&($.current=Z,b(Z))},[]),D=_.useCallback(Z=>{Z!==O.current&&(O.current=Z,T(Z))},[]),z=i||v,V=s||E,$=_.useRef(null),O=_.useRef(null),R=_.useRef(f),M=l!=null,B=n_(l),q=n_(o),K=n_(u),F=_.useCallback(()=>{if(!$.current||!O.current)return;const Z={placement:e,strategy:n,middleware:p};q.current&&(Z.platform=q.current),mZ($.current,O.current,Z).then(J=>{const Y={...J,isPositioned:K.current!==!1};ne.current&&!S1(R.current,Y)&&(R.current=Y,ha.flushSync(()=>{h(Y)}))})},[p,e,n,q,K]);Ub(()=>{u===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,h(Z=>({...Z,isPositioned:!1})))},[u]);const ne=_.useRef(!1);Ub(()=>(ne.current=!0,()=>{ne.current=!1}),[]),Ub(()=>{if(z&&($.current=z),V&&(O.current=V),z&&V){if(B.current)return B.current(z,V,F);F()}},[z,V,F,B,M]);const oe=_.useMemo(()=>({reference:$,floating:O,setReference:P,setFloating:D}),[P,D]),j=_.useMemo(()=>({reference:z,floating:V}),[z,V]),U=_.useMemo(()=>{const Z={position:n,left:0,top:0};if(!j.floating)return Z;const J=UP(j.floating,f.x),Y=UP(j.floating,f.y);return a?{...Z,transform:"translate("+J+"px, "+Y+"px)",...M9(j.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:J,top:Y}},[n,a,j.floating,f.x,f.y]);return _.useMemo(()=>({...f,update:F,refs:oe,elements:j,floatingStyles:U}),[f,F,oe,j,U])}const vZ=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?zP({element:r.current,padding:o}).fn(n):{}:r?zP({element:r,padding:o}).fn(n):{}}}},nl=(t,e)=>({...lZ(t),options:[t,e]}),Bd=(t,e)=>({...cZ(t),options:[t,e]}),Zk=(t,e)=>({...pZ(t),options:[t,e]}),ma=(t,e)=>({...uZ(t),options:[t,e]}),cv=(t,e)=>({...dZ(t),options:[t,e]}),bZ=(t,e)=>({...fZ(t),options:[t,e]}),Xg=(t,e)=>({...hZ(t),options:[t,e]}),TA=(t,e)=>({...vZ(t),options:[t,e]});var wZ="Arrow",N9=_.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...i}=t;return C.jsx(Pn.svg,{...i,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:C.jsx("polygon",{points:"0,0 30,0 15,10"})})});N9.displayName=wZ;var CZ=N9;function SZ(t){const[e,n]=_.useState(void 0);return vd(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let s,a;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,a=u.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var AA="Popper",[D9,vm]=Jc(AA),[xZ,O9]=D9(AA),P9=t=>{const{__scopePopper:e,children:n}=t,[r,o]=_.useState(null);return C.jsx(xZ,{scope:e,anchor:r,onAnchorChange:o,children:n})};P9.displayName=AA;var L9="PopperAnchor",V9=_.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,i=O9(L9,n),s=_.useRef(null),a=Mr(e,s);return _.useEffect(()=>{i.onAnchorChange(r?.current||s.current)}),r?null:C.jsx(Pn.div,{...o,ref:a})});V9.displayName=L9;var RA="PopperContent",[EZ,_Z]=D9(RA),j9=_.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:i="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:v,...b}=t,E=O9(RA,n),[T,P]=_.useState(null),D=Mr(e,De=>P(De)),[z,V]=_.useState(null),$=SZ(z),O=$?.width??0,R=$?.height??0,M=r+(i!=="center"?"-"+i:""),B=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},q=Array.isArray(u)?u:[u],K=q.length>0,F={padding:B,boundary:q.filter(TZ),altBoundary:K},{refs:ne,floatingStyles:oe,placement:j,isPositioned:U,middlewareData:Z}=I9({strategy:"fixed",placement:M,whileElementsMounted:(...De)=>R9(...De,{animationFrame:g==="always"}),elements:{reference:E.anchor},middleware:[nl({mainAxis:o+R,alignmentAxis:s}),l&&Bd({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Zk():void 0,...F}),l&&ma({...F}),cv({...F,apply:({elements:De,rects:Ue,availableWidth:Oe,availableHeight:rt})=>{const{width:wt,height:tt}=Ue.reference,mn=De.floating.style;mn.setProperty("--radix-popper-available-width",`${Oe}px`),mn.setProperty("--radix-popper-available-height",`${rt}px`),mn.setProperty("--radix-popper-anchor-width",`${wt}px`),mn.setProperty("--radix-popper-anchor-height",`${tt}px`)}}),z&&TA({element:z,padding:a}),AZ({arrowWidth:O,arrowHeight:R}),p&&bZ({strategy:"referenceHidden",...F})]}),[J,Y]=H9(j),se=qc(v);vd(()=>{U&&se?.()},[U,se]);const te=Z.arrow?.x,ie=Z.arrow?.y,ue=Z.arrow?.centerOffset!==0,[ae,ve]=_.useState();return vd(()=>{T&&ve(window.getComputedStyle(T).zIndex)},[T]),C.jsx("div",{ref:ne.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:U?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[Z.transformOrigin?.x,Z.transformOrigin?.y].join(" "),...Z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:C.jsx(EZ,{scope:n,placedSide:J,onArrowChange:V,arrowX:te,arrowY:ie,shouldHideArrow:ue,children:C.jsx(Pn.div,{"data-side":J,"data-align":Y,...b,ref:D,style:{...b.style,animation:U?void 0:"none"}})})})});j9.displayName=RA;var B9="PopperArrow",kZ={top:"bottom",right:"left",bottom:"top",left:"right"},$9=_.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,i=_Z(B9,r),s=kZ[i.placedSide];return C.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:C.jsx(CZ,{...o,ref:n,style:{...o.style,display:"block"}})})});$9.displayName=B9;function TZ(t){return t!==null}var AZ=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:o}=e,s=o.arrow?.centerOffset!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[u,f]=H9(n),h={start:"0%",center:"50%",end:"100%"}[f],p=(o.arrow?.x??0)+a/2,g=(o.arrow?.y??0)+l/2;let v="",b="";return u==="bottom"?(v=s?h:`${p}px`,b=`${-l}px`):u==="top"?(v=s?h:`${p}px`,b=`${r.floating.height+l}px`):u==="right"?(v=`${-l}px`,b=s?h:`${g}px`):u==="left"&&(v=`${r.floating.width+l}px`,b=s?h:`${g}px`),{data:{x:v,y:b}}}});function H9(t){const[e,n="center"]=t.split("-");return[e,n]}var MA=P9,RC=V9,IA=j9,NA=$9,RZ=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),MZ="VisuallyHidden",F9=_.forwardRef((t,e)=>C.jsx(Pn.span,{...t,ref:e,style:{...RZ,...t.style}}));F9.displayName=MZ;var IZ=F9,[MC,_Ie]=Jc("Tooltip",[vm]),IC=vm(),z9="TooltipProvider",NZ=700,Jk="tooltip.open",[DZ,DA]=MC(z9),U9=t=>{const{__scopeTooltip:e,delayDuration:n=NZ,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:i}=t,s=_.useRef(!0),a=_.useRef(!1),l=_.useRef(0);return _.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),C.jsx(DZ,{scope:e,isOpenDelayedRef:s,delayDuration:n,onOpen:_.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:_.useCallback(u=>{a.current=u},[]),disableHoverableContent:o,children:i})};U9.displayName=z9;var vy="Tooltip",[OZ,uv]=MC(vy),q9=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:o,onOpenChange:i,disableHoverableContent:s,delayDuration:a}=t,l=DA(vy,t.__scopeTooltip),u=IC(e),[f,h]=_.useState(null),p=ts(),g=_.useRef(0),v=s??l.disableHoverableContent,b=a??l.delayDuration,E=_.useRef(!1),[T,P]=iv({prop:r,defaultProp:o??!1,onChange:O=>{O?(l.onOpen(),document.dispatchEvent(new CustomEvent(Jk))):l.onClose(),i?.(O)},caller:vy}),D=_.useMemo(()=>T?E.current?"delayed-open":"instant-open":"closed",[T]),z=_.useCallback(()=>{window.clearTimeout(g.current),g.current=0,E.current=!1,P(!0)},[P]),V=_.useCallback(()=>{window.clearTimeout(g.current),g.current=0,P(!1)},[P]),$=_.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{E.current=!0,P(!0),g.current=0},b)},[b,P]);return _.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),C.jsx(MA,{...u,children:C.jsx(OZ,{scope:e,contentId:p,open:T,stateAttribute:D,trigger:f,onTriggerChange:h,onTriggerEnter:_.useCallback(()=>{l.isOpenDelayedRef.current?$():z()},[l.isOpenDelayedRef,$,z]),onTriggerLeave:_.useCallback(()=>{v?V():(window.clearTimeout(g.current),g.current=0)},[V,v]),onOpen:z,onClose:V,disableHoverableContent:v,children:n})})};q9.displayName=vy;var eT="TooltipTrigger",G9=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=uv(eT,n),i=DA(eT,n),s=IC(n),a=_.useRef(null),l=Mr(e,a,o.onTriggerChange),u=_.useRef(!1),f=_.useRef(!1),h=_.useCallback(()=>u.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),C.jsx(RC,{asChild:!0,...s,children:C.jsx(Pn.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:kt(t.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(o.onTriggerEnter(),f.current=!0)}),onPointerLeave:kt(t.onPointerLeave,()=>{o.onTriggerLeave(),f.current=!1}),onPointerDown:kt(t.onPointerDown,()=>{o.open&&o.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:kt(t.onFocus,()=>{u.current||o.onOpen()}),onBlur:kt(t.onBlur,o.onClose),onClick:kt(t.onClick,o.onClose)})})});G9.displayName=eT;var OA="TooltipPortal",[PZ,LZ]=MC(OA,{forceMount:void 0}),K9=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:o}=t,i=uv(OA,e);return C.jsx(PZ,{scope:e,forceMount:n,children:C.jsx(ya,{present:n||i.open,children:C.jsx(av,{asChild:!0,container:o,children:r})})})};K9.displayName=OA;var zp="TooltipContent",W9=_.forwardRef((t,e)=>{const n=LZ(zp,t.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...i}=t,s=uv(zp,t.__scopeTooltip);return C.jsx(ya,{present:r||s.open,children:s.disableHoverableContent?C.jsx(Y9,{side:o,...i,ref:e}):C.jsx(VZ,{side:o,...i,ref:e})})}),VZ=_.forwardRef((t,e)=>{const n=uv(zp,t.__scopeTooltip),r=DA(zp,t.__scopeTooltip),o=_.useRef(null),i=Mr(e,o),[s,a]=_.useState(null),{trigger:l,onClose:u}=n,f=o.current,{onPointerInTransitChange:h}=r,p=_.useCallback(()=>{a(null),h(!1)},[h]),g=_.useCallback((v,b)=>{const E=v.currentTarget,T={x:v.clientX,y:v.clientY},P=HZ(T,E.getBoundingClientRect()),D=FZ(T,P),z=zZ(b.getBoundingClientRect()),V=qZ([...D,...z]);a(V),h(!0)},[h]);return _.useEffect(()=>()=>p(),[p]),_.useEffect(()=>{if(l&&f){const v=E=>g(E,f),b=E=>g(E,l);return l.addEventListener("pointerleave",v),f.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",v),f.removeEventListener("pointerleave",b)}}},[l,f,g,p]),_.useEffect(()=>{if(s){const v=b=>{const E=b.target,T={x:b.clientX,y:b.clientY},P=l?.contains(E)||f?.contains(E),D=!UZ(T,s);P?p():D&&(p(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,f,s,u,p]),C.jsx(Y9,{...t,ref:i})}),[jZ,BZ]=MC(vy,{isInside:!1}),$Z=A6("TooltipContent"),Y9=_.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:s,...a}=t,l=uv(zp,n),u=IC(n),{onClose:f}=l;return _.useEffect(()=>(document.addEventListener(Jk,f),()=>document.removeEventListener(Jk,f)),[f]),_.useEffect(()=>{if(l.trigger){const h=p=>{p.target?.contains(l.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,f]),C.jsx(sv,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:C.jsxs(IA,{"data-state":l.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[C.jsx($Z,{children:r}),C.jsx(jZ,{scope:n,isInside:!0,children:C.jsx(IZ,{id:l.contentId,role:"tooltip",children:o||r})})]})})});W9.displayName=zp;var X9="TooltipArrow",Q9=_.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=IC(n);return BZ(X9,n).isInside?null:C.jsx(NA,{...o,...r,ref:e})});Q9.displayName=X9;function HZ(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,o,i)){case i:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function FZ(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function zZ(t){const{top:e,right:n,bottom:r,left:o}=t;return[{x:o,y:e},{x:n,y:e},{x:n,y:r},{x:o,y:r}]}function UZ(t,e){const{x:n,y:r}=t;let o=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const a=e[i],l=e[s],u=a.x,f=a.y,h=l.x,p=l.y;f>r!=p>r&&n<(h-u)*(r-f)/(p-f)+u&&(o=!o)}return o}function qZ(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),GZ(e)}function GZ(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const o=t[r];for(;e.length>=2;){const i=e[e.length-1],s=e[e.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))e.pop();else break}e.push(o)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const o=t[r];for(;n.length>=2;){const i=n[n.length-1],s=n[n.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))n.pop();else break}n.push(o)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var KZ=U9,WZ=q9,YZ=G9,XZ=K9,QZ=W9,ZZ=Q9;function Z9({delayDuration:t=0,...e}){return C.jsx(KZ,{"data-slot":"tooltip-provider",delayDuration:t,...e})}function JZ({...t}){return C.jsx(Z9,{children:C.jsx(WZ,{"data-slot":"tooltip",...t})})}function eJ({...t}){return C.jsx(YZ,{"data-slot":"tooltip-trigger",...t})}function tJ({className:t,sideOffset:e=0,children:n,...r}){return C.jsx(XZ,{children:C.jsxs(QZ,{"data-slot":"tooltip-content",sideOffset:e,className:Mt("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...r,children:[n,C.jsx(ZZ,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const nJ="sidebar_state",rJ=3600*24*7,oJ="16rem",iJ="18rem",sJ="3rem",aJ="b",J9=_.createContext(null);function PA(){const t=_.useContext(J9);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}function lJ({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:o,children:i,...s}){const a=oY(),[l,u]=_.useState(!1),[f,h]=_.useState(t),p=e??f,g=_.useCallback(T=>{const P=typeof T=="function"?T(p):T;n?n(P):h(P),document.cookie=`${nJ}=${P}; path=/; max-age=${rJ}`},[n,p]),v=_.useCallback(()=>a?u(T=>!T):g(T=>!T),[a,g,u]);_.useEffect(()=>{const T=P=>{P.key===aJ&&(P.metaKey||P.ctrlKey)&&(P.preventDefault(),v())};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[v]);const b=p?"expanded":"collapsed",E=_.useMemo(()=>({state:b,open:p,setOpen:g,isMobile:a,openMobile:l,setOpenMobile:u,toggleSidebar:v}),[b,p,g,a,l,u,v]);return C.jsx(J9.Provider,{value:E,children:C.jsx(Z9,{delayDuration:0,children:C.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":oJ,"--sidebar-width-icon":sJ,...o},className:Mt("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",r),...s,children:i})})})}function cJ({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:o,...i}){const{isMobile:s,state:a,openMobile:l,setOpenMobile:u}=PA();return n==="none"?C.jsx("div",{"data-slot":"sidebar",className:Mt("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",r),...i,children:o}):s?C.jsx(y9,{open:l,onOpenChange:u,...i,children:C.jsxs(v9,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":iJ},side:t,children:[C.jsxs(dQ,{className:"sr-only",children:[C.jsx(hQ,{children:"Sidebar"}),C.jsx(pQ,{children:"Displays the mobile sidebar."})]}),C.jsx("div",{className:"flex h-full w-full flex-col",children:o})]})}):C.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":a,"data-collapsible":a==="collapsed"?n:"","data-variant":e,"data-side":t,"data-slot":"sidebar",children:[C.jsx("div",{"data-slot":"sidebar-gap",className:Mt("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),C.jsx("div",{"data-slot":"sidebar-container",className:Mt("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...i,children:C.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:o})})]})}function uJ({className:t,onClick:e,...n}){const{toggleSidebar:r}=PA();return C.jsxs(Kf,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:Mt("size-7",t),onClick:o=>{e?.(o),r()},...n,children:[C.jsx(QW,{}),C.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function dJ({className:t,...e}){return C.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:Mt("flex flex-col gap-2 p-2",t),...e})}function fJ({className:t,...e}){return C.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:Mt("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e})}function hJ({className:t,...e}){return C.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:Mt("relative flex w-full min-w-0 flex-col p-2",t),...e})}function qP({className:t,asChild:e=!1,...n}){const r=e?cA:"div";return C.jsx(r,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:Mt("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})}function pJ({className:t,...e}){return C.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:Mt("w-full text-sm",t),...e})}function r_({className:t,...e}){return C.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:Mt("flex w-full min-w-0 flex-col gap-1",t),...e})}function GP({className:t,...e}){return C.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:Mt("group/menu-item relative",t),...e})}const mJ=M6("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function gJ({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:o,className:i,...s}){const a=t?cA:"button",{isMobile:l,state:u}=PA(),f=C.jsx(a,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":r,"data-active":e,className:Mt(mJ({variant:n,size:r}),i),...s});return o?(typeof o=="string"&&(o={children:o}),C.jsxs(JZ,{children:[C.jsx(eJ,{asChild:!0,children:f}),C.jsx(tJ,{side:"right",align:"center",hidden:u!=="collapsed"||l,...o})]})):f}const yJ="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let LA=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=yJ[n[t]&63];return e};const KP=t=>{let e;const n=new Set,r=(u,f)=>{const h=typeof u=="function"?u(e):u;if(!Object.is(h,e)){const p=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),n.forEach(g=>g(e,p))}},o=()=>e,a={setState:r,getState:o,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=e=t(r,o,a);return a},vJ=t=>t?KP(t):KP,bJ=t=>t;function wJ(t,e=bJ){const n=Pe.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return Pe.useDebugValue(n),n}const WP=t=>{const e=vJ(t),n=r=>wJ(e,r);return Object.assign(n,e),n},e8=t=>t?WP(t):WP;var qb={exports:{}},CJ=qb.exports,YP;function SJ(){return YP||(YP=1,function(t,e){(function(n,r){t.exports=r()})(CJ,function(){var n=function(S,k){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,L){I.__proto__=L}||function(I,L){for(var W in L)Object.prototype.hasOwnProperty.call(L,W)&&(I[W]=L[W])})(S,k)},r=function(){return(r=Object.assign||function(S){for(var k,I=1,L=arguments.length;I<L;I++)for(var W in k=arguments[I])Object.prototype.hasOwnProperty.call(k,W)&&(S[W]=k[W]);return S}).apply(this,arguments)};function o(S,k,I){for(var L,W=0,X=k.length;W<X;W++)!L&&W in k||((L=L||Array.prototype.slice.call(k,0,W))[W]=k[W]);return S.concat(L||Array.prototype.slice.call(k))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:gW,s=Object.keys,a=Array.isArray;function l(S,k){return typeof k!="object"||s(k).forEach(function(I){S[I]=k[I]}),S}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,f={}.hasOwnProperty;function h(S,k){return f.call(S,k)}function p(S,k){typeof k=="function"&&(k=k(u(S))),(typeof Reflect>"u"?s:Reflect.ownKeys)(k).forEach(function(I){v(S,I,k[I])})}var g=Object.defineProperty;function v(S,k,I,L){g(S,k,l(I&&h(I,"get")&&typeof I.get=="function"?{get:I.get,set:I.set,configurable:!0}:{value:I,configurable:!0,writable:!0},L))}function b(S){return{from:function(k){return S.prototype=Object.create(k.prototype),v(S.prototype,"constructor",S),{extend:p.bind(null,S.prototype)}}}}var E=Object.getOwnPropertyDescriptor,T=[].slice;function P(S,k,I){return T.call(S,k,I)}function D(S,k){return k(S)}function z(S){if(!S)throw new Error("Assertion Failed")}function V(S){i.setImmediate?setImmediate(S):setTimeout(S,0)}function $(S,k){if(typeof k=="string"&&h(S,k))return S[k];if(!k)return S;if(typeof k!="string"){for(var I=[],L=0,W=k.length;L<W;++L){var X=$(S,k[L]);I.push(X)}return I}var re=k.indexOf(".");if(re!==-1){var le=S[k.substr(0,re)];return le==null?void 0:$(le,k.substr(re+1))}}function O(S,k,I){if(S&&k!==void 0&&!("isFrozen"in Object&&Object.isFrozen(S)))if(typeof k!="string"&&"length"in k){z(typeof I!="string"&&"length"in I);for(var L=0,W=k.length;L<W;++L)O(S,k[L],I[L])}else{var X,re,le=k.indexOf(".");le!==-1?(X=k.substr(0,le),(re=k.substr(le+1))===""?I===void 0?a(S)&&!isNaN(parseInt(X))?S.splice(X,1):delete S[X]:S[X]=I:O(le=!(le=S[X])||!h(S,X)?S[X]={}:le,re,I)):I===void 0?a(S)&&!isNaN(parseInt(k))?S.splice(k,1):delete S[k]:S[k]=I}}function R(S){var k,I={};for(k in S)h(S,k)&&(I[k]=S[k]);return I}var M=[].concat;function B(S){return M.apply([],S)}var Ht="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(B([8,16,32,64].map(function(S){return["Int","Uint","Float"].map(function(k){return k+S+"Array"})}))).filter(function(S){return i[S]}),q=new Set(Ht.map(function(S){return i[S]})),K=null;function F(S){return K=new WeakMap,S=function k(I){if(!I||typeof I!="object")return I;var L=K.get(I);if(L)return L;if(a(I)){L=[],K.set(I,L);for(var W=0,X=I.length;W<X;++W)L.push(k(I[W]))}else if(q.has(I.constructor))L=I;else{var re,le=u(I);for(re in L=le===Object.prototype?{}:Object.create(le),K.set(I,L),I)h(I,re)&&(L[re]=k(I[re]))}return L}(S),K=null,S}var ne={}.toString;function oe(S){return ne.call(S).slice(8,-1)}var j=typeof Symbol<"u"?Symbol.iterator:"@@iterator",U=typeof j=="symbol"?function(S){var k;return S!=null&&(k=S[j])&&k.apply(S)}:function(){return null};function Z(S,k){return k=S.indexOf(k),0<=k&&S.splice(k,1),0<=k}var J={};function Y(S){var k,I,L,W;if(arguments.length===1){if(a(S))return S.slice();if(this===J&&typeof S=="string")return[S];if(W=U(S)){for(I=[];!(L=W.next()).done;)I.push(L.value);return I}if(S==null)return[S];if(typeof(k=S.length)!="number")return[S];for(I=new Array(k);k--;)I[k]=S[k];return I}for(k=arguments.length,I=new Array(k);k--;)I[k]=arguments[k];return I}var se=typeof Symbol<"u"?function(S){return S[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},_n=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ki=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(_n),te={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ie(S,k){this.name=S,this.message=k}function ue(S,k){return S+". Errors: "+Object.keys(k).map(function(I){return k[I].toString()}).filter(function(I,L,W){return W.indexOf(I)===L}).join(`
`)}function ae(S,k,I,L){this.failures=k,this.failedKeys=L,this.successCount=I,this.message=ue(S,k)}function ve(S,k){this.name="BulkError",this.failures=Object.keys(k).map(function(I){return k[I]}),this.failuresByPos=k,this.message=ue(S,this.failures)}b(ie).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(ae).from(ie),b(ve).from(ie);var De=ki.reduce(function(S,k){return S[k]=k+"Error",S},{}),Ue=ie,Oe=ki.reduce(function(S,k){var I=k+"Error";function L(W,X){this.name=I,W?typeof W=="string"?(this.message="".concat(W).concat(X?`
 `+X:""),this.inner=X||null):typeof W=="object"&&(this.message="".concat(W.name," ").concat(W.message),this.inner=W):(this.message=te[k]||I,this.inner=null)}return b(L).from(Ue),S[k]=L,S},{});Oe.Syntax=SyntaxError,Oe.Type=TypeError,Oe.Range=RangeError;var rt=_n.reduce(function(S,k){return S[k+"Error"]=Oe[k],S},{}),wt=ki.reduce(function(S,k){return["Syntax","Type","Range"].indexOf(k)===-1&&(S[k+"Error"]=Oe[k]),S},{});function tt(){}function mn(S){return S}function Ln(S,k){return S==null||S===mn?k:function(I){return k(S(I))}}function $t(S,k){return function(){S.apply(this,arguments),k.apply(this,arguments)}}function $n(S,k){return S===tt?k:function(){var I=S.apply(this,arguments);I!==void 0&&(arguments[0]=I);var L=this.onsuccess,W=this.onerror;this.onsuccess=null,this.onerror=null;var X=k.apply(this,arguments);return L&&(this.onsuccess=this.onsuccess?$t(L,this.onsuccess):L),W&&(this.onerror=this.onerror?$t(W,this.onerror):W),X!==void 0?X:I}}function At(S,k){return S===tt?k:function(){S.apply(this,arguments);var I=this.onsuccess,L=this.onerror;this.onsuccess=this.onerror=null,k.apply(this,arguments),I&&(this.onsuccess=this.onsuccess?$t(I,this.onsuccess):I),L&&(this.onerror=this.onerror?$t(L,this.onerror):L)}}function sn(S,k){return S===tt?k:function(I){var L=S.apply(this,arguments);l(I,L);var W=this.onsuccess,X=this.onerror;return this.onsuccess=null,this.onerror=null,I=k.apply(this,arguments),W&&(this.onsuccess=this.onsuccess?$t(W,this.onsuccess):W),X&&(this.onerror=this.onerror?$t(X,this.onerror):X),L===void 0?I===void 0?void 0:I:l(L,I)}}function Jt(S,k){return S===tt?k:function(){return k.apply(this,arguments)!==!1&&S.apply(this,arguments)}}function Vt(S,k){return S===tt?k:function(){var I=S.apply(this,arguments);if(I&&typeof I.then=="function"){for(var L=this,W=arguments.length,X=new Array(W);W--;)X[W]=arguments[W];return I.then(function(){return k.apply(L,X)})}return k.apply(this,arguments)}}wt.ModifyError=ae,wt.DexieError=ie,wt.BulkError=ve;var Ut=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function gn(S){Ut=S}var Wt={},an=100,Ht=typeof Promise>"u"?[]:function(){var S=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[S,u(S),S];var k=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[k,u(k),S]}(),_n=Ht[0],ki=Ht[1],Ht=Ht[2],ki=ki&&ki.then,Ft=_n&&_n.constructor,un=!!Ht,kn=function(S,k){Do.push([S,k]),kr&&(queueMicrotask(Fn),kr=!1)},Vn=!0,kr=!0,xn=[],br=[],wr=mn,jn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:tt,pgp:!1,env:{},finalize:tt},nt=jn,Do=[],Br=0,Nr=[];function Qe(S){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var k=this._PSD=nt;if(typeof S!="function"){if(S!==Wt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&$r(this,this._value))}this._state=null,this._value=null,++k.ref,function I(L,W){try{W(function(X){if(L._state===null){if(X===L)throw new TypeError("A promise cannot be resolved with itself.");var re=L._lib&&Qn();X&&typeof X.then=="function"?I(L,function(le,he){X instanceof Qe?X._then(le,he):X.then(le,he)}):(L._state=!0,L._value=X,ft(L)),re&&Gn()}},$r.bind(null,L))}catch(X){$r(L,X)}}(this,S)}var Oo={get:function(){var S=nt,k=Jl;function I(L,W){var X=this,re=!S.global&&(S!==nt||k!==Jl),le=re&&!co(),he=new Qe(function(me,be){Tn(X,new Cr(Vi(L,S,re,le),Vi(W,S,re,le),me,be,S))});return this._consoleTask&&(he._consoleTask=this._consoleTask),he}return I.prototype=Wt,I},set:function(S){v(this,"then",S&&S.prototype===Wt?Oo:{get:function(){return S},set:Oo.set})}};function Cr(S,k,I,L,W){this.onFulfilled=typeof S=="function"?S:null,this.onRejected=typeof k=="function"?k:null,this.resolve=I,this.reject=L,this.psd=W}function $r(S,k){var I,L;br.push(k),S._state===null&&(I=S._lib&&Qn(),k=wr(k),S._state=!1,S._value=k,L=S,xn.some(function(W){return W._value===L._value})||xn.push(L),ft(S),I&&Gn())}function ft(S){var k=S._listeners;S._listeners=[];for(var I=0,L=k.length;I<L;++I)Tn(S,k[I]);var W=S._PSD;--W.ref||W.finalize(),Br===0&&(++Br,kn(function(){--Br==0&&Yt()},[]))}function Tn(S,k){if(S._state!==null){var I=S._state?k.onFulfilled:k.onRejected;if(I===null)return(S._state?k.resolve:k.reject)(S._value);++k.psd.ref,++Br,kn(Hn,[I,S,k])}else S._listeners.push(k)}function Hn(S,k,I){try{var L,W=k._value;!k._state&&br.length&&(br=[]),L=Ut&&k._consoleTask?k._consoleTask.run(function(){return S(W)}):S(W),k._state||br.indexOf(W)!==-1||function(X){for(var re=xn.length;re;)if(xn[--re]._value===X._value)return xn.splice(re,1)}(k),I.resolve(L)}catch(X){I.reject(X)}finally{--Br==0&&Yt(),--I.psd.ref||I.psd.finalize()}}function Fn(){Li(jn,function(){Qn()&&Gn()})}function Qn(){var S=Vn;return kr=Vn=!1,S}function Gn(){var S,k,I;do for(;0<Do.length;)for(S=Do,Do=[],I=S.length,k=0;k<I;++k){var L=S[k];L[0].apply(null,L[1])}while(0<Do.length);kr=Vn=!0}function Yt(){var S=xn;xn=[],S.forEach(function(L){L._PSD.onunhandled.call(null,L._value,L)});for(var k=Nr.slice(0),I=k.length;I;)k[--I]()}function Kn(S){return new Qe(Wt,!1,S)}function mt(S,k){var I=nt;return function(){var L=Qn(),W=nt;try{return zn(I,!0),S.apply(this,arguments)}catch(X){k&&k(X)}finally{zn(W,!1),L&&Gn()}}}p(Qe.prototype,{then:Oo,_then:function(S,k){Tn(this,new Cr(null,null,S,k,nt))},catch:function(S){if(arguments.length===1)return this.then(null,S);var k=S,I=arguments[1];return typeof k=="function"?this.then(null,function(L){return(L instanceof k?I:Kn)(L)}):this.then(null,function(L){return(L&&L.name===k?I:Kn)(L)})},finally:function(S){return this.then(function(k){return Qe.resolve(S()).then(function(){return k})},function(k){return Qe.resolve(S()).then(function(){return Kn(k)})})},timeout:function(S,k){var I=this;return S<1/0?new Qe(function(L,W){var X=setTimeout(function(){return W(new Oe.Timeout(k))},S);I.then(L,W).finally(clearTimeout.bind(null,X))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(Qe.prototype,Symbol.toStringTag,"Dexie.Promise"),jn.env=su(),p(Qe,{all:function(){var S=Y.apply(null,arguments).map(Si);return new Qe(function(k,I){S.length===0&&k([]);var L=S.length;S.forEach(function(W,X){return Qe.resolve(W).then(function(re){S[X]=re,--L||k(S)},I)})})},resolve:function(S){return S instanceof Qe?S:S&&typeof S.then=="function"?new Qe(function(k,I){S.then(k,I)}):new Qe(Wt,!0,S)},reject:Kn,race:function(){var S=Y.apply(null,arguments).map(Si);return new Qe(function(k,I){S.map(function(L){return Qe.resolve(L).then(k,I)})})},PSD:{get:function(){return nt},set:function(S){return nt=S}},totalEchoes:{get:function(){return Jl}},newPSD:Po,usePSD:Li,scheduler:{get:function(){return kn},set:function(S){kn=S}},rejectionMapper:{get:function(){return wr},set:function(S){wr=S}},follow:function(S,k){return new Qe(function(I,L){return Po(function(W,X){var re=nt;re.unhandleds=[],re.onunhandled=X,re.finalize=$t(function(){var le,he=this;le=function(){he.unhandleds.length===0?W():X(he.unhandleds[0])},Nr.push(function me(){le(),Nr.splice(Nr.indexOf(me),1)}),++Br,kn(function(){--Br==0&&Yt()},[])},re.finalize),S()},k,I,L)})}}),Ft&&(Ft.allSettled&&v(Qe,"allSettled",function(){var S=Y.apply(null,arguments).map(Si);return new Qe(function(k){S.length===0&&k([]);var I=S.length,L=new Array(I);S.forEach(function(W,X){return Qe.resolve(W).then(function(re){return L[X]={status:"fulfilled",value:re}},function(re){return L[X]={status:"rejected",reason:re}}).then(function(){return--I||k(L)})})})}),Ft.any&&typeof AggregateError<"u"&&v(Qe,"any",function(){var S=Y.apply(null,arguments).map(Si);return new Qe(function(k,I){S.length===0&&I(new AggregateError([]));var L=S.length,W=new Array(L);S.forEach(function(X,re){return Qe.resolve(X).then(function(le){return k(le)},function(le){W[re]=le,--L||I(new AggregateError(W))})})})}),Ft.withResolvers&&(Qe.withResolvers=Ft.withResolvers));var qt={awaits:0,echoes:0,id:0},il=0,Jo=[],Pi=0,Jl=0,ec=0;function Po(S,k,I,L){var W=nt,X=Object.create(W);return X.parent=W,X.ref=0,X.global=!1,X.id=++ec,jn.env,X.env=un?{Promise:Qe,PromiseProp:{value:Qe,configurable:!0,writable:!0},all:Qe.all,race:Qe.race,allSettled:Qe.allSettled,any:Qe.any,resolve:Qe.resolve,reject:Qe.reject}:{},k&&l(X,k),++W.ref,X.finalize=function(){--this.parent.ref||this.parent.finalize()},L=Li(X,S,I,L),X.ref===0&&X.finalize(),L}function ei(){return qt.id||(qt.id=++il),++qt.awaits,qt.echoes+=an,qt.id}function co(){return!!qt.awaits&&(--qt.awaits==0&&(qt.id=0),qt.echoes=qt.awaits*an,!0)}function Si(S){return qt.echoes&&S&&S.constructor===Ft?(ei(),S.then(function(k){return co(),k},function(k){return co(),cr(k)})):S}function Lo(){var S=Jo[Jo.length-1];Jo.pop(),zn(S,!1)}function zn(S,k){var I,L=nt;(k?!qt.echoes||Pi++&&S===nt:!Pi||--Pi&&S===nt)||queueMicrotask(k?(function(W){++Jl,qt.echoes&&--qt.echoes!=0||(qt.echoes=qt.awaits=qt.id=0),Jo.push(nt),zn(W,!0)}).bind(null,S):Lo),S!==nt&&(nt=S,L===jn&&(jn.env=su()),un&&(I=jn.env.Promise,k=S.env,(L.global||S.global)&&(Object.defineProperty(i,"Promise",k.PromiseProp),I.all=k.all,I.race=k.race,I.resolve=k.resolve,I.reject=k.reject,k.allSettled&&(I.allSettled=k.allSettled),k.any&&(I.any=k.any))))}function su(){var S=i.Promise;return un?{Promise:S,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:S.all,race:S.race,allSettled:S.allSettled,any:S.any,resolve:S.resolve,reject:S.reject}:{}}function Li(S,k,I,L,W){var X=nt;try{return zn(S,!0),k(I,L,W)}finally{zn(X,!1)}}function Vi(S,k,I,L){return typeof S!="function"?S:function(){var W=nt;I&&ei(),zn(k,!0);try{return S.apply(this,arguments)}finally{zn(W,!1),L&&queueMicrotask(co)}}}function cs(S){Promise===Ft&&qt.echoes===0?Pi===0?S():enqueueNativeMicroTask(S):setTimeout(S,0)}(""+ki).indexOf("[native code]")===-1&&(ei=co=tt);var cr=Qe.reject,Ls="",Vo="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Xd="String expected.",xi=[],Ei="__dbnames",Hr="readonly",ba="readwrite";function Vs(S,k){return S?k?function(){return S.apply(this,arguments)&&k.apply(this,arguments)}:S:k}var js={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function wa(S){return typeof S!="string"||/\./.test(S)?function(k){return k}:function(k){return k[S]===void 0&&S in k&&delete(k=F(k))[S],k}}function tc(){throw Oe.Type()}function Xt(S,k){try{var I=nc(S),L=nc(k);if(I!==L)return I==="Array"?1:L==="Array"?-1:I==="binary"?1:L==="binary"?-1:I==="string"?1:L==="string"?-1:I==="Date"?1:L!=="Date"?NaN:-1;switch(I){case"number":case"Date":case"string":return k<S?1:S<k?-1:0;case"binary":return function(W,X){for(var re=W.length,le=X.length,he=re<le?re:le,me=0;me<he;++me)if(W[me]!==X[me])return W[me]<X[me]?-1:1;return re===le?0:re<le?-1:1}(vo(S),vo(k));case"Array":return function(W,X){for(var re=W.length,le=X.length,he=re<le?re:le,me=0;me<he;++me){var be=Xt(W[me],X[me]);if(be!==0)return be}return re===le?0:re<le?-1:1}(S,k)}}catch{}return NaN}function nc(S){var k=typeof S;return k!="object"?k:ArrayBuffer.isView(S)?"binary":(S=oe(S),S==="ArrayBuffer"?"binary":S)}function vo(S){return S instanceof Uint8Array?S:ArrayBuffer.isView(S)?new Uint8Array(S.buffer,S.byteOffset,S.byteLength):new Uint8Array(S)}var au=(Wn.prototype._trans=function(S,k,I){var L=this._tx||nt.trans,W=this.name,X=Ut&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(S==="readonly"?"read":"write"," ").concat(this.name));function re(me,be,de){if(!de.schema[W])throw new Oe.NotFound("Table "+W+" not part of transaction");return k(de.idbtrans,de)}var le=Qn();try{var he=L&&L.db._novip===this.db._novip?L===nt.trans?L._promise(S,re,I):Po(function(){return L._promise(S,re,I)},{trans:L,transless:nt.transless||nt}):function me(be,de,Ce,fe){if(be.idbdb&&(be._state.openComplete||nt.letThrough||be._vip)){var ye=be._createTransaction(de,Ce,be._dbSchema);try{ye.create(),be._state.PR1398_maxLoop=3}catch(Se){return Se.name===De.InvalidState&&be.isOpen()&&0<--be._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),be.close({disableAutoOpen:!1}),be.open().then(function(){return me(be,de,Ce,fe)})):cr(Se)}return ye._promise(de,function(Se,ge){return Po(function(){return nt.trans=ye,fe(Se,ge,ye)})}).then(function(Se){if(de==="readwrite")try{ye.idbtrans.commit()}catch{}return de==="readonly"?Se:ye._completion.then(function(){return Se})})}if(be._state.openComplete)return cr(new Oe.DatabaseClosed(be._state.dbOpenError));if(!be._state.isBeingOpened){if(!be._state.autoOpen)return cr(new Oe.DatabaseClosed);be.open().catch(tt)}return be._state.dbReadyPromise.then(function(){return me(be,de,Ce,fe)})}(this.db,S,[this.name],re);return X&&(he._consoleTask=X,he=he.catch(function(me){return console.trace(me),cr(me)})),he}finally{le&&Gn()}},Wn.prototype.get=function(S,k){var I=this;return S&&S.constructor===Object?this.where(S).first(k):S==null?cr(new Oe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(L){return I.core.get({trans:L,key:S}).then(function(W){return I.hook.reading.fire(W)})}).then(k)},Wn.prototype.where=function(S){if(typeof S=="string")return new this.db.WhereClause(this,S);if(a(S))return new this.db.WhereClause(this,"[".concat(S.join("+"),"]"));var k=s(S);if(k.length===1)return this.where(k[0]).equals(S[k[0]]);var I=this.schema.indexes.concat(this.schema.primKey).filter(function(le){if(le.compound&&k.every(function(me){return 0<=le.keyPath.indexOf(me)})){for(var he=0;he<k.length;++he)if(k.indexOf(le.keyPath[he])===-1)return!1;return!0}return!1}).sort(function(le,he){return le.keyPath.length-he.keyPath.length})[0];if(I&&this.db._maxKey!==Ls){var X=I.keyPath.slice(0,k.length);return this.where(X).equals(X.map(function(he){return S[he]}))}!I&&Ut&&console.warn("The query ".concat(JSON.stringify(S)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(k.join("+"),"]"));var L=this.schema.idxByName;function W(le,he){return Xt(le,he)===0}var re=k.reduce(function(de,he){var me=de[0],be=de[1],de=L[he],Ce=S[he];return[me||de,me||!de?Vs(be,de&&de.multi?function(fe){return fe=$(fe,he),a(fe)&&fe.some(function(ye){return W(Ce,ye)})}:function(fe){return W(Ce,$(fe,he))}):be]},[null,null]),X=re[0],re=re[1];return X?this.where(X.name).equals(S[X.keyPath]).filter(re):I?this.filter(re):this.where(k).equals("")},Wn.prototype.filter=function(S){return this.toCollection().and(S)},Wn.prototype.count=function(S){return this.toCollection().count(S)},Wn.prototype.offset=function(S){return this.toCollection().offset(S)},Wn.prototype.limit=function(S){return this.toCollection().limit(S)},Wn.prototype.each=function(S){return this.toCollection().each(S)},Wn.prototype.toArray=function(S){return this.toCollection().toArray(S)},Wn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Wn.prototype.orderBy=function(S){return new this.db.Collection(new this.db.WhereClause(this,a(S)?"[".concat(S.join("+"),"]"):S))},Wn.prototype.reverse=function(){return this.toCollection().reverse()},Wn.prototype.mapToClass=function(S){var k,I=this.db,L=this.name;function W(){return k!==null&&k.apply(this,arguments)||this}(this.schema.mappedClass=S).prototype instanceof tc&&(function(he,me){if(typeof me!="function"&&me!==null)throw new TypeError("Class extends value "+String(me)+" is not a constructor or null");function be(){this.constructor=he}n(he,me),he.prototype=me===null?Object.create(me):(be.prototype=me.prototype,new be)}(W,k=S),Object.defineProperty(W.prototype,"db",{get:function(){return I},enumerable:!1,configurable:!0}),W.prototype.table=function(){return L},S=W);for(var X=new Set,re=S.prototype;re;re=u(re))Object.getOwnPropertyNames(re).forEach(function(he){return X.add(he)});function le(he){if(!he)return he;var me,be=Object.create(S.prototype);for(me in he)if(!X.has(me))try{be[me]=he[me]}catch{}return be}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=le,this.hook("reading",le),S},Wn.prototype.defineClass=function(){return this.mapToClass(function(S){l(this,S)})},Wn.prototype.add=function(S,k){var I=this,L=this.schema.primKey,W=L.auto,X=L.keyPath,re=S;return X&&W&&(re=wa(X)(S)),this._trans("readwrite",function(le){return I.core.mutate({trans:le,type:"add",keys:k!=null?[k]:null,values:[re]})}).then(function(le){return le.numFailures?Qe.reject(le.failures[0]):le.lastResult}).then(function(le){if(X)try{O(S,X,le)}catch{}return le})},Wn.prototype.update=function(S,k){return typeof S!="object"||a(S)?this.where(":id").equals(S).modify(k):(S=$(S,this.schema.primKey.keyPath),S===void 0?cr(new Oe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(S).modify(k))},Wn.prototype.put=function(S,k){var I=this,L=this.schema.primKey,W=L.auto,X=L.keyPath,re=S;return X&&W&&(re=wa(X)(S)),this._trans("readwrite",function(le){return I.core.mutate({trans:le,type:"put",values:[re],keys:k!=null?[k]:null})}).then(function(le){return le.numFailures?Qe.reject(le.failures[0]):le.lastResult}).then(function(le){if(X)try{O(S,X,le)}catch{}return le})},Wn.prototype.delete=function(S){var k=this;return this._trans("readwrite",function(I){return k.core.mutate({trans:I,type:"delete",keys:[S]})}).then(function(I){return I.numFailures?Qe.reject(I.failures[0]):void 0})},Wn.prototype.clear=function(){var S=this;return this._trans("readwrite",function(k){return S.core.mutate({trans:k,type:"deleteRange",range:js})}).then(function(k){return k.numFailures?Qe.reject(k.failures[0]):void 0})},Wn.prototype.bulkGet=function(S){var k=this;return this._trans("readonly",function(I){return k.core.getMany({keys:S,trans:I}).then(function(L){return L.map(function(W){return k.hook.reading.fire(W)})})})},Wn.prototype.bulkAdd=function(S,k,I){var L=this,W=Array.isArray(k)?k:void 0,X=(I=I||(W?void 0:k))?I.allKeys:void 0;return this._trans("readwrite",function(re){var me=L.schema.primKey,le=me.auto,me=me.keyPath;if(me&&W)throw new Oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(W&&W.length!==S.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var he=S.length,me=me&&le?S.map(wa(me)):S;return L.core.mutate({trans:re,type:"add",keys:W,values:me,wantResults:X}).then(function(ye){var de=ye.numFailures,Ce=ye.results,fe=ye.lastResult,ye=ye.failures;if(de===0)return X?Ce:fe;throw new ve("".concat(L.name,".bulkAdd(): ").concat(de," of ").concat(he," operations failed"),ye)})})},Wn.prototype.bulkPut=function(S,k,I){var L=this,W=Array.isArray(k)?k:void 0,X=(I=I||(W?void 0:k))?I.allKeys:void 0;return this._trans("readwrite",function(re){var me=L.schema.primKey,le=me.auto,me=me.keyPath;if(me&&W)throw new Oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(W&&W.length!==S.length)throw new Oe.InvalidArgument("Arguments objects and keys must have the same length");var he=S.length,me=me&&le?S.map(wa(me)):S;return L.core.mutate({trans:re,type:"put",keys:W,values:me,wantResults:X}).then(function(ye){var de=ye.numFailures,Ce=ye.results,fe=ye.lastResult,ye=ye.failures;if(de===0)return X?Ce:fe;throw new ve("".concat(L.name,".bulkPut(): ").concat(de," of ").concat(he," operations failed"),ye)})})},Wn.prototype.bulkUpdate=function(S){var k=this,I=this.core,L=S.map(function(re){return re.key}),W=S.map(function(re){return re.changes}),X=[];return this._trans("readwrite",function(re){return I.getMany({trans:re,keys:L,cache:"clone"}).then(function(le){var he=[],me=[];S.forEach(function(de,Ce){var fe=de.key,ye=de.changes,Se=le[Ce];if(Se){for(var ge=0,Te=Object.keys(ye);ge<Te.length;ge++){var Me=Te[ge],Ie=ye[Me];if(Me===k.schema.primKey.keyPath){if(Xt(Ie,fe)!==0)throw new Oe.Constraint("Cannot update primary key in bulkUpdate()")}else O(Se,Me,Ie)}X.push(Ce),he.push(fe),me.push(Se)}});var be=he.length;return I.mutate({trans:re,type:"put",keys:he,values:me,updates:{keys:L,changeSpecs:W}}).then(function(de){var Ce=de.numFailures,fe=de.failures;if(Ce===0)return be;for(var ye=0,Se=Object.keys(fe);ye<Se.length;ye++){var ge,Te=Se[ye],Me=X[Number(Te)];Me!=null&&(ge=fe[Te],delete fe[Te],fe[Me]=ge)}throw new ve("".concat(k.name,".bulkUpdate(): ").concat(Ce," of ").concat(be," operations failed"),fe)})})})},Wn.prototype.bulkDelete=function(S){var k=this,I=S.length;return this._trans("readwrite",function(L){return k.core.mutate({trans:L,type:"delete",keys:S})}).then(function(re){var W=re.numFailures,X=re.lastResult,re=re.failures;if(W===0)return X;throw new ve("".concat(k.name,".bulkDelete(): ").concat(W," of ").concat(I," operations failed"),re)})},Wn);function Wn(){}function Bs(S){function k(re,le){if(le){for(var he=arguments.length,me=new Array(he-1);--he;)me[he-1]=arguments[he];return I[re].subscribe.apply(null,me),S}if(typeof re=="string")return I[re]}var I={};k.addEventType=X;for(var L=1,W=arguments.length;L<W;++L)X(arguments[L]);return k;function X(re,le,he){if(typeof re!="object"){var me;le=le||Jt;var be={subscribers:[],fire:he=he||tt,subscribe:function(de){be.subscribers.indexOf(de)===-1&&(be.subscribers.push(de),be.fire=le(be.fire,de))},unsubscribe:function(de){be.subscribers=be.subscribers.filter(function(Ce){return Ce!==de}),be.fire=be.subscribers.reduce(le,he)}};return I[re]=k[re]=be}s(me=re).forEach(function(de){var Ce=me[de];if(a(Ce))X(de,me[de][0],me[de][1]);else{if(Ce!=="asap")throw new Oe.InvalidArgument("Invalid event config");var fe=X(de,mn,function(){for(var ye=arguments.length,Se=new Array(ye);ye--;)Se[ye]=arguments[ye];fe.subscribers.forEach(function(ge){V(function(){ge.apply(null,Se)})})})}})}}function Ca(S,k){return b(k).from({prototype:S}),k}function ji(S,k){return!(S.filter||S.algorithm||S.or)&&(k?S.justLimit:!S.replayFilter)}function Qd(S,k){S.filter=Vs(S.filter,k)}function Sr(S,k,I){var L=S.replayFilter;S.replayFilter=L?function(){return Vs(L(),k())}:k,S.justLimit=I&&!L}function bo(S,k){if(S.isPrimKey)return k.primaryKey;var I=k.getIndexByKeyPath(S.index);if(!I)throw new Oe.Schema("KeyPath "+S.index+" on object store "+k.name+" is not indexed");return I}function sl(S,k,I){var L=bo(S,k.schema);return k.openCursor({trans:I,values:!S.keysOnly,reverse:S.dir==="prev",unique:!!S.unique,query:{index:L,range:S.range}})}function us(S,k,I,L){var W=S.replayFilter?Vs(S.filter,S.replayFilter()):S.filter;if(S.or){var X={},re=function(le,he,me){var be,de;W&&!W(he,me,function(Ce){return he.stop(Ce)},function(Ce){return he.fail(Ce)})||((de=""+(be=he.primaryKey))=="[object ArrayBuffer]"&&(de=""+new Uint8Array(be)),h(X,de)||(X[de]=!0,k(le,he,me)))};return Promise.all([S.or._iterate(re,I),$s(sl(S,L,I),S.algorithm,re,!S.keysOnly&&S.valueMapper)])}return $s(sl(S,L,I),Vs(S.algorithm,W),k,!S.keysOnly&&S.valueMapper)}function $s(S,k,I,L){var W=mt(L?function(X,re,le){return I(L(X),re,le)}:I);return S.then(function(X){if(X)return X.start(function(){var re=function(){return X.continue()};k&&!k(X,function(le){return re=le},function(le){X.stop(le),re=tt},function(le){X.fail(le),re=tt})||W(X.value,X,function(le){return re=le}),re()})})}var An=(al.prototype.execute=function(S){var k=this["@@propmod"];if(k.add!==void 0){var I=k.add;if(a(I))return o(o([],a(S)?S:[],!0),I).sort();if(typeof I=="number")return(Number(S)||0)+I;if(typeof I=="bigint")try{return BigInt(S)+I}catch{return BigInt(0)+I}throw new TypeError("Invalid term ".concat(I))}if(k.remove!==void 0){var L=k.remove;if(a(L))return a(S)?S.filter(function(W){return!L.includes(W)}).sort():[];if(typeof L=="number")return Number(S)-L;if(typeof L=="bigint")try{return BigInt(S)-L}catch{return BigInt(0)-L}throw new TypeError("Invalid subtrahend ".concat(L))}return I=(I=k.replacePrefix)===null||I===void 0?void 0:I[0],I&&typeof S=="string"&&S.startsWith(I)?k.replacePrefix[1]+S.substring(I.length):S},al);function al(S){this["@@propmod"]=S}var Bi=(en.prototype._read=function(S,k){var I=this._ctx;return I.error?I.table._trans(null,cr.bind(null,I.error)):I.table._trans("readonly",S).then(k)},en.prototype._write=function(S){var k=this._ctx;return k.error?k.table._trans(null,cr.bind(null,k.error)):k.table._trans("readwrite",S,"locked")},en.prototype._addAlgorithm=function(S){var k=this._ctx;k.algorithm=Vs(k.algorithm,S)},en.prototype._iterate=function(S,k){return us(this._ctx,S,k,this._ctx.table.core)},en.prototype.clone=function(S){var k=Object.create(this.constructor.prototype),I=Object.create(this._ctx);return S&&l(I,S),k._ctx=I,k},en.prototype.raw=function(){return this._ctx.valueMapper=null,this},en.prototype.each=function(S){var k=this._ctx;return this._read(function(I){return us(k,S,I,k.table.core)})},en.prototype.count=function(S){var k=this;return this._read(function(I){var L=k._ctx,W=L.table.core;if(ji(L,!0))return W.count({trans:I,query:{index:bo(L,W.schema),range:L.range}}).then(function(re){return Math.min(re,L.limit)});var X=0;return us(L,function(){return++X,!1},I,W).then(function(){return X})}).then(S)},en.prototype.sortBy=function(S,k){var I=S.split(".").reverse(),L=I[0],W=I.length-1;function X(he,me){return me?X(he[I[me]],me-1):he[L]}var re=this._ctx.dir==="next"?1:-1;function le(he,me){return Xt(X(he,W),X(me,W))*re}return this.toArray(function(he){return he.sort(le)}).then(k)},en.prototype.toArray=function(S){var k=this;return this._read(function(I){var L=k._ctx;if(L.dir==="next"&&ji(L,!0)&&0<L.limit){var W=L.valueMapper,X=bo(L,L.table.core.schema);return L.table.core.query({trans:I,limit:L.limit,values:!0,query:{index:X,range:L.range}}).then(function(le){return le=le.result,W?le.map(W):le})}var re=[];return us(L,function(le){return re.push(le)},I,L.table.core).then(function(){return re})},S)},en.prototype.offset=function(S){var k=this._ctx;return S<=0||(k.offset+=S,ji(k)?Sr(k,function(){var I=S;return function(L,W){return I===0||(I===1?--I:W(function(){L.advance(I),I=0}),!1)}}):Sr(k,function(){var I=S;return function(){return--I<0}})),this},en.prototype.limit=function(S){return this._ctx.limit=Math.min(this._ctx.limit,S),Sr(this._ctx,function(){var k=S;return function(I,L,W){return--k<=0&&L(W),0<=k}},!0),this},en.prototype.until=function(S,k){return Qd(this._ctx,function(I,L,W){return!S(I.value)||(L(W),k)}),this},en.prototype.first=function(S){return this.limit(1).toArray(function(k){return k[0]}).then(S)},en.prototype.last=function(S){return this.reverse().first(S)},en.prototype.filter=function(S){var k;return Qd(this._ctx,function(I){return S(I.value)}),(k=this._ctx).isMatch=Vs(k.isMatch,S),this},en.prototype.and=function(S){return this.filter(S)},en.prototype.or=function(S){return new this.db.WhereClause(this._ctx.table,S,this)},en.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},en.prototype.desc=function(){return this.reverse()},en.prototype.eachKey=function(S){var k=this._ctx;return k.keysOnly=!k.isMatch,this.each(function(I,L){S(L.key,L)})},en.prototype.eachUniqueKey=function(S){return this._ctx.unique="unique",this.eachKey(S)},en.prototype.eachPrimaryKey=function(S){var k=this._ctx;return k.keysOnly=!k.isMatch,this.each(function(I,L){S(L.primaryKey,L)})},en.prototype.keys=function(S){var k=this._ctx;k.keysOnly=!k.isMatch;var I=[];return this.each(function(L,W){I.push(W.key)}).then(function(){return I}).then(S)},en.prototype.primaryKeys=function(S){var k=this._ctx;if(k.dir==="next"&&ji(k,!0)&&0<k.limit)return this._read(function(L){var W=bo(k,k.table.core.schema);return k.table.core.query({trans:L,values:!1,limit:k.limit,query:{index:W,range:k.range}})}).then(function(L){return L.result}).then(S);k.keysOnly=!k.isMatch;var I=[];return this.each(function(L,W){I.push(W.primaryKey)}).then(function(){return I}).then(S)},en.prototype.uniqueKeys=function(S){return this._ctx.unique="unique",this.keys(S)},en.prototype.firstKey=function(S){return this.limit(1).keys(function(k){return k[0]}).then(S)},en.prototype.lastKey=function(S){return this.reverse().firstKey(S)},en.prototype.distinct=function(){var S=this._ctx,S=S.index&&S.table.schema.idxByName[S.index];if(!S||!S.multi)return this;var k={};return Qd(this._ctx,function(W){var L=W.primaryKey.toString(),W=h(k,L);return k[L]=!0,!W}),this},en.prototype.modify=function(S){var k=this,I=this._ctx;return this._write(function(L){var W,X,re;re=typeof S=="function"?S:(W=s(S),X=W.length,function(ge){for(var Te=!1,Me=0;Me<X;++Me){var Ie=W[Me],Ve=S[Ie],Ke=$(ge,Ie);Ve instanceof An?(O(ge,Ie,Ve.execute(Ke)),Te=!0):Ke!==Ve&&(O(ge,Ie,Ve),Te=!0)}return Te});var le=I.table.core,de=le.schema.primaryKey,he=de.outbound,me=de.extractKey,be=200,de=k.db._options.modifyChunkSize;de&&(be=typeof de=="object"?de[le.name]||de["*"]||200:de);function Ce(ge,Ie){var Me=Ie.failures,Ie=Ie.numFailures;ye+=ge-Ie;for(var Ve=0,Ke=s(Me);Ve<Ke.length;Ve++){var Je=Ke[Ve];fe.push(Me[Je])}}var fe=[],ye=0,Se=[];return k.clone().primaryKeys().then(function(ge){function Te(Ie){var Ve=Math.min(be,ge.length-Ie);return le.getMany({trans:L,keys:ge.slice(Ie,Ie+Ve),cache:"immutable"}).then(function(Ke){for(var Je=[],qe=[],Xe=he?[]:null,et=[],Ge=0;Ge<Ve;++Ge){var ot=Ke[Ge],yt={value:F(ot),primKey:ge[Ie+Ge]};re.call(yt,yt.value,yt)!==!1&&(yt.value==null?et.push(ge[Ie+Ge]):he||Xt(me(ot),me(yt.value))===0?(qe.push(yt.value),he&&Xe.push(ge[Ie+Ge])):(et.push(ge[Ie+Ge]),Je.push(yt.value)))}return Promise.resolve(0<Je.length&&le.mutate({trans:L,type:"add",values:Je}).then(function(Et){for(var jt in Et.failures)et.splice(parseInt(jt),1);Ce(Je.length,Et)})).then(function(){return(0<qe.length||Me&&typeof S=="object")&&le.mutate({trans:L,type:"put",keys:Xe,values:qe,criteria:Me,changeSpec:typeof S!="function"&&S,isAdditionalChunk:0<Ie}).then(function(Et){return Ce(qe.length,Et)})}).then(function(){return(0<et.length||Me&&S===lu)&&le.mutate({trans:L,type:"delete",keys:et,criteria:Me,isAdditionalChunk:0<Ie}).then(function(Et){return Ce(et.length,Et)})}).then(function(){return ge.length>Ie+Ve&&Te(Ie+be)})})}var Me=ji(I)&&I.limit===1/0&&(typeof S!="function"||S===lu)&&{index:I.index,range:I.range};return Te(0).then(function(){if(0<fe.length)throw new ae("Error modifying one or more objects",fe,ye,Se);return ge.length})})})},en.prototype.delete=function(){var S=this._ctx,k=S.range;return ji(S)&&(S.isPrimKey||k.type===3)?this._write(function(I){var L=S.table.core.schema.primaryKey,W=k;return S.table.core.count({trans:I,query:{index:L,range:W}}).then(function(X){return S.table.core.mutate({trans:I,type:"deleteRange",range:W}).then(function(re){var le=re.failures;if(re.lastResult,re.results,re=re.numFailures,re)throw new ae("Could not delete some values",Object.keys(le).map(function(he){return le[he]}),X-re);return X-re})})}):this.modify(lu)},en);function en(){}var lu=function(S,k){return k.value=null};function Zd(S,k){return S<k?-1:S===k?0:1}function Jd(S,k){return k<S?-1:S===k?0:1}function jo(S,k,I){return S=S instanceof Hs?new S.Collection(S):S,S._ctx.error=new(I||TypeError)(k),S}function ll(S){return new S.Collection(S,function(){return _i("")}).limit(0)}function Sa(S,k,I,L){var W,X,re,le,he,me,be,de=I.length;if(!I.every(function(ye){return typeof ye=="string"}))return jo(S,Xd);function Ce(ye){W=ye==="next"?function(ge){return ge.toUpperCase()}:function(ge){return ge.toLowerCase()},X=ye==="next"?function(ge){return ge.toLowerCase()}:function(ge){return ge.toUpperCase()},re=ye==="next"?Zd:Jd;var Se=I.map(function(ge){return{lower:X(ge),upper:W(ge)}}).sort(function(ge,Te){return re(ge.lower,Te.lower)});le=Se.map(function(ge){return ge.upper}),he=Se.map(function(ge){return ge.lower}),be=(me=ye)==="next"?"":L}Ce("next"),S=new S.Collection(S,function(){return wo(le[0],he[de-1]+L)}),S._ondirectionchange=function(ye){Ce(ye)};var fe=0;return S._addAlgorithm(function(ye,Se,ge){var Te=ye.key;if(typeof Te!="string")return!1;var Me=X(Te);if(k(Me,he,fe))return!0;for(var Ie=null,Ve=fe;Ve<de;++Ve){var Ke=function(Je,qe,Xe,et,Ge,ot){for(var yt=Math.min(Je.length,et.length),Et=-1,jt=0;jt<yt;++jt){var Bo=qe[jt];if(Bo!==et[jt])return Ge(Je[jt],Xe[jt])<0?Je.substr(0,jt)+Xe[jt]+Xe.substr(jt+1):Ge(Je[jt],et[jt])<0?Je.substr(0,jt)+et[jt]+Xe.substr(jt+1):0<=Et?Je.substr(0,Et)+qe[Et]+Xe.substr(Et+1):null;Ge(Je[jt],Bo)<0&&(Et=jt)}return yt<et.length&&ot==="next"?Je+Xe.substr(Je.length):yt<Je.length&&ot==="prev"?Je.substr(0,Xe.length):Et<0?null:Je.substr(0,Et)+et[Et]+Xe.substr(Et+1)}(Te,Me,le[Ve],he[Ve],re,me);Ke===null&&Ie===null?fe=Ve+1:(Ie===null||0<re(Ie,Ke))&&(Ie=Ke)}return Se(Ie!==null?function(){ye.continue(Ie+be)}:ge),!1}),S}function wo(S,k,I,L){return{type:2,lower:S,upper:k,lowerOpen:I,upperOpen:L}}function _i(S){return{type:1,lower:S,upper:S}}var Hs=(Object.defineProperty(Zn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Zn.prototype.between=function(S,k,I,L){I=I!==!1,L=L===!0;try{return 0<this._cmp(S,k)||this._cmp(S,k)===0&&(I||L)&&(!I||!L)?ll(this):new this.Collection(this,function(){return wo(S,k,!I,!L)})}catch{return jo(this,Vo)}},Zn.prototype.equals=function(S){return S==null?jo(this,Vo):new this.Collection(this,function(){return _i(S)})},Zn.prototype.above=function(S){return S==null?jo(this,Vo):new this.Collection(this,function(){return wo(S,void 0,!0)})},Zn.prototype.aboveOrEqual=function(S){return S==null?jo(this,Vo):new this.Collection(this,function(){return wo(S,void 0,!1)})},Zn.prototype.below=function(S){return S==null?jo(this,Vo):new this.Collection(this,function(){return wo(void 0,S,!1,!0)})},Zn.prototype.belowOrEqual=function(S){return S==null?jo(this,Vo):new this.Collection(this,function(){return wo(void 0,S)})},Zn.prototype.startsWith=function(S){return typeof S!="string"?jo(this,Xd):this.between(S,S+Ls,!0,!0)},Zn.prototype.startsWithIgnoreCase=function(S){return S===""?this.startsWith(S):Sa(this,function(k,I){return k.indexOf(I[0])===0},[S],Ls)},Zn.prototype.equalsIgnoreCase=function(S){return Sa(this,function(k,I){return k===I[0]},[S],"")},Zn.prototype.anyOfIgnoreCase=function(){var S=Y.apply(J,arguments);return S.length===0?ll(this):Sa(this,function(k,I){return I.indexOf(k)!==-1},S,"")},Zn.prototype.startsWithAnyOfIgnoreCase=function(){var S=Y.apply(J,arguments);return S.length===0?ll(this):Sa(this,function(k,I){return I.some(function(L){return k.indexOf(L)===0})},S,Ls)},Zn.prototype.anyOf=function(){var S=this,k=Y.apply(J,arguments),I=this._cmp;try{k.sort(I)}catch{return jo(this,Vo)}if(k.length===0)return ll(this);var L=new this.Collection(this,function(){return wo(k[0],k[k.length-1])});L._ondirectionchange=function(X){I=X==="next"?S._ascending:S._descending,k.sort(I)};var W=0;return L._addAlgorithm(function(X,re,le){for(var he=X.key;0<I(he,k[W]);)if(++W===k.length)return re(le),!1;return I(he,k[W])===0||(re(function(){X.continue(k[W])}),!1)}),L},Zn.prototype.notEqual=function(S){return this.inAnyRange([[-1/0,S],[S,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Zn.prototype.noneOf=function(){var S=Y.apply(J,arguments);if(S.length===0)return new this.Collection(this);try{S.sort(this._ascending)}catch{return jo(this,Vo)}var k=S.reduce(function(I,L){return I?I.concat([[I[I.length-1][1],L]]):[[-1/0,L]]},null);return k.push([S[S.length-1],this.db._maxKey]),this.inAnyRange(k,{includeLowers:!1,includeUppers:!1})},Zn.prototype.inAnyRange=function(Te,k){var I=this,L=this._cmp,W=this._ascending,X=this._descending,re=this._min,le=this._max;if(Te.length===0)return ll(this);if(!Te.every(function(Me){return Me[0]!==void 0&&Me[1]!==void 0&&W(Me[0],Me[1])<=0}))return jo(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Oe.InvalidArgument);var he=!k||k.includeLowers!==!1,me=k&&k.includeUppers===!0,be,de=W;function Ce(Me,Ie){return de(Me[0],Ie[0])}try{(be=Te.reduce(function(Me,Ie){for(var Ve=0,Ke=Me.length;Ve<Ke;++Ve){var Je=Me[Ve];if(L(Ie[0],Je[1])<0&&0<L(Ie[1],Je[0])){Je[0]=re(Je[0],Ie[0]),Je[1]=le(Je[1],Ie[1]);break}}return Ve===Ke&&Me.push(Ie),Me},[])).sort(Ce)}catch{return jo(this,Vo)}var fe=0,ye=me?function(Me){return 0<W(Me,be[fe][1])}:function(Me){return 0<=W(Me,be[fe][1])},Se=he?function(Me){return 0<X(Me,be[fe][0])}:function(Me){return 0<=X(Me,be[fe][0])},ge=ye,Te=new this.Collection(this,function(){return wo(be[0][0],be[be.length-1][1],!he,!me)});return Te._ondirectionchange=function(Me){de=Me==="next"?(ge=ye,W):(ge=Se,X),be.sort(Ce)},Te._addAlgorithm(function(Me,Ie,Ve){for(var Ke,Je=Me.key;ge(Je);)if(++fe===be.length)return Ie(Ve),!1;return!ye(Ke=Je)&&!Se(Ke)||(I._cmp(Je,be[fe][1])===0||I._cmp(Je,be[fe][0])===0||Ie(function(){de===W?Me.continue(be[fe][0]):Me.continue(be[fe][1])}),!1)}),Te},Zn.prototype.startsWithAnyOf=function(){var S=Y.apply(J,arguments);return S.every(function(k){return typeof k=="string"})?S.length===0?ll(this):this.inAnyRange(S.map(function(k){return[k,k+Ls]})):jo(this,"startsWithAnyOf() only works with strings")},Zn);function Zn(){}function ti(S){return mt(function(k){return ni(k),S(k.target.error),!1})}function ni(S){S.stopPropagation&&S.stopPropagation(),S.preventDefault&&S.preventDefault()}var cl="storagemutated",xa="x-storagemutated-1",Qr=Bs(null,cl),$i=(Co.prototype._lock=function(){return z(!nt.global),++this._reculock,this._reculock!==1||nt.global||(nt.lockOwnerFor=this),this},Co.prototype._unlock=function(){if(z(!nt.global),--this._reculock==0)for(nt.global||(nt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var S=this._blockedFuncs.shift();try{Li(S[1],S[0])}catch{}}return this},Co.prototype._locked=function(){return this._reculock&&nt.lockOwnerFor!==this},Co.prototype.create=function(S){var k=this;if(!this.mode)return this;var I=this.db.idbdb,L=this.db._state.dbOpenError;if(z(!this.idbtrans),!S&&!I)switch(L&&L.name){case"DatabaseClosedError":throw new Oe.DatabaseClosed(L);case"MissingAPIError":throw new Oe.MissingAPI(L.message,L);default:throw new Oe.OpenFailed(L)}if(!this.active)throw new Oe.TransactionInactive;return z(this._completion._state===null),(S=this.idbtrans=S||(this.db.core||I).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=mt(function(W){ni(W),k._reject(S.error)}),S.onabort=mt(function(W){ni(W),k.active&&k._reject(new Oe.Abort(S.error)),k.active=!1,k.on("abort").fire(W)}),S.oncomplete=mt(function(){k.active=!1,k._resolve(),"mutatedParts"in S&&Qr.storagemutated.fire(S.mutatedParts)}),this},Co.prototype._promise=function(S,k,I){var L=this;if(S==="readwrite"&&this.mode!=="readwrite")return cr(new Oe.ReadOnly("Transaction is readonly"));if(!this.active)return cr(new Oe.TransactionInactive);if(this._locked())return new Qe(function(X,re){L._blockedFuncs.push([function(){L._promise(S,k,I).then(X,re)},nt])});if(I)return Po(function(){var X=new Qe(function(re,le){L._lock();var he=k(re,le,L);he&&he.then&&he.then(re,le)});return X.finally(function(){return L._unlock()}),X._lib=!0,X});var W=new Qe(function(X,re){var le=k(X,re,L);le&&le.then&&le.then(X,re)});return W._lib=!0,W},Co.prototype._root=function(){return this.parent?this.parent._root():this},Co.prototype.waitFor=function(S){var k,I=this._root(),L=Qe.resolve(S);I._waitingFor?I._waitingFor=I._waitingFor.then(function(){return L}):(I._waitingFor=L,I._waitingQueue=[],k=I.idbtrans.objectStore(I.storeNames[0]),function X(){for(++I._spinCount;I._waitingQueue.length;)I._waitingQueue.shift()();I._waitingFor&&(k.get(-1/0).onsuccess=X)}());var W=I._waitingFor;return new Qe(function(X,re){L.then(function(le){return I._waitingQueue.push(mt(X.bind(null,le)))},function(le){return I._waitingQueue.push(mt(re.bind(null,le)))}).finally(function(){I._waitingFor===W&&(I._waitingFor=null)})})},Co.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Oe.Abort))},Co.prototype.table=function(S){var k=this._memoizedTables||(this._memoizedTables={});if(h(k,S))return k[S];var I=this.schema[S];if(!I)throw new Oe.NotFound("Table "+S+" not part of transaction");return I=new this.db.Table(S,I,this),I.core=this.db.core.table(S),k[S]=I},Co);function Co(){}function Hi(S,k,I,L,W,X,re){return{name:S,keyPath:k,unique:I,multi:L,auto:W,compound:X,src:(I&&!re?"&":"")+(L?"*":"")+(W?"++":"")+Ea(k)}}function Ea(S){return typeof S=="string"?S:S?"["+[].join.call(S,"+")+"]":""}function ds(S,k,I){return{name:S,primKey:k,indexes:I,mappedClass:null,idxByName:(L=function(W){return[W.name,W]},I.reduce(function(W,X,re){return re=L(X,re),re&&(W[re[0]]=re[1]),W},{}))};var L}var _a=function(S){try{return S.only([[]]),_a=function(){return[[]]},[[]]}catch{return _a=function(){return Ls},Ls}};function Fi(S){return S==null?function(){}:typeof S=="string"?(k=S).split(".").length===1?function(I){return I[k]}:function(I){return $(I,k)}:function(I){return $(I,S)};var k}function fs(S){return[].slice.call(S)}var ef=0;function xr(S){return S==null?":id":typeof S=="string"?S:"[".concat(S.join("+"),"]")}function Dn(S,k,he){function L(ge){if(ge.type===3)return null;if(ge.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var fe=ge.lower,ye=ge.upper,Se=ge.lowerOpen,ge=ge.upperOpen;return fe===void 0?ye===void 0?null:k.upperBound(ye,!!ge):ye===void 0?k.lowerBound(fe,!!Se):k.bound(fe,ye,!!Se,!!ge)}function W(Ce){var fe,ye=Ce.name;return{name:ye,schema:Ce,mutate:function(Se){var ge=Se.trans,Te=Se.type,Me=Se.keys,Ie=Se.values,Ve=Se.range;return new Promise(function(Ke,Je){Ke=mt(Ke);var qe=ge.objectStore(ye),Xe=qe.keyPath==null,et=Te==="put"||Te==="add";if(!et&&Te!=="delete"&&Te!=="deleteRange")throw new Error("Invalid operation type: "+Te);var Ge,ot=(Me||Ie||{length:1}).length;if(Me&&Ie&&Me.length!==Ie.length)throw new Error("Given keys array must have same length as given values array.");if(ot===0)return Ke({numFailures:0,failures:{},results:[],lastResult:void 0});function yt(So){++Bo,ni(So)}var Et=[],jt=[],Bo=0;if(Te==="deleteRange"){if(Ve.type===4)return Ke({numFailures:Bo,failures:jt,results:[],lastResult:void 0});Ve.type===3?Et.push(Ge=qe.clear()):Et.push(Ge=qe.delete(L(Ve)))}else{var Xe=et?Xe?[Ie,Me]:[Ie,null]:[Me,null],It=Xe[0],Ur=Xe[1];if(et)for(var Jr=0;Jr<ot;++Jr)Et.push(Ge=Ur&&Ur[Jr]!==void 0?qe[Te](It[Jr],Ur[Jr]):qe[Te](It[Jr])),Ge.onerror=yt;else for(Jr=0;Jr<ot;++Jr)Et.push(Ge=qe[Te](It[Jr])),Ge.onerror=yt}function Na(So){So=So.target.result,Et.forEach(function(Ys,hl){return Ys.error!=null&&(jt[hl]=Ys.error)}),Ke({numFailures:Bo,failures:jt,results:Te==="delete"?Me:Et.map(function(Ys){return Ys.result}),lastResult:So})}Ge.onerror=function(So){yt(So),Na(So)},Ge.onsuccess=Na})},getMany:function(Se){var ge=Se.trans,Te=Se.keys;return new Promise(function(Me,Ie){Me=mt(Me);for(var Ve,Ke=ge.objectStore(ye),Je=Te.length,qe=new Array(Je),Xe=0,et=0,Ge=function(Et){Et=Et.target,qe[Et._pos]=Et.result,++et===Xe&&Me(qe)},ot=ti(Ie),yt=0;yt<Je;++yt)Te[yt]!=null&&((Ve=Ke.get(Te[yt]))._pos=yt,Ve.onsuccess=Ge,Ve.onerror=ot,++Xe);Xe===0&&Me(qe)})},get:function(Se){var ge=Se.trans,Te=Se.key;return new Promise(function(Me,Ie){Me=mt(Me);var Ve=ge.objectStore(ye).get(Te);Ve.onsuccess=function(Ke){return Me(Ke.target.result)},Ve.onerror=ti(Ie)})},query:(fe=me,function(Se){return new Promise(function(ge,Te){ge=mt(ge);var Me,Ie,Ve,Xe=Se.trans,Ke=Se.values,Je=Se.limit,Ge=Se.query,qe=Je===1/0?void 0:Je,et=Ge.index,Ge=Ge.range,Xe=Xe.objectStore(ye),et=et.isPrimaryKey?Xe:Xe.index(et.name),Ge=L(Ge);if(Je===0)return ge({result:[]});fe?((qe=Ke?et.getAll(Ge,qe):et.getAllKeys(Ge,qe)).onsuccess=function(ot){return ge({result:ot.target.result})},qe.onerror=ti(Te)):(Me=0,Ie=!Ke&&"openKeyCursor"in et?et.openKeyCursor(Ge):et.openCursor(Ge),Ve=[],Ie.onsuccess=function(ot){var yt=Ie.result;return yt?(Ve.push(Ke?yt.value:yt.primaryKey),++Me===Je?ge({result:Ve}):void yt.continue()):ge({result:Ve})},Ie.onerror=ti(Te))})}),openCursor:function(Se){var ge=Se.trans,Te=Se.values,Me=Se.query,Ie=Se.reverse,Ve=Se.unique;return new Promise(function(Ke,Je){Ke=mt(Ke);var et=Me.index,qe=Me.range,Xe=ge.objectStore(ye),Xe=et.isPrimaryKey?Xe:Xe.index(et.name),et=Ie?Ve?"prevunique":"prev":Ve?"nextunique":"next",Ge=!Te&&"openKeyCursor"in Xe?Xe.openKeyCursor(L(qe),et):Xe.openCursor(L(qe),et);Ge.onerror=ti(Je),Ge.onsuccess=mt(function(ot){var yt,Et,jt,Bo,It=Ge.result;It?(It.___id=++ef,It.done=!1,yt=It.continue.bind(It),Et=(Et=It.continuePrimaryKey)&&Et.bind(It),jt=It.advance.bind(It),Bo=function(){throw new Error("Cursor not stopped")},It.trans=ge,It.stop=It.continue=It.continuePrimaryKey=It.advance=function(){throw new Error("Cursor not started")},It.fail=mt(Je),It.next=function(){var Ur=this,Jr=1;return this.start(function(){return Jr--?Ur.continue():Ur.stop()}).then(function(){return Ur})},It.start=function(Ur){function Jr(){if(Ge.result)try{Ur()}catch(So){It.fail(So)}else It.done=!0,It.start=function(){throw new Error("Cursor behind last entry")},It.stop()}var Na=new Promise(function(So,Ys){So=mt(So),Ge.onerror=ti(Ys),It.fail=Ys,It.stop=function(hl){It.stop=It.continue=It.continuePrimaryKey=It.advance=Bo,So(hl)}});return Ge.onsuccess=mt(function(So){Ge.onsuccess=Jr,Jr()}),It.continue=yt,It.continuePrimaryKey=Et,It.advance=jt,Jr(),Na},Ke(It)):Ke(null)},Je)})},count:function(Se){var ge=Se.query,Te=Se.trans,Me=ge.index,Ie=ge.range;return new Promise(function(Ve,Ke){var Je=Te.objectStore(ye),qe=Me.isPrimaryKey?Je:Je.index(Me.name),Je=L(Ie),qe=Je?qe.count(Je):qe.count();qe.onsuccess=mt(function(Xe){return Ve(Xe.target.result)}),qe.onerror=ti(Ke)})}}}var X,re,le,be=(re=he,le=fs((X=S).objectStoreNames),{schema:{name:X.name,tables:le.map(function(Ce){return re.objectStore(Ce)}).map(function(Ce){var fe=Ce.keyPath,ge=Ce.autoIncrement,ye=a(fe),Se={},ge={name:Ce.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:fe==null,compound:ye,keyPath:fe,autoIncrement:ge,unique:!0,extractKey:Fi(fe)},indexes:fs(Ce.indexNames).map(function(Te){return Ce.index(Te)}).map(function(Ve){var Me=Ve.name,Ie=Ve.unique,Ke=Ve.multiEntry,Ve=Ve.keyPath,Ke={name:Me,compound:a(Ve),keyPath:Ve,unique:Ie,multiEntry:Ke,extractKey:Fi(Ve)};return Se[xr(Ve)]=Ke}),getIndexByKeyPath:function(Te){return Se[xr(Te)]}};return Se[":id"]=ge.primaryKey,fe!=null&&(Se[xr(fe)]=ge.primaryKey),ge})},hasGetAll:0<le.length&&"getAll"in re.objectStore(le[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),he=be.schema,me=be.hasGetAll,be=he.tables.map(W),de={};return be.forEach(function(Ce){return de[Ce.name]=Ce}),{stack:"dbcore",transaction:S.transaction.bind(S),table:function(Ce){if(!de[Ce])throw new Error("Table '".concat(Ce,"' not found"));return de[Ce]},MIN_KEY:-1/0,MAX_KEY:_a(k),schema:he}}function cu(S,k,I,L){var W=I.IDBKeyRange;return I.indexedDB,{dbcore:(L=Dn(k,W,L),S.dbcore.reduce(function(X,re){return re=re.create,r(r({},X),re(X))},L))}}function Fs(S,L){var I=L.db,L=cu(S._middlewares,I,S._deps,L);S.core=L.dbcore,S.tables.forEach(function(W){var X=W.name;S.core.schema.tables.some(function(re){return re.name===X})&&(W.core=S.core.table(X),S[X]instanceof S.Table&&(S[X].core=W.core))})}function rc(S,k,I,L){I.forEach(function(W){var X=L[W];k.forEach(function(re){var le=function he(me,be){return E(me,be)||(me=u(me))&&he(me,be)}(re,W);(!le||"value"in le&&le.value===void 0)&&(re===S.Transaction.prototype||re instanceof S.Transaction?v(re,W,{get:function(){return this.table(W)},set:function(he){g(this,W,{value:he,writable:!0,configurable:!0,enumerable:!0})}}):re[W]=new S.Table(W,X))})})}function ul(S,k){k.forEach(function(I){for(var L in I)I[L]instanceof S.Table&&delete I[L]})}function uu(S,k){return S._cfg.version-k._cfg.version}function zs(S,k,I,L){var W=S._dbSchema;I.objectStoreNames.contains("$meta")&&!W.$meta&&(W.$meta=ds("$meta",ic("")[0],[]),S._storeNames.push("$meta"));var X=S._createTransaction("readwrite",S._storeNames,W);X.create(I),X._completion.catch(L);var re=X._reject.bind(X),le=nt.transless||nt;Po(function(){return nt.trans=X,nt.transless=le,k!==0?(Fs(S,I),me=k,((he=X).storeNames.includes("$meta")?he.table("$meta").get("version").then(function(be){return be??me}):Qe.resolve(me)).then(function(be){return Ce=be,fe=X,ye=I,Se=[],be=(de=S)._versions,ge=de._dbSchema=ka(0,de.idbdb,ye),(be=be.filter(function(Te){return Te._cfg.version>=Ce})).length!==0?(be.forEach(function(Te){Se.push(function(){var Me=ge,Ie=Te._cfg.dbschema;dl(de,Me,ye),dl(de,Ie,ye),ge=de._dbSchema=Ie;var Ve=ri(Me,Ie);Ve.add.forEach(function(et){du(ye,et[0],et[1].primKey,et[1].indexes)}),Ve.change.forEach(function(et){if(et.recreate)throw new Oe.Upgrade("Not yet support for changing primary key");var Ge=ye.objectStore(et.name);et.add.forEach(function(ot){return Us(Ge,ot)}),et.change.forEach(function(ot){Ge.deleteIndex(ot.name),Us(Ge,ot)}),et.del.forEach(function(ot){return Ge.deleteIndex(ot)})});var Ke=Te._cfg.contentUpgrade;if(Ke&&Te._cfg.version>Ce){Fs(de,ye),fe._memoizedTables={};var Je=R(Ie);Ve.del.forEach(function(et){Je[et]=Me[et]}),ul(de,[de.Transaction.prototype]),rc(de,[de.Transaction.prototype],s(Je),Je),fe.schema=Je;var qe,Xe=se(Ke);return Xe&&ei(),Ve=Qe.follow(function(){var et;(qe=Ke(fe))&&Xe&&(et=co.bind(null,null),qe.then(et,et))}),qe&&typeof qe.then=="function"?Qe.resolve(qe):Ve.then(function(){return qe})}}),Se.push(function(Me){var Ie,Ve,Ke=Te._cfg.dbschema;Ie=Ke,Ve=Me,[].slice.call(Ve.db.objectStoreNames).forEach(function(Je){return Ie[Je]==null&&Ve.db.deleteObjectStore(Je)}),ul(de,[de.Transaction.prototype]),rc(de,[de.Transaction.prototype],de._storeNames,de._dbSchema),fe.schema=de._dbSchema}),Se.push(function(Me){de.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(de.idbdb.version/10)===Te._cfg.version?(de.idbdb.deleteObjectStore("$meta"),delete de._dbSchema.$meta,de._storeNames=de._storeNames.filter(function(Ie){return Ie!=="$meta"})):Me.objectStore("$meta").put(Te._cfg.version,"version"))})}),function Te(){return Se.length?Qe.resolve(Se.shift()(fe.idbtrans)).then(Te):Qe.resolve()}().then(function(){Th(ge,ye)})):Qe.resolve();var de,Ce,fe,ye,Se,ge}).catch(re)):(s(W).forEach(function(be){du(I,be,W[be].primKey,W[be].indexes)}),Fs(S,I),void Qe.follow(function(){return S.on.populate.fire(X)}).catch(re));var he,me})}function oc(S,k){Th(S._dbSchema,k),k.db.version%10!=0||k.objectStoreNames.contains("$meta")||k.db.createObjectStore("$meta").add(Math.ceil(k.db.version/10-1),"version");var I=ka(0,S.idbdb,k);dl(S,S._dbSchema,k);for(var L=0,W=ri(I,S._dbSchema).change;L<W.length;L++){var X=function(re){if(re.change.length||re.recreate)return console.warn("Unable to patch indexes of table ".concat(re.name," because it has changes on the type of index or primary key.")),{value:void 0};var le=k.objectStore(re.name);re.add.forEach(function(he){Ut&&console.debug("Dexie upgrade patch: Creating missing index ".concat(re.name,".").concat(he.src)),Us(le,he)})}(W[L]);if(typeof X=="object")return X.value}}function ri(S,k){var I,L={del:[],add:[],change:[]};for(I in S)k[I]||L.del.push(I);for(I in k){var W=S[I],X=k[I];if(W){var re={name:I,def:X,recreate:!1,del:[],add:[],change:[]};if(""+(W.primKey.keyPath||"")!=""+(X.primKey.keyPath||"")||W.primKey.auto!==X.primKey.auto)re.recreate=!0,L.change.push(re);else{var le=W.idxByName,he=X.idxByName,me=void 0;for(me in le)he[me]||re.del.push(me);for(me in he){var be=le[me],de=he[me];be?be.src!==de.src&&re.change.push(de):re.add.push(de)}(0<re.del.length||0<re.add.length||0<re.change.length)&&L.change.push(re)}}else L.add.push([I,X])}return L}function du(S,k,I,L){var W=S.db.createObjectStore(k,I.keyPath?{keyPath:I.keyPath,autoIncrement:I.auto}:{autoIncrement:I.auto});return L.forEach(function(X){return Us(W,X)}),W}function Th(S,k){s(S).forEach(function(I){k.db.objectStoreNames.contains(I)||(Ut&&console.debug("Dexie: Creating missing table",I),du(k,I,S[I].primKey,S[I].indexes))})}function Us(S,k){S.createIndex(k.name,k.keyPath,{unique:k.unique,multiEntry:k.multi})}function ka(S,k,I){var L={};return P(k.objectStoreNames,0).forEach(function(W){for(var X=I.objectStore(W),re=Hi(Ea(me=X.keyPath),me||"",!0,!1,!!X.autoIncrement,me&&typeof me!="string",!0),le=[],he=0;he<X.indexNames.length;++he){var be=X.index(X.indexNames[he]),me=be.keyPath,be=Hi(be.name,me,!!be.unique,!!be.multiEntry,!1,me&&typeof me!="string",!1);le.push(be)}L[W]=ds(W,re,le)}),L}function dl(S,k,I){for(var L=I.db.objectStoreNames,W=0;W<L.length;++W){var X=L[W],re=I.objectStore(X);S._hasGetAll="getAll"in re;for(var le=0;le<re.indexNames.length;++le){var he=re.indexNames[le],me=re.index(he).keyPath,be=typeof me=="string"?me:"["+P(me).join("+")+"]";!k[X]||(me=k[X].idxByName[be])&&(me.name=he,delete k[X].idxByName[be],k[X].idxByName[he]=me)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(S._hasGetAll=!1)}function ic(S){return S.split(",").map(function(k,I){var L=(k=k.trim()).replace(/([&*]|\+\+)/g,""),W=/^\[/.test(L)?L.match(/^\[(.*)\]$/)[1].split("+"):L;return Hi(L,W||null,/\&/.test(k),/\*/.test(k),/\+\+/.test(k),a(W),I===0)})}var Ah=(Ta.prototype._parseStoresSpec=function(S,k){s(S).forEach(function(I){if(S[I]!==null){var L=ic(S[I]),W=L.shift();if(W.unique=!0,W.multi)throw new Oe.Schema("Primary key cannot be multi-valued");L.forEach(function(X){if(X.auto)throw new Oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!X.keyPath)throw new Oe.Schema("Index must have a name and cannot be an empty string")}),k[I]=ds(I,W,L)}})},Ta.prototype.stores=function(I){var k=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,I):I;var I=k._versions,L={},W={};return I.forEach(function(X){l(L,X._cfg.storesSource),W=X._cfg.dbschema={},X._parseStoresSpec(L,W)}),k._dbSchema=W,ul(k,[k._allTables,k,k.Transaction.prototype]),rc(k,[k._allTables,k,k.Transaction.prototype,this._cfg.tables],s(W),W),k._storeNames=s(W),this},Ta.prototype.upgrade=function(S){return this._cfg.contentUpgrade=Vt(this._cfg.contentUpgrade||tt,S),this},Ta);function Ta(){}function tf(S,k){var I=S._dbNamesDB;return I||(I=S._dbNamesDB=new Ws(Ei,{addons:[],indexedDB:S,IDBKeyRange:k})).version(1).stores({dbnames:"name"}),I.table("dbnames")}function sc(S){return S&&typeof S.databases=="function"}function Aa(S){return Po(function(){return nt.letThrough=!0,S()})}function fu(S){return!("from"in S)}var Fr=function(S,k){if(!this){var I=new Fr;return S&&"d"in S&&l(I,S),I}l(this,arguments.length?{d:1,from:S,to:1<arguments.length?k:S}:{d:0})};function Ra(S,k,I){var L=Xt(k,I);if(!isNaN(L)){if(0<L)throw RangeError();if(fu(S))return l(S,{from:k,to:I,d:1});var W=S.l,L=S.r;if(Xt(I,S.from)<0)return W?Ra(W,k,I):S.l={from:k,to:I,d:1,l:null,r:null},rf(S);if(0<Xt(k,S.to))return L?Ra(L,k,I):S.r={from:k,to:I,d:1,l:null,r:null},rf(S);Xt(k,S.from)<0&&(S.from=k,S.l=null,S.d=L?L.d+1:1),0<Xt(I,S.to)&&(S.to=I,S.r=null,S.d=S.l?S.l.d+1:1),I=!S.r,W&&!S.l&&hs(S,W),L&&I&&hs(S,L)}}function hs(S,k){fu(k)||function I(L,he){var X=he.from,re=he.to,le=he.l,he=he.r;Ra(L,X,re),le&&I(L,le),he&&I(L,he)}(S,k)}function nf(S,k){var I=Ma(k),L=I.next();if(L.done)return!1;for(var W=L.value,X=Ma(S),re=X.next(W.from),le=re.value;!L.done&&!re.done;){if(Xt(le.from,W.to)<=0&&0<=Xt(le.to,W.from))return!0;Xt(W.from,le.from)<0?W=(L=I.next(le.from)).value:le=(re=X.next(W.from)).value}return!1}function Ma(S){var k=fu(S)?null:{s:0,n:S};return{next:function(I){for(var L=0<arguments.length;k;)switch(k.s){case 0:if(k.s=1,L)for(;k.n.l&&Xt(I,k.n.from)<0;)k={up:k,n:k.n.l,s:1};else for(;k.n.l;)k={up:k,n:k.n.l,s:1};case 1:if(k.s=2,!L||Xt(I,k.n.to)<=0)return{value:k.n,done:!1};case 2:if(k.n.r){k.s=3,k={up:k,n:k.n.r,s:0};continue}case 3:k=k.up}return{done:!0}}}}function rf(S){var k,I,L=(((k=S.r)===null||k===void 0?void 0:k.d)||0)-(((I=S.l)===null||I===void 0?void 0:I.d)||0),W=1<L?"r":L<-1?"l":"";W&&(k=W=="r"?"l":"r",I=r({},S),L=S[W],S.from=L.from,S.to=L.to,S[W]=L[W],I[W]=L[k],(S[k]=I).d=hu(I)),S.d=hu(S)}function hu(I){var k=I.r,I=I.l;return(k?I?Math.max(k.d,I.d):k.d:I?I.d:0)+1}function zi(S,k){return s(k).forEach(function(I){S[I]?hs(S[I],k[I]):S[I]=function L(W){var X,re,le={};for(X in W)h(W,X)&&(re=W[X],le[X]=!re||typeof re!="object"||q.has(re.constructor)?re:L(re));return le}(k[I])}),S}function pu(S,k){return S.all||k.all||Object.keys(S).some(function(I){return k[I]&&nf(k[I],S[I])})}p(Fr.prototype,((ki={add:function(S){return hs(this,S),this},addKey:function(S){return Ra(this,S,S),this},addKeys:function(S){var k=this;return S.forEach(function(I){return Ra(k,I,I)}),this},hasKey:function(S){var k=Ma(this).next(S).value;return k&&Xt(k.from,S)<=0&&0<=Xt(k.to,S)}})[j]=function(){return Ma(this)},ki));var qs={},mu={},gu=!1;function Ia(S){zi(mu,S),gu||(gu=!0,setTimeout(function(){gu=!1,uo(mu,!(mu={}))},0))}function uo(S,k){k===void 0&&(k=!1);var I=new Set;if(S.all)for(var L=0,W=Object.values(qs);L<W.length;L++)of(re=W[L],S,I,k);else for(var X in S){var re,le=/^idb\:\/\/(.*)\/(.*)\//.exec(X);le&&(X=le[1],le=le[2],(re=qs["idb://".concat(X,"/").concat(le)])&&of(re,S,I,k))}I.forEach(function(he){return he()})}function of(S,k,I,L){for(var W=[],X=0,re=Object.entries(S.queries.query);X<re.length;X++){for(var le=re[X],he=le[0],me=[],be=0,de=le[1];be<de.length;be++){var Ce=de[be];pu(k,Ce.obsSet)?Ce.subscribers.forEach(function(ge){return I.add(ge)}):L&&me.push(Ce)}L&&W.push([he,me])}if(L)for(var fe=0,ye=W;fe<ye.length;fe++){var Se=ye[fe],he=Se[0],me=Se[1];S.queries.query[he]=me}}function Rh(S){var k=S._state,I=S._deps.indexedDB;if(k.isBeingOpened||S.idbdb)return k.dbReadyPromise.then(function(){return k.dbOpenError?cr(k.dbOpenError):S});k.isBeingOpened=!0,k.dbOpenError=null,k.openComplete=!1;var L=k.openCanceller,W=Math.round(10*S.verno),X=!1;function re(){if(k.openCanceller!==L)throw new Oe.DatabaseClosed("db.open() was cancelled")}function le(){return new Qe(function(Ce,fe){if(re(),!I)throw new Oe.MissingAPI;var ye=S.name,Se=k.autoSchema||!W?I.open(ye):I.open(ye,W);if(!Se)throw new Oe.MissingAPI;Se.onerror=ti(fe),Se.onblocked=mt(S._fireOnBlocked),Se.onupgradeneeded=mt(function(ge){var Te;be=Se.transaction,k.autoSchema&&!S._options.allowEmptyDB?(Se.onerror=ni,be.abort(),Se.result.close(),(Te=I.deleteDatabase(ye)).onsuccess=Te.onerror=mt(function(){fe(new Oe.NoSuchDatabase("Database ".concat(ye," doesnt exist")))})):(be.onerror=ti(fe),ge=ge.oldVersion>Math.pow(2,62)?0:ge.oldVersion,de=ge<1,S.idbdb=Se.result,X&&oc(S,be),zs(S,ge/10,be,fe))},fe),Se.onsuccess=mt(function(){be=null;var ge,Te,Me,Ie,Ve,Ke=S.idbdb=Se.result,Je=P(Ke.objectStoreNames);if(0<Je.length)try{var qe=Ke.transaction((Ie=Je).length===1?Ie[0]:Ie,"readonly");if(k.autoSchema)Te=Ke,Me=qe,(ge=S).verno=Te.version/10,Me=ge._dbSchema=ka(0,Te,Me),ge._storeNames=P(Te.objectStoreNames,0),rc(ge,[ge._allTables],s(Me),Me);else if(dl(S,S._dbSchema,qe),((Ve=ri(ka(0,(Ve=S).idbdb,qe),Ve._dbSchema)).add.length||Ve.change.some(function(Xe){return Xe.add.length||Xe.change.length}))&&!X)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ke.close(),W=Ke.version+1,X=!0,Ce(le());Fs(S,qe)}catch{}xi.push(S),Ke.onversionchange=mt(function(Xe){k.vcFired=!0,S.on("versionchange").fire(Xe)}),Ke.onclose=mt(function(Xe){S.on("close").fire(Xe)}),de&&(Ve=S._deps,qe=ye,Ke=Ve.indexedDB,Ve=Ve.IDBKeyRange,sc(Ke)||qe===Ei||tf(Ke,Ve).put({name:qe}).catch(tt)),Ce()},fe)}).catch(function(Ce){switch(Ce?.name){case"UnknownError":if(0<k.PR1398_maxLoop)return k.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),le();break;case"VersionError":if(0<W)return W=0,le()}return Qe.reject(Ce)})}var he,me=k.dbReadyResolve,be=null,de=!1;return Qe.race([L,(typeof navigator>"u"?Qe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Ce){function fe(){return indexedDB.databases().finally(Ce)}he=setInterval(fe,100),fe()}).finally(function(){return clearInterval(he)}):Promise.resolve()).then(le)]).then(function(){return re(),k.onReadyBeingFired=[],Qe.resolve(Aa(function(){return S.on.ready.fire(S.vip)})).then(function Ce(){if(0<k.onReadyBeingFired.length){var fe=k.onReadyBeingFired.reduce(Vt,tt);return k.onReadyBeingFired=[],Qe.resolve(Aa(function(){return fe(S.vip)})).then(Ce)}})}).finally(function(){k.openCanceller===L&&(k.onReadyBeingFired=null,k.isBeingOpened=!1)}).catch(function(Ce){k.dbOpenError=Ce;try{be&&be.abort()}catch{}return L===k.openCanceller&&S._close(),cr(Ce)}).finally(function(){k.openComplete=!0,me()}).then(function(){var Ce;return de&&(Ce={},S.tables.forEach(function(fe){fe.schema.indexes.forEach(function(ye){ye.name&&(Ce["idb://".concat(S.name,"/").concat(fe.name,"/").concat(ye.name)]=new Fr(-1/0,[[[]]]))}),Ce["idb://".concat(S.name,"/").concat(fe.name,"/")]=Ce["idb://".concat(S.name,"/").concat(fe.name,"/:dels")]=new Fr(-1/0,[[[]]])}),Qr(cl).fire(Ce),uo(Ce,!0)),S})}function Ui(S){function k(X){return S.next(X)}var I=W(k),L=W(function(X){return S.throw(X)});function W(X){return function(he){var le=X(he),he=le.value;return le.done?he:he&&typeof he.then=="function"?he.then(I,L):a(he)?Promise.all(he).then(I,L):I(he)}}return W(k)()}function w(S,k,I){for(var L=a(S)?S.slice():[S],W=0;W<I;++W)L.push(k);return L}var N={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(S){return r(r({},S),{table:function(k){var I=S.table(k),L=I.schema,W={},X=[];function re(de,Ce,fe){var ye=xr(de),Se=W[ye]=W[ye]||[],ge=de==null?0:typeof de=="string"?1:de.length,Te=0<Ce,Te=r(r({},fe),{name:Te?"".concat(ye,"(virtual-from:").concat(fe.name,")"):fe.name,lowLevelIndex:fe,isVirtual:Te,keyTail:Ce,keyLength:ge,extractKey:Fi(de),unique:!Te&&fe.unique});return Se.push(Te),Te.isPrimaryKey||X.push(Te),1<ge&&re(ge===2?de[0]:de.slice(0,ge-1),Ce+1,fe),Se.sort(function(Me,Ie){return Me.keyTail-Ie.keyTail}),Te}k=re(L.primaryKey.keyPath,0,L.primaryKey),W[":id"]=[k];for(var le=0,he=L.indexes;le<he.length;le++){var me=he[le];re(me.keyPath,0,me)}function be(de){var Ce,fe=de.query.index;return fe.isVirtual?r(r({},de),{query:{index:fe.lowLevelIndex,range:(Ce=de.query.range,fe=fe.keyTail,{type:Ce.type===1?2:Ce.type,lower:w(Ce.lower,Ce.lowerOpen?S.MAX_KEY:S.MIN_KEY,fe),lowerOpen:!0,upper:w(Ce.upper,Ce.upperOpen?S.MIN_KEY:S.MAX_KEY,fe),upperOpen:!0})}}):de}return r(r({},I),{schema:r(r({},L),{primaryKey:k,indexes:X,getIndexByKeyPath:function(de){return(de=W[xr(de)])&&de[0]}}),count:function(de){return I.count(be(de))},query:function(de){return I.query(be(de))},openCursor:function(de){var Ce=de.query.index,fe=Ce.keyTail,ye=Ce.isVirtual,Se=Ce.keyLength;return ye?I.openCursor(be(de)).then(function(Te){return Te&&ge(Te)}):I.openCursor(de);function ge(Te){return Object.create(Te,{continue:{value:function(Me){Me!=null?Te.continue(w(Me,de.reverse?S.MAX_KEY:S.MIN_KEY,fe)):de.unique?Te.continue(Te.key.slice(0,Se).concat(de.reverse?S.MIN_KEY:S.MAX_KEY,fe)):Te.continue()}},continuePrimaryKey:{value:function(Me,Ie){Te.continuePrimaryKey(w(Me,S.MAX_KEY,fe),Ie)}},primaryKey:{get:function(){return Te.primaryKey}},key:{get:function(){var Me=Te.key;return Se===1?Me[0]:Me.slice(0,Se)}},value:{get:function(){return Te.value}}})}}})}})}};function H(S,k,I,L){return I=I||{},L=L||"",s(S).forEach(function(W){var X,re,le;h(k,W)?(X=S[W],re=k[W],typeof X=="object"&&typeof re=="object"&&X&&re?(le=oe(X))!==oe(re)?I[L+W]=k[W]:le==="Object"?H(X,re,I,L+W+"."):X!==re&&(I[L+W]=k[W]):X!==re&&(I[L+W]=k[W])):I[L+W]=void 0}),s(k).forEach(function(W){h(S,W)||(I[L+W]=k[W])}),I}function ee(S,k){return k.type==="delete"?k.keys:k.keys||k.values.map(S.extractKey)}var xe={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(S){return r(r({},S),{table:function(k){var I=S.table(k),L=I.schema.primaryKey;return r(r({},I),{mutate:function(W){var X=nt.trans,re=X.table(k).hook,le=re.deleting,he=re.creating,me=re.updating;switch(W.type){case"add":if(he.fire===tt)break;return X._promise("readwrite",function(){return be(W)},!0);case"put":if(he.fire===tt&&me.fire===tt)break;return X._promise("readwrite",function(){return be(W)},!0);case"delete":if(le.fire===tt)break;return X._promise("readwrite",function(){return be(W)},!0);case"deleteRange":if(le.fire===tt)break;return X._promise("readwrite",function(){return function de(Ce,fe,ye){return I.query({trans:Ce,values:!1,query:{index:L,range:fe},limit:ye}).then(function(Se){var ge=Se.result;return be({type:"delete",keys:ge,trans:Ce}).then(function(Te){return 0<Te.numFailures?Promise.reject(Te.failures[0]):ge.length<ye?{failures:[],numFailures:0,lastResult:void 0}:de(Ce,r(r({},fe),{lower:ge[ge.length-1],lowerOpen:!0}),ye)})})}(W.trans,W.range,1e4)},!0)}return I.mutate(W);function be(de){var Ce,fe,ye,Se=nt.trans,ge=de.keys||ee(L,de);if(!ge)throw new Error("Keys missing");return(de=de.type==="add"||de.type==="put"?r(r({},de),{keys:ge}):r({},de)).type!=="delete"&&(de.values=o([],de.values)),de.keys&&(de.keys=o([],de.keys)),Ce=I,ye=ge,((fe=de).type==="add"?Promise.resolve([]):Ce.getMany({trans:fe.trans,keys:ye,cache:"immutable"})).then(function(Te){var Me=ge.map(function(Ie,Ve){var Ke,Je,qe,Xe=Te[Ve],et={onerror:null,onsuccess:null};return de.type==="delete"?le.fire.call(et,Ie,Xe,Se):de.type==="add"||Xe===void 0?(Ke=he.fire.call(et,Ie,de.values[Ve],Se),Ie==null&&Ke!=null&&(de.keys[Ve]=Ie=Ke,L.outbound||O(de.values[Ve],L.keyPath,Ie))):(Ke=H(Xe,de.values[Ve]),(Je=me.fire.call(et,Ke,Ie,Xe,Se))&&(qe=de.values[Ve],Object.keys(Je).forEach(function(Ge){h(qe,Ge)?qe[Ge]=Je[Ge]:O(qe,Ge,Je[Ge])}))),et});return I.mutate(de).then(function(Ie){for(var Ve=Ie.failures,Ke=Ie.results,Je=Ie.numFailures,Ie=Ie.lastResult,qe=0;qe<ge.length;++qe){var Xe=(Ke||ge)[qe],et=Me[qe];Xe==null?et.onerror&&et.onerror(Ve[qe]):et.onsuccess&&et.onsuccess(de.type==="put"&&Te[qe]?de.values[qe]:Xe)}return{failures:Ve,results:Ke,numFailures:Je,lastResult:Ie}}).catch(function(Ie){return Me.forEach(function(Ve){return Ve.onerror&&Ve.onerror(Ie)}),Promise.reject(Ie)})})}}})}})}};function Ne(S,k,I){try{if(!k||k.keys.length<S.length)return null;for(var L=[],W=0,X=0;W<k.keys.length&&X<S.length;++W)Xt(k.keys[W],S[X])===0&&(L.push(I?F(k.values[W]):k.values[W]),++X);return L.length===S.length?L:null}catch{return null}}var Ze={stack:"dbcore",level:-1,create:function(S){return{table:function(k){var I=S.table(k);return r(r({},I),{getMany:function(L){if(!L.cache)return I.getMany(L);var W=Ne(L.keys,L.trans._cache,L.cache==="clone");return W?Qe.resolve(W):I.getMany(L).then(function(X){return L.trans._cache={keys:L.keys,values:L.cache==="clone"?F(X):X},X})},mutate:function(L){return L.type!=="add"&&(L.trans._cache=null),I.mutate(L)}})}}}};function dn(S,k){return S.trans.mode==="readonly"&&!!S.subscr&&!S.trans.explicit&&S.trans.db._options.cache!=="disabled"&&!k.schema.primaryKey.outbound}function Dr(S,k){switch(S){case"query":return k.values&&!k.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var yn={stack:"dbcore",level:0,name:"Observability",create:function(S){var k=S.schema.name,I=new Fr(S.MIN_KEY,S.MAX_KEY);return r(r({},S),{transaction:function(L,W,X){if(nt.subscr&&W!=="readonly")throw new Oe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(nt.querier));return S.transaction(L,W,X)},table:function(L){var W=S.table(L),X=W.schema,re=X.primaryKey,de=X.indexes,le=re.extractKey,he=re.outbound,me=re.autoIncrement&&de.filter(function(fe){return fe.compound&&fe.keyPath.includes(re.keyPath)}),be=r(r({},W),{mutate:function(fe){function ye(Ge){return Ge="idb://".concat(k,"/").concat(L,"/").concat(Ge),Ie[Ge]||(Ie[Ge]=new Fr)}var Se,ge,Te,Me=fe.trans,Ie=fe.mutatedParts||(fe.mutatedParts={}),Ve=ye(""),Ke=ye(":dels"),Je=fe.type,et=fe.type==="deleteRange"?[fe.range]:fe.type==="delete"?[fe.keys]:fe.values.length<50?[ee(re,fe).filter(function(Ge){return Ge}),fe.values]:[],qe=et[0],Xe=et[1],et=fe.trans._cache;return a(qe)?(Ve.addKeys(qe),(et=Je==="delete"||qe.length===Xe.length?Ne(qe,et):null)||Ke.addKeys(qe),(et||Xe)&&(Se=ye,ge=et,Te=Xe,X.indexes.forEach(function(Ge){var ot=Se(Ge.name||"");function yt(jt){return jt!=null?Ge.extractKey(jt):null}function Et(jt){return Ge.multiEntry&&a(jt)?jt.forEach(function(Bo){return ot.addKey(Bo)}):ot.addKey(jt)}(ge||Te).forEach(function(jt,Ur){var It=ge&&yt(ge[Ur]),Ur=Te&&yt(Te[Ur]);Xt(It,Ur)!==0&&(It!=null&&Et(It),Ur!=null&&Et(Ur))})}))):qe?(Xe={from:(Xe=qe.lower)!==null&&Xe!==void 0?Xe:S.MIN_KEY,to:(Xe=qe.upper)!==null&&Xe!==void 0?Xe:S.MAX_KEY},Ke.add(Xe),Ve.add(Xe)):(Ve.add(I),Ke.add(I),X.indexes.forEach(function(Ge){return ye(Ge.name).add(I)})),W.mutate(fe).then(function(Ge){return!qe||fe.type!=="add"&&fe.type!=="put"||(Ve.addKeys(Ge.results),me&&me.forEach(function(ot){for(var yt=fe.values.map(function(It){return ot.extractKey(It)}),Et=ot.keyPath.findIndex(function(It){return It===re.keyPath}),jt=0,Bo=Ge.results.length;jt<Bo;++jt)yt[jt][Et]=Ge.results[jt];ye(ot.name).addKeys(yt)})),Me.mutatedParts=zi(Me.mutatedParts||{},Ie),Ge})}}),de=function(ye){var Se=ye.query,ye=Se.index,Se=Se.range;return[ye,new Fr((ye=Se.lower)!==null&&ye!==void 0?ye:S.MIN_KEY,(Se=Se.upper)!==null&&Se!==void 0?Se:S.MAX_KEY)]},Ce={get:function(fe){return[re,new Fr(fe.key)]},getMany:function(fe){return[re,new Fr().addKeys(fe.keys)]},count:de,query:de,openCursor:de};return s(Ce).forEach(function(fe){be[fe]=function(ye){var Se=nt.subscr,ge=!!Se,Te=dn(nt,W)&&Dr(fe,ye)?ye.obsSet={}:Se;if(ge){var Me=function(Xe){return Xe="idb://".concat(k,"/").concat(L,"/").concat(Xe),Te[Xe]||(Te[Xe]=new Fr)},Ie=Me(""),Ve=Me(":dels"),Se=Ce[fe](ye),ge=Se[0],Se=Se[1];if((fe==="query"&&ge.isPrimaryKey&&!ye.values?Ve:Me(ge.name||"")).add(Se),!ge.isPrimaryKey){if(fe!=="count"){var Ke=fe==="query"&&he&&ye.values&&W.query(r(r({},ye),{values:!1}));return W[fe].apply(this,arguments).then(function(Xe){if(fe==="query"){if(he&&ye.values)return Ke.then(function(yt){return yt=yt.result,Ie.addKeys(yt),Xe});var et=ye.values?Xe.result.map(le):Xe.result;(ye.values?Ie:Ve).addKeys(et)}else if(fe==="openCursor"){var Ge=Xe,ot=ye.values;return Ge&&Object.create(Ge,{key:{get:function(){return Ve.addKey(Ge.primaryKey),Ge.key}},primaryKey:{get:function(){var yt=Ge.primaryKey;return Ve.addKey(yt),yt}},value:{get:function(){return ot&&Ie.addKey(Ge.primaryKey),Ge.value}}})}return Xe})}Ve.add(I)}}return W[fe].apply(this,arguments)}}),be}})}};function zr(S,k,I){if(I.numFailures===0)return k;if(k.type==="deleteRange")return null;var L=k.keys?k.keys.length:"values"in k&&k.values?k.values.length:1;return I.numFailures===L?null:(k=r({},k),a(k.keys)&&(k.keys=k.keys.filter(function(W,X){return!(X in I.failures)})),"values"in k&&a(k.values)&&(k.values=k.values.filter(function(W,X){return!(X in I.failures)})),k)}function Tr(S,k){return I=S,((L=k).lower===void 0||(L.lowerOpen?0<Xt(I,L.lower):0<=Xt(I,L.lower)))&&(S=S,(k=k).upper===void 0||(k.upperOpen?Xt(S,k.upper)<0:Xt(S,k.upper)<=0));var I,L}function Gs(S,k,Ce,L,W,X){if(!Ce||Ce.length===0)return S;var re=k.query.index,le=re.multiEntry,he=k.query.range,me=L.schema.primaryKey.extractKey,be=re.extractKey,de=(re.lowLevelIndex||re).extractKey,Ce=Ce.reduce(function(fe,ye){var Se=fe,ge=[];if(ye.type==="add"||ye.type==="put")for(var Te=new Fr,Me=ye.values.length-1;0<=Me;--Me){var Ie,Ve=ye.values[Me],Ke=me(Ve);Te.hasKey(Ke)||(Ie=be(Ve),(le&&a(Ie)?Ie.some(function(Ge){return Tr(Ge,he)}):Tr(Ie,he))&&(Te.addKey(Ke),ge.push(Ve)))}switch(ye.type){case"add":var Je=new Fr().addKeys(k.values?fe.map(function(ot){return me(ot)}):fe),Se=fe.concat(k.values?ge.filter(function(ot){return ot=me(ot),!Je.hasKey(ot)&&(Je.addKey(ot),!0)}):ge.map(function(ot){return me(ot)}).filter(function(ot){return!Je.hasKey(ot)&&(Je.addKey(ot),!0)}));break;case"put":var qe=new Fr().addKeys(ye.values.map(function(ot){return me(ot)}));Se=fe.filter(function(ot){return!qe.hasKey(k.values?me(ot):ot)}).concat(k.values?ge:ge.map(function(ot){return me(ot)}));break;case"delete":var Xe=new Fr().addKeys(ye.keys);Se=fe.filter(function(ot){return!Xe.hasKey(k.values?me(ot):ot)});break;case"deleteRange":var et=ye.range;Se=fe.filter(function(ot){return!Tr(me(ot),et)})}return Se},S);return Ce===S?S:(Ce.sort(function(fe,ye){return Xt(de(fe),de(ye))||Xt(me(fe),me(ye))}),k.limit&&k.limit<1/0&&(Ce.length>k.limit?Ce.length=k.limit:S.length===k.limit&&Ce.length<k.limit&&(W.dirty=!0)),X?Object.freeze(Ce):Ce)}function Zr(S,k){return Xt(S.lower,k.lower)===0&&Xt(S.upper,k.upper)===0&&!!S.lowerOpen==!!k.lowerOpen&&!!S.upperOpen==!!k.upperOpen}function Ks(S,k){return function(I,L,W,X){if(I===void 0)return L!==void 0?-1:0;if(L===void 0)return 1;if((L=Xt(I,L))===0){if(W&&X)return 0;if(W)return 1;if(X)return-1}return L}(S.lower,k.lower,S.lowerOpen,k.lowerOpen)<=0&&0<=function(I,L,W,X){if(I===void 0)return L!==void 0?1:0;if(L===void 0)return-1;if((L=Xt(I,L))===0){if(W&&X)return 0;if(W)return-1;if(X)return 1}return L}(S.upper,k.upper,S.upperOpen,k.upperOpen)}function sf(S,k,I,L){S.subscribers.add(I),L.addEventListener("abort",function(){var W,X;S.subscribers.delete(I),S.subscribers.size===0&&(W=S,X=k,setTimeout(function(){W.subscribers.size===0&&Z(X,W)},3e3))})}var Mh={stack:"dbcore",level:0,name:"Cache",create:function(S){var k=S.schema.name;return r(r({},S),{transaction:function(I,L,W){var X,re,le=S.transaction(I,L,W);return L==="readwrite"&&(re=(X=new AbortController).signal,W=function(he){return function(){if(X.abort(),L==="readwrite"){for(var me=new Set,be=0,de=I;be<de.length;be++){var Ce=de[be],fe=qs["idb://".concat(k,"/").concat(Ce)];if(fe){var ye=S.table(Ce),Se=fe.optimisticOps.filter(function(ot){return ot.trans===le});if(le._explicit&&he&&le.mutatedParts)for(var ge=0,Te=Object.values(fe.queries.query);ge<Te.length;ge++)for(var Me=0,Ie=(Je=Te[ge]).slice();Me<Ie.length;Me++)pu((qe=Ie[Me]).obsSet,le.mutatedParts)&&(Z(Je,qe),qe.subscribers.forEach(function(ot){return me.add(ot)}));else if(0<Se.length){fe.optimisticOps=fe.optimisticOps.filter(function(ot){return ot.trans!==le});for(var Ve=0,Ke=Object.values(fe.queries.query);Ve<Ke.length;Ve++)for(var Je,qe,Xe,et=0,Ge=(Je=Ke[Ve]).slice();et<Ge.length;et++)(qe=Ge[et]).res!=null&&le.mutatedParts&&(he&&!qe.dirty?(Xe=Object.isFrozen(qe.res),Xe=Gs(qe.res,qe.req,Se,ye,qe,Xe),qe.dirty?(Z(Je,qe),qe.subscribers.forEach(function(ot){return me.add(ot)})):Xe!==qe.res&&(qe.res=Xe,qe.promise=Qe.resolve({result:Xe}))):(qe.dirty&&Z(Je,qe),qe.subscribers.forEach(function(ot){return me.add(ot)})))}}}me.forEach(function(ot){return ot()})}}},le.addEventListener("abort",W(!1),{signal:re}),le.addEventListener("error",W(!1),{signal:re}),le.addEventListener("complete",W(!0),{signal:re})),le},table:function(I){var L=S.table(I),W=L.schema.primaryKey;return r(r({},L),{mutate:function(X){var re=nt.trans;if(W.outbound||re.db._options.cache==="disabled"||re.explicit||re.idbtrans.mode!=="readwrite")return L.mutate(X);var le=qs["idb://".concat(k,"/").concat(I)];return le?(re=L.mutate(X),X.type!=="add"&&X.type!=="put"||!(50<=X.values.length||ee(W,X).some(function(he){return he==null}))?(le.optimisticOps.push(X),X.mutatedParts&&Ia(X.mutatedParts),re.then(function(he){0<he.numFailures&&(Z(le.optimisticOps,X),(he=zr(0,X,he))&&le.optimisticOps.push(he),X.mutatedParts&&Ia(X.mutatedParts))}),re.catch(function(){Z(le.optimisticOps,X),X.mutatedParts&&Ia(X.mutatedParts)})):re.then(function(he){var me=zr(0,r(r({},X),{values:X.values.map(function(be,de){var Ce;return he.failures[de]?be:(be=(Ce=W.keyPath)!==null&&Ce!==void 0&&Ce.includes(".")?F(be):r({},be),O(be,W.keyPath,he.results[de]),be)})}),he);le.optimisticOps.push(me),queueMicrotask(function(){return X.mutatedParts&&Ia(X.mutatedParts)})}),re):L.mutate(X)},query:function(X){if(!dn(nt,L)||!Dr("query",X))return L.query(X);var re=((me=nt.trans)===null||me===void 0?void 0:me.db._options.cache)==="immutable",de=nt,le=de.requery,he=de.signal,me=function(ye,Se,ge,Te){var Me=qs["idb://".concat(ye,"/").concat(Se)];if(!Me)return[];if(!(Se=Me.queries[ge]))return[null,!1,Me,null];var Ie=Se[(Te.query?Te.query.index.name:null)||""];if(!Ie)return[null,!1,Me,null];switch(ge){case"query":var Ve=Ie.find(function(Ke){return Ke.req.limit===Te.limit&&Ke.req.values===Te.values&&Zr(Ke.req.query.range,Te.query.range)});return Ve?[Ve,!0,Me,Ie]:[Ie.find(function(Ke){return("limit"in Ke.req?Ke.req.limit:1/0)>=Te.limit&&(!Te.values||Ke.req.values)&&Ks(Ke.req.query.range,Te.query.range)}),!1,Me,Ie];case"count":return Ve=Ie.find(function(Ke){return Zr(Ke.req.query.range,Te.query.range)}),[Ve,!!Ve,Me,Ie]}}(k,I,"query",X),be=me[0],de=me[1],Ce=me[2],fe=me[3];return be&&de?be.obsSet=X.obsSet:(de=L.query(X).then(function(ye){var Se=ye.result;if(be&&(be.res=Se),re){for(var ge=0,Te=Se.length;ge<Te;++ge)Object.freeze(Se[ge]);Object.freeze(Se)}else ye.result=F(Se);return ye}).catch(function(ye){return fe&&be&&Z(fe,be),Promise.reject(ye)}),be={obsSet:X.obsSet,promise:de,subscribers:new Set,type:"query",req:X,dirty:!1},fe?fe.push(be):(fe=[be],(Ce=Ce||(qs["idb://".concat(k,"/").concat(I)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[X.query.index.name||""]=fe)),sf(be,fe,le,he),be.promise.then(function(ye){return{result:Gs(ye.result,X,Ce?.optimisticOps,L,be,re)}})}})}})}};function af(S,k){return new Proxy(S,{get:function(I,L,W){return L==="db"?k:Reflect.get(I,L,W)}})}var Ws=(gr.prototype.version=function(S){if(isNaN(S)||S<.1)throw new Oe.Type("Given version is not a positive number");if(S=Math.round(10*S)/10,this.idbdb||this._state.isBeingOpened)throw new Oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,S);var k=this._versions,I=k.filter(function(L){return L._cfg.version===S})[0];return I||(I=new this.Version(S),k.push(I),k.sort(uu),I.stores({}),this._state.autoSchema=!1,I)},gr.prototype._whenReady=function(S){var k=this;return this.idbdb&&(this._state.openComplete||nt.letThrough||this._vip)?S():new Qe(function(I,L){if(k._state.openComplete)return L(new Oe.DatabaseClosed(k._state.dbOpenError));if(!k._state.isBeingOpened){if(!k._state.autoOpen)return void L(new Oe.DatabaseClosed);k.open().catch(tt)}k._state.dbReadyPromise.then(I,L)}).then(S)},gr.prototype.use=function(S){var k=S.stack,I=S.create,L=S.level,W=S.name;return W&&this.unuse({stack:k,name:W}),S=this._middlewares[k]||(this._middlewares[k]=[]),S.push({stack:k,create:I,level:L??10,name:W}),S.sort(function(X,re){return X.level-re.level}),this},gr.prototype.unuse=function(S){var k=S.stack,I=S.name,L=S.create;return k&&this._middlewares[k]&&(this._middlewares[k]=this._middlewares[k].filter(function(W){return L?W.create!==L:!!I&&W.name!==I})),this},gr.prototype.open=function(){var S=this;return Li(jn,function(){return Rh(S)})},gr.prototype._close=function(){var S=this._state,k=xi.indexOf(this);if(0<=k&&xi.splice(k,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}S.isBeingOpened||(S.dbReadyPromise=new Qe(function(I){S.dbReadyResolve=I}),S.openCanceller=new Qe(function(I,L){S.cancelOpen=L}))},gr.prototype.close=function(I){var k=(I===void 0?{disableAutoOpen:!0}:I).disableAutoOpen,I=this._state;k?(I.isBeingOpened&&I.cancelOpen(new Oe.DatabaseClosed),this._close(),I.autoOpen=!1,I.dbOpenError=new Oe.DatabaseClosed):(this._close(),I.autoOpen=this._options.autoOpen||I.isBeingOpened,I.openComplete=!1,I.dbOpenError=null)},gr.prototype.delete=function(S){var k=this;S===void 0&&(S={disableAutoOpen:!0});var I=0<arguments.length&&typeof arguments[0]!="object",L=this._state;return new Qe(function(W,X){function re(){k.close(S);var le=k._deps.indexedDB.deleteDatabase(k.name);le.onsuccess=mt(function(){var he,me,be;he=k._deps,me=k.name,be=he.indexedDB,he=he.IDBKeyRange,sc(be)||me===Ei||tf(be,he).delete(me).catch(tt),W()}),le.onerror=ti(X),le.onblocked=k._fireOnBlocked}if(I)throw new Oe.InvalidArgument("Invalid closeOptions argument to db.delete()");L.isBeingOpened?L.dbReadyPromise.then(re):re()})},gr.prototype.backendDB=function(){return this.idbdb},gr.prototype.isOpen=function(){return this.idbdb!==null},gr.prototype.hasBeenClosed=function(){var S=this._state.dbOpenError;return S&&S.name==="DatabaseClosed"},gr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},gr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(gr.prototype,"tables",{get:function(){var S=this;return s(this._allTables).map(function(k){return S._allTables[k]})},enumerable:!1,configurable:!0}),gr.prototype.transaction=function(){var S=(function(k,I,L){var W=arguments.length;if(W<2)throw new Oe.InvalidArgument("Too few arguments");for(var X=new Array(W-1);--W;)X[W-1]=arguments[W];return L=X.pop(),[k,B(X),L]}).apply(this,arguments);return this._transaction.apply(this,S)},gr.prototype._transaction=function(S,k,I){var L=this,W=nt.trans;W&&W.db===this&&S.indexOf("!")===-1||(W=null);var X,re,le=S.indexOf("?")!==-1;S=S.replace("!","").replace("?","");try{if(re=k.map(function(me){if(me=me instanceof L.Table?me.name:me,typeof me!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return me}),S=="r"||S===Hr)X=Hr;else{if(S!="rw"&&S!=ba)throw new Oe.InvalidArgument("Invalid transaction mode: "+S);X=ba}if(W){if(W.mode===Hr&&X===ba){if(!le)throw new Oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");W=null}W&&re.forEach(function(me){if(W&&W.storeNames.indexOf(me)===-1){if(!le)throw new Oe.SubTransaction("Table "+me+" not included in parent transaction.");W=null}}),le&&W&&!W.active&&(W=null)}}catch(me){return W?W._promise(null,function(be,de){de(me)}):cr(me)}var he=(function me(be,de,Ce,fe,ye){return Qe.resolve().then(function(){var Se=nt.transless||nt,ge=be._createTransaction(de,Ce,be._dbSchema,fe);if(ge.explicit=!0,Se={trans:ge,transless:Se},fe)ge.idbtrans=fe.idbtrans;else try{ge.create(),ge.idbtrans._explicit=!0,be._state.PR1398_maxLoop=3}catch(Ie){return Ie.name===De.InvalidState&&be.isOpen()&&0<--be._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),be.close({disableAutoOpen:!1}),be.open().then(function(){return me(be,de,Ce,null,ye)})):cr(Ie)}var Te,Me=se(ye);return Me&&ei(),Se=Qe.follow(function(){var Ie;(Te=ye.call(ge,ge))&&(Me?(Ie=co.bind(null,null),Te.then(Ie,Ie)):typeof Te.next=="function"&&typeof Te.throw=="function"&&(Te=Ui(Te)))},Se),(Te&&typeof Te.then=="function"?Qe.resolve(Te).then(function(Ie){return ge.active?Ie:cr(new Oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Se.then(function(){return Te})).then(function(Ie){return fe&&ge._resolve(),ge._completion.then(function(){return Ie})}).catch(function(Ie){return ge._reject(Ie),cr(Ie)})})}).bind(null,this,X,re,W,I);return W?W._promise(X,he,"lock"):nt.trans?Li(nt.transless,function(){return L._whenReady(he)}):this._whenReady(he)},gr.prototype.table=function(S){if(!h(this._allTables,S))throw new Oe.InvalidTable("Table ".concat(S," does not exist"));return this._allTables[S]},gr);function gr(S,k){var I=this;this._middlewares={},this.verno=0;var L=gr.dependencies;this._options=k=r({addons:gr.addons,autoOpen:!0,indexedDB:L.indexedDB,IDBKeyRange:L.IDBKeyRange,cache:"cloned"},k),this._deps={indexedDB:k.indexedDB,IDBKeyRange:k.IDBKeyRange},L=k.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var W,X,re,le,he,me={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:tt,dbReadyPromise:null,cancelOpen:tt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:k.autoOpen};me.dbReadyPromise=new Qe(function(de){me.dbReadyResolve=de}),me.openCanceller=new Qe(function(de,Ce){me.cancelOpen=Ce}),this._state=me,this.name=S,this.on=Bs(this,"populate","blocked","versionchange","close",{ready:[Vt,tt]}),this.on.ready.subscribe=D(this.on.ready.subscribe,function(de){return function(Ce,fe){gr.vip(function(){var ye,Se=I._state;Se.openComplete?(Se.dbOpenError||Qe.resolve().then(Ce),fe&&de(Ce)):Se.onReadyBeingFired?(Se.onReadyBeingFired.push(Ce),fe&&de(Ce)):(de(Ce),ye=I,fe||de(function ge(){ye.on.ready.unsubscribe(Ce),ye.on.ready.unsubscribe(ge)}))})}}),this.Collection=(W=this,Ca(Bi.prototype,function(Te,ge){this.db=W;var fe=js,ye=null;if(ge)try{fe=ge()}catch(Me){ye=Me}var Se=Te._ctx,ge=Se.table,Te=ge.hook.reading.fire;this._ctx={table:ge,index:Se.index,isPrimKey:!Se.index||ge.schema.primKey.keyPath&&Se.index===ge.schema.primKey.name,range:fe,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ye,or:Se.or,valueMapper:Te!==mn?Te:null}})),this.Table=(X=this,Ca(au.prototype,function(de,Ce,fe){this.db=X,this._tx=fe,this.name=de,this.schema=Ce,this.hook=X._allTables[de]?X._allTables[de].hook:Bs(null,{creating:[$n,tt],reading:[Ln,mn],updating:[sn,tt],deleting:[At,tt]})})),this.Transaction=(re=this,Ca($i.prototype,function(de,Ce,fe,ye,Se){var ge=this;this.db=re,this.mode=de,this.storeNames=Ce,this.schema=fe,this.chromeTransactionDurability=ye,this.idbtrans=null,this.on=Bs(this,"complete","error","abort"),this.parent=Se||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Qe(function(Te,Me){ge._resolve=Te,ge._reject=Me}),this._completion.then(function(){ge.active=!1,ge.on.complete.fire()},function(Te){var Me=ge.active;return ge.active=!1,ge.on.error.fire(Te),ge.parent?ge.parent._reject(Te):Me&&ge.idbtrans&&ge.idbtrans.abort(),cr(Te)})})),this.Version=(le=this,Ca(Ah.prototype,function(de){this.db=le,this._cfg={version:de,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(he=this,Ca(Hs.prototype,function(de,Ce,fe){if(this.db=he,this._ctx={table:de,index:Ce===":id"?null:Ce,or:fe},this._cmp=this._ascending=Xt,this._descending=function(ye,Se){return Xt(Se,ye)},this._max=function(ye,Se){return 0<Xt(ye,Se)?ye:Se},this._min=function(ye,Se){return Xt(ye,Se)<0?ye:Se},this._IDBKeyRange=he._deps.IDBKeyRange,!this._IDBKeyRange)throw new Oe.MissingAPI})),this.on("versionchange",function(de){0<de.newVersion?console.warn("Another connection wants to upgrade database '".concat(I.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(I.name,"'. Closing db now to resume the delete request.")),I.close({disableAutoOpen:!1})}),this.on("blocked",function(de){!de.newVersion||de.newVersion<de.oldVersion?console.warn("Dexie.delete('".concat(I.name,"') was blocked")):console.warn("Upgrade '".concat(I.name,"' blocked by other connection holding version ").concat(de.oldVersion/10))}),this._maxKey=_a(k.IDBKeyRange),this._createTransaction=function(de,Ce,fe,ye){return new I.Transaction(de,Ce,fe,I._options.chromeTransactionDurability,ye)},this._fireOnBlocked=function(de){I.on("blocked").fire(de),xi.filter(function(Ce){return Ce.name===I.name&&Ce!==I&&!Ce._state.vcFired}).map(function(Ce){return Ce.on("versionchange").fire(de)})},this.use(Ze),this.use(Mh),this.use(yn),this.use(N),this.use(xe);var be=new Proxy(this,{get:function(de,Ce,fe){if(Ce==="_vip")return!0;if(Ce==="table")return function(Se){return af(I.table(Se),be)};var ye=Reflect.get(de,Ce,fe);return ye instanceof au?af(ye,be):Ce==="tables"?ye.map(function(Se){return af(Se,be)}):Ce==="_createTransaction"?function(){return af(ye.apply(this,arguments),be)}:ye}});this.vip=be,L.forEach(function(de){return de(I)})}var yu,ki=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",e0=(Ih.prototype.subscribe=function(S,k,I){return this._subscribe(S&&typeof S!="function"?S:{next:S,error:k,complete:I})},Ih.prototype[ki]=function(){return this},Ih);function Ih(S){this._subscribe=S}try{yu={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{yu={indexedDB:null,IDBKeyRange:null}}function t0(S){var k,I=!1,L=new e0(function(W){var X=se(S),re,le=!1,he={},me={},be={get closed(){return le},unsubscribe:function(){le||(le=!0,re&&re.abort(),de&&Qr.storagemutated.unsubscribe(fe))}};W.start&&W.start(be);var de=!1,Ce=function(){return cs(ye)},fe=function(Se){zi(he,Se),pu(me,he)&&Ce()},ye=function(){var Se,ge,Te;!le&&yu.indexedDB&&(he={},Se={},re&&re.abort(),re=new AbortController,Te=function(Me){var Ie=Qn();try{X&&ei();var Ve=Po(S,Me);return Ve=X?Ve.finally(co):Ve}finally{Ie&&Gn()}}(ge={subscr:Se,signal:re.signal,requery:Ce,querier:S,trans:null}),Promise.resolve(Te).then(function(Me){I=!0,k=Me,le||ge.signal.aborted||(he={},function(Ie){for(var Ve in Ie)if(h(Ie,Ve))return;return 1}(me=Se)||de||(Qr(cl,fe),de=!0),cs(function(){return!le&&W.next&&W.next(Me)}))},function(Me){I=!1,["DatabaseClosedError","AbortError"].includes(Me?.name)||le||cs(function(){le||W.error&&W.error(Me)})}))};return setTimeout(Ce,0),be});return L.hasValue=function(){return I},L.getValue=function(){return k},L}var ac=Ws;function Um(S){var k=fl;try{fl=!0,Qr.storagemutated.fire(S),uo(S,!0)}finally{fl=k}}p(ac,r(r({},wt),{delete:function(S){return new ac(S,{addons:[]}).delete()},exists:function(S){return new ac(S,{addons:[]}).open().then(function(k){return k.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(S){try{return k=ac.dependencies,I=k.indexedDB,k=k.IDBKeyRange,(sc(I)?Promise.resolve(I.databases()).then(function(L){return L.map(function(W){return W.name}).filter(function(W){return W!==Ei})}):tf(I,k).toCollection().primaryKeys()).then(S)}catch{return cr(new Oe.MissingAPI)}var k,I},defineClass:function(){return function(S){l(this,S)}},ignoreTransaction:function(S){return nt.trans?Li(nt.transless,S):S()},vip:Aa,async:function(S){return function(){try{var k=Ui(S.apply(this,arguments));return k&&typeof k.then=="function"?k:Qe.resolve(k)}catch(I){return cr(I)}}},spawn:function(S,k,I){try{var L=Ui(S.apply(I,k||[]));return L&&typeof L.then=="function"?L:Qe.resolve(L)}catch(W){return cr(W)}},currentTransaction:{get:function(){return nt.trans||null}},waitFor:function(S,k){return k=Qe.resolve(typeof S=="function"?ac.ignoreTransaction(S):S).timeout(k||6e4),nt.trans?nt.trans.waitFor(k):k},Promise:Qe,debug:{get:function(){return Ut},set:function(S){gn(S)}},derive:b,extend:l,props:p,override:D,Events:Bs,on:Qr,liveQuery:t0,extendObservabilitySet:zi,getByKeyPath:$,setByKeyPath:O,delByKeyPath:function(S,k){typeof k=="string"?O(S,k,void 0):"length"in k&&[].map.call(k,function(I){O(S,I,void 0)})},shallowClone:R,deepClone:F,getObjectDiff:H,cmp:Xt,asap:V,minKey:-1/0,addons:[],connections:xi,errnames:De,dependencies:yu,cache:qs,semVer:"4.0.11",version:"4.0.11".split(".").map(function(S){return parseInt(S)}).reduce(function(S,k,I){return S+k/Math.pow(10,2*I)})})),ac.maxKey=_a(ac.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Qr(cl,function(S){fl||(S=new CustomEvent(xa,{detail:S}),fl=!0,dispatchEvent(S),fl=!1)}),addEventListener(xa,function(S){S=S.detail,fl||Um(S)}));var vu,fl=!1,oi=function(){};return typeof BroadcastChannel<"u"&&((oi=function(){(vu=new BroadcastChannel(xa)).onmessage=function(S){return S.data&&Um(S.data)}})(),typeof vu.unref=="function"&&vu.unref(),Qr(cl,function(S){fl||vu.postMessage(S)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(S){if(!Ws.disableBfCache&&S.persisted){Ut&&console.debug("Dexie: handling persisted pagehide"),vu?.close();for(var k=0,I=xi;k<I.length;k++)I[k].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(S){!Ws.disableBfCache&&S.persisted&&(Ut&&console.debug("Dexie: handling persisted pageshow"),oi(),Um({all:new Fr(-1/0,[[]])}))})),Qe.rejectionMapper=function(S,k){return!S||S instanceof ie||S instanceof TypeError||S instanceof SyntaxError||!S.name||!rt[S.name]?S:(k=new rt[S.name](k||S.message,S),"stack"in S&&v(k,"stack",{get:function(){return this.inner.stack}}),k)},gn(Ut),r(Ws,Object.freeze({__proto__:null,Dexie:Ws,liveQuery:t0,Entity:tc,cmp:Xt,PropModification:An,replacePrefix:function(S,k){return new An({replacePrefix:[S,k]})},add:function(S){return new An({add:S})},remove:function(S){return new An({remove:S})},default:Ws,RangeSet:Fr,mergeRanges:hs,rangesOverlap:nf}),{default:Ws}),Ws})}(qb)),qb.exports}var xJ=SJ();const tT=sA(xJ),XP=Symbol.for("Dexie"),x1=globalThis[XP]||(globalThis[XP]=tT);if(tT.semVer!==x1.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${tT.semVer} and ${x1.semVer}`);const{liveQuery:EJ,mergeRanges:kIe,rangesOverlap:TIe,RangeSet:AIe,cmp:RIe,Entity:MIe,PropModification:IIe,replacePrefix:NIe,add:DIe,remove:OIe}=x1;class _J extends x1{Items;ClassorBook;Icons;SyncedQueue;SyncMeta;constructor(){super("myDatabase"),this.version(1).stores({Items:"id, title,guess,content,renderRange,renderDate,classId, bookId, priority",ClassorBook:"id,classId,bookId",Icons:"id, value, url",SyncedQueue:"id, table, type, status",SyncMeta:"key"}),this.Items=this.table("Items"),this.ClassorBook=this.table("ClassorBook"),this.Icons=this.table("Icons"),this.SyncedQueue=this.table("SyncedQueue"),this.SyncMeta=this.table("SyncMeta")}}const ao=new _J;function kJ(t,e,n){var r,o;typeof t=="function"?(r=e||[],o=n):(r=[],o=e);var i=Pe.useRef({hasResult:!1,result:o,error:null}),s=Pe.useReducer(function(u){return u+1},0);s[0];var a=s[1],l=Pe.useMemo(function(){var u=typeof t=="function"?t():t;if(!u||typeof u.subscribe!="function")throw t===u?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!i.current.hasResult&&typeof window<"u"&&(typeof u.hasValue!="function"||u.hasValue()))if(typeof u.getValue=="function")i.current.result=u.getValue(),i.current.hasResult=!0;else{var f=u.subscribe(function(h){i.current.result=h,i.current.hasResult=!0});typeof f=="function"?f():f.unsubscribe()}return u},r);if(Pe.useDebugValue(i.current.result),Pe.useEffect(function(){var u=l.subscribe(function(f){var h=i.current;(h.error!==null||h.result!==f)&&(h.error=null,h.result=f,h.hasResult=!0,a())},function(f){var h=i.current;h.error!==f&&(h.error=f,a())});return typeof u=="function"?u:u.unsubscribe.bind(u)},r),i.current.error)throw i.current.error;return i.current.result}function NC(t,e,n){return kJ(function(){return EJ(t)},e||[],n)}const wd=e8(t=>({selectedFilter:"all",setSelectedFilter:e=>t({selectedFilter:e}),openCommandSearch:!1,setOpenCommandSearch:e=>t({openCommandSearch:e}),openIcon:!1,setOpenIcon:e=>t({openIcon:e}),openSidebar:!1,setOpenSidebar:e=>t({openSidebar:e}),nanoPageId:"",setNanoPageId:e=>t({nanoPageId:e}),pageTitle:"",setPageTitle:e=>t({pageTitle:e}),pageGuess:"",setPageGuess:e=>t({pageGuess:e}),pageContent:"",setPageContent:e=>t({pageContent:e}),pageClass:"",setPageClass:e=>t({pageClass:e}),pageBook:"",setPageBook:e=>t({pageBook:e}),pagePriority:"",setPagePriority:e=>t({pagePriority:e}),SyncedQueue:async(e,n,r="add")=>{console.log("work"),await ao.SyncedQueue.put({id:e,table:n,type:r,status:"pending"}),console.log(" Saved + synced:",e)},syncLoading:!1,setSyncLoading:e=>t({syncLoading:e}),icons:[{value:"Code",url:"https://img.icons8.com/color/48/code.png"},{value:"study",url:"https://img.icons8.com/color/48/teaching.png"},{value:"JS",url:"https://img.icons8.com/color/48/javascript--v1.png"},{value:"placeholder",url:"https://img.icons8.com/fluency-systems-regular/48/image--v1.png"},{value:"vocabulary",url:"https://img.icons8.com/pieces/64/dictionary.png"},{value:"Islam",url:"https://img.icons8.com/external-bzzricon-outline-bzzricon-studio/64/external-decoration-ramadan-bzzricon-outline-bzzricon-outline-bzzricon-studio.png"},{value:"Personalities",url:"https://img.icons8.com/parakeet-line/48/person-male.png"},{value:"Quran",url:"https://img.icons8.com/external-bzzricon-flat-bzzricon-studio/64/external-quran-ramadan-bzzricon-flat-bzzricon-flat-bzzricon-studio-2.png"}],renderRangeData:{0:{time:6e3,label:"1h"},1:{time:6e3,label:"3h"},2:{time:1440*60*1e3,label:"24h"},3:{time:4320*60*1e3,label:"3d"},4:{time:8640*60*1e3,label:"6d"},5:{time:720*60*60*1e3,label:"30d"},6:{time:2160*60*60*1e3,label:"3m"},7:{time:4320*60*60*1e3,label:"6m"},8:{time:360*24*60*60*1e3,label:"12m"}}}));function TJ(t){return NC(()=>t==="all"?ao.Items.filter(n=>n.renderDate<=new Date().getTime()).toArray():ao.Items.where("bookId").equals(t).toArray(),[t])??[]}function AJ(){return NC(()=>ao.Icons.toArray(),[])??[]}const RJ=()=>{};var QP={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},MJ=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=t[n++];e[r++]=String.fromCharCode((o&31)<<6|i&63)}else if(o>239&&o<365){const i=t[n++],s=t[n++],a=t[n++],l=((o&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],s=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(i&63)<<6|s&63)}}return e.join("")},n8={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<t.length;o+=3){const i=t[o],s=o+1<t.length,a=s?t[o+1]:0,l=o+2<t.length,u=l?t[o+2]:0,f=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,g=u&63;l||(g=64,s||(p=64)),r.push(n[f],n[h],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(t8(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MJ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<t.length;){const i=n[t.charAt(o++)],a=o<t.length?n[t.charAt(o)]:0;++o;const u=o<t.length?n[t.charAt(o)]:64;++o;const h=o<t.length?n[t.charAt(o)]:64;if(++o,i==null||a==null||u==null||h==null)throw new IJ;const p=i<<2|a>>4;if(r.push(p),u!==64){const g=a<<4&240|u>>2;if(r.push(g),h!==64){const v=u<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class IJ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NJ=function(t){const e=t8(t);return n8.encodeByteArray(e,!0)},E1=function(t){return NJ(t).replace(/\./g,"")},r8=function(t){try{return n8.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DJ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OJ=()=>DJ().__FIREBASE_DEFAULTS__,PJ=()=>{if(typeof process>"u"||typeof QP>"u")return;const t=QP.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LJ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&r8(t[1]);return e&&JSON.parse(e)},DC=()=>{try{return RJ()||OJ()||PJ()||LJ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},o8=t=>DC()?.emulatorHosts?.[t],VJ=t=>{const e=o8(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},i8=()=>DC()?.config,s8=t=>DC()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jJ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function a8(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BJ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[E1(JSON.stringify(n)),E1(JSON.stringify(s)),""].join(".")}const Qg={};function $J(){const t={prod:[],emulator:[]};for(const e of Object.keys(Qg))Qg[e]?t.emulator.push(e):t.prod.push(e);return t}function HJ(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ZP=!1;function l8(t,e){if(typeof window>"u"||typeof document>"u"||!bm(window.location.host)||Qg[t]===e||Qg[t]||ZP)return;Qg[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=$J().prod.length>0;function s(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{ZP=!0,s()},p}function f(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=HJ(r),g=n("text"),v=document.getElementById(g)||document.createElement("span"),b=n("learnmore"),E=document.getElementById(b)||document.createElement("a"),T=n("preprendIcon"),P=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const D=p.element;a(D),f(E,b);const z=u();l(P,T),D.append(P,v,E,z),document.body.appendChild(D)}i?(v.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FJ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vi())}function zJ(){const t=DC()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UJ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qJ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function GJ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KJ(){const t=vi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function WJ(){return!zJ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YJ(){try{return typeof indexedDB=="object"}catch{return!1}}function XJ(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QJ="FirebaseError";class eu extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=QJ,Object.setPrototypeOf(this,eu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dv.prototype.create)}}class dv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,i=this.errors[e],s=i?ZJ(i,r):"Error",a=`${this.serviceName}: ${s} (${o}).`;return new eu(o,a,r)}}function ZJ(t,e){return t.replace(JJ,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const JJ=/\{\$([^}]+)}/g;function eee(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const i=t[o],s=e[o];if(JP(i)&&JP(s)){if(!Xf(i,s))return!1}else if(i!==s)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function JP(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function tee(t,e){const n=new nee(t,e);return n.subscribe.bind(n)}class nee{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ree(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=o_),o.error===void 0&&(o.error=o_),o.complete===void 0&&(o.complete=o_);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ree(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function o_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t){return t&&t._delegate?t._delegate:t}class Qf{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oee{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jJ;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(see(e))try{this.getOrInitializeService({instanceIdentifier:xf})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:o});r.resolve(i)}catch{}}}}clearInstance(e=xf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xf){return this.instances.has(e)}getOptions(e=xf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&s.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const i=this.instances.get(r);return i&&e(i,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iee(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xf){return this.component?this.component.multipleInstances?e:xf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iee(t){return t===xf?void 0:t}function see(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aee{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oee(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(vn||(vn={}));const lee={debug:vn.DEBUG,verbose:vn.VERBOSE,info:vn.INFO,warn:vn.WARN,error:vn.ERROR,silent:vn.SILENT},cee=vn.INFO,uee={[vn.DEBUG]:"log",[vn.VERBOSE]:"log",[vn.INFO]:"info",[vn.WARN]:"warn",[vn.ERROR]:"error"},dee=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),o=uee[e];if(o)console[o](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class VA{constructor(e){this.name=e,this._logLevel=cee,this._logHandler=dee,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lee[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vn.DEBUG,...e),this._logHandler(this,vn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vn.VERBOSE,...e),this._logHandler(this,vn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vn.INFO,...e),this._logHandler(this,vn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vn.WARN,...e),this._logHandler(this,vn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vn.ERROR,...e),this._logHandler(this,vn.ERROR,...e)}}const fee=(t,e)=>e.some(n=>t instanceof n);let e4,t4;function hee(){return e4||(e4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pee(){return t4||(t4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const c8=new WeakMap,nT=new WeakMap,u8=new WeakMap,i_=new WeakMap,jA=new WeakMap;function mee(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{n(cd(t.result)),o()},s=()=>{r(t.error),o()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&c8.set(n,t)}).catch(()=>{}),jA.set(e,t),e}function gee(t){if(nT.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{n(),o()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});nT.set(t,e)}let rT={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||u8.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cd(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yee(t){rT=t(rT)}function vee(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(s_(this),e,...n);return u8.set(r,e.sort?e.sort():[e]),cd(r)}:pee().includes(t)?function(...e){return t.apply(s_(this),e),cd(c8.get(this))}:function(...e){return cd(t.apply(s_(this),e))}}function bee(t){return typeof t=="function"?vee(t):(t instanceof IDBTransaction&&gee(t),fee(t,hee())?new Proxy(t,rT):t)}function cd(t){if(t instanceof IDBRequest)return mee(t);if(i_.has(t))return i_.get(t);const e=bee(t);return e!==t&&(i_.set(t,e),jA.set(e,t)),e}const s_=t=>jA.get(t);function wee(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const s=indexedDB.open(t,e),a=cd(s);return r&&s.addEventListener("upgradeneeded",l=>{r(cd(s.result),l.oldVersion,l.newVersion,cd(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),o&&l.addEventListener("versionchange",u=>o(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Cee=["get","getKey","getAll","getAllKeys","count"],See=["put","add","delete","clear"],a_=new Map;function n4(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(a_.get(e))return a_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=See.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Cee.includes(n)))return;const i=async function(s,...a){const l=this.transaction(s,o?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),o&&l.done]))[0]};return a_.set(e,i),i}yee(t=>({...t,get:(e,n,r)=>n4(e,n)||t.get(e,n,r),has:(e,n)=>!!n4(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xee{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Eee(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Eee(t){return t.getComponent()?.type==="VERSION"}const oT="@firebase/app",r4="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=new VA("@firebase/app"),_ee="@firebase/app-compat",kee="@firebase/analytics-compat",Tee="@firebase/analytics",Aee="@firebase/app-check-compat",Ree="@firebase/app-check",Mee="@firebase/auth",Iee="@firebase/auth-compat",Nee="@firebase/database",Dee="@firebase/data-connect",Oee="@firebase/database-compat",Pee="@firebase/functions",Lee="@firebase/functions-compat",Vee="@firebase/installations",jee="@firebase/installations-compat",Bee="@firebase/messaging",$ee="@firebase/messaging-compat",Hee="@firebase/performance",Fee="@firebase/performance-compat",zee="@firebase/remote-config",Uee="@firebase/remote-config-compat",qee="@firebase/storage",Gee="@firebase/storage-compat",Kee="@firebase/firestore",Wee="@firebase/ai",Yee="@firebase/firestore-compat",Xee="firebase",Qee="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="[DEFAULT]",Zee={[oT]:"fire-core",[_ee]:"fire-core-compat",[Tee]:"fire-analytics",[kee]:"fire-analytics-compat",[Ree]:"fire-app-check",[Aee]:"fire-app-check-compat",[Mee]:"fire-auth",[Iee]:"fire-auth-compat",[Nee]:"fire-rtdb",[Dee]:"fire-data-connect",[Oee]:"fire-rtdb-compat",[Pee]:"fire-fn",[Lee]:"fire-fn-compat",[Vee]:"fire-iid",[jee]:"fire-iid-compat",[Bee]:"fire-fcm",[$ee]:"fire-fcm-compat",[Hee]:"fire-perf",[Fee]:"fire-perf-compat",[zee]:"fire-rc",[Uee]:"fire-rc-compat",[qee]:"fire-gcs",[Gee]:"fire-gcs-compat",[Kee]:"fire-fst",[Yee]:"fire-fst-compat",[Wee]:"fire-vertex","fire-js":"fire-js",[Xee]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=new Map,Jee=new Map,sT=new Map;function o4(t,e){try{t.container.addComponent(e)}catch(n){Kc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Up(t){const e=t.name;if(sT.has(e))return Kc.debug(`There were multiple attempts to register component ${e}.`),!1;sT.set(e,t);for(const n of _1.values())o4(n,t);for(const n of Jee.values())o4(n,t);return!0}function BA(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Va(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ete={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ud=new dv("app","Firebase",ete);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tte{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ud.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=Qee;function d8(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:iT,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw ud.create("bad-app-name",{appName:String(o)});if(n||(n=i8()),!n)throw ud.create("no-options");const i=_1.get(o);if(i){if(Xf(n,i.options)&&Xf(r,i.config))return i;throw ud.create("duplicate-app",{appName:o})}const s=new aee(o);for(const l of sT.values())s.addComponent(l);const a=new tte(n,r,s);return _1.set(o,a),a}function f8(t=iT){const e=_1.get(t);if(!e&&t===iT&&i8())return d8();if(!e)throw ud.create("no-app",{appName:t});return e}function dd(t,e,n){let r=Zee[t]??t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),i=e.match(/\s|\//);if(o||i){const s=[`Unable to register library "${r}" with version "${e}":`];o&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&i&&s.push("and"),i&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kc.warn(s.join(" "));return}Up(new Qf(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nte="firebase-heartbeat-database",rte=1,by="firebase-heartbeat-store";let l_=null;function h8(){return l_||(l_=wee(nte,rte,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(by)}catch(n){console.warn(n)}}}}).catch(t=>{throw ud.create("idb-open",{originalErrorMessage:t.message})})),l_}async function ote(t){try{const n=(await h8()).transaction(by),r=await n.objectStore(by).get(p8(t));return await n.done,r}catch(e){if(e instanceof eu)Kc.warn(e.message);else{const n=ud.create("idb-get",{originalErrorMessage:e?.message});Kc.warn(n.message)}}}async function i4(t,e){try{const r=(await h8()).transaction(by,"readwrite");await r.objectStore(by).put(e,p8(t)),await r.done}catch(n){if(n instanceof eu)Kc.warn(n.message);else{const r=ud.create("idb-set",{originalErrorMessage:n?.message});Kc.warn(r.message)}}}function p8(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ite=1024,ste=30;class ate{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cte(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=s4();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>ste){const o=ute(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Kc.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=s4(),{heartbeatsToSend:n,unsentEntries:r}=lte(this._heartbeatsCache.heartbeats),o=E1(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Kc.warn(e),""}}}function s4(){return new Date().toISOString().substring(0,10)}function lte(t,e=ite){const n=[];let r=t.slice();for(const o of t){const i=n.find(s=>s.agent===o.agent);if(i){if(i.dates.push(o.date),a4(n)>e){i.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),a4(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cte{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YJ()?XJ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ote(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return i4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return i4(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function a4(t){return E1(JSON.stringify({version:2,heartbeats:t})).length}function ute(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dte(t){Up(new Qf("platform-logger",e=>new xee(e),"PRIVATE")),Up(new Qf("heartbeat",e=>new ate(e),"PRIVATE")),dd(oT,r4,t),dd(oT,r4,"esm2020"),dd("fire-js","")}dte("");var l4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fd,m8;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,R){function M(){}M.prototype=R.prototype,O.D=R.prototype,O.prototype=new M,O.prototype.constructor=O,O.C=function(B,q,K){for(var F=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)F[ne-2]=arguments[ne];return R.prototype[q].apply(B,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,R,M){M||(M=0);var B=Array(16);if(typeof R=="string")for(var q=0;16>q;++q)B[q]=R.charCodeAt(M++)|R.charCodeAt(M++)<<8|R.charCodeAt(M++)<<16|R.charCodeAt(M++)<<24;else for(q=0;16>q;++q)B[q]=R[M++]|R[M++]<<8|R[M++]<<16|R[M++]<<24;R=O.g[0],M=O.g[1],q=O.g[2];var K=O.g[3],F=R+(K^M&(q^K))+B[0]+3614090360&4294967295;R=M+(F<<7&4294967295|F>>>25),F=K+(q^R&(M^q))+B[1]+3905402710&4294967295,K=R+(F<<12&4294967295|F>>>20),F=q+(M^K&(R^M))+B[2]+606105819&4294967295,q=K+(F<<17&4294967295|F>>>15),F=M+(R^q&(K^R))+B[3]+3250441966&4294967295,M=q+(F<<22&4294967295|F>>>10),F=R+(K^M&(q^K))+B[4]+4118548399&4294967295,R=M+(F<<7&4294967295|F>>>25),F=K+(q^R&(M^q))+B[5]+1200080426&4294967295,K=R+(F<<12&4294967295|F>>>20),F=q+(M^K&(R^M))+B[6]+2821735955&4294967295,q=K+(F<<17&4294967295|F>>>15),F=M+(R^q&(K^R))+B[7]+4249261313&4294967295,M=q+(F<<22&4294967295|F>>>10),F=R+(K^M&(q^K))+B[8]+1770035416&4294967295,R=M+(F<<7&4294967295|F>>>25),F=K+(q^R&(M^q))+B[9]+2336552879&4294967295,K=R+(F<<12&4294967295|F>>>20),F=q+(M^K&(R^M))+B[10]+4294925233&4294967295,q=K+(F<<17&4294967295|F>>>15),F=M+(R^q&(K^R))+B[11]+2304563134&4294967295,M=q+(F<<22&4294967295|F>>>10),F=R+(K^M&(q^K))+B[12]+1804603682&4294967295,R=M+(F<<7&4294967295|F>>>25),F=K+(q^R&(M^q))+B[13]+4254626195&4294967295,K=R+(F<<12&4294967295|F>>>20),F=q+(M^K&(R^M))+B[14]+2792965006&4294967295,q=K+(F<<17&4294967295|F>>>15),F=M+(R^q&(K^R))+B[15]+1236535329&4294967295,M=q+(F<<22&4294967295|F>>>10),F=R+(q^K&(M^q))+B[1]+4129170786&4294967295,R=M+(F<<5&4294967295|F>>>27),F=K+(M^q&(R^M))+B[6]+3225465664&4294967295,K=R+(F<<9&4294967295|F>>>23),F=q+(R^M&(K^R))+B[11]+643717713&4294967295,q=K+(F<<14&4294967295|F>>>18),F=M+(K^R&(q^K))+B[0]+3921069994&4294967295,M=q+(F<<20&4294967295|F>>>12),F=R+(q^K&(M^q))+B[5]+3593408605&4294967295,R=M+(F<<5&4294967295|F>>>27),F=K+(M^q&(R^M))+B[10]+38016083&4294967295,K=R+(F<<9&4294967295|F>>>23),F=q+(R^M&(K^R))+B[15]+3634488961&4294967295,q=K+(F<<14&4294967295|F>>>18),F=M+(K^R&(q^K))+B[4]+3889429448&4294967295,M=q+(F<<20&4294967295|F>>>12),F=R+(q^K&(M^q))+B[9]+568446438&4294967295,R=M+(F<<5&4294967295|F>>>27),F=K+(M^q&(R^M))+B[14]+3275163606&4294967295,K=R+(F<<9&4294967295|F>>>23),F=q+(R^M&(K^R))+B[3]+4107603335&4294967295,q=K+(F<<14&4294967295|F>>>18),F=M+(K^R&(q^K))+B[8]+1163531501&4294967295,M=q+(F<<20&4294967295|F>>>12),F=R+(q^K&(M^q))+B[13]+2850285829&4294967295,R=M+(F<<5&4294967295|F>>>27),F=K+(M^q&(R^M))+B[2]+4243563512&4294967295,K=R+(F<<9&4294967295|F>>>23),F=q+(R^M&(K^R))+B[7]+1735328473&4294967295,q=K+(F<<14&4294967295|F>>>18),F=M+(K^R&(q^K))+B[12]+2368359562&4294967295,M=q+(F<<20&4294967295|F>>>12),F=R+(M^q^K)+B[5]+4294588738&4294967295,R=M+(F<<4&4294967295|F>>>28),F=K+(R^M^q)+B[8]+2272392833&4294967295,K=R+(F<<11&4294967295|F>>>21),F=q+(K^R^M)+B[11]+1839030562&4294967295,q=K+(F<<16&4294967295|F>>>16),F=M+(q^K^R)+B[14]+4259657740&4294967295,M=q+(F<<23&4294967295|F>>>9),F=R+(M^q^K)+B[1]+2763975236&4294967295,R=M+(F<<4&4294967295|F>>>28),F=K+(R^M^q)+B[4]+1272893353&4294967295,K=R+(F<<11&4294967295|F>>>21),F=q+(K^R^M)+B[7]+4139469664&4294967295,q=K+(F<<16&4294967295|F>>>16),F=M+(q^K^R)+B[10]+3200236656&4294967295,M=q+(F<<23&4294967295|F>>>9),F=R+(M^q^K)+B[13]+681279174&4294967295,R=M+(F<<4&4294967295|F>>>28),F=K+(R^M^q)+B[0]+3936430074&4294967295,K=R+(F<<11&4294967295|F>>>21),F=q+(K^R^M)+B[3]+3572445317&4294967295,q=K+(F<<16&4294967295|F>>>16),F=M+(q^K^R)+B[6]+76029189&4294967295,M=q+(F<<23&4294967295|F>>>9),F=R+(M^q^K)+B[9]+3654602809&4294967295,R=M+(F<<4&4294967295|F>>>28),F=K+(R^M^q)+B[12]+3873151461&4294967295,K=R+(F<<11&4294967295|F>>>21),F=q+(K^R^M)+B[15]+530742520&4294967295,q=K+(F<<16&4294967295|F>>>16),F=M+(q^K^R)+B[2]+3299628645&4294967295,M=q+(F<<23&4294967295|F>>>9),F=R+(q^(M|~K))+B[0]+4096336452&4294967295,R=M+(F<<6&4294967295|F>>>26),F=K+(M^(R|~q))+B[7]+1126891415&4294967295,K=R+(F<<10&4294967295|F>>>22),F=q+(R^(K|~M))+B[14]+2878612391&4294967295,q=K+(F<<15&4294967295|F>>>17),F=M+(K^(q|~R))+B[5]+4237533241&4294967295,M=q+(F<<21&4294967295|F>>>11),F=R+(q^(M|~K))+B[12]+1700485571&4294967295,R=M+(F<<6&4294967295|F>>>26),F=K+(M^(R|~q))+B[3]+2399980690&4294967295,K=R+(F<<10&4294967295|F>>>22),F=q+(R^(K|~M))+B[10]+4293915773&4294967295,q=K+(F<<15&4294967295|F>>>17),F=M+(K^(q|~R))+B[1]+2240044497&4294967295,M=q+(F<<21&4294967295|F>>>11),F=R+(q^(M|~K))+B[8]+1873313359&4294967295,R=M+(F<<6&4294967295|F>>>26),F=K+(M^(R|~q))+B[15]+4264355552&4294967295,K=R+(F<<10&4294967295|F>>>22),F=q+(R^(K|~M))+B[6]+2734768916&4294967295,q=K+(F<<15&4294967295|F>>>17),F=M+(K^(q|~R))+B[13]+1309151649&4294967295,M=q+(F<<21&4294967295|F>>>11),F=R+(q^(M|~K))+B[4]+4149444226&4294967295,R=M+(F<<6&4294967295|F>>>26),F=K+(M^(R|~q))+B[11]+3174756917&4294967295,K=R+(F<<10&4294967295|F>>>22),F=q+(R^(K|~M))+B[2]+718787259&4294967295,q=K+(F<<15&4294967295|F>>>17),F=M+(K^(q|~R))+B[9]+3951481745&4294967295,O.g[0]=O.g[0]+R&4294967295,O.g[1]=O.g[1]+(q+(F<<21&4294967295|F>>>11))&4294967295,O.g[2]=O.g[2]+q&4294967295,O.g[3]=O.g[3]+K&4294967295}r.prototype.u=function(O,R){R===void 0&&(R=O.length);for(var M=R-this.blockSize,B=this.B,q=this.h,K=0;K<R;){if(q==0)for(;K<=M;)o(this,O,K),K+=this.blockSize;if(typeof O=="string"){for(;K<R;)if(B[q++]=O.charCodeAt(K++),q==this.blockSize){o(this,B),q=0;break}}else for(;K<R;)if(B[q++]=O[K++],q==this.blockSize){o(this,B),q=0;break}}this.h=q,this.o+=R},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var R=1;R<O.length-8;++R)O[R]=0;var M=8*this.o;for(R=O.length-8;R<O.length;++R)O[R]=M&255,M/=256;for(this.u(O),O=Array(16),R=M=0;4>R;++R)for(var B=0;32>B;B+=8)O[M++]=this.g[R]>>>B&255;return O};function i(O,R){var M=a;return Object.prototype.hasOwnProperty.call(M,O)?M[O]:M[O]=R(O)}function s(O,R){this.h=R;for(var M=[],B=!0,q=O.length-1;0<=q;q--){var K=O[q]|0;B&&K==R||(M[q]=K,B=!1)}this.g=M}var a={};function l(O){return-128<=O&&128>O?i(O,function(R){return new s([R|0],0>R?-1:0)}):new s([O|0],0>O?-1:0)}function u(O){if(isNaN(O)||!isFinite(O))return h;if(0>O)return E(u(-O));for(var R=[],M=1,B=0;O>=M;B++)R[B]=O/M|0,M*=4294967296;return new s(R,0)}function f(O,R){if(O.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(O.charAt(0)=="-")return E(f(O.substring(1),R));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=u(Math.pow(R,8)),B=h,q=0;q<O.length;q+=8){var K=Math.min(8,O.length-q),F=parseInt(O.substring(q,q+K),R);8>K?(K=u(Math.pow(R,K)),B=B.j(K).add(u(F))):(B=B.j(M),B=B.add(u(F)))}return B}var h=l(0),p=l(1),g=l(16777216);t=s.prototype,t.m=function(){if(b(this))return-E(this).m();for(var O=0,R=1,M=0;M<this.g.length;M++){var B=this.i(M);O+=(0<=B?B:4294967296+B)*R,R*=4294967296}return O},t.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(v(this))return"0";if(b(this))return"-"+E(this).toString(O);for(var R=u(Math.pow(O,6)),M=this,B="";;){var q=z(M,R).g;M=T(M,q.j(R));var K=((0<M.g.length?M.g[0]:M.h)>>>0).toString(O);if(M=q,v(M))return K+B;for(;6>K.length;)K="0"+K;B=K+B}},t.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function v(O){if(O.h!=0)return!1;for(var R=0;R<O.g.length;R++)if(O.g[R]!=0)return!1;return!0}function b(O){return O.h==-1}t.l=function(O){return O=T(this,O),b(O)?-1:v(O)?0:1};function E(O){for(var R=O.g.length,M=[],B=0;B<R;B++)M[B]=~O.g[B];return new s(M,~O.h).add(p)}t.abs=function(){return b(this)?E(this):this},t.add=function(O){for(var R=Math.max(this.g.length,O.g.length),M=[],B=0,q=0;q<=R;q++){var K=B+(this.i(q)&65535)+(O.i(q)&65535),F=(K>>>16)+(this.i(q)>>>16)+(O.i(q)>>>16);B=F>>>16,K&=65535,F&=65535,M[q]=F<<16|K}return new s(M,M[M.length-1]&-2147483648?-1:0)};function T(O,R){return O.add(E(R))}t.j=function(O){if(v(this)||v(O))return h;if(b(this))return b(O)?E(this).j(E(O)):E(E(this).j(O));if(b(O))return E(this.j(E(O)));if(0>this.l(g)&&0>O.l(g))return u(this.m()*O.m());for(var R=this.g.length+O.g.length,M=[],B=0;B<2*R;B++)M[B]=0;for(B=0;B<this.g.length;B++)for(var q=0;q<O.g.length;q++){var K=this.i(B)>>>16,F=this.i(B)&65535,ne=O.i(q)>>>16,oe=O.i(q)&65535;M[2*B+2*q]+=F*oe,P(M,2*B+2*q),M[2*B+2*q+1]+=K*oe,P(M,2*B+2*q+1),M[2*B+2*q+1]+=F*ne,P(M,2*B+2*q+1),M[2*B+2*q+2]+=K*ne,P(M,2*B+2*q+2)}for(B=0;B<R;B++)M[B]=M[2*B+1]<<16|M[2*B];for(B=R;B<2*R;B++)M[B]=0;return new s(M,0)};function P(O,R){for(;(O[R]&65535)!=O[R];)O[R+1]+=O[R]>>>16,O[R]&=65535,R++}function D(O,R){this.g=O,this.h=R}function z(O,R){if(v(R))throw Error("division by zero");if(v(O))return new D(h,h);if(b(O))return R=z(E(O),R),new D(E(R.g),E(R.h));if(b(R))return R=z(O,E(R)),new D(E(R.g),R.h);if(30<O.g.length){if(b(O)||b(R))throw Error("slowDivide_ only works with positive integers.");for(var M=p,B=R;0>=B.l(O);)M=V(M),B=V(B);var q=$(M,1),K=$(B,1);for(B=$(B,2),M=$(M,2);!v(B);){var F=K.add(B);0>=F.l(O)&&(q=q.add(M),K=F),B=$(B,1),M=$(M,1)}return R=T(O,q.j(R)),new D(q,R)}for(q=h;0<=O.l(R);){for(M=Math.max(1,Math.floor(O.m()/R.m())),B=Math.ceil(Math.log(M)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),K=u(M),F=K.j(R);b(F)||0<F.l(O);)M-=B,K=u(M),F=K.j(R);v(K)&&(K=p),q=q.add(K),O=T(O,F)}return new D(q,O)}t.A=function(O){return z(this,O).h},t.and=function(O){for(var R=Math.max(this.g.length,O.g.length),M=[],B=0;B<R;B++)M[B]=this.i(B)&O.i(B);return new s(M,this.h&O.h)},t.or=function(O){for(var R=Math.max(this.g.length,O.g.length),M=[],B=0;B<R;B++)M[B]=this.i(B)|O.i(B);return new s(M,this.h|O.h)},t.xor=function(O){for(var R=Math.max(this.g.length,O.g.length),M=[],B=0;B<R;B++)M[B]=this.i(B)^O.i(B);return new s(M,this.h^O.h)};function V(O){for(var R=O.g.length+1,M=[],B=0;B<R;B++)M[B]=O.i(B)<<1|O.i(B-1)>>>31;return new s(M,O.h)}function $(O,R){var M=R>>5;R%=32;for(var B=O.g.length-M,q=[],K=0;K<B;K++)q[K]=0<R?O.i(K+M)>>>R|O.i(K+M+1)<<32-R:O.i(K+M);return new s(q,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,m8=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,fd=s}).apply(typeof l4<"u"?l4:typeof self<"u"?self:typeof window<"u"?window:{});var sb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var g8,Bg,y8,Gb,aT,v8,b8,w8;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(w,N,H){return w==Array.prototype||w==Object.prototype||(w[N]=H.value),w};function n(w){w=[typeof globalThis=="object"&&globalThis,w,typeof window=="object"&&window,typeof self=="object"&&self,typeof sb=="object"&&sb];for(var N=0;N<w.length;++N){var H=w[N];if(H&&H.Math==Math)return H}throw Error("Cannot find global object")}var r=n(this);function o(w,N){if(N)e:{var H=r;w=w.split(".");for(var ee=0;ee<w.length-1;ee++){var xe=w[ee];if(!(xe in H))break e;H=H[xe]}w=w[w.length-1],ee=H[w],N=N(ee),N!=ee&&N!=null&&e(H,w,{configurable:!0,writable:!0,value:N})}}function i(w,N){w instanceof String&&(w+="");var H=0,ee=!1,xe={next:function(){if(!ee&&H<w.length){var Ne=H++;return{value:N(Ne,w[Ne]),done:!1}}return ee=!0,{done:!0,value:void 0}}};return xe[Symbol.iterator]=function(){return xe},xe}o("Array.prototype.values",function(w){return w||function(){return i(this,function(N,H){return H})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(w){var N=typeof w;return N=N!="object"?N:w?Array.isArray(w)?"array":N:"null",N=="array"||N=="object"&&typeof w.length=="number"}function u(w){var N=typeof w;return N=="object"&&w!=null||N=="function"}function f(w,N,H){return w.call.apply(w.bind,arguments)}function h(w,N,H){if(!w)throw Error();if(2<arguments.length){var ee=Array.prototype.slice.call(arguments,2);return function(){var xe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(xe,ee),w.apply(N,xe)}}return function(){return w.apply(N,arguments)}}function p(w,N,H){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:h,p.apply(null,arguments)}function g(w,N){var H=Array.prototype.slice.call(arguments,1);return function(){var ee=H.slice();return ee.push.apply(ee,arguments),w.apply(this,ee)}}function v(w,N){function H(){}H.prototype=N.prototype,w.aa=N.prototype,w.prototype=new H,w.prototype.constructor=w,w.Qb=function(ee,xe,Ne){for(var Ze=Array(arguments.length-2),dn=2;dn<arguments.length;dn++)Ze[dn-2]=arguments[dn];return N.prototype[xe].apply(ee,Ze)}}function b(w){const N=w.length;if(0<N){const H=Array(N);for(let ee=0;ee<N;ee++)H[ee]=w[ee];return H}return[]}function E(w,N){for(let H=1;H<arguments.length;H++){const ee=arguments[H];if(l(ee)){const xe=w.length||0,Ne=ee.length||0;w.length=xe+Ne;for(let Ze=0;Ze<Ne;Ze++)w[xe+Ze]=ee[Ze]}else w.push(ee)}}class T{constructor(N,H){this.i=N,this.j=H,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function P(w){return/^[\s\xa0]*$/.test(w)}function D(){var w=a.navigator;return w&&(w=w.userAgent)?w:""}function z(w){return z[" "](w),w}z[" "]=function(){};var V=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function $(w,N,H){for(const ee in w)N.call(H,w[ee],ee,w)}function O(w,N){for(const H in w)N.call(void 0,w[H],H,w)}function R(w){const N={};for(const H in w)N[H]=w[H];return N}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(w,N){let H,ee;for(let xe=1;xe<arguments.length;xe++){ee=arguments[xe];for(H in ee)w[H]=ee[H];for(let Ne=0;Ne<M.length;Ne++)H=M[Ne],Object.prototype.hasOwnProperty.call(ee,H)&&(w[H]=ee[H])}}function q(w){var N=1;w=w.split(":");const H=[];for(;0<N&&w.length;)H.push(w.shift()),N--;return w.length&&H.push(w.join(":")),H}function K(w){a.setTimeout(()=>{throw w},0)}function F(){var w=J;let N=null;return w.g&&(N=w.g,w.g=w.g.next,w.g||(w.h=null),N.next=null),N}class ne{constructor(){this.h=this.g=null}add(N,H){const ee=oe.get();ee.set(N,H),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var oe=new T(()=>new j,w=>w.reset());class j{constructor(){this.next=this.g=this.h=null}set(N,H){this.h=N,this.g=H,this.next=null}reset(){this.next=this.g=this.h=null}}let U,Z=!1,J=new ne,Y=()=>{const w=a.Promise.resolve(void 0);U=()=>{w.then(se)}};var se=()=>{for(var w;w=F();){try{w.h.call(w.g)}catch(H){K(H)}var N=oe;N.j(w),100>N.h&&(N.h++,w.next=N.g,N.g=w)}Z=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(w,N){this.type=w,this.g=this.target=N,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ue=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var w=!1,N=Object.defineProperty({},"passive",{get:function(){w=!0}});try{const H=()=>{};a.addEventListener("test",H,N),a.removeEventListener("test",H,N)}catch{}return w}();function ae(w,N){if(ie.call(this,w?w.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,w){var H=this.type=w.type,ee=w.changedTouches&&w.changedTouches.length?w.changedTouches[0]:null;if(this.target=w.target||w.srcElement,this.g=N,N=w.relatedTarget){if(V){e:{try{z(N.nodeName);var xe=!0;break e}catch{}xe=!1}xe||(N=null)}}else H=="mouseover"?N=w.fromElement:H=="mouseout"&&(N=w.toElement);this.relatedTarget=N,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0),this.button=w.button,this.key=w.key||"",this.ctrlKey=w.ctrlKey,this.altKey=w.altKey,this.shiftKey=w.shiftKey,this.metaKey=w.metaKey,this.pointerId=w.pointerId||0,this.pointerType=typeof w.pointerType=="string"?w.pointerType:ve[w.pointerType]||"",this.state=w.state,this.i=w,w.defaultPrevented&&ae.aa.h.call(this)}}v(ae,ie);var ve={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var w=this.i;w.preventDefault?w.preventDefault():w.returnValue=!1};var De="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function Oe(w,N,H,ee,xe){this.listener=w,this.proxy=null,this.src=N,this.type=H,this.capture=!!ee,this.ha=xe,this.key=++Ue,this.da=this.fa=!1}function rt(w){w.da=!0,w.listener=null,w.proxy=null,w.src=null,w.ha=null}function wt(w){this.src=w,this.g={},this.h=0}wt.prototype.add=function(w,N,H,ee,xe){var Ne=w.toString();w=this.g[Ne],w||(w=this.g[Ne]=[],this.h++);var Ze=mn(w,N,ee,xe);return-1<Ze?(N=w[Ze],H||(N.fa=!1)):(N=new Oe(N,this.src,Ne,!!ee,xe),N.fa=H,w.push(N)),N};function tt(w,N){var H=N.type;if(H in w.g){var ee=w.g[H],xe=Array.prototype.indexOf.call(ee,N,void 0),Ne;(Ne=0<=xe)&&Array.prototype.splice.call(ee,xe,1),Ne&&(rt(N),w.g[H].length==0&&(delete w.g[H],w.h--))}}function mn(w,N,H,ee){for(var xe=0;xe<w.length;++xe){var Ne=w[xe];if(!Ne.da&&Ne.listener==N&&Ne.capture==!!H&&Ne.ha==ee)return xe}return-1}var Ln="closure_lm_"+(1e6*Math.random()|0),$t={};function $n(w,N,H,ee,xe){if(Array.isArray(N)){for(var Ne=0;Ne<N.length;Ne++)$n(w,N[Ne],H,ee,xe);return null}return H=_n(H),w&&w[De]?w.K(N,H,u(ee)?!!ee.capture:!1,xe):At(w,N,H,!1,ee,xe)}function At(w,N,H,ee,xe,Ne){if(!N)throw Error("Invalid event type");var Ze=u(xe)?!!xe.capture:!!xe,dn=Wt(w);if(dn||(w[Ln]=dn=new wt(w)),H=dn.add(N,H,ee,Ze,Ne),H.proxy)return H;if(ee=sn(),H.proxy=ee,ee.src=w,ee.listener=H,w.addEventListener)ue||(xe=Ze),xe===void 0&&(xe=!1),w.addEventListener(N.toString(),ee,xe);else if(w.attachEvent)w.attachEvent(Ut(N.toString()),ee);else if(w.addListener&&w.removeListener)w.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return H}function sn(){function w(H){return N.call(w.src,w.listener,H)}const N=gn;return w}function Jt(w,N,H,ee,xe){if(Array.isArray(N))for(var Ne=0;Ne<N.length;Ne++)Jt(w,N[Ne],H,ee,xe);else ee=u(ee)?!!ee.capture:!!ee,H=_n(H),w&&w[De]?(w=w.i,N=String(N).toString(),N in w.g&&(Ne=w.g[N],H=mn(Ne,H,ee,xe),-1<H&&(rt(Ne[H]),Array.prototype.splice.call(Ne,H,1),Ne.length==0&&(delete w.g[N],w.h--)))):w&&(w=Wt(w))&&(N=w.g[N.toString()],w=-1,N&&(w=mn(N,H,ee,xe)),(H=-1<w?N[w]:null)&&Vt(H))}function Vt(w){if(typeof w!="number"&&w&&!w.da){var N=w.src;if(N&&N[De])tt(N.i,w);else{var H=w.type,ee=w.proxy;N.removeEventListener?N.removeEventListener(H,ee,w.capture):N.detachEvent?N.detachEvent(Ut(H),ee):N.addListener&&N.removeListener&&N.removeListener(ee),(H=Wt(N))?(tt(H,w),H.h==0&&(H.src=null,N[Ln]=null)):rt(w)}}}function Ut(w){return w in $t?$t[w]:$t[w]="on"+w}function gn(w,N){if(w.da)w=!0;else{N=new ae(N,this);var H=w.listener,ee=w.ha||w.src;w.fa&&Vt(w),w=H.call(ee,N)}return w}function Wt(w){return w=w[Ln],w instanceof wt?w:null}var an="__closure_events_fn_"+(1e9*Math.random()>>>0);function _n(w){return typeof w=="function"?w:(w[an]||(w[an]=function(N){return w.handleEvent(N)}),w[an])}function Ht(){te.call(this),this.i=new wt(this),this.M=this,this.F=null}v(Ht,te),Ht.prototype[De]=!0,Ht.prototype.removeEventListener=function(w,N,H,ee){Jt(this,w,N,H,ee)};function Ft(w,N){var H,ee=w.F;if(ee)for(H=[];ee;ee=ee.F)H.push(ee);if(w=w.M,ee=N.type||N,typeof N=="string")N=new ie(N,w);else if(N instanceof ie)N.target=N.target||w;else{var xe=N;N=new ie(ee,w),B(N,xe)}if(xe=!0,H)for(var Ne=H.length-1;0<=Ne;Ne--){var Ze=N.g=H[Ne];xe=un(Ze,ee,!0,N)&&xe}if(Ze=N.g=w,xe=un(Ze,ee,!0,N)&&xe,xe=un(Ze,ee,!1,N)&&xe,H)for(Ne=0;Ne<H.length;Ne++)Ze=N.g=H[Ne],xe=un(Ze,ee,!1,N)&&xe}Ht.prototype.N=function(){if(Ht.aa.N.call(this),this.i){var w=this.i,N;for(N in w.g){for(var H=w.g[N],ee=0;ee<H.length;ee++)rt(H[ee]);delete w.g[N],w.h--}}this.F=null},Ht.prototype.K=function(w,N,H,ee){return this.i.add(String(w),N,!1,H,ee)},Ht.prototype.L=function(w,N,H,ee){return this.i.add(String(w),N,!0,H,ee)};function un(w,N,H,ee){if(N=w.i.g[String(N)],!N)return!0;N=N.concat();for(var xe=!0,Ne=0;Ne<N.length;++Ne){var Ze=N[Ne];if(Ze&&!Ze.da&&Ze.capture==H){var dn=Ze.listener,Dr=Ze.ha||Ze.src;Ze.fa&&tt(w.i,Ze),xe=dn.call(Dr,ee)!==!1&&xe}}return xe&&!ee.defaultPrevented}function kn(w,N,H){if(typeof w=="function")H&&(w=p(w,H));else if(w&&typeof w.handleEvent=="function")w=p(w.handleEvent,w);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:a.setTimeout(w,N||0)}function Vn(w){w.g=kn(()=>{w.g=null,w.i&&(w.i=!1,Vn(w))},w.l);const N=w.h;w.h=null,w.m.apply(null,N)}class kr extends te{constructor(N,H){super(),this.m=N,this.l=H,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Vn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xn(w){te.call(this),this.h=w,this.g={}}v(xn,te);var br=[];function wr(w){$(w.g,function(N,H){this.g.hasOwnProperty(H)&&Vt(N)},w),w.g={}}xn.prototype.N=function(){xn.aa.N.call(this),wr(this)},xn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jn=a.JSON.stringify,nt=a.JSON.parse,Do=class{stringify(w){return a.JSON.stringify(w,void 0)}parse(w){return a.JSON.parse(w,void 0)}};function Br(){}Br.prototype.h=null;function Nr(w){return w.h||(w.h=w.i())}function Qe(){}var Oo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Cr(){ie.call(this,"d")}v(Cr,ie);function $r(){ie.call(this,"c")}v($r,ie);var ft={},Tn=null;function Hn(){return Tn=Tn||new Ht}ft.La="serverreachability";function Fn(w){ie.call(this,ft.La,w)}v(Fn,ie);function Qn(w){const N=Hn();Ft(N,new Fn(N))}ft.STAT_EVENT="statevent";function Gn(w,N){ie.call(this,ft.STAT_EVENT,w),this.stat=N}v(Gn,ie);function Yt(w){const N=Hn();Ft(N,new Gn(N,w))}ft.Ma="timingevent";function Kn(w,N){ie.call(this,ft.Ma,w),this.size=N}v(Kn,ie);function mt(w,N){if(typeof w!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){w()},N)}function qt(){this.g=!0}qt.prototype.xa=function(){this.g=!1};function il(w,N,H,ee,xe,Ne){w.info(function(){if(w.g)if(Ne)for(var Ze="",dn=Ne.split("&"),Dr=0;Dr<dn.length;Dr++){var yn=dn[Dr].split("=");if(1<yn.length){var zr=yn[0];yn=yn[1];var Tr=zr.split("_");Ze=2<=Tr.length&&Tr[1]=="type"?Ze+(zr+"="+yn+"&"):Ze+(zr+"=redacted&")}}else Ze=null;else Ze=Ne;return"XMLHTTP REQ ("+ee+") [attempt "+xe+"]: "+N+`
`+H+`
`+Ze})}function Jo(w,N,H,ee,xe,Ne,Ze){w.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+xe+"]: "+N+`
`+H+`
`+Ne+" "+Ze})}function Pi(w,N,H,ee){w.info(function(){return"XMLHTTP TEXT ("+N+"): "+ec(w,H)+(ee?" "+ee:"")})}function Jl(w,N){w.info(function(){return"TIMEOUT: "+N})}qt.prototype.info=function(){};function ec(w,N){if(!w.g)return N;if(!N)return null;try{var H=JSON.parse(N);if(H){for(w=0;w<H.length;w++)if(Array.isArray(H[w])){var ee=H[w];if(!(2>ee.length)){var xe=ee[1];if(Array.isArray(xe)&&!(1>xe.length)){var Ne=xe[0];if(Ne!="noop"&&Ne!="stop"&&Ne!="close")for(var Ze=1;Ze<xe.length;Ze++)xe[Ze]=""}}}}return jn(H)}catch{return N}}var Po={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ei={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},co;function Si(){}v(Si,Br),Si.prototype.g=function(){return new XMLHttpRequest},Si.prototype.i=function(){return{}},co=new Si;function Lo(w,N,H,ee){this.j=w,this.i=N,this.l=H,this.R=ee||1,this.U=new xn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zn}function zn(){this.i=null,this.g="",this.h=!1}var su={},Li={};function Vi(w,N,H){w.L=1,w.v=al(bo(N)),w.m=H,w.P=!0,cs(w,null)}function cs(w,N){w.F=Date.now(),Vo(w),w.A=bo(w.v);var H=w.A,ee=w.R;Array.isArray(ee)||(ee=[String(ee)]),ti(H.i,"t",ee),w.C=0,H=w.j.J,w.h=new zn,w.g=mu(w.j,H?N:null,!w.m),0<w.O&&(w.M=new kr(p(w.Y,w,w.g),w.O)),N=w.U,H=w.g,ee=w.ca;var xe="readystatechange";Array.isArray(xe)||(xe&&(br[0]=xe.toString()),xe=br);for(var Ne=0;Ne<xe.length;Ne++){var Ze=$n(H,xe[Ne],ee||N.handleEvent,!1,N.h||N);if(!Ze)break;N.g[Ze.key]=Ze}N=w.H?R(w.H):{},w.m?(w.u||(w.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",w.g.ea(w.A,w.u,w.m,N)):(w.u="GET",w.g.ea(w.A,w.u,null,N)),Qn(),il(w.i,w.u,w.A,w.l,w.R,w.m)}Lo.prototype.ca=function(w){w=w.target;const N=this.M;N&&ri(w)==3?N.j():this.Y(w)},Lo.prototype.Y=function(w){try{if(w==this.g)e:{const Tr=ri(this.g);var N=this.g.Ba();const Gs=this.g.Z();if(!(3>Tr)&&(Tr!=3||this.g&&(this.h.h||this.g.oa()||du(this.g)))){this.J||Tr!=4||N==7||(N==8||0>=Gs?Qn(3):Qn(2)),xi(this);var H=this.g.Z();this.X=H;t:if(cr(this)){var ee=du(this.g);w="";var xe=ee.length,Ne=ri(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hr(this),Ei(this);var Ze="";break t}this.h.i=new a.TextDecoder}for(N=0;N<xe;N++)this.h.h=!0,w+=this.h.i.decode(ee[N],{stream:!(Ne&&N==xe-1)});ee.length=0,this.h.g+=w,this.C=0,Ze=this.h.g}else Ze=this.g.oa();if(this.o=H==200,Jo(this.i,this.u,this.A,this.l,this.R,Tr,H),this.o){if(this.T&&!this.K){t:{if(this.g){var dn,Dr=this.g;if((dn=Dr.g?Dr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(dn)){var yn=dn;break t}}yn=null}if(H=yn)Pi(this.i,this.l,H,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ba(this,H);else{this.o=!1,this.s=3,Yt(12),Hr(this),Ei(this);break e}}if(this.P){H=!0;let Zr;for(;!this.J&&this.C<Ze.length;)if(Zr=Ls(this,Ze),Zr==Li){Tr==4&&(this.s=4,Yt(14),H=!1),Pi(this.i,this.l,null,"[Incomplete Response]");break}else if(Zr==su){this.s=4,Yt(15),Pi(this.i,this.l,Ze,"[Invalid Chunk]"),H=!1;break}else Pi(this.i,this.l,Zr,null),ba(this,Zr);if(cr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tr!=4||Ze.length!=0||this.h.h||(this.s=1,Yt(16),H=!1),this.o=this.o&&H,!H)Pi(this.i,this.l,Ze,"[Invalid Chunked Response]"),Hr(this),Ei(this);else if(0<Ze.length&&!this.W){this.W=!0;var zr=this.j;zr.g==this&&zr.ba&&!zr.M&&(zr.j.info("Great, no buffering proxy detected. Bytes received: "+Ze.length),hs(zr),zr.M=!0,Yt(11))}}else Pi(this.i,this.l,Ze,null),ba(this,Ze);Tr==4&&Hr(this),this.o&&!this.J&&(Tr==4?rf(this.j,this):(this.o=!1,Vo(this)))}else Th(this.g),H==400&&0<Ze.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),Hr(this),Ei(this)}}}catch{}finally{}};function cr(w){return w.g?w.u=="GET"&&w.L!=2&&w.j.Ca:!1}function Ls(w,N){var H=w.C,ee=N.indexOf(`
`,H);return ee==-1?Li:(H=Number(N.substring(H,ee)),isNaN(H)?su:(ee+=1,ee+H>N.length?Li:(N=N.slice(ee,ee+H),w.C=ee+H,N)))}Lo.prototype.cancel=function(){this.J=!0,Hr(this)};function Vo(w){w.S=Date.now()+w.I,Xd(w,w.I)}function Xd(w,N){if(w.B!=null)throw Error("WatchDog timer not null");w.B=mt(p(w.ba,w),N)}function xi(w){w.B&&(a.clearTimeout(w.B),w.B=null)}Lo.prototype.ba=function(){this.B=null;const w=Date.now();0<=w-this.S?(Jl(this.i,this.A),this.L!=2&&(Qn(),Yt(17)),Hr(this),this.s=2,Ei(this)):Xd(this,this.S-w)};function Ei(w){w.j.G==0||w.J||rf(w.j,w)}function Hr(w){xi(w);var N=w.M;N&&typeof N.ma=="function"&&N.ma(),w.M=null,wr(w.U),w.g&&(N=w.g,w.g=null,N.abort(),N.ma())}function ba(w,N){try{var H=w.j;if(H.G!=0&&(H.g==w||Xt(H.h,w))){if(!w.K&&Xt(H.h,w)&&H.G==3){try{var ee=H.Da.g.parse(N)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var xe=ee;if(xe[0]==0){e:if(!H.u){if(H.g)if(H.g.F+3e3<w.F)Ma(H),ic(H);else break e;Ra(H),Yt(18)}}else H.za=xe[1],0<H.za-H.T&&37500>xe[2]&&H.F&&H.v==0&&!H.C&&(H.C=mt(p(H.Za,H),6e3));if(1>=tc(H.h)&&H.ca){try{H.ca()}catch{}H.ca=void 0}}else zi(H,11)}else if((w.K||H.g==w)&&Ma(H),!P(N))for(xe=H.Da.g.parse(N),N=0;N<xe.length;N++){let yn=xe[N];if(H.T=yn[0],yn=yn[1],H.G==2)if(yn[0]=="c"){H.K=yn[1],H.ia=yn[2];const zr=yn[3];zr!=null&&(H.la=zr,H.j.info("VER="+H.la));const Tr=yn[4];Tr!=null&&(H.Aa=Tr,H.j.info("SVER="+H.Aa));const Gs=yn[5];Gs!=null&&typeof Gs=="number"&&0<Gs&&(ee=1.5*Gs,H.L=ee,H.j.info("backChannelRequestTimeoutMs_="+ee)),ee=H;const Zr=w.g;if(Zr){const Ks=Zr.g?Zr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ks){var Ne=ee.h;Ne.g||Ks.indexOf("spdy")==-1&&Ks.indexOf("quic")==-1&&Ks.indexOf("h2")==-1||(Ne.j=Ne.l,Ne.g=new Set,Ne.h&&(nc(Ne,Ne.h),Ne.h=null))}if(ee.D){const sf=Zr.g?Zr.g.getResponseHeader("X-HTTP-Session-Id"):null;sf&&(ee.ya=sf,An(ee.I,ee.D,sf))}}H.G=3,H.l&&H.l.ua(),H.ba&&(H.R=Date.now()-w.F,H.j.info("Handshake RTT: "+H.R+"ms")),ee=H;var Ze=w;if(ee.qa=qs(ee,ee.J?ee.ia:null,ee.W),Ze.K){vo(ee.h,Ze);var dn=Ze,Dr=ee.L;Dr&&(dn.I=Dr),dn.B&&(xi(dn),Vo(dn)),ee.g=Ze}else Fr(ee);0<H.i.length&&Ta(H)}else yn[0]!="stop"&&yn[0]!="close"||zi(H,7);else H.G==3&&(yn[0]=="stop"||yn[0]=="close"?yn[0]=="stop"?zi(H,7):dl(H):yn[0]!="noop"&&H.l&&H.l.ta(yn),H.v=0)}}Qn(4)}catch{}}var Vs=class{constructor(w,N){this.g=w,this.map=N}};function js(w){this.l=w||10,a.PerformanceNavigationTiming?(w=a.performance.getEntriesByType("navigation"),w=0<w.length&&(w[0].nextHopProtocol=="hq"||w[0].nextHopProtocol=="h2")):w=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=w?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wa(w){return w.h?!0:w.g?w.g.size>=w.j:!1}function tc(w){return w.h?1:w.g?w.g.size:0}function Xt(w,N){return w.h?w.h==N:w.g?w.g.has(N):!1}function nc(w,N){w.g?w.g.add(N):w.h=N}function vo(w,N){w.h&&w.h==N?w.h=null:w.g&&w.g.has(N)&&w.g.delete(N)}js.prototype.cancel=function(){if(this.i=au(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const w of this.g.values())w.cancel();this.g.clear()}};function au(w){if(w.h!=null)return w.i.concat(w.h.D);if(w.g!=null&&w.g.size!==0){let N=w.i;for(const H of w.g.values())N=N.concat(H.D);return N}return b(w.i)}function Wn(w){if(w.V&&typeof w.V=="function")return w.V();if(typeof Map<"u"&&w instanceof Map||typeof Set<"u"&&w instanceof Set)return Array.from(w.values());if(typeof w=="string")return w.split("");if(l(w)){for(var N=[],H=w.length,ee=0;ee<H;ee++)N.push(w[ee]);return N}N=[],H=0;for(ee in w)N[H++]=w[ee];return N}function Bs(w){if(w.na&&typeof w.na=="function")return w.na();if(!w.V||typeof w.V!="function"){if(typeof Map<"u"&&w instanceof Map)return Array.from(w.keys());if(!(typeof Set<"u"&&w instanceof Set)){if(l(w)||typeof w=="string"){var N=[];w=w.length;for(var H=0;H<w;H++)N.push(H);return N}N=[],H=0;for(const ee in w)N[H++]=ee;return N}}}function Ca(w,N){if(w.forEach&&typeof w.forEach=="function")w.forEach(N,void 0);else if(l(w)||typeof w=="string")Array.prototype.forEach.call(w,N,void 0);else for(var H=Bs(w),ee=Wn(w),xe=ee.length,Ne=0;Ne<xe;Ne++)N.call(void 0,ee[Ne],H&&H[Ne],w)}var ji=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qd(w,N){if(w){w=w.split("&");for(var H=0;H<w.length;H++){var ee=w[H].indexOf("="),xe=null;if(0<=ee){var Ne=w[H].substring(0,ee);xe=w[H].substring(ee+1)}else Ne=w[H];N(Ne,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}function Sr(w){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,w instanceof Sr){this.h=w.h,sl(this,w.j),this.o=w.o,this.g=w.g,us(this,w.s),this.l=w.l;var N=w.i,H=new wo;H.i=N.i,N.g&&(H.g=new Map(N.g),H.h=N.h),$s(this,H),this.m=w.m}else w&&(N=String(w).match(ji))?(this.h=!1,sl(this,N[1]||"",!0),this.o=Bi(N[2]||""),this.g=Bi(N[3]||"",!0),us(this,N[4]),this.l=Bi(N[5]||"",!0),$s(this,N[6]||"",!0),this.m=Bi(N[7]||"")):(this.h=!1,this.i=new wo(null,this.h))}Sr.prototype.toString=function(){var w=[],N=this.j;N&&w.push(en(N,Zd,!0),":");var H=this.g;return(H||N=="file")&&(w.push("//"),(N=this.o)&&w.push(en(N,Zd,!0),"@"),w.push(encodeURIComponent(String(H)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),H=this.s,H!=null&&w.push(":",String(H))),(H=this.l)&&(this.g&&H.charAt(0)!="/"&&w.push("/"),w.push(en(H,H.charAt(0)=="/"?jo:Jd,!0))),(H=this.i.toString())&&w.push("?",H),(H=this.m)&&w.push("#",en(H,Sa)),w.join("")};function bo(w){return new Sr(w)}function sl(w,N,H){w.j=H?Bi(N,!0):N,w.j&&(w.j=w.j.replace(/:$/,""))}function us(w,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);w.s=N}else w.s=null}function $s(w,N,H){N instanceof wo?(w.i=N,cl(w.i,w.h)):(H||(N=en(N,ll)),w.i=new wo(N,w.h))}function An(w,N,H){w.i.set(N,H)}function al(w){return An(w,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),w}function Bi(w,N){return w?N?decodeURI(w.replace(/%25/g,"%2525")):decodeURIComponent(w):""}function en(w,N,H){return typeof w=="string"?(w=encodeURI(w).replace(N,lu),H&&(w=w.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w):null}function lu(w){return w=w.charCodeAt(0),"%"+(w>>4&15).toString(16)+(w&15).toString(16)}var Zd=/[#\/\?@]/g,Jd=/[#\?:]/g,jo=/[#\?]/g,ll=/[#\?@]/g,Sa=/#/g;function wo(w,N){this.h=this.g=null,this.i=w||null,this.j=!!N}function _i(w){w.g||(w.g=new Map,w.h=0,w.i&&Qd(w.i,function(N,H){w.add(decodeURIComponent(N.replace(/\+/g," ")),H)}))}t=wo.prototype,t.add=function(w,N){_i(this),this.i=null,w=ni(this,w);var H=this.g.get(w);return H||this.g.set(w,H=[]),H.push(N),this.h+=1,this};function Hs(w,N){_i(w),N=ni(w,N),w.g.has(N)&&(w.i=null,w.h-=w.g.get(N).length,w.g.delete(N))}function Zn(w,N){return _i(w),N=ni(w,N),w.g.has(N)}t.forEach=function(w,N){_i(this),this.g.forEach(function(H,ee){H.forEach(function(xe){w.call(N,xe,ee,this)},this)},this)},t.na=function(){_i(this);const w=Array.from(this.g.values()),N=Array.from(this.g.keys()),H=[];for(let ee=0;ee<N.length;ee++){const xe=w[ee];for(let Ne=0;Ne<xe.length;Ne++)H.push(N[ee])}return H},t.V=function(w){_i(this);let N=[];if(typeof w=="string")Zn(this,w)&&(N=N.concat(this.g.get(ni(this,w))));else{w=Array.from(this.g.values());for(let H=0;H<w.length;H++)N=N.concat(w[H])}return N},t.set=function(w,N){return _i(this),this.i=null,w=ni(this,w),Zn(this,w)&&(this.h-=this.g.get(w).length),this.g.set(w,[N]),this.h+=1,this},t.get=function(w,N){return w?(w=this.V(w),0<w.length?String(w[0]):N):N};function ti(w,N,H){Hs(w,N),0<H.length&&(w.i=null,w.g.set(ni(w,N),b(H)),w.h+=H.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const w=[],N=Array.from(this.g.keys());for(var H=0;H<N.length;H++){var ee=N[H];const Ne=encodeURIComponent(String(ee)),Ze=this.V(ee);for(ee=0;ee<Ze.length;ee++){var xe=Ne;Ze[ee]!==""&&(xe+="="+encodeURIComponent(String(Ze[ee]))),w.push(xe)}}return this.i=w.join("&")};function ni(w,N){return N=String(N),w.j&&(N=N.toLowerCase()),N}function cl(w,N){N&&!w.j&&(_i(w),w.i=null,w.g.forEach(function(H,ee){var xe=ee.toLowerCase();ee!=xe&&(Hs(this,ee),ti(this,xe,H))},w)),w.j=N}function xa(w,N){const H=new qt;if(a.Image){const ee=new Image;ee.onload=g($i,H,"TestLoadImage: loaded",!0,N,ee),ee.onerror=g($i,H,"TestLoadImage: error",!1,N,ee),ee.onabort=g($i,H,"TestLoadImage: abort",!1,N,ee),ee.ontimeout=g($i,H,"TestLoadImage: timeout",!1,N,ee),a.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=w}else N(!1)}function Qr(w,N){const H=new qt,ee=new AbortController,xe=setTimeout(()=>{ee.abort(),$i(H,"TestPingServer: timeout",!1,N)},1e4);fetch(w,{signal:ee.signal}).then(Ne=>{clearTimeout(xe),Ne.ok?$i(H,"TestPingServer: ok",!0,N):$i(H,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(xe),$i(H,"TestPingServer: error",!1,N)})}function $i(w,N,H,ee,xe){try{xe&&(xe.onload=null,xe.onerror=null,xe.onabort=null,xe.ontimeout=null),ee(H)}catch{}}function Co(){this.g=new Do}function Hi(w,N,H){const ee=H||"";try{Ca(w,function(xe,Ne){let Ze=xe;u(xe)&&(Ze=jn(xe)),N.push(ee+Ne+"="+encodeURIComponent(Ze))})}catch(xe){throw N.push(ee+"type="+encodeURIComponent("_badmap")),xe}}function Ea(w){this.l=w.Ub||null,this.j=w.eb||!1}v(Ea,Br),Ea.prototype.g=function(){return new ds(this.l,this.j)},Ea.prototype.i=function(w){return function(){return w}}({});function ds(w,N){Ht.call(this),this.D=w,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(ds,Ht),t=ds.prototype,t.open=function(w,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=w,this.A=N,this.readyState=1,fs(this)},t.send=function(w){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};w&&(N.body=w),(this.D||a).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fi(this)),this.readyState=0},t.Sa=function(w){if(this.g&&(this.l=w,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=w.headers,this.readyState=2,fs(this)),this.g&&(this.readyState=3,fs(this),this.g)))if(this.responseType==="arraybuffer")w.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in w){if(this.j=w.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_a(this)}else w.text().then(this.Ra.bind(this),this.ga.bind(this))};function _a(w){w.j.read().then(w.Pa.bind(w)).catch(w.ga.bind(w))}t.Pa=function(w){if(this.g){if(this.o&&w.value)this.response.push(w.value);else if(!this.o){var N=w.value?w.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!w.done}))&&(this.response=this.responseText+=N)}w.done?Fi(this):fs(this),this.readyState==3&&_a(this)}},t.Ra=function(w){this.g&&(this.response=this.responseText=w,Fi(this))},t.Qa=function(w){this.g&&(this.response=w,Fi(this))},t.ga=function(){this.g&&Fi(this)};function Fi(w){w.readyState=4,w.l=null,w.j=null,w.v=null,fs(w)}t.setRequestHeader=function(w,N){this.u.append(w,N)},t.getResponseHeader=function(w){return this.h&&this.h.get(w.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const w=[],N=this.h.entries();for(var H=N.next();!H.done;)H=H.value,w.push(H[0]+": "+H[1]),H=N.next();return w.join(`\r
`)};function fs(w){w.onreadystatechange&&w.onreadystatechange.call(w)}Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(w){this.m=w?"include":"same-origin"}});function ef(w){let N="";return $(w,function(H,ee){N+=ee,N+=":",N+=H,N+=`\r
`}),N}function xr(w,N,H){e:{for(ee in H){var ee=!1;break e}ee=!0}ee||(H=ef(H),typeof w=="string"?H!=null&&encodeURIComponent(String(H)):An(w,N,H))}function Dn(w){Ht.call(this),this.headers=new Map,this.o=w||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Dn,Ht);var cu=/^https?$/i,Fs=["POST","PUT"];t=Dn.prototype,t.Ha=function(w){this.J=w},t.ea=function(w,N,H,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+w);N=N?N.toUpperCase():"GET",this.D=w,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():co.g(),this.v=this.o?Nr(this.o):Nr(co),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(N,String(w),!0),this.B=!1}catch(Ne){rc(this,Ne);return}if(w=H||"",H=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var xe in ee)H.set(xe,ee[xe]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const Ne of ee.keys())H.set(Ne,ee.get(Ne));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(H.keys()).find(Ne=>Ne.toLowerCase()=="content-type"),xe=a.FormData&&w instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Fs,N,void 0))||ee||xe||H.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ne,Ze]of H)this.g.setRequestHeader(Ne,Ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oc(this),this.u=!0,this.g.send(w),this.u=!1}catch(Ne){rc(this,Ne)}};function rc(w,N){w.h=!1,w.g&&(w.j=!0,w.g.abort(),w.j=!1),w.l=N,w.m=5,ul(w),zs(w)}function ul(w){w.A||(w.A=!0,Ft(w,"complete"),Ft(w,"error"))}t.abort=function(w){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=w||7,Ft(this,"complete"),Ft(this,"abort"),zs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zs(this,!0)),Dn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?uu(this):this.bb())},t.bb=function(){uu(this)};function uu(w){if(w.h&&typeof s<"u"&&(!w.v[1]||ri(w)!=4||w.Z()!=2)){if(w.u&&ri(w)==4)kn(w.Ea,0,w);else if(Ft(w,"readystatechange"),ri(w)==4){w.h=!1;try{const Ze=w.Z();e:switch(Ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var H;if(!(H=N)){var ee;if(ee=Ze===0){var xe=String(w.D).match(ji)[1]||null;!xe&&a.self&&a.self.location&&(xe=a.self.location.protocol.slice(0,-1)),ee=!cu.test(xe?xe.toLowerCase():"")}H=ee}if(H)Ft(w,"complete"),Ft(w,"success");else{w.m=6;try{var Ne=2<ri(w)?w.g.statusText:""}catch{Ne=""}w.l=Ne+" ["+w.Z()+"]",ul(w)}}finally{zs(w)}}}}function zs(w,N){if(w.g){oc(w);const H=w.g,ee=w.v[0]?()=>{}:null;w.g=null,w.v=null,N||Ft(w,"ready");try{H.onreadystatechange=ee}catch{}}}function oc(w){w.I&&(a.clearTimeout(w.I),w.I=null)}t.isActive=function(){return!!this.g};function ri(w){return w.g?w.g.readyState:0}t.Z=function(){try{return 2<ri(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(w){if(this.g){var N=this.g.responseText;return w&&N.indexOf(w)==0&&(N=N.substring(w.length)),nt(N)}};function du(w){try{if(!w.g)return null;if("response"in w.g)return w.g.response;switch(w.H){case"":case"text":return w.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in w.g)return w.g.mozResponseArrayBuffer}return null}catch{return null}}function Th(w){const N={};w=(w.g&&2<=ri(w)&&w.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<w.length;ee++){if(P(w[ee]))continue;var H=q(w[ee]);const xe=H[0];if(H=H[1],typeof H!="string")continue;H=H.trim();const Ne=N[xe]||[];N[xe]=Ne,Ne.push(H)}O(N,function(ee){return ee.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Us(w,N,H){return H&&H.internalChannelParams&&H.internalChannelParams[w]||N}function ka(w){this.Aa=0,this.i=[],this.j=new qt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Us("failFast",!1,w),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Us("baseRetryDelayMs",5e3,w),this.cb=Us("retryDelaySeedMs",1e4,w),this.Wa=Us("forwardChannelMaxRetries",2,w),this.wa=Us("forwardChannelRequestTimeoutMs",2e4,w),this.pa=w&&w.xmlHttpFactory||void 0,this.Xa=w&&w.Tb||void 0,this.Ca=w&&w.useFetchStreams||!1,this.L=void 0,this.J=w&&w.supportsCrossDomainXhr||!1,this.K="",this.h=new js(w&&w.concurrentRequestLimit),this.Da=new Co,this.P=w&&w.fastHandshake||!1,this.O=w&&w.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=w&&w.Rb||!1,w&&w.xa&&this.j.xa(),w&&w.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&w&&w.detectBufferingProxy||!1,this.ja=void 0,w&&w.longPollingTimeout&&0<w.longPollingTimeout&&(this.ja=w.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ka.prototype,t.la=8,t.G=1,t.connect=function(w,N,H,ee){Yt(0),this.W=w,this.H=N||{},H&&ee!==void 0&&(this.H.OSID=H,this.H.OAID=ee),this.F=this.X,this.I=qs(this,null,this.W),Ta(this)};function dl(w){if(Ah(w),w.G==3){var N=w.U++,H=bo(w.I);if(An(H,"SID",w.K),An(H,"RID",N),An(H,"TYPE","terminate"),Aa(w,H),N=new Lo(w,w.j,N),N.L=2,N.v=al(bo(H)),H=!1,a.navigator&&a.navigator.sendBeacon)try{H=a.navigator.sendBeacon(N.v.toString(),"")}catch{}!H&&a.Image&&(new Image().src=N.v,H=!0),H||(N.g=mu(N.j,null),N.g.ea(N.v)),N.F=Date.now(),Vo(N)}pu(w)}function ic(w){w.g&&(hs(w),w.g.cancel(),w.g=null)}function Ah(w){ic(w),w.u&&(a.clearTimeout(w.u),w.u=null),Ma(w),w.h.cancel(),w.s&&(typeof w.s=="number"&&a.clearTimeout(w.s),w.s=null)}function Ta(w){if(!wa(w.h)&&!w.s){w.s=!0;var N=w.Ga;U||Y(),Z||(U(),Z=!0),J.add(N,w),w.B=0}}function tf(w,N){return tc(w.h)>=w.h.j-(w.s?1:0)?!1:w.s?(w.i=N.D.concat(w.i),!0):w.G==1||w.G==2||w.B>=(w.Va?0:w.Wa)?!1:(w.s=mt(p(w.Ga,w,N),hu(w,w.B)),w.B++,!0)}t.Ga=function(w){if(this.s)if(this.s=null,this.G==1){if(!w){this.U=Math.floor(1e5*Math.random()),w=this.U++;const xe=new Lo(this,this.j,w);let Ne=this.o;if(this.S&&(Ne?(Ne=R(Ne),B(Ne,this.S)):Ne=this.S),this.m!==null||this.O||(xe.H=Ne,Ne=null),this.P)e:{for(var N=0,H=0;H<this.i.length;H++){t:{var ee=this.i[H];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(N+=ee,4096<N){N=H;break e}if(N===4096||H===this.i.length-1){N=H+1;break e}}N=1e3}else N=1e3;N=fu(this,xe,N),H=bo(this.I),An(H,"RID",w),An(H,"CVER",22),this.D&&An(H,"X-HTTP-Session-Id",this.D),Aa(this,H),Ne&&(this.O?N="headers="+encodeURIComponent(String(ef(Ne)))+"&"+N:this.m&&xr(H,this.m,Ne)),nc(this.h,xe),this.Ua&&An(H,"TYPE","init"),this.P?(An(H,"$req",N),An(H,"SID","null"),xe.T=!0,Vi(xe,H,null)):Vi(xe,H,N),this.G=2}}else this.G==3&&(w?sc(this,w):this.i.length==0||wa(this.h)||sc(this))};function sc(w,N){var H;N?H=N.l:H=w.U++;const ee=bo(w.I);An(ee,"SID",w.K),An(ee,"RID",H),An(ee,"AID",w.T),Aa(w,ee),w.m&&w.o&&xr(ee,w.m,w.o),H=new Lo(w,w.j,H,w.B+1),w.m===null&&(H.H=w.o),N&&(w.i=N.D.concat(w.i)),N=fu(w,H,1e3),H.I=Math.round(.5*w.wa)+Math.round(.5*w.wa*Math.random()),nc(w.h,H),Vi(H,ee,N)}function Aa(w,N){w.H&&$(w.H,function(H,ee){An(N,ee,H)}),w.l&&Ca({},function(H,ee){An(N,ee,H)})}function fu(w,N,H){H=Math.min(w.i.length,H);var ee=w.l?p(w.l.Na,w.l,w):null;e:{var xe=w.i;let Ne=-1;for(;;){const Ze=["count="+H];Ne==-1?0<H?(Ne=xe[0].g,Ze.push("ofs="+Ne)):Ne=0:Ze.push("ofs="+Ne);let dn=!0;for(let Dr=0;Dr<H;Dr++){let yn=xe[Dr].g;const zr=xe[Dr].map;if(yn-=Ne,0>yn)Ne=Math.max(0,xe[Dr].g-100),dn=!1;else try{Hi(zr,Ze,"req"+yn+"_")}catch{ee&&ee(zr)}}if(dn){ee=Ze.join("&");break e}}}return w=w.i.splice(0,H),N.D=w,ee}function Fr(w){if(!w.g&&!w.u){w.Y=1;var N=w.Fa;U||Y(),Z||(U(),Z=!0),J.add(N,w),w.v=0}}function Ra(w){return w.g||w.u||3<=w.v?!1:(w.Y++,w.u=mt(p(w.Fa,w),hu(w,w.v)),w.v++,!0)}t.Fa=function(){if(this.u=null,nf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var w=2*this.R;this.j.info("BP detection timer enabled: "+w),this.A=mt(p(this.ab,this),w)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),ic(this),nf(this))};function hs(w){w.A!=null&&(a.clearTimeout(w.A),w.A=null)}function nf(w){w.g=new Lo(w,w.j,"rpc",w.Y),w.m===null&&(w.g.H=w.o),w.g.O=0;var N=bo(w.qa);An(N,"RID","rpc"),An(N,"SID",w.K),An(N,"AID",w.T),An(N,"CI",w.F?"0":"1"),!w.F&&w.ja&&An(N,"TO",w.ja),An(N,"TYPE","xmlhttp"),Aa(w,N),w.m&&w.o&&xr(N,w.m,w.o),w.L&&(w.g.I=w.L);var H=w.g;w=w.ia,H.L=1,H.v=al(bo(N)),H.m=null,H.P=!0,cs(H,w)}t.Za=function(){this.C!=null&&(this.C=null,ic(this),Ra(this),Yt(19))};function Ma(w){w.C!=null&&(a.clearTimeout(w.C),w.C=null)}function rf(w,N){var H=null;if(w.g==N){Ma(w),hs(w),w.g=null;var ee=2}else if(Xt(w.h,N))H=N.D,vo(w.h,N),ee=1;else return;if(w.G!=0){if(N.o)if(ee==1){H=N.m?N.m.length:0,N=Date.now()-N.F;var xe=w.B;ee=Hn(),Ft(ee,new Kn(ee,H)),Ta(w)}else Fr(w);else if(xe=N.s,xe==3||xe==0&&0<N.X||!(ee==1&&tf(w,N)||ee==2&&Ra(w)))switch(H&&0<H.length&&(N=w.h,N.i=N.i.concat(H)),xe){case 1:zi(w,5);break;case 4:zi(w,10);break;case 3:zi(w,6);break;default:zi(w,2)}}}function hu(w,N){let H=w.Ta+Math.floor(Math.random()*w.cb);return w.isActive()||(H*=2),H*N}function zi(w,N){if(w.j.info("Error code "+N),N==2){var H=p(w.fb,w),ee=w.Xa;const xe=!ee;ee=new Sr(ee||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||sl(ee,"https"),al(ee),xe?xa(ee.toString(),H):Qr(ee.toString(),H)}else Yt(2);w.G=0,w.l&&w.l.sa(N),pu(w),Ah(w)}t.fb=function(w){w?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function pu(w){if(w.G=0,w.ka=[],w.l){const N=au(w.h);(N.length!=0||w.i.length!=0)&&(E(w.ka,N),E(w.ka,w.i),w.h.i.length=0,b(w.i),w.i.length=0),w.l.ra()}}function qs(w,N,H){var ee=H instanceof Sr?bo(H):new Sr(H);if(ee.g!="")N&&(ee.g=N+"."+ee.g),us(ee,ee.s);else{var xe=a.location;ee=xe.protocol,N=N?N+"."+xe.hostname:xe.hostname,xe=+xe.port;var Ne=new Sr(null);ee&&sl(Ne,ee),N&&(Ne.g=N),xe&&us(Ne,xe),H&&(Ne.l=H),ee=Ne}return H=w.D,N=w.ya,H&&N&&An(ee,H,N),An(ee,"VER",w.la),Aa(w,ee),ee}function mu(w,N,H){if(N&&!w.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=w.Ca&&!w.pa?new Dn(new Ea({eb:H})):new Dn(w.pa),N.Ha(w.J),N}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gu(){}t=gu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ia(){}Ia.prototype.g=function(w,N){return new uo(w,N)};function uo(w,N){Ht.call(this),this.g=new ka(N),this.l=w,this.h=N&&N.messageUrlParams||null,w=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(w?w["X-Client-Protocol"]="webchannel":w={"X-Client-Protocol":"webchannel"}),this.g.o=w,w=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(w?w["X-WebChannel-Content-Type"]=N.messageContentType:w={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(w?w["X-WebChannel-Client-Profile"]=N.va:w={"X-WebChannel-Client-Profile":N.va}),this.g.S=w,(w=N&&N.Sb)&&!P(w)&&(this.g.m=w),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!P(N)&&(this.g.D=N,w=this.h,w!==null&&N in w&&(w=this.h,N in w&&delete w[N])),this.j=new Ui(this)}v(uo,Ht),uo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},uo.prototype.close=function(){dl(this.g)},uo.prototype.o=function(w){var N=this.g;if(typeof w=="string"){var H={};H.__data__=w,w=H}else this.u&&(H={},H.__data__=jn(w),w=H);N.i.push(new Vs(N.Ya++,w)),N.G==3&&Ta(N)},uo.prototype.N=function(){this.g.l=null,delete this.j,dl(this.g),delete this.g,uo.aa.N.call(this)};function of(w){Cr.call(this),w.__headers__&&(this.headers=w.__headers__,this.statusCode=w.__status__,delete w.__headers__,delete w.__status__);var N=w.__sm__;if(N){e:{for(const H in N){w=H;break e}w=void 0}(this.i=w)&&(w=this.i,N=N!==null&&w in N?N[w]:void 0),this.data=N}else this.data=w}v(of,Cr);function Rh(){$r.call(this),this.status=1}v(Rh,$r);function Ui(w){this.g=w}v(Ui,gu),Ui.prototype.ua=function(){Ft(this.g,"a")},Ui.prototype.ta=function(w){Ft(this.g,new of(w))},Ui.prototype.sa=function(w){Ft(this.g,new Rh)},Ui.prototype.ra=function(){Ft(this.g,"b")},Ia.prototype.createWebChannel=Ia.prototype.g,uo.prototype.send=uo.prototype.o,uo.prototype.open=uo.prototype.m,uo.prototype.close=uo.prototype.close,w8=function(){return new Ia},b8=function(){return Hn()},v8=ft,aT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Po.NO_ERROR=0,Po.TIMEOUT=8,Po.HTTP_ERROR=6,Gb=Po,ei.COMPLETE="complete",y8=ei,Qe.EventType=Oo,Oo.OPEN="a",Oo.CLOSE="b",Oo.ERROR="c",Oo.MESSAGE="d",Ht.prototype.listen=Ht.prototype.K,Bg=Qe,Dn.prototype.listenOnce=Dn.prototype.L,Dn.prototype.getLastError=Dn.prototype.Ka,Dn.prototype.getLastErrorCode=Dn.prototype.Ba,Dn.prototype.getStatus=Dn.prototype.Z,Dn.prototype.getResponseJson=Dn.prototype.Oa,Dn.prototype.getResponseText=Dn.prototype.oa,Dn.prototype.send=Dn.prototype.ea,Dn.prototype.setWithCredentials=Dn.prototype.Ha,g8=Dn}).apply(typeof sb<"u"?sb:typeof self<"u"?self:typeof window<"u"?window:{});const c4="@firebase/firestore",u4="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}di.UNAUTHENTICATED=new di(null),di.GOOGLE_CREDENTIALS=new di("google-credentials-uid"),di.FIRST_PARTY=new di("first-party-uid"),di.MOCK_USER=new di("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cm="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=new VA("@firebase/firestore");function dp(){return Zf.logLevel}function it(t,...e){if(Zf.logLevel<=vn.DEBUG){const n=e.map($A);Zf.debug(`Firestore (${Cm}): ${t}`,...n)}}function Wc(t,...e){if(Zf.logLevel<=vn.ERROR){const n=e.map($A);Zf.error(`Firestore (${Cm}): ${t}`,...n)}}function qp(t,...e){if(Zf.logLevel<=vn.WARN){const n=e.map($A);Zf.warn(`Firestore (${Cm}): ${t}`,...n)}}function $A(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,C8(t,r,n)}function C8(t,e,n){let r=`FIRESTORE (${Cm}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Wc(r),new Error(r)}function qn(t,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,t||C8(e,o,r)}function zt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const He={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class st extends eu{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fte{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(di.UNAUTHENTICATED))}shutdown(){}}class hte{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class pte{constructor(e){this.t=e,this.currentUser=di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qn(this.o===void 0,42304);let r=this.i;const o=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new hd;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new hd,e.enqueueRetryable(()=>o(this.currentUser))};const s=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await o(this.currentUser)})},a=l=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new hd)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qn(typeof r.accessToken=="string",31837,{l:r}),new S8(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qn(e===null||typeof e=="string",2055,{h:e}),new di(e)}}class mte{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=di.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gte{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new mte(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(di.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class d4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yte{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Va(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qn(this.o===void 0,3512);const r=i=>{i.error!=null&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const s=i.token!==this.m;return this.m=i.token,it("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const o=i=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>o(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?o(i):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new d4(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new d4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vte(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=vte(40);for(let i=0;i<o.length;++i)r.length<20&&o[i]<n&&(r+=e.charAt(o[i]%62))}return r}}function bn(t,e){return t<e?-1:t>e?1:0}function lT(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const o=t.charAt(r),i=e.charAt(r);if(o!==i)return c_(o)===c_(i)?bn(o,i):c_(o)?1:-1}return bn(t.length,e.length)}const bte=55296,wte=57343;function c_(t){const e=t.charCodeAt(0);return e>=bte&&e<=wte}function Gp(t,e,n){return t.length===e.length&&t.every((r,o)=>n(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4="__name__";class El{constructor(e,n,r){n===void 0?n=0:n>e.length&&Rt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Rt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return El.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof El?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const i=El.compareSegments(e.get(o),n.get(o));if(i!==0)return i}return bn(e.length,n.length)}static compareSegments(e,n){const r=El.isNumericId(e),o=El.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?El.extractNumericId(e).compare(El.extractNumericId(n)):lT(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fd.fromString(e.substring(4,e.length-2))}}class fr extends El{construct(e,n,r){return new fr(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new st(He.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new fr(n)}static emptyPath(){return new fr([])}}const Cte=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yo extends El{construct(e,n,r){return new Yo(e,n,r)}static isValidIdentifier(e){return Cte.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yo.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===f4}static keyField(){return new Yo([f4])}static fromServerFormat(e){const n=[];let r="",o=0;const i=()=>{if(r.length===0)throw new st(He.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;o<e.length;){const a=e[o];if(a==="\\"){if(o+1===e.length)throw new st(He.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[o+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new st(He.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,o+=2}else a==="`"?(s=!s,o++):a!=="."||s?(r+=a,o++):(i(),o++)}if(i(),s)throw new st(He.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yo(n)}static emptyPath(){return new Yo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.path=e}static fromPath(e){return new vt(fr.fromString(e))}static fromName(e){return new vt(fr.fromString(e).popFirst(5))}static empty(){return new vt(fr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vt(new fr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8(t,e,n){if(!n)throw new st(He.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ste(t,e,n,r){if(e===!0&&r===!0)throw new st(He.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function h4(t){if(!vt.isDocumentKey(t))throw new st(He.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function p4(t){if(vt.isDocumentKey(t))throw new st(He.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function E8(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function OC(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Rt(12329,{type:typeof t})}function Kp(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new st(He.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=OC(t);throw new st(He.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t,e){const n={typeString:t};return e&&(n.value=e),n}function hv(t,e){if(!E8(t))throw new st(He.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(o&&typeof s!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(i!==void 0&&s!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new st(He.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=-62135596800,g4=1e6;class sr{static now(){return sr.fromMillis(Date.now())}static fromDate(e){return sr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*g4);return new sr(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new st(He.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new st(He.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<m4)throw new st(He.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new st(He.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/g4}_compareTo(e){return this.seconds===e.seconds?bn(this.nanoseconds,e.nanoseconds):bn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:sr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(hv(e,sr._jsonSchema))return new sr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-m4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}sr._jsonSchemaVersion="firestore/timestamp/1.0",sr._jsonSchema={type:io("string",sr._jsonSchemaVersion),seconds:io("number"),nanoseconds:io("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{static fromTimestamp(e){return new Bt(e)}static min(){return new Bt(new sr(0,0))}static max(){return new Bt(new sr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=-1;function xte(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,o=Bt.fromTimestamp(r===1e9?new sr(n+1,0):new sr(n,r));return new Cd(o,vt.empty(),e)}function Ete(t){return new Cd(t.readTime,t.key,wy)}class Cd{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Cd(Bt.min(),vt.empty(),wy)}static max(){return new Cd(Bt.max(),vt.empty(),wy)}}function _te(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=vt.comparator(t.documentKey,e.documentKey),n!==0?n:bn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kte="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tte{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sm(t){if(t.code!==He.FAILED_PRECONDITION||t.message!==kte)throw t;it("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Rt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Fe((r,o)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,o)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Fe?n:Fe.resolve(n)}catch(n){return Fe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Fe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Fe.reject(n)}static resolve(e){return new Fe((n,r)=>{n(e)})}static reject(e){return new Fe((n,r)=>{r(e)})}static waitFor(e){return new Fe((n,r)=>{let o=0,i=0,s=!1;e.forEach(a=>{++o,a.next(()=>{++i,s&&i===o&&n()},l=>r(l))}),s=!0,i===o&&n()})}static or(e){let n=Fe.resolve(!1);for(const r of e)n=n.next(o=>o?Fe.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,i)=>{r.push(n.call(this,o,i))}),this.waitFor(r)}static mapArray(e,n){return new Fe((r,o)=>{const i=e.length,s=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(f=>{s[u]=f,++a,a===i&&r(s)},f=>o(f))}})}static doWhile(e,n){return new Fe((r,o)=>{const i=()=>{e()===!0?n().next(()=>{i()},o):r()};i()})}}function Ate(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}PC.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=-1;function LC(t){return t==null}function k1(t){return t===0&&1/t==-1/0}function Rte(t){return typeof t=="number"&&Number.isInteger(t)&&!k1(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8="";function Mte(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=y4(e)),e=Ite(t.get(n),e);return y4(e)}function Ite(t,e){let n=e;const r=t.length;for(let o=0;o<r;o++){const i=t.charAt(o);switch(i){case"\0":n+="";break;case _8:n+="";break;default:n+=i}}return n}function y4(t){return t+_8+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function mh(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function k8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n){this.comparator=e,this.root=n||Go.EMPTY}insert(e,n){return new Ir(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Go.BLACK,null,null))}remove(e){return new Ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Go.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ab(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ab(this.root,e,this.comparator,!1)}getReverseIterator(){return new ab(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ab(this.root,e,this.comparator,!0)}}class ab{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&o&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Go{constructor(e,n,r,o,i){this.key=e,this.value=n,this.color=r??Go.RED,this.left=o??Go.EMPTY,this.right=i??Go.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,i){return new Go(e??this.key,n??this.value,r??this.color,o??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const i=r(e,o.key);return o=i<0?o.copy(null,null,null,o.left.insert(e,n,r),null):i===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Go.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Go.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Go.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Go.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Rt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Rt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Rt(27949);return e+(this.isRed()?0:1)}}Go.EMPTY=null,Go.RED=!0,Go.BLACK=!1;Go.EMPTY=new class{constructor(){this.size=0}get key(){throw Rt(57766)}get value(){throw Rt(16141)}get color(){throw Rt(16727)}get left(){throw Rt(29726)}get right(){throw Rt(36894)}copy(e,n,r,o,i){return this}insert(e,n,r){return new Go(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.comparator=e,this.data=new Ir(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new b4(this.data.getIterator())}getIteratorFrom(e){return new b4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,i=r.getNext().key;if(this.comparator(o,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yo(this.comparator);return n.data=e,n}}class b4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.fields=e,e.sort(Yo.comparator)}static empty(){return new $a([])}unionWith(e){let n=new yo(Yo.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $a(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gp(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new T8("Invalid base64 string: "+i):i}}(e);return new Qo(n)}static fromUint8Array(e){const n=function(o){let i="";for(let s=0;s<o.length;++s)i+=String.fromCharCode(o[s]);return i}(e);return new Qo(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qo.EMPTY_BYTE_STRING=new Qo("");const Nte=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sd(t){if(qn(!!t,39018),typeof t=="string"){let e=0;const n=Nte.exec(t);if(qn(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Kr(t.seconds),nanos:Kr(t.nanos)}}function Kr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xd(t){return typeof t=="string"?Qo.fromBase64String(t):Qo.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8="server_timestamp",R8="__type__",M8="__previous_value__",I8="__local_write_time__";function zA(t){return(t?.mapValue?.fields||{})[R8]?.stringValue===A8}function VC(t){const e=t.mapValue.fields[M8];return zA(e)?VC(e):e}function Cy(t){const e=Sd(t.mapValue.fields[I8].timestampValue);return new sr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dte{constructor(e,n,r,o,i,s,a,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const T1="(default)";class Sy{constructor(e,n){this.projectId=e,this.database=n||T1}static empty(){return new Sy("","")}get isDefaultDatabase(){return this.database===T1}isEqual(e){return e instanceof Sy&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8="__type__",Ote="__max__",lb={mapValue:{}},D8="__vector__",A1="value";function Ed(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zA(t)?4:Lte(t)?9007199254740991:Pte(t)?10:11:Rt(28295,{value:t})}function Bl(t,e){if(t===e)return!0;const n=Ed(t);if(n!==Ed(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cy(t).isEqual(Cy(e));case 3:return function(o,i){if(typeof o.timestampValue=="string"&&typeof i.timestampValue=="string"&&o.timestampValue.length===i.timestampValue.length)return o.timestampValue===i.timestampValue;const s=Sd(o.timestampValue),a=Sd(i.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(o,i){return xd(o.bytesValue).isEqual(xd(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,i){return Kr(o.geoPointValue.latitude)===Kr(i.geoPointValue.latitude)&&Kr(o.geoPointValue.longitude)===Kr(i.geoPointValue.longitude)}(t,e);case 2:return function(o,i){if("integerValue"in o&&"integerValue"in i)return Kr(o.integerValue)===Kr(i.integerValue);if("doubleValue"in o&&"doubleValue"in i){const s=Kr(o.doubleValue),a=Kr(i.doubleValue);return s===a?k1(s)===k1(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Gp(t.arrayValue.values||[],e.arrayValue.values||[],Bl);case 10:case 11:return function(o,i){const s=o.mapValue.fields||{},a=i.mapValue.fields||{};if(v4(s)!==v4(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Bl(s[l],a[l])))return!1;return!0}(t,e);default:return Rt(52216,{left:t})}}function xy(t,e){return(t.values||[]).find(n=>Bl(n,e))!==void 0}function Wp(t,e){if(t===e)return 0;const n=Ed(t),r=Ed(e);if(n!==r)return bn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bn(t.booleanValue,e.booleanValue);case 2:return function(i,s){const a=Kr(i.integerValue||i.doubleValue),l=Kr(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return w4(t.timestampValue,e.timestampValue);case 4:return w4(Cy(t),Cy(e));case 5:return lT(t.stringValue,e.stringValue);case 6:return function(i,s){const a=xd(i),l=xd(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const a=i.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){const f=bn(a[u],l[u]);if(f!==0)return f}return bn(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const a=bn(Kr(i.latitude),Kr(s.latitude));return a!==0?a:bn(Kr(i.longitude),Kr(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return C4(t.arrayValue,e.arrayValue);case 10:return function(i,s){const a=i.fields||{},l=s.fields||{},u=a[A1]?.arrayValue,f=l[A1]?.arrayValue,h=bn(u?.values?.length||0,f?.values?.length||0);return h!==0?h:C4(u,f)}(t.mapValue,e.mapValue);case 11:return function(i,s){if(i===lb.mapValue&&s===lb.mapValue)return 0;if(i===lb.mapValue)return 1;if(s===lb.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=s.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let h=0;h<l.length&&h<f.length;++h){const p=lT(l[h],f[h]);if(p!==0)return p;const g=Wp(a[l[h]],u[f[h]]);if(g!==0)return g}return bn(l.length,f.length)}(t.mapValue,e.mapValue);default:throw Rt(23264,{he:n})}}function w4(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return bn(t,e);const n=Sd(t),r=Sd(e),o=bn(n.seconds,r.seconds);return o!==0?o:bn(n.nanos,r.nanos)}function C4(t,e){const n=t.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const i=Wp(n[o],r[o]);if(i)return i}return bn(n.length,r.length)}function Yp(t){return cT(t)}function cT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Sd(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xd(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return vt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",o=!0;for(const i of n.values||[])o?o=!1:r+=",",r+=cT(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",i=!0;for(const s of r)i?i=!1:o+=",",o+=`${s}:${cT(n.fields[s])}`;return o+"}"}(t.mapValue):Rt(61005,{value:t})}function Kb(t){switch(Ed(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=VC(t);return e?16+Kb(e):16;case 5:return 2*t.stringValue.length;case 6:return xd(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,i)=>o+Kb(i),0)}(t.arrayValue);case 10:case 11:return function(r){let o=0;return mh(r.fields,(i,s)=>{o+=i.length+Kb(s)}),o}(t.mapValue);default:throw Rt(13486,{value:t})}}function S4(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function uT(t){return!!t&&"integerValue"in t}function UA(t){return!!t&&"arrayValue"in t}function x4(t){return!!t&&"nullValue"in t}function E4(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wb(t){return!!t&&"mapValue"in t}function Pte(t){return(t?.mapValue?.fields||{})[N8]?.stringValue===D8}function Zg(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return mh(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Zg(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zg(t.arrayValue.values[n]);return e}return{...t}}function Lte(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Ote}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.value=e}static empty(){return new oa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wb(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zg(n)}setAll(e){let n=Yo.emptyPath(),r={},o=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,o),r={},o=[],n=a.popLast()}s?r[a.lastSegment()]=Zg(s):o.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,o)}delete(e){const n=this.field(e.popLast());Wb(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bl(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Wb(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){mh(n,(o,i)=>e[o]=i);for(const o of r)delete e[o]}clone(){return new oa(Zg(this.value))}}function O8(t){const e=[];return mh(t.fields,(n,r)=>{const o=new Yo([n]);if(Wb(r)){const i=O8(r.mapValue).fields;if(i.length===0)e.push(o);else for(const s of i)e.push(o.child(s))}else e.push(o)}),new $a(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n,r,o,i,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new hi(e,0,Bt.min(),Bt.min(),Bt.min(),oa.empty(),0)}static newFoundDocument(e,n,r,o){return new hi(e,1,n,Bt.min(),r,o,0)}static newNoDocument(e,n){return new hi(e,2,n,Bt.min(),Bt.min(),oa.empty(),0)}static newUnknownDocument(e,n){return new hi(e,3,n,Bt.min(),Bt.min(),oa.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Bt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n){this.position=e,this.inclusive=n}}function _4(t,e,n){let r=0;for(let o=0;o<t.position.length;o++){const i=e[o],s=t.position[o];if(i.field.isKeyField()?r=vt.comparator(vt.fromName(s.referenceValue),n.key):r=Wp(s,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function k4(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bl(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n="asc"){this.field=e,this.dir=n}}function Vte(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{}class oo extends P8{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Bte(e,n,r):n==="array-contains"?new Fte(e,r):n==="in"?new zte(e,r):n==="not-in"?new Ute(e,r):n==="array-contains-any"?new qte(e,r):new oo(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new $te(e,r):new Hte(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wp(n,this.value)):n!==null&&Ed(this.value)===Ed(n)&&this.matchesComparison(Wp(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Rt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ya extends P8{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ya(e,n)}matches(e){return L8(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function L8(t){return t.op==="and"}function V8(t){return jte(t)&&L8(t)}function jte(t){for(const e of t.filters)if(e instanceof Ya)return!1;return!0}function dT(t){if(t instanceof oo)return t.field.canonicalString()+t.op.toString()+Yp(t.value);if(V8(t))return t.filters.map(e=>dT(e)).join(",");{const e=t.filters.map(n=>dT(n)).join(",");return`${t.op}(${e})`}}function j8(t,e){return t instanceof oo?function(r,o){return o instanceof oo&&r.op===o.op&&r.field.isEqual(o.field)&&Bl(r.value,o.value)}(t,e):t instanceof Ya?function(r,o){return o instanceof Ya&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((i,s,a)=>i&&j8(s,o.filters[a]),!0):!1}(t,e):void Rt(19439)}function B8(t){return t instanceof oo?function(n){return`${n.field.canonicalString()} ${n.op} ${Yp(n.value)}`}(t):t instanceof Ya?function(n){return n.op.toString()+" {"+n.getFilters().map(B8).join(" ,")+"}"}(t):"Filter"}class Bte extends oo{constructor(e,n,r){super(e,n,r),this.key=vt.fromName(r.referenceValue)}matches(e){const n=vt.comparator(e.key,this.key);return this.matchesComparison(n)}}class $te extends oo{constructor(e,n){super(e,"in",n),this.keys=$8("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Hte extends oo{constructor(e,n){super(e,"not-in",n),this.keys=$8("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $8(t,e){return(e.arrayValue?.values||[]).map(n=>vt.fromName(n.referenceValue))}class Fte extends oo{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return UA(n)&&xy(n.arrayValue,this.value)}}class zte extends oo{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xy(this.value.arrayValue,n)}}class Ute extends oo{constructor(e,n){super(e,"not-in",n)}matches(e){if(xy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xy(this.value.arrayValue,n)}}class qte extends oo{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!UA(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>xy(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gte{constructor(e,n=null,r=[],o=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function T4(t,e=null,n=[],r=[],o=null,i=null,s=null){return new Gte(t,e,n,r,o,i,s)}function qA(t){const e=zt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>dT(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),LC(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Yp(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Yp(r)).join(",")),e.Te=n}return e.Te}function GA(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Vte(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!j8(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!k4(t.startAt,e.startAt)&&k4(t.endAt,e.endAt)}function fT(t){return vt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,n=null,r=[],o=[],i=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Kte(t,e,n,r,o,i,s,a){return new pv(t,e,n,r,o,i,s,a)}function H8(t){return new pv(t)}function A4(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function F8(t){return t.collectionGroup!==null}function Jg(t){const e=zt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new yo(Yo.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new M1(i,r))}),n.has(Yo.keyField().canonicalString())||e.Ie.push(new M1(Yo.keyField(),r))}return e.Ie}function Ml(t){const e=zt(t);return e.Ee||(e.Ee=Wte(e,Jg(t))),e.Ee}function Wte(t,e){if(t.limitType==="F")return T4(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{const i=o.dir==="desc"?"asc":"desc";return new M1(o.field,i)});const n=t.endAt?new R1(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new R1(t.startAt.position,t.startAt.inclusive):null;return T4(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hT(t,e){const n=t.filters.concat([e]);return new pv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pT(t,e,n){return new pv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jC(t,e){return GA(Ml(t),Ml(e))&&t.limitType===e.limitType}function z8(t){return`${qA(Ml(t))}|lt:${t.limitType}`}function fp(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>B8(o)).join(", ")}]`),LC(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>Yp(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>Yp(o)).join(",")),`Target(${r})`}(Ml(t))}; limitType=${t.limitType})`}function BC(t,e){return e.isFoundDocument()&&function(r,o){const i=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):vt.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,o){for(const i of Jg(r))if(!i.field.isKeyField()&&o.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,o){for(const i of r.filters)if(!i.matches(o))return!1;return!0}(t,e)&&function(r,o){return!(r.startAt&&!function(s,a,l){const u=_4(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,Jg(r),o)||r.endAt&&!function(s,a,l){const u=_4(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,Jg(r),o))}(t,e)}function Yte(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function U8(t){return(e,n)=>{let r=!1;for(const o of Jg(t)){const i=Xte(o,e,n);if(i!==0)return i;r=r||o.field.isKeyField()}return 0}}function Xte(t,e,n){const r=t.field.isKeyField()?vt.comparator(e.key,n.key):function(i,s,a){const l=s.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Wp(l,u):Rt(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Rt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,i]of r)if(this.equalsFn(o,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<o.length;i++)if(this.equalsFn(o[i][0],e))return void(o[i]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){mh(this.inner,(n,r)=>{for(const[o,i]of r)e(o,i)})}isEmpty(){return k8(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qte=new Ir(vt.comparator);function Yc(){return Qte}const q8=new Ir(vt.comparator);function $g(...t){let e=q8;for(const n of t)e=e.insert(n.key,n);return e}function G8(t){let e=q8;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Af(){return ey()}function K8(){return ey()}function ey(){return new gh(t=>t.toString(),(t,e)=>t.isEqual(e))}const Zte=new Ir(vt.comparator),Jte=new yo(vt.comparator);function Sn(...t){let e=Jte;for(const n of t)e=e.add(n);return e}const ene=new yo(bn);function tne(){return ene}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:k1(e)?"-0":e}}function W8(t){return{integerValue:""+t}}function nne(t,e){return Rte(e)?W8(e):KA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this._=void 0}}function rne(t,e,n){return t instanceof Ey?function(o,i){const s={fields:{[R8]:{stringValue:A8},[I8]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return i&&zA(i)&&(i=VC(i)),i&&(s.fields[M8]=i),{mapValue:s}}(n,e):t instanceof _y?X8(t,e):t instanceof ky?Q8(t,e):function(o,i){const s=Y8(o,i),a=R4(s)+R4(o.Ae);return uT(s)&&uT(o.Ae)?W8(a):KA(o.serializer,a)}(t,e)}function one(t,e,n){return t instanceof _y?X8(t,e):t instanceof ky?Q8(t,e):n}function Y8(t,e){return t instanceof I1?function(r){return uT(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ey extends $C{}class _y extends $C{constructor(e){super(),this.elements=e}}function X8(t,e){const n=Z8(e);for(const r of t.elements)n.some(o=>Bl(o,r))||n.push(r);return{arrayValue:{values:n}}}class ky extends $C{constructor(e){super(),this.elements=e}}function Q8(t,e){let n=Z8(e);for(const r of t.elements)n=n.filter(o=>!Bl(o,r));return{arrayValue:{values:n}}}class I1 extends $C{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function R4(t){return Kr(t.integerValue||t.doubleValue)}function Z8(t){return UA(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ine{constructor(e,n){this.field=e,this.transform=n}}function sne(t,e){return t.field.isEqual(e.field)&&function(r,o){return r instanceof _y&&o instanceof _y||r instanceof ky&&o instanceof ky?Gp(r.elements,o.elements,Bl):r instanceof I1&&o instanceof I1?Bl(r.Ae,o.Ae):r instanceof Ey&&o instanceof Ey}(t.transform,e.transform)}class ane{constructor(e,n){this.version=e,this.transformResults=n}}class Il{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Il}static exists(e){return new Il(void 0,e)}static updateTime(e){return new Il(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yb(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class HC{}function J8(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new WA(t.key,Il.none()):new mv(t.key,t.data,Il.none());{const n=t.data,r=oa.empty();let o=new yo(Yo.comparator);for(let i of e.fields)if(!o.has(i)){let s=n.field(i);s===null&&i.length>1&&(i=i.popLast(),s=n.field(i)),s===null?r.delete(i):r.set(i,s),o=o.add(i)}return new yh(t.key,r,new $a(o.toArray()),Il.none())}}function lne(t,e,n){t instanceof mv?function(o,i,s){const a=o.value.clone(),l=I4(o.fieldTransforms,i,s.transformResults);a.setAll(l),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof yh?function(o,i,s){if(!Yb(o.precondition,i))return void i.convertToUnknownDocument(s.version);const a=I4(o.fieldTransforms,i,s.transformResults),l=i.data;l.setAll(ej(o)),l.setAll(a),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(o,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ty(t,e,n,r){return t instanceof mv?function(i,s,a,l){if(!Yb(i.precondition,s))return a;const u=i.value.clone(),f=N4(i.fieldTransforms,l,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof yh?function(i,s,a,l){if(!Yb(i.precondition,s))return a;const u=N4(i.fieldTransforms,l,s),f=s.data;return f.setAll(ej(i)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(i,s,a){return Yb(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function cne(t,e){let n=null;for(const r of t.fieldTransforms){const o=e.data.field(r.field),i=Y8(r.transform,o||null);i!=null&&(n===null&&(n=oa.empty()),n.set(r.field,i))}return n||null}function M4(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Gp(r,o,(i,s)=>sne(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class mv extends HC{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class yh extends HC{constructor(e,n,r,o,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ej(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function I4(t,e,n){const r=new Map;qn(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let o=0;o<n.length;o++){const i=t[o],s=i.transform,a=e.data.field(i.field);r.set(i.field,one(s,a,n[o]))}return r}function N4(t,e,n){const r=new Map;for(const o of t){const i=o.transform,s=n.data.field(o.field);r.set(o.field,rne(i,s,e))}return r}class WA extends HC{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class une extends HC{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dne{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const i=this.mutations[o];i.key.isEqual(e.key)&&lne(i,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ty(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ty(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=K8();return this.mutations.forEach(o=>{const i=e.get(o.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=n.has(o.key)?null:a;const l=J8(s,a);l!==null&&r.set(o.key,l),s.isValidDocument()||s.convertToNoDocument(Bt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Sn())}isEqual(e){return this.batchId===e.batchId&&Gp(this.mutations,e.mutations,(n,r)=>M4(n,r))&&Gp(this.baseMutations,e.baseMutations,(n,r)=>M4(n,r))}}class YA{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){qn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=function(){return Zte}();const i=e.mutations;for(let s=0;s<i.length;s++)o=o.insert(i[s].key,r[s].version);return new YA(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fne=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hne{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var no,Mn;function pne(t){switch(t){case He.OK:return Rt(64938);case He.CANCELLED:case He.UNKNOWN:case He.DEADLINE_EXCEEDED:case He.RESOURCE_EXHAUSTED:case He.INTERNAL:case He.UNAVAILABLE:case He.UNAUTHENTICATED:return!1;case He.INVALID_ARGUMENT:case He.NOT_FOUND:case He.ALREADY_EXISTS:case He.PERMISSION_DENIED:case He.FAILED_PRECONDITION:case He.ABORTED:case He.OUT_OF_RANGE:case He.UNIMPLEMENTED:case He.DATA_LOSS:return!0;default:return Rt(15467,{code:t})}}function tj(t){if(t===void 0)return Wc("GRPC error has no .code"),He.UNKNOWN;switch(t){case no.OK:return He.OK;case no.CANCELLED:return He.CANCELLED;case no.UNKNOWN:return He.UNKNOWN;case no.DEADLINE_EXCEEDED:return He.DEADLINE_EXCEEDED;case no.RESOURCE_EXHAUSTED:return He.RESOURCE_EXHAUSTED;case no.INTERNAL:return He.INTERNAL;case no.UNAVAILABLE:return He.UNAVAILABLE;case no.UNAUTHENTICATED:return He.UNAUTHENTICATED;case no.INVALID_ARGUMENT:return He.INVALID_ARGUMENT;case no.NOT_FOUND:return He.NOT_FOUND;case no.ALREADY_EXISTS:return He.ALREADY_EXISTS;case no.PERMISSION_DENIED:return He.PERMISSION_DENIED;case no.FAILED_PRECONDITION:return He.FAILED_PRECONDITION;case no.ABORTED:return He.ABORTED;case no.OUT_OF_RANGE:return He.OUT_OF_RANGE;case no.UNIMPLEMENTED:return He.UNIMPLEMENTED;case no.DATA_LOSS:return He.DATA_LOSS;default:return Rt(39323,{code:t})}}(Mn=no||(no={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mne(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gne=new fd([4294967295,4294967295],0);function D4(t){const e=mne().encode(t),n=new m8;return n.update(e),new Uint8Array(n.digest())}function O4(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new fd([n,r],0),new fd([o,i],0)]}class XA{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hg(`Invalid padding: ${n}`);if(r<0)throw new Hg(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hg(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hg(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=fd.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(fd.fromNumber(r)));return o.compare(gne)===1&&(o=new fd([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=D4(e),[r,o]=O4(n);for(let i=0;i<this.hashCount;i++){const s=this.ye(r,o,i);if(!this.we(s))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new XA(i,o,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;const n=D4(e),[r,o]=O4(n);for(let i=0;i<this.hashCount;i++){const s=this.ye(r,o,i);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Hg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n,r,o,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,gv.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new FC(Bt.min(),o,new Ir(bn),Yc(),Sn())}}class gv{constructor(e,n,r,o,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new gv(r,n,Sn(),Sn(),Sn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class nj{constructor(e,n){this.targetId=e,this.Ce=n}}class rj{constructor(e,n,r=Qo.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class P4{constructor(){this.ve=0,this.Fe=L4(),this.Me=Qo.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Sn(),n=Sn(),r=Sn();return this.Fe.forEach((o,i)=>{switch(i){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Rt(38017,{changeType:i})}}),new gv(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=L4()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yne{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yc(),this.Je=cb(),this.He=cb(),this.Ye=new Ir(bn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Rt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,o)=>{this.rt(o)&&n(o)})}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const i=o.target;if(fT(i))if(r===0){const s=new vt(i.path);this.et(n,s,hi.newNoDocument(s,Bt.min()))}else qn(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const a=this.ut(e),l=a?this.ct(a,e,s):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:i=0}=n;let s,a;try{s=xd(r).toUint8Array()}catch(l){if(l instanceof T8)return qp("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new XA(s,o,i)}catch(l){return qp(l instanceof Hg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach(i=>{const s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),o++)}),o}Tt(e){const n=new Map;this.ze.forEach((i,s)=>{const a=this.ot(s);if(a){if(i.current&&fT(a.target)){const l=new vt(a.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,hi.newNoDocument(l,e))}i.Be&&(n.set(s,i.ke()),i.qe())}});let r=Sn();this.He.forEach((i,s)=>{let a=!0;s.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,s)=>s.setReadTime(e));const o=new FC(e,n,this.Ye,this.je,r);return this.je=Yc(),this.Je=cb(),this.He=cb(),this.Ye=new Ir(bn),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new P4,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new yo(bn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new yo(bn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||it("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new P4),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function cb(){return new Ir(vt.comparator)}function L4(){return new Ir(vt.comparator)}const vne={asc:"ASCENDING",desc:"DESCENDING"},bne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wne={and:"AND",or:"OR"};class Cne{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mT(t,e){return t.useProto3Json||LC(e)?e:{value:e}}function N1(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Sne(t,e){return N1(t,e.toTimestamp())}function Nl(t){return qn(!!t,49232),Bt.fromTimestamp(function(n){const r=Sd(n);return new sr(r.seconds,r.nanos)}(t))}function QA(t,e){return gT(t,e).canonicalString()}function gT(t,e){const n=function(o){return new fr(["projects",o.projectId,"databases",o.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ij(t){const e=fr.fromString(t);return qn(uj(e),10190,{key:e.toString()}),e}function yT(t,e){return QA(t.databaseId,e.path)}function u_(t,e){const n=ij(e);if(n.get(1)!==t.databaseId.projectId)throw new st(He.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new st(He.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new vt(aj(n))}function sj(t,e){return QA(t.databaseId,e)}function xne(t){const e=ij(t);return e.length===4?fr.emptyPath():aj(e)}function vT(t){return new fr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aj(t){return qn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function V4(t,e,n){return{name:yT(t,e),fields:n.value.mapValue.fields}}function Ene(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Rt(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],i=function(u,f){return u.useProto3Json?(qn(f===void 0||typeof f=="string",58123),Qo.fromBase64String(f||"")):(qn(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Qo.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const f=u.code===void 0?He.UNKNOWN:tj(u.code);return new st(f,u.message||"")}(s);n=new rj(r,o,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=u_(t,r.document.name),i=Nl(r.document.updateTime),s=r.document.createTime?Nl(r.document.createTime):Bt.min(),a=new oa({mapValue:{fields:r.document.fields}}),l=hi.newFoundDocument(o,i,s,a),u=r.targetIds||[],f=r.removedTargetIds||[];n=new Xb(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=u_(t,r.document),i=r.readTime?Nl(r.readTime):Bt.min(),s=hi.newNoDocument(o,i),a=r.removedTargetIds||[];n=new Xb([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=u_(t,r.document),i=r.removedTargetIds||[];n=new Xb([],i,o,null)}else{if(!("filter"in e))return Rt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:i}=r,s=new hne(o,i),a=r.targetId;n=new nj(a,s)}}return n}function _ne(t,e){let n;if(e instanceof mv)n={update:V4(t,e.key,e.value)};else if(e instanceof WA)n={delete:yT(t,e.key)};else if(e instanceof yh)n={update:V4(t,e.key,e.data),updateMask:One(e.fieldMask)};else{if(!(e instanceof une))return Rt(16599,{Vt:e.type});n={verify:yT(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const a=s.transform;if(a instanceof Ey)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _y)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ky)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof I1)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw Rt(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(o,i){return i.updateTime!==void 0?{updateTime:Sne(o,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Rt(27497)}(t,e.precondition)),n}function kne(t,e){return t&&t.length>0?(qn(e!==void 0,14353),t.map(n=>function(o,i){let s=o.updateTime?Nl(o.updateTime):Nl(i);return s.isEqual(Bt.min())&&(s=Nl(i)),new ane(s,o.transformResults||[])}(n,e))):[]}function Tne(t,e){return{documents:[sj(t,e.path)]}}function Ane(t,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=sj(t,o);const i=function(u){if(u.length!==0)return cj(Ya.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(u.length!==0)return u.map(f=>function(p){return{field:hp(p.field),direction:Ine(p.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=mT(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:o}}function Rne(t){let e=xne(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){qn(r===1,65062);const f=n.from[0];f.allDescendants?o=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(h){const p=lj(h);return p instanceof Ya&&V8(p)?p.getFilters():[p]}(n.where));let s=[];n.orderBy&&(s=function(h){return h.map(p=>function(v){return new M1(pp(v.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,LC(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,g=h.values||[];return new R1(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const p=!h.before,g=h.values||[];return new R1(g,p)}(n.endAt)),Kte(e,o,s,i,a,"F",l,u)}function Mne(t,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rt(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lj(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=pp(n.unaryFilter.field);return oo.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=pp(n.unaryFilter.field);return oo.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=pp(n.unaryFilter.field);return oo.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=pp(n.unaryFilter.field);return oo.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Rt(61313);default:return Rt(60726)}}(t):t.fieldFilter!==void 0?function(n){return oo.create(pp(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Rt(58110);default:return Rt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ya.create(n.compositeFilter.filters.map(r=>lj(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Rt(1026)}}(n.compositeFilter.op))}(t):Rt(30097,{filter:t})}function Ine(t){return vne[t]}function Nne(t){return bne[t]}function Dne(t){return wne[t]}function hp(t){return{fieldPath:t.canonicalString()}}function pp(t){return Yo.fromServerFormat(t.fieldPath)}function cj(t){return t instanceof oo?function(n){if(n.op==="=="){if(E4(n.value))return{unaryFilter:{field:hp(n.field),op:"IS_NAN"}};if(x4(n.value))return{unaryFilter:{field:hp(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(E4(n.value))return{unaryFilter:{field:hp(n.field),op:"IS_NOT_NAN"}};if(x4(n.value))return{unaryFilter:{field:hp(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hp(n.field),op:Nne(n.op),value:n.value}}}(t):t instanceof Ya?function(n){const r=n.getFilters().map(o=>cj(o));return r.length===1?r[0]:{compositeFilter:{op:Dne(n.op),filters:r}}}(t):Rt(54877,{filter:t})}function One(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n,r,o,i=Bt.min(),s=Bt.min(),a=Qo.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new nd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new nd(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pne{constructor(e){this.yt=e}}function Lne(t){const e=Rne({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pT(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vne{constructor(){this.Cn=new jne}addToCollectionParentIndex(e,n){return this.Cn.add(n),Fe.resolve()}getCollectionParents(e,n){return Fe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Fe.resolve()}deleteFieldIndex(e,n){return Fe.resolve()}deleteAllFieldIndexes(e){return Fe.resolve()}createTargetIndexes(e,n){return Fe.resolve()}getDocumentsMatchingTarget(e,n){return Fe.resolve(null)}getIndexType(e,n){return Fe.resolve(0)}getFieldIndexes(e,n){return Fe.resolve([])}getNextCollectionGroupToUpdate(e){return Fe.resolve(null)}getMinOffset(e,n){return Fe.resolve(Cd.min())}getMinOffsetFromCollectionGroup(e,n){return Fe.resolve(Cd.min())}updateCollectionGroup(e,n,r){return Fe.resolve()}updateIndexEntries(e,n){return Fe.resolve()}}class jne{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new yo(fr.comparator),i=!o.has(r);return this.index[n]=o.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new yo(fr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dj=41943040;class Xi{static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi(dj,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Xp(0)}static cr(){return new Xp(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4="LruGarbageCollector",Bne=1048576;function $4([t,e],[n,r]){const o=bn(t,n);return o===0?bn(e,r):o}class $ne{constructor(e){this.Ir=e,this.buffer=new yo($4),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();$4(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Hne{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){it(B4,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xm(n)?it(B4,"Ignoring IndexedDB error during garbage collection: ",n):await Sm(n)}await this.Vr(3e5)})}}class Fne{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Fe.resolve(PC.ce);const r=new $ne(n);return this.mr.forEachTarget(e,o=>r.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>r.Ar(o))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(it("LruGarbageCollector","Garbage collection skipped; disabled"),Fe.resolve(j4)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),j4):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,i,s,a,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(it("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),o=this.params.maximumSequenceNumbersToCollect):o=h,s=Date.now(),this.nthSequenceNumber(e,o))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),dp()<=vn.DEBUG&&it("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${o} in `+(a-s)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),Fe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:i,documentsRemoved:h})))}}function zne(t,e){return new Fne(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Une{constructor(){this.changes=new gh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,hi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Fe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qne{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gne{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(r!==null&&ty(r.mutation,o,$a.empty(),sr.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Sn()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Sn()){const o=Af();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(i=>{let s=$g();return i.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Af();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Sn()))}populateOverlays(e,n,r){const o=[];return r.forEach(i=>{n.has(i)||o.push(i)}),this.documentOverlayCache.getOverlays(e,o).next(i=>{i.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,o){let i=Yc();const s=ey(),a=function(){return ey()}();return n.forEach((l,u)=>{const f=r.get(u.key);o.has(u.key)&&(f===void 0||f.mutation instanceof yh)?i=i.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),ty(f.mutation,u,f.mutation.getFieldMask(),sr.now())):s.set(u.key,$a.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,f)=>s.set(u,f)),n.forEach((u,f)=>a.set(u,new qne(f,s.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=ey();let o=new Ir((s,a)=>s-a),i=Sn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let f=r.get(l)||$a.empty();f=a.applyToLocalView(u,f),r.set(l,f);const h=(o.get(a.batchId)||Sn()).add(l);o=o.insert(a.batchId,h)})}).next(()=>{const s=[],a=o.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,f=l.value,h=K8();f.forEach(p=>{if(!i.has(p)){const g=J8(n.get(p),r.get(p));g!==null&&h.set(p,g),i=i.add(p)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return Fe.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,o){return function(s){return vt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):F8(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(i=>{const s=o-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-i.size):Fe.resolve(Af());let a=wy,l=i;return s.next(u=>Fe.forEach(u,(f,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(f)?Fe.resolve():this.remoteDocumentCache.getEntry(e,f).next(p=>{l=l.insert(f,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Sn())).next(f=>({batchId:a,changes:G8(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new vt(n)).next(r=>{let o=$g();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const i=n.collectionGroup;let s=$g();return this.indexManager.getCollectionParents(e,i).next(a=>Fe.forEach(a,l=>{const u=function(h,p){return new pv(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,o).next(f=>{f.forEach((h,p)=>{s=s.insert(h,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,o){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,o))).next(s=>{i.forEach((l,u)=>{const f=u.getKey();s.get(f)===null&&(s=s.insert(f,hi.newInvalidDocument(f)))});let a=$g();return s.forEach((l,u)=>{const f=i.get(l);f!==void 0&&ty(f.mutation,u,$a.empty(),sr.now()),BC(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kne{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Fe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Nl(o.createTime)}}(n)),Fe.resolve()}getNamedQuery(e,n){return Fe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(o){return{name:o.name,query:Lne(o.bundledQuery),readTime:Nl(o.readTime)}}(n)),Fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wne{constructor(){this.overlays=new Ir(vt.comparator),this.qr=new Map}getOverlay(e,n){return Fe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Af();return Fe.forEach(n,o=>this.getOverlay(e,o).next(i=>{i!==null&&r.set(o,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,i)=>{this.St(e,n,i)}),Fe.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),Fe.resolve()}getOverlaysForCollection(e,n,r){const o=Af(),i=n.length+1,s=new vt(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&o.set(l.getKey(),l)}return Fe.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let i=new Ir((u,f)=>u-f);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=i.get(u.largestBatchId);f===null&&(f=Af(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=Af(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=o)););return Fe.resolve(a)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const s=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new fne(n,r));let i=this.qr.get(n);i===void 0&&(i=Sn(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yne{constructor(){this.sessionToken=Qo.EMPTY_BYTE_STRING}getSessionToken(e){return Fe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this.Qr=new yo(To.$r),this.Ur=new yo(To.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new To(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new To(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new vt(new fr([])),r=new To(n,e),o=new To(n,e+1),i=[];return this.Ur.forEachInRange([r,o],s=>{this.Gr(s),i.push(s.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new vt(new fr([])),r=new To(n,e),o=new To(n,e+1);let i=Sn();return this.Ur.forEachInRange([r,o],s=>{i=i.add(s.key)}),i}containsKey(e){const n=new To(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class To{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return vt.comparator(e.key,n.key)||bn(e.Yr,n.Yr)}static Kr(e,n){return bn(e.Yr,n.Yr)||vt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xne{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new yo(To.$r)}checkEmpty(e){return Fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new dne(i,n,r,o);this.mutationQueue.push(s);for(const a of o)this.Zr=this.Zr.add(new To(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Fe.resolve(s)}lookupMutationBatch(e,n){return Fe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),i=o<0?0:o;return Fe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Fe.resolve(this.mutationQueue.length===0?FA:this.tr-1)}getAllMutationBatches(e){return Fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new To(n,0),o=new To(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,o],s=>{const a=this.Xr(s.Yr);i.push(a)}),Fe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new yo(bn);return n.forEach(o=>{const i=new To(o,0),s=new To(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,s],a=>{r=r.add(a.Yr)})}),Fe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let i=r;vt.isDocumentKey(i)||(i=i.child(""));const s=new To(new vt(i),0);let a=new yo(bn);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===o&&(a=a.add(l.Yr)),!0)},s),Fe.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const o=this.Xr(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){qn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Fe.forEach(n.mutations,o=>{const i=new To(o.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new To(n,0),o=this.Zr.firstAfterOrEqual(r);return Fe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Fe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qne{constructor(e){this.ri=e,this.docs=function(){return new Ir(vt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),i=o?o.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Fe.resolve(r?r.document.mutableCopy():hi.newInvalidDocument(n))}getEntries(e,n){let r=Yc();return n.forEach(o=>{const i=this.docs.get(o);r=r.insert(o,i?i.document.mutableCopy():hi.newInvalidDocument(o))}),Fe.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let i=Yc();const s=n.path,a=new vt(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||_te(Ete(f),r)<=0||(o.has(f.key)||BC(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return Fe.resolve(i)}getAllFromCollectionGroup(e,n,r,o){Rt(9500)}ii(e,n){return Fe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Zne(this)}getSize(e){return Fe.resolve(this.size)}}class Zne extends Une{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)}),Fe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jne{constructor(e){this.persistence=e,this.si=new gh(n=>qA(n),GA),this.lastRemoteSnapshotVersion=Bt.min(),this.highestTargetId=0,this.oi=0,this._i=new ZA,this.targetCount=0,this.ai=Xp.ur()}forEachTarget(e,n){return this.si.forEach((r,o)=>n(o)),Fe.resolve()}getLastRemoteSnapshotVersion(e){return Fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Fe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Fe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Xp(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Fe.resolve()}updateTargetData(e,n){return this.Pr(n),Fe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Fe.resolve()}removeTargets(e,n,r){let o=0;const i=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),o++)}),Fe.waitFor(i).next(()=>o)}getTargetCount(e){return Fe.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Fe.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Fe.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,i=[];return o&&n.forEach(s=>{i.push(o.markPotentiallyOrphaned(e,s))}),Fe.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Fe.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Fe.resolve(r)}containsKey(e,n){return Fe.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n){this.ui={},this.overlays={},this.ci=new PC(0),this.li=!1,this.li=!0,this.hi=new Yne,this.referenceDelegate=e(this),this.Pi=new Jne(this),this.indexManager=new Vne,this.remoteDocumentCache=function(o){return new Qne(o)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Pne(n),this.Ii=new Kne(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Wne,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Xne(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){it("MemoryPersistence","Starting transaction:",e);const o=new ere(this.ci.next());return this.referenceDelegate.Ei(),r(o).next(i=>this.referenceDelegate.di(o).next(()=>i)).toPromise().then(i=>(o.raiseOnCommittedEvent(),i))}Ai(e,n){return Fe.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class ere extends Tte{constructor(e){super(),this.currentSequenceNumber=e}}class JA{constructor(e){this.persistence=e,this.Ri=new ZA,this.Vi=null}static mi(e){return new JA(e)}get fi(){if(this.Vi)return this.Vi;throw Rt(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Fe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Fe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Fe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fe.forEach(this.fi,r=>{const o=vt.fromPath(r);return this.gi(e,o).next(i=>{i||n.removeEntry(o,Bt.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Fe.or([()=>Fe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class D1{constructor(e,n){this.persistence=e,this.pi=new gh(r=>Mte(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=zne(this,n)}static mi(e,n){return new D1(e,n)}Ei(){}di(e){return Fe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(o=>r+o))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return Fe.forEach(this.pi,(r,o)=>this.br(e,r,o).next(i=>i?Fe.resolve():n(o)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),i=o.newChangeBuffer();return o.ii(e,s=>this.br(e,s,n).next(a=>{a||(r++,i.removeEntry(s,Bt.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Fe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Fe.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Fe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Fe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Kb(e.data.value)),n}br(e,n,r){return Fe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return Fe.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=Sn(),o=Sn();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:o=o.add(i.doc.key)}return new eR(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tre{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nre{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return WJ()?8:Ate(vi())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const i={result:null};return this.ys(e,n).next(s=>{i.result=s}).next(()=>{if(!i.result)return this.ws(e,n,o,r).next(s=>{i.result=s})}).next(()=>{if(i.result)return;const s=new tre;return this.Ss(e,n,s).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,s,a.size)})}).next(()=>i.result)}bs(e,n,r,o){return r.documentReadCount<this.fs?(dp()<=vn.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",fp(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Fe.resolve()):(dp()<=vn.DEBUG&&it("QueryEngine","Query:",fp(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(dp()<=vn.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",fp(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ml(n))):Fe.resolve())}ys(e,n){if(A4(n))return Fe.resolve(null);let r=Ml(n);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=pT(n,null,"F"),r=Ml(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const s=Sn(...i);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,s,l.readTime)?this.ys(e,pT(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,o){return A4(n)||o.isEqual(Bt.min())?Fe.resolve(null):this.ps.getDocuments(e,r).next(i=>{const s=this.Ds(n,i);return this.Cs(n,s,r,o)?Fe.resolve(null):(dp()<=vn.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),fp(n)),this.vs(e,s,n,xte(o,wy)).next(a=>a))})}Ds(e,n){let r=new yo(U8(e));return n.forEach((o,i)=>{BC(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(o)>0)}Ss(e,n,r){return dp()<=vn.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",fp(n)),this.ps.getDocumentsMatchingQuery(e,n,Cd.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next(i=>(n.forEach(s=>{i=i.insert(s.key,s)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="LocalStore",rre=3e8;class ore{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Ir(bn),this.xs=new gh(i=>qA(i),GA),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gne(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function ire(t,e,n,r){return new ore(t,e,n,r)}async function hj(t,e){const n=zt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(i=>(o=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const s=[],a=[];let l=Sn();for(const u of o){s.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of i){a.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:s,addedBatchIds:a}))})})}function sre(t,e){const n=zt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,f){const h=u.batch,p=h.keys();let g=Fe.resolve();return p.forEach(v=>{g=g.next(()=>f.getEntry(l,v)).next(b=>{const E=u.docVersions.get(v);qn(E!==null,48541),b.version.compareTo(E)<0&&(h.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),f.addEntry(b)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Sn();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,o))})}function pj(t){const e=zt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function are(t,e){const n=zt(t),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const a=[];e.targetChanges.forEach((f,h)=>{const p=o.get(h);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(i,f.addedDocuments,h)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Qo.EMPTY_BYTE_STRING,Bt.min()).withLastLimboFreeSnapshotVersion(Bt.min()):f.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(f.resumeToken,r)),o=o.insert(h,g),function(b,E,T){return b.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=rre?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,g,f)&&a.push(n.Pi.updateTargetData(i,g))});let l=Yc(),u=Sn();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),a.push(lre(i,s,e.documentUpdates).next(f=>{l=f.ks,u=f.qs})),!r.isEqual(Bt.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next(h=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(f)}return Fe.waitFor(a).next(()=>s.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ms=o,i))}function lre(t,e,n){let r=Sn(),o=Sn();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let s=Yc();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(o=o.add(a)),l.isNoDocument()&&l.version.isEqual(Bt.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):it(tR,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:s,qs:o}})}function cre(t,e){const n=zt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=FA),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ure(t,e){const n=zt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.Pi.getTargetData(r,e).next(i=>i?(o=i,Fe.resolve(o)):n.Pi.allocateTargetId(r).next(s=>(o=new nd(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function bT(t,e,n){const r=zt(t),o=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,s=>r.persistence.referenceDelegate.removeTarget(s,o))}catch(s){if(!xm(s))throw s;it(tR,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function H4(t,e,n){const r=zt(t);let o=Bt.min(),i=Sn();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,f){const h=zt(l),p=h.xs.get(f);return p!==void 0?Fe.resolve(h.Ms.get(p)):h.Pi.getTargetData(u,f)}(r,s,Ml(e)).next(a=>{if(a)return o=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?o:Bt.min(),n?i:Sn())).next(a=>(dre(r,Yte(e),a),{documents:a,Qs:i})))}function dre(t,e,n){let r=t.Os.get(e)||Bt.min();n.forEach((o,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class F4{constructor(){this.activeTargetIds=tne()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fre{constructor(){this.Mo=new F4,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new F4,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hre{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4="ConnectivityMonitor";class U4{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){it(z4,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){it(z4,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ub=null;function wT(){return ub===null?ub=function(){return 268435456+Math.round(2147483648*Math.random())}():ub++,"0x"+ub.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="RestConnection",pre={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mre{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===T1?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,i){const s=wT(),a=this.zo(e,n.toUriEncodedString());it(d_,`Sending RPC '${e}' ${s}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,o,i);const{host:u}=new URL(a),f=bm(u);return this.Jo(e,a,l,r,f).then(h=>(it(d_,`Received RPC '${e}' ${s}: `,h),h),h=>{throw qp(d_,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,o,i,s){return this.Go(e,n,r,o,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cm}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,i)=>e[i]=o),r&&r.headers.forEach((o,i)=>e[i]=o)}zo(e,n){const r=pre[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gre{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="WebChannelConnection";class yre extends mre{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,i){const s=wT();return new Promise((a,l)=>{const u=new g8;u.setWithCredentials(!0),u.listenOnce(y8.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Gb.NO_ERROR:const h=u.getResponseJson();it(ai,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case Gb.TIMEOUT:it(ai,`RPC '${e}' ${s} timed out`),l(new st(He.DEADLINE_EXCEEDED,"Request time out"));break;case Gb.HTTP_ERROR:const p=u.getStatus();if(it(ai,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g?.error;if(v&&v.status&&v.message){const b=function(T){const P=T.toLowerCase().replace(/_/g,"-");return Object.values(He).indexOf(P)>=0?P:He.UNKNOWN}(v.status);l(new st(b,v.message))}else l(new st(He.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new st(He.UNAVAILABLE,"Connection failed."));break;default:Rt(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{it(ai,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(o);it(ai,`RPC '${e}' ${s} sending request:`,o),u.send(n,"POST",f,r,15)})}T_(e,n,r){const o=wT(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=w8(),a=b8(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=i.join("");it(ai,`Creating RPC '${e}' stream ${o}: ${f}`,l);const h=s.createWebChannel(f,l);this.I_(h);let p=!1,g=!1;const v=new gre({Yo:E=>{g?it(ai,`Not sending because RPC '${e}' stream ${o} is closed:`,E):(p||(it(ai,`Opening RPC '${e}' stream ${o} transport.`),h.open(),p=!0),it(ai,`RPC '${e}' stream ${o} sending:`,E),h.send(E))},Zo:()=>h.close()}),b=(E,T,P)=>{E.listen(T,D=>{try{P(D)}catch(z){setTimeout(()=>{throw z},0)}})};return b(h,Bg.EventType.OPEN,()=>{g||(it(ai,`RPC '${e}' stream ${o} transport opened.`),v.o_())}),b(h,Bg.EventType.CLOSE,()=>{g||(g=!0,it(ai,`RPC '${e}' stream ${o} transport closed`),v.a_(),this.E_(h))}),b(h,Bg.EventType.ERROR,E=>{g||(g=!0,qp(ai,`RPC '${e}' stream ${o} transport errored. Name:`,E.name,"Message:",E.message),v.a_(new st(He.UNAVAILABLE,"The operation could not be completed")))}),b(h,Bg.EventType.MESSAGE,E=>{if(!g){const T=E.data[0];qn(!!T,16349);const P=T,D=P?.error||P[0]?.error;if(D){it(ai,`RPC '${e}' stream ${o} received error:`,D);const z=D.status;let V=function(R){const M=no[R];if(M!==void 0)return tj(M)}(z),$=D.message;V===void 0&&(V=He.INTERNAL,$="Unknown error status: "+z+" with message "+D.message),g=!0,v.a_(new st(V,$)),h.close()}else it(ai,`RPC '${e}' stream ${o} received:`,T),v.u_(T)}}),b(a,v8.STAT_EVENT,E=>{E.stat===aT.PROXY?it(ai,`RPC '${e}' stream ${o} detected buffering proxy`):E.stat===aT.NOPROXY&&it(ai,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{v.__()},0),v}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function f_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t){return new Cne(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e,n,r=1e3,o=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&it("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4="PersistentStream";class gj{constructor(e,n,r,o,i,s,a,l){this.Mi=e,this.S_=r,this.b_=o,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new mj(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===He.RESOURCE_EXHAUSTED?(Wc(n.toString()),Wc("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===He.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.D_===n&&this.G_(r,o)},r=>{e(()=>{const o=new st(He.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{r(()=>this.z_(o))}),this.stream.onMessage(o=>{r(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return it(q4,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(it(q4,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vre extends gj{constructor(e,n,r,o,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,s),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Ene(this.serializer,e),r=function(i){if(!("targetChange"in i))return Bt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Bt.min():s.readTime?Nl(s.readTime):Bt.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=vT(this.serializer),n.addTarget=function(i,s){let a;const l=s.target;if(a=fT(l)?{documents:Tne(i,l)}:{query:Ane(i,l).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=oj(i,s.resumeToken);const u=mT(i,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(Bt.min())>0){a.readTime=N1(i,s.snapshotVersion.toTimestamp());const u=mT(i,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=Mne(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=vT(this.serializer),n.removeTarget=e,this.q_(n)}}class bre extends gj{constructor(e,n,r,o,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return qn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=kne(e.writeResults,e.commitTime),r=Nl(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=vT(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_ne(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wre{}class Cre extends wre{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new st(He.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Go(e,gT(n,r),o,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===He.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new st(He.UNKNOWN,i.toString())})}Ho(e,n,r,o,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,gT(n,r),o,s,a,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===He.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new st(He.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Sre{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Wc(n),this.aa=!1):it("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="RemoteStore";class xre{constructor(e,n,r,o,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{vh(this)&&(it(Jf,"Restarting streams for network reachability change."),await async function(l){const u=zt(l);u.Ea.add(4),await yv(u),u.Ra.set("Unknown"),u.Ea.delete(4),await UC(u)}(this))})}),this.Ra=new Sre(r,o)}}async function UC(t){if(vh(t))for(const e of t.da)await e(!0)}async function yv(t){for(const e of t.da)await e(!1)}function yj(t,e){const n=zt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),iR(n)?oR(n):Em(n).O_()&&rR(n,e))}function nR(t,e){const n=zt(t),r=Em(n);n.Ia.delete(e),r.O_()&&vj(n,e),n.Ia.size===0&&(r.O_()?r.L_():vh(n)&&n.Ra.set("Unknown"))}function rR(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Bt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Em(t).Y_(e)}function vj(t,e){t.Va.Ue(e),Em(t).Z_(e)}function oR(t){t.Va=new yne({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Em(t).start(),t.Ra.ua()}function iR(t){return vh(t)&&!Em(t).x_()&&t.Ia.size>0}function vh(t){return zt(t).Ea.size===0}function bj(t){t.Va=void 0}async function Ere(t){t.Ra.set("Online")}async function _re(t){t.Ia.forEach((e,n)=>{rR(t,e)})}async function kre(t,e){bj(t),iR(t)?(t.Ra.ha(e),oR(t)):t.Ra.set("Unknown")}async function Tre(t,e,n){if(t.Ra.set("Online"),e instanceof rj&&e.state===2&&e.cause)try{await async function(o,i){const s=i.cause;for(const a of i.targetIds)o.Ia.has(a)&&(await o.remoteSyncer.rejectListen(a,s),o.Ia.delete(a),o.Va.removeTarget(a))}(t,e)}catch(r){it(Jf,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await O1(t,r)}else if(e instanceof Xb?t.Va.Ze(e):e instanceof nj?t.Va.st(e):t.Va.tt(e),!n.isEqual(Bt.min()))try{const r=await pj(t.localStore);n.compareTo(r)>=0&&await function(i,s){const a=i.Va.Tt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(u);f&&i.Ia.set(u,f.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(Qo.EMPTY_BYTE_STRING,f.snapshotVersion)),vj(i,l);const h=new nd(f.target,l,u,f.sequenceNumber);rR(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){it(Jf,"Failed to raise snapshot:",r),await O1(t,r)}}async function O1(t,e,n){if(!xm(e))throw e;t.Ea.add(1),await yv(t),t.Ra.set("Offline"),n||(n=()=>pj(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{it(Jf,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await UC(t)})}function wj(t,e){return e().catch(n=>O1(t,n,e))}async function qC(t){const e=zt(t),n=_d(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:FA;for(;Are(e);)try{const o=await cre(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,Rre(e,o)}catch(o){await O1(e,o)}Cj(e)&&Sj(e)}function Are(t){return vh(t)&&t.Ta.length<10}function Rre(t,e){t.Ta.push(e);const n=_d(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Cj(t){return vh(t)&&!_d(t).x_()&&t.Ta.length>0}function Sj(t){_d(t).start()}async function Mre(t){_d(t).ra()}async function Ire(t){const e=_d(t);for(const n of t.Ta)e.ea(n.mutations)}async function Nre(t,e,n){const r=t.Ta.shift(),o=YA.from(r,e,n);await wj(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await qC(t)}async function Dre(t,e){e&&_d(t).X_&&await async function(r,o){if(function(s){return pne(s)&&s!==He.ABORTED}(o.code)){const i=r.Ta.shift();_d(r).B_(),await wj(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,o)),await qC(r)}}(t,e),Cj(t)&&Sj(t)}async function G4(t,e){const n=zt(t);n.asyncQueue.verifyOperationInProgress(),it(Jf,"RemoteStore received new credentials");const r=vh(n);n.Ea.add(3),await yv(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await UC(n)}async function Ore(t,e){const n=zt(t);e?(n.Ea.delete(2),await UC(n)):e||(n.Ea.add(2),await yv(n),n.Ra.set("Unknown"))}function Em(t){return t.ma||(t.ma=function(n,r,o){const i=zt(n);return i.sa(),new vre(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,o)}(t.datastore,t.asyncQueue,{Xo:Ere.bind(null,t),t_:_re.bind(null,t),r_:kre.bind(null,t),H_:Tre.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),iR(t)?oR(t):t.Ra.set("Unknown")):(await t.ma.stop(),bj(t))})),t.ma}function _d(t){return t.fa||(t.fa=function(n,r,o){const i=zt(n);return i.sa(),new bre(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,o)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Mre.bind(null,t),r_:Dre.bind(null,t),ta:Ire.bind(null,t),na:Nre.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await qC(t)):(await t.fa.stop(),t.Ta.length>0&&(it(Jf,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n,r,o,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=i,this.deferred=new hd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,i){const s=Date.now()+r,a=new sR(e,n,s,o,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new st(He.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function aR(t,e){if(Wc("AsyncQueue",`${e}: ${t}`),xm(t))return new st(He.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{static emptySet(e){return new Tp(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||vt.comparator(n.key,r.key):(n,r)=>vt.comparator(n.key,r.key),this.keyedMap=$g(),this.sortedSet=new Ir(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Tp)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,i=r.getNext().key;if(!o.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Tp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(){this.ga=new Ir(vt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Rt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qp{constructor(e,n,r,o,i,s,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,o,i){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Qp(e,n,Tp.emptySet(n),s,r,o,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pre{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Lre{constructor(){this.queries=W4(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=zt(n),i=o.queries;o.queries=W4(),i.forEach((s,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new st(He.ABORTED,"Firestore shutting down"))}}function W4(){return new gh(t=>z8(t),jC)}async function Vre(t,e){const n=zt(t);let r=3;const o=e.query;let i=n.queries.get(o);i?!i.ba()&&e.Da()&&(r=2):(i=new Pre,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(o,!0);break;case 1:i.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(s){const a=aR(s,`Initialization of query '${fp(e.query)}' failed`);return void e.onError(a)}n.queries.set(o,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&lR(n)}async function jre(t,e){const n=zt(t),r=e.query;let o=3;const i=n.queries.get(r);if(i){const s=i.Sa.indexOf(e);s>=0&&(i.Sa.splice(s,1),i.Sa.length===0?o=e.Da()?0:1:!i.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Bre(t,e){const n=zt(t);let r=!1;for(const o of e){const i=o.query,s=n.queries.get(i);if(s){for(const a of s.Sa)a.Fa(o)&&(r=!0);s.wa=o}}r&&lR(n)}function $re(t,e,n){const r=zt(t),o=r.queries.get(e);if(o)for(const i of o.Sa)i.onError(n);r.queries.delete(e)}function lR(t){t.Ca.forEach(e=>{e.next()})}var CT,Y4;(Y4=CT||(CT={})).Ma="default",Y4.Cache="cache";class Hre{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Qp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Qp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==CT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e){this.key=e}}class Ej{constructor(e){this.key=e}}class Fre{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Sn(),this.mutatedKeys=Sn(),this.eu=U8(e),this.tu=new Tp(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new K4,o=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,s=o,a=!1;const l=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,u=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((f,h)=>{const p=o.get(f),g=BC(this.query,h)?h:null,v=!!p&&this.mutatedKeys.has(p.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let E=!1;p&&g?p.data.isEqual(g.data)?v!==b&&(r.track({type:3,doc:g}),E=!0):this.su(p,g)||(r.track({type:2,doc:g}),E=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),E=!0):p&&!g&&(r.track({type:1,doc:p}),E=!0,(l||u)&&(a=!0)),E&&(g?(s=s.add(g),i=b?i.add(f):i.delete(f)):(s=s.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((f,h)=>function(g,v){const b=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rt(20277,{Rt:E})}};return b(g)-b(v)}(f.type,h.type)||this.eu(f.doc,h.doc)),this.ou(r),o=o??!1;const a=n&&!o?this._u():[],l=this.Xa.size===0&&this.current&&!o?1:0,u=l!==this.Za;return this.Za=l,s.length!==0||u?{snapshot:new Qp(this.query,e.tu,i,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new K4,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Sn(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Ej(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new xj(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Sn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Qp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cR="SyncEngine";class zre{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Ure{constructor(e){this.key=e,this.hu=!1}}class qre{constructor(e,n,r,o,i,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new gh(a=>z8(a),jC),this.Iu=new Map,this.Eu=new Set,this.du=new Ir(vt.comparator),this.Au=new Map,this.Ru=new ZA,this.Vu={},this.mu=new Map,this.fu=Xp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Gre(t,e,n=!0){const r=Mj(t);let o;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),o=i.view.lu()):o=await _j(r,e,n,!0),o}async function Kre(t,e){const n=Mj(t);await _j(n,e,!0,!1)}async function _j(t,e,n,r){const o=await ure(t.localStore,Ml(e)),i=o.targetId,s=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Wre(t,e,i,s==="current",o.resumeToken)),t.isPrimaryClient&&n&&yj(t.remoteStore,o),a}async function Wre(t,e,n,r,o){t.pu=(h,p,g)=>async function(b,E,T,P){let D=E.view.ru(T);D.Cs&&(D=await H4(b.localStore,E.query,!1).then(({documents:O})=>E.view.ru(O,D)));const z=P&&P.targetChanges.get(E.targetId),V=P&&P.targetMismatches.get(E.targetId)!=null,$=E.view.applyChanges(D,b.isPrimaryClient,z,V);return Q4(b,E.targetId,$.au),$.snapshot}(t,h,p,g);const i=await H4(t.localStore,e,!0),s=new Fre(e,i.Qs),a=s.ru(i.documents),l=gv.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",o),u=s.applyChanges(a,t.isPrimaryClient,l);Q4(t,n,u.au);const f=new zre(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function Yre(t,e,n){const r=zt(t),o=r.Tu.get(e),i=r.Iu.get(o.targetId);if(i.length>1)return r.Iu.set(o.targetId,i.filter(s=>!jC(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await bT(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&nR(r.remoteStore,o.targetId),ST(r,o.targetId)}).catch(Sm)):(ST(r,o.targetId),await bT(r.localStore,o.targetId,!0))}async function Xre(t,e){const n=zt(t),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nR(n.remoteStore,r.targetId))}async function Qre(t,e,n){const r=ooe(t);try{const o=await function(s,a){const l=zt(s),u=sr.now(),f=a.reduce((g,v)=>g.add(v.key),Sn());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Yc(),b=Sn();return l.Ns.getEntries(g,f).next(E=>{v=E,v.forEach((T,P)=>{P.isValidDocument()||(b=b.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(E=>{h=E;const T=[];for(const P of a){const D=cne(P,h.get(P.key).overlayedDocument);D!=null&&T.push(new yh(P.key,D,O8(D.value.mapValue),Il.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,T,a)}).next(E=>{p=E;const T=E.applyToLocalDocumentSet(h,b);return l.documentOverlayCache.saveOverlays(g,E.batchId,T)})}).then(()=>({batchId:p.batchId,changes:G8(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(s,a,l){let u=s.Vu[s.currentUser.toKey()];u||(u=new Ir(bn)),u=u.insert(a,l),s.Vu[s.currentUser.toKey()]=u}(r,o.batchId,n),await vv(r,o.changes),await qC(r.remoteStore)}catch(o){const i=aR(o,"Failed to persist write");n.reject(i)}}async function kj(t,e){const n=zt(t);try{const r=await are(n.localStore,e);e.targetChanges.forEach((o,i)=>{const s=n.Au.get(i);s&&(qn(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?s.hu=!0:o.modifiedDocuments.size>0?qn(s.hu,14607):o.removedDocuments.size>0&&(qn(s.hu,42227),s.hu=!1))}),await vv(n,r,e)}catch(r){await Sm(r)}}function X4(t,e,n){const r=zt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach((i,s)=>{const a=s.view.va(e);a.snapshot&&o.push(a.snapshot)}),function(s,a){const l=zt(s);l.onlineState=a;let u=!1;l.queries.forEach((f,h)=>{for(const p of h.Sa)p.va(a)&&(u=!0)}),u&&lR(l)}(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Zre(t,e,n){const r=zt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),i=o&&o.key;if(i){let s=new Ir(vt.comparator);s=s.insert(i,hi.newNoDocument(i,Bt.min()));const a=Sn().add(i),l=new FC(Bt.min(),new Map,new Ir(bn),s,a);await kj(r,l),r.du=r.du.remove(i),r.Au.delete(e),uR(r)}else await bT(r.localStore,e,!1).then(()=>ST(r,e,n)).catch(Sm)}async function Jre(t,e){const n=zt(t),r=e.batch.batchId;try{const o=await sre(n.localStore,e);Aj(n,r,null),Tj(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vv(n,o)}catch(o){await Sm(o)}}async function eoe(t,e,n){const r=zt(t);try{const o=await function(s,a){const l=zt(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(qn(h!==null,37113),f=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})}(r.localStore,e);Aj(r,e,n),Tj(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vv(r,o)}catch(o){await Sm(o)}}function Tj(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Aj(t,e,n){const r=zt(t);let o=r.Vu[r.currentUser.toKey()];if(o){const i=o.get(e);i&&(n?i.reject(n):i.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function ST(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Rj(t,r)})}function Rj(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(nR(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),uR(t))}function Q4(t,e,n){for(const r of n)r instanceof xj?(t.Ru.addReference(r.key,e),toe(t,r)):r instanceof Ej?(it(cR,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Rj(t,r.key)):Rt(19791,{wu:r})}function toe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(it(cR,"New document in limbo: "+n),t.Eu.add(r),uR(t))}function uR(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new vt(fr.fromString(e)),r=t.fu.next();t.Au.set(r,new Ure(n)),t.du=t.du.insert(n,r),yj(t.remoteStore,new nd(Ml(H8(n.path)),r,"TargetPurposeLimboResolution",PC.ce))}}async function vv(t,e,n){const r=zt(t),o=[],i=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{s.push(r.pu(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){o.push(u);const f=eR.As(l.targetId,u);i.push(f)}}))}),await Promise.all(s),r.Pu.H_(o),await async function(l,u){const f=zt(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Fe.forEach(u,p=>Fe.forEach(p.Es,g=>f.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>Fe.forEach(p.ds,g=>f.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!xm(h))throw h;it(tR,"Failed to update sequence numbers: "+h)}for(const h of u){const p=h.targetId;if(!h.fromCache){const g=f.Ms.get(p),v=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(v);f.Ms=f.Ms.insert(p,b)}}}(r.localStore,i))}async function noe(t,e){const n=zt(t);if(!n.currentUser.isEqual(e)){it(cR,"User change. New user:",e.toKey());const r=await hj(n.localStore,e);n.currentUser=e,function(i,s){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new st(He.CANCELLED,s))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vv(n,r.Ls)}}function roe(t,e){const n=zt(t),r=n.Au.get(e);if(r&&r.hu)return Sn().add(r.key);{let o=Sn();const i=n.Iu.get(e);if(!i)return o;for(const s of i){const a=n.Tu.get(s);o=o.unionWith(a.view.nu)}return o}}function Mj(t){const e=zt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=roe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zre.bind(null,e),e.Pu.H_=Bre.bind(null,e.eventManager),e.Pu.yu=$re.bind(null,e.eventManager),e}function ooe(t){const e=zt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jre.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eoe.bind(null,e),e}class P1{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zC(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ire(this.persistence,new nre,e.initialUser,this.serializer)}Cu(e){return new fj(JA.mi,this.serializer)}Du(e){return new fre}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}P1.provider={build:()=>new P1};class ioe extends P1{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){qn(this.persistence.referenceDelegate instanceof D1,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Hne(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new fj(r=>D1.mi(r,n),this.serializer)}}class xT{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>X4(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=noe.bind(null,this.syncEngine),await Ore(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Lre}()}createDatastore(e){const n=zC(e.databaseInfo.databaseId),r=function(i){return new yre(i)}(e.databaseInfo);return function(i,s,a,l){return new Cre(i,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,o,i,s,a){return new xre(r,o,i,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>X4(this.syncEngine,n,0),function(){return U4.v()?new U4:new hre}())}createSyncEngine(e,n){return function(o,i,s,a,l,u,f){const h=new qre(o,i,s,a,l,u);return f&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const r=zt(n);it(Jf,"RemoteStore shutting down."),r.Ea.add(5),await yv(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}xT.provider={build:()=>new xT};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class soe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Wc("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="FirestoreClient";class aoe{constructor(e,n,r,o,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=di.UNAUTHENTICATED,this.clientId=HA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async s=>{it(kd,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(it(kd,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=aR(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function h_(t,e){t.asyncQueue.verifyOperationInProgress(),it(kd,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async o=>{r.isEqual(o)||(await hj(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Z4(t,e){t.asyncQueue.verifyOperationInProgress();const n=await loe(t);it(kd,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>G4(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,o)=>G4(e.remoteStore,o)),t._onlineComponents=e}async function loe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){it(kd,"Using user provided OfflineComponentProvider");try{await h_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===He.FAILED_PRECONDITION||o.code===He.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;qp("Error using user provided cache. Falling back to memory cache: "+n),await h_(t,new P1)}}else it(kd,"Using default OfflineComponentProvider"),await h_(t,new ioe(void 0));return t._offlineComponents}async function Ij(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(it(kd,"Using user provided OnlineComponentProvider"),await Z4(t,t._uninitializedComponentsProvider._online)):(it(kd,"Using default OnlineComponentProvider"),await Z4(t,new xT))),t._onlineComponents}function coe(t){return Ij(t).then(e=>e.syncEngine)}async function uoe(t){const e=await Ij(t),n=e.eventManager;return n.onListen=Gre.bind(null,e.syncEngine),n.onUnlisten=Yre.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Kre.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Xre.bind(null,e.syncEngine),n}function doe(t,e,n={}){const r=new hd;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,a,l,u){const f=new soe({next:p=>{f.Nu(),s.enqueueAndForget(()=>jre(i,h)),p.fromCache&&l.source==="server"?u.reject(new st(He.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new Hre(a,f,{includeMetadataChanges:!0,qa:!0});return Vre(i,h)}(await uoe(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj="firestore.googleapis.com",e3=!0;class t3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new st(He.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Dj,this.ssl=e3}else this.host=e.host,this.ssl=e.ssl??e3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bne)throw new st(He.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ste("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Nj(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new st(He.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new st(He.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new st(He.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class GC{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new t3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new st(He.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new st(He.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new t3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fte;switch(r.type){case"firstParty":return new gte(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new st(He.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=J4.get(n);r&&(it("ComponentProvider","Removing Datastore"),J4.delete(n),r.terminate())}(this),Promise.resolve()}}function foe(t,e,n,r={}){t=Kp(t,GC);const o=bm(e),i=t._getSettings(),s={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;o&&(a8(`https://${a}`),l8("Firestore",!0)),i.host!==Dj&&i.host!==a&&qp("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:o,emulatorOptions:r};if(!Xf(l,s)&&(t._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=di.MOCK_USER;else{u=BJ(r.mockUserToken,t._app?.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new st(He.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new di(h)}t._authCredentials=new hte(new S8(u,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _m(this.firestore,e,this._query)}}class go{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new go(this.firestore,e,this._key)}toJSON(){return{type:go._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(hv(n,go._jsonSchema))return new go(e,r||null,new vt(fr.fromString(n.referencePath)))}}go._jsonSchemaVersion="firestore/documentReference/1.0",go._jsonSchema={type:io("string",go._jsonSchemaVersion),referencePath:io("string")};class pd extends _m{constructor(e,n,r){super(e,n,H8(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new go(this.firestore,null,new vt(e))}withConverter(e){return new pd(this.firestore,e,this._path)}}function n3(t,e,...n){if(t=Ts(t),x8("collection","path",e),t instanceof GC){const r=fr.fromString(e,...n);return p4(r),new pd(t,null,r)}{if(!(t instanceof go||t instanceof pd))throw new st(He.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fr.fromString(e,...n));return p4(r),new pd(t.firestore,null,r)}}function r3(t,e,...n){if(t=Ts(t),arguments.length===1&&(e=HA.newId()),x8("doc","path",e),t instanceof GC){const r=fr.fromString(e,...n);return h4(r),new go(t,null,new vt(r))}{if(!(t instanceof go||t instanceof pd))throw new st(He.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fr.fromString(e,...n));return h4(r),new go(t.firestore,t instanceof pd?t.converter:null,new vt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3="AsyncQueue";class i3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new mj(this,"async_queue_retry"),this._c=()=>{const r=f_();r&&it(o3,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=f_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=f_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new hd;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xm(e))throw e;it(o3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Wc("INTERNAL UNHANDLED ERROR: ",s3(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=sR.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(o),o}uc(){this.nc&&Rt(47125,{Pc:s3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function s3(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class KC extends GC{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new i3,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new i3(e),this._firestoreClient=void 0,await e}}}function hoe(t,e){const n=typeof t=="object"?t:f8(),r=typeof t=="string"?t:T1,o=BA(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const i=VJ("firestore");i&&foe(o,...i)}return o}function Oj(t){if(t._terminated)throw new st(He.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||poe(t),t._firestoreClient}function poe(t){const e=t._freezeSettings(),n=function(o,i,s,a){return new Dte(o,i,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,Nj(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new aoe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const i=o?._online.build();return{_offline:o?._offline.build(i),_online:i}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ia(Qo.fromBase64String(e))}catch(n){throw new st(He.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ia(Qo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ia._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(hv(e,ia._jsonSchema))return ia.fromBase64String(e.bytes)}}ia._jsonSchemaVersion="firestore/bytes/1.0",ia._jsonSchema={type:io("string",ia._jsonSchemaVersion),bytes:io("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new st(He.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yo(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new st(He.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new st(He.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return bn(this._lat,e._lat)||bn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Dl._jsonSchemaVersion}}static fromJSON(e){if(hv(e,Dl._jsonSchema))return new Dl(e.latitude,e.longitude)}}Dl._jsonSchemaVersion="firestore/geoPoint/1.0",Dl._jsonSchema={type:io("string",Dl._jsonSchemaVersion),latitude:io("number"),longitude:io("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==o[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ol._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(hv(e,Ol._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ol(e.vectorValues);throw new st(He.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ol._jsonSchemaVersion="firestore/vectorValue/1.0",Ol._jsonSchema={type:io("string",Ol._jsonSchemaVersion),vectorValues:io("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const moe=/^__.*__$/;class goe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new yh(e,this.data,this.fieldMask,n,this.fieldTransforms):new mv(e,this.data,n,this.fieldTransforms)}}function Pj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rt(40011,{Ac:t})}}class hR{constructor(e,n,r,o,i,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hR({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return L1(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Pj(this.Ac)&&moe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class yoe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zC(e)}Cc(e,n,r,o=!1){return new hR({Ac:e,methodName:n,Dc:r,path:Yo.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lj(t){const e=t._freezeSettings(),n=zC(t._databaseId);return new yoe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function voe(t,e,n,r,o,i={}){const s=t.Cc(i.merge||i.mergeFields?2:0,e,n,o);Bj("Data must be an object, but it was:",s,r);const a=Vj(r,s);let l,u;if(i.merge)l=new $a(s.fieldMask),u=s.fieldTransforms;else if(i.mergeFields){const f=[];for(const h of i.mergeFields){const p=woe(e,h,n);if(!s.contains(p))throw new st(He.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Soe(f,p)||f.push(p)}l=new $a(f),u=s.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=s.fieldTransforms;return new goe(new oa(a),l,u)}class pR extends fR{_toFieldTransform(e){return new ine(e.path,new Ey)}isEqual(e){return e instanceof pR}}function boe(t,e,n,r=!1){return mR(n,t.Cc(r?4:3,e))}function mR(t,e){if(jj(t=Ts(t)))return Bj("Unsupported field value:",e,t),Vj(t,e);if(t instanceof fR)return function(r,o){if(!Pj(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(o);i&&o.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,o){const i=[];let s=0;for(const a of r){let l=mR(a,o.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(t,e)}return function(r,o){if((r=Ts(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nne(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=sr.fromDate(r);return{timestampValue:N1(o.serializer,i)}}if(r instanceof sr){const i=new sr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:N1(o.serializer,i)}}if(r instanceof Dl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ia)return{bytesValue:oj(o.serializer,r._byteString)};if(r instanceof go){const i=o.databaseId,s=r.firestore._databaseId;if(!s.isEqual(i))throw o.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:QA(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ol)return function(s,a){return{mapValue:{fields:{[N8]:{stringValue:D8},[A1]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return KA(a.serializer,u)})}}}}}}(r,o);throw o.Sc(`Unsupported field value: ${OC(r)}`)}(t,e)}function Vj(t,e){const n={};return k8(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mh(t,(r,o)=>{const i=mR(o,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function jj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof sr||t instanceof Dl||t instanceof ia||t instanceof go||t instanceof fR||t instanceof Ol)}function Bj(t,e,n){if(!jj(n)||!E8(n)){const r=OC(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function woe(t,e,n){if((e=Ts(e))instanceof dR)return e._internalPath;if(typeof e=="string")return $j(t,e);throw L1("Field path arguments must be of type string or ",t,!1,void 0,n)}const Coe=new RegExp("[~\\*/\\[\\]]");function $j(t,e,n){if(e.search(Coe)>=0)throw L1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new dR(...e.split("."))._internalPath}catch{throw L1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function L1(t,e,n,r,o){const i=r&&!r.isEmpty(),s=o!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||s)&&(l+=" (found",i&&(l+=` in field ${r}`),s&&(l+=` in document ${o}`),l+=")"),new st(He.INVALID_ARGUMENT,a+t+l)}function Soe(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,n,r,o,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new go(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xoe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gR("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xoe extends Hj{data(){return super.data()}}function gR(t,e){return typeof e=="string"?$j(t,e):e instanceof dR?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eoe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new st(He.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yR{}class _oe extends yR{}function a3(t,e,...n){let r=[];e instanceof yR&&r.push(e),r=r.concat(n),function(i){const s=i.filter(l=>l instanceof vR).length,a=i.filter(l=>l instanceof WC).length;if(s>1||s>0&&a>0)throw new st(He.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)t=o._apply(t);return t}class WC extends _oe{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new WC(e,n,r)}_apply(e){const n=this._parse(e);return Fj(e._query,n),new _m(e.firestore,e.converter,hT(e._query,n))}_parse(e){const n=Lj(e.firestore);return function(i,s,a,l,u,f,h){let p;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new st(He.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){u3(h,f);const v=[];for(const b of h)v.push(c3(l,i,b));p={arrayValue:{values:v}}}else p=c3(l,i,h)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||u3(h,f),p=boe(a,s,h,f==="in"||f==="not-in");return oo.create(u,f,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function l3(t,e,n){const r=e,o=gR("where",t);return WC._create(o,r,n)}class vR extends yR{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vR(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ya.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,i){let s=o;const a=i.getFlattenedFilters();for(const l of a)Fj(s,l),s=hT(s,l)}(e._query,n),new _m(e.firestore,e.converter,hT(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function c3(t,e,n){if(typeof(n=Ts(n))=="string"){if(n==="")throw new st(He.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!F8(e)&&n.indexOf("/")!==-1)throw new st(He.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(fr.fromString(n));if(!vt.isDocumentKey(r))throw new st(He.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return S4(t,new vt(r))}if(n instanceof go)return S4(t,n._key);throw new st(He.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${OC(n)}.`)}function u3(t,e){if(!Array.isArray(t)||t.length===0)throw new st(He.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Fj(t,e){const n=function(o,i){for(const s of o)for(const a of s.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new st(He.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new st(He.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class koe{convertValue(e,n="none"){switch(Ed(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Rt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return mh(e,(o,i)=>{r[o]=this.convertValue(i,n)}),r}convertVectorValue(e){const n=e.fields?.[A1].arrayValue?.values?.map(r=>Kr(r.doubleValue));return new Ol(n)}convertGeoPoint(e){return new Dl(Kr(e.latitude),Kr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=VC(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Cy(e));default:return null}}convertTimestamp(e){const n=Sd(e);return new sr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=fr.fromString(e);qn(uj(r),9688,{name:e});const o=new Sy(r.get(1),r.get(3)),i=new vt(r.popFirst(5));return o.isEqual(n)||Wc(`Document ${i} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Toe(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class db{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ap extends Hj{constructor(e,n,r,o,i,s){super(e,n,r,o,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gR("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new st(He.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ap._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ap._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ap._jsonSchema={type:io("string",Ap._jsonSchemaVersion),bundleSource:io("string","DocumentSnapshot"),bundleName:io("string"),bundle:io("string")};class Qb extends Ap{data(e={}){return super.data(e)}}class Rp{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new db(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Qb(this._firestore,this._userDataWriter,r.key,r,new db(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new st(He.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,i){if(o._snapshot.oldDocs.isEmpty()){let s=0;return o._snapshot.docChanges.map(a=>{const l=new Qb(o._firestore,o._userDataWriter,a.doc.key,a.doc,new db(o._snapshot.mutatedKeys.has(a.doc.key),o._snapshot.fromCache),o.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Qb(o._firestore,o._userDataWriter,a.doc.key,a.doc,new db(o._snapshot.mutatedKeys.has(a.doc.key),o._snapshot.fromCache),o.query.converter);let u=-1,f=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:Aoe(a.type),doc:l,oldIndex:u,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new st(He.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Rp._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=HA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),o.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Aoe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rt(61501,{type:t})}}Rp._jsonSchemaVersion="firestore/querySnapshot/1.0",Rp._jsonSchema={type:io("string",Rp._jsonSchemaVersion),bundleSource:io("string","QuerySnapshot"),bundleName:io("string"),bundle:io("string")};class Roe extends koe{constructor(e){super(),this.firestore=e}convertBytes(e){return new ia(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new go(this.firestore,null,n)}}function d3(t){t=Kp(t,_m);const e=Kp(t.firestore,KC),n=Oj(e),r=new Roe(e);return Eoe(t._query),doe(n,t._query).then(o=>new Rp(e,r,t,o))}function f3(t,e,n){t=Kp(t,go);const r=Kp(t.firestore,KC),o=Toe(t.converter,e);return zj(r,[voe(Lj(r),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,Il.none())])}function Moe(t){return zj(Kp(t.firestore,KC),[new WA(t._key,Il.none())])}function zj(t,e){return function(r,o){const i=new hd;return r.asyncQueue.enqueueAndForget(async()=>Qre(await coe(r),o,i)),i.promise}(Oj(t),e)}function h3(){return new pR("serverTimestamp")}(function(e,n=!0){(function(o){Cm=o})(wm),Up(new Qf("firestore",(r,{instanceIdentifier:o,options:i})=>{const s=r.getProvider("app").getImmediate(),a=new KC(new pte(r.getProvider("auth-internal")),new yte(s,r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new st(He.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sy(u.options.projectId,f)}(s,o),s);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),dd(c4,u4,e),dd(c4,u4,"esm2020")})();var Ioe="firebase",Noe="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dd(Ioe,Noe,"app");function Uj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Doe=Uj,qj=new dv("auth","Firebase",Uj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=new VA("@firebase/auth");function Ooe(t,...e){V1.logLevel<=vn.WARN&&V1.warn(`Auth (${wm}): ${t}`,...e)}function Zb(t,...e){V1.logLevel<=vn.ERROR&&V1.error(`Auth (${wm}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(t,...e){throw wR(t,...e)}function Ua(t,...e){return wR(t,...e)}function bR(t,e,n){const r={...Doe(),[e]:n};return new dv("auth","Firebase",r).create(e,{appName:t.name})}function jf(t){return bR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Poe(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&$l(t,"argument-error"),bR(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wR(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return qj.create(t,...e)}function Pt(t,e,...n){if(!t)throw wR(e,...n)}function Nc(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Zb(e),new Error(e)}function Xc(t,e){t||Nc(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(){return typeof self<"u"&&self.location?.href||""}function Loe(){return p3()==="http:"||p3()==="https:"}function p3(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Voe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Loe()||qJ()||"connection"in navigator)?navigator.onLine:!0}function joe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xc(n>e,"Short delay should be less than long delay!"),this.isMobile=FJ()||GJ()}get(){return Voe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(t,e){Xc(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Boe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $oe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Hoe=new bv(3e4,6e4);function SR(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function km(t,e,n,r,o={}){return Kj(t,o,async()=>{let i={},s={};r&&(e==="GET"?s=r:i={body:JSON.stringify(r)});const a=fv({key:t.config.apiKey,...s}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return UJ()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&bm(t.emulatorConfig.host)&&(u.credentials="include"),Gj.fetch()(await Wj(t,t.config.apiHost,n,a),u)})}async function Kj(t,e,n){t._canInitEmulator=!1;const r={...Boe,...e};try{const o=new zoe(t),i=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw fb(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const a=i.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw fb(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw fb(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw fb(t,"user-disabled",s);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw bR(t,f,u);$l(t,f)}}catch(o){if(o instanceof eu)throw o;$l(t,"network-request-failed",{message:String(o)})}}async function Foe(t,e,n,r,o={}){const i=await km(t,e,n,r,o);return"mfaPendingCredential"in i&&$l(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Wj(t,e,n,r){const o=`${e}${n}?${r}`,i=t,s=i.config.emulator?CR(t.config,o):`${t.config.apiScheme}://${o}`;return $oe.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(s).toString():s}class zoe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ua(this.auth,"network-request-failed")),Hoe.get())})}}function fb(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Ua(t,e,r);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uoe(t,e){return km(t,"POST","/v1/accounts:delete",e)}async function j1(t,e){return km(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qoe(t,e=!1){const n=Ts(t),r=await n.getIdToken(e),o=xR(r);Pt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const i=typeof o.firebase=="object"?o.firebase:void 0,s=i?.sign_in_provider;return{claims:o,token:r,authTime:ny(p_(o.auth_time)),issuedAtTime:ny(p_(o.iat)),expirationTime:ny(p_(o.exp)),signInProvider:s||null,signInSecondFactor:i?.sign_in_second_factor||null}}function p_(t){return Number(t)*1e3}function xR(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zb("JWT malformed, contained fewer than 3 sections"),null;try{const o=r8(n);return o?JSON.parse(o):(Zb("Failed to decode base64 JWT payload"),null)}catch(o){return Zb("Caught error parsing JWT payload as JSON",o?.toString()),null}}function m3(t){const e=xR(t);return Pt(e,"internal-error"),Pt(typeof e.exp<"u","internal-error"),Pt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ty(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof eu&&Goe(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Goe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Koe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ny(this.lastLoginAt),this.creationTime=ny(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(t){const e=t.auth,n=await t.getIdToken(),r=await Ty(t,j1(e,{idToken:n}));Pt(r?.users.length,e,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const i=o.providerUserInfo?.length?Yj(o.providerUserInfo):[],s=Yoe(t.providerData,i),a=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!s?.length,u=a?l:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new _T(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function Woe(t){const e=Ts(t);await B1(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Yoe(t,e){return[...t.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Yj(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xoe(t,e){const n=await Kj(t,{},async()=>{const r=fv({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:i}=t.config,s=await Wj(t,o,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&bm(t.emulatorConfig.host)&&(l.credentials="include"),Gj.fetch()(s,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Qoe(t,e){return km(t,"POST","/v2/accounts:revokeToken",SR(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pt(e.idToken,"internal-error"),Pt(typeof e.idToken<"u","internal-error"),Pt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):m3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pt(e.length!==0,"internal-error");const n=m3(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:i}=await Xoe(e,n);this.updateTokensAndExpiration(r,o,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:i}=n,s=new Mp;return r&&(Pt(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),o&&(Pt(typeof o=="string","internal-error",{appName:e}),s.accessToken=o),i&&(Pt(typeof i=="number","internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mp,this.toJSON())}_performRefresh(){return Nc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(t,e){Pt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ha{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new Koe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new _T(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ty(this,this.stsTokenManager.getToken(this.auth,e));return Pt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qoe(this,e)}reload(){return Woe(this)}_assign(e){this!==e&&(Pt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ha({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await B1(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Va(this.auth.app))return Promise.reject(jf(this.auth));const e=await this.getIdToken();return await Ty(this,Uoe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,i=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:h,emailVerified:p,isAnonymous:g,providerData:v,stsTokenManager:b}=n;Pt(h&&b,e,"internal-error");const E=Mp.fromJSON(this.name,b);Pt(typeof h=="string",e,"internal-error"),Hu(r,e.name),Hu(o,e.name),Pt(typeof p=="boolean",e,"internal-error"),Pt(typeof g=="boolean",e,"internal-error"),Hu(i,e.name),Hu(s,e.name),Hu(a,e.name),Hu(l,e.name),Hu(u,e.name),Hu(f,e.name);const T=new Ha({uid:h,auth:e,email:o,emailVerified:p,displayName:r,isAnonymous:g,photoURL:s,phoneNumber:i,tenantId:a,stsTokenManager:E,createdAt:u,lastLoginAt:f});return v&&Array.isArray(v)&&(T.providerData=v.map(P=>({...P}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(e,n,r=!1){const o=new Mp;o.updateFromServerResponse(n);const i=new Ha({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await B1(i),i}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Pt(o.localId!==void 0,"internal-error");const i=o.providerUserInfo!==void 0?Yj(o.providerUserInfo):[],s=!(o.email&&o.passwordHash)&&!i?.length,a=new Mp;a.updateFromIdToken(r);const l=new Ha({uid:o.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:i,metadata:new _T(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!i?.length};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=new Map;function Dc(t){Xc(t instanceof Function,"Expected a class definition");let e=g3.get(t);return e?(Xc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,g3.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Xj.type="NONE";const y3=Xj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t,e,n){return`firebase:${t}:${e}:${n}`}class Ip{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:i}=this.auth;this.fullUserKey=Jb(this.userKey,o.apiKey,i),this.fullPersistenceKey=Jb("persistence",o.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await j1(this.auth,{idToken:e}).catch(()=>{});return n?Ha._fromGetAccountInfoResponse(this.auth,n,e):null}return Ha._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ip(Dc(y3),e,r);const o=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=o[0]||Dc(y3);const s=Jb(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const f=await u._get(s);if(f){let h;if(typeof f=="string"){const p=await j1(e,{idToken:f}).catch(()=>{});if(!p)break;h=await Ha._fromGetAccountInfoResponse(e,p,f)}else h=Ha._fromJSON(e,f);u!==i&&(a=h),i=u;break}}catch{}const l=o.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ip(i,e,r):(i=l[0],a&&await i._set(s,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(s)}catch{}})),new Ip(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(e7(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(n7(e))return"Blackberry";if(r7(e))return"Webos";if(Zj(e))return"Safari";if((e.includes("chrome/")||Jj(e))&&!e.includes("edge/"))return"Chrome";if(t7(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Qj(t=vi()){return/firefox\//i.test(t)}function Zj(t=vi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jj(t=vi()){return/crios\//i.test(t)}function e7(t=vi()){return/iemobile/i.test(t)}function t7(t=vi()){return/android/i.test(t)}function n7(t=vi()){return/blackberry/i.test(t)}function r7(t=vi()){return/webos/i.test(t)}function ER(t=vi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Zoe(t=vi()){return ER(t)&&!!window.navigator?.standalone}function Joe(){return KJ()&&document.documentMode===10}function o7(t=vi()){return ER(t)||t7(t)||r7(t)||n7(t)||/windows phone/i.test(t)||e7(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(t,e=[]){let n;switch(t){case"Browser":n=v3(vi());break;case"Worker":n=`${v3(vi())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wm}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eie{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((s,a)=>{try{const l=e(i);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tie(t,e={}){return km(t,"GET","/v2/passwordPolicy",SR(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nie=6;class rie{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??nie,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oie{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new b3(this),this.idTokenSubscription=new b3(this),this.beforeStateQueue=new eie(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dc(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ip.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await j1(this,{idToken:e}),r=await Ha._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Va(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===s)&&a?.user&&(r=a.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await B1(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=joe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Va(this.app))return Promise.reject(jf(this));const n=e?Ts(e):null;return n&&Pt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Va(this.app)?Promise.reject(jf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Va(this.app)?Promise.reject(jf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Dc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tie(this),n=new rie(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dv("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Qoe(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Dc(e)||this._popupRedirectResolver;Pt(n,this,"argument-error"),this.redirectPersistenceManager=await Ip.create(this,[Dc(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pt(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,o);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=i7(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Va(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Ooe(`Error while retrieving App Check token: ${e.error}`),e?.token}}function YC(t){return Ts(t)}class b3{constructor(e){this.auth=e,this.observer=null,this.addObserver=tee(n=>this.observer=n)}get next(){return Pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _R={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iie(t){_R=t}function sie(t){return _R.loadJS(t)}function aie(){return _R.gapiScript}function lie(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cie(t,e){const n=BA(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),i=n.getOptions();if(Xf(i,e??{}))return o;$l(o,"already-initialized")}return n.initialize({options:e})}function uie(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Dc);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function die(t,e,n){const r=YC(t);Pt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,i=s7(e),{host:s,port:a}=fie(e),l=a===null?"":`:${a}`,u={url:`${i}//${s}${l}/`},f=Object.freeze({host:s,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Pt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pt(Xf(u,r.config.emulator)&&Xf(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,bm(s)?(a8(`${i}//${s}${l}`),l8("Auth",!0)):hie()}function s7(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fie(t){const e=s7(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const i=o[1];return{host:i,port:w3(r.substr(i.length+1))}}else{const[i,s]=r.split(":");return{host:i,port:w3(s)}}}function w3(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function hie(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a7{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nc("not implemented")}_getIdTokenResponse(e){return Nc("not implemented")}_linkToIdToken(e,n){return Nc("not implemented")}_getReauthenticationResolver(e){return Nc("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Np(t,e){return Foe(t,"POST","/v1/accounts:signInWithIdp",SR(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pie="http://localhost";class eh extends a7{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new eh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$l("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...i}=n;if(!r||!o)return null;const s=new eh(r,o);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Np(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Np(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Np(e,n)}buildRequest(){const e={requestUri:pie,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fv(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv extends kR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends wv{constructor(){super("facebook.com")}static credential(e){return eh._fromParams({providerId:Yu.PROVIDER_ID,signInMethod:Yu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yu.credentialFromTaggedObject(e)}static credentialFromError(e){return Yu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yu.credential(e.oauthAccessToken)}catch{return null}}}Yu.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends wv{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return eh._fromParams({providerId:Mc.PROVIDER_ID,signInMethod:Mc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mc.credentialFromTaggedObject(e)}static credentialFromError(e){return Mc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Mc.credential(n,r)}catch{return null}}}Mc.GOOGLE_SIGN_IN_METHOD="google.com";Mc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu extends wv{constructor(){super("github.com")}static credential(e){return eh._fromParams({providerId:Xu.PROVIDER_ID,signInMethod:Xu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xu.credentialFromTaggedObject(e)}static credentialFromError(e){return Xu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xu.credential(e.oauthAccessToken)}catch{return null}}}Xu.GITHUB_SIGN_IN_METHOD="github.com";Xu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends wv{constructor(){super("twitter.com")}static credential(e,n){return eh._fromParams({providerId:Qu.PROVIDER_ID,signInMethod:Qu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qu.credentialFromTaggedObject(e)}static credentialFromError(e){return Qu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Qu.credential(n,r)}catch{return null}}}Qu.TWITTER_SIGN_IN_METHOD="twitter.com";Qu.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const i=await Ha._fromIdTokenResponse(e,r,o),s=C3(r);return new Zp({user:i,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=C3(r);return new Zp({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function C3(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1 extends eu{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,$1.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new $1(e,n,r,o)}}function l7(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?$1._fromErrorAndOperation(t,i,e,r):i})}async function mie(t,e,n=!1){const r=await Ty(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Zp._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gie(t,e,n=!1){const{auth:r}=t;if(Va(r.app))return Promise.reject(jf(r));const o="reauthenticate";try{const i=await Ty(t,l7(r,o,e,t),n);Pt(i.idToken,r,"internal-error");const s=xR(i.idToken);Pt(s,r,"internal-error");const{sub:a}=s;return Pt(t.uid===a,r,"user-mismatch"),Zp._forOperation(t,o,i)}catch(i){throw i?.code==="auth/user-not-found"&&$l(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yie(t,e,n=!1){if(Va(t.app))return Promise.reject(jf(t));const r="signIn",o=await l7(t,r,e),i=await Zp._fromIdTokenResponse(t,r,o);return n||await t._updateCurrentUser(i.user),i}function vie(t,e,n,r){return Ts(t).onIdTokenChanged(e,n,r)}function bie(t,e,n){return Ts(t).beforeAuthStateChanged(e,n)}function wie(t,e,n,r){return Ts(t).onAuthStateChanged(e,n,r)}const H1="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(H1,"1"),this.storage.removeItem(H1),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cie=1e3,Sie=10;class u7 extends c7{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=o7(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},i=this.storage.getItem(r);Joe()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Sie):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Cie)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}u7.type="LOCAL";const xie=u7;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7 extends c7{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}d7.type="SESSION";const f7=d7;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eie(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new XC(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:i}=n.data,s=this.handlersMap[o];if(!s?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const a=Array.from(s).map(async u=>u(n.origin,i)),l=await Eie(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}XC.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ie{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let i,s;return new Promise((a,l)=>{const u=TR("",20);o.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:o,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(s),o.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[o.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(){return window}function kie(t){Pl().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h7(){return typeof Pl().WorkerGlobalScope<"u"&&typeof Pl().importScripts=="function"}async function Tie(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Aie(){return navigator?.serviceWorker?.controller||null}function Rie(){return h7()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p7="firebaseLocalStorageDb",Mie=1,F1="firebaseLocalStorage",m7="fbase_key";class Cv{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function QC(t,e){return t.transaction([F1],e?"readwrite":"readonly").objectStore(F1)}function Iie(){const t=indexedDB.deleteDatabase(p7);return new Cv(t).toPromise()}function kT(){const t=indexedDB.open(p7,Mie);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(F1,{keyPath:m7})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(F1)?e(r):(r.close(),await Iie(),e(await kT()))})})}async function S3(t,e,n){const r=QC(t,!0).put({[m7]:e,value:n});return new Cv(r).toPromise()}async function Nie(t,e){const n=QC(t,!1).get(e),r=await new Cv(n).toPromise();return r===void 0?null:r.value}function x3(t,e){const n=QC(t,!0).delete(e);return new Cv(n).toPromise()}const Die=800,Oie=3;class g7{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kT(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Oie)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return h7()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=XC._getInstance(Rie()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Tie(),!this.activeServiceWorker)return;this.sender=new _ie(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Aie()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kT();return await S3(e,H1,"1"),await x3(e,H1),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>S3(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Nie(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>x3(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const i=QC(o,!1).getAll();return new Cv(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:i}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(i)&&(this.notifyListeners(o,i),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Die)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}g7.type="LOCAL";const Pie=g7;new bv(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(t,e){return e?Dc(e):(Pt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR extends a7{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Np(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Np(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Np(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Lie(t){return yie(t.auth,new AR(t),t.bypassAuthState)}function Vie(t){const{auth:e,user:n}=t;return Pt(n,e,"internal-error"),gie(n,new AR(t),t.bypassAuthState)}async function jie(t){const{auth:e,user:n}=t;return Pt(n,e,"internal-error"),mie(n,new AR(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v7{constructor(e,n,r,o,i=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:i,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Lie;case"linkViaPopup":case"linkViaRedirect":return jie;case"reauthViaPopup":case"reauthViaRedirect":return Vie;default:$l(this.auth,"internal-error")}}resolve(e){Xc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bie=new bv(2e3,1e4);async function $ie(t,e,n){if(Va(t.app))return Promise.reject(Ua(t,"operation-not-supported-in-this-environment"));const r=YC(t);Poe(t,e,kR);const o=y7(r,n);return new Rf(r,"signInViaPopup",e,o).executeNotNull()}class Rf extends v7{constructor(e,n,r,o,i){super(e,n,o,i),this.provider=r,this.authWindow=null,this.pollId=null,Rf.currentPopupAction&&Rf.currentPopupAction.cancel(),Rf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pt(e,this.auth,"internal-error"),e}async onExecution(){Xc(this.filter.length===1,"Popup operations only handle one event");const e=TR();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ua(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ua(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rf.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ua(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Bie.get())};e()}}Rf.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hie="pendingRedirect",e1=new Map;class Fie extends v7{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=e1.get(this.auth._key());if(!e){try{const r=await zie(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}e1.set(this.auth._key(),e)}return this.bypassAuthState||e1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zie(t,e){const n=Gie(e),r=qie(t);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function Uie(t,e){e1.set(t._key(),e)}function qie(t){return Dc(t._redirectPersistence)}function Gie(t){return Jb(Hie,t.config.apiKey,t.name)}async function Kie(t,e,n=!1){if(Va(t.app))return Promise.reject(jf(t));const r=YC(t),o=y7(r,e),s=await new Fie(r,o,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wie=600*1e3;class Yie{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xie(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!b7(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ua(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Wie&&this.cachedEventUids.clear(),this.cachedEventUids.has(E3(e))}saveEventToCache(e){this.cachedEventUids.add(E3(e)),this.lastProcessedEventTime=Date.now()}}function E3(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function b7({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Xie(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return b7(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qie(t,e={}){return km(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zie=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jie=/^https?/;async function ese(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Qie(t);for(const n of e)try{if(tse(n))return}catch{}$l(t,"unauthorized-domain")}function tse(t){const e=ET(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!Jie.test(n))return!1;if(Zie.test(t))return r===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nse=new bv(3e4,6e4);function _3(){const t=Pl().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function rse(t){return new Promise((e,n)=>{function r(){_3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_3(),n(Ua(t,"network-request-failed"))},timeout:nse.get()})}if(Pl().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Pl().gapi?.load)r();else{const o=lie("iframefcb");return Pl()[o]=()=>{gapi.load?r():n(Ua(t,"network-request-failed"))},sie(`${aie()}?onload=${o}`).catch(i=>n(i))}}).catch(e=>{throw t1=null,e})}let t1=null;function ose(t){return t1=t1||rse(t),t1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ise=new bv(5e3,15e3),sse="__/auth/iframe",ase="emulator/auth/iframe",lse={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cse=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function use(t){const e=t.config;Pt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?CR(e,ase):`https://${t.config.authDomain}/${sse}`,r={apiKey:e.apiKey,appName:t.name,v:wm},o=cse.get(t.config.apiHost);o&&(r.eid=o);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${fv(r).slice(1)}`}async function dse(t){const e=await ose(t),n=Pl().gapi;return Pt(n,t,"internal-error"),e.open({where:document.body,url:use(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lse,dontclear:!0},r=>new Promise(async(o,i)=>{await r.restyle({setHideOnLeave:!1});const s=Ua(t,"network-request-failed"),a=Pl().setTimeout(()=>{i(s)},ise.get());function l(){Pl().clearTimeout(a),o(r)}r.ping(l).then(l,()=>{i(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fse={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hse=500,pse=600,mse="_blank",gse="http://localhost";class k3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yse(t,e,n,r=hse,o=pse){const i=Math.max((window.screen.availHeight-o)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...fse,width:r.toString(),height:o.toString(),top:i,left:s},u=vi().toLowerCase();n&&(a=Jj(u)?mse:n),Qj(u)&&(e=e||gse,l.scrollbars="yes");const f=Object.entries(l).reduce((p,[g,v])=>`${p}${g}=${v},`,"");if(Zoe(u)&&a!=="_self")return vse(e||"",a),new k3(null);const h=window.open(e||"",a,f);Pt(h,t,"popup-blocked");try{h.focus()}catch{}return new k3(h)}function vse(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bse="__/auth/handler",wse="emulator/auth/handler",Cse=encodeURIComponent("fac");async function T3(t,e,n,r,o,i){Pt(t.config.authDomain,t,"auth-domain-config-required"),Pt(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:wm,eventId:o};if(e instanceof kR){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",eee(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))s[f]=h}if(e instanceof wv){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const l=await t._getAppCheckToken(),u=l?`#${Cse}=${encodeURIComponent(l)}`:"";return`${Sse(t)}?${fv(a).slice(1)}${u}`}function Sse({config:t}){return t.emulator?CR(t,wse):`https://${t.authDomain}/${bse}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="webStorageSupport";class xse{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=f7,this._completeRedirectFn=Kie,this._overrideRedirectResult=Uie}async _openPopup(e,n,r,o){Xc(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await T3(e,n,r,ET(),o);return yse(e,i,TR())}async _openRedirect(e,n,r,o){await this._originValidation(e);const i=await T3(e,n,r,ET(),o);return kie(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:i}=this.eventManagers[n];return o?Promise.resolve(o):(Xc(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await dse(e),r=new Yie(e);return n.register("authEvent",o=>(Pt(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(m_,{type:m_},o=>{const i=o?.[0]?.[m_];i!==void 0&&n(!!i),$l(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ese(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return o7()||Zj()||ER()}}const Ese=xse;var A3="@firebase/auth",R3="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _se{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kse(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Tse(t){Up(new Qf("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Pt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:i7(t)},u=new oie(r,o,i,l);return uie(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Up(new Qf("auth-internal",e=>{const n=YC(e.getProvider("auth").getImmediate());return(r=>new _se(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dd(A3,R3,kse(t)),dd(A3,R3,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ase=300,Rse=s8("authIdTokenMaxAge")||Ase;let M3=null;const Mse=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Rse)return;const o=n?.token;M3!==o&&(M3=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Ise(t=f8()){const e=BA(t,"auth");if(e.isInitialized())return e.getImmediate();const n=cie(t,{popupRedirectResolver:Ese,persistence:[Pie,xie,f7]}),r=s8("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const s=Mse(i.toString());bie(n,s,()=>s(n.currentUser)),vie(n,a=>s(a))}}const o=o8("auth");return o&&die(n,`http://${o}`),n}function Nse(){return document.getElementsByTagName("head")?.[0]??document}iie({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=o=>{const i=Ua("internal-error");i.customData=o,n(i)},r.type="text/javascript",r.charset="UTF-8",Nse().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Tse("Browser");const Dse={apiKey:"AIzaSyC1HlXj7EkC7ojpJVNcBFbvNlJLZvbLvHc",authDomain:"bsp-notes.firebaseapp.com",projectId:"bsp-notes",storageBucket:"bsp-notes.firebasestorage.app",messagingSenderId:"835580107487",appId:"1:835580107487:web:aaf3a625addafc1b1b276a",measurementId:"G-62J6HHVTHZ"},w7=d8(Dse),I3=Ise(w7),z1=hoe(w7),Ose=new Mc,C7=t=>ao[t];async function Pse(){const t=await ao.SyncedQueue.toArray();for(const e of t)try{const n=r3(z1,e.table,e.id);if(e.type==="add"||e.type==="update"){console.log(e.table);const o=await C7(e.table).get(e.id);o?await f3(n,{...o,updatedAt:h3()}):console.error("table id not defined")}else e.type==="delete"&&(await Moe(n),await f3(r3(z1,"DeletedItems",e.id),{id:e.id,table:e.table,updatedAt:h3()}));await ao.SyncedQueue.delete(e.id),console.log(" Synced with Firestore:",e)}catch(n){console.error(" Firestore sync failed",n)}}async function Lse(){const t=await ao.SyncMeta.get("lastSyncedAt"),e=typeof t?.value=="string"?new Date(t?.value):new Date(0);if(e instanceof Date&&!isNaN(e.getTime())){const n=a3(n3(z1,"Items"),l3("updatedAt",">",sr.fromDate(new Date(e)))),r=a3(n3(z1,"DeletedItems"),l3("updatedAt",">",sr.fromDate(new Date(e)))),o=await d3(n);if(o)for(const s of o.docs){const a=s.data();await ao.Items.put({id:s.id,title:a.title||"",guess:a.guess||"",content:a.content||"",renderDate:a.renderDate||Date.now(),renderRange:a.renderRange||0,classId:a.classId||"",bookId:a.bookId||"",priority:a.priority||"low"})}const i=await d3(r);if(i)for(const s of i.docs){const a=s.data();await C7(a.table).delete(a.id)}}}let g_=!1;async function TT(t){if(!g_)try{g_=!0,t(!0),Lse(),Pse(),await ao.SyncMeta.put({key:"lastSyncedAt",value:new Date().toISOString()}),setTimeout(()=>{t(!1),g_=!1},500)}catch(e){console.error(e)}}function Vse(){const[t,e]=_.useState(null),{setOpenSidebar:n,setPageTitle:r,setPageGuess:o,setOpenCommandSearch:i,setNanoPageId:s,setPageContent:a,setPagePriority:l,setSelectedFilter:u,icons:f,syncLoading:h,setSyncLoading:p,setOpenIcon:g}=wd(),v=NC(()=>ao.ClassorBook.toArray(),[],[]),b=[{title:"Sync",icon:h?KW:HW,onclick:()=>{TT(p)}},{title:"Search",icon:Fk,onclick:()=>{i(!0)}},{title:"Icons",icon:Fk,onclick:()=>{g(!0)}},{title:"All Items",icon:YW,onclick:()=>{u("all")}},{title:"Add Item",icon:zW,onclick:()=>{console.log("a"),n(!0),r(""),o(""),a('[{type: "paragraph",content: [{type: "text",text: "",styles: {},},],},]'),l("low"),s(LA())}}],E=async()=>{try{await $ie(I3,Ose)}catch(V){console.error("Google login failed:",V)}};_.useEffect(()=>{const V=wie(I3,$=>{e($)});return()=>V()},[]);const[T,P]=_.useState({}),D=V=>{P($=>({...$,[V]:!$[V]}))},z=Array.from(new Set(v?.map(V=>V.classId)));return C.jsxs(cJ,{children:[C.jsx(fJ,{children:C.jsxs(hJ,{children:[C.jsx(qP,{children:"BSP Note"}),C.jsxs(pJ,{children:[C.jsx(r_,{children:b.map(V=>C.jsx(GP,{children:C.jsx(gJ,{asChild:!0,children:C.jsxs("div",{onClick:V.onclick,children:[h&&V.title==="Sync"?C.jsx(V.icon,{className:"animate-spin"}):C.jsx(V.icon,{}),C.jsx("span",{className:"select-none",children:V.title})]})})},V.title))}),C.jsx("hr",{className:"my-5"}),C.jsx(qP,{children:"Pages"}),C.jsx(r_,{className:"select-none",children:z?.map(V=>C.jsxs("div",{className:"mb-1",children:[C.jsxs("div",{onClick:()=>D(V),className:"flex items-center justify-between cursor-pointer px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-800",children:[C.jsxs("div",{className:"flex gap-2",children:[C.jsx("img",{src:f.find($=>$.value===V)?.url||f.find($=>$.value==="placeholder")?.url,alt:"",className:"h-6 aspect-square"}),C.jsx("span",{className:"font-bold",children:V})]}),C.jsx("span",{className:"text-sm tracking-wider",children:T[V]?C.jsx(PW,{}):C.jsx(VW,{})})]}),T[V]&&C.jsx("div",{className:"ml-4 mt-1 pl-2",children:v.filter($=>$.classId===V)?.map($=>C.jsx("div",{onClick:()=>{u($.bookId)},className:"cursor-pointer px-2 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-800",children:C.jsxs("div",{className:"flex gap-2",children:[C.jsx("img",{src:f.find(O=>O.value===$.bookId)?.url||f.find(O=>O.value==="placeholder")?.url,alt:"",className:"h-6 aspect-square"}),C.jsx("span",{className:"font-bold tracking-wide",children:$.bookId})]})},$.bookId))})]},V))})]})]})}),C.jsx(dJ,{children:C.jsx(r_,{children:C.jsx(GP,{children:C.jsxs("div",{onClick:()=>E(),className:"flex gap-2 hover:bg-neutral-400/30 p-2 rounded-md",children:[C.jsx(nY,{}),t?"Process Done":"Login In"]})})})})]})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function rd(t,e){return typeof t=="function"?t(e):t}function As(t,e){return n=>{e.setState(r=>({...r,[t]:rd(n,r[t])}))}}function ZC(t){return t instanceof Function}function jse(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function Bse(t,e){const n=[],r=o=>{o.forEach(i=>{n.push(i);const s=e(i);s!=null&&s.length&&r(s)})};return r(t),n}function Dt(t,e,n){let r=[],o;return i=>{let s;n.key&&n.debug&&(s=Date.now());const a=t(i);if(!(a.length!==r.length||a.some((f,h)=>r[h]!==f)))return o;r=a;let u;if(n.key&&n.debug&&(u=Date.now()),o=e(...a),n==null||n.onChange==null||n.onChange(o),n.key&&n.debug&&n!=null&&n.debug()){const f=Math.round((Date.now()-s)*100)/100,h=Math.round((Date.now()-u)*100)/100,p=h/16,g=(v,b)=>{for(v=String(v);v.length<b;)v=" "+v;return v};console.info(`%c ${g(h,5)} /${g(f,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*p,120))}deg 100% 31%);`,n?.key)}return o}}function Ot(t,e,n,r){return{debug:()=>{var o;return(o=t?.debugAll)!=null?o:t[e]},key:!1,onChange:r}}function $se(t,e,n,r){const o=()=>{var s;return(s=i.getValue())!=null?s:t.options.renderFallbackValue},i={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:o,getContext:Dt(()=>[t,n,e,i],(s,a,l,u)=>({table:s,column:a,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),Ot(t.options,"debugCells"))};return t._features.forEach(s=>{s.createCell==null||s.createCell(i,n,e,t)},{}),i}function Hse(t,e,n,r){var o,i;const a={...t._getDefaultColumnDef(),...e},l=a.accessorKey;let u=(o=(i=a.id)!=null?i:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?o:typeof a.header=="string"?a.header:void 0,f;if(a.accessorFn?f=a.accessorFn:l&&(l.includes(".")?f=p=>{let g=p;for(const b of l.split(".")){var v;g=(v=g)==null?void 0:v[b]}return g}:f=p=>p[a.accessorKey]),!u)throw new Error;let h={id:`${String(u)}`,accessorFn:f,parent:r,depth:n,columnDef:a,columns:[],getFlatColumns:Dt(()=>[!0],()=>{var p;return[h,...(p=h.columns)==null?void 0:p.flatMap(g=>g.getFlatColumns())]},Ot(t.options,"debugColumns")),getLeafColumns:Dt(()=>[t._getOrderColumnsFn()],p=>{var g;if((g=h.columns)!=null&&g.length){let v=h.columns.flatMap(b=>b.getLeafColumns());return p(v)}return[h]},Ot(t.options,"debugColumns"))};for(const p of t._features)p.createColumn==null||p.createColumn(h,t);return h}const li="debugHeaders";function N3(t,e,n){var r;let i={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const s=[],a=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(a),s.push(l)};return a(i),s},getContext:()=>({table:t,header:i,column:e})};return t._features.forEach(s=>{s.createHeader==null||s.createHeader(i,t)}),i}const Fse={createTable:t=>{t.getHeaderGroups=Dt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,o)=>{var i,s;const a=(i=r?.map(h=>n.find(p=>p.id===h)).filter(Boolean))!=null?i:[],l=(s=o?.map(h=>n.find(p=>p.id===h)).filter(Boolean))!=null?s:[],u=n.filter(h=>!(r!=null&&r.includes(h.id))&&!(o!=null&&o.includes(h.id)));return hb(e,[...a,...u,...l],t)},Ot(t.options,li)),t.getCenterHeaderGroups=Dt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,o)=>(n=n.filter(i=>!(r!=null&&r.includes(i.id))&&!(o!=null&&o.includes(i.id))),hb(e,n,t,"center")),Ot(t.options,li)),t.getLeftHeaderGroups=Dt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var o;const i=(o=r?.map(s=>n.find(a=>a.id===s)).filter(Boolean))!=null?o:[];return hb(e,i,t,"left")},Ot(t.options,li)),t.getRightHeaderGroups=Dt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var o;const i=(o=r?.map(s=>n.find(a=>a.id===s)).filter(Boolean))!=null?o:[];return hb(e,i,t,"right")},Ot(t.options,li)),t.getFooterGroups=Dt(()=>[t.getHeaderGroups()],e=>[...e].reverse(),Ot(t.options,li)),t.getLeftFooterGroups=Dt(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),Ot(t.options,li)),t.getCenterFooterGroups=Dt(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),Ot(t.options,li)),t.getRightFooterGroups=Dt(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),Ot(t.options,li)),t.getFlatHeaders=Dt(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ot(t.options,li)),t.getLeftFlatHeaders=Dt(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ot(t.options,li)),t.getCenterFlatHeaders=Dt(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ot(t.options,li)),t.getRightFlatHeaders=Dt(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ot(t.options,li)),t.getCenterLeafHeaders=Dt(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Ot(t.options,li)),t.getLeftLeafHeaders=Dt(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Ot(t.options,li)),t.getRightLeafHeaders=Dt(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Ot(t.options,li)),t.getLeafHeaders=Dt(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var o,i,s,a,l,u;return[...(o=(i=e[0])==null?void 0:i.headers)!=null?o:[],...(s=(a=n[0])==null?void 0:a.headers)!=null?s:[],...(l=(u=r[0])==null?void 0:u.headers)!=null?l:[]].map(f=>f.getLeafHeaders()).flat()},Ot(t.options,li))}};function hb(t,e,n,r){var o,i;let s=0;const a=function(p,g){g===void 0&&(g=1),s=Math.max(s,g),p.filter(v=>v.getIsVisible()).forEach(v=>{var b;(b=v.columns)!=null&&b.length&&a(v.columns,g+1)},0)};a(t);let l=[];const u=(p,g)=>{const v={depth:g,id:[r,`${g}`].filter(Boolean).join("_"),headers:[]},b=[];p.forEach(E=>{const T=[...b].reverse()[0],P=E.column.depth===v.depth;let D,z=!1;if(P&&E.column.parent?D=E.column.parent:(D=E.column,z=!0),T&&T?.column===D)T.subHeaders.push(E);else{const V=N3(n,D,{id:[r,g,D.id,E?.id].filter(Boolean).join("_"),isPlaceholder:z,placeholderId:z?`${b.filter($=>$.column===D).length}`:void 0,depth:g,index:b.length});V.subHeaders.push(E),b.push(V)}v.headers.push(E),E.headerGroup=v}),l.push(v),g>0&&u(b,g-1)},f=e.map((p,g)=>N3(n,p,{depth:s,index:g}));u(f,s-1),l.reverse();const h=p=>p.filter(v=>v.column.getIsVisible()).map(v=>{let b=0,E=0,T=[0];v.subHeaders&&v.subHeaders.length?(T=[],h(v.subHeaders).forEach(D=>{let{colSpan:z,rowSpan:V}=D;b+=z,T.push(V)})):b=1;const P=Math.min(...T);return E=E+P,v.colSpan=b,v.rowSpan=E,{colSpan:b,rowSpan:E}});return h((o=(i=l[0])==null?void 0:i.headers)!=null?o:[]),l}const zse=(t,e,n,r,o,i,s)=>{let a={id:e,index:r,original:n,depth:o,parentId:s,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(a._valuesCache.hasOwnProperty(l))return a._valuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return a._valuesCache[l]=u.accessorFn(a.original,r),a._valuesCache[l]},getUniqueValues:l=>{if(a._uniqueValuesCache.hasOwnProperty(l))return a._uniqueValuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(a._uniqueValuesCache[l]=u.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[l]):(a._uniqueValuesCache[l]=[a.getValue(l)],a._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=a.getValue(l))!=null?u:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>Bse(a.subRows,l=>l.subRows),getParentRow:()=>a.parentId?t.getRow(a.parentId,!0):void 0,getParentRows:()=>{let l=[],u=a;for(;;){const f=u.getParentRow();if(!f)break;l.push(f),u=f}return l.reverse()},getAllCells:Dt(()=>[t.getAllLeafColumns()],l=>l.map(u=>$se(t,a,u,u.id)),Ot(t.options,"debugRows")),_getAllCellsByColumnId:Dt(()=>[a.getAllCells()],l=>l.reduce((u,f)=>(u[f.column.id]=f,u),{}),Ot(t.options,"debugRows"))};for(let l=0;l<t._features.length;l++){const u=t._features[l];u==null||u.createRow==null||u.createRow(a,t)}return a},Use={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},S7=(t,e,n)=>{var r,o;const i=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((o=t.getValue(e))==null||(o=o.toString())==null||(o=o.toLowerCase())==null)&&o.includes(i))};S7.autoRemove=t=>qa(t);const x7=(t,e,n)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(n))};x7.autoRemove=t=>qa(t);const E7=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===n?.toLowerCase()};E7.autoRemove=t=>qa(t);const _7=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};_7.autoRemove=t=>qa(t);const k7=(t,e,n)=>!n.some(r=>{var o;return!((o=t.getValue(e))!=null&&o.includes(r))});k7.autoRemove=t=>qa(t)||!(t!=null&&t.length);const T7=(t,e,n)=>n.some(r=>{var o;return(o=t.getValue(e))==null?void 0:o.includes(r)});T7.autoRemove=t=>qa(t)||!(t!=null&&t.length);const A7=(t,e,n)=>t.getValue(e)===n;A7.autoRemove=t=>qa(t);const R7=(t,e,n)=>t.getValue(e)==n;R7.autoRemove=t=>qa(t);const RR=(t,e,n)=>{let[r,o]=n;const i=t.getValue(e);return i>=r&&i<=o};RR.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,o=typeof n!="number"?parseFloat(n):n,i=e===null||Number.isNaN(r)?-1/0:r,s=n===null||Number.isNaN(o)?1/0:o;if(i>s){const a=i;i=s,s=a}return[i,s]};RR.autoRemove=t=>qa(t)||qa(t[0])&&qa(t[1]);const Ac={includesString:S7,includesStringSensitive:x7,equalsString:E7,arrIncludes:_7,arrIncludesAll:k7,arrIncludesSome:T7,equals:A7,weakEquals:R7,inNumberRange:RR};function qa(t){return t==null||t===""}const qse={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:As("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);return typeof r=="string"?Ac.includesString:typeof r=="number"?Ac.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Ac.equals:Array.isArray(r)?Ac.arrIncludes:Ac.weakEquals},t.getFilterFn=()=>{var n,r;return ZC(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:Ac[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,o;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((o=e.options.enableFilters)!=null?o:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(o=>o.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const o=t.getFilterFn(),i=r?.find(f=>f.id===t.id),s=rd(n,i?i.value:void 0);if(D3(o,s,t)){var a;return(a=r?.filter(f=>f.id!==t.id))!=null?a:[]}const l={id:t.id,value:s};if(i){var u;return(u=r?.map(f=>f.id===t.id?l:f))!=null?u:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=o=>{var i;return(i=rd(e,o))==null?void 0:i.filter(s=>{const a=n.find(l=>l.id===s.id);if(a){const l=a.getFilterFn();if(D3(l,s.value,a))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function D3(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const Gse=(t,e,n)=>n.reduce((r,o)=>{const i=o.getValue(t);return r+(typeof i=="number"?i:0)},0),Kse=(t,e,n)=>{let r;return n.forEach(o=>{const i=o.getValue(t);i!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}),r},Wse=(t,e,n)=>{let r;return n.forEach(o=>{const i=o.getValue(t);i!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}),r},Yse=(t,e,n)=>{let r,o;return n.forEach(i=>{const s=i.getValue(t);s!=null&&(r===void 0?s>=s&&(r=o=s):(r>s&&(r=s),o<s&&(o=s)))}),[r,o]},Xse=(t,e)=>{let n=0,r=0;if(e.forEach(o=>{let i=o.getValue(t);i!=null&&(i=+i)>=i&&(++n,r+=i)}),n)return r/n},Qse=(t,e)=>{if(!e.length)return;const n=e.map(i=>i.getValue(t));if(!jse(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),o=n.sort((i,s)=>i-s);return n.length%2!==0?o[r]:(o[r-1]+o[r])/2},Zse=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),Jse=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,eae=(t,e)=>e.length,y_={sum:Gse,min:Kse,max:Wse,extent:Yse,mean:Xse,median:Qse,unique:Zse,uniqueCount:Jse,count:eae},tae={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:As("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);if(typeof r=="number")return y_.sum;if(Object.prototype.toString.call(r)==="[object Date]")return y_.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return ZC(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:y_[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var o;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((o=n.subRows)!=null&&o.length)}}};function nae(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(i=>!e.includes(i.id));return n==="remove"?r:[...e.map(i=>t.find(s=>s.id===i)).filter(Boolean),...r]}const rae={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:As("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=Dt(n=>[ry(e,n)],n=>n.findIndex(r=>r.id===t.id),Ot(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=ry(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const o=ry(e,n);return((r=o[o.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=Dt(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>o=>{let i=[];if(!(e!=null&&e.length))i=o;else{const s=[...e],a=[...o];for(;a.length&&s.length;){const l=s.shift(),u=a.findIndex(f=>f.id===l);u>-1&&i.push(a.splice(u,1)[0])}i=[...i,...a]}return nae(i,n,r)},Ot(t.options,"debugTable"))}},v_=()=>({left:[],right:[]}),oae={getInitialState:t=>({columnPinning:v_(),...t}),getDefaultOptions:t=>({onColumnPinningChange:As("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(o=>o.id).filter(Boolean);e.setColumnPinning(o=>{var i,s;if(n==="right"){var a,l;return{left:((a=o?.left)!=null?a:[]).filter(h=>!(r!=null&&r.includes(h))),right:[...((l=o?.right)!=null?l:[]).filter(h=>!(r!=null&&r.includes(h))),...r]}}if(n==="left"){var u,f;return{left:[...((u=o?.left)!=null?u:[]).filter(h=>!(r!=null&&r.includes(h))),...r],right:((f=o?.right)!=null?f:[]).filter(h=>!(r!=null&&r.includes(h)))}}return{left:((i=o?.left)!=null?i:[]).filter(h=>!(r!=null&&r.includes(h))),right:((s=o?.right)!=null?s:[]).filter(h=>!(r!=null&&r.includes(h)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var o,i,s;return((o=r.columnDef.enablePinning)!=null?o:!0)&&((i=(s=e.options.enableColumnPinning)!=null?s:e.options.enablePinning)!=null?i:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(a=>a.id),{left:r,right:o}=e.getState().columnPinning,i=n.some(a=>r?.includes(a)),s=n.some(a=>o?.includes(a));return i?"left":s?"right":!1},t.getPinnedIndex=()=>{var n,r;const o=t.getIsPinned();return o?(n=(r=e.getState().columnPinning)==null||(r=r[o])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=Dt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,o)=>{const i=[...r??[],...o??[]];return n.filter(s=>!i.includes(s.column.id))},Ot(e.options,"debugRows")),t.getLeftVisibleCells=Dt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(i=>n.find(s=>s.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),Ot(e.options,"debugRows")),t.getRightVisibleCells=Dt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(i=>n.find(s=>s.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),Ot(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?v_():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:v_())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var o,i;return!!((o=r.left)!=null&&o.length||(i=r.right)!=null&&i.length)}return!!((n=r[e])!=null&&n.length)},t.getLeftLeafColumns=Dt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(o=>o.id===r)).filter(Boolean),Ot(t.options,"debugColumns")),t.getRightLeafColumns=Dt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(o=>o.id===r)).filter(Boolean),Ot(t.options,"debugColumns")),t.getCenterLeafColumns=Dt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const o=[...n??[],...r??[]];return e.filter(i=>!o.includes(i.id))},Ot(t.options,"debugColumns"))}};function iae(t){return t||(typeof document<"u"?document:null)}const pb={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},b_=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),sae={getDefaultColumnDef:()=>pb,getInitialState:t=>({columnSizing:{},columnSizingInfo:b_(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:As("columnSizing",t),onColumnSizingInfoChange:As("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,o;const i=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:pb.minSize,(r=i??t.columnDef.size)!=null?r:pb.size),(o=t.columnDef.maxSize)!=null?o:pb.maxSize)},t.getStart=Dt(n=>[n,ry(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((o,i)=>o+i.getSize(),0),Ot(e.options,"debugColumns")),t.getAfter=Dt(n=>[n,ry(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((o,i)=>o+i.getSize(),0),Ot(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...o}=n;return o})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=o=>{if(o.subHeaders.length)o.subHeaders.forEach(r);else{var i;n+=(i=o.column.getSize())!=null?i:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),o=r?.getCanResize();return i=>{if(!r||!o||(i.persist==null||i.persist(),w_(i)&&i.touches&&i.touches.length>1))return;const s=t.getSize(),a=t?t.getLeafHeaders().map(T=>[T.column.id,T.column.getSize()]):[[r.id,r.getSize()]],l=w_(i)?Math.round(i.touches[0].clientX):i.clientX,u={},f=(T,P)=>{typeof P=="number"&&(e.setColumnSizingInfo(D=>{var z,V;const $=e.options.columnResizeDirection==="rtl"?-1:1,O=(P-((z=D?.startOffset)!=null?z:0))*$,R=Math.max(O/((V=D?.startSize)!=null?V:0),-.999999);return D.columnSizingStart.forEach(M=>{let[B,q]=M;u[B]=Math.round(Math.max(q+q*R,0)*100)/100}),{...D,deltaOffset:O,deltaPercentage:R}}),(e.options.columnResizeMode==="onChange"||T==="end")&&e.setColumnSizing(D=>({...D,...u})))},h=T=>f("move",T),p=T=>{f("end",T),e.setColumnSizingInfo(P=>({...P,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=iae(n),v={moveHandler:T=>h(T.clientX),upHandler:T=>{g?.removeEventListener("mousemove",v.moveHandler),g?.removeEventListener("mouseup",v.upHandler),p(T.clientX)}},b={moveHandler:T=>(T.cancelable&&(T.preventDefault(),T.stopPropagation()),h(T.touches[0].clientX),!1),upHandler:T=>{var P;g?.removeEventListener("touchmove",b.moveHandler),g?.removeEventListener("touchend",b.upHandler),T.cancelable&&(T.preventDefault(),T.stopPropagation()),p((P=T.touches[0])==null?void 0:P.clientX)}},E=aae()?{passive:!1}:!1;w_(i)?(g?.addEventListener("touchmove",b.moveHandler,E),g?.addEventListener("touchend",b.upHandler,E)):(g?.addEventListener("mousemove",v.moveHandler,E),g?.addEventListener("mouseup",v.upHandler,E)),e.setColumnSizingInfo(T=>({...T,startOffset:l,startSize:s,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?b_():(n=t.initialState.columnSizingInfo)!=null?n:b_())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,o)=>r+o.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,o)=>r+o.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,o)=>r+o.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,o)=>r+o.getSize(),0))!=null?e:0}}};let mb=null;function aae(){if(typeof mb=="boolean")return mb;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return mb=t,mb}function w_(t){return t.type==="touchstart"}const lae={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:As("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const o=t.columns;return(n=o.length?o.some(i=>i.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=Dt(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),Ot(e.options,"debugRows")),t.getVisibleCells=Dt(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,o)=>[...n,...r,...o],Ot(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>Dt(()=>[r(),r().filter(o=>o.getIsVisible()).map(o=>o.id).join("_")],o=>o.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),Ot(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((o,i)=>({...o,[i.id]:n||!(i.getCanHide!=null&&i.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function ry(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const cae={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},uae={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:As("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,o,i;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((o=e.options.enableFilters)!=null?o:!0)&&((i=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?i:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>Ac.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return ZC(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:Ac[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},dae={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:As("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,o;if(!e){t._queue(()=>{e=!0});return}if((r=(o=t.options.autoResetAll)!=null?o:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var o,i;t.setExpanded(r?{}:(o=(i=t.initialState)==null?void 0:i.expanded)!=null?o:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(o=>!o.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(i=>{const s=i.split(".");r=Math.max(r,s.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var o;const i=r===!0?!0:!!(r!=null&&r[t.id]);let s={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(a=>{s[a]=!0}):s=r,n=(o=n)!=null?o:!i,!i&&n)return{...s,[t.id]:!0};if(i&&!n){const{[t.id]:a,...l}=s;return l}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r?.[t.id])},t.getCanExpand=()=>{var n,r,o;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((o=t.subRows)!=null&&o.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},AT=0,RT=10,C_=()=>({pageIndex:AT,pageSize:RT}),fae={getInitialState:t=>({...t,pagination:{...C_(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:As("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,o;if(!e){t._queue(()=>{e=!0});return}if((r=(o=t.options.autoResetAll)!=null?o:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const o=i=>rd(r,i);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(o)},t.resetPagination=r=>{var o;t.setPagination(r?C_():(o=t.initialState.pagination)!=null?o:C_())},t.setPageIndex=r=>{t.setPagination(o=>{let i=rd(r,o.pageIndex);const s=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return i=Math.max(0,Math.min(i,s)),{...o,pageIndex:i}})},t.resetPageIndex=r=>{var o,i;t.setPageIndex(r?AT:(o=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?o:AT)},t.resetPageSize=r=>{var o,i;t.setPageSize(r?RT:(o=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?o:RT)},t.setPageSize=r=>{t.setPagination(o=>{const i=Math.max(1,rd(r,o.pageSize)),s=o.pageSize*o.pageIndex,a=Math.floor(s/i);return{...o,pageIndex:a,pageSize:i}})},t.setPageCount=r=>t.setPagination(o=>{var i;let s=rd(r,(i=t.options.pageCount)!=null?i:-1);return typeof s=="number"&&(s=Math.max(-1,s)),{...o,pageCount:s}}),t.getPageOptions=Dt(()=>[t.getPageCount()],r=>{let o=[];return r&&r>0&&(o=[...new Array(r)].fill(null).map((i,s)=>s)),o},Ot(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,o=t.getPageCount();return o===-1?!0:o===0?!1:r<o-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},S_=()=>({top:[],bottom:[]}),hae={getInitialState:t=>({rowPinning:S_(),...t}),getDefaultOptions:t=>({onRowPinningChange:As("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,o)=>{const i=r?t.getLeafRows().map(l=>{let{id:u}=l;return u}):[],s=o?t.getParentRows().map(l=>{let{id:u}=l;return u}):[],a=new Set([...s,t.id,...i]);e.setRowPinning(l=>{var u,f;if(n==="bottom"){var h,p;return{top:((h=l?.top)!=null?h:[]).filter(b=>!(a!=null&&a.has(b))),bottom:[...((p=l?.bottom)!=null?p:[]).filter(b=>!(a!=null&&a.has(b))),...Array.from(a)]}}if(n==="top"){var g,v;return{top:[...((g=l?.top)!=null?g:[]).filter(b=>!(a!=null&&a.has(b))),...Array.from(a)],bottom:((v=l?.bottom)!=null?v:[]).filter(b=>!(a!=null&&a.has(b)))}}return{top:((u=l?.top)!=null?u:[]).filter(b=>!(a!=null&&a.has(b))),bottom:((f=l?.bottom)!=null?f:[]).filter(b=>!(a!=null&&a.has(b)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:o}=e.options;return typeof r=="function"?r(t):(n=r??o)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:o}=e.getState().rowPinning,i=n.some(a=>r?.includes(a)),s=n.some(a=>o?.includes(a));return i?"top":s?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const o=t.getIsPinned();if(!o)return-1;const i=(n=o==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(s=>{let{id:a}=s;return a});return(r=i?.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?S_():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:S_())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var o,i;return!!((o=r.top)!=null&&o.length||(i=r.bottom)!=null&&i.length)}return!!((n=r[e])!=null&&n.length)},t._getPinnedRows=(e,n,r)=>{var o;return((o=t.options.keepPinnedRows)==null||o?(n??[]).map(s=>{const a=t.getRow(s,!0);return a.getIsAllParentsExpanded()?a:null}):(n??[]).map(s=>e.find(a=>a.id===s))).filter(Boolean).map(s=>({...s,position:r}))},t.getTopRows=Dt(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),Ot(t.options,"debugRows")),t.getBottomRows=Dt(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),Ot(t.options,"debugRows")),t.getCenterRows=Dt(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const o=new Set([...n??[],...r??[]]);return e.filter(i=>!o.has(i.id))},Ot(t.options,"debugRows"))}},pae={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:As("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},o=t.getPreGroupedRowModel().flatRows;return e?o.forEach(i=>{i.getCanSelect()&&(r[i.id]=!0)}):o.forEach(i=>{delete r[i.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),o={...n};return t.getRowModel().rows.forEach(i=>{MT(o,i.id,r,!0,t)}),o}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=Dt(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?x_(t,n):{rows:[],flatRows:[],rowsById:{}},Ot(t.options,"debugTable")),t.getFilteredSelectedRowModel=Dt(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?x_(t,n):{rows:[],flatRows:[],rowsById:{}},Ot(t.options,"debugTable")),t.getGroupedSelectedRowModel=Dt(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?x_(t,n):{rows:[],flatRows:[],rowsById:{}},Ot(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=!!(e.length&&Object.keys(n).length);return r&&e.some(o=>o.getCanSelect()&&!n[o.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(o=>o.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(o=>!n[o.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const o=t.getIsSelected();e.setRowSelection(i=>{var s;if(n=typeof n<"u"?n:!o,t.getCanSelect()&&o===n)return i;const a={...i};return MT(a,t.id,n,(s=r?.selectChildren)!=null?s:!0,e),a})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return MR(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return IT(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return IT(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var o;n&&t.toggleSelected((o=r.target)==null?void 0:o.checked)}}}},MT=(t,e,n,r,o)=>{var i;const s=o.getRow(e,!0);n?(s.getCanMultiSelect()||Object.keys(t).forEach(a=>delete t[a]),s.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(i=s.subRows)!=null&&i.length&&s.getCanSelectSubRows()&&s.subRows.forEach(a=>MT(t,a.id,n,r,o))};function x_(t,e){const n=t.getState().rowSelection,r=[],o={},i=function(s,a){return s.map(l=>{var u;const f=MR(l,n);if(f&&(r.push(l),o[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:i(l.subRows)}),f)return l}).filter(Boolean)};return{rows:i(e.rows),flatRows:r,rowsById:o}}function MR(t,e){var n;return(n=e[t.id])!=null?n:!1}function IT(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let o=!0,i=!1;return t.subRows.forEach(s=>{if(!(i&&!o)&&(s.getCanSelect()&&(MR(s,e)?i=!0:o=!1),s.subRows&&s.subRows.length)){const a=IT(s,e);a==="all"?i=!0:(a==="some"&&(i=!0),o=!1)}}),o?"all":i?"some":!1}const NT=/([0-9]+)/gm,mae=(t,e,n)=>M7(Td(t.getValue(n)).toLowerCase(),Td(e.getValue(n)).toLowerCase()),gae=(t,e,n)=>M7(Td(t.getValue(n)),Td(e.getValue(n))),yae=(t,e,n)=>IR(Td(t.getValue(n)).toLowerCase(),Td(e.getValue(n)).toLowerCase()),vae=(t,e,n)=>IR(Td(t.getValue(n)),Td(e.getValue(n))),bae=(t,e,n)=>{const r=t.getValue(n),o=e.getValue(n);return r>o?1:r<o?-1:0},wae=(t,e,n)=>IR(t.getValue(n),e.getValue(n));function IR(t,e){return t===e?0:t>e?1:-1}function Td(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function M7(t,e){const n=t.split(NT).filter(Boolean),r=e.split(NT).filter(Boolean);for(;n.length&&r.length;){const o=n.shift(),i=r.shift(),s=parseInt(o,10),a=parseInt(i,10),l=[s,a].sort();if(isNaN(l[0])){if(o>i)return 1;if(i>o)return-1;continue}if(isNaN(l[1]))return isNaN(s)?-1:1;if(s>a)return 1;if(a>s)return-1}return n.length-r.length}const Ig={alphanumeric:mae,alphanumericCaseSensitive:gae,text:yae,textCaseSensitive:vae,datetime:bae,basic:wae},Cae={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:As("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const o of n){const i=o?.getValue(t.id);if(Object.prototype.toString.call(i)==="[object Date]")return Ig.datetime;if(typeof i=="string"&&(r=!0,i.split(NT).length>1))return Ig.alphanumeric}return r?Ig.text:Ig.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return ZC(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:Ig[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const o=t.getNextSortingOrder(),i=typeof n<"u"&&n!==null;e.setSorting(s=>{const a=s?.find(g=>g.id===t.id),l=s?.findIndex(g=>g.id===t.id);let u=[],f,h=i?n:o==="desc";if(s!=null&&s.length&&t.getCanMultiSort()&&r?a?f="toggle":f="add":s!=null&&s.length&&l!==s.length-1?f="replace":a?f="toggle":f="replace",f==="toggle"&&(i||o||(f="remove")),f==="add"){var p;u=[...s,{id:t.id,desc:h}],u.splice(0,u.length-((p=e.options.maxMultiSortColCount)!=null?p:Number.MAX_SAFE_INTEGER))}else f==="toggle"?u=s.map(g=>g.id===t.id?{...g,desc:h}:g):f==="remove"?u=s.filter(g=>g.id!==t.id):u=[{id:t.id,desc:h}];return u})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,o;const i=t.getFirstSortDir(),s=t.getIsSorted();return s?s!==i&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(o=e.options.enableMultiRemove)!=null)||o)?!1:s==="desc"?"asc":"desc":i},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(o=>o.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(o=>o.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},Sae=[Fse,lae,rae,oae,Use,qse,cae,uae,Cae,tae,dae,fae,hae,pae,sae];function xae(t){var e,n;const r=[...Sae,...(e=t._features)!=null?e:[]];let o={_features:r};const i=o._features.reduce((p,g)=>Object.assign(p,g.getDefaultOptions==null?void 0:g.getDefaultOptions(o)),{}),s=p=>o.options.mergeOptions?o.options.mergeOptions(i,p):{...i,...p};let l={...{},...(n=t.initialState)!=null?n:{}};o._features.forEach(p=>{var g;l=(g=p.getInitialState==null?void 0:p.getInitialState(l))!=null?g:l});const u=[];let f=!1;const h={_features:r,options:{...i,...t},initialState:l,_queue:p=>{u.push(p),f||(f=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();f=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{o.setState(o.initialState)},setOptions:p=>{const g=rd(p,o.options);o.options=s(g)},getState:()=>o.options.state,setState:p=>{o.options.onStateChange==null||o.options.onStateChange(p)},_getRowId:(p,g,v)=>{var b;return(b=o.options.getRowId==null?void 0:o.options.getRowId(p,g,v))!=null?b:`${v?[v.id,g].join("."):g}`},getCoreRowModel:()=>(o._getCoreRowModel||(o._getCoreRowModel=o.options.getCoreRowModel(o)),o._getCoreRowModel()),getRowModel:()=>o.getPaginationRowModel(),getRow:(p,g)=>{let v=(g?o.getPrePaginationRowModel():o.getRowModel()).rowsById[p];if(!v&&(v=o.getCoreRowModel().rowsById[p],!v))throw new Error;return v},_getDefaultColumnDef:Dt(()=>[o.options.defaultColumn],p=>{var g;return p=(g=p)!=null?g:{},{header:v=>{const b=v.header.column.columnDef;return b.accessorKey?b.accessorKey:b.accessorFn?b.id:null},cell:v=>{var b,E;return(b=(E=v.renderValue())==null||E.toString==null?void 0:E.toString())!=null?b:null},...o._features.reduce((v,b)=>Object.assign(v,b.getDefaultColumnDef==null?void 0:b.getDefaultColumnDef()),{}),...p}},Ot(t,"debugColumns")),_getColumnDefs:()=>o.options.columns,getAllColumns:Dt(()=>[o._getColumnDefs()],p=>{const g=function(v,b,E){return E===void 0&&(E=0),v.map(T=>{const P=Hse(o,T,E,b),D=T;return P.columns=D.columns?g(D.columns,P,E+1):[],P})};return g(p)},Ot(t,"debugColumns")),getAllFlatColumns:Dt(()=>[o.getAllColumns()],p=>p.flatMap(g=>g.getFlatColumns()),Ot(t,"debugColumns")),_getAllFlatColumnsById:Dt(()=>[o.getAllFlatColumns()],p=>p.reduce((g,v)=>(g[v.id]=v,g),{}),Ot(t,"debugColumns")),getAllLeafColumns:Dt(()=>[o.getAllColumns(),o._getOrderColumnsFn()],(p,g)=>{let v=p.flatMap(b=>b.getLeafColumns());return g(v)},Ot(t,"debugColumns")),getColumn:p=>o._getAllFlatColumnsById()[p]};Object.assign(o,h);for(let p=0;p<o._features.length;p++){const g=o._features[p];g==null||g.createTable==null||g.createTable(o)}return o}function Eae(){return t=>Dt(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(o,i,s){i===void 0&&(i=0);const a=[];for(let u=0;u<o.length;u++){const f=zse(t,t._getRowId(o[u],u,s),o[u],u,i,void 0,s?.id);if(n.flatRows.push(f),n.rowsById[f.id]=f,a.push(f),t.options.getSubRows){var l;f.originalSubRows=t.options.getSubRows(o[u],u),(l=f.originalSubRows)!=null&&l.length&&(f.subRows=r(f.originalSubRows,i+1,f))}}return a};return n.rows=r(e),n},Ot(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function O3(t,e){return t?_ae(t)?_.createElement(t,e):t:null}function _ae(t){return kae(t)||typeof t=="function"||Tae(t)}function kae(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function Tae(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function Aae(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=_.useState(()=>({current:xae(e)})),[r,o]=_.useState(()=>n.current.initialState);return n.current.setOptions(i=>({...i,...t,state:{...r,...t.state},onStateChange:s=>{o(s),t.onStateChange==null||t.onStateChange(s)}})),n.current}function Rae(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const Mae=t=>{switch(t){case"success":return Dae;case"info":return Pae;case"warning":return Oae;case"error":return Lae;default:return null}},Iae=Array(12).fill(0),Nae=({visible:t,className:e})=>Pe.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Pe.createElement("div",{className:"sonner-spinner"},Iae.map((n,r)=>Pe.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Dae=Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pe.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Oae=Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Pe.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Pae=Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Lae=Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pe.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Vae=Pe.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Pe.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Pe.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),jae=()=>{const[t,e]=Pe.useState(document.hidden);return Pe.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let DT=1;class Bae{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...o}=e,i=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:DT++,s=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...o,dismissible:a,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const o=Promise.resolve(e instanceof Function?e():e);let i=r!==void 0,s;const a=o.then(async u=>{if(s=["resolve",u],Pe.isValidElement(u))i=!1,this.create({id:r,type:"default",message:u});else if(Hae(u)&&!u.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,p=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,v=typeof h=="object"&&!Pe.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(u instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(u):n.error,p=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!Pe.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(u):n.success,p=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!Pe.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:p,...v})}}).catch(async u=>{if(s=["reject",u],n.error!==void 0){i=!1;const f=typeof n.error=="function"?await n.error(u):n.error,h=typeof n.description=="function"?await n.description(u):n.description,g=typeof f=="object"&&!Pe.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((u,f)=>a.then(()=>s[0]==="reject"?f(s[1]):u(s[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{const r=n?.id||DT++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Yi=new Bae,$ae=(t,e)=>{const n=e?.id||DT++;return Yi.addToast({title:t,...e,id:n}),n},Hae=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Fae=$ae,zae=()=>Yi.toasts,Uae=()=>Yi.getActiveToasts(),Mf=Object.assign(Fae,{success:Yi.success,info:Yi.info,warning:Yi.warning,error:Yi.error,custom:Yi.custom,message:Yi.message,promise:Yi.promise,dismiss:Yi.dismiss,loading:Yi.loading},{getHistory:zae,getToasts:Uae});Rae("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function gb(t){return t.label!==void 0}const qae=3,Gae="24px",Kae="16px",P3=4e3,Wae=356,Yae=14,Xae=45,Qae=200;function bl(...t){return t.filter(Boolean).join(" ")}function Zae(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const Jae=t=>{var e,n,r,o,i,s,a,l,u;const{invert:f,toast:h,unstyled:p,interacting:g,setHeights:v,visibleToasts:b,heights:E,index:T,toasts:P,expanded:D,removeToast:z,defaultRichColors:V,closeButton:$,style:O,cancelButtonStyle:R,actionButtonStyle:M,className:B="",descriptionClassName:q="",duration:K,position:F,gap:ne,expandByDefault:oe,classNames:j,icons:U,closeButtonAriaLabel:Z="Close toast"}=t,[J,Y]=Pe.useState(null),[se,te]=Pe.useState(null),[ie,ue]=Pe.useState(!1),[ae,ve]=Pe.useState(!1),[De,Ue]=Pe.useState(!1),[Oe,rt]=Pe.useState(!1),[wt,tt]=Pe.useState(!1),[mn,Ln]=Pe.useState(0),[$t,$n]=Pe.useState(0),At=Pe.useRef(h.duration||K||P3),sn=Pe.useRef(null),Jt=Pe.useRef(null),Vt=T===0,Ut=T+1<=b,gn=h.type,Wt=h.dismissible!==!1,an=h.className||"",_n=h.descriptionClassName||"",Ht=Pe.useMemo(()=>E.findIndex(ft=>ft.toastId===h.id)||0,[E,h.id]),Ft=Pe.useMemo(()=>{var ft;return(ft=h.closeButton)!=null?ft:$},[h.closeButton,$]),un=Pe.useMemo(()=>h.duration||K||P3,[h.duration,K]),kn=Pe.useRef(0),Vn=Pe.useRef(0),kr=Pe.useRef(0),xn=Pe.useRef(null),[br,wr]=F.split("-"),jn=Pe.useMemo(()=>E.reduce((ft,Tn,Hn)=>Hn>=Ht?ft:ft+Tn.height,0),[E,Ht]),nt=jae(),Do=h.invert||f,Br=gn==="loading";Vn.current=Pe.useMemo(()=>Ht*ne+jn,[Ht,jn]),Pe.useEffect(()=>{At.current=un},[un]),Pe.useEffect(()=>{ue(!0)},[]),Pe.useEffect(()=>{const ft=Jt.current;if(ft){const Tn=ft.getBoundingClientRect().height;return $n(Tn),v(Hn=>[{toastId:h.id,height:Tn,position:h.position},...Hn]),()=>v(Hn=>Hn.filter(Fn=>Fn.toastId!==h.id))}},[v,h.id]),Pe.useLayoutEffect(()=>{if(!ie)return;const ft=Jt.current,Tn=ft.style.height;ft.style.height="auto";const Hn=ft.getBoundingClientRect().height;ft.style.height=Tn,$n(Hn),v(Fn=>Fn.find(Gn=>Gn.toastId===h.id)?Fn.map(Gn=>Gn.toastId===h.id?{...Gn,height:Hn}:Gn):[{toastId:h.id,height:Hn,position:h.position},...Fn])},[ie,h.title,h.description,v,h.id,h.jsx,h.action,h.cancel]);const Nr=Pe.useCallback(()=>{ve(!0),Ln(Vn.current),v(ft=>ft.filter(Tn=>Tn.toastId!==h.id)),setTimeout(()=>{z(h)},Qae)},[h,z,v,Vn]);Pe.useEffect(()=>{if(h.promise&&gn==="loading"||h.duration===1/0||h.type==="loading")return;let ft;return D||g||nt?(()=>{if(kr.current<kn.current){const Fn=new Date().getTime()-kn.current;At.current=At.current-Fn}kr.current=new Date().getTime()})():(()=>{At.current!==1/0&&(kn.current=new Date().getTime(),ft=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),Nr()},At.current))})(),()=>clearTimeout(ft)},[D,g,h,gn,nt,Nr]),Pe.useEffect(()=>{h.delete&&(Nr(),h.onDismiss==null||h.onDismiss.call(h,h))},[Nr,h.delete]);function Qe(){var ft;if(U?.loading){var Tn;return Pe.createElement("div",{className:bl(j?.loader,h==null||(Tn=h.classNames)==null?void 0:Tn.loader,"sonner-loader"),"data-visible":gn==="loading"},U.loading)}return Pe.createElement(Nae,{className:bl(j?.loader,h==null||(ft=h.classNames)==null?void 0:ft.loader),visible:gn==="loading"})}const Oo=h.icon||U?.[gn]||Mae(gn);var Cr,$r;return Pe.createElement("li",{tabIndex:0,ref:Jt,className:bl(B,an,j?.toast,h==null||(e=h.classNames)==null?void 0:e.toast,j?.default,j?.[gn],h==null||(n=h.classNames)==null?void 0:n[gn]),"data-sonner-toast":"","data-rich-colors":(Cr=h.richColors)!=null?Cr:V,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":ie,"data-promise":!!h.promise,"data-swiped":wt,"data-removed":ae,"data-visible":Ut,"data-y-position":br,"data-x-position":wr,"data-index":T,"data-front":Vt,"data-swiping":De,"data-dismissible":Wt,"data-type":gn,"data-invert":Do,"data-swipe-out":Oe,"data-swipe-direction":se,"data-expanded":!!(D||oe&&ie),style:{"--index":T,"--toasts-before":T,"--z-index":P.length-T,"--offset":`${ae?mn:Vn.current}px`,"--initial-height":oe?"auto":`${$t}px`,...O,...h.style},onDragEnd:()=>{Ue(!1),Y(null),xn.current=null},onPointerDown:ft=>{ft.button!==2&&(Br||!Wt||(sn.current=new Date,Ln(Vn.current),ft.target.setPointerCapture(ft.pointerId),ft.target.tagName!=="BUTTON"&&(Ue(!0),xn.current={x:ft.clientX,y:ft.clientY})))},onPointerUp:()=>{var ft,Tn,Hn;if(Oe||!Wt)return;xn.current=null;const Fn=Number(((ft=Jt.current)==null?void 0:ft.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Qn=Number(((Tn=Jt.current)==null?void 0:Tn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Gn=new Date().getTime()-((Hn=sn.current)==null?void 0:Hn.getTime()),Yt=J==="x"?Fn:Qn,Kn=Math.abs(Yt)/Gn;if(Math.abs(Yt)>=Xae||Kn>.11){Ln(Vn.current),h.onDismiss==null||h.onDismiss.call(h,h),te(J==="x"?Fn>0?"right":"left":Qn>0?"down":"up"),Nr(),rt(!0);return}else{var mt,qt;(mt=Jt.current)==null||mt.style.setProperty("--swipe-amount-x","0px"),(qt=Jt.current)==null||qt.style.setProperty("--swipe-amount-y","0px")}tt(!1),Ue(!1),Y(null)},onPointerMove:ft=>{var Tn,Hn,Fn;if(!xn.current||!Wt||((Tn=window.getSelection())==null?void 0:Tn.toString().length)>0)return;const Gn=ft.clientY-xn.current.y,Yt=ft.clientX-xn.current.x;var Kn;const mt=(Kn=t.swipeDirections)!=null?Kn:Zae(F);!J&&(Math.abs(Yt)>1||Math.abs(Gn)>1)&&Y(Math.abs(Yt)>Math.abs(Gn)?"x":"y");let qt={x:0,y:0};const il=Jo=>1/(1.5+Math.abs(Jo)/20);if(J==="y"){if(mt.includes("top")||mt.includes("bottom"))if(mt.includes("top")&&Gn<0||mt.includes("bottom")&&Gn>0)qt.y=Gn;else{const Jo=Gn*il(Gn);qt.y=Math.abs(Jo)<Math.abs(Gn)?Jo:Gn}}else if(J==="x"&&(mt.includes("left")||mt.includes("right")))if(mt.includes("left")&&Yt<0||mt.includes("right")&&Yt>0)qt.x=Yt;else{const Jo=Yt*il(Yt);qt.x=Math.abs(Jo)<Math.abs(Yt)?Jo:Yt}(Math.abs(qt.x)>0||Math.abs(qt.y)>0)&&tt(!0),(Hn=Jt.current)==null||Hn.style.setProperty("--swipe-amount-x",`${qt.x}px`),(Fn=Jt.current)==null||Fn.style.setProperty("--swipe-amount-y",`${qt.y}px`)}},Ft&&!h.jsx&&gn!=="loading"?Pe.createElement("button",{"aria-label":Z,"data-disabled":Br,"data-close-button":!0,onClick:Br||!Wt?()=>{}:()=>{Nr(),h.onDismiss==null||h.onDismiss.call(h,h)},className:bl(j?.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},($r=U?.close)!=null?$r:Vae):null,(gn||h.icon||h.promise)&&h.icon!==null&&(U?.[gn]!==null||h.icon)?Pe.createElement("div",{"data-icon":"",className:bl(j?.icon,h==null||(o=h.classNames)==null?void 0:o.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||Qe():null,h.type!=="loading"?Oo:null):null,Pe.createElement("div",{"data-content":"",className:bl(j?.content,h==null||(i=h.classNames)==null?void 0:i.content)},Pe.createElement("div",{"data-title":"",className:bl(j?.title,h==null||(s=h.classNames)==null?void 0:s.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?Pe.createElement("div",{"data-description":"",className:bl(q,_n,j?.description,h==null||(a=h.classNames)==null?void 0:a.description)},typeof h.description=="function"?h.description():h.description):null),Pe.isValidElement(h.cancel)?h.cancel:h.cancel&&gb(h.cancel)?Pe.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||R,onClick:ft=>{gb(h.cancel)&&Wt&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,ft),Nr())},className:bl(j?.cancelButton,h==null||(l=h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,Pe.isValidElement(h.action)?h.action:h.action&&gb(h.action)?Pe.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||M,onClick:ft=>{gb(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,ft),!ft.defaultPrevented&&Nr())},className:bl(j?.actionButton,h==null||(u=h.classNames)==null?void 0:u.actionButton)},h.action.label):null)};function L3(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function ele(t,e){const n={};return[t,e].forEach((r,o)=>{const i=o===1,s=i?"--mobile-offset":"--offset",a=i?Kae:Gae;function l(u){["top","right","bottom","left"].forEach(f=>{n[`${s}-${f}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${s}-${u}`]=a:n[`${s}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(a)}),n}const tle=Pe.forwardRef(function(e,n){const{invert:r,position:o="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:a,className:l,offset:u,mobileOffset:f,theme:h="light",richColors:p,duration:g,style:v,visibleToasts:b=qae,toastOptions:E,dir:T=L3(),gap:P=Yae,icons:D,containerAriaLabel:z="Notifications"}=e,[V,$]=Pe.useState([]),O=Pe.useMemo(()=>Array.from(new Set([o].concat(V.filter(se=>se.position).map(se=>se.position)))),[V,o]),[R,M]=Pe.useState([]),[B,q]=Pe.useState(!1),[K,F]=Pe.useState(!1),[ne,oe]=Pe.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),j=Pe.useRef(null),U=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),Z=Pe.useRef(null),J=Pe.useRef(!1),Y=Pe.useCallback(se=>{$(te=>{var ie;return(ie=te.find(ue=>ue.id===se.id))!=null&&ie.delete||Yi.dismiss(se.id),te.filter(({id:ue})=>ue!==se.id)})},[]);return Pe.useEffect(()=>Yi.subscribe(se=>{if(se.dismiss){requestAnimationFrame(()=>{$(te=>te.map(ie=>ie.id===se.id?{...ie,delete:!0}:ie))});return}setTimeout(()=>{gC.flushSync(()=>{$(te=>{const ie=te.findIndex(ue=>ue.id===se.id);return ie!==-1?[...te.slice(0,ie),{...te[ie],...se},...te.slice(ie+1)]:[se,...te]})})})}),[V]),Pe.useEffect(()=>{if(h!=="system"){oe(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?oe("dark"):oe("light")),typeof window>"u")return;const se=window.matchMedia("(prefers-color-scheme: dark)");try{se.addEventListener("change",({matches:te})=>{oe(te?"dark":"light")})}catch{se.addListener(({matches:ie})=>{try{oe(ie?"dark":"light")}catch(ue){console.error(ue)}})}},[h]),Pe.useEffect(()=>{V.length<=1&&q(!1)},[V]),Pe.useEffect(()=>{const se=te=>{var ie;if(i.every(ve=>te[ve]||te.code===ve)){var ae;q(!0),(ae=j.current)==null||ae.focus()}te.code==="Escape"&&(document.activeElement===j.current||(ie=j.current)!=null&&ie.contains(document.activeElement))&&q(!1)};return document.addEventListener("keydown",se),()=>document.removeEventListener("keydown",se)},[i]),Pe.useEffect(()=>{if(j.current)return()=>{Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null,J.current=!1)}},[j.current]),Pe.createElement("section",{ref:n,"aria-label":`${z} ${U}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},O.map((se,te)=>{var ie;const[ue,ae]=se.split("-");return V.length?Pe.createElement("ol",{key:se,dir:T==="auto"?L3():T,tabIndex:-1,ref:j,className:l,"data-sonner-toaster":!0,"data-sonner-theme":ne,"data-y-position":ue,"data-x-position":ae,style:{"--front-toast-height":`${((ie=R[0])==null?void 0:ie.height)||0}px`,"--width":`${Wae}px`,"--gap":`${P}px`,...v,...ele(u,f)},onBlur:ve=>{J.current&&!ve.currentTarget.contains(ve.relatedTarget)&&(J.current=!1,Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null))},onFocus:ve=>{ve.target instanceof HTMLElement&&ve.target.dataset.dismissible==="false"||J.current||(J.current=!0,Z.current=ve.relatedTarget)},onMouseEnter:()=>q(!0),onMouseMove:()=>q(!0),onMouseLeave:()=>{K||q(!1)},onDragEnd:()=>q(!1),onPointerDown:ve=>{ve.target instanceof HTMLElement&&ve.target.dataset.dismissible==="false"||F(!0)},onPointerUp:()=>F(!1)},V.filter(ve=>!ve.position&&te===0||ve.position===se).map((ve,De)=>{var Ue,Oe;return Pe.createElement(Jae,{key:ve.id,icons:D,index:De,toast:ve,defaultRichColors:p,duration:(Ue=E?.duration)!=null?Ue:g,className:E?.className,descriptionClassName:E?.descriptionClassName,invert:r,visibleToasts:b,closeButton:(Oe=E?.closeButton)!=null?Oe:a,interacting:K,position:se,style:E?.style,unstyled:E?.unstyled,classNames:E?.classNames,cancelButtonStyle:E?.cancelButtonStyle,actionButtonStyle:E?.actionButtonStyle,closeButtonAriaLabel:E?.closeButtonAriaLabel,removeToast:Y,toasts:V.filter(rt=>rt.position==ve.position),heights:R.filter(rt=>rt.position==ve.position),setHeights:M,expandByDefault:s,gap:P,expanded:B,swipeDirections:e.swipeDirections})})):null}))}),nle="modulepreload",rle=function(t){return"/BSP-Note/"+t},V3={},Wi=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let l=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");o=l(n.map(u=>{if(u=rle(u),u in V3)return;V3[u]=!0;const f=u.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":nle,f||(p.as="script"),p.crossOrigin="",p.href=u,a&&p.setAttribute("nonce",a),document.head.appendChild(p),f)return new Promise((g,v)=>{p.addEventListener("load",g),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return o.then(s=>{for(const a of s||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function qo(t){this.content=t}qo.prototype={constructor:qo,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return o==-1?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new qo(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new qo(n)},addToStart:function(t,e){return new qo([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new qo(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(i==-1?o.length:i,0,e,n),new qo(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=qo.from(t),t.size?new qo(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=qo.from(t),t.size?new qo(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=qo.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};qo.from=function(t){if(t instanceof qo)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new qo(e)};function I7(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),i=e.child(r);if(o==i){n+=o.nodeSize;continue}if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){let s=I7(o.content,i.content,n+1);if(s!=null)return s}n+=o.nodeSize}}function N7(t,e,n,r){for(let o=t.childCount,i=e.childCount;;){if(o==0||i==0)return o==i?null:{a:n,b:r};let s=t.child(--o),a=e.child(--i),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let u=0,f=Math.min(s.text.length,a.text.length);for(;u<f&&s.text[s.text.length-u-1]==a.text[a.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let u=N7(s.content,a.content,n-1,r-1);if(u)return u}n-=l,r-=l}}class Le{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,i){for(let s=0,a=0;a<n;s++){let l=this.content[s],u=a+l.nodeSize;if(u>e&&r(l,o+a,i||null,s)!==!1&&l.content.size){let f=a+1;l.nodesBetween(Math.max(0,e-f),Math.min(l.content.size,n-f),r,o+f)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let i="",s=!0;return this.nodesBetween(e,n,(a,l)=>{let u=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&r&&(s?s=!1:i+=r),i+=u},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new Le(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let i=0,s=0;s<n;i++){let a=this.content[i],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),o+=a.nodeSize),s=l}return new Le(r,o)}cutByIndex(e,n){return e==n?Le.empty:e==0&&n==this.content.length?this:new Le(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new Le(o,i)}addToStart(e){return new Le([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Le(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return I7(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return N7(this,e,n,r)}findIndex(e){if(e==0)return yb(0,e);if(e==this.size)return yb(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=this.child(n),i=r+o.nodeSize;if(i>=e)return i==e?yb(n+1,i):yb(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Le.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Le(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Le.empty;let n,r=0;for(let o=0;o<e.length;o++){let i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(n||(n=e.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new Le(n||e,r)}static from(e){if(!e)return Le.empty;if(e instanceof Le)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Le([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Le.empty=new Le([],0);const E_={index:0,offset:0};function yb(t,e){return E_.index=t,E_.offset=e,E_}function U1(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!U1(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!U1(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let ar=class OT{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let i=e[o];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,o));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&U1(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return OT.none;if(e instanceof OT)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};ar.none=[];class q1 extends Error{}class Ye{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=O7(this.content,e+this.openStart,n);return r&&new Ye(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Ye(D7(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Ye.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ye(Le.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)o++;return new Ye(e,r,o)}}Ye.empty=new Ye(Le.empty,0,0);function D7(t,e,n){let{index:r,offset:o}=t.findIndex(e),i=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(o==e||i.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(D7(i.content,e-o-1,n-o-1)))}function O7(t,e,n,r){let{index:o,offset:i}=t.findIndex(e),s=t.maybeChild(o);if(i==e||s.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=O7(s.content,e-i-1,n);return a&&t.replaceChild(o,s.copy(a))}function ole(t,e,n){if(n.openStart>t.depth)throw new q1("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new q1("Inconsistent open depths");return P7(t,e,n,0)}function P7(t,e,n,r){let o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let s=P7(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return $f(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=ile(n,t);return $f(i,V7(t,s,a,e,r))}else return $f(i,G1(t,e,r))}function L7(t,e){if(!e.type.compatibleContent(t.type))throw new q1("Cannot join "+e.type.name+" onto "+t.type.name)}function PT(t,e,n){let r=t.node(n);return L7(r,e.node(n)),r}function Bf(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function oy(t,e,n,r){let o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(Bf(t.nodeAfter,r),i++));for(let a=i;a<s;a++)Bf(o.child(a),r);e&&e.depth==n&&e.textOffset&&Bf(e.nodeBefore,r)}function $f(t,e){return t.type.checkContent(e),t.copy(e)}function V7(t,e,n,r,o){let i=t.depth>o&&PT(t,e,o+1),s=r.depth>o&&PT(n,r,o+1),a=[];return oy(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(L7(i,s),Bf($f(i,V7(t,e,n,r,o+1)),a)):(i&&Bf($f(i,G1(t,e,o+1)),a),oy(e,n,o,a),s&&Bf($f(s,G1(n,r,o+1)),a)),oy(r,null,o,a),new Le(a)}function G1(t,e,n){let r=[];if(oy(null,t,n,r),t.depth>n){let o=PT(t,e,n+1);Bf($f(o,G1(t,e,n+1)),r)}return oy(e,null,n,r),new Le(r)}function ile(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)o=e.node(i).copy(Le.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class Ay{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)o+=r.child(i).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return ar.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let i=r.marks;for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new K1(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,i=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(i),u=i-l;if(r.push(s,a,o+l),!u||(s=s.child(a),s.isText))break;i=u-1,o+=l+1}return new Ay(n,r,i)}static resolveCached(e,n){let r=j3.get(e);if(r)for(let i=0;i<r.elts.length;i++){let s=r.elts[i];if(s.pos==n)return s}else j3.set(e,r=new sle);let o=r.elts[r.i]=Ay.resolve(e,n);return r.i=(r.i+1)%ale,o}}class sle{constructor(){this.elts=[],this.i=0}}const ale=12,j3=new WeakMap;class K1{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const lle=Object.create(null);let jc=class LT{constructor(e,n,r,o=ar.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||Le.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&U1(this.attrs,n||e.defaultAttrs||lle)&&ar.sameSet(this.marks,r||ar.none)}copy(e=null){return e==this.content?this:new LT(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new LT(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Ye.empty;let o=this.resolve(e),i=this.resolve(n),s=r?0:o.sharedDepth(n),a=o.start(s),u=o.node(s).content.cut(o.pos-a,i.pos-a);return new Ye(u,o.depth-s,i.depth-s)}replace(e,n,r){return ole(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return Ay.resolveCached(this,e)}resolveNoCache(e){return Ay.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),j7(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Le.empty,o=0,i=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,o,i),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ar.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ar.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=Le.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,o,r);return i.type.checkAttrs(i.attrs),i}};jc.prototype.text=void 0;class W1 extends jc{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):j7(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new W1(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new W1(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function j7(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class th{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new cle(e,n);if(r.next==null)return th.empty;let o=B7(r);r.next&&r.err("Unexpected trailing text");let i=gle(mle(o));return yle(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let i=n;o&&i<r;i++)o=o.matchType(e.child(i).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function i(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return Le.from(a.map(u=>u.createAndFill()));for(let u=0;u<s.next.length;u++){let{type:f,next:h}=s.next[u];if(!(f.isText||f.hasRequiredAttrs())&&o.indexOf(h)==-1){o.push(h);let p=i(h,a.concat(f));if(p)return p}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),i=o.match;if(i.matchType(e)){let s=[];for(let a=o;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<i.next.length;s++){let{type:a,next:l}=i.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let i=o+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)i+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return i}).join(`
`)}}th.empty=new th(!0);class cle{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function B7(t){let e=[];do e.push(ule(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function ule(t){let e=[];do e.push(dle(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function dle(t){let e=ple(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=fle(t,e);else break;return e}function B3(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function fle(t,e){let n=B3(t),r=n;return t.eat(",")&&(t.next!="}"?r=B3(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function hle(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let i in n){let s=n[i];s.isInGroup(e)&&o.push(s)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function ple(t){if(t.eat("(")){let e=B7(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=hle(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function mle(t){let e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let u={term:l,to:a};return e[s].push(u),u}function o(s,a){s.forEach(l=>l.to=a)}function i(s,a){if(s.type=="choice")return s.exprs.reduce((l,u)=>l.concat(i(u,a)),[]);if(s.type=="seq")for(let l=0;;l++){let u=i(s.exprs[l],a);if(l==s.exprs.length-1)return u;o(u,a=n())}else if(s.type=="star"){let l=n();return r(a,l),o(i(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return o(i(s.expr,a),l),o(i(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(i(s.expr,a));if(s.type=="range"){let l=a;for(let u=0;u<s.min;u++){let f=n();o(i(s.expr,l),f),l=f}if(s.max==-1)o(i(s.expr,l),l);else for(let u=s.min;u<s.max;u++){let f=n();r(l,f),o(i(s.expr,l),f),l=f}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function $7(t,e){return e-t}function $3(t,e){let n=[];return r(e),n.sort($7);function r(o){let i=t[o];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(o);for(let s=0;s<i.length;s++){let{term:a,to:l}=i[s];!a&&n.indexOf(l)==-1&&r(l)}}}function gle(t){let e=Object.create(null);return n($3(t,0));function n(r){let o=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let f=0;f<o.length;f++)o[f][0]==a&&(u=o[f][1]);$3(t,l).forEach(f=>{u||o.push([a,u=[]]),u.indexOf(f)==-1&&u.push(f)})})});let i=e[r.join(",")]=new th(r.indexOf(t.length-1)>-1);for(let s=0;s<o.length;s++){let a=o[s][1].sort($7);i.next.push({type:o[s][0],next:e[a.join(",")]||n(a)})}return i}}function yle(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],i=!o.validEnd,s=[];for(let a=0;a<o.next.length;a++){let{type:l,next:u}=o.next[a];s.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(u)==-1&&r.push(u)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function H7(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function F7(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let i=t[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function z7(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let i=t[o];i.validate&&i.validate(e[o])}}function U7(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new ble(t,r,e[r]);return n}let H3=class q7{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=U7(e,r.attrs),this.defaultAttrs=H7(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==th.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:F7(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new jc(this,this.computeAttrs(e),Le.from(n),ar.setFrom(r))}createChecked(e=null,n,r){return n=Le.from(n),this.checkContent(n),new jc(this,this.computeAttrs(e),n,ar.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Le.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let o=this.contentMatch.matchFragment(n),i=o&&o.fillBefore(Le.empty,!0);return i?new jc(this,e,n.append(i),ar.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){z7(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:ar.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,s)=>r[i]=new q7(i,n,s));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function vle(t,e,n){let r=n.split("|");return o=>{let i=o===null?"null":typeof o;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class ble{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?vle(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class JC{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=U7(e,o.attrs),this.excluded=null;let i=H7(this.attrs);this.instance=i?new ar(this,i):null}create(e=null){return!e&&this.instance?this.instance:new ar(this,F7(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((i,s)=>r[i]=new JC(i,o++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){z7(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class G7{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=qo.from(e.nodes),n.marks=qo.from(e.marks||{}),this.nodes=H3.compile(this.spec.nodes,this),this.marks=JC.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],s=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[s]||(r[s]=th.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?F3(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let o in this.marks){let i=this.marks[o],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:F3(this,s.split(" "))}this.nodeFromJSON=o=>jc.fromJSON(this,o),this.markFromJSON=o=>ar.fromJSON(this,o),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof H3){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new W1(r,r.defaultAttrs,e,ar.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function F3(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function wle(t){return t.tag!=null}function Cle(t){return t.style!=null}let Bc=class VT{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(wle(o))this.tags.push(o);else if(Cle(o)){let i=/[^=]*/.exec(o.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let i=e.nodes[o.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new U3(this,n,!1);return r.addAll(e,ar.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new U3(this,n,!0);return r.addAll(e,ar.none,n.from,n.to),Ye.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let i=this.tags[o];if(Ele(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let s=i.getAttrs(e);if(s===!1)continue;i.attrs=s||void 0}return i}}}matchStyle(e,n,r,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let s=this.styles[i],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(o){let i=o.priority==null?50:o.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<i)break}n.splice(s,0,o)}for(let o in e.marks){let i=e.marks[o].spec.parseDOM;i&&i.forEach(s=>{r(s=q3(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in e.nodes){let i=e.nodes[o].spec.parseDOM;i&&i.forEach(s=>{r(s=q3(s)),s.node||s.ignore||s.mark||(s.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new VT(e,VT.schemaRules(e)))}};const K7={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Sle={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},W7={ol:!0,ul:!0},Ry=1,jT=2,iy=4;function z3(t,e,n){return e!=null?(e?Ry:0)|(e==="full"?jT:0):t&&t.whitespace=="pre"?Ry|jT:n&~iy}class vb{constructor(e,n,r,o,i,s){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=ar.none,this.match=i||(s&iy?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Le.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ry)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-o[0].length))}}let n=Le.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Le.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!K7.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class U3{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,i,s=z3(null,n.preserveWhitespace,0)|(r?iy:0);o?i=new vb(o.type,o.attrs,ar.none,!0,n.topMatch||o.type.contentMatch,s):r?i=new vb(null,null,ar.none,!0,null,s):i=new vb(e.schema.topNodeType,null,ar.none,!0,null,s),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,i=o.options&jT?"full":this.localPreserveWS||(o.options&Ry)>0;if(i==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=o.content[o.content.length-1],a=e.previousSibling;(!s||a&&a.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;W7.hasOwnProperty(s)&&this.parser.normalizeLists&&xle(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:Sle.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let u,f=this.needsBlock;if(K7.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),u=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let h=l&&l.skip?n:this.readStyles(e,n);h&&this.addAll(e,h),u&&this.sync(i),this.needsBlock=f}else{let u=this.readStyles(e,n);u&&this.addElementByRule(e,l,u,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let i=this.parser.matchedStyles[o],s=r.getPropertyValue(i);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(i,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(u=>!l.clearMark(u)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,o){let i,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(s,n.attrs||null,r,n.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,n,r,o){let i=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];s!=a;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s,n);this.findAtPoint(e,i)}findPlace(e,n,r){let o,i;for(let s=this.open,a=0;s>=0;s--){let l=this.nodes[s],u=l.findWrapping(e);if(u&&(!o||o.length>u.length+a)&&(o=u,i=l,!u.length))break;if(l.solid){if(r)break;a+=2}}if(!o)return null;this.sync(i);for(let s=0;s<o.length;s++)n=this.enterInner(o[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let o=this.findPlace(e,n,r);if(o){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=ar.none;for(let a of o.concat(e.marks))(i.type?i.type.allowsMarkType(a.type):G3(a.type,e.type))&&(s=a.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,n,r,o){let i=this.findPlace(e.create(n),r,!1);return i&&(i=this.enterInner(e,n,r,!0,o)),i}enterInner(e,n,r,o=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=z3(e,i,s.options);s.options&iy&&s.content.length==0&&(a|=iy);let l=ar.none;return r=r.filter(u=>(s.type?s.type.allowsMarkType(u.type):G3(u.type,e))?(l=u.addToSet(l),!1):!0),this.nodes.push(new vb(e,n,l,o,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Ry)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=(a,l)=>{for(;a>=0;a--){let u=n[a];if(u==""){if(a==n.length-1||a==0)continue;for(;l>=i;l--)if(s(a-1,l))return!0;return!1}else{let f=l>0||l==0&&o?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!f||f.name!=u&&!f.isInGroup(u))return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function xle(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&W7.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Ele(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function q3(t){let e={};for(let n in t)e[n]=t[n];return e}function G3(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let i=[],s=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:f}=a.edge(l);if(u==e||i.indexOf(f)<0&&s(f))return!0}};if(s(o.contentMatch))return!0}}class tu{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=__(n).createDocumentFragment());let o=r,i=[];return e.forEach(s=>{if(i.length||s.marks.length){let a=0,l=0;for(;a<i.length&&l<s.marks.length;){let u=s.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(i[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)o=i.pop()[1];for(;l<s.marks.length;){let u=s.marks[l++],f=this.serializeMark(u,s.isInline,n);f&&(i.push([u,o]),o.appendChild(f.dom),o=f.contentDOM||f.dom)}}o.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=n1(__(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let i=this.serializeMark(e.marks[o],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&n1(__(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return n1(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new tu(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=K3(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return K3(e.marks)}}function K3(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function __(t){return t.document||window.document}const W3=new WeakMap;function _le(t){let e=W3.get(t);return e===void 0&&W3.set(t,e=kle(t)),e}function kle(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function n1(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],i;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=_le(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=o.indexOf(" ");s>0&&(n=o.slice(0,s),o=o.slice(s+1));let a,l=n?t.createElementNS(n,o):t.createElement(o),u=e[1],f=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){f=2;for(let h in u)if(u[h]!=null){let p=h.indexOf(" ");p>0?l.setAttributeNS(h.slice(0,p),h.slice(p+1),u[h]):h=="style"&&l.style?l.style.cssText=u[h]:l.setAttribute(h,u[h])}}for(let h=f;h<e.length;h++){let p=e[h];if(p===0){if(h<e.length-1||h>f)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:g,contentDOM:v}=n1(t,p,n,r);if(l.appendChild(g),v){if(a)throw new RangeError("Multiple content holes");a=v}}}return{dom:l,contentDOM:a}}const Y7=65535,X7=Math.pow(2,16);function Tle(t,e){return t+e*X7}function Y3(t){return t&Y7}function Ale(t){return(t-(t&Y7))/X7}const Q7=1,Z7=2,r1=4,J7=8;class BT{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&J7)>0}get deletedBefore(){return(this.delInfo&(Q7|r1))>0}get deletedAfter(){return(this.delInfo&(Z7|r1))>0}get deletedAcross(){return(this.delInfo&r1)>0}}class xs{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&xs.empty)return xs.empty}recover(e){let n=0,r=Y3(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+Ale(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let u=this.ranges[a+i],f=this.ranges[a+s],h=l+u;if(e<=h){let p=u?e==l?-1:e==h?1:n:n,g=l+o+(p<0?0:f);if(r)return g;let v=e==(n<0?l:h)?null:Tle(a/3,e-l),b=e==l?Z7:e==h?Q7:r1;return(n<0?e!=l:e!=h)&&(b|=J7),new BT(g,b,v)}o+=f-u}return r?e+o:new BT(e+o,0,null)}touches(e,n){let r=0,o=Y3(n),i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let u=this.ranges[a+i],f=l+u;if(e<=f&&a==o*3)return!0;r+=this.ranges[a+s]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],a=s-(this.inverted?i:0),l=s+(this.inverted?0:i),u=this.ranges[o+n],f=this.ranges[o+r];e(a,a+u,l,l+f),i+=f-u}}invert(){return new xs(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?xs.empty:new xs(e<0?[0,-e,0]:[0,0,e])}}xs.empty=new xs([]);class Jp{constructor(e,n,r=0,o=e?e.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Jp(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let o=e.getMirror(n);this.appendMap(e._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new Jp;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let i=this.from;i<this.to;i++){let s=this._maps[i],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this._maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new BT(e,o,null)}}const k_=Object.create(null);class wi{getMap(){return xs.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=k_[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in k_)throw new RangeError("Duplicate use of step JSON ID "+e);return k_[e]=n,n.prototype.jsonID=e,n}}class so{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new so(e,null)}static fail(e){return new so(null,e)}static fromReplace(e,n,r,o){try{return so.ok(e.replace(n,r,o))}catch(i){if(i instanceof q1)return so.fail(i.message);throw i}}}function NR(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let i=t.child(o);i.content.size&&(i=i.copy(NR(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return Le.fromArray(r)}class od extends wi{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new Ye(NR(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),n.openStart,n.openEnd);return so.fromReplace(e,this.from,this.to,i)}invert(){return new Tl(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new od(n.pos,r.pos,this.mark)}merge(e){return e instanceof od&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new od(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new od(n.from,n.to,e.markFromJSON(n.mark))}}wi.jsonID("addMark",od);class Tl extends wi{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Ye(NR(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return so.fromReplace(e,this.from,this.to,r)}invert(){return new od(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Tl(n.pos,r.pos,this.mark)}merge(e){return e instanceof Tl&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Tl(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Tl(n.from,n.to,e.markFromJSON(n.mark))}}wi.jsonID("removeMark",Tl);class id extends wi{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return so.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return so.fromReplace(e,this.pos,this.pos+1,new Ye(Le.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new id(this.pos,n.marks[o]);return new id(this.pos,this.mark)}}return new nh(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new id(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new id(n.pos,e.markFromJSON(n.mark))}}wi.jsonID("addNodeMark",id);class nh extends wi{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return so.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return so.fromReplace(e,this.pos,this.pos+1,new Ye(Le.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new id(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new nh(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new nh(n.pos,e.markFromJSON(n.mark))}}wi.jsonID("removeNodeMark",nh);class ro extends wi{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&$T(e,this.from,this.to)?so.fail("Structure replace would overwrite content"):so.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new xs([this.from,this.to-this.from,this.slice.size])}invert(e){return new ro(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ro(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ro)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Ye.empty:new Ye(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ro(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Ye.empty:new Ye(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ro(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ro(n.from,n.to,Ye.fromJSON(e,n.slice),!!n.structure)}}wi.jsonID("replace",ro);class Yr extends wi{constructor(e,n,r,o,i,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=a}apply(e){if(this.structure&&($T(e,this.from,this.gapFrom)||$T(e,this.gapTo,this.to)))return so.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return so.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?so.fromReplace(e,this.from,this.to,r):so.fail("Content does not fit in gap")}getMap(){return new xs([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Yr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new Yr(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Yr(n.from,n.to,n.gapFrom,n.gapTo,Ye.fromJSON(e,n.slice),n.insert,!!n.structure)}}wi.jsonID("replaceAround",Yr);function $T(t,e,n){let r=t.resolve(e),o=n-e,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function Rle(t,e,n,r){let o=[],i=[],s,a;t.doc.nodesBetween(e,n,(l,u,f)=>{if(!l.isInline)return;let h=l.marks;if(!r.isInSet(h)&&f.type.allowsMarkType(r.type)){let p=Math.max(u,e),g=Math.min(u+l.nodeSize,n),v=r.addToSet(h);for(let b=0;b<h.length;b++)h[b].isInSet(v)||(s&&s.to==p&&s.mark.eq(h[b])?s.to=g:o.push(s=new Tl(p,g,h[b])));a&&a.to==p?a.to=g:i.push(a=new od(p,g,r))}}),o.forEach(l=>t.step(l)),i.forEach(l=>t.step(l))}function Mle(t,e,n,r){let o=[],i=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;i++;let l=null;if(r instanceof JC){let u=s.marks,f;for(;f=r.isInSet(u);)(l||(l=[])).push(f),u=f.removeFromSet(u)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let u=Math.min(a+s.nodeSize,n);for(let f=0;f<l.length;f++){let h=l[f],p;for(let g=0;g<o.length;g++){let v=o[g];v.step==i-1&&h.eq(o[g].style)&&(p=v)}p?(p.to=u,p.step=i):o.push({style:h,from:Math.max(a,e),to:u,step:i})}}}),o.forEach(s=>t.step(new Tl(s.from,s.to,s.style)))}function DR(t,e,n,r=n.contentMatch,o=!0){let i=t.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<i.childCount;l++){let u=i.child(l),f=a+u.nodeSize,h=r.matchType(u.type);if(!h)s.push(new ro(a,f,Ye.empty));else{r=h;for(let p=0;p<u.marks.length;p++)n.allowsMarkType(u.marks[p].type)||t.step(new Tl(a,f,u.marks[p]));if(o&&u.isText&&n.whitespace!="pre"){let p,g=/\r?\n|\r/g,v;for(;p=g.exec(u.text);)v||(v=new Ye(Le.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),s.push(new ro(a+p.index,a+p.index+p[0].length,v))}}a=f}if(!r.validEnd){let l=r.fillBefore(Le.empty,!0);t.replace(a,a,new Ye(l,0,0))}for(let l=s.length-1;l>=0;l--)t.step(s[l])}function Ile(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Tm(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),i=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(i,s,n))return r;if(r==0||o.type.spec.isolating||!Ile(o,i,s))break}return null}function Nle(t,e,n){let{$from:r,$to:o,depth:i}=e,s=r.before(i+1),a=o.after(i+1),l=s,u=a,f=Le.empty,h=0;for(let v=i,b=!1;v>n;v--)b||r.index(v)>0?(b=!0,f=Le.from(r.node(v).copy(f)),h++):l--;let p=Le.empty,g=0;for(let v=i,b=!1;v>n;v--)b||o.after(v+1)<o.end(v)?(b=!0,p=Le.from(o.node(v).copy(p)),g++):u++;t.step(new Yr(l,u,s,a,new Ye(f.append(p),h,g),f.size-h,!0))}function eB(t,e,n=null,r=t){let o=Dle(t,e),i=o&&Ole(r,e);return i?o.map(X3).concat({type:e,attrs:n}).concat(i.map(X3)):null}function X3(t){return{type:t,attrs:null}}function Dle(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}function Ole(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let u=r;l&&u<o;u++)l=l.matchType(n.child(u).type);return!l||!l.validEnd?null:s}function Ple(t,e,n){let r=Le.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Le.from(n[s].type.create(n[s].attrs,r))}let o=e.start,i=e.end;t.step(new Yr(o,i,o,i,new Ye(r,0,0),n.length,!0))}function Lle(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{let l=typeof o=="function"?o(s):o;if(s.isTextblock&&!s.hasMarkup(r,l)&&Vle(t.doc,t.mapping.slice(i).map(a),r)){let u=null;if(r.schema.linebreakReplacement){let g=r.whitespace=="pre",v=!!r.contentMatch.matchType(r.schema.linebreakReplacement);g&&!v?u=!1:!g&&v&&(u=!0)}u===!1&&nB(t,s,a,i),DR(t,t.mapping.slice(i).map(a,1),r,void 0,u===null);let f=t.mapping.slice(i),h=f.map(a,1),p=f.map(a+s.nodeSize,1);return t.step(new Yr(h,p,h+1,p-1,new Ye(Le.from(r.create(l,null,s.marks)),0,0),1,!0)),u===!0&&tB(t,s,a,i),!1}})}function tB(t,e,n,r){e.forEach((o,i)=>{if(o.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(o.text);){let l=t.mapping.slice(r).map(n+1+i+s.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function nB(t,e,n,r){e.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+i);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function Vle(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function jle(t,e,n,r,o){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Yr(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new Ye(Le.from(s),0,0),1,!0))}function $c(t,e,n=1,r){let o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let u=o.depth-1,f=n-2;u>i;u--,f--){let h=o.node(u),p=o.index(u);if(h.type.spec.isolating)return!1;let g=h.content.cutByIndex(p,h.childCount),v=r&&r[f+1];v&&(g=g.replaceChild(0,v.type.create(v.attrs)));let b=r&&r[f]||h;if(!h.canReplace(p+1,h.childCount)||!b.type.validContent(g))return!1}let a=o.indexAfter(i),l=r&&r[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}function Ble(t,e,n=1,r){let o=t.doc.resolve(e),i=Le.empty,s=Le.empty;for(let a=o.depth,l=o.depth-n,u=n-1;a>l;a--,u--){i=Le.from(o.node(a).copy(i));let f=r&&r[u];s=Le.from(f?f.type.create(f.attrs,s):o.node(a).copy(s))}t.step(new ro(e,e,new Ye(i.append(s),n,n),!0))}function bh(t,e){let n=t.resolve(e),r=n.index();return rB(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function $le(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let i=e.child(o),s=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function rB(t,e){return!!(t&&e&&!t.isLeaf&&$le(t,e))}function eS(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let i,s,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&rB(i,s)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function Hle(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,i=t.doc.resolve(e-n),s=i.node().type;if(o&&s.inlineContent){let f=s.whitespace=="pre",h=!!s.contentMatch.matchType(o);f&&!h?r=!1:!f&&h&&(r=!0)}let a=t.steps.length;if(r===!1){let f=t.doc.resolve(e+n);nB(t,f.node(),f.before(),a)}s.inlineContent&&DR(t,e+n-1,s,i.node().contentMatchAt(i.index()),r==null);let l=t.mapping.slice(a),u=l.map(e-n);if(t.step(new ro(u,l.map(e+n,-1),Ye.empty,!0)),r===!0){let f=t.doc.resolve(u);tB(t,f.node(),f.before(),t.steps.length)}return t}function Fle(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let i=r.indexAfter(o);if(r.node(o).canReplaceWith(i,i,n))return r.after(o+1);if(i<r.node(o).childCount)return null}return null}function oB(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),u=r.node(s),f=!1;if(i==1)f=u.canReplace(l,l,o);else{let h=u.contentMatchAt(l).findWrapping(o.firstChild.type);f=h&&u.canReplaceWith(l,l,h[0])}if(f)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function tS(t,e,n=e,r=Ye.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),i=t.resolve(n);return iB(o,i,r)?new ro(e,n,r):new zle(o,i,r).fit()}function iB(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class zle{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Le.empty;for(let o=0;o<=e.depth;o++){let i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=Le.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let i=this.placed,s=r.depth,a=o.depth;for(;s&&a&&i.childCount==1;)i=i.firstChild.content,s--,a--;let l=new Ye(i,s,a);return e>-1?new Yr(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new ro(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(o=0),i.type.spec.isolating&&o<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,i=null;r?(i=T_(this.unplaced.content,r-1).firstChild,o=i.content):o=this.unplaced.content;let s=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],f,h=null;if(n==1&&(s?u.matchType(s.type)||(h=u.fillBefore(Le.from(s),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:h};if(n==2&&s&&(f=u.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:f};if(i&&u.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=T_(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new Ye(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=T_(e,n);if(o.childCount<=1&&n>0){let i=e.size-n<=n+o.size;this.unplaced=new Ye(Fg(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new Ye(Fg(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let b=0;b<i.length;b++)this.openFrontierNode(i[b]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,u=0,f=[],{match:h,type:p}=this.frontier[n];if(o){for(let b=0;b<o.childCount;b++)f.push(o.child(b));h=h.matchFragment(o)}let g=a.size+e-(s.content.size-s.openEnd);for(;u<a.childCount;){let b=a.child(u),E=h.matchType(b.type);if(!E)break;u++,(u>1||l==0||b.content.size)&&(h=E,f.push(sB(b.mark(p.allowedMarks(b.marks)),u==1?l:0,u==a.childCount?g:-1)))}let v=u==a.childCount;v||(g=-1),this.placed=zg(this.placed,n,Le.from(f)),this.frontier[n].match=h,v&&g<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,E=a;b<g;b++){let T=E.lastChild;this.frontier.push({type:T.type,match:T.contentMatchAt(T.childCount)}),E=T.content}this.unplaced=v?e==0?Ye.empty:new Ye(Fg(s.content,e-1,1),e-1,g<0?s.openEnd:e-1):new Ye(Fg(s.content,e,u),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!A_(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=A_(e,n,o,r,i);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],f=A_(e,a,u,l,!0);if(!f||f.childCount)continue e}return{depth:n,fit:s,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=zg(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,i)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=zg(this.placed,this.depth,Le.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Le.empty,!0);n.childCount&&(this.placed=zg(this.placed,this.frontier.length,n))}}function Fg(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Fg(t.firstChild.content,e-1,n)))}function zg(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(zg(t.lastChild.content,e-1,n)))}function T_(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function sB(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,sB(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Le.empty,!0)))),t.copy(r)}function A_(t,e,n,r,o){let i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!Ule(n,i.content,s)?a:null}function Ule(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function qle(t){return t.spec.defining||t.spec.definingForContent}function Gle(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),i=t.doc.resolve(n);if(iB(o,i,r))return t.step(new ro(e,n,r));let s=lB(o,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let p=o.depth,g=o.pos-1;p>0;p--,g--){let v=o.node(p).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;s.indexOf(p)>-1?a=p:o.before(p)==g&&s.splice(1,0,-p)}let l=s.indexOf(a),u=[],f=r.openStart;for(let p=r.content,g=0;;g++){let v=p.firstChild;if(u.push(v),g==r.openStart)break;p=v.content}for(let p=f-1;p>=0;p--){let g=u[p],v=qle(g.type);if(v&&!g.sameMarkup(o.node(Math.abs(a)-1)))f=p;else if(v||!g.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let g=(p+f+1)%(r.openStart+1),v=u[g];if(v)for(let b=0;b<s.length;b++){let E=s[(b+l)%s.length],T=!0;E<0&&(T=!1,E=-E);let P=o.node(E-1),D=o.index(E-1);if(P.canReplaceWith(D,D,v.type,v.marks))return t.replace(o.before(E),T?i.after(E):n,new Ye(aB(r.content,0,r.openStart,g),g,r.openEnd))}}let h=t.steps.length;for(let p=s.length-1;p>=0&&(t.replace(e,n,r),!(t.steps.length>h));p--){let g=s[p];g<0||(e=o.before(g),n=i.after(g))}}function aB(t,e,n,r,o){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(aB(i.content,e+1,n,r,i)))}if(e>r){let i=o.contentMatchAt(0),s=i.fillBefore(t).append(t);t=s.append(i.matchFragment(s).fillBefore(Le.empty,!0))}return t}function Kle(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=Fle(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new Ye(Le.from(r),0,0))}function Wle(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),i=lB(r,o);for(let s=0;s<i.length;s++){let a=i[s],l=s==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s&&r.start(s-1)==o.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),o.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function lB(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(i==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==i-1)&&n.push(o)}return n}class Dp extends wi{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return so.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return so.fromReplace(e,this.pos,this.pos+1,new Ye(Le.from(o),0,n.isLeaf?0:1))}getMap(){return xs.empty}invert(e){return new Dp(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Dp(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Dp(n.pos,n.attr,n.value)}}wi.jsonID("attr",Dp);class My extends wi{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return so.ok(r)}getMap(){return xs.empty}invert(e){return new My(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new My(n.attr,n.value)}}wi.jsonID("docAttr",My);let em=class extends Error{};em=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};em.prototype=Object.create(Error.prototype);em.prototype.constructor=em;em.prototype.name="TransformError";class OR{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Jp}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new em(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Ye.empty){let o=tS(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new Ye(Le.from(r),0,0))}delete(e,n){return this.replace(e,n,Ye.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Gle(this,e,n,r),this}replaceRangeWith(e,n,r){return Kle(this,e,n,r),this}deleteRange(e,n){return Wle(this,e,n),this}lift(e,n){return Nle(this,e,n),this}join(e,n=1){return Hle(this,e,n),this}wrap(e,n){return Ple(this,e,n),this}setBlockType(e,n=e,r,o=null){return Lle(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return jle(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new Dp(e,n,r)),this}setDocAttribute(e,n){return this.step(new My(e,n)),this}addNodeMark(e,n){return this.step(new id(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof ar)n.isInSet(r.marks)&&this.step(new nh(e,n));else{let o=r.marks,i,s=[];for(;i=n.isInSet(o);)s.push(new nh(e,i)),o=i.removeFromSet(o);for(let a=s.length-1;a>=0;a--)this.step(s[a])}return this}split(e,n=1,r){return Ble(this,e,n,r),this}addMark(e,n,r){return Rle(this,e,n,r),this}removeMark(e,n,r){return Mle(this,e,n,r),this}clearIncompatible(e,n,r){return DR(this,e,n,r),this}}const R_=Object.create(null);class Ct{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new cB(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Ye.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let i=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:u}=s[a],f=e.mapping.slice(i);e.replaceRange(f.map(l.pos),f.map(u.pos),a?Ye.empty:n),a==0&&J3(e,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:a}=o[i],l=e.mapping.slice(r),u=l.map(s.pos),f=l.map(a.pos);i?e.deleteRange(u,f):(e.replaceRangeWith(u,f,n),J3(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new at(e):mp(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let i=e.depth-1;i>=0;i--){let s=n<0?mp(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):mp(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new rs(e.node(0))}static atStart(e){return mp(e,e,0,0,1)||new rs(e)}static atEnd(e){return mp(e,e,e.content.size,e.childCount,-1)||new rs(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=R_[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in R_)throw new RangeError("Duplicate use of selection JSON ID "+e);return R_[e]=n,n.prototype.jsonID=e,n}getBookmark(){return at.between(this.$anchor,this.$head).getBookmark()}}Ct.prototype.visible=!0;class cB{constructor(e,n){this.$from=e,this.$to=n}}let Q3=!1;function Z3(t){!Q3&&!t.parent.inlineContent&&(Q3=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class at extends Ct{constructor(e,n=e){Z3(e),Z3(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ct.near(r);let o=e.resolve(n.map(this.anchor));return new at(o.parent.inlineContent?o:r,r)}replace(e,n=Ye.empty){if(super.replace(e,n),n==Ye.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof at&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new nS(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new at(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let i=Ct.findFrom(n,r,!0)||Ct.findFrom(n,-r,!0);if(i)n=i.$head;else return Ct.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(Ct.findFrom(e,-r,!0)||Ct.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new at(e,n)}}Ct.jsonID("text",at);class nS{constructor(e,n){this.anchor=e,this.head=n}map(e){return new nS(e.map(this.anchor),e.map(this.head))}resolve(e){return at.between(e.resolve(this.anchor),e.resolve(this.head))}}class ht extends Ct{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),i=e.resolve(o);return r?Ct.near(i):new ht(i)}content(){return new Ye(Le.from(this.node),0,0)}eq(e){return e instanceof ht&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new PR(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ht(e.resolve(n.anchor))}static create(e,n){return new ht(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ht.prototype.visible=!1;Ct.jsonID("node",ht);class PR{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new nS(r,r):new PR(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&ht.isSelectable(r)?new ht(n):Ct.near(n)}}class rs extends Ct{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Ye.empty){if(n==Ye.empty){e.delete(0,e.doc.content.size);let r=Ct.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new rs(e)}map(e){return new rs(e)}eq(e){return e instanceof rs}getBookmark(){return Yle}}Ct.jsonID("all",rs);const Yle={map(){return this},resolve(t){return new rs(t)}};function mp(t,e,n,r,o,i=!1){if(e.inlineContent)return at.create(t,n);for(let s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let a=e.child(s);if(a.isAtom){if(!i&&ht.isSelectable(a))return ht.create(t,n-(o<0?a.nodeSize:0))}else{let l=mp(t,a,n+o,o<0?a.childCount:0,o,i);if(l)return l}n+=a.nodeSize*o}return null}function J3(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof ro||o instanceof Yr))return;let i=t.mapping.maps[r],s;i.forEach((a,l,u,f)=>{s==null&&(s=f)}),t.setSelection(Ct.near(t.doc.resolve(s),n))}const e5=1,bb=2,t5=4;let Xle=class extends OR{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|e5)&~bb,this.storedMarks=null,this}get selectionSet(){return(this.updated&e5)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=bb,this}ensureMarks(e){return ar.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&bb)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~bb,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ar.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let s=this.doc.resolve(n);i=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,i)),this.selection.empty||this.setSelection(Ct.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=t5,this}get scrolledIntoView(){return(this.updated&t5)>0}};function n5(t,e){return!e||!t?t:t.bind(e)}class Ug{constructor(e,n,r){this.name=e,this.init=n5(n.init,r),this.apply=n5(n.apply,r)}}const Qle=[new Ug("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Ug("selection",{init(t,e){return t.selection||Ct.atStart(e.doc)},apply(t){return t.selection}}),new Ug("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Ug("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class M_{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Qle.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Ug(r.key,r.spec.state,r))})}}class If{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=o?o[s].n:0,u=o?o[s].state:this,f=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,u,r);if(f&&r.filterTransaction(f,s)){if(f.setMeta("appendedTransaction",e),!o){o=[];for(let h=0;h<this.config.plugins.length;h++)o.push(h<s?{state:r,n:n.length}:{state:this,n:0})}n.push(f),r=r.applyInner(f),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new If(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let i=r[o];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new Xle(this)}static create(e){let n=new M_(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new If(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new M_(this.schema,e.plugins),r=n.fields,o=new If(n);for(let i=0;i<r.length;i++){let s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],i=o.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new M_(e.schema,e.plugins),i=new If(o);return o.fields.forEach(s=>{if(s.name=="doc")i.doc=jc.fromJSON(e.schema,n.doc);else if(s.name=="selection")i.selection=Ct.fromJSON(i.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],u=l.spec.state;if(l.key==s.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[s.name]=u.fromJSON.call(l,e,n[a],i);return}}i[s.name]=s.init(e,i)}}),i}}function uB(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=uB(o,e,{})),n[r]=o}return n}class nn{constructor(e){this.spec=e,this.props={},e.props&&uB(e.props,this,this.props),this.key=e.key?e.key.key:dB("plugin")}getState(e){return e[this.key]}}const I_=Object.create(null);function dB(t){return t in I_?t+"$"+ ++I_[t]:(I_[t]=0,t+"$")}class Nn{constructor(e="key"){this.key=dB(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ko=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},tm=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let HT=null;const Rc=function(t,e,n){let r=HT||(HT=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Zle=function(){HT=null},rh=function(t,e,n,r){return n&&(r5(t,e,n,r,-1)||r5(t,e,n,r,1))},Jle=/^(img|br|input|textarea|hr)$/i;function r5(t,e,n,r,o){for(var i;;){if(t==n&&e==r)return!0;if(e==(o<0?0:sa(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Sv(t)||Jle.test(t.nodeName)||t.contentEditable=="false")return!1;e=Ko(t)+(o<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(o<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((i=s.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=o;else return!1;else t=s,e=o<0?sa(t):0}else return!1}}function sa(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ece(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=sa(t)}else if(t.parentNode&&!Sv(t))e=Ko(t),t=t.parentNode;else return null}}function tce(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Sv(t))e=Ko(t)+1,t=t.parentNode;else return null}}function nce(t,e,n){for(let r=e==0,o=e==sa(t);r||o;){if(t==n)return!0;let i=Ko(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,o=o&&i==sa(t)}}function Sv(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const rS=function(t){return t.focusNode&&rh(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Ef(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function rce(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function oce(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(sa(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(sa(r.startContainer),r.startOffset)}}}const Hl=typeof navigator<"u"?navigator:null,o5=typeof document<"u"?document:null,$d=Hl&&Hl.userAgent||"",FT=/Edge\/(\d+)/.exec($d),fB=/MSIE \d/.exec($d),zT=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec($d),is=!!(fB||zT||FT),md=fB?document.documentMode:zT?+zT[1]:FT?+FT[1]:0,Xa=!is&&/gecko\/(\d+)/i.test($d);Xa&&+(/Firefox\/(\d+)/.exec($d)||[0,0])[1];const UT=!is&&/Chrome\/(\d+)/.exec($d),pi=!!UT,hB=UT?+UT[1]:0,Mi=!is&&!!Hl&&/Apple Computer/.test(Hl.vendor),nm=Mi&&(/Mobile\/\w+/.test($d)||!!Hl&&Hl.maxTouchPoints>2),ra=nm||(Hl?/Mac/.test(Hl.platform):!1),ice=Hl?/Win/.test(Hl.platform):!1,Oc=/Android \d/.test($d),xv=!!o5&&"webkitFontSmoothing"in o5.documentElement.style,sce=xv?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function ace(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Sc(t,e){return typeof t=="number"?t:t[e]}function lce(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function i5(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=tm(s);continue}let a=s,l=a==i.body,u=l?ace(i):lce(a),f=0,h=0;if(e.top<u.top+Sc(r,"top")?h=-(u.top-e.top+Sc(o,"top")):e.bottom>u.bottom-Sc(r,"bottom")&&(h=e.bottom-e.top>u.bottom-u.top?e.top+Sc(o,"top")-u.top:e.bottom-u.bottom+Sc(o,"bottom")),e.left<u.left+Sc(r,"left")?f=-(u.left-e.left+Sc(o,"left")):e.right>u.right-Sc(r,"right")&&(f=e.right-u.right+Sc(o,"right")),f||h)if(l)i.defaultView.scrollBy(f,h);else{let g=a.scrollLeft,v=a.scrollTop;h&&(a.scrollTop+=h),f&&(a.scrollLeft+=f);let b=a.scrollLeft-g,E=a.scrollTop-v;e={left:e.left-b,top:e.top-E,right:e.right-b,bottom:e.bottom-E}}let p=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(p))break;s=p=="absolute"?s.offsetParent:tm(s)}}function cce(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let i=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=t.root.elementFromPoint(i,s);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:pB(t.dom)}}function pB(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=tm(r));return e}function uce({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;mB(n,r==0?0:r-e)}function mB(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:i}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let ip=null;function dce(t){if(t.setActive)return t.setActive();if(ip)return t.focus(ip);let e=pB(t);t.focus(ip==null?{get preventScroll(){return ip={preventScroll:!0},!0}}:void 0),ip||(ip=!1,mB(e,0))}function gB(t,e){let n,r=2e8,o,i=0,s=e.top,a=e.top,l,u;for(let f=t.firstChild,h=0;f;f=f.nextSibling,h++){let p;if(f.nodeType==1)p=f.getClientRects();else if(f.nodeType==3)p=Rc(f).getClientRects();else continue;for(let g=0;g<p.length;g++){let v=p[g];if(v.top<=s&&v.bottom>=a){s=Math.max(v.bottom,s),a=Math.min(v.top,a);let b=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(b<r){n=f,r=b,o=b&&n.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,f.nodeType==1&&b&&(i=h+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!l&&v.left<=e.left&&v.right>=e.left&&(l=f,u={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!n&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(i=h+1)}}return!n&&l&&(n=l,o=u,r=0),n&&n.nodeType==3?fce(n,o):!n||r&&n.nodeType==1?{node:t,offset:i}:gB(n,o)}function fce(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let i=qu(r,1);if(i.top!=i.bottom&&LR(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function LR(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function hce(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function pce(t,e,n){let{node:r,offset:o}=gB(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();i=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,o,i)}function mce(t,e,n,r){let o=-1;for(let i=e,s=!1;i!=t.dom;){let a=t.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!s&&l.left>r.left||l.top>r.top?o=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),s=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function yB(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){let s=t.childNodes[i];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if(LR(e,u))return yB(s,e,u)}}if((i=(i+1)%r)==o)break}return t}function gce(t,e){let n=t.dom.ownerDocument,r,o=0,i=oce(n,e.left,e.top);i&&({node:r,offset:o}=i);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let u=t.dom.getBoundingClientRect();if(!LR(e,u)||(s=yB(t.dom,e,u),!s))return null}if(Mi)for(let u=s;r&&u;u=tm(u))u.draggable&&(r=void 0);if(s=hce(s,e),r){if(Xa&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let f=r.childNodes[o],h;f.nodeName=="IMG"&&(h=f.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&o++}let u;xv&&o&&r.nodeType==1&&(u=r.childNodes[o-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=mce(t,r,o,e))}a==null&&(a=pce(t,s,e));let l=t.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function s5(t){return t.top<t.bottom||t.left<t.right}function qu(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(s5(r))return r}return Array.prototype.find.call(n,s5)||t.getBoundingClientRect()}const yce=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function vB(t,e,n){let{node:r,offset:o,atom:i}=t.docView.domFromPos(e,n<0?-1:1),s=xv||Xa;if(r.nodeType==3)if(s&&(yce.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=qu(Rc(r,o,o),n);if(Xa&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let u=qu(Rc(r,o-1,o-1),-1);if(u.top==l.top){let f=qu(Rc(r,o,o+1),-1);if(f.top!=l.top)return Ng(f,f.left<u.left)}}return l}else{let l=o,u=o,f=n<0?1:-1;return n<0&&!o?(u++,f=-1):n>=0&&o==r.nodeValue.length?(l--,f=1):n<0?l--:u++,Ng(qu(Rc(r,l,u),f),f<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&o&&(n<0||o==sa(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return N_(l.getBoundingClientRect(),!1)}if(i==null&&o<sa(r)){let l=r.childNodes[o];if(l.nodeType==1)return N_(l.getBoundingClientRect(),!0)}return N_(r.getBoundingClientRect(),n>=0)}if(i==null&&o&&(n<0||o==sa(r))){let l=r.childNodes[o-1],u=l.nodeType==3?Rc(l,sa(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return Ng(qu(u,1),!1)}if(i==null&&o<sa(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?Rc(l,0,s?0:1):l.nodeType==1?l:null:null;if(u)return Ng(qu(u,-1),!0)}return Ng(qu(r.nodeType==3?Rc(r):r,-n),n>=0)}function Ng(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function N_(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function bB(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function vce(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return bB(t,e,()=>{let{node:i}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let s=vB(t,o.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Rc(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let f=l[u];if(f.bottom>f.top+1&&(n=="up"?s.top-f.top>(f.bottom-s.top)*2:f.bottom-s.bottom>(s.bottom-f.top)*2))return!1}}return!0})}const bce=/[\u0590-\u08ac]/;function wce(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=t.domSelection();return a?!bce.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:s:bB(t,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:f,anchorOffset:h}=t.domSelectionRange(),p=a.caretBidiLevel;a.modify("move",n,"character");let g=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:v,focusOffset:b}=t.domSelectionRange(),E=v&&!g.contains(v.nodeType==1?v:v.parentNode)||l==v&&u==b;try{a.collapse(f,h),l&&(l!=f||u!=h)&&a.extend&&a.extend(l,u)}catch{}return p!=null&&(a.caretBidiLevel=p),E}):r.pos==r.start()||r.pos==r.end()}let a5=null,l5=null,c5=!1;function Cce(t,e,n){return a5==e&&l5==n?c5:(a5=e,l5=n,c5=n=="up"||n=="down"?vce(t,e,n):wce(t,e,n))}const ua=0,u5=1,Nf=2,Fl=3;class Ev{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=ua,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,s;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(s)+s.size:this.posAtStart}else{let i,s;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>Ko(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!1;break}if(i.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!0;break}if(i.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let i=this.getDesc(o),s;if(i&&(!n||i.node))if(r&&(s=i.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],i=r+o.size;if(r==e&&i!=r){for(;!o.border&&o.children.length;)for(let s=0;s<o.children.length;s++){let a=o.children[s];if(a.size){o=a;break}}return o}if(e<i)return o.descAt(e-r-o.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let i=0;r<this.children.length;r++){let s=this.children[r],a=i+s.size;if(a>e||s instanceof CB){o=e-i;break}i=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof wB&&i.side>=0;r--);if(n<=0){let i,s=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,s=!1);return i&&n&&s&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?Ko(i.dom)+1:0}}else{let i,s=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,s=!1);return i&&s&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?Ko(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=r,a=0;;a++){let l=this.children[a],u=s+l.size;if(o==-1&&e<=u){let f=s+l.border;if(e>=f&&n<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,f);e=s;for(let h=a;h>0;h--){let p=this.children[h-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){o=Ko(p.dom)+1;break}e-=p.size}o==-1&&(o=0)}if(o>-1&&(u>n||a==this.children.length-1)){n=u;for(let f=a+1;f<this.children.length;f++){let h=this.children[f];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){i=Ko(h.dom);break}n+=h.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=u}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let i=Math.min(e,n),s=Math.max(e,n);for(let g=0,v=0;g<this.children.length;g++){let b=this.children[g],E=v+b.size;if(i>v&&s<E)return b.setSelection(e-v-b.border,n-v-b.border,r,o);v=E}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),f=r.domSelectionRange(),h=!1;if((Xa||Mi)&&e==n){let{node:g,offset:v}=a;if(g.nodeType==3){if(h=!!(v&&g.nodeValue[v-1]==`
`),h&&v==g.nodeValue.length)for(let b=g,E;b;b=b.parentNode){if(E=b.nextSibling){E.nodeName=="BR"&&(a=l={node:E.parentNode,offset:Ko(E)+1});break}let T=b.pmViewDesc;if(T&&T.node&&T.node.isBlock)break}}else{let b=g.childNodes[v-1];h=b&&(b.nodeName=="BR"||b.contentEditable=="false")}}if(Xa&&f.focusNode&&f.focusNode!=l.node&&f.focusNode.nodeType==1){let g=f.focusNode.childNodes[f.focusOffset];g&&g.contentEditable=="false"&&(o=!0)}if(!(o||h&&Mi)&&rh(a.node,a.offset,f.anchorNode,f.anchorOffset)&&rh(l.node,l.offset,f.focusNode,f.focusOffset))return;let p=!1;if((u.extend||e==n)&&!h){u.collapse(a.node,a.offset);try{e!=n&&u.extend(l.node,l.offset),p=!0}catch{}}if(!p){if(e>n){let v=a;a=l,l=v}let g=document.createRange();g.setEnd(l.node,l.offset),g.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(g)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let i=this.children[o],s=r+i.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let a=r+i.border,l=s-i.border;if(e>=a&&n<=l){this.dirty=e==r||n==s?Nf:u5,e==a&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Fl:i.markDirty(e-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Nf:Fl}r=s}this.dirty=Nf}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Nf:u5;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class wB extends Ev{constructor(e,n,r,o){let i,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!i)return o;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==ua&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Sce extends Ev{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class oh extends Ev{constructor(e,n,r,o,i){super(e,[],r,o),this.mark=n,this.spec=i}static create(e,n,r,o){let i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return(!s||!s.dom)&&(s=tu.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new oh(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Fl||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Fl&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ua){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ua}}slice(e,n,r){let o=oh.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=GT(i,n,s,r)),e>0&&(i=GT(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class gd extends Ev{constructor(e,n,r,o,i,s,a,l,u){super(e,[],i,s),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,i,s){let a=i.nodeViews[n.type.name],l,u=a&&a(n,i,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,o),f=u&&u.dom,h=u&&u.contentDOM;if(n.isText){if(!f)f=document.createTextNode(n.text);else if(f.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else f||({dom:f,contentDOM:h}=tu.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!h&&!n.isText&&f.nodeName!="BR"&&(f.hasAttribute("contenteditable")||(f.contentEditable="false"),n.type.spec.draggable&&(f.draggable=!0));let p=f;return f=EB(f,r,n),u?l=new xce(e,n,r,o,f,h||null,p,u,i,s+1):n.isText?new oS(e,n,r,o,f,p,i):new gd(e,n,r,o,f,h||null,p,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Le.empty)}return e}matchesNode(e,n,r){return this.dirty==ua&&e.eq(this.node)&&Y1(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,i=e.composing?this.localCompositionInfo(e,n):null,s=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new _ce(this,s&&s.node,e);Ace(this.node,this.innerDeco,(u,f,h)=>{u.spec.marks?l.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!h&&l.syncToMarks(f==this.node.childCount?ar.none:this.node.child(f).marks,r,e),l.placeWidget(u,e,o)},(u,f,h,p)=>{l.syncToMarks(u.marks,r,e);let g;l.findNodeMatch(u,f,h,p)||a&&e.state.selection.from>o&&e.state.selection.to<o+u.nodeSize&&(g=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(u,f,h,g,e)||l.updateNextNode(u,f,h,e,p,o)||l.addNode(u,f,h,e,o),o+=u.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Nf)&&(s&&this.protectLocalComposition(e,s),SB(this.contentDOM,this.children,e),nm&&Rce(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof at)||r<n||o>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let s=i.nodeValue,a=Mce(this.node.content,s,r-n,o-n);return a<0?null:{node:i,pos:a,text:s}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new Sce(this,i,n,o);e.input.compositionNodes.push(s),this.children=GT(this.children,r,r+o.length,e,s)}update(e,n,r,o){return this.dirty==Fl||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=ua}updateOuterDeco(e){if(Y1(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=xB(this.dom,this.nodeDOM,qT(this.outerDeco,this.node,n),qT(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function d5(t,e,n,r,o){EB(r,e,t);let i=new gd(void 0,t,e,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class oS extends gd{constructor(e,n,r,o,i,s,a){super(e,n,r,o,i,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==Fl||this.dirty!=ua&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ua||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=ua,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),i=document.createTextNode(o.text);return new oS(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Fl)}get domAtom(){return!1}isText(e){return this.node.text==e}}class CB extends Ev{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ua&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class xce extends gd{constructor(e,n,r,o,i,s,a,l,u,f){super(e,n,r,o,i,s,a,u,f),this.spec=l}update(e,n,r,o){if(this.dirty==Fl)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function SB(t,e,n){let r=t.firstChild,o=!1;for(let i=0;i<e.length;i++){let s=e[i],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=f5(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(s instanceof oh){let l=r?r.previousSibling:t.lastChild;SB(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=f5(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const sy=function(t){t&&(this.nodeName=t)};sy.prototype=Object.create(null);const Df=[new sy];function qT(t,e,n){if(t.length==0)return Df;let r=n?Df[0]:new sy,o=[r];for(let i=0;i<t.length;i++){let s=t[i].type.attrs;if(s){s.nodeName&&o.push(r=new sy(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&o.length==1&&o.push(r=new sy(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function xB(t,e,n,r){if(n==Df&&r==Df)return e;let o=e;for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(i){let l;a&&a.nodeName==s.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=Df[0]),o=l}Ece(o,a||Df[0],s)}return o}function Ece(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)o.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<o.length;i++)r.indexOf(o[i])==-1&&t.classList.add(o[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function EB(t,e,n){return xB(t,t,Df,qT(e,n,t.nodeType!=1))}function Y1(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function f5(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class _ce{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=kce(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,i=this.stack.length>>1,s=Math.min(i,e.length);for(;o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=ua,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let u=this.top.children[l];if(u.matchesMark(e[i])&&!this.isLocked(u.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=oh.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(e,n,r,o){let i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))i=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,o,i){let s=this.top.children[o];return s.dirty==Fl&&s.dom==s.contentDOM&&(s.dirty=Nf),s.update(e,n,r,i)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,i,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof gd){let u=this.preMatch.matched.get(l);if(u!=null&&u!=i)return!1;let f=l.dom,h,p=this.isLocked(f)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Fl&&Y1(n,l.outerDeco));if(!p&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=f&&(this.changed=!0),this.index++,!0;if(!p&&(h=this.recreateWrapper(l,e,n,r,o,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=h,h.contentDOM&&(h.dirty=Nf,h.updateChildren(o,s+1),h.dirty=ua),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,i,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Y1(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=gd.create(this.top,n,r,o,i,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,o,i){let s=gd.create(this.top,e,n,r,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let i=new wB(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof oh;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof oS)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Mi||pi)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new CB(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function kce(t,e){let n=e,r=n.children.length,o=t.childCount,i=new Map,s=[];e:for(;o>0;){let a;for(;;)if(r){let u=n.children[r-1];if(u instanceof oh)n=u,r=u.children.length;else{a=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}function Tce(t,e){return t.type.side-e.type.side}function Ace(t,e,n,r){let o=e.locals(t),i=0;if(o.length==0){for(let u=0;u<t.childCount;u++){let f=t.child(u);r(f,o,e.forChild(i,f),u),i+=f.nodeSize}return}let s=0,a=[],l=null;for(let u=0;;){let f,h;for(;s<o.length&&o[s].to==i;){let E=o[s++];E.widget&&(f?(h||(h=[f])).push(E):f=E)}if(f)if(h){h.sort(Tce);for(let E=0;E<h.length;E++)n(h[E],u,!!l)}else n(f,u,!!l);let p,g;if(l)g=-1,p=l,l=null;else if(u<t.childCount)g=u,p=t.child(u++);else break;for(let E=0;E<a.length;E++)a[E].to<=i&&a.splice(E--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)a.push(o[s++]);let v=i+p.nodeSize;if(p.isText){let E=v;s<o.length&&o[s].from<E&&(E=o[s].from);for(let T=0;T<a.length;T++)a[T].to<E&&(E=a[T].to);E<v&&(l=p.cut(E-i),p=p.cut(0,E-i),v=E,g=-1)}else for(;s<o.length&&o[s].to<v;)s++;let b=p.isInline&&!p.isLeaf?a.filter(E=>!E.inline):a.slice();r(p,b,e.forChild(i,p),g),i=v}}function Rce(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Mce(t,e,n,r){for(let o=0,i=0;o<t.childCount&&i<=r;){let s=t.child(o++),a=i;if(i+=s.nodeSize,!s.isText)continue;let l=s.text;for(;o<t.childCount;){let u=t.child(o++);if(i+=u.nodeSize,!u.isText)break;l+=u.text}if(i>=n){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let u=a<r?l.lastIndexOf(e,r-a-1):-1;if(u>=0&&u+e.length+a>=n)return a+u;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function GT(t,e,n,r,o){let i=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],u=a,f=a+=l.size;u>=n||f<=e?i.push(l):(u<e&&i.push(l.slice(0,e-u,r)),o&&(i.push(o),o=void 0),f>n&&i.push(l.slice(n-u,l.size,r)))}return i}function VR(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),i=o&&o.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,u;if(rS(n)){for(l=s;o&&!o.node;)o=o.parent;let h=o.node;if(o&&h.isAtom&&ht.isSelectable(h)&&o.parent&&!(h.isInline&&nce(n.focusNode,n.focusOffset,o.dom))){let p=o.posBefore;u=new ht(s==p?a:r.resolve(p))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let h=s,p=s;for(let g=0;g<n.rangeCount;g++){let v=n.getRangeAt(g);h=Math.min(h,t.docView.posFromDOM(v.startContainer,v.startOffset,1)),p=Math.max(p,t.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(h<0)return null;[l,s]=p==t.state.selection.anchor?[p,h]:[h,p],a=r.resolve(s)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let f=r.resolve(l);if(!u){let h=e=="pointer"||t.state.selection.head<a.pos&&!i?1:-1;u=jR(t,f,a,h)}return u}function _B(t){return t.editable?t.hasFocus():TB(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Hc(t,e=!1){let n=t.state.selection;if(kB(t,n),!!_B(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&pi){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&rh(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Nce(t);else{let{anchor:r,head:o}=n,i,s;h5&&!(n instanceof at)&&(n.$from.parent.inlineContent||(i=p5(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=p5(t,n.to))),t.docView.setSelection(r,o,t,e),h5&&(i&&m5(i),s&&m5(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Ice(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const h5=Mi||pi&&hB<63;function p5(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(Mi&&o&&o.contentEditable=="false")return D_(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return D_(o);if(i)return D_(i)}}function D_(t){return t.contentEditable="true",Mi&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function m5(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Ice(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!_B(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Nce(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,Ko(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&is&&md<=11&&(r.disabled=!0,r.disabled=!1)}function kB(t,e){if(e instanceof ht){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(g5(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else g5(t)}function g5(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function jR(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||at.between(e,n,r)}function y5(t){return t.editable&&!t.hasFocus()?!1:TB(t)}function TB(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Dce(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return rh(e.node,e.offset,n.anchorNode,n.anchorOffset)}function KT(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return i&&Ct.findFrom(i,e)}function Gu(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function v5(t,e,n){let r=t.state.selection;if(r instanceof at)if(n.indexOf("s")>-1){let{$head:o}=r,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=t.state.doc.resolve(o.pos+i.nodeSize*(e<0?-1:1));return Gu(t,new at(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=KT(t.state,e);return o&&o instanceof ht?Gu(t,o):!1}else if(!(ra&&n.indexOf("m")>-1)){let o=r.$head,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let a=e<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?ht.isSelectable(i)?Gu(t,new ht(e<0?t.state.doc.resolve(o.pos-i.nodeSize):o)):xv?Gu(t,new at(t.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ht&&r.node.isInline)return Gu(t,new at(e>0?r.$to:r.$from));{let o=KT(t.state,e);return o?Gu(t,o):!1}}}function X1(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ay(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function sp(t,e){return e<0?Oce(t):Pce(t)}function Oce(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,i,s=!1;for(Xa&&n.nodeType==1&&r<X1(n)&&ay(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(ay(a,-1))o=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(AB(n))break;{let a=n.previousSibling;for(;a&&ay(a,-1);)o=n.parentNode,i=Ko(a),a=a.previousSibling;if(a)n=a,r=X1(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?WT(t,n,r):o&&WT(t,o,i)}function Pce(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=X1(n),i,s;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(ay(a,1))i=n,s=++r;else break}else{if(AB(n))break;{let a=n.nextSibling;for(;a&&ay(a,1);)i=a.parentNode,s=Ko(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=X1(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}i&&WT(t,i,s)}function AB(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Lce(t,e){for(;t&&e==t.childNodes.length&&!Sv(t);)e=Ko(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function Vce(t,e){for(;t&&!e&&!Sv(t);)e=Ko(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function WT(t,e,n){if(e.nodeType!=3){let i,s;(s=Lce(e,n))?(e=s,n=0):(i=Vce(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(rS(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&Hc(t)},50)}function b5(t,e){let n=t.state.doc.resolve(e);if(!(pi||ice)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left<o.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function w5(t,e,n){let r=t.state.selection;if(r instanceof at&&!r.empty||n.indexOf("s")>-1||ra&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=KT(t.state,e);if(s&&s instanceof ht)return Gu(t,s)}if(!o.parent.inlineContent){let s=e<0?o:i,a=r instanceof rs?Ct.near(s,e):Ct.findFrom(s,e);return a?Gu(t,a):!1}return!1}function C5(t,e){if(!(t.state.selection instanceof at))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let s=t.state.tr;return e<0?s.delete(n.pos-i.nodeSize,n.pos):s.delete(n.pos,n.pos+i.nodeSize),t.dispatch(s),!0}return!1}function S5(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function jce(t){if(!Mi||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;S5(t,r,"true"),setTimeout(()=>S5(t,r,"false"),20)}return!1}function Bce(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function $ce(t,e){let n=e.keyCode,r=Bce(e);if(n==8||ra&&n==72&&r=="c")return C5(t,-1)||sp(t,-1);if(n==46&&!e.shiftKey||ra&&n==68&&r=="c")return C5(t,1)||sp(t,1);if(n==13||n==27)return!0;if(n==37||ra&&n==66&&r=="c"){let o=n==37?b5(t,t.state.selection.from)=="ltr"?-1:1:-1;return v5(t,o,r)||sp(t,o)}else if(n==39||ra&&n==70&&r=="c"){let o=n==39?b5(t,t.state.selection.from)=="ltr"?1:-1:1;return v5(t,o,r)||sp(t,o)}else{if(n==38||ra&&n==80&&r=="c")return w5(t,-1,r)||sp(t,-1);if(n==40||ra&&n==78&&r=="c")return jce(t)||w5(t,1,r)||sp(t,1);if(r==(ra?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function BR(t,e){t.someProp("transformCopied",g=>{e=g(e,t)});let n=[],{content:r,openStart:o,openEnd:i}=e;for(;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;let g=r.firstChild;n.push(g.type.name,g.attrs!=g.type.defaultAttrs?g.attrs:null),r=g.content}let s=t.someProp("clipboardSerializer")||tu.fromSchema(t.state.schema),a=OB(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let u=l.firstChild,f,h=0;for(;u&&u.nodeType==1&&(f=DB[u.nodeName.toLowerCase()]);){for(let g=f.length-1;g>=0;g--){let v=a.createElement(f[g]);for(;l.firstChild;)v.appendChild(l.firstChild);l.appendChild(v),h++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${o} ${i}${h?` -${h}`:""} ${JSON.stringify(n)}`);let p=t.someProp("clipboardTextSerializer",g=>g(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:p,slice:e}}function RB(t,e,n,r,o){let i=o.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=e&&(r||i||!n);if(l){if(t.someProp("transformPastedText",p=>{e=p(e,i||r,t)}),i)return e?new Ye(Le.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Ye.empty;let h=t.someProp("clipboardTextParser",p=>p(e,o,r,t));if(h)a=h;else{let p=o.marks(),{schema:g}=t.state,v=tu.fromSchema(g);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(b=>{let E=s.appendChild(document.createElement("p"));b&&E.appendChild(v.serializeNode(g.text(b,p)))})}}else t.someProp("transformPastedHTML",h=>{n=h(n,t)}),s=Uce(n),xv&&qce(s);let u=s&&s.querySelector("[data-pm-slice]"),f=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(f&&f[3])for(let h=+f[3];h>0;h--){let p=s.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;s=p}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Bc.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||f),context:o,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!Hce.test(p.parentNode.nodeName)?{ignore:!0}:null}})),f)a=Gce(x5(a,+f[1],+f[2]),f[4]);else if(a=Ye.maxOpen(Fce(a.content,o),!0),a.openStart||a.openEnd){let h=0,p=0;for(let g=a.content.firstChild;h<a.openStart&&!g.type.spec.isolating;h++,g=g.firstChild);for(let g=a.content.lastChild;p<a.openEnd&&!g.type.spec.isolating;p++,g=g.lastChild);a=x5(a,h,p)}return t.someProp("transformPasted",h=>{a=h(a,t)}),a}const Hce=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Fce(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),i,s=[];if(t.forEach(a=>{if(!s)return;let l=o.findWrapping(a.type),u;if(!l)return s=null;if(u=s.length&&i.length&&IB(l,i,a,s[s.length-1],0))s[s.length-1]=u;else{s.length&&(s[s.length-1]=NB(s[s.length-1],i.length));let f=MB(a,l);s.push(f),o=o.matchType(f.type),i=l}}),s)return Le.from(s)}return t}function MB(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Le.from(t));return t}function IB(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let i=IB(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(Le.from(MB(n,t,o+1))))}}function NB(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,NB(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Le.empty,!0);return t.copy(n.append(r))}function YT(t,e,n,r,o,i){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(i=0),o<r-1&&(a=YT(a,e,n,r,o+1,i)),o>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(Le.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function x5(t,e,n){return e<t.openStart&&(t=new Ye(YT(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Ye(YT(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const DB={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let E5=null;function OB(){return E5||(E5=document.implementation.createHTMLDocument("title"))}let O_=null;function zce(t){let e=window.trustedTypes;return e?(O_||(O_=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),O_.createHTML(t)):t}function Uce(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=OB().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&DB[r[1].toLowerCase()])&&(t=o.map(i=>"<"+i+">").join("")+t+o.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=zce(t),o)for(let i=0;i<o.length;i++)n=n.querySelector(o[i])||n;return n}function qce(t){let e=t.querySelectorAll(pi?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Gce(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:i,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=Le.from(l.create(r[a+1],o)),i++,s++}return new Ye(o,i,s)}const Ii={},Ni={},Kce={touchstart:!0,touchmove:!0};class Wce{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Yce(t){for(let e in Ii){let n=Ii[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Qce(t,r)&&!$R(t,r)&&(t.editable||!(r.type in Ni))&&n(t,r)},Kce[e]?{passive:!0}:void 0)}Mi&&t.dom.addEventListener("input",()=>null),XT(t)}function sd(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Xce(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function XT(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>$R(t,r))})}function $R(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Qce(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Zce(t,e){!$R(t,e)&&Ii[e.type]&&(t.editable||!(e.type in Ni))&&Ii[e.type](t,e)}Ni.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!LB(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Oc&&pi&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),nm&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,Ef(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||$ce(t,n)?n.preventDefault():sd(t,"key")};Ni.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ni.keypress=(t,e)=>{let n=e;if(LB(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||ra&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof at)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode),i=()=>t.state.tr.insertText(o).scrollIntoView();!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o,i))&&t.dispatch(i()),n.preventDefault()}};function iS(t){return{left:t.clientX,top:t.clientY}}function Jce(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function HR(t,e,n,r,o){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(t.someProp(e,a=>s>i.depth?a(t,n,i.nodeAfter,i.before(s),o,!0):a(t,n,i.node(s),i.before(s),o,!1)))return!0;return!1}function Op(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function eue(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&ht.isSelectable(r)?(Op(t,new ht(n)),!0):!1}function tue(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof ht&&(r=n.node);let i=t.state.doc.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s);if(ht.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?o=i.before(n.$from.depth):o=i.before(s);break}}return o!=null?(Op(t,ht.create(t.state.doc,o)),!0):!1}function nue(t,e,n,r,o){return HR(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(o?tue(t,n):eue(t,n))}function rue(t,e,n,r){return HR(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function oue(t,e,n,r){return HR(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||iue(t,n,r)}function iue(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Op(t,at.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)Op(t,at.create(r,a+1,a+1+s.content.size));else if(ht.isSelectable(s))Op(t,ht.create(r,a));else continue;return!0}}function FR(t){return Q1(t)}const PB=ra?"metaKey":"ctrlKey";Ii.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=FR(t),o=Date.now(),i="singleClick";o-t.input.lastClick.time<500&&Jce(n,t.input.lastClick)&&!n[PB]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i,button:n.button};let s=t.posAtCoords(iS(n));s&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new sue(t,s,n,!!r)):(i=="doubleClick"?rue:oue)(t,s.pos,s.inside,n)?n.preventDefault():sd(t,"pointer"))};class sue{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[PB],this.allowDefault=r.shiftKey;let i,s;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),s=n.inside;else{let f=e.state.doc.resolve(n.pos);i=f.parent,s=f.depth?f.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:u}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||u instanceof ht&&u.from<=s&&u.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Xa&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),sd(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Hc(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(iS(e))),this.updateAllowDefault(e),this.allowDefault||!n?sd(this.view,"pointer"):nue(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Mi&&this.mightDrag&&!this.mightDrag.node.isAtom||pi&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Op(this.view,Ct.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):sd(this.view,"pointer")}move(e){this.updateAllowDefault(e),sd(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ii.touchstart=t=>{t.input.lastTouch=Date.now(),FR(t),sd(t,"pointer")};Ii.touchmove=t=>{t.input.lastTouch=Date.now(),sd(t,"pointer")};Ii.contextmenu=t=>FR(t);function LB(t,e){return t.composing?!0:Mi&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const aue=Oc?5e3:-1;Ni.compositionstart=Ni.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof at&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Q1(t,!0),t.markCursor=null;else if(Q1(t,!e.selection.empty),Xa&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){let a=t.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else o=s,i=-1}}t.input.composing=!0}VB(t,aue)};Ni.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,VB(t,20))};function VB(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Q1(t),e))}function jB(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=cue());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function lue(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=ece(e.focusNode,e.focusOffset),r=tce(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function cue(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Q1(t,e=!1){if(!(Oc&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),jB(t),e||t.docView&&t.docView.dirty){let n=VR(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function uue(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Iy=is&&md<15||nm&&sce<604;Ii.copy=Ni.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let i=Iy?null:n.clipboardData,s=r.content(),{dom:a,text:l}=BR(t,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):uue(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function due(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function fue(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Ny(t,r.value,null,o,e):Ny(t,r.textContent,r.innerHTML,o,e)},50)}function Ny(t,e,n,r,o){let i=RB(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,i||Ye.empty)))return!0;if(!i)return!1;let s=due(i),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function BB(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ni.paste=(t,e)=>{let n=e;if(t.composing&&!Oc)return;let r=Iy?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Ny(t,BB(r),r.getData("text/html"),o,n)?n.preventDefault():fue(t,n)};class $B{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const hue=ra?"altKey":"ctrlKey";function HB(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[hue]}Ii.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,i=o.empty?null:t.posAtCoords(iS(n)),s;if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof ht?o.to-1:o.to))){if(r&&r.mightDrag)s=ht.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let h=t.docView.nearestDesc(n.target,!0);h&&h.node.type.spec.draggable&&h!=t.docView&&(s=ht.create(t.state.doc,h.posBefore))}}let a=(s||t.state.selection).content(),{dom:l,text:u,slice:f}=BR(t,a);(!n.dataTransfer.files.length||!pi||hB>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Iy?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Iy||n.dataTransfer.setData("text/plain",u),t.dragging=new $B(f,HB(t,n),s)};Ii.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ni.dragover=Ni.dragenter=(t,e)=>e.preventDefault();Ni.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(iS(n));if(!o)return;let i=t.state.doc.resolve(o.pos),s=r&&r.slice;s?t.someProp("transformPasted",v=>{s=v(s,t)}):s=RB(t,BB(n.dataTransfer),Iy?null:n.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&HB(t,n));if(t.someProp("handleDrop",v=>v(t,n,s||Ye.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?oB(t.state.doc,i.pos,s):i.pos;l==null&&(l=i.pos);let u=t.state.tr;if(a){let{node:v}=r;v?v.replace(u):u.deleteSelection()}let f=u.mapping.map(l),h=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,p=u.doc;if(h?u.replaceRangeWith(f,f,s.content.firstChild):u.replaceRange(f,f,s),u.doc.eq(p))return;let g=u.doc.resolve(f);if(h&&ht.isSelectable(s.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(s.content.firstChild))u.setSelection(new ht(g));else{let v=u.mapping.map(l);u.mapping.maps[u.mapping.maps.length-1].forEach((b,E,T,P)=>v=P),u.setSelection(jR(t,g,u.doc.resolve(v)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};Ii.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Hc(t)},20))};Ii.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Ii.beforeinput=(t,e)=>{if(pi&&Oc&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,Ef(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in Ni)Ii[t]=Ni[t];function Dy(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Z1{constructor(e,n){this.toDOM=e,this.spec=n||Hf,this.side=this.spec.side||0}map(e,n,r,o){let{pos:i,deleted:s}=e.mapResult(n.from+o,this.side<0?-1:1);return s?null:new nr(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Z1&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Dy(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class yd{constructor(e,n){this.attrs=e,this.spec=n||Hf}map(e,n,r,o){let i=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new nr(i,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof yd&&Dy(this.attrs,e.attrs)&&Dy(this.spec,e.spec)}static is(e){return e.type instanceof yd}destroy(){}}class zR{constructor(e,n){this.attrs=e,this.spec=n||Hf}map(e,n,r,o){let i=e.mapResult(n.from+o,1);if(i.deleted)return null;let s=e.mapResult(n.to+o,-1);return s.deleted||s.pos<=i.pos?null:new nr(i.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),i;return o==n.from&&!(i=e.child(r)).isText&&o+i.nodeSize==n.to}eq(e){return this==e||e instanceof zR&&Dy(this.attrs,e.attrs)&&Dy(this.spec,e.spec)}destroy(){}}class nr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new nr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new nr(e,e,new Z1(n,r))}static inline(e,n,r,o){return new nr(e,n,new yd(r,o))}static node(e,n,r,o){return new nr(e,n,new zR(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof yd}get widget(){return this.type instanceof Z1}}const gp=[],Hf={};class Cn{constructor(e,n){this.local=e.length?e:gp,this.children=n.length?n:gp}static create(e,n){return n.length?J1(n,e,0,Hf):ui}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,i){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,o+a,i)}}map(e,n,r){return this==ui||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Hf)}mapInner(e,n,r,o,i){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(s||(s=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?pue(this.children,s||[],e,n,r,o,i):s?new Cn(s.sort(Ff),gp):ui}add(e,n){return n.length?this==ui?Cn.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,i=0;e.forEach((a,l)=>{let u=l+r,f;if(f=zB(n,a,u)){for(o||(o=this.children.slice());i<o.length&&o[i]<l;)i+=3;o[i]==l?o[i+2]=o[i+2].addInner(a,f,u+1):o.splice(i,0,l,l+a.nodeSize,J1(f,a,u+1,Hf)),i+=3}});let s=FB(i?UB(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new Cn(s.length?this.local.concat(s).sort(Ff):this.local,o||this.children)}remove(e){return e.length==0||this==ui?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let i=0;i<r.length;i+=3){let s,a=r[i]+n,l=r[i+1]+n;for(let f=0,h;f<e.length;f++)(h=e[f])&&h.from>a&&h.to<l&&(e[f]=null,(s||(s=[])).push(h));if(!s)continue;r==this.children&&(r=this.children.slice());let u=r[i+2].removeInner(s,a+1);u!=ui?r[i+2]=u:(r.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<e.length;i++)if(s=e[i])for(let a=0;a<o.length;a++)o[a].eq(s,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new Cn(o,r):ui}forChild(e,n){if(this==ui)return this;if(n.isLeaf)return Cn.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,s=i+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof yd){let u=Math.max(i,l.from)-i,f=Math.min(s,l.to)-i;u<f&&(o||(o=[])).push(l.copy(u,f))}}if(o){let a=new Cn(o.sort(Ff),gp);return r?new Zu([a,r]):a}return r||ui}eq(e){if(this==e)return!0;if(!(e instanceof Cn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return UR(this.localsInner(e))}localsInner(e){if(this==ui)return gp;if(e.inlineContent||!this.local.some(yd.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof yd||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Cn.empty=new Cn([],[]);Cn.removeOverlap=UR;const ui=Cn.empty;class Zu{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,Hf));return Zu.from(r)}forChild(e,n){if(n.isLeaf)return Cn.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(e,n);i!=ui&&(i instanceof Zu?r=r.concat(i.members):r.push(i))}return Zu.from(r)}eq(e){if(!(e instanceof Zu)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let s=0;s<i.length;s++)n.push(i[s])}}return n?UR(r?n:n.sort(Ff)):gp}static from(e){switch(e.length){case 0:return ui;case 1:return e[0];default:return new Zu(e.every(n=>n instanceof Cn)?e:e.reduce((n,r)=>n.concat(r instanceof Cn?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function pue(t,e,n,r,o,i,s){let a=t.slice();for(let u=0,f=i;u<n.maps.length;u++){let h=0;n.maps[u].forEach((p,g,v,b)=>{let E=b-v-(g-p);for(let T=0;T<a.length;T+=3){let P=a[T+1];if(P<0||p>P+f-h)continue;let D=a[T]+f-h;g>=D?a[T+1]=p<=D?-2:-1:p>=f&&E&&(a[T]+=E,a[T+1]+=E)}h+=E}),f=n.maps[u].map(f,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let f=n.map(t[u]+i),h=f-o;if(h<0||h>=r.content.size){l=!0;continue}let p=n.map(t[u+1]+i,-1),g=p-o,{index:v,offset:b}=r.content.findIndex(h),E=r.maybeChild(v);if(E&&b==h&&b+E.nodeSize==g){let T=a[u+2].mapInner(n,E,f+1,t[u]+i+1,s);T!=ui?(a[u]=h,a[u+1]=g,a[u+2]=T):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=mue(a,t,e,n,o,i,s),f=J1(u,r,0,s);e=f.local;for(let h=0;h<a.length;h+=3)a[h+1]<0&&(a.splice(h,3),h-=3);for(let h=0,p=0;h<f.children.length;h+=3){let g=f.children[h];for(;p<a.length&&a[p]<g;)p+=3;a.splice(p,0,f.children[h],f.children[h+1],f.children[h+2])}}return new Cn(e.sort(Ff),a)}function FB(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new nr(o.from+e,o.to+e,o.type))}return n}function mue(t,e,n,r,o,i,s){function a(l,u){for(let f=0;f<l.local.length;f++){let h=l.local[f].map(r,o,u);h?n.push(h):s.onRemove&&s.onRemove(l.local[f].spec)}for(let f=0;f<l.children.length;f+=3)a(l.children[f+2],l.children[f]+u+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+i+1);return n}function zB(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let i=0,s;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function UB(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function J1(t,e,n,r){let o=[],i=!1;e.forEach((a,l)=>{let u=zB(t,a,l+n);if(u){i=!0;let f=J1(u,a,n+l+1,r);f!=ui&&o.push(l,l+a.nodeSize,f)}});let s=FB(i?UB(t):t,-n).sort(Ff);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Cn(s,o):ui}function Ff(t,e){return t.from-e.from||t.to-e.to}function UR(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let i=e[o];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),_5(e,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),_5(e,o,r.copy(i.from,r.to)));break}}}return e}function _5(t,e,n){for(;e<t.length&&Ff(n,t[e])>0;)e++;t.splice(e,0,n)}function P_(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=ui&&e.push(r)}),t.cursorWrapper&&e.push(Cn.create(t.state.doc,[t.cursorWrapper.deco])),Zu.from(e)}const gue={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},yue=is&&md<=11;class vue{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class bue{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new vue,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);is&&md<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),yue&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,gue)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(y5(this.view)){if(this.suppressingSelectionUpdates)return Hc(this.view);if(is&&md<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&rh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=tm(i))n.add(i);for(let i=e.anchorNode;i;i=tm(i))if(n.has(i)){r=i;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&y5(e)&&!this.ignoreSelectionChange(r),i=-1,s=-1,a=!1,l=[];if(e.editable)for(let f=0;f<n.length;f++){let h=this.registerMutation(n[f],l);h&&(i=i<0?h.from:Math.min(h.from,i),s=s<0?h.to:Math.max(h.to,s),h.typeOver&&(a=!0))}if(Xa&&l.length){let f=l.filter(h=>h.nodeName=="BR");if(f.length==2){let[h,p]=f;h.parentNode&&h.parentNode.parentNode==p.parentNode?p.remove():h.remove()}else{let{focusNode:h}=this.currentSelection;for(let p of f){let g=p.parentNode;g&&g.nodeName=="LI"&&(!h||Sue(e,h)!=g)&&p.remove()}}}let u=null;i<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&rS(r)&&(u=VR(e))&&u.eq(Ct.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Hc(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||o)&&(i>-1&&(e.docView.markDirty(i,s),wue(e)),this.handleDOMChange(i,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Hc(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let f=0;f<e.addedNodes.length;f++){let h=e.addedNodes[f];n.push(h),h.nodeType==3&&(this.lastChangedTextNode=h)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,i=e.nextSibling;if(is&&md<=11&&e.addedNodes.length)for(let f=0;f<e.addedNodes.length;f++){let{previousSibling:h,nextSibling:p}=e.addedNodes[f];(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(o=h),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(i=p)}let s=o&&o.parentNode==e.target?Ko(o)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=i&&i.parentNode==e.target?Ko(i):e.target.childNodes.length,u=r.localPosFromDOM(e.target,l,1);return{from:a,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let k5=new WeakMap,T5=!1;function wue(t){if(!k5.has(t)&&(k5.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Xa,T5)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),T5=!0}}function A5(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return rh(s.node,s.offset,o,i)&&([n,r,o,i]=[o,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function Cue(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return A5(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?A5(t,n):null}function Sue(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function xue(t,e,n){let{node:r,fromOffset:o,toOffset:i,from:s,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),u,f=l.anchorNode;if(f&&t.dom.contains(f.nodeType==1?f:f.parentNode)&&(u=[{node:f,offset:l.anchorOffset}],rS(l)||u.push({node:l.focusNode,offset:l.focusOffset})),pi&&t.input.lastKeyCode===8)for(let E=i;E>o;E--){let T=r.childNodes[E-1],P=T.pmViewDesc;if(T.nodeName=="BR"&&!P){i=E;break}if(!P||P.size)break}let h=t.state.doc,p=t.someProp("domParser")||Bc.fromSchema(t.state.schema),g=h.resolve(s),v=null,b=p.parse(r,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:o,to:i,preserveWhitespace:g.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:Eue,context:g});if(u&&u[0].pos!=null){let E=u[0].pos,T=u[1]&&u[1].pos;T==null&&(T=E),v={anchor:E+s,head:T+s}}return{doc:b,sel:v,from:s,to:a}}function Eue(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Mi&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Mi&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const _ue=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function kue(t,e,n,r,o){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let R=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,M=VR(t,R);if(M&&!t.state.selection.eq(M)){if(pi&&Oc&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",q=>q(t,Ef(13,"Enter"))))return;let B=t.state.tr.setSelection(M);R=="pointer"?B.setMeta("pointer",!0):R=="key"&&B.scrollIntoView(),i&&B.setMeta("composition",i),t.dispatch(B)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,u=xue(t,e,n),f=t.state.doc,h=f.slice(u.from,u.to),p,g;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(p=t.state.selection.to,g="end"):(p=t.state.selection.from,g="start"),t.input.lastKeyCode=null;let v=Rue(h.content,u.doc.content,u.from,p,g);if(v&&t.input.domChangeCount++,(nm&&t.input.lastIOSEnter>Date.now()-225||Oc)&&o.some(R=>R.nodeType==1&&!_ue.test(R.nodeName))&&(!v||v.endA>=v.endB)&&t.someProp("handleKeyDown",R=>R(t,Ef(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!v)if(r&&l instanceof at&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))v={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let R=R5(t,t.state.doc,u.sel);if(R&&!R.eq(t.state.selection)){let M=t.state.tr.setSelection(R);i&&M.setMeta("composition",i),t.dispatch(M)}}return}t.state.selection.from<t.state.selection.to&&v.start==v.endB&&t.state.selection instanceof at&&(v.start>t.state.selection.from&&v.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?v.start=t.state.selection.from:v.endA<t.state.selection.to&&v.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(v.endB+=t.state.selection.to-v.endA,v.endA=t.state.selection.to)),is&&md<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>u.from&&u.doc.textBetween(v.start-u.from-1,v.start-u.from+1)==" "&&(v.start--,v.endA--,v.endB--);let b=u.doc.resolveNoCache(v.start-u.from),E=u.doc.resolveNoCache(v.endB-u.from),T=f.resolve(v.start),P=b.sameParent(E)&&b.parent.inlineContent&&T.end()>=v.endA,D;if((nm&&t.input.lastIOSEnter>Date.now()-225&&(!P||o.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!P&&b.pos<u.doc.content.size&&(!b.sameParent(E)||!b.parent.inlineContent)&&!/\S/.test(u.doc.textBetween(b.pos,E.pos,"",""))&&(D=Ct.findFrom(u.doc.resolve(b.pos+1),1,!0))&&D.head>b.pos)&&t.someProp("handleKeyDown",R=>R(t,Ef(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>v.start&&Aue(f,v.start,v.endA,b,E)&&t.someProp("handleKeyDown",R=>R(t,Ef(8,"Backspace")))){Oc&&pi&&t.domObserver.suppressSelectionUpdates();return}pi&&v.endB==v.start&&(t.input.lastChromeDelete=Date.now()),Oc&&!P&&b.start()!=E.start()&&E.parentOffset==0&&b.depth==E.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==v.endA&&(v.endB-=2,E=u.doc.resolveNoCache(v.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(R){return R(t,Ef(13,"Enter"))})},20));let z=v.start,V=v.endA,$=R=>{let M=R||t.state.tr.replace(z,V,u.doc.slice(v.start-u.from,v.endB-u.from));if(u.sel){let B=R5(t,M.doc,u.sel);B&&!(pi&&t.composing&&B.empty&&(v.start!=v.endB||t.input.lastChromeDelete<Date.now()-100)&&(B.head==z||B.head==M.mapping.map(V)-1)||is&&B.empty&&B.head==z)&&M.setSelection(B)}return i&&M.setMeta("composition",i),M.scrollIntoView()},O;if(P){if(b.pos==E.pos){is&&md<=11&&b.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Hc(t),20));let R=$(t.state.tr.delete(z,V)),M=f.resolve(v.start).marksAcross(f.resolve(v.endA));M&&R.ensureMarks(M),t.dispatch(R)}else if(v.endA==v.endB&&(O=Tue(b.parent.content.cut(b.parentOffset,E.parentOffset),T.parent.content.cut(T.parentOffset,v.endA-T.start())))){let R=$(t.state.tr);O.type=="add"?R.addMark(z,V,O.mark):R.removeMark(z,V,O.mark),t.dispatch(R)}else if(b.parent.child(b.index()).isText&&b.index()==E.index()-(E.textOffset?0:1)){let R=b.parent.textBetween(b.parentOffset,E.parentOffset),M=()=>$(t.state.tr.insertText(R,z,V));t.someProp("handleTextInput",B=>B(t,z,V,R,M))||t.dispatch(M())}}else t.dispatch($())}function R5(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:jR(t,e.resolve(n.anchor),e.resolve(n.head))}function Tue(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,i=r,s,a,l;for(let f=0;f<r.length;f++)o=r[f].removeFromSet(o);for(let f=0;f<n.length;f++)i=n[f].removeFromSet(i);if(o.length==1&&i.length==0)a=o[0],s="add",l=f=>f.mark(a.addToSet(f.marks));else if(o.length==0&&i.length==1)a=i[0],s="remove",l=f=>f.mark(a.removeFromSet(f.marks));else return null;let u=[];for(let f=0;f<e.childCount;f++)u.push(l(e.child(f)));if(Le.from(u).eq(t))return{mark:a,type:s}}function Aue(t,e,n,r,o){if(n-e<=o.pos-r.pos||L_(r,!0,!1)<o.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&n==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=t.resolve(L_(i,!0,!0));return!s.parent.isTextblock||s.pos>n||L_(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function L_(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function Rue(t,e,n,r,o){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,i-Math.min(s,a));r-=s+l-i}if(s<i&&t.size<e.size){let l=r<=i&&r>=s?i-r:0;i-=l,i&&i<e.size&&M5(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-s),s=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<t.size&&M5(t.textBetween(i-1,i+1))&&(i+=l?1:-1),s=i+(s-a),a=i}return{start:i,endA:s,endB:a}}function M5(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class qR{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Wce,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(P5),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=D5(this),N5(this),this.nodeViews=O5(this),this.docView=d5(this.state.doc,I5(this),P_(this),this.dom,this),this.domObserver=new bue(this,(r,o,i,s)=>kue(this,r,o,i,s)),this.domObserver.start(),Yce(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&XT(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(P5),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(jB(this),s=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let g=O5(this);Iue(g,this.nodeViews)&&(this.nodeViews=g,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&XT(this),this.editable=D5(this),N5(this);let l=P_(this),u=I5(this),f=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",h=i||!this.docView.matchesNode(e.doc,u,l);(h||!e.selection.eq(o.selection))&&(s=!0);let p=f=="preserve"&&s&&this.dom.style.overflowAnchor==null&&cce(this);if(s){this.domObserver.stop();let g=h&&(is||pi)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&Mue(o.selection,e.selection);if(h){let v=pi?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=lue(this)),(i||!this.docView.update(e.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=d5(e.doc,u,l,this.dom,this)),v&&!this.trackWrites&&(g=!0)}g||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Dce(this))?Hc(this,g):(kB(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),f=="reset"?this.dom.scrollTop=0:f=="to selection"?this.scrollToSelection():p&&uce(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ht){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&i5(this,n.getBoundingClientRect(),e)}else i5(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(o=i)}this.dragging=new $B(e.slice,e.move,o<0?void 0:ht.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(o=n?n(a):a))return o}let i=this.state.plugins;if(i)for(let s=0;s<i.length;s++){let a=i[s].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(is){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&dce(this.dom),Hc(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return gce(this,e)}coordsAtPos(e,n=1){return vB(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return Cce(this,n||this.state,e)}pasteHTML(e,n){return Ny(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Ny(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return BR(this,e)}destroy(){this.docView&&(Xce(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],P_(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Zle())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Zce(this,e)}domSelectionRange(){let e=this.domSelection();return e?Mi&&this.root.nodeType===11&&rce(this.dom.ownerDocument)==this.dom&&Cue(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}qR.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function I5(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[nr.node(0,t.state.doc.content.size,e)]}function N5(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:nr.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function D5(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Mue(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function O5(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Iue(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function P5(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ad={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ew={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Nue=typeof navigator<"u"&&/Mac/.test(navigator.platform),Due=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Wo=0;Wo<10;Wo++)Ad[48+Wo]=Ad[96+Wo]=String(Wo);for(var Wo=1;Wo<=24;Wo++)Ad[Wo+111]="F"+Wo;for(var Wo=65;Wo<=90;Wo++)Ad[Wo]=String.fromCharCode(Wo+32),ew[Wo]=String.fromCharCode(Wo);for(var V_ in Ad)ew.hasOwnProperty(V_)||(ew[V_]=Ad[V_]);function Oue(t){var e=Nue&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Due&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?ew:Ad)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Pue=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Lue=typeof navigator<"u"&&/Win/.test(navigator.platform);function Vue(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))Pue?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function jue(t){let e=Object.create(null);for(let n in t)e[Vue(n)]=t[n];return e}function j_(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Bue(t){return new nn({props:{handleKeyDown:GR(t)}})}function GR(t){let e=jue(t);return function(n,r){let o=Oue(r),i,s=e[j_(o,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[j_(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Lue&&r.ctrlKey&&r.altKey)&&(i=Ad[r.keyCode])&&i!=o){let a=e[j_(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const KR=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function qB(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const GB=(t,e,n)=>{let r=qB(t,n);if(!r)return!1;let o=WR(r);if(!o){let s=r.blockRange(),a=s&&Tm(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let i=o.nodeBefore;if(t$(t,o,e,-1))return!0;if(r.parent.content.size==0&&(rm(i,"end")||ht.isSelectable(i)))for(let s=r.depth;;s--){let a=tS(t.doc,r.before(s),r.after(s),Ye.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(rm(i,"end")?Ct.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):ht.create(l.doc,o.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0):!1},$ue=(t,e,n)=>{let r=qB(t,n);if(!r)return!1;let o=WR(r);return o?KB(t,o,e):!1},Hue=(t,e,n)=>{let r=YB(t,n);if(!r)return!1;let o=YR(r);return o?KB(t,o,e):!1};function KB(t,e,n){let r=e.nodeBefore,o=r,i=e.pos-1;for(;!o.isTextblock;i--){if(o.type.spec.isolating)return!1;let f=o.lastChild;if(!f)return!1;o=f}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let f=a.firstChild;if(!f)return!1;a=f}let u=tS(t.doc,i,l,Ye.empty);if(!u||u.from!=i||u instanceof ro&&u.slice.size>=l-i)return!1;if(n){let f=t.tr.step(u);f.setSelection(at.create(f.doc,i)),n(f.scrollIntoView())}return!0}function rm(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const WB=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=WR(r)}let s=i&&i.nodeBefore;return!s||!ht.isSelectable(s)?!1:(e&&e(t.tr.setSelection(ht.create(t.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function WR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function YB(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const XB=(t,e,n)=>{let r=YB(t,n);if(!r)return!1;let o=YR(r);if(!o)return!1;let i=o.nodeAfter;if(t$(t,o,e,1))return!0;if(r.parent.content.size==0&&(rm(i,"start")||ht.isSelectable(i))){let s=tS(t.doc,r.before(),r.after(),Ye.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(rm(i,"start")?Ct.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):ht.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0):!1},QB=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=YR(r)}let s=i&&i.nodeAfter;return!s||!ht.isSelectable(s)?!1:(e&&e(t.tr.setSelection(ht.create(t.doc,i.pos)).scrollIntoView()),!0)};function YR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Fue=(t,e)=>{let n=t.selection,r=n instanceof ht,o;if(r){if(n.node.isTextblock||!bh(t.doc,n.from))return!1;o=n.from}else if(o=eS(t.doc,n.from,-1),o==null)return!1;if(e){let i=t.tr.join(o);r&&i.setSelection(ht.create(i.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},zue=(t,e)=>{let n=t.selection,r;if(n instanceof ht){if(n.node.isTextblock||!bh(t.doc,n.to))return!1;r=n.to}else if(r=eS(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Uue=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),i=o&&Tm(o);return i==null?!1:(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)},ZB=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function XR(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const que=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=XR(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(Ct.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},JB=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof rs||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=XR(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(s,i.createAndFill());a.setSelection(at.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},e$=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if($c(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Tm(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};function Gue(t){return(e,n)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof ht&&e.selection.node.isBlock)return!r.parentOffset||!$c(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],s,a,l=!1,u=!1;for(let g=r.depth;;g--)if(r.node(g).isBlock){l=r.end(g)==r.pos+(r.depth-g),u=r.start(g)==r.pos-(r.depth-g),a=XR(r.node(g-1).contentMatchAt(r.indexAfter(g-1))),i.unshift(l&&a?{type:a}:null),s=g;break}else{if(g==1)return!1;i.unshift(null)}let f=e.tr;(e.selection instanceof at||e.selection instanceof rs)&&f.deleteSelection();let h=f.mapping.map(r.pos),p=$c(f.doc,h,i.length,i);if(p||(i[0]=a?{type:a}:null,p=$c(f.doc,h,i.length,i)),!p)return!1;if(f.split(h,i.length,i),!l&&u&&r.node(s).type!=a){let g=f.mapping.map(r.before(s)),v=f.doc.resolve(g);a&&r.node(s-1).canReplaceWith(v.index(),v.index()+1,a)&&f.setNodeMarkup(f.mapping.map(r.before(s)),a)}return n&&n(f.scrollIntoView()),!0}}const Kue=Gue(),Wue=(t,e)=>{let{$from:n,to:r}=t.selection,o,i=n.sharedDepth(r);return i==0?!1:(o=n.before(i),e&&e(t.tr.setSelection(ht.create(t.doc,o))),!0)};function Yue(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(o.isTextblock||bh(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function t$(t,e,n,r){let o=e.nodeBefore,i=e.nodeAfter,s,a,l=o.type.spec.isolating||i.type.spec.isolating;if(!l&&Yue(t,e,n))return!0;let u=!l&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(s=(a=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&a.matchType(s[0]||i.type).validEnd){if(n){let g=e.pos+i.nodeSize,v=Le.empty;for(let T=s.length-1;T>=0;T--)v=Le.from(s[T].create(null,v));v=Le.from(o.copy(v));let b=t.tr.step(new Yr(e.pos-1,g,e.pos,g,new Ye(v,1,0),s.length,!0)),E=b.doc.resolve(g+2*s.length);E.nodeAfter&&E.nodeAfter.type==o.type&&bh(b.doc,E.pos)&&b.join(E.pos),n(b.scrollIntoView())}return!0}let f=i.type.spec.isolating||r>0&&l?null:Ct.findFrom(e,1),h=f&&f.$from.blockRange(f.$to),p=h&&Tm(h);if(p!=null&&p>=e.depth)return n&&n(t.tr.lift(h,p).scrollIntoView()),!0;if(u&&rm(i,"start",!0)&&rm(o,"end")){let g=o,v=[];for(;v.push(g),!g.isTextblock;)g=g.lastChild;let b=i,E=1;for(;!b.isTextblock;b=b.firstChild)E++;if(g.canReplace(g.childCount,g.childCount,b.content)){if(n){let T=Le.empty;for(let D=v.length-1;D>=0;D--)T=Le.from(v[D].copy(T));let P=t.tr.step(new Yr(e.pos-v.length,e.pos+i.nodeSize,e.pos+E,e.pos+i.nodeSize-E,new Ye(T,v.length,0),0,!0));n(P.scrollIntoView())}return!0}}return!1}function n$(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return o.node(i).isTextblock?(n&&n(e.tr.setSelection(at.create(e.doc,t<0?o.start(i):o.end(i)))),!0):!1}}const Xue=n$(-1),Que=n$(1);function Zue(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=s&&eB(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function L5(t,e=null){return function(n,r){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(s,a,(l,u)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let f=n.doc.resolve(u),h=f.index();o=f.parent.canReplaceWith(h,h+1,t)}})}if(!o)return!1;if(r){let i=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];i.setBlockType(a,l,t,e)}r(i.scrollIntoView())}return!0}}function QR(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}QR(KR,GB,WB);QR(KR,XB,QB);QR(ZB,JB,e$,Kue);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Jue(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i);if(!s)return!1;let a=r?n.tr:null;return ede(a,s,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function ede(t,e,n,r=null){let o=!1,i=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=s.resolve(e.start-2);i=new K1(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new K1(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let a=eB(i,n,r,e);return a?(t&&tde(t,e,a,o,n),!0):!1}function tde(t,e,n,r,o){let i=Le.empty;for(let f=n.length-1;f>=0;f--)i=Le.from(n[f].type.create(n[f].attrs,i));t.step(new Yr(e.start-(r?2:0),e.end,e.start,e.end,new Ye(i,0,0),n.length,!0));let s=0;for(let f=0;f<n.length;f++)n[f].type==o&&(s=f+1);let a=n.length-s,l=e.start+n.length-(r?2:0),u=e.parent;for(let f=e.startIndex,h=e.endIndex,p=!0;f<h;f++,p=!1)!p&&$c(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=u.child(f).nodeSize;return t}function nde(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,s=>s.childCount>0&&s.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?rde(e,n,t,i):ode(e,n,i):!0:!1}}function rde(t,e,n,r){let o=t.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new Yr(i-1,s,i,s,new Ye(Le.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new K1(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const a=Tm(r);if(a==null)return!1;o.lift(r,a);let l=o.doc.resolve(o.mapping.map(i,-1)-1);return bh(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),e(o.scrollIntoView()),!0}function ode(t,e,n){let r=t.tr,o=n.parent;for(let g=n.end,v=n.endIndex-1,b=n.startIndex;v>b;v--)g-=o.child(v).nodeSize,r.delete(g-1,g+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,u=i.node(-1),f=i.index(-1);if(!u.canReplace(f+(a?0:1),f+1,s.content.append(l?Le.empty:Le.from(o))))return!1;let h=i.pos,p=h+s.nodeSize;return r.step(new Yr(h-(a?1:0),p+(l?1:0),h+1,p-1,new Ye((a?Le.empty:Le.from(o.copy(Le.empty))).append(l?Le.empty:Le.from(o.copy(Le.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function ide(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,u=>u.childCount>0&&u.firstChild.type==t);if(!i)return!1;let s=i.startIndex;if(s==0)return!1;let a=i.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let u=l.lastChild&&l.lastChild.type==a.type,f=Le.from(u?t.create():null),h=new Ye(Le.from(t.create(null,Le.from(a.type.create(null,f)))),u?3:1,0),p=i.start,g=i.end;n(e.tr.step(new Yr(p-(u?3:1),g,p,g,h,1,!0)).scrollIntoView())}return!0}}function sS(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}class aS{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...f)=>{const h=l(...f)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(i),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a=[],l=!!e,u=e||i.tr,f=()=>(!l&&n&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),a.every(p=>p===!0)),h={...Object.fromEntries(Object.entries(r).map(([p,g])=>[p,(...b)=>{const E=this.buildProps(u,n),T=g(...b)(E);return a.push(T),h}])),run:f};return h}createCan(e){const{rawCommands:n,state:r}=this,o=!1,i=e||r.tr,s=this.buildProps(i,o);return{...Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...f)=>u(...f)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a={tr:e,editor:o,view:s,state:sS({state:i,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,u])=>[l,(...f)=>u(...f)(a)]))}};return a}}class sde{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}once(e,n){const r=(...o)=>{this.off(e,r),n.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function dt(t,e,n){return t.config[e]===void 0&&t.parent?dt(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?dt(t.parent,e,n):null}):t.config[e]}function lS(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function r$(t){const e=[],{nodeExtensions:n,markExtensions:r}=lS(t),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:o},l=dt(s,"addGlobalAttributes",a);if(!l)return;l().forEach(f=>{f.types.forEach(h=>{Object.entries(f.attributes).forEach(([p,g])=>{e.push({type:h,name:p,attribute:{...i,...g}})})})})}),o.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=dt(s,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([f,h])=>{const p={...i,...h};typeof p?.default=="function"&&(p.default=p.default()),p?.isRequired&&p?.default===void 0&&delete p.default,e.push({type:s.name,name:f,attribute:p})})}),e}function Mo(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Rs(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,i])=>{if(!r[o]){r[o]=i;return}if(o==="class"){const a=i?String(i).split(" "):[],l=r[o]?r[o].split(" "):[],u=a.filter(f=>!l.includes(f));r[o]=[...l,...u].join(" ")}else if(o==="style"){const a=i?i.split(";").map(f=>f.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(f=>f.trim()).filter(Boolean):[],u=new Map;l.forEach(f=>{const[h,p]=f.split(":").map(g=>g.trim());u.set(h,p)}),a.forEach(f=>{const[h,p]=f.split(":").map(g=>g.trim());u.set(h,p)}),r[o]=Array.from(u.entries()).map(([f,h])=>`${f}: ${h}`).join("; ")}else r[o]=i}),r},{})}function tw(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Rs(n,r),{})}function o$(t){return typeof t=="function"}function pn(t,e=void 0,...n){return o$(t)?e?t.bind(e)(...n):t(...n):t}function ade(t={}){return Object.keys(t).length===0&&t.constructor===Object}function lde(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function V5(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((i,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):lde(n.getAttribute(s.name));return a==null?i:{...i,[s.name]:a}},{});return{...r,...o}}}}function j5(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&ade(n)?!1:n!=null))}function i$(t,e){var n;const r=r$(t),{nodeExtensions:o,markExtensions:i}=lS(t),s=(n=o.find(u=>dt(u,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(u=>{const f=r.filter(T=>T.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:e},p=t.reduce((T,P)=>{const D=dt(P,"extendNodeSchema",h);return{...T,...D?D(u):{}}},{}),g=j5({...p,content:pn(dt(u,"content",h)),marks:pn(dt(u,"marks",h)),group:pn(dt(u,"group",h)),inline:pn(dt(u,"inline",h)),atom:pn(dt(u,"atom",h)),selectable:pn(dt(u,"selectable",h)),draggable:pn(dt(u,"draggable",h)),code:pn(dt(u,"code",h)),whitespace:pn(dt(u,"whitespace",h)),linebreakReplacement:pn(dt(u,"linebreakReplacement",h)),defining:pn(dt(u,"defining",h)),isolating:pn(dt(u,"isolating",h)),attrs:Object.fromEntries(f.map(T=>{var P;return[T.name,{default:(P=T?.attribute)===null||P===void 0?void 0:P.default}]}))}),v=pn(dt(u,"parseHTML",h));v&&(g.parseDOM=v.map(T=>V5(T,f)));const b=dt(u,"renderHTML",h);b&&(g.toDOM=T=>b({node:T,HTMLAttributes:tw(T,f)}));const E=dt(u,"renderText",h);return E&&(g.toText=E),[u.name,g]})),l=Object.fromEntries(i.map(u=>{const f=r.filter(E=>E.type===u.name),h={name:u.name,options:u.options,storage:u.storage,editor:e},p=t.reduce((E,T)=>{const P=dt(T,"extendMarkSchema",h);return{...E,...P?P(u):{}}},{}),g=j5({...p,inclusive:pn(dt(u,"inclusive",h)),excludes:pn(dt(u,"excludes",h)),group:pn(dt(u,"group",h)),spanning:pn(dt(u,"spanning",h)),code:pn(dt(u,"code",h)),attrs:Object.fromEntries(f.map(E=>{var T;return[E.name,{default:(T=E?.attribute)===null||T===void 0?void 0:T.default}]}))}),v=pn(dt(u,"parseHTML",h));v&&(g.parseDOM=v.map(E=>V5(E,f)));const b=dt(u,"renderHTML",h);return b&&(g.toDOM=E=>b({mark:E,HTMLAttributes:tw(E,f)})),[u.name,g]}));return new G7({topNode:s,nodes:a,marks:l})}function B_(t,e){return e.nodes[t]||e.marks[t]||null}function B5(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function ZR(t,e){const n=tu.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const cde=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,i,s,a)=>{var l,u;const f=((u=(l=o.type.spec).toText)===null||u===void 0?void 0:u.call(l,{node:o,pos:i,parent:s,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?f:f.slice(0,Math.max(0,r-i))}),n};function JR(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Rd{constructor(e){this.find=e.find,this.handler=e.handler}}const ude=(t,e)=>{if(JR(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function wb(t){var e;const{editor:n,from:r,to:o,text:i,rules:s,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const u=l.state.doc.resolve(r);if(u.parent.type.spec.code||!((e=u.nodeBefore||u.nodeAfter)===null||e===void 0)&&e.marks.find(p=>p.type.spec.code))return!1;let f=!1;const h=cde(u)+i;return s.forEach(p=>{if(f)return;const g=ude(h,p.find);if(!g)return;const v=l.state.tr,b=sS({state:l.state,transaction:v}),E={from:r-(g[0].length-i.length),to:o},{commands:T,chain:P,can:D}=new aS({editor:n,state:b});p.handler({state:b,range:E,match:g,commands:T,chain:P,can:D})===null||!v.steps.length||(v.setMeta(a,{transform:v,from:r,to:o,text:i}),l.dispatch(v),f=!0)}),f}function dde(t){const{editor:e,rules:n}=t,r=new nn({state:{init(){return null},apply(o,i,s){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:f}=l;typeof f=="string"?f=f:f=ZR(Le.from(f),s.schema);const{from:h}=l,p=h+f.length;wb({editor:e,from:h,to:p,text:f,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:i}},props:{handleTextInput(o,i,s,a){return wb({editor:e,from:i,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:i}=o.state.selection;i&&wb({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,i){if(i.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?wb({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function fde(t){return Object.prototype.toString.call(t).slice(8,-1)}function Cb(t){return fde(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function cS(t,e){const n={...t};return Cb(t)&&Cb(e)&&Object.keys(e).forEach(r=>{Cb(e[r])&&Cb(t[r])?n[r]=cS(t[r],e[r]):n[r]=e[r]}),n}class Zo{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=pn(dt(this,"addOptions",{name:this.name}))),this.storage=pn(dt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Zo(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>cS(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Zo(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=pn(dt(n,"addOptions",{name:n.name})),n.storage=pn(dt(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!!!s.find(u=>u?.type.name===n.name))return!1;const l=s.find(u=>u?.type.name===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function hde(t){return typeof t=="number"}class pde{constructor(e){this.find=e.find,this.handler=e.handler}}const mde=(t,e,n)=>{if(JR(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const i=[o.text];return i.index=o.index,i.input=t,i.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(o.replaceWith)),i}):[]};function gde(t){const{editor:e,state:n,from:r,to:o,rule:i,pasteEvent:s,dropEvent:a}=t,{commands:l,chain:u,can:f}=new aS({editor:e,state:n}),h=[];return n.doc.nodesBetween(r,o,(g,v)=>{if(!g.isTextblock||g.type.spec.code)return;const b=Math.max(r,v),E=Math.min(o,v+g.content.size),T=g.textBetween(b-v,E-v,void 0,"");mde(T,i.find,s).forEach(D=>{if(D.index===void 0)return;const z=b+D.index+1,V=z+D[0].length,$={from:n.tr.mapping.map(z),to:n.tr.mapping.map(V)},O=i.handler({state:n,range:$,match:D,commands:l,chain:u,can:f,pasteEvent:s,dropEvent:a});h.push(O)})}),h.every(g=>g!==null)}let Sb=null;const yde=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function vde(t){const{editor:e,rules:n}=t;let r=null,o=!1,i=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:f,from:h,to:p,rule:g,pasteEvt:v})=>{const b=f.tr,E=sS({state:f,transaction:b});if(!(!gde({editor:e,state:E,from:Math.max(h-1,0),to:p.b-1,rule:g,pasteEvent:v,dropEvent:a})||!b.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,b}};return n.map(f=>new nn({view(h){const p=v=>{var b;r=!((b=h.dom.parentElement)===null||b===void 0)&&b.contains(v.target)?h.dom.parentElement:null,r&&(Sb=e)},g=()=>{Sb&&(Sb=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",g),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",g)}}},props:{handleDOMEvents:{drop:(h,p)=>{if(i=r===h.dom.parentElement,a=p,!i){const g=Sb;g?.isEditable&&setTimeout(()=>{const v=g.state.selection;v&&g.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(h,p)=>{var g;const v=(g=p.clipboardData)===null||g===void 0?void 0:g.getData("text/html");return s=p,o=!!v?.includes("data-pm-slice"),!1}}},appendTransaction:(h,p,g)=>{const v=h[0],b=v.getMeta("uiEvent")==="paste"&&!o,E=v.getMeta("uiEvent")==="drop"&&!i,T=v.getMeta("applyPasteRules"),P=!!T;if(!b&&!E&&!P)return;if(P){let{text:V}=T;typeof V=="string"?V=V:V=ZR(Le.from(V),g.schema);const{from:$}=T,O=$+V.length,R=yde(V);return l({rule:f,state:g,from:$,to:{b:O},pasteEvt:R})}const D=p.doc.content.findDiffStart(g.doc.content),z=p.doc.content.findDiffEnd(g.doc.content);if(!(!hde(D)||!z||D===z.b))return l({rule:f,state:g,from:D,to:z,pasteEvt:s})}}))}function bde(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Of{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Of.resolve(e),this.schema=i$(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Of.sort(Of.flatten(e)),r=bde(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=dt(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((r,o)=>{const i=dt(r,"priority")||100,s=dt(o,"priority")||100;return i>s?-1:i<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:B_(n.name,this.schema)},o=dt(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=Of.sort([...this.extensions].reverse()),r=[],o=[],i=n.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:e,type:B_(s.name,this.schema)},l=[],u=dt(s,"addKeyboardShortcuts",a);let f={};if(s.type==="mark"&&dt(s,"exitable",a)&&(f.ArrowRight=()=>Zo.handleExit({editor:e,mark:s})),u){const b=Object.fromEntries(Object.entries(u()).map(([E,T])=>[E,()=>T({editor:e})]));f={...f,...b}}const h=Bue(f);l.push(h);const p=dt(s,"addInputRules",a);B5(s,e.options.enableInputRules)&&p&&r.push(...p());const g=dt(s,"addPasteRules",a);B5(s,e.options.enablePasteRules)&&g&&o.push(...g());const v=dt(s,"addProseMirrorPlugins",a);if(v){const b=v();l.push(...b)}return l}).flat();return[dde({editor:e,rules:r}),...vde({editor:e,rules:o}),...i]}get attributes(){return r$(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=lS(this.extensions);return Object.fromEntries(n.filter(r=>!!dt(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:Mo(r.name,this.schema)},s=dt(r,"addNodeView",i);if(!s)return[];const a=(l,u,f,h,p)=>{const g=tw(l,o);return s()({node:l,view:u,getPos:f,decorations:h,innerDecorations:p,editor:e,extension:r,HTMLAttributes:g})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:B_(e.name,this.schema)};e.type==="mark"&&(!((n=pn(dt(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const o=dt(e,"onBeforeCreate",r),i=dt(e,"onCreate",r),s=dt(e,"onUpdate",r),a=dt(e,"onSelectionUpdate",r),l=dt(e,"onTransaction",r),u=dt(e,"onFocus",r),f=dt(e,"onBlur",r),h=dt(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),i&&this.editor.on("create",i),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),f&&this.editor.on("blur",f),h&&this.editor.on("destroy",h)})}}class lr{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=pn(dt(this,"addOptions",{name:this.name}))),this.storage=pn(dt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new lr(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>cS(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new lr({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=pn(dt(n,"addOptions",{name:n.name})),n.storage=pn(dt(n,"addStorage",{name:n.name,options:n.options})),n}}function s$(t,e,n){const{from:r,to:o}=e,{blockSeparator:i=`

`,textSerializers:s={}}=n||{};let a="";return t.nodesBetween(r,o,(l,u,f,h)=>{var p;l.isBlock&&u>r&&(a+=i);const g=s?.[l.type.name];if(g)return f&&(a+=g({node:l,pos:u,parent:f,index:h,range:e})),!1;l.isText&&(a+=(p=l?.text)===null||p===void 0?void 0:p.slice(Math.max(r,u)-u,o-u))}),a}function a$(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const l$=lr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new nn({key:new Nn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:i}=o,s=Math.min(...i.map(f=>f.$from.pos)),a=Math.max(...i.map(f=>f.$to.pos)),l=a$(n);return s$(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),wde=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),Cde=(t=!1)=>({commands:e})=>e.setContent("",t),Sde=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:i,$to:s})=>{t.doc.nodesBetween(i.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:f}=e,h=u.resolve(f.map(l)),p=u.resolve(f.map(l+a.nodeSize)),g=h.blockRange(p);if(!g)return;const v=Tm(g);if(a.type.isTextblock){const{defaultType:b}=h.parent.contentMatchAt(h.index());e.setNodeMarkup(g.start,b)}(v||v===0)&&e.lift(g,v)})}),!0},xde=t=>e=>t(e),Ede=()=>({state:t,dispatch:e})=>JB(t,e),_de=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,i=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,i.content),r.setSelection(new at(r.doc.resolve(Math.max(s-1,0)))),!0},kde=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(e){const a=o.before(i),l=o.after(i);t.delete(a,l).scrollIntoView()}return!0}return!1},Tde=t=>({tr:e,state:n,dispatch:r})=>{const o=Mo(t,n.schema),i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o){if(r){const l=i.before(s),u=i.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1},Ade=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},Rde=()=>({state:t,dispatch:e})=>KR(t,e),Mde=()=>({commands:t})=>t.keyboardShortcut("Enter"),Ide=()=>({state:t,dispatch:e})=>que(t,e);function nw(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:JR(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function c$(t,e,n={}){return t.find(r=>r.type===e&&nw(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function $5(t,e,n={}){return!!c$(t,e,n)}function Oy(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(f=>f.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(f=>f.type===e)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!c$([...o.node.marks],e,n)))return;let s=o.index,a=t.start()+o.offset,l=s+1,u=a+o.node.nodeSize;for(;s>0&&$5([...t.parent.child(s-1).marks],e,n);)s-=1,a-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&$5([...t.parent.child(l).marks],e,n);)u+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:u}}function Hd(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const Nde=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const i=Hd(t,r.schema),{doc:s,selection:a}=n,{$from:l,from:u,to:f}=a;if(o){const h=Oy(l,i,e);if(h&&h.from<=u&&h.to>=f){const p=at.create(s,h.from,h.to);n.setSelection(p)}}return!0},Dde=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function uS(t){return t instanceof at}function Pc(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function u$(t,e=null){if(!e)return null;const n=Ct.atStart(t),r=Ct.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,i=r.to;return e==="all"?at.create(t,Pc(0,o,i),Pc(t.content.size,o,i)):at.create(t,Pc(e,o,i),Pc(e,o,i))}function d$(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function dS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Ode=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:i})=>{e={scrollIntoView:!0,...e};const s=()=>{(dS()||d$())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!uS(n.state.selection))return s(),!0;const a=u$(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return i&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},Pde=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),Lde=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),f$=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&f$(r)}return t};function xb(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return f$(n)}function Py(t,e,n){if(t instanceof jc||t instanceof Le)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Le.fromArray(t.map(a=>e.nodeFromJSON(a)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),Py("",e,n)}if(o){if(n.errorOnInvalidContent){let s=!1,a="";const l=new G7({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(s=!0,a=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?Bc.fromSchema(l).parseSlice(xb(t),n.parseOptions):Bc.fromSchema(l).parse(xb(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=Bc.fromSchema(e);return n.slice?i.parseSlice(xb(t),n.parseOptions).content:i.parse(xb(t),n.parseOptions)}return Py("",e,n)}function h$(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof ro||o instanceof Yr))return;const i=t.mapping.maps[r];let s=0;i.forEach((a,l,u,f)=>{s===0&&(s=f)}),t.setSelection(Ct.near(t.doc.resolve(s),n))}const Vde=t=>!("type"in t),jde=(t,e,n)=>({tr:r,dispatch:o,editor:i})=>{var s;if(o){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=E=>{i.emit("contentError",{editor:i,error:E,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{Py(e,i.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(E){l(E)}try{a=Py(e,i.schema,{parseOptions:u,errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:i.options.enableContentCheck})}catch(E){return l(E),!1}let{from:f,to:h}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},p=!0,g=!0;if((Vde(a)?a:[a]).forEach(E=>{E.check(),p=p?E.isText&&E.marks.length===0:!1,g=g?E.isBlock:!1}),f===h&&g){const{parent:E}=r.doc.resolve(f);E.isTextblock&&!E.type.spec.code&&!E.childCount&&(f-=1,h+=1)}let b;if(p){if(Array.isArray(e))b=e.map(E=>E.text||"").join("");else if(e instanceof Le){let E="";e.forEach(T=>{T.text&&(E+=T.text)}),b=E}else typeof e=="object"&&e&&e.text?b=e.text:b=e;r.insertText(b,f,h)}else b=a,r.replaceWith(f,h,b);n.updateSelection&&h$(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:f,text:b}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:f,text:b})}return!0},Bde=()=>({state:t,dispatch:e})=>Fue(t,e),$de=()=>({state:t,dispatch:e})=>zue(t,e),Hde=()=>({state:t,dispatch:e})=>GB(t,e),Fde=()=>({state:t,dispatch:e})=>XB(t,e),zde=()=>({state:t,dispatch:e,tr:n})=>{try{const r=eS(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Ude=()=>({state:t,dispatch:e,tr:n})=>{try{const r=eS(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},qde=()=>({state:t,dispatch:e})=>$ue(t,e),Gde=()=>({state:t,dispatch:e})=>Hue(t,e);function p$(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Kde(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))dS()||p$()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}const Wde=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const i=Kde(t).split(/-(?!$)/),s=i.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,a))});return l?.steps.forEach(u=>{const f=u.map(r.mapping);f&&o&&r.maybeStep(f)}),!0};function Ly(t,e,n={}){const{from:r,to:o,empty:i}=t.selection,s=e?Mo(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(h,p)=>{if(h.isText)return;const g=Math.max(r,p),v=Math.min(o,p+h.nodeSize);a.push({node:h,from:g,to:v})});const l=o-r,u=a.filter(h=>s?s.name===h.node.type.name:!0).filter(h=>nw(h.node.attrs,n,{strict:!1}));return i?!!u.length:u.reduce((h,p)=>h+p.to-p.from,0)>=l}const Yde=(t,e={})=>({state:n,dispatch:r})=>{const o=Mo(t,n.schema);return Ly(n,o,e)?Uue(n,r):!1},Xde=()=>({state:t,dispatch:e})=>e$(t,e),Qde=t=>({state:e,dispatch:n})=>{const r=Mo(t,e.schema);return nde(r)(e,n)},Zde=()=>({state:t,dispatch:e})=>ZB(t,e);function fS(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function H5(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const Jde=(t,e)=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=fS(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(i=Mo(t,r.schema)),a==="mark"&&(s=Hd(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(u,f)=>{i&&i===u.type&&n.setNodeMarkup(f,void 0,H5(u.attrs,e)),s&&u.marks.length&&u.marks.forEach(h=>{s===h.type&&n.addMark(f,f+u.nodeSize,s.create(H5(h.attrs,e)))})})}),!0):!1},efe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),tfe=()=>({tr:t,dispatch:e})=>{if(e){const n=new rs(t.doc);t.setSelection(n)}return!0},nfe=()=>({state:t,dispatch:e})=>WB(t,e),rfe=()=>({state:t,dispatch:e})=>QB(t,e),ofe=()=>({state:t,dispatch:e})=>Wue(t,e),ife=()=>({state:t,dispatch:e})=>Que(t,e),sfe=()=>({state:t,dispatch:e})=>Xue(t,e);function rw(t,e,n={},r={}){return Py(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const afe=(t,e=!1,n={},r={})=>({editor:o,tr:i,dispatch:s,commands:a})=>{var l,u;const{doc:f}=i;if(n.preserveWhitespace!=="full"){const h=rw(t,o.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return s&&i.replaceWith(0,f.content.size,h).setMeta("preventUpdate",!e),!0}return s&&i.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:f.content.size},t,{parseOptions:n,errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:o.options.enableContentCheck})};function m$(t,e){const n=Hd(e,t.schema),{from:r,to:o,empty:i}=t.selection,s=[];i?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function eM(t,e){const n=new OR(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function lfe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function F5(t,e){const n=[];return t.descendants((r,o)=>{e(r)&&n.push({node:r,pos:o})}),n}function g$(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(o,i)=>{n(o)&&r.push({node:o,pos:i})}),r}function cfe(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function hS(t){return e=>cfe(e.$from,t)}function ufe(t,e){const n=Of.resolve(t);return i$(n,e)}function dfe(t,e){const n={from:0,to:t.content.size};return s$(t,n,e)}function ffe(t,e){const n=Mo(e,t.schema),{from:r,to:o}=t.selection,i=[];t.doc.nodesBetween(r,o,a=>{i.push(a)});const s=i.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function y$(t,e){const n=fS(typeof e=="string"?e:e.name,t.schema);return n==="node"?ffe(t,e):n==="mark"?m$(t,e):{}}function hfe(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function pfe(t){const e=hfe(t);return e.length===1?e:e.filter((n,r)=>!e.filter((i,s)=>s!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function v$(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,i)=>{const s=[];if(o.ranges.length)o.forEach((a,l)=>{s.push({from:a,to:l})});else{const{from:a,to:l}=n[i];if(a===void 0||l===void 0)return;s.push({from:a,to:l})}s.forEach(({from:a,to:l})=>{const u=e.slice(i).map(a,-1),f=e.slice(i).map(l),h=e.invert().map(u,-1),p=e.invert().map(f);r.push({oldRange:{from:h,to:p},newRange:{from:u,to:f}})})}),pfe(r)}function tM(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const i=n.resolve(t),s=Oy(i,o.type);s&&r.push({mark:o,...s})}):n.nodesBetween(t,e,(o,i)=>{!o||o?.nodeSize===void 0||r.push(...o.marks.map(s=>({from:i,to:i+o.nodeSize,mark:s})))}),r}function o1(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(i=>i.type===e&&i.name===r);return o?o.attribute.keepOnSplit:!1}))}function QT(t,e,n={}){const{empty:r,ranges:o}=t.selection,i=e?Hd(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(h=>i?i.name===h.type.name:!0).find(h=>nw(h.attrs,n,{strict:!1}));let s=0;const a=[];if(o.forEach(({$from:h,$to:p})=>{const g=h.pos,v=p.pos;t.doc.nodesBetween(g,v,(b,E)=>{if(!b.isText&&!b.marks.length)return;const T=Math.max(g,E),P=Math.min(v,E+b.nodeSize),D=P-T;s+=D,a.push(...b.marks.map(z=>({mark:z,from:T,to:P})))})}),s===0)return!1;const l=a.filter(h=>i?i.name===h.mark.type.name:!0).filter(h=>nw(h.mark.attrs,n,{strict:!1})).reduce((h,p)=>h+p.to-p.from,0),u=a.filter(h=>i?h.mark.type!==i&&h.mark.type.excludes(i):!0).reduce((h,p)=>h+p.to-p.from,0);return(l>0?l+u:l)>=s}function mfe(t,e,n={}){if(!e)return Ly(t,null,n)||QT(t,null,n);const r=fS(e,t.schema);return r==="node"?Ly(t,e,n):r==="mark"?QT(t,e,n):!1}function z5(t,e){const{nodeExtensions:n}=lS(e),r=n.find(s=>s.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},i=pn(dt(r,"group",o));return typeof i!="string"?!1:i.split(" ").includes("list")}function nM(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(i=>{o!==!1&&(nM(i,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function ZT(t){return t instanceof ht}function ow(t,e,n){const o=t.state.doc.content.size,i=Pc(e,0,o),s=Pc(n,0,o),a=t.coordsAtPos(i),l=t.coordsAtPos(s,-1),u=Math.min(a.top,l.top),f=Math.max(a.bottom,l.bottom),h=Math.min(a.left,l.left),p=Math.max(a.right,l.right),g=p-h,v=f-u,T={top:u,bottom:f,left:h,right:p,width:g,height:v,x:h,y:u};return{...T,toJSON:()=>T}}function gfe(t,e,n){var r;const{selection:o}=e;let i=null;if(uS(o)&&(i=o.$cursor),i){const a=(r=t.storedMarks)!==null&&r!==void 0?r:i.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:s}=o;return s.some(({$from:a,$to:l})=>{let u=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(f,h,p)=>{if(u)return!1;if(f.isInline){const g=!p||p.type.allowsMarkType(n),v=!!n.isInSet(f.marks)||!f.marks.some(b=>b.type.excludes(n));u=g&&v}return!u}),u})}const yfe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:s,ranges:a}=i,l=Hd(t,r.schema);if(o)if(s){const u=m$(r,l);n.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{const f=u.$from.pos,h=u.$to.pos;r.doc.nodesBetween(f,h,(p,g)=>{const v=Math.max(g,f),b=Math.min(g+p.nodeSize,h);p.marks.find(T=>T.type===l)?p.marks.forEach(T=>{l===T.type&&n.addMark(v,b,l.create({...T.attrs,...e}))}):n.addMark(v,b,l.create(e))})});return gfe(r,n,l)},vfe=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),bfe=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const i=Mo(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),i.isTextblock?o().command(({commands:a})=>L5(i,{...s,...e})(n)?!0:a.clearNodes()).command(({state:a})=>L5(i,{...s,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},wfe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=Pc(t,0,r.content.size),i=ht.create(r,o);e.setSelection(i)}return!0},Cfe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:i}=typeof t=="number"?{from:t,to:t}:t,s=at.atStart(r).from,a=at.atEnd(r).to,l=Pc(o,s,a),u=Pc(i,s,a),f=at.create(r,l,u);e.setSelection(f)}return!0},Sfe=t=>({state:e,dispatch:n})=>{const r=Mo(t,e.schema);return ide(r)(e,n)};function U5(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e?.includes(o.type.name));t.tr.ensureMarks(r)}}const xfe=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:i,doc:s}=e,{$from:a,$to:l}=i,u=o.extensionManager.attributes,f=o1(u,a.node().type.name,a.node().attrs);if(i instanceof ht&&i.node.isBlock)return!a.parentOffset||!$c(s,a.pos)?!1:(r&&(t&&U5(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const h=l.parentOffset===l.parent.content.size,p=a.depth===0?void 0:lfe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let g=h&&p?[{type:p,attrs:f}]:void 0,v=$c(e.doc,e.mapping.map(a.pos),1,g);if(!g&&!v&&$c(e.doc,e.mapping.map(a.pos),1,p?[{type:p}]:void 0)&&(v=!0,g=p?[{type:p,attrs:f}]:void 0),r){if(v&&(i instanceof at&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,g),p&&!h&&!a.parentOffset&&a.parent.type!==p)){const b=e.mapping.map(a.before()),E=e.doc.resolve(b);a.node(-1).canReplaceWith(E.index(),E.index()+1,p)&&e.setNodeMarkup(e.mapping.map(a.before()),p)}t&&U5(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return v},Efe=(t,e={})=>({tr:n,state:r,dispatch:o,editor:i})=>{var s;const a=Mo(t,r.schema),{$from:l,$to:u}=r.selection,f=r.selection.node;if(f&&f.isBlock||l.depth<2||!l.sameParent(u))return!1;const h=l.node(-1);if(h.type!==a)return!1;const p=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let T=Le.empty;const P=l.index(-1)?1:l.index(-2)?2:3;for(let R=l.depth-P;R>=l.depth-3;R-=1)T=Le.from(l.node(R).copy(T));const D=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,z={...o1(p,l.node().type.name,l.node().attrs),...e},V=((s=a.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(z))||void 0;T=T.append(Le.from(a.createAndFill(null,V)||void 0));const $=l.before(l.depth-(P-1));n.replace($,l.after(-D),new Ye(T,4-P,0));let O=-1;n.doc.nodesBetween($,n.doc.content.size,(R,M)=>{if(O>-1)return!1;R.isTextblock&&R.content.size===0&&(O=M+1)}),O>-1&&n.setSelection(at.near(n.doc.resolve(O))),n.scrollIntoView()}return!0}const g=u.pos===l.end()?h.contentMatchAt(0).defaultType:null,v={...o1(p,h.type.name,h.attrs),...e},b={...o1(p,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,u.pos);const E=g?[{type:a,attrs:v},{type:g,attrs:b}]:[{type:a,attrs:v}];if(!$c(n.doc,l.pos,2))return!1;if(o){const{selection:T,storedMarks:P}=r,{splittableMarks:D}=i.extensionManager,z=P||T.$to.parentOffset&&T.$from.marks();if(n.split(l.pos,2,E).scrollIntoView(),!z||!o)return!0;const V=z.filter($=>D.includes($.type.name));n.ensureMarks(V)}return!0},$_=(t,e)=>{const n=hS(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===o?.type&&bh(t.doc,n.pos)&&t.join(n.pos),!0},H_=(t,e)=>{const n=hS(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===o?.type&&bh(t.doc,r)&&t.join(r),!0},_fe=(t,e,n,r={})=>({editor:o,tr:i,state:s,dispatch:a,chain:l,commands:u,can:f})=>{const{extensions:h,splittableMarks:p}=o.extensionManager,g=Mo(t,s.schema),v=Mo(e,s.schema),{selection:b,storedMarks:E}=s,{$from:T,$to:P}=b,D=T.blockRange(P),z=E||b.$to.parentOffset&&b.$from.marks();if(!D)return!1;const V=hS($=>z5($.type.name,h))(b);if(D.depth>=1&&V&&D.depth-V.depth<=1){if(V.node.type===g)return u.liftListItem(v);if(z5(V.node.type.name,h)&&g.validContent(V.node.content)&&a)return l().command(()=>(i.setNodeMarkup(V.pos,g),!0)).command(()=>$_(i,g)).command(()=>H_(i,g)).run()}return!n||!z||!a?l().command(()=>f().wrapInList(g,r)?!0:u.clearNodes()).wrapInList(g,r).command(()=>$_(i,g)).command(()=>H_(i,g)).run():l().command(()=>{const $=f().wrapInList(g,r),O=z.filter(R=>p.includes(R.type.name));return i.ensureMarks(O),$?!0:u.clearNodes()}).wrapInList(g,r).command(()=>$_(i,g)).command(()=>H_(i,g)).run()},kfe=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=n,s=Hd(t,r.schema);return QT(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,e)},Tfe=(t,e,n={})=>({state:r,commands:o})=>{const i=Mo(t,r.schema),s=Mo(e,r.schema),a=Ly(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(s,l):o.setNode(i,{...l,...n})},Afe=(t,e={})=>({state:n,commands:r})=>{const o=Mo(t,n.schema);return Ly(n,o,e)?r.lift(o):r.wrapIn(o,e)},Rfe=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let i;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){const s=t.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else s.delete(i.from,i.to)}return!0}}return!1},Mfe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},Ife=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=Hd(t,r.schema),{$from:u,empty:f,ranges:h}=a;if(!o)return!0;if(f&&s){let{from:p,to:g}=a;const v=(i=u.marks().find(E=>E.type===l))===null||i===void 0?void 0:i.attrs,b=Oy(u,l,v);b&&(p=b.from,g=b.to),n.removeMark(p,g,l)}else h.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,l)});return n.removeStoredMark(l),!0},Nfe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=fS(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(i=Mo(t,r.schema)),a==="mark"&&(s=Hd(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const u=l.$from.pos,f=l.$to.pos;let h,p,g,v;n.selection.empty?r.doc.nodesBetween(u,f,(b,E)=>{i&&i===b.type&&(g=Math.max(E,u),v=Math.min(E+b.nodeSize,f),h=E,p=b)}):r.doc.nodesBetween(u,f,(b,E)=>{E<u&&i&&i===b.type&&(g=Math.max(E,u),v=Math.min(E+b.nodeSize,f),h=E,p=b),E>=u&&E<=f&&(i&&i===b.type&&n.setNodeMarkup(E,void 0,{...b.attrs,...e}),s&&b.marks.length&&b.marks.forEach(T=>{if(s===T.type){const P=Math.max(E,u),D=Math.min(E+b.nodeSize,f);n.addMark(P,D,s.create({...T.attrs,...e}))}}))}),p&&(h!==void 0&&n.setNodeMarkup(h,void 0,{...p.attrs,...e}),s&&p.marks.length&&p.marks.forEach(b=>{s===b.type&&n.addMark(g,v,s.create({...b.attrs,...e}))}))}),!0):!1},Dfe=(t,e={})=>({state:n,dispatch:r})=>{const o=Mo(t,n.schema);return Zue(o,e)(n,r)},Ofe=(t,e={})=>({state:n,dispatch:r})=>{const o=Mo(t,n.schema);return Jue(o,e)(n,r)};var Pfe=Object.freeze({__proto__:null,blur:wde,clearContent:Cde,clearNodes:Sde,command:xde,createParagraphNear:Ede,cut:_de,deleteCurrentNode:kde,deleteNode:Tde,deleteRange:Ade,deleteSelection:Rde,enter:Mde,exitCode:Ide,extendMarkRange:Nde,first:Dde,focus:Ode,forEach:Pde,insertContent:Lde,insertContentAt:jde,joinBackward:Hde,joinDown:$de,joinForward:Fde,joinItemBackward:zde,joinItemForward:Ude,joinTextblockBackward:qde,joinTextblockForward:Gde,joinUp:Bde,keyboardShortcut:Wde,lift:Yde,liftEmptyBlock:Xde,liftListItem:Qde,newlineInCode:Zde,resetAttributes:Jde,scrollIntoView:efe,selectAll:tfe,selectNodeBackward:nfe,selectNodeForward:rfe,selectParentNode:ofe,selectTextblockEnd:ife,selectTextblockStart:sfe,setContent:afe,setMark:yfe,setMeta:vfe,setNode:bfe,setNodeSelection:wfe,setTextSelection:Cfe,sinkListItem:Sfe,splitBlock:xfe,splitListItem:Efe,toggleList:_fe,toggleMark:kfe,toggleNode:Tfe,toggleWrap:Afe,undoInputRule:Rfe,unsetAllMarks:Mfe,unsetMark:Ife,updateAttributes:Nfe,wrapIn:Dfe,wrapInList:Ofe});const b$=lr.create({name:"commands",addCommands(){return{...Pfe}}}),w$=lr.create({name:"drop",addProseMirrorPlugins(){return[new nn({key:new Nn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),C$=lr.create({name:"editable",addProseMirrorPlugins(){return[new nn({key:new Nn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),S$=new Nn("focusEvents"),x$=lr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new nn({key:S$,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),E$=lr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:f,$anchor:h}=l,{pos:p,parent:g}=h,v=h.parent.isTextblock&&p>0?a.doc.resolve(p-1):h,b=v.parent.type.spec.isolating,E=h.pos-h.parentOffset,T=b&&v.parent.childCount===1?E===h.pos:Ct.atStart(u).from===p;return!f||!g.type.isTextblock||g.textContent.length||!T||T&&h.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return dS()||p$()?i:o},addProseMirrorPlugins(){return[new nn({key:new Nn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(b=>b.getMeta("composition")))return;const r=t.some(b=>b.docChanged)&&!e.doc.eq(n.doc),o=t.some(b=>b.getMeta("preventClearDocument"));if(!r||o)return;const{empty:i,from:s,to:a}=e.selection,l=Ct.atStart(e.doc).from,u=Ct.atEnd(e.doc).to;if(i||!(s===l&&a===u)||!nM(n.doc))return;const p=n.tr,g=sS({state:n,transaction:p}),{commands:v}=new aS({editor:this.editor,state:g});if(v.clearNodes(),!!p.steps.length)return p}})]}}),_$=lr.create({name:"paste",addProseMirrorPlugins(){return[new nn({key:new Nn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),k$=lr.create({name:"tabindex",addProseMirrorPlugins(){return[new nn({key:new Nn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Dg=Object.freeze({__proto__:null,ClipboardTextSerializer:l$,Commands:b$,Drop:w$,Editable:C$,FocusEvents:x$,Keymap:E$,Paste:_$,Tabindex:k$,focusEventsPluginKey:S$});class _f{get name(){return this.node.type.name}constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new _f(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new _f(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new _f(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,s=this.pos+r+(i?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(s);if(!o&&a.depth<=this.depth)return;const l=new _f(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),e.push(new _f(a,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const i=o.node.attrs,s=Object.keys(n);for(let a=0;a<s.length;a+=1){const l=s[a];if(i[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const i=Object.keys(n);return this.children.forEach(s=>{r&&o.length>0||(s.node.type.name===e&&i.every(l=>n[l]===s.node.attrs[l])&&o.push(s),!(r&&o.length>0)&&(o=o.concat(s.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const Lfe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function Vfe(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}class jfe extends sde{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=Vfe(Lfe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=o$(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(a=>!a.key.startsWith(s))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,n;const o=[...this.options.enableCoreExtensions?[C$,l$.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),b$,x$,E$,k$,w$,_$].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new Of(o,this)}createCommandManager(){this.commandManager=new aS({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=rw(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=rw(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=u$(n,this.options.autofocus);this.view=new qR(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:If.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),i=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return y$(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,o=typeof e=="string"?n:e;return mfe(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return ZR(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return dfe(this.state.doc,{blockSeparator:n,textSerializers:{...a$(this.schema),...r}})}get isEmpty(){return nM(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new _f(n,this)}get $doc(){return this.$pos(0)}}function om(t){return new Rd({find:t.find,handler:({state:e,range:n,match:r})=>{const o=pn(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:i}=e,s=r[r.length-1],a=r[0];if(s){const l=a.search(/\S/),u=n.from+a.indexOf(s),f=u+s.length;if(tM(n.from,n.to,e.doc).filter(g=>g.mark.type.excluded.find(b=>b===t.type&&b!==g.mark.type)).filter(g=>g.to>u).length)return null;f<n.to&&i.delete(f,n.to),u>n.from&&i.delete(n.from+l,u);const p=n.from+l+s.length;i.addMark(n.from+l,p,t.type.create(o||{})),i.removeStoredMark(t.type)}}})}let Kl=class JT{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=pn(dt(this,"addOptions",{name:this.name}))),this.storage=pn(dt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new JT(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>cS(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new JT(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=pn(dt(n,"addOptions",{name:n.name})),n.storage=pn(dt(n,"addStorage",{name:n.name,options:n.options})),n}};class Bfe{constructor(e,n,r){this.isDragging=!1,this.component=e,this.editor=n.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var n,r,o,i,s,a,l;const{view:u}=this.editor,f=e.target,h=f.nodeType===3?(n=f.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):f.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(f)||!h)return;let p=0,g=0;if(this.dom!==h){const P=this.dom.getBoundingClientRect(),D=h.getBoundingClientRect(),z=(o=e.offsetX)!==null&&o!==void 0?o:(i=e.nativeEvent)===null||i===void 0?void 0:i.offsetX,V=(s=e.offsetY)!==null&&s!==void 0?s:(a=e.nativeEvent)===null||a===void 0?void 0:a.offsetY;p=D.x-P.x+z,g=D.y-P.y+V}const v=this.dom.cloneNode(!0);(l=e.dataTransfer)===null||l===void 0||l.setDragImage(v,p,g);const b=this.getPos();if(typeof b!="number")return;const E=ht.create(u.state.doc,b),T=u.state.tr.setSelection(E);u.dispatch(T)}stopEvent(e){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const i=e.type.startsWith("drag"),s=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!s&&!i)return!0;const{isEditable:l}=this.editor,{isDragging:u}=this,f=!!this.node.type.spec.draggable,h=ht.isSelectable(this.node),p=e.type==="copy",g=e.type==="paste",v=e.type==="cut",b=e.type==="mousedown";if(!f&&h&&i&&e.target===this.dom&&e.preventDefault(),f&&i&&!u&&e.target===this.dom)return e.preventDefault(),!1;if(f&&l&&!u&&b){const E=r.closest("[data-drag-handle]");E&&(this.dom===E||this.dom.contains(E))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(u||s||p||g||v||b&&h)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(dS()||d$())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return typeof r!="number"?!1:(n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const n=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:n})}}function ih(t){return new pde({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const i=pn(t.getAttributes,void 0,r,o);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];let u=n.to;if(a){const f=l.search(/\S/),h=n.from+l.indexOf(a),p=h+a.length;if(tM(n.from,n.to,e.doc).filter(v=>v.mark.type.excluded.find(E=>E===t.type&&E!==v.mark.type)).filter(v=>v.to>h).length)return null;p<n.to&&s.delete(p,n.to),h>n.from&&s.delete(n.from+f,h),u=n.from+f+a.length,s.addMark(n.from+f,u,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}var Eb,$fe=new Uint8Array(16);function Hfe(){if(!Eb&&(Eb=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Eb))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Eb($fe)}const Ffe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function zfe(t){return typeof t=="string"&&Ffe.test(t)}var zo=[];for(var F_=0;F_<256;++F_)zo.push((F_+256).toString(16).substr(1));function Ufe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(zo[t[e+0]]+zo[t[e+1]]+zo[t[e+2]]+zo[t[e+3]]+"-"+zo[t[e+4]]+zo[t[e+5]]+"-"+zo[t[e+6]]+zo[t[e+7]]+"-"+zo[t[e+8]]+zo[t[e+9]]+"-"+zo[t[e+10]]+zo[t[e+11]]+zo[t[e+12]]+zo[t[e+13]]+zo[t[e+14]]+zo[t[e+15]]).toLowerCase();if(!zfe(n))throw TypeError("Stringified UUID is invalid");return n}function T$(t,e,n){t=t||{};var r=t.random||(t.rng||Hfe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Ufe(r)}var qfe=class A${constructor(e){this.cache=new Map(e)}get(e){return this.cache.get(e)}set(e,n,r){e<0||this.cache.set(e,[n,r])}replace(e,n,r,o){this.remove(e),this.set(n,r,o)}remove(e){this.cache.delete(e)}invalidate(e){const n=new A$(this.cache),r=e.mapping;return this.cache.forEach(([o,i],s)=>{if(s<0)return;const a=r.mapResult(s),l=e.doc.nodeAt(a.pos);if(a.deleted||!l?.eq(o))n.remove(s);else if(s!==a.pos){const u=i.map(f=>f.map(r,0,0)).filter(f=>f!=null);n.replace(s,a.pos,l,u)}}),n}};function Gfe({parser:t,nodeTypes:e=["code_block","codeBlock"],languageExtractor:n=r=>r.attrs.language}){const r=new Nn("prosemirror-highlight");return new nn({key:r,state:{init(o,i){const s=new qfe,[a,l]=q5(i.doc,t,e,n,s);return{cache:s,decorations:a,promises:l}},apply:(o,i)=>{const s=i.cache.invalidate(o),a=!!o.getMeta("prosemirror-highlight-refresh");if(!o.docChanged&&!a){const f=i.decorations.map(o.mapping,o.doc),h=i.promises;return{cache:s,decorations:f,promises:h}}const[l,u]=q5(o.doc,t,e,n,s);return{cache:s,decorations:l,promises:u}}},view:o=>{const i=new Set,s=()=>{if(i.size>0)return;const l=o.state.tr.setMeta("prosemirror-highlight-refresh",!0);o.dispatch(l)},a=()=>{var l;const u=r.getState(o.state);for(const f of(l=u?.promises)!=null?l:[])i.add(f),f.then(()=>{i.delete(f),s()}).catch(()=>{i.delete(f)})};return a(),{update:()=>{a()}}},props:{decorations(o){var i;return(i=this.getState(o))==null?void 0:i.decorations}}})}function q5(t,e,n,r,o){const i=[],s=[];return t.descendants((a,l)=>{if(!a.type.isTextblock)return!0;if(n.includes(a.type.name)){const u=r(a),f=o.get(l);if(f){const[h,p]=f;i.push(...p)}else{const h=e({content:a.textContent,language:u||void 0,pos:l,size:a.nodeSize});h&&Array.isArray(h)?(o.set(l,a,h),i.push(...h)):h instanceof Promise&&(o.remove(l),s.push(h))}}return!1}),[Cn.create(t,i),s]}function Kfe(t,e){return function({content:r,language:o,pos:i,size:s}){var a;const l=[],{tokens:u,fg:f,bg:h,rootStyle:p}=t.codeToTokens(r,{lang:o,theme:t.getLoadedThemes()[0]}),g=p||(f&&h?`--prosemirror-highlight:${f};--prosemirror-highlight-bg:${h}`:"");if(g){const b=nr.node(i,i+s,{style:g});l.push(b)}let v=i+1;for(const b of u){for(const E of b){const T=v+E.content.length,P=nr.inline(v,T,{style:Wfe((a=E.htmlStyle)!=null?a:`color: ${E.color}`),class:"shiki"});l.push(P),v=T}v+=1}return l}}function Wfe(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const Yfe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Xfe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Qfe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Zfe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Jfe=Zo.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Rs(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[om({find:Yfe,type:this.type}),om({find:Qfe,type:this.type})]},addPasteRules(){return[ih({find:Xfe,type:this.type}),ih({find:Zfe,type:this.type})]}}),ehe=/(^|[^`])`([^`]+)`(?!`)/,the=/(^|[^`])`([^`]+)`(?!`)/g,nhe=Zo.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Rs(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[om({find:ehe,type:this.type})]},addPasteRules(){return[ih({find:the,type:this.type})]}}),rhe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,ohe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,ihe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,she=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,ahe=Zo.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Rs(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[om({find:rhe,type:this.type}),om({find:ihe,type:this.type})]},addPasteRules(){return[ih({find:ohe,type:this.type}),ih({find:she,type:this.type})]}}),lhe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,che=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,uhe=Zo.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Rs(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[om({find:lhe,type:this.type})]},addPasteRules(){return[ih({find:che,type:this.type})]}}),dhe=Zo.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Rs(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),fhe=Kl.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Rs(this.options.HTMLAttributes,t),0]}}),hhe=Kl.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Rs(this.options.HTMLAttributes,t),0]}});var e2,t2;if(typeof WeakMap<"u"){let t=new WeakMap;e2=e=>t.get(e),t2=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;e2=r=>{for(let o=0;o<t.length;o+=2)if(t[o]==r)return t[o+1]},t2=(r,o)=>(n==10&&(n=0),t[n++]=r,t[n++]=o)}var _r=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,o=e/this.width|0;let i=r+1,s=o+1;for(let a=1;i<this.width&&this.map[e+a]==n;a++)i++;for(let a=1;s<this.height&&this.map[e+this.width*a]==n;a++)s++;return{left:r,top:o,right:i,bottom:s}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:o,top:i,bottom:s}=this.findCell(t);return e=="horiz"?(n<0?r==0:o==this.width)?null:this.map[i*this.width+(n<0?r-1:o)]:(n<0?i==0:s==this.height)?null:this.map[r+this.width*(n<0?i-1:s)]}rectBetween(t,e){const{left:n,right:r,top:o,bottom:i}=this.findCell(t),{left:s,right:a,top:l,bottom:u}=this.findCell(e);return{left:Math.min(n,s),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(i,u)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let o=t.left;o<t.right;o++){const i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,!(o==t.left&&o&&this.map[i-1]==s||r==t.top&&r&&this.map[i-this.width]==s)&&e.push(s))}return e}positionAt(t,e,n){for(let r=0,o=0;;r++){const i=o+n.child(r).nodeSize;if(r==t){let s=e+t*this.width;const a=(t+1)*this.width;for(;s<a&&this.map[s]<o;)s++;return s==a?i-1:this.map[s]}o=i}}static get(t){return e2(t)||t2(t,phe(t))}};function phe(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=mhe(t),n=t.childCount,r=[];let o=0,i=null;const s=[];for(let u=0,f=e*n;u<f;u++)r[u]=0;for(let u=0,f=0;u<n;u++){const h=t.child(u);f++;for(let v=0;;v++){for(;o<r.length&&r[o]!=0;)o++;if(v==h.childCount)break;const b=h.child(v),{colspan:E,rowspan:T,colwidth:P}=b.attrs;for(let D=0;D<T;D++){if(D+u>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:f,n:T-D});break}const z=o+D*e;for(let V=0;V<E;V++){r[z+V]==0?r[z+V]=f:(i||(i=[])).push({type:"collision",row:u,pos:f,n:E-V});const $=P&&P[V];if($){const O=(z+V)%e*2,R=s[O];R==null||R!=$&&s[O+1]==1?(s[O]=$,s[O+1]=1):R==$&&s[O+1]++}}}o+=E,f+=b.nodeSize}const p=(u+1)*e;let g=0;for(;o<p;)r[o++]==0&&g++;g&&(i||(i=[])).push({type:"missing",row:u,n:g}),f++}(e===0||n===0)&&(i||(i=[])).push({type:"zero_sized"});const a=new _r(e,n,r,i);let l=!1;for(let u=0;!l&&u<s.length;u+=2)s[u]!=null&&s[u+1]<n&&(l=!0);return l&&ghe(a,s,t),a}function mhe(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const o=t.child(r);let i=0;if(n)for(let s=0;s<r;s++){const a=t.child(s);for(let l=0;l<a.childCount;l++){const u=a.child(l);s+u.attrs.rowspan>r&&(i+=u.attrs.colspan)}}for(let s=0;s<o.childCount;s++){const a=o.child(s);i+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=i:e!=i&&(e=Math.max(e,i))}return e}function ghe(t,e,n){t.problems||(t.problems=[]);const r={};for(let o=0;o<t.map.length;o++){const i=t.map[o];if(r[i])continue;r[i]=!0;const s=n.nodeAt(i);if(!s)throw new RangeError(`No cell with offset ${i} found`);let a=null;const l=s.attrs;for(let u=0;u<l.colspan;u++){const f=(o+u)%t.width,h=e[f*2];h!=null&&(!l.colwidth||l.colwidth[u]!=h)&&((a||(a=yhe(l)))[u]=h)}a&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}function yhe(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function bi(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}}return e}var Ju=new Nn("selectingCells");function Am(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function vhe(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Wl(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function rM(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Am(e.$head)||bhe(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function bhe(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function n2(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function whe(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function oM(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function R$(t,e,n){const r=t.node(-1),o=_r.get(r),i=t.start(-1),s=o.nextCell(t.pos-i,e,n);return s==null?null:t.node(0).resolve(i+s)}function sh(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function M$(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}function Che(t,e,n){const r=bi(e.type.schema).header_cell;for(let o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0}var rr=class kc extends Ct{constructor(e,n=e){const r=e.node(-1),o=_r.get(r),i=e.start(-1),s=o.rectBetween(e.pos-i,n.pos-i),a=e.node(0),l=o.cellsInRect(s).filter(f=>f!=n.pos-i);l.unshift(n.pos-i);const u=l.map(f=>{const h=r.nodeAt(f);if(!h)throw RangeError(`No cell with offset ${f} found`);const p=i+f+1;return new cB(a.resolve(p),a.resolve(p+h.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(n2(r)&&n2(o)&&oM(r,o)){const i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?kc.rowSelection(r,o):i&&this.isColSelection()?kc.colSelection(r,o):new kc(r,o)}return at.between(r,o)}content(){const e=this.$anchorCell.node(-1),n=_r.get(e),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),i={},s=[];for(let l=o.top;l<o.bottom;l++){const u=[];for(let f=l*n.width+o.left,h=o.left;h<o.right;h++,f++){const p=n.map[f];if(i[p])continue;i[p]=!0;const g=n.findCell(p);let v=e.nodeAt(p);if(!v)throw RangeError(`No cell with offset ${p} found`);const b=o.left-g.left,E=g.right-o.right;if(b>0||E>0){let T=v.attrs;if(b>0&&(T=sh(T,0,b)),E>0&&(T=sh(T,T.colspan-E,E)),g.left<o.left){if(v=v.type.createAndFill(T),!v)throw RangeError(`Could not create cell with attrs ${JSON.stringify(T)}`)}else v=v.type.create(T,v.content)}if(g.top<o.top||g.bottom>o.bottom){const T={...v.attrs,rowspan:Math.min(g.bottom,o.bottom)-Math.max(g.top,o.top)};g.top<o.top?v=v.type.createAndFill(T):v=v.type.create(T,v.content)}u.push(v)}s.push(e.child(l).copy(Le.from(u)))}const a=this.isColSelection()&&this.isRowSelection()?e:s;return new Ye(Le.from(a),1,1)}replace(e,n=Ye.empty){const r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){const{$from:a,$to:l}=o[s],u=e.mapping.slice(r);e.replace(u.map(a.pos),u.map(l.pos),s?Ye.empty:n)}const i=Ct.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);i&&e.setSelection(i)}replaceWith(e,n){this.replace(e,new Ye(Le.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=_r.get(n),o=this.$anchorCell.start(-1),i=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let s=0;s<i.length;s++)e(n.nodeAt(i[s]),o+i[s])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),o=_r.get(r),i=e.start(-1),s=o.findCell(e.pos-i),a=o.findCell(n.pos-i),l=e.node(0);return s.top<=a.top?(s.top>0&&(e=l.resolve(i+o.map[s.left])),a.bottom<o.height&&(n=l.resolve(i+o.map[o.width*(o.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(i+o.map[a.left])),s.bottom<o.height&&(e=l.resolve(i+o.map[o.width*(o.height-1)+s.right-1]))),new kc(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=_r.get(e),r=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-r),i=n.colCount(this.$headCell.pos-r);if(Math.min(o,i)>0)return!1;const s=o+this.$anchorCell.nodeAfter.attrs.colspan,a=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,a)==n.width}eq(e){return e instanceof kc&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),o=_r.get(r),i=e.start(-1),s=o.findCell(e.pos-i),a=o.findCell(n.pos-i),l=e.node(0);return s.left<=a.left?(s.left>0&&(e=l.resolve(i+o.map[s.top*o.width])),a.right<o.width&&(n=l.resolve(i+o.map[o.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(i+o.map[a.top*o.width])),s.right<o.width&&(e=l.resolve(i+o.map[o.width*(s.top+1)-1]))),new kc(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new kc(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new kc(e.resolve(n),e.resolve(r))}getBookmark(){return new She(this.$anchorCell.pos,this.$headCell.pos)}};rr.prototype.visible=!1;Ct.jsonID("cell",rr);var She=class I${constructor(e,n){this.anchor=e,this.head=n}map(e){return new I$(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&oM(n,r)?new rr(n,r):Ct.near(r,1)}};function xhe(t){if(!(t.selection instanceof rr))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(nr.node(r,r+n.nodeSize,{class:"selectedCell"}))}),Cn.create(t.doc,e)}function Ehe({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,n++);for(let i=e.depth;i>=0&&!(e.before(i+1)>e.start(i));i--,r--);return n==r&&/row|table/.test(t.node(o).type.spec.tableRole)}function _he({$from:t,$to:e}){let n,r;for(let o=t.depth;o>0;o--){const i=t.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){n=i;break}}for(let o=e.depth;o>0;o--){const i=e.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){r=i;break}}return n!==r&&e.parentOffset===0}function khe(t,e,n){const r=(e||t).selection,o=(e||t).doc;let i,s;if(r instanceof ht&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")i=rr.create(o,r.from);else if(s=="row"){const a=o.resolve(r.from+1);i=rr.rowSelection(a,a)}else if(!n){const a=_r.get(r.node),l=r.from+1,u=l+a.map[a.width*a.height-1];i=rr.create(o,l+1,u)}}else r instanceof at&&Ehe(r)?i=at.create(o,r.from):r instanceof at&&_he(r)&&(i=at.create(o,r.$from.start(),r.$from.end()));return i&&(e||(e=t.tr)).setSelection(i),e}var The=new Nn("fix-tables");function N$(t,e,n,r){const o=t.childCount,i=e.childCount;e:for(let s=0,a=0;s<i;s++){const l=e.child(s);for(let u=a,f=Math.min(o,s+3);u<f;u++)if(t.child(u)==l){a=u+1,n+=l.nodeSize;continue e}r(l,n),a<o&&t.child(a).sameMarkup(l)?N$(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function Ahe(t,e){let n;const r=(o,i)=>{o.type.spec.tableRole=="table"&&(n=Rhe(t,o,i,n))};return e?e.doc!=t.doc&&N$(e.doc,t.doc,0,r):t.doc.descendants(r),n}function Rhe(t,e,n,r){const o=_r.get(e);if(!o.problems)return r;r||(r=t.tr);const i=[];for(let l=0;l<o.height;l++)i.push(0);for(let l=0;l<o.problems.length;l++){const u=o.problems[l];if(u.type=="collision"){const f=e.nodeAt(u.pos);if(!f)continue;const h=f.attrs;for(let p=0;p<h.rowspan;p++)i[u.row+p]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,sh(h,h.colspan-u.n,u.n))}else if(u.type=="missing")i[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const f=e.nodeAt(u.pos);if(!f)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...f.attrs,rowspan:f.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const f=e.nodeAt(u.pos);if(!f)continue;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,{...f.attrs,colwidth:u.colwidth})}else if(u.type=="zero_sized"){const f=r.mapping.map(n);r.delete(f,f+e.nodeSize)}}let s,a;for(let l=0;l<i.length;l++)i[l]&&(s==null&&(s=l),a=l);for(let l=0,u=n+1;l<o.height;l++){const f=e.child(l),h=u+f.nodeSize,p=i[l];if(p>0){let g="cell";f.firstChild&&(g=f.firstChild.type.spec.tableRole);const v=[];for(let E=0;E<p;E++){const T=bi(t.schema)[g].createAndFill();T&&v.push(T)}const b=(l==0||s==l-1)&&a==l?u+1:h-1;r.insert(r.mapping.map(b),v)}u=h}return r.setMeta(The,{fixTables:!0})}function Yl(t){const e=t.selection,n=rM(t),r=n.node(-1),o=n.start(-1),i=_r.get(r);return{...e instanceof rr?i.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):i.findCell(n.pos-o),tableStart:o,map:i,table:r}}function D$(t,{map:e,tableStart:n,table:r},o){let i=o>0?-1:0;Che(e,r,o+i)&&(i=o==0||o==e.width?null:0);for(let s=0;s<e.height;s++){const a=s*e.width+o;if(o>0&&o<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],u=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,M$(u.attrs,o-e.colCount(l))),s+=u.attrs.rowspan-1}else{const l=i==null?bi(r.type.schema).cell:r.nodeAt(e.map[a+i]).type,u=e.positionAt(s,o,r);t.insert(t.mapping.map(n+u),l.createAndFill())}}return t}function Mhe(t,e){if(!Wl(t))return!1;if(e){const n=Yl(t);e(D$(t.tr,n,n.left))}return!0}function Ihe(t,e){if(!Wl(t))return!1;if(e){const n=Yl(t);e(D$(t.tr,n,n.right))}return!0}function Nhe(t,{map:e,table:n,tableStart:r},o){const i=t.mapping.maps.length;for(let s=0;s<e.height;){const a=s*e.width+o,l=e.map[a],u=n.nodeAt(l),f=u.attrs;if(o>0&&e.map[a-1]==l||o<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(i).map(r+l),null,sh(f,o-e.colCount(l)));else{const h=t.mapping.slice(i).map(r+l);t.delete(h,h+u.nodeSize)}s+=f.rowspan}}function Dhe(t,e){if(!Wl(t))return!1;if(e){const n=Yl(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;Nhe(r,n,o),o!=n.left;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=_r.get(i)}e(r)}return!0}function Ohe(t,e,n){var r;const o=bi(e.type.schema).header_cell;for(let i=0;i<t.width;i++)if(((r=e.nodeAt(t.map[i+n*t.width]))==null?void 0:r.type)!=o)return!1;return!0}function O$(t,{map:e,tableStart:n,table:r},o){var i;let s=n;for(let u=0;u<o;u++)s+=r.child(u).nodeSize;const a=[];let l=o>0?-1:0;Ohe(e,r,o+l)&&(l=o==0||o==e.height?null:0);for(let u=0,f=e.width*o;u<e.width;u++,f++)if(o>0&&o<e.height&&e.map[f]==e.map[f-e.width]){const h=e.map[f],p=r.nodeAt(h).attrs;t.setNodeMarkup(n+h,null,{...p,rowspan:p.rowspan+1}),u+=p.colspan-1}else{const h=l==null?bi(r.type.schema).cell:(i=r.nodeAt(e.map[f+l*e.width]))==null?void 0:i.type,p=h?.createAndFill();p&&a.push(p)}return t.insert(s,bi(r.type.schema).row.create(null,a)),t}function Phe(t,e){if(!Wl(t))return!1;if(e){const n=Yl(t);e(O$(t.tr,n,n.top))}return!0}function Lhe(t,e){if(!Wl(t))return!1;if(e){const n=Yl(t);e(O$(t.tr,n,n.bottom))}return!0}function Vhe(t,{map:e,table:n,tableStart:r},o){let i=0;for(let u=0;u<o;u++)i+=n.child(u).nodeSize;const s=i+n.child(o).nodeSize,a=t.mapping.maps.length;t.delete(i+r,s+r);const l=new Set;for(let u=0,f=o*e.width;u<e.width;u++,f++){const h=e.map[f];if(!l.has(h)){if(l.add(h),o>0&&h==e.map[f-e.width]){const p=n.nodeAt(h).attrs;t.setNodeMarkup(t.mapping.slice(a).map(h+r),null,{...p,rowspan:p.rowspan-1}),u+=p.colspan-1}else if(o<e.height&&h==e.map[f+e.width]){const p=n.nodeAt(h),g=p.attrs,v=p.type.create({...g,rowspan:p.attrs.rowspan-1},p.content),b=e.positionAt(o+1,u,n);t.insert(t.mapping.slice(a).map(r+b),v),u+=g.colspan-1}}}}function jhe(t,e){if(!Wl(t))return!1;if(e){const n=Yl(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;Vhe(r,n,o),o!=n.top;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=_r.get(n.table)}e(r)}return!0}function G5(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function Bhe({width:t,height:e,map:n},r){let o=r.top*t+r.left,i=o,s=(r.bottom-1)*t+r.left,a=o+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[i]==n[i-1]||r.right<t&&n[a]==n[a+1])return!0;i+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[o]==n[o-t]||r.bottom<e&&n[s]==n[s+t])return!0;o++,s++}return!1}function $he(t,e){const n=t.selection;if(!(n instanceof rr)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Yl(t),{map:o}=r;if(Bhe(o,r))return!1;if(e){const i=t.tr,s={};let a=Le.empty,l,u;for(let f=r.top;f<r.bottom;f++)for(let h=r.left;h<r.right;h++){const p=o.map[f*o.width+h],g=r.table.nodeAt(p);if(!(s[p]||!g))if(s[p]=!0,l==null)l=p,u=g;else{G5(g)||(a=a.append(g.content));const v=i.mapping.map(p+r.tableStart);i.delete(v,v+g.nodeSize)}}if(l==null||u==null)return!0;if(i.setNodeMarkup(l+r.tableStart,null,{...M$(u.attrs,u.attrs.colspan,r.right-r.left-u.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const f=l+1+u.content.size,h=G5(u)?l+1:f;i.replaceWith(h+r.tableStart,f+r.tableStart,a)}i.setSelection(new rr(i.doc.resolve(l+r.tableStart))),e(i)}return!0}function Hhe(t,e){const n=bi(t.schema);return Fhe(({node:r})=>n[r.type.spec.tableRole])(t,e)}function Fhe(t){return(e,n)=>{var r;const o=e.selection;let i,s;if(o instanceof rr){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;i=o.$anchorCell.nodeAfter,s=o.$anchorCell.pos}else{if(i=vhe(o.$from),!i)return!1;s=(r=Am(o.$from))==null?void 0:r.pos}if(i==null||s==null||i.attrs.colspan==1&&i.attrs.rowspan==1)return!1;if(n){let a=i.attrs;const l=[],u=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const f=Yl(e),h=e.tr;for(let g=0;g<f.right-f.left;g++)l.push(u?{...a,colwidth:u&&u[g]?[u[g]]:null}:a);let p;for(let g=f.top;g<f.bottom;g++){let v=f.map.positionAt(g,f.left,f.table);g==f.top&&(v+=i.nodeSize);for(let b=f.left,E=0;b<f.right;b++,E++)b==f.left&&g==f.top||h.insert(p=h.mapping.map(v+f.tableStart,1),t({node:i,row:g,col:b}).createAndFill(l[E]))}h.setNodeMarkup(s,t({node:i,row:f.top,col:f.left}),l[0]),o instanceof rr&&h.setSelection(new rr(h.doc.resolve(o.$anchorCell.pos),p?h.doc.resolve(p):void 0)),n(h)}return!0}}function zhe(t){return function(e,n){if(!Wl(e))return!1;if(n){const r=bi(e.schema),o=Yl(e),i=e.tr,s=o.map.cellsInRect(t=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:t=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=s.map(l=>o.table.nodeAt(l));for(let l=0;l<s.length;l++)a[l].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[l],r.cell,a[l].attrs);if(i.steps.length==0)for(let l=0;l<s.length;l++)i.setNodeMarkup(o.tableStart+s[l],r.header_cell,a[l].attrs);n(i)}return!0}}function K5(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let o=0;o<r.length;o++){const i=e.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function iM(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?zhe(t):function(n,r){if(!Wl(n))return!1;if(r){const o=bi(n.schema),i=Yl(n),s=n.tr,a=K5("row",i,o),l=K5("column",i,o),f=(t==="column"?a:t==="row"?l:!1)?1:0,h=t=="column"?{left:0,top:f,right:1,bottom:i.map.height}:t=="row"?{left:f,top:0,right:i.map.width,bottom:1}:i,p=t=="column"?l?o.cell:o.header_cell:t=="row"?a?o.cell:o.header_cell:o.cell;i.map.cellsInRect(h).forEach(g=>{const v=g+i.tableStart,b=s.doc.nodeAt(v);b&&s.setNodeMarkup(v,p,b.attrs)}),r(s)}return!0}}iM("row",{useDeprecatedLogic:!0});iM("column",{useDeprecatedLogic:!0});iM("cell",{useDeprecatedLogic:!0});function Uhe(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,o=t.before();r>=0;r--){const i=t.node(-1).child(r),s=i.lastChild;if(s)return o-1-s.nodeSize;o-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),o=t.after();r<n.childCount;r++){const i=n.child(r);if(i.childCount)return o+1;o+=i.nodeSize}}return null}function W5(t){return function(e,n){if(!Wl(e))return!1;const r=Uhe(rM(e),t);if(r==null)return!1;if(n){const o=e.doc.resolve(r);n(e.tr.setSelection(at.between(o,whe(o))).scrollIntoView())}return!0}}function _b(t,e){const n=t.selection;if(!(n instanceof rr))return!1;if(e){const r=t.tr,o=bi(t.schema).cell.createAndFill().content;n.forEachCell((i,s)=>{i.content.eq(o)||r.replace(r.mapping.map(s+1),r.mapping.map(s+i.nodeSize-1),new Ye(o,0,0))}),r.docChanged&&e(r)}return!0}function qhe(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const o=e.child(0),i=o.type.spec.tableRole,s=o.type.schema,a=[];if(i=="row")for(let l=0;l<e.childCount;l++){let u=e.child(l).content;const f=l?0:Math.max(0,n-1),h=l<e.childCount-1?0:Math.max(0,r-1);(f||h)&&(u=r2(bi(s).row,new Ye(u,f,h)).content),a.push(u)}else if(i=="cell"||i=="header_cell")a.push(n||r?r2(bi(s).row,new Ye(e,n,r)).content:e);else return null;return Ghe(s,a)}function Ghe(t,e){const n=[];for(let o=0;o<e.length;o++){const i=e[o];for(let s=i.childCount-1;s>=0;s--){const{rowspan:a,colspan:l}=i.child(s).attrs;for(let u=o;u<o+a;u++)n[u]=(n[u]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=e.length&&e.push(Le.empty),n[o]<r){const i=bi(t).cell.createAndFill(),s=[];for(let a=n[o];a<r;a++)s.push(i);e[o]=e[o].append(Le.from(s))}return{height:e.length,width:r,rows:e}}function r2(t,e){const n=t.createAndFill();return new OR(n).replace(0,n.content.size,e).doc}function Khe({width:t,height:e,rows:n},r,o){if(t!=r){const i=[],s=[];for(let a=0;a<n.length;a++){const l=n[a],u=[];for(let f=i[a]||0,h=0;f<r;h++){let p=l.child(h%l.childCount);f+p.attrs.colspan>r&&(p=p.type.createChecked(sh(p.attrs,p.attrs.colspan,f+p.attrs.colspan-r),p.content)),u.push(p),f+=p.attrs.colspan;for(let g=1;g<p.attrs.rowspan;g++)i[a+g]=(i[a+g]||0)+p.attrs.colspan}s.push(Le.from(u))}n=s,t=r}if(e!=o){const i=[];for(let s=0,a=0;s<o;s++,a++){const l=[],u=n[a%e];for(let f=0;f<u.childCount;f++){let h=u.child(f);s+h.attrs.rowspan>o&&(h=h.type.create({...h.attrs,rowspan:Math.max(1,o-h.attrs.rowspan)},h.content)),l.push(h)}i.push(Le.from(l))}n=i,e=o}return{width:t,height:e,rows:n}}function Whe(t,e,n,r,o,i,s){const a=t.doc.type.schema,l=bi(a);let u,f;if(o>e.width)for(let h=0,p=0;h<e.height;h++){const g=n.child(h);p+=g.nodeSize;const v=[];let b;g.lastChild==null||g.lastChild.type==l.cell?b=u||(u=l.cell.createAndFill()):b=f||(f=l.header_cell.createAndFill());for(let E=e.width;E<o;E++)v.push(b);t.insert(t.mapping.slice(s).map(p-1+r),v)}if(i>e.height){const h=[];for(let v=0,b=(e.height-1)*e.width;v<Math.max(e.width,o);v++){const E=v>=e.width?!1:n.nodeAt(e.map[b+v]).type==l.header_cell;h.push(E?f||(f=l.header_cell.createAndFill()):u||(u=l.cell.createAndFill()))}const p=l.row.create(null,Le.from(h)),g=[];for(let v=e.height;v<i;v++)g.push(p);t.insert(t.mapping.slice(s).map(r+n.nodeSize-2),g)}return!!(u||f)}function Y5(t,e,n,r,o,i,s,a){if(s==0||s==e.height)return!1;let l=!1;for(let u=o;u<i;u++){const f=s*e.width+u,h=e.map[f];if(e.map[f-e.width]==h){l=!0;const p=n.nodeAt(h),{top:g,left:v}=e.findCell(h);t.setNodeMarkup(t.mapping.slice(a).map(h+r),null,{...p.attrs,rowspan:s-g}),t.insert(t.mapping.slice(a).map(e.positionAt(s,v,n)),p.type.createAndFill({...p.attrs,rowspan:g+p.attrs.rowspan-s})),u+=p.attrs.colspan-1}}return l}function X5(t,e,n,r,o,i,s,a){if(s==0||s==e.width)return!1;let l=!1;for(let u=o;u<i;u++){const f=u*e.width+s,h=e.map[f];if(e.map[f-1]==h){l=!0;const p=n.nodeAt(h),g=e.colCount(h),v=t.mapping.slice(a).map(h+r);t.setNodeMarkup(v,null,sh(p.attrs,s-g,p.attrs.colspan-(s-g))),t.insert(v+p.nodeSize,p.type.createAndFill(sh(p.attrs,0,s-g))),u+=p.attrs.rowspan-1}}return l}function Q5(t,e,n,r,o){let i=n?t.doc.nodeAt(n-1):t.doc;if(!i)throw new Error("No table found");let s=_r.get(i);const{top:a,left:l}=r,u=l+o.width,f=a+o.height,h=t.tr;let p=0;function g(){if(i=n?h.doc.nodeAt(n-1):h.doc,!i)throw new Error("No table found");s=_r.get(i),p=h.mapping.maps.length}Whe(h,s,i,n,u,f,p)&&g(),Y5(h,s,i,n,l,u,a,p)&&g(),Y5(h,s,i,n,l,u,f,p)&&g(),X5(h,s,i,n,a,f,l,p)&&g(),X5(h,s,i,n,a,f,u,p)&&g();for(let v=a;v<f;v++){const b=s.positionAt(v,l,i),E=s.positionAt(v,u,i);h.replace(h.mapping.slice(p).map(b+n),h.mapping.slice(p).map(E+n),new Ye(o.rows[v-a],0,0))}g(),h.setSelection(new rr(h.doc.resolve(n+s.positionAt(a,l,i)),h.doc.resolve(n+s.positionAt(f-1,u-1,i)))),e(h)}var Yhe=GR({ArrowLeft:kb("horiz",-1),ArrowRight:kb("horiz",1),ArrowUp:kb("vert",-1),ArrowDown:kb("vert",1),"Shift-ArrowLeft":Tb("horiz",-1),"Shift-ArrowRight":Tb("horiz",1),"Shift-ArrowUp":Tb("vert",-1),"Shift-ArrowDown":Tb("vert",1),Backspace:_b,"Mod-Backspace":_b,Delete:_b,"Mod-Delete":_b});function i1(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function kb(t,e){return(n,r,o)=>{if(!o)return!1;const i=n.selection;if(i instanceof rr)return i1(n,r,Ct.near(i.$headCell,e));if(t!="horiz"&&!i.empty)return!1;const s=P$(o,t,e);if(s==null)return!1;if(t=="horiz")return i1(n,r,Ct.near(n.doc.resolve(i.head+e),e));{const a=n.doc.resolve(s),l=R$(a,t,e);let u;return l?u=Ct.near(l,1):e<0?u=Ct.near(n.doc.resolve(a.before(-1)),-1):u=Ct.near(n.doc.resolve(a.after(-1)),1),i1(n,r,u)}}}function Tb(t,e){return(n,r,o)=>{if(!o)return!1;const i=n.selection;let s;if(i instanceof rr)s=i;else{const l=P$(o,t,e);if(l==null)return!1;s=new rr(n.doc.resolve(l))}const a=R$(s.$headCell,t,e);return a?i1(n,r,new rr(s.$anchorCell,a)):!1}}function Xhe(t,e){const n=t.state.doc,r=Am(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new rr(r))),!0):!1}function Qhe(t,e,n){if(!Wl(t.state))return!1;let r=qhe(n);const o=t.state.selection;if(o instanceof rr){r||(r={width:1,height:1,rows:[Le.from(r2(bi(t.state.schema).cell,n))]});const i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),a=_r.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=Khe(r,a.right-a.left,a.bottom-a.top),Q5(t.state,t.dispatch,s,a,r),!0}else if(r){const i=rM(t.state),s=i.start(-1);return Q5(t.state,t.dispatch,s,_r.get(i.node(-1)).findCell(i.pos-s),r),!0}else return!1}function Zhe(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=Z5(t,e.target);let o;if(e.shiftKey&&t.state.selection instanceof rr)i(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(o=Am(t.state.selection.$anchor))!=null&&((n=z_(t,e))==null?void 0:n.pos)!=o.pos)i(o,e),e.preventDefault();else if(!r)return;function i(l,u){let f=z_(t,u);const h=Ju.getState(t.state)==null;if(!f||!oM(l,f))if(h)f=l;else return;const p=new rr(l,f);if(h||!t.state.selection.eq(p)){const g=t.state.tr.setSelection(p);h&&g.setMeta(Ju,l.pos),t.dispatch(g)}}function s(){t.root.removeEventListener("mouseup",s),t.root.removeEventListener("dragstart",s),t.root.removeEventListener("mousemove",a),Ju.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Ju,-1))}function a(l){const u=l,f=Ju.getState(t.state);let h;if(f!=null)h=t.state.doc.resolve(f);else if(Z5(t,u.target)!=r&&(h=z_(t,e),!h))return s();h&&i(h,u)}t.root.addEventListener("mouseup",s),t.root.addEventListener("dragstart",s),t.root.addEventListener("mousemove",a)}function P$(t,e,n){if(!(t.state.selection instanceof at))return null;const{$head:r}=t.state.selection;for(let o=r.depth-1;o>=0;o--){const i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const a=r.before(o),l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?a:null}}return null}function Z5(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function z_(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?Am(t.state.doc.resolve(n.pos)):null}var L$=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),o2(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,o2(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function o2(t,e,n,r,o,i){var s;let a=0,l=!0,u=e.firstChild;const f=t.firstChild;if(f){for(let h=0,p=0;h<f.childCount;h++){const{colspan:g,colwidth:v}=f.child(h).attrs;for(let b=0;b<g;b++,p++){const E=o==p?i:v&&v[b],T=E?E+"px":"";if(a+=E||r,E||(l=!1),u)u.style.width!=T&&(u.style.width=T),u=u.nextSibling;else{const P=document.createElement("col");P.style.width=T,e.appendChild(P)}}}for(;u;){const h=u.nextSibling;(s=u.parentNode)==null||s.removeChild(u),u=h}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var Es=new Nn("tableColumnResizing");function Jhe({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=L$,lastColumnResizable:o=!0}={}){const i=new nn({key:Es,state:{init(s,a){var l,u;const f=(u=(l=i.spec)==null?void 0:l.props)==null?void 0:u.nodeViews,h=bi(a.schema).table.name;return r&&f&&(f[h]=(p,g)=>new r(p,n,g)),new epe(-1,!1)},apply(s,a){return a.apply(s)}},props:{attributes:s=>{const a=Es.getState(s);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(s,a)=>{tpe(s,a,t,o)},mouseleave:s=>{npe(s)},mousedown:(s,a)=>{rpe(s,a,e,n)}},decorations:s=>{const a=Es.getState(s);if(a&&a.activeHandle>-1)return lpe(s,a.activeHandle)},nodeViews:{}}});return i}var epe=class s1{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(Es);if(r&&r.setHandle!=null)return new s1(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new s1(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let o=e.mapping.map(n.activeHandle,-1);return n2(e.doc.resolve(o))||(o=-1),new s1(o,n.dragging)}return n}};function tpe(t,e,n,r){if(!t.editable)return;const o=Es.getState(t.state);if(o&&!o.dragging){const i=ipe(e.target);let s=-1;if(i){const{left:a,right:l}=i.getBoundingClientRect();e.clientX-a<=n?s=J5(t,e,"left",n):l-e.clientX<=n&&(s=J5(t,e,"right",n))}if(s!=o.activeHandle){if(!r&&s!==-1){const a=t.state.doc.resolve(s),l=a.node(-1),u=_r.get(l),f=a.start(-1);if(u.colCount(a.pos-f)+a.nodeAfter.attrs.colspan-1==u.width-1)return}V$(t,s)}}}function npe(t){if(!t.editable)return;const e=Es.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&V$(t,-1)}function rpe(t,e,n,r){var o;if(!t.editable)return!1;const i=(o=t.dom.ownerDocument.defaultView)!=null?o:window,s=Es.getState(t.state);if(!s||s.activeHandle==-1||s.dragging)return!1;const a=t.state.doc.nodeAt(s.activeHandle),l=ope(t,s.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(Es,{setDragging:{startX:e.clientX,startWidth:l}}));function u(h){i.removeEventListener("mouseup",u),i.removeEventListener("mousemove",f);const p=Es.getState(t.state);p?.dragging&&(spe(t,p.activeHandle,eL(p.dragging,h,n)),t.dispatch(t.state.tr.setMeta(Es,{setDragging:null})))}function f(h){if(!h.which)return u(h);const p=Es.getState(t.state);if(p&&p.dragging){const g=eL(p.dragging,h,n);tL(t,p.activeHandle,g,r)}}return tL(t,s.activeHandle,l,r),i.addEventListener("mouseup",u),i.addEventListener("mousemove",f),e.preventDefault(),!0}function ope(t,e,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const i=t.domAtPos(e);let a=i.node.childNodes[i.offset].offsetWidth,l=n;if(r)for(let u=0;u<n;u++)r[u]&&(a-=r[u],l--);return a/l}function ipe(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function J5(t,e,n,r){const o=n=="right"?-r:r,i=t.posAtCoords({left:e.clientX+o,top:e.clientY});if(!i)return-1;const{pos:s}=i,a=Am(t.state.doc.resolve(s));if(!a)return-1;if(n=="right")return a.pos;const l=_r.get(a.node(-1)),u=a.start(-1),f=l.map.indexOf(a.pos-u);return f%l.width==0?-1:u+l.map[f-1]}function eL(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function V$(t,e){t.dispatch(t.state.tr.setMeta(Es,{setHandle:e}))}function spe(t,e,n){const r=t.state.doc.resolve(e),o=r.node(-1),i=_r.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let u=0;u<i.height;u++){const f=u*i.width+a;if(u&&i.map[f]==i.map[f-i.width])continue;const h=i.map[f],p=o.nodeAt(h).attrs,g=p.colspan==1?0:a-i.colCount(h);if(p.colwidth&&p.colwidth[g]==n)continue;const v=p.colwidth?p.colwidth.slice():ape(p.colspan);v[g]=n,l.setNodeMarkup(s+h,null,{...p,colwidth:v})}l.docChanged&&t.dispatch(l)}function tL(t,e,n,r){const o=t.state.doc.resolve(e),i=o.node(-1),s=o.start(-1),a=_r.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1;let l=t.domAtPos(o.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&o2(i,l.firstChild,l,r,a,n)}function ape(t){return Array(t).fill(0)}function lpe(t,e){var n;const r=[],o=t.doc.resolve(e),i=o.node(-1);if(!i)return Cn.empty;const s=_r.get(i),a=o.start(-1),l=s.colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1;for(let u=0;u<s.height;u++){const f=l+u*s.width;if((l==s.width-1||s.map[f]!=s.map[f+1])&&(u==0||s.map[f]!=s.map[f-s.width])){const h=s.map[f],p=a+h+i.nodeAt(h).nodeSize-1,g=document.createElement("div");g.className="column-resize-handle",(n=Es.getState(t))!=null&&n.dragging&&r.push(nr.node(a+h,a+h+i.nodeAt(h).nodeSize,{class:"column-resize-dragging"})),r.push(nr.widget(p,g))}}return Cn.create(t.doc,r)}function cpe({allowTableNodeSelection:t=!1}={}){return new nn({key:Ju,state:{init(){return null},apply(e,n){const r=e.getMeta(Ju);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:o,pos:i}=e.mapping.mapResult(n);return o?null:i}},props:{decorations:xhe,handleDOMEvents:{mousedown:Zhe},createSelectionBetween(e){return Ju.getState(e.state)!=null?e.state.selection:null},handleTripleClick:Xhe,handleKeyDown:Yhe,handlePaste:Qhe},appendTransaction(e,n,r){return khe(r,Ahe(r,n),t)}})}class Vr extends Ct{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Vr.valid(r)?new Vr(r):Ct.near(r)}content(){return Ye.empty}eq(e){return e instanceof Vr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Vr(e.resolve(n.pos))}getBookmark(){return new sM(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!upe(e)||!dpe(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Vr.valid(e))return e;let o=e.pos,i=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){i=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;o+=n;let l=e.doc.resolve(o);if(Vr.valid(l))return l}for(;;){let s=n>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!ht.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=s,o+=n;let a=e.doc.resolve(o);if(Vr.valid(a))return a}return null}}}Vr.prototype.visible=!1;Vr.findFrom=Vr.findGapCursorFrom;Ct.jsonID("gapcursor",Vr);class sM{constructor(e){this.pos=e}map(e){return new sM(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Vr.valid(n)?new Vr(n):Ct.near(n)}}function upe(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function dpe(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function fpe(){return new nn({props:{decorations:gpe,createSelectionBetween(t,e,n){return e.pos==n.pos&&Vr.valid(n)?new Vr(n):null},handleClick:ppe,handleKeyDown:hpe,handleDOMEvents:{beforeinput:mpe}}})}const hpe=GR({ArrowLeft:Ab("horiz",-1),ArrowRight:Ab("horiz",1),ArrowUp:Ab("vert",-1),ArrowDown:Ab("vert",1)});function Ab(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,i){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof at){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let u=Vr.findGapCursorFrom(a,e,l);return u?(o&&o(r.tr.setSelection(new Vr(u))),!0):!1}}function ppe(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Vr.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&ht.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Vr(r))),!0)}function mpe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Vr))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=Le.empty;for(let s=r.length-1;s>=0;s--)o=Le.from(r[s].createAndFill(null,o));let i=t.state.tr.replace(n.pos,n.pos,new Ye(o,0,0));return i.setSelection(at.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function gpe(t){if(!(t.selection instanceof Vr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Cn.create(t.doc,[nr.widget(t.selection.head,e,{key:"gapcursor"})])}const ype=lr.create({name:"gapCursor",addProseMirrorPlugins(){return[fpe()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=pn(dt(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}});var iw=200,Ao=function(){};Ao.prototype.append=function(e){return e.length?(e=Ao.from(e),!this.length&&e||e.length<iw&&this.leafAppend(e)||this.length<iw&&e.leafPrepend(this)||this.appendInner(e)):this};Ao.prototype.prepend=function(e){return e.length?Ao.from(e).append(this):this};Ao.prototype.appendInner=function(e){return new vpe(this,e)};Ao.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Ao.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Ao.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ao.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Ao.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(i,s){return o.push(e(i,s))},n,r),o};Ao.from=function(e){return e instanceof Ao?e:e&&e.length?new j$(e):Ao.empty};var j$=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new e(this.values.slice(o,i))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,i,s,a){for(var l=i;l<s;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,i,s,a){for(var l=i-1;l>=s;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=iw)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=iw)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Ao);Ao.empty=new j$([]);var vpe=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,i,s){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(i,a),s)===!1||i>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,i)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,i,s){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(i,a)-a,s+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(o,a),i,s)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(r,o):r>=i?this.right.slice(r-i,o-i):this.left.slice(r,i).append(this.right.slice(0,o-i))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Ao);const bpe=500;class ja{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,i;n&&(o=this.remapping(r,this.items.length),i=o.maps.length);let s=e.tr,a,l,u=[],f=[];return this.items.forEach((h,p)=>{if(!h.step){o||(o=this.remapping(r,p+1),i=o.maps.length),i--,f.push(h);return}if(o){f.push(new Fu(h.map));let g=h.step.map(o.slice(i)),v;g&&s.maybeStep(g).doc&&(v=s.mapping.maps[s.mapping.maps.length-1],u.push(new Fu(v,void 0,void 0,u.length+f.length))),i--,v&&o.appendMap(v,i)}else s.maybeStep(h.step);if(h.selection)return a=o?h.selection.map(o.slice(i)):h.selection,l=new ja(this.items.slice(0,r).append(f.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,r,o){let i=[],s=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let f=0;f<e.steps.length;f++){let h=e.steps[f].invert(e.docs[f]),p=new Fu(e.mapping.maps[f],h,n),g;(g=l&&l.merge(p))&&(p=g,f?i.pop():a=a.slice(0,a.length-1)),i.push(p),n&&(s++,n=void 0),o||(l=p)}let u=s-r.depth;return u>Cpe&&(a=wpe(a,u),s-=u),new ja(a.append(i),s)}remapping(e,n){let r=new Jp;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new ja(this.items.append(e.map(n=>new Fu(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),i=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(p=>{p.selection&&a--},o);let l=n;this.items.forEach(p=>{let g=i.getMirror(--l);if(g==null)return;s=Math.min(s,g);let v=i.maps[g];if(p.step){let b=e.steps[g].invert(e.docs[g]),E=p.selection&&p.selection.map(i.slice(l+1,g));E&&a++,r.push(new Fu(v,b,E))}else r.push(new Fu(v))},o);let u=[];for(let p=n;p<s;p++)u.push(new Fu(i.maps[p]));let f=this.items.slice(0,o).append(u).append(r),h=new ja(f,a);return h.emptyItemCount()>bpe&&(h=h.compress(this.items.length-r.length)),h}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],i=0;return this.items.forEach((s,a)=>{if(a>=e)o.push(s),s.selection&&i++;else if(s.step){let l=s.step.map(n.slice(r)),u=l&&l.getMap();if(r--,u&&n.appendMap(u,r),l){let f=s.selection&&s.selection.map(n.slice(r));f&&i++;let h=new Fu(u.invert(),l,f),p,g=o.length-1;(p=o.length&&o[g].merge(h))?o[g]=p:o.push(h)}}else s.map&&r--},this.items.length,0),new ja(Ao.from(o.reverse()),i)}}ja.empty=new ja(Ao.empty,0);function wpe(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}let Fu=class B${constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new B$(n.getMap().invert(),n,this.selection)}}};class Ku{constructor(e,n,r,o,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i}}const Cpe=20;function Spe(t,e,n,r){let o=n.getMeta(zf),i;if(o)return o.historyState;n.getMeta(_pe)&&(t=new Ku(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(zf))return s.getMeta(zf).redo?new Ku(t.done.addTransform(n,void 0,r,a1(e)),t.undone,nL(n.mapping.maps),t.prevTime,t.prevComposition):new Ku(t.done,t.undone.addTransform(n,void 0,r,a1(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!xpe(n,t.prevRanges)),u=s?U_(t.prevRanges,n.mapping):nL(n.mapping.maps);return new Ku(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,a1(e)),ja.empty,u,n.time,a??t.prevComposition)}else return(i=n.getMeta("rebased"))?new Ku(t.done.rebased(n,i),t.undone.rebased(n,i),U_(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Ku(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),U_(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function xpe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&o>=e[i]&&(n=!0)}),n}function nL(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,i,s)=>e.push(i,s));return e}function U_(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function Epe(t,e,n){let r=a1(e),o=zf.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let s=i.selection.resolve(i.transform.doc),a=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),o,r),l=new Ku(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(s).setMeta(zf,{redo:n,historyState:l})}let q_=!1,rL=null;function a1(t){let e=t.plugins;if(rL!=e){q_=!1,rL=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){q_=!0;break}}return q_}const zf=new Nn("history"),_pe=new Nn("closeHistory");function kpe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new nn({key:zf,state:{init(){return new Ku(ja.empty,ja.empty,null,0,-1)},apply(e,n,r){return Spe(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?aM:r=="historyRedo"?lM:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function $$(t,e){return(n,r)=>{let o=zf.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let i=Epe(o,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const aM=$$(!1,!0),lM=$$(!0,!0),Tpe=lr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>aM(t,e),redo:()=>({state:t,dispatch:e})=>lM(t,e)}},addProseMirrorPlugins(){return[kpe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Ape="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Rpe="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",im=(t,e)=>{for(const n in e)t[n]=e[n];return t},i2="numeric",s2="ascii",a2="alpha",ly="asciinumeric",qg="alphanumeric",l2="domain",H$="emoji",Mpe="scheme",Ipe="slashscheme",G_="whitespace";function Npe(t,e){return t in e||(e[t]=[]),e[t]}function Pf(t,e,n){e[i2]&&(e[ly]=!0,e[qg]=!0),e[s2]&&(e[ly]=!0,e[a2]=!0),e[ly]&&(e[qg]=!0),e[a2]&&(e[qg]=!0),e[qg]&&(e[l2]=!0),e[H$]&&(e[l2]=!0);for(const r in e){const o=Npe(r,n);o.indexOf(t)<0&&o.push(t)}}function Dpe(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Zi(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Zi.groups={};Zi.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],i=e.jr[r][1];if(i&&o.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr(t,e,n,r){r=r||Zi.groups;let o;return e&&e.j?o=e:(o=new Zi(e),n&&r&&Pf(e,n,r)),this.jr.push([t,o]),o},ts(t,e,n,r){let o=this;const i=t.length;if(!i)return o;for(let s=0;s<i-1;s++)o=o.tt(t[s]);return o.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||Zi.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const i=e;let s,a=o.go(t);if(a?(s=new Zi,im(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new Zi,i){if(r)if(s.t&&typeof s.t=="string"){const l=im(Dpe(s.t,r),n);Pf(i,l,r)}else n&&Pf(i,n,r);s.t=i}return o.j[t]=s,s}};const tn=(t,e,n,r,o)=>t.ta(e,n,r,o),Lr=(t,e,n,r,o)=>t.tr(e,n,r,o),oL=(t,e,n,r,o)=>t.ts(e,n,r,o),We=(t,e,n,r,o)=>t.tt(e,n,r,o),Tc="WORD",c2="UWORD",F$="ASCIINUMERICAL",z$="ALPHANUMERICAL",Vy="LOCALHOST",u2="TLD",d2="UTLD",l1="SCHEME",yp="SLASH_SCHEME",cM="NUM",f2="WS",uM="NL",cy="OPENBRACE",uy="CLOSEBRACE",sw="OPENBRACKET",aw="CLOSEBRACKET",lw="OPENPAREN",cw="CLOSEPAREN",uw="OPENANGLEBRACKET",dw="CLOSEANGLEBRACKET",fw="FULLWIDTHLEFTPAREN",hw="FULLWIDTHRIGHTPAREN",pw="LEFTCORNERBRACKET",mw="RIGHTCORNERBRACKET",gw="LEFTWHITECORNERBRACKET",yw="RIGHTWHITECORNERBRACKET",vw="FULLWIDTHLESSTHAN",bw="FULLWIDTHGREATERTHAN",ww="AMPERSAND",Cw="APOSTROPHE",Sw="ASTERISK",Wu="AT",xw="BACKSLASH",Ew="BACKTICK",_w="CARET",ed="COLON",dM="COMMA",kw="DOLLAR",Cl="DOT",Tw="EQUALS",fM="EXCLAMATION",na="HYPHEN",dy="PERCENT",Aw="PIPE",Rw="PLUS",Mw="POUND",fy="QUERY",hM="QUOTE",U$="FULLWIDTHMIDDLEDOT",pM="SEMI",Sl="SLASH",hy="TILDE",Iw="UNDERSCORE",q$="EMOJI",Nw="SYM";var G$=Object.freeze({__proto__:null,ALPHANUMERICAL:z$,AMPERSAND:ww,APOSTROPHE:Cw,ASCIINUMERICAL:F$,ASTERISK:Sw,AT:Wu,BACKSLASH:xw,BACKTICK:Ew,CARET:_w,CLOSEANGLEBRACKET:dw,CLOSEBRACE:uy,CLOSEBRACKET:aw,CLOSEPAREN:cw,COLON:ed,COMMA:dM,DOLLAR:kw,DOT:Cl,EMOJI:q$,EQUALS:Tw,EXCLAMATION:fM,FULLWIDTHGREATERTHAN:bw,FULLWIDTHLEFTPAREN:fw,FULLWIDTHLESSTHAN:vw,FULLWIDTHMIDDLEDOT:U$,FULLWIDTHRIGHTPAREN:hw,HYPHEN:na,LEFTCORNERBRACKET:pw,LEFTWHITECORNERBRACKET:gw,LOCALHOST:Vy,NL:uM,NUM:cM,OPENANGLEBRACKET:uw,OPENBRACE:cy,OPENBRACKET:sw,OPENPAREN:lw,PERCENT:dy,PIPE:Aw,PLUS:Rw,POUND:Mw,QUERY:fy,QUOTE:hM,RIGHTCORNERBRACKET:mw,RIGHTWHITECORNERBRACKET:yw,SCHEME:l1,SEMI:pM,SLASH:Sl,SLASH_SCHEME:yp,SYM:Nw,TILDE:hy,TLD:u2,UNDERSCORE:Iw,UTLD:d2,UWORD:c2,WORD:Tc,WS:f2});const xc=/[a-z]/,Og=new RegExp("\\p{L}","u"),K_=new RegExp("\\p{Emoji}","u"),Ec=/\d/,W_=/\s/,iL="\r",Y_=`
`,Ope="",Ppe="",X_="";let Rb=null,Mb=null;function Lpe(t=[]){const e={};Zi.groups=e;const n=new Zi;Rb==null&&(Rb=sL(Ape)),Mb==null&&(Mb=sL(Rpe)),We(n,"'",Cw),We(n,"{",cy),We(n,"}",uy),We(n,"[",sw),We(n,"]",aw),We(n,"(",lw),We(n,")",cw),We(n,"<",uw),We(n,">",dw),We(n,"",fw),We(n,"",hw),We(n,"",pw),We(n,"",mw),We(n,"",gw),We(n,"",yw),We(n,"",vw),We(n,"",bw),We(n,"&",ww),We(n,"*",Sw),We(n,"@",Wu),We(n,"`",Ew),We(n,"^",_w),We(n,":",ed),We(n,",",dM),We(n,"$",kw),We(n,".",Cl),We(n,"=",Tw),We(n,"!",fM),We(n,"-",na),We(n,"%",dy),We(n,"|",Aw),We(n,"+",Rw),We(n,"#",Mw),We(n,"?",fy),We(n,'"',hM),We(n,"/",Sl),We(n,";",pM),We(n,"~",hy),We(n,"_",Iw),We(n,"\\",xw),We(n,"",U$);const r=Lr(n,Ec,cM,{[i2]:!0});Lr(r,Ec,r);const o=Lr(r,xc,F$,{[ly]:!0}),i=Lr(r,Og,z$,{[qg]:!0}),s=Lr(n,xc,Tc,{[s2]:!0});Lr(s,Ec,o),Lr(s,xc,s),Lr(o,Ec,o),Lr(o,xc,o);const a=Lr(n,Og,c2,{[a2]:!0});Lr(a,xc),Lr(a,Ec,i),Lr(a,Og,a),Lr(i,Ec,i),Lr(i,xc),Lr(i,Og,i);const l=We(n,Y_,uM,{[G_]:!0}),u=We(n,iL,f2,{[G_]:!0}),f=Lr(n,W_,f2,{[G_]:!0});We(n,X_,f),We(u,Y_,l),We(u,X_,f),Lr(u,W_,f),We(f,iL),We(f,Y_),Lr(f,W_,f),We(f,X_,f);const h=Lr(n,K_,q$,{[H$]:!0});We(h,"#"),Lr(h,K_,h),We(h,Ope,h);const p=We(h,Ppe);We(p,"#"),Lr(p,K_,h);const g=[[xc,s],[Ec,o]],v=[[xc,null],[Og,a],[Ec,i]];for(let b=0;b<Rb.length;b++)zu(n,Rb[b],u2,Tc,g);for(let b=0;b<Mb.length;b++)zu(n,Mb[b],d2,c2,v);Pf(u2,{tld:!0,ascii:!0},e),Pf(d2,{utld:!0,alpha:!0},e),zu(n,"file",l1,Tc,g),zu(n,"mailto",l1,Tc,g),zu(n,"http",yp,Tc,g),zu(n,"https",yp,Tc,g),zu(n,"ftp",yp,Tc,g),zu(n,"ftps",yp,Tc,g),Pf(l1,{scheme:!0,ascii:!0},e),Pf(yp,{slashscheme:!0,ascii:!0},e),t=t.sort((b,E)=>b[0]>E[0]?1:-1);for(let b=0;b<t.length;b++){const E=t[b][0],P=t[b][1]?{[Mpe]:!0}:{[Ipe]:!0};E.indexOf("-")>=0?P[l2]=!0:xc.test(E)?Ec.test(E)?P[ly]=!0:P[s2]=!0:P[i2]=!0,oL(n,E,E,P)}return oL(n,"localhost",Vy,{ascii:!0}),n.jd=new Zi(Nw),{start:n,tokens:im({groups:e},G$)}}function K$(t,e){const n=Vpe(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,o=[];let i=0,s=0;for(;s<r;){let a=t,l=null,u=0,f=null,h=-1,p=-1;for(;s<r&&(l=a.go(n[s]));)a=l,a.accepts()?(h=0,p=0,f=a):h>=0&&(h+=n[s].length,p++),u+=n[s].length,i+=n[s].length,s++;i-=h,s-=p,u-=h,o.push({t:f.t,v:e.slice(i-u,i),s:i-u,e:i})}return o}function Vpe(t){const e=[],n=t.length;let r=0;for(;r<n;){let o=t.charCodeAt(r),i,s=o<55296||o>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function zu(t,e,n,r,o){let i;const s=e.length;for(let a=0;a<s-1;a++){const l=e[a];t.j[l]?i=t.j[l]:(i=new Zi(r),i.jr=o.slice(),t.j[l]=i),t=i}return i=new Zi(n),i.jr=o.slice(),t.j[e[s-1]]=i,i}function sL(t){const e=[],n=[];let r=0,o="0123456789";for(;r<t.length;){let i=0;for(;o.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let s=parseInt(t.substring(r,r+i),10);s>0;s--)n.pop();r+=i}else n.push(t[r]),r++}return e}const jy={defaultProtocol:"http",events:null,format:aL,formatHref:aL,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function mM(t,e=null){let n=im({},jy);t&&(n=im(n,t instanceof mM?t.o:t));const r=n.ignoreTags,o=[];for(let i=0;i<r.length;i++)o.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}mM.prototype={o:jy,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let o=this.o[t];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:jy[t],typeof o=="function"&&r&&(o=o(e,n))):typeof o=="function"&&r&&(o=o(e,n.t,n)),o)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function aL(t){return t}function W$(t,e){this.t="token",this.v=t,this.tk=e}W$.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=jy.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),i=this.toFormattedString(t),s={},a=t.get("className",n,e),l=t.get("target",n,e),u=t.get("rel",n,e),f=t.getObj("attributes",n,e),h=t.getObj("events",n,e);return s.href=r,a&&(s.class=a),l&&(s.target=l),u&&(s.rel=u),f&&im(s,f),{tagName:o,attributes:s,content:i,eventListeners:h}}};function pS(t,e){class n extends W${constructor(o,i){super(o,i),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const lL=pS("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),cL=pS("text"),jpe=pS("nl"),Ib=pS("url",{isLink:!0,toHref(t=jy.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Vy&&t[1].t===ed}}),ta=t=>new Zi(t);function Bpe({groups:t}){const e=t.domain.concat([ww,Sw,Wu,xw,Ew,_w,kw,Tw,na,cM,dy,Aw,Rw,Mw,Sl,Nw,hy,Iw]),n=[Cw,ed,dM,Cl,fM,dy,fy,hM,pM,uw,dw,cy,uy,aw,sw,lw,cw,fw,hw,pw,mw,gw,yw,vw,bw],r=[ww,Cw,Sw,xw,Ew,_w,kw,Tw,na,cy,uy,dy,Aw,Rw,Mw,fy,Sl,Nw,hy,Iw],o=ta(),i=We(o,hy);tn(i,r,i),tn(i,t.domain,i);const s=ta(),a=ta(),l=ta();tn(o,t.domain,s),tn(o,t.scheme,a),tn(o,t.slashscheme,l),tn(s,r,i),tn(s,t.domain,s);const u=We(s,Wu);We(i,Wu,u),We(a,Wu,u),We(l,Wu,u);const f=We(i,Cl);tn(f,r,i),tn(f,t.domain,i);const h=ta();tn(u,t.domain,h),tn(h,t.domain,h);const p=We(h,Cl);tn(p,t.domain,h);const g=ta(lL);tn(p,t.tld,g),tn(p,t.utld,g),We(u,Vy,g);const v=We(h,na);We(v,na,v),tn(v,t.domain,h),tn(g,t.domain,h),We(g,Cl,p),We(g,na,v);const b=We(g,ed);tn(b,t.numeric,lL);const E=We(s,na),T=We(s,Cl);We(E,na,E),tn(E,t.domain,s),tn(T,r,i),tn(T,t.domain,s);const P=ta(Ib);tn(T,t.tld,P),tn(T,t.utld,P),tn(P,t.domain,s),tn(P,r,i),We(P,Cl,T),We(P,na,E),We(P,Wu,u);const D=We(P,ed),z=ta(Ib);tn(D,t.numeric,z);const V=ta(Ib),$=ta();tn(V,e,V),tn(V,n,$),tn($,e,V),tn($,n,$),We(P,Sl,V),We(z,Sl,V);const O=We(a,ed),R=We(l,ed),M=We(R,Sl),B=We(M,Sl);tn(a,t.domain,s),We(a,Cl,T),We(a,na,E),tn(l,t.domain,s),We(l,Cl,T),We(l,na,E),tn(O,t.domain,V),We(O,Sl,V),We(O,fy,V),tn(B,t.domain,V),tn(B,e,V),We(B,Sl,V);const q=[[cy,uy],[sw,aw],[lw,cw],[uw,dw],[fw,hw],[pw,mw],[gw,yw],[vw,bw]];for(let K=0;K<q.length;K++){const[F,ne]=q[K],oe=We(V,F);We($,F,oe),We(oe,ne,V);const j=ta(Ib);tn(oe,e,j);const U=ta();tn(oe,n),tn(j,e,j),tn(j,n,U),tn(U,e,j),tn(U,n,U),We(j,ne,V),We(U,ne,V)}return We(o,Vy,P),We(o,uM,jpe),{start:o,tokens:G$}}function $pe(t,e,n){let r=n.length,o=0,i=[],s=[];for(;o<r;){let a=t,l=null,u=null,f=0,h=null,p=-1;for(;o<r&&!(l=a.go(n[o].t));)s.push(n[o++]);for(;o<r&&(u=l||a.go(n[o].t));)l=null,a=u,a.accepts()?(p=0,h=a):p>=0&&p++,o++,f++;if(p<0)o-=f,o<r&&(s.push(n[o]),o++);else{s.length>0&&(i.push(Q_(cL,e,s)),s=[]),o-=p,f-=p;const g=h.t,v=n.slice(o-f,o);i.push(Q_(g,e,v))}}return s.length>0&&i.push(Q_(cL,e,s)),i}function Q_(t,e,n){const r=n[0].s,o=n[n.length-1].e,i=e.slice(r,o);return new t(i,n)}const Hpe=typeof console<"u"&&console&&console.warn||(()=>{}),Fpe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",yr={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function zpe(){return Zi.groups={},yr.scanner=null,yr.parser=null,yr.tokenQueue=[],yr.pluginQueue=[],yr.customSchemes=[],yr.initialized=!1,yr}function uL(t,e=!1){if(yr.initialized&&Hpe(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Fpe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);yr.customSchemes.push([t,e])}function Upe(){yr.scanner=Lpe(yr.customSchemes);for(let t=0;t<yr.tokenQueue.length;t++)yr.tokenQueue[t][1]({scanner:yr.scanner});yr.parser=Bpe(yr.scanner.tokens);for(let t=0;t<yr.pluginQueue.length;t++)yr.pluginQueue[t][1]({scanner:yr.scanner,parser:yr.parser});return yr.initialized=!0,yr}function gM(t){return yr.initialized||Upe(),$pe(yr.parser.start,t,K$(yr.scanner.start,t))}gM.scan=K$;function Y$(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new mM(n),o=gM(t),i=[];for(let s=0;s<o.length;s++){const a=o[s];a.isLink&&(!e||a.t===e)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}const yM="[\0- -\u2029]",qpe=new RegExp(yM),Gpe=new RegExp(`${yM}$`),Kpe=new RegExp(yM,"g");function Wpe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function Ype(t){return new nn({key:new Nn("autolink"),appendTransaction:(e,n,r)=>{const o=e.some(u=>u.docChanged)&&!n.doc.eq(r.doc),i=e.some(u=>u.getMeta("preventAutolink"));if(!o||i)return;const{tr:s}=r,a=eM(n.doc,[...e]);if(v$(a).forEach(({newRange:u})=>{const f=g$(r.doc,u,g=>g.isTextblock);let h,p;if(f.length>1)h=f[0],p=r.doc.textBetween(h.pos,h.pos+h.node.nodeSize,void 0," ");else if(f.length){const g=r.doc.textBetween(u.from,u.to," "," ");if(!Gpe.test(g))return;h=f[0],p=r.doc.textBetween(h.pos,u.to,void 0," ")}if(h&&p){const g=p.split(qpe).filter(Boolean);if(g.length<=0)return!1;const v=g[g.length-1],b=h.pos+p.lastIndexOf(v);if(!v)return!1;const E=gM(v).map(T=>T.toObject(t.defaultProtocol));if(!Wpe(E))return!1;E.filter(T=>T.isLink).map(T=>({...T,from:b+T.start+1,to:b+T.end+1})).filter(T=>r.schema.marks.code?!r.doc.rangeHasMark(T.from,T.to,r.schema.marks.code):!0).filter(T=>t.validate(T.value)).filter(T=>t.shouldAutoLink(T.value)).forEach(T=>{tM(T.from,T.to,r.doc).some(P=>P.mark.type===t.type)||s.addMark(T.from,T.to,t.type.create({href:T.href}))})}}),!!s.steps.length)return s}})}function Xpe(t){return new nn({key:new Nn("handleClickLink"),props:{handleClick:(e,n,r)=>{var o,i;if(r.button!==0||!e.editable)return!1;let s=r.target;const a=[];for(;s.nodeName!=="DIV";)a.push(s),s=s.parentNode;if(!a.find(p=>p.nodeName==="A"))return!1;const l=y$(e.state,t.type.name),u=r.target,f=(o=u?.href)!==null&&o!==void 0?o:l.href,h=(i=u?.target)!==null&&i!==void 0?i:l.target;return u&&f?(window.open(f,h),!0):!1}}})}function Qpe(t){return new nn({key:new Nn("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:o}=e,{selection:i}=o,{empty:s}=i;if(s)return!1;let a="";r.content.forEach(u=>{a+=u.textContent});const l=Y$(a,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===a);return!a||!l?!1:t.editor.commands.setMark(t.type,{href:l.href})}}})}function Sf(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!t||t.replace(Kpe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Zpe=Zo.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){uL(t);return}uL(t.scheme,t.optionalSlashes)})},onDestroy(){zpe()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Sf(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Sf(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Sf(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Rs(this.options.HTMLAttributes,t),0]:["a",Rs(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Sf(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Sf(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ih({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,o=Y$(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:s=>!!Sf(s,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(Ype({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!Sf(o,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(Xpe({type:this.type})),this.options.linkOnPaste&&t.push(Qpe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),Jpe=Kl.create({name:"text",group:"inline"}),da=()=>new Map,h2=t=>{const e=da();return t.forEach((n,r)=>{e.set(r,n)}),e},Xl=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},eme=(t,e)=>{const n=[];for(const[r,o]of t)n.push(e(o,r));return n},tme=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},ah=()=>new Set,Z_=t=>t[t.length-1],nme=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},Md=Array.from,rme=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},p2=Array.isArray;class X${constructor(){this._observers=da()}on(e,n){return Xl(this._observers,e,ah).add(n),n}once(e,n){const r=(...o)=>{this.off(e,r),n(...o)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Md((this._observers.get(e)||da()).values()).forEach(r=>r(...n))}destroy(){this._observers=da()}}const Qc=Math.floor,c1=Math.abs,Fc=(t,e)=>t<e?t:e,Qa=(t,e)=>t>e?t:e,Q$=t=>t!==0?t<0:1/t<0,dL=1,fL=2,J_=4,ek=8,By=32,zc=64,Ri=128,ome=1<<29,mS=31,m2=63,Uf=127,ime=2147483647,Z$=Number.MAX_SAFE_INTEGER,sme=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&Qc(t)===t),ame=String.fromCharCode,lme=t=>t.toLowerCase(),cme=/^\s*/g,ume=t=>t.replace(cme,""),dme=/([A-Z])/g,hL=(t,e)=>ume(t.replace(dme,n=>`${e}${lme(n)}`)),fme=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=e.codePointAt(o);return r},$y=typeof TextEncoder<"u"?new TextEncoder:null,hme=t=>$y.encode(t),pme=$y?hme:fme;let py=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});py&&py.decode(new Uint8Array).length===1&&(py=null);class _v{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const kv=()=>new _v,mme=t=>{const e=kv();return t(e),Fa(e)},gme=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},Fa=t=>{const e=new Uint8Array(gme(t));let n=0;for(let r=0;r<t.bufs.length;r++){const o=t.bufs[r];e.set(o,n),n+=o.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},yme=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(Qa(n,e)*2),t.cpos=0)},ko=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},g2=ko,wn=(t,e)=>{for(;e>Uf;)ko(t,Ri|Uf&e),e=Qc(e/128);ko(t,Uf&e)},vM=(t,e)=>{const n=Q$(e);for(n&&(e=-e),ko(t,(e>m2?Ri:0)|(n?zc:0)|m2&e),e=Qc(e/64);e>0;)ko(t,(e>Uf?Ri:0)|Uf&e),e=Qc(e/128)},y2=new Uint8Array(3e4),vme=y2.length/3,bme=(t,e)=>{if(e.length<vme){const n=$y.encodeInto(e,y2).written||0;wn(t,n);for(let r=0;r<n;r++)ko(t,y2[r])}else ws(t,pme(e))},wme=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;wn(t,r);for(let o=0;o<r;o++)ko(t,n.codePointAt(o))},Pp=$y&&$y.encodeInto?bme:wme,gS=(t,e)=>{const n=t.cbuf.length,r=t.cpos,o=Fc(n-r,e.length),i=e.length-o;t.cbuf.set(e.subarray(0,o),r),t.cpos+=o,i>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Qa(n*2,i)),t.cbuf.set(e.subarray(o)),t.cpos=i)},ws=(t,e)=>{wn(t,e.byteLength),gS(t,e)},bM=(t,e)=>{yme(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},Cme=(t,e)=>bM(t,4).setFloat32(0,e,!1),Sme=(t,e)=>bM(t,8).setFloat64(0,e,!1),xme=(t,e)=>bM(t,8).setBigInt64(0,e,!1),pL=new DataView(new ArrayBuffer(4)),Eme=t=>(pL.setFloat32(0,t),pL.getFloat32(0)===t),sm=(t,e)=>{switch(typeof e){case"string":ko(t,119),Pp(t,e);break;case"number":sme(e)&&c1(e)<=ime?(ko(t,125),vM(t,e)):Eme(e)?(ko(t,124),Cme(t,e)):(ko(t,123),Sme(t,e));break;case"bigint":ko(t,122),xme(t,e);break;case"object":if(e===null)ko(t,126);else if(p2(e)){ko(t,117),wn(t,e.length);for(let n=0;n<e.length;n++)sm(t,e[n])}else if(e instanceof Uint8Array)ko(t,116),ws(t,e);else{ko(t,118);const n=Object.keys(e);wn(t,n.length);for(let r=0;r<n.length;r++){const o=n[r];Pp(t,o),sm(t,e[o])}}break;case"boolean":ko(t,e?120:121);break;default:ko(t,127)}};class mL extends _v{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&wn(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const gL=t=>{t.count>0&&(vM(t.encoder,t.count===1?t.s:-t.s),t.count>1&&wn(t.encoder,t.count-2))};class u1{constructor(){this.encoder=new _v,this.s=0,this.count=0}write(e){this.s===e?this.count++:(gL(this),this.count=1,this.s=e)}toUint8Array(){return gL(this),Fa(this.encoder)}}const yL=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);vM(t.encoder,e),t.count>1&&wn(t.encoder,t.count-2)}};class tk{constructor(){this.encoder=new _v,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(yL(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return yL(this),Fa(this.encoder)}}class _me{constructor(){this.sarr=[],this.s="",this.lensE=new u1}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new _v;return this.sarr.push(this.s),this.s="",Pp(e,this.sarr.join("")),gS(e,this.lensE.toUint8Array()),Fa(e)}}const Id=t=>new Error(t),Ga=()=>{throw Id("Method unimplemented")},Ms=()=>{throw Id("Unexpected case")},J$=Id("Unexpected end of array"),eH=Id("Integer out of Range");class yS{constructor(e){this.arr=e,this.pos=0}}const Rm=t=>new yS(t),kme=t=>t.pos!==t.arr.length,Tme=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},Cs=t=>Tme(t,cn(t)),am=t=>t.arr[t.pos++],cn=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const o=t.arr[t.pos++];if(e=e+(o&Uf)*n,n*=128,o<Ri)return e;if(e>Z$)throw eH}throw J$},wM=t=>{let e=t.arr[t.pos++],n=e&m2,r=64;const o=(e&zc)>0?-1:1;if((e&Ri)===0)return o*n;const i=t.arr.length;for(;t.pos<i;){if(e=t.arr[t.pos++],n=n+(e&Uf)*r,r*=128,e<Ri)return o*n;if(n>Z$)throw eH}throw J$},Ame=t=>{let e=cn(t);if(e===0)return"";{let n=String.fromCodePoint(am(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(am(t));else for(;e>0;){const r=e<1e4?e:1e4,o=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,o),e-=r}return decodeURIComponent(escape(n))}},Rme=t=>py.decode(Cs(t)),Lp=py?Rme:Ame,CM=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},Mme=t=>CM(t,4).getFloat32(0,!1),Ime=t=>CM(t,8).getFloat64(0,!1),Nme=t=>CM(t,8).getBigInt64(0,!1),Dme=[t=>{},t=>null,wM,Mme,Ime,Nme,t=>!1,t=>!0,Lp,t=>{const e=cn(t),n={};for(let r=0;r<e;r++){const o=Lp(t);n[o]=Hy(t)}return n},t=>{const e=cn(t),n=[];for(let r=0;r<e;r++)n.push(Hy(t));return n},Cs],Hy=t=>Dme[127-am(t)](t);class vL extends yS{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),kme(this)?this.count=cn(this)+1:this.count=-1),this.count--,this.s}}class d1 extends yS{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=wM(this);const e=Q$(this.s);this.count=1,e&&(this.s=-this.s,this.count=cn(this)+2)}return this.count--,this.s}}class nk extends yS{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=wM(this),n=e&1;this.diff=Qc(e/2),this.count=1,n&&(this.count=cn(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Ome{constructor(e){this.decoder=new d1(e),this.str=Lp(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const Pme=crypto.getRandomValues.bind(crypto),Lme=Math.random,tH=()=>Pme(new Uint32Array(1))[0],Vme=t=>t[Qc(Lme()*t.length)],jme="10000000-1000-4000-8000"+-1e11,Bme=()=>jme.replace(/[018]/g,t=>(t^tH()&15>>t/4).toString(16)),$me=Date.now,bL=t=>new Promise(t);Promise.all.bind(Promise);const wL=t=>t===void 0?null:t;class Hme{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let nH=new Hme,Fme=!0;try{typeof localStorage<"u"&&localStorage&&(nH=localStorage,Fme=!1)}catch{}const zme=nH,Ume=Object.assign,rH=Object.keys,qme=(t,e)=>{for(const n in t)e(t[n],n)},CL=t=>rH(t).length,Gme=t=>{for(const e in t)return!1;return!0},oH=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},Kme=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Wme=(t,e)=>t===e||CL(t)===CL(e)&&oH(t,(n,r)=>(n!==void 0||Kme(e,r))&&e[r]===n),Yme=Object.freeze,iH=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&iH(t[e])}return Yme(t)},SM=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&SM(t,e,n+1)}},Xme=t=>t,Qme=(t,e)=>e.includes(t);var sH={};const lm=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",aH=typeof window<"u"&&typeof document<"u"&&!lm;let wl;const Zme=()=>{if(wl===void 0)if(lm){wl=da();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&wl.set(e,""),e=r):e!==null&&(wl.set(e,r),e=null)}e!==null&&wl.set(e,"")}else typeof location=="object"?(wl=da(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");wl.set(`--${hL(e,"-")}`,n),wl.set(`-${hL(e,"-")}`,n)}})):wl=da();return wl},v2=t=>Zme().has(t),Dw=t=>wL(lm?sH[t.toUpperCase().replaceAll("-","_")]:zme.getItem(t)),lH=t=>v2("--"+t)||Dw(t)!==null;lH("production");const Jme=lm&&Qme(sH.FORCE_COLOR,["true","1","2"]),ege=Jme||!v2("--no-colors")&&!lH("no-color")&&(!lm||process.stdout.isTTY)&&(!lm||v2("--color")||Dw("COLORTERM")!==null||(Dw("TERM")||"").includes("color")),tge=t=>new Uint8Array(t),nge=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=ame(t[n]);return btoa(e)},rge=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),oge=aH?nge:rge,ige=t=>{const e=tge(t.byteLength);return e.set(t),e},sge=t=>mme(e=>sm(e,t));class age{constructor(e,n){this.left=e,this.right=n}}const _c=(t,e)=>new age(t,e),lge=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const cge=t=>eme(t,(e,n)=>`${n}:${e};`).join(""),uge=t=>class{constructor(n){this._=n}destroy(){t(this._)}},dge=uge(clearTimeout),xM=(t,e)=>new dge(setTimeout(e,t)),nu=Symbol,cH=nu(),uH=nu(),fge=nu(),hge=nu(),pge=nu(),dH=nu(),mge=nu(),EM=nu(),gge=nu(),yge=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const o=t[r];if(o===void 0)break;if(o.constructor===String||o.constructor===Number)e.push(o);else if(o.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const o=t[r];o instanceof Symbol||n.push(o)}return n},vge={[cH]:_c("font-weight","bold"),[uH]:_c("font-weight","normal"),[fge]:_c("color","blue"),[pge]:_c("color","green"),[hge]:_c("color","grey"),[dH]:_c("color","red"),[mge]:_c("color","purple"),[EM]:_c("color","orange"),[gge]:_c("color","black")},bge=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[],r=da();let o=[],i=0;for(;i<t.length;i++){const s=t[i],a=vge[s];if(a!==void 0)r.set(a.left,a.right);else{if(s===void 0)break;if(s.constructor===String||s.constructor===Number){const l=cge(r);i>0||l.length>0?(e.push("%c"+s),n.push(l)):e.push(s)}else break}}for(i>0&&(o=n,o.unshift(e.join("")));i<t.length;i++){const s=t[i];s instanceof Symbol||o.push(s)}return o},fH=ege?bge:yge,wge=(...t)=>{console.log(...fH(t)),pH.forEach(e=>e.print(t))},hH=(...t)=>{console.warn(...fH(t)),t.unshift(EM),pH.forEach(e=>e.print(t))},pH=ah(),mH=t=>({[Symbol.iterator](){return this},next:t}),Cge=(t,e)=>mH(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),rk=(t,e)=>mH(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class _M{constructor(e,n){this.clock=e,this.len=n}}class Mm{constructor(){this.clients=new Map}}const Nd=(t,e,n)=>e.clients.forEach((r,o)=>{const i=t.doc.store.clients.get(o);if(i!=null){const s=i[i.length-1],a=s.id.clock+s.length;for(let l=0,u=r[l];l<r.length&&u.clock<a;u=r[++l])RH(t,i,u.clock,u.len,n)}}),Sge=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const o=Qc((n+r)/2),i=t[o],s=i.clock;if(s<=e){if(e<s+i.len)return o;n=o+1}else r=o-1}return null},Im=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&Sge(n,e.clock)!==null},kM=t=>{t.clients.forEach(e=>{e.sort((o,i)=>o.clock-i.clock);let n,r;for(n=1,r=1;n<e.length;n++){const o=e[r-1],i=e[n];o.clock+o.len>=i.clock?o.len=Qa(o.len,i.clock+i.len-o.clock):(r<n&&(e[r]=i),r++)}e.length=r})},b2=t=>{const e=new Mm;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,o)=>{if(!e.clients.has(o)){const i=r.slice();for(let s=n+1;s<t.length;s++)nme(i,t[s].clients.get(o)||[]);e.clients.set(o,i)}});return kM(e),e},Fy=(t,e,n,r)=>{Xl(t.clients,e,()=>[]).push(new _M(n,r))},gH=()=>new Mm,yH=t=>{const e=gH();return t.clients.forEach((n,r)=>{const o=[];for(let i=0;i<n.length;i++){const s=n[i];if(s.deleted){const a=s.id.clock;let l=s.length;if(i+1<n.length)for(let u=n[i+1];i+1<n.length&&u.deleted;u=n[++i+1])l+=u.length;o.push(new _M(a,l))}}o.length>0&&e.clients.set(r,o)}),e},Nm=(t,e)=>{wn(t.restEncoder,e.clients.size),Md(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),wn(t.restEncoder,n);const o=r.length;wn(t.restEncoder,o);for(let i=0;i<o;i++){const s=r[i];t.writeDsClock(s.clock),t.writeDsLen(s.len)}})},TM=t=>{const e=new Mm,n=cn(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const o=cn(t.restDecoder),i=cn(t.restDecoder);if(i>0){const s=Xl(e.clients,o,()=>[]);for(let a=0;a<i;a++)s.push(new _M(t.readDsClock(),t.readDsLen()))}}return e},SL=(t,e,n)=>{const r=new Mm,o=cn(t.restDecoder);for(let i=0;i<o;i++){t.resetDsCurVal();const s=cn(t.restDecoder),a=cn(t.restDecoder),l=n.clients.get(s)||[],u=Wr(n,s);for(let f=0;f<a;f++){const h=t.readDsClock(),p=h+t.readDsLen();if(h<u){u<p&&Fy(r,s,u,p-u);let g=ga(l,h),v=l[g];for(!v.deleted&&v.id.clock<h&&(l.splice(g+1,0,$w(e,v,h-v.id.clock)),g++);g<l.length&&(v=l[g++],v.id.clock<p);)v.deleted||(p<v.id.clock+v.length&&l.splice(g,0,$w(e,v,p-v.id.clock)),v.delete(e))}else Fy(r,s,h,p-h)}}if(r.clients.size>0){const i=new lh;return wn(i.restEncoder,0),Nm(i,r),i.toUint8Array()}return null},vH=tH;class Fd extends X${constructor({guid:e=Bme(),collectionid:n=null,gc:r=!0,gcFilter:o=()=>!0,meta:i=null,autoLoad:s=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=o,this.clientID=vH(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new TH,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=s,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=bL(u=>{this.on("load",()=>{this.isLoaded=!0,u(this)})});const l=()=>bL(u=>{const f=h=>{(h===void 0||h===!0)&&(this.off("sync",f),u())};this.on("sync",f)});this.on("sync",u=>{u===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=u===void 0||u===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&ir(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Md(this.subdocs).map(e=>e.guid))}transact(e,n=null){return ir(this,e,n)}get(e,n=Ro){const r=Xl(this.share,e,()=>{const i=new n;return i._integrate(this,null),i}),o=r.constructor;if(n!==Ro&&o!==n)if(o===Ro){const i=new n;i._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=i}),i._start=r._start;for(let s=i._start;s!==null;s=s.right)s.parent=i;return i._length=r._length,this.share.set(e,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,Bp)}getText(e=""){return this.get(e,Dd)}getMap(e=""){return this.get(e,um)}getXmlElement(e=""){return this.get(e,Ai)}getXmlFragment(e=""){return this.get(e,ch)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,Md(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Fd({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,ir(e.parent.doc,r=>{const o=n.doc;e.deleted||r.subdocsAdded.add(o),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class bH{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return cn(this.restDecoder)}readDsLen(){return cn(this.restDecoder)}}class wH extends bH{readLeftID(){return Gt(cn(this.restDecoder),cn(this.restDecoder))}readRightID(){return Gt(cn(this.restDecoder),cn(this.restDecoder))}readClient(){return cn(this.restDecoder)}readInfo(){return am(this.restDecoder)}readString(){return Lp(this.restDecoder)}readParentInfo(){return cn(this.restDecoder)===1}readTypeRef(){return cn(this.restDecoder)}readLen(){return cn(this.restDecoder)}readAny(){return Hy(this.restDecoder)}readBuf(){return ige(Cs(this.restDecoder))}readJSON(){return JSON.parse(Lp(this.restDecoder))}readKey(){return Lp(this.restDecoder)}}class xge{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=cn(this.restDecoder),this.dsCurrVal}readDsLen(){const e=cn(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class cm extends xge{constructor(e){super(e),this.keys=[],cn(e),this.keyClockDecoder=new nk(Cs(e)),this.clientDecoder=new d1(Cs(e)),this.leftClockDecoder=new nk(Cs(e)),this.rightClockDecoder=new nk(Cs(e)),this.infoDecoder=new vL(Cs(e),am),this.stringDecoder=new Ome(Cs(e)),this.parentInfoDecoder=new vL(Cs(e),am),this.typeRefDecoder=new d1(Cs(e)),this.lenDecoder=new d1(Cs(e))}readLeftID(){return new Vp(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Vp(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Hy(this.restDecoder)}readBuf(){return Cs(this.restDecoder)}readJSON(){return Hy(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class CH{constructor(){this.restEncoder=kv()}toUint8Array(){return Fa(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){wn(this.restEncoder,e)}writeDsLen(e){wn(this.restEncoder,e)}}class Tv extends CH{writeLeftID(e){wn(this.restEncoder,e.client),wn(this.restEncoder,e.clock)}writeRightID(e){wn(this.restEncoder,e.client),wn(this.restEncoder,e.clock)}writeClient(e){wn(this.restEncoder,e)}writeInfo(e){g2(this.restEncoder,e)}writeString(e){Pp(this.restEncoder,e)}writeParentInfo(e){wn(this.restEncoder,e?1:0)}writeTypeRef(e){wn(this.restEncoder,e)}writeLen(e){wn(this.restEncoder,e)}writeAny(e){sm(this.restEncoder,e)}writeBuf(e){ws(this.restEncoder,e)}writeJSON(e){Pp(this.restEncoder,JSON.stringify(e))}writeKey(e){Pp(this.restEncoder,e)}}class SH{constructor(){this.restEncoder=kv(),this.dsCurrVal=0}toUint8Array(){return Fa(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,wn(this.restEncoder,n)}writeDsLen(e){e===0&&Ms(),wn(this.restEncoder,e-1),this.dsCurrVal+=e}}class lh extends SH{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new tk,this.clientEncoder=new u1,this.leftClockEncoder=new tk,this.rightClockEncoder=new tk,this.infoEncoder=new mL(g2),this.stringEncoder=new _me,this.parentInfoEncoder=new mL(g2),this.typeRefEncoder=new u1,this.lenEncoder=new u1}toUint8Array(){const e=kv();return wn(e,0),ws(e,this.keyClockEncoder.toUint8Array()),ws(e,this.clientEncoder.toUint8Array()),ws(e,this.leftClockEncoder.toUint8Array()),ws(e,this.rightClockEncoder.toUint8Array()),ws(e,Fa(this.infoEncoder)),ws(e,this.stringEncoder.toUint8Array()),ws(e,Fa(this.parentInfoEncoder)),ws(e,this.typeRefEncoder.toUint8Array()),ws(e,this.lenEncoder.toUint8Array()),gS(e,Fa(this.restEncoder)),Fa(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){sm(this.restEncoder,e)}writeBuf(e){ws(this.restEncoder,e)}writeJSON(e){sm(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const Ege=(t,e,n,r)=>{r=Qa(r,e[0].id.clock);const o=ga(e,r);wn(t.restEncoder,e.length-o),t.writeClient(n),wn(t.restEncoder,r);const i=e[o];i.write(t,r-i.id.clock);for(let s=o+1;s<e.length;s++)e[s].write(t,0)},AM=(t,e,n)=>{const r=new Map;n.forEach((o,i)=>{Wr(e,i)>o&&r.set(i,o)}),Av(e).forEach((o,i)=>{n.has(i)||r.set(i,0)}),wn(t.restEncoder,r.size),Md(r.entries()).sort((o,i)=>i[0]-o[0]).forEach(([o,i])=>{Ege(t,e.clients.get(o),o,i)})},_ge=(t,e)=>{const n=da(),r=cn(t.restDecoder);for(let o=0;o<r;o++){const i=cn(t.restDecoder),s=new Array(i),a=t.readClient();let l=cn(t.restDecoder);n.set(a,{i:0,refs:s});for(let u=0;u<i;u++){const f=t.readInfo();switch(mS&f){case 0:{const h=t.readLen();s[u]=new aa(Gt(a,l),h),l+=h;break}case 10:{const h=cn(t.restDecoder);s[u]=new la(Gt(a,l),h),l+=h;break}default:{const h=(f&(zc|Ri))===0,p=new pr(Gt(a,l),null,(f&Ri)===Ri?t.readLeftID():null,null,(f&zc)===zc?t.readRightID():null,h?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,h&&(f&By)===By?t.readString():null,QH(t,f));s[u]=p,l+=p.length}}}}return n},kge=(t,e,n)=>{const r=[];let o=Md(n.keys()).sort((g,v)=>g-v);if(o.length===0)return null;const i=()=>{if(o.length===0)return null;let g=n.get(o[o.length-1]);for(;g.refs.length===g.i;)if(o.pop(),o.length>0)g=n.get(o[o.length-1]);else return null;return g};let s=i();if(s===null)return null;const a=new TH,l=new Map,u=(g,v)=>{const b=l.get(g);(b==null||b>v)&&l.set(g,v)};let f=s.refs[s.i++];const h=new Map,p=()=>{for(const g of r){const v=g.id.client,b=n.get(v);b?(b.i--,a.clients.set(v,b.refs.slice(b.i)),n.delete(v),b.i=0,b.refs=[]):a.clients.set(v,[g]),o=o.filter(E=>E!==v)}r.length=0};for(;;){if(f.constructor!==la){const v=Xl(h,f.id.client,()=>Wr(e,f.id.client))-f.id.clock;if(v<0)r.push(f),u(f.id.client,f.id.clock-1),p();else{const b=f.getMissing(t,e);if(b!==null){r.push(f);const E=n.get(b)||{refs:[],i:0};if(E.refs.length===E.i)u(b,Wr(e,b)),p();else{f=E.refs[E.i++];continue}}else(v===0||v<f.length)&&(f.integrate(t,v),h.set(f.id.client,f.id.clock+f.length))}}if(r.length>0)f=r.pop();else if(s!==null&&s.i<s.refs.length)f=s.refs[s.i++];else{if(s=i(),s===null)break;f=s.refs[s.i++]}}if(a.clients.size>0){const g=new lh;return AM(g,a,new Map),wn(g.restEncoder,0),{missing:l,update:g.toUint8Array()}}return null},Tge=(t,e)=>AM(t,e.doc.store,e.beforeState),Age=(t,e,n,r=new cm(t))=>ir(e,o=>{o.local=!1;let i=!1;const s=o.doc,a=s.store,l=_ge(r,s),u=kge(o,a,l),f=a.pendingStructs;if(f){for(const[p,g]of f.missing)if(g<Wr(a,p)){i=!0;break}if(u){for(const[p,g]of u.missing){const v=f.missing.get(p);(v==null||v>g)&&f.missing.set(p,g)}f.update=Pw([f.update,u.update])}}else a.pendingStructs=u;const h=SL(r,o,a);if(a.pendingDs){const p=new cm(Rm(a.pendingDs));cn(p.restDecoder);const g=SL(p,o,a);h&&g?a.pendingDs=Pw([h,g]):a.pendingDs=h||g}else a.pendingDs=h;if(i){const p=a.pendingStructs.update;a.pendingStructs=null,Ow(o.doc,p)}},n,!1),Ow=(t,e,n,r=cm)=>{const o=Rm(e);Age(o,t,n,new r(o))},xL=(t,e,n)=>Ow(t,e,n,wH),Rge=(t,e,n=new Map)=>{AM(t,e.store,n),Nm(t,yH(e.store))},Mge=(t,e=new Uint8Array([0]),n=new lh)=>{const r=xH(e);Rge(n,t,r);const o=[n.toUint8Array()];if(t.store.pendingDs&&o.push(t.store.pendingDs),t.store.pendingStructs&&o.push(Yge(t.store.pendingStructs.update,e)),o.length>1){if(n.constructor===Tv)return Kge(o.map((i,s)=>s===0?i:Qge(i)));if(n.constructor===lh)return Pw(o)}return o[0]},EL=(t,e)=>Mge(t,e,new Tv),Ige=t=>{const e=new Map,n=cn(t.restDecoder);for(let r=0;r<n;r++){const o=cn(t.restDecoder),i=cn(t.restDecoder);e.set(o,i)}return e},xH=t=>Ige(new bH(Rm(t))),EH=(t,e)=>(wn(t.restEncoder,e.size),Md(e.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{wn(t.restEncoder,n),wn(t.restEncoder,r)}),t),Nge=(t,e)=>EH(t,Av(e.store)),Dge=(t,e=new SH)=>(t instanceof Map?EH(e,t):Nge(e,t),e.toUint8Array()),Oge=t=>Dge(t,new CH);class Pge{constructor(){this.l=[]}}const _L=()=>new Pge,kL=(t,e)=>t.l.push(e),TL=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(o=>e!==o),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},_H=(t,e,n)=>SM(t.l,[e,n]);class Vp{constructor(e,n){this.client=e,this.clock=n}}const Cp=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,Gt=(t,e)=>new Vp(t,e),zy=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw Ms()},Uy=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};class qy{constructor(e,n,r,o=0){this.type=e,this.tname=n,this.item=r,this.assoc=o}}const my=t=>new qy(t.type==null?null:Gt(t.type.client,t.type.clock),t.tname??null,t.item==null?null:Gt(t.item.client,t.item.clock),t.assoc==null?0:t.assoc);class Lge{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}}const Vge=(t,e,n=0)=>new Lge(t,e,n),Nb=(t,e,n)=>{let r=null,o=null;return t._item===null?o=zy(t):r=Gt(t._item.id.client,t._item.id.clock),new qy(r,o,e,n)},ok=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return Nb(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return Nb(t,Gt(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return Nb(t,r.lastId,n);r=r.right}return Nb(t,null,n)},jge=(t,e)=>{const n=jp(t,e),r=e.clock-n.id.clock;return{item:n,diff:r}},Bge=(t,e,n=!0)=>{const r=e.store,o=t.item,i=t.type,s=t.tname,a=t.assoc;let l=null,u=0;if(o!==null){if(Wr(r,o.client)<=o.clock)return null;const f=n?x2(r,o):jge(r,o),h=f.item;if(!(h instanceof pr))return null;if(l=h.parent,l._item===null||!l._item.deleted){u=h.deleted||!h.countable?0:f.diff+(a>=0?0:1);let p=h.left;for(;p!==null;)!p.deleted&&p.countable&&(u+=p.length),p=p.left}}else{if(s!==null)l=e.get(s);else if(i!==null){if(Wr(r,i.client)<=i.clock)return null;const{item:f}=n?x2(r,i):{item:jp(r,i)};if(f instanceof pr&&f.content instanceof rl)l=f.content.type;else return null}else throw Ms();a>=0?u=l._length:u=0}return Vge(l,u,t.assoc)},AL=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&Cp(t.item,e.item)&&Cp(t.type,e.type)&&t.assoc===e.assoc;class RM{constructor(e,n){this.ds=e,this.sv=n}}const kH=(t,e)=>new RM(t,e),ik=t=>kH(yH(t.store),Av(t.store)),kf=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!Im(e.ds,t.id),w2=(t,e)=>{const n=Xl(t.meta,w2,ah),r=t.doc.store;n.has(e)||(e.sv.forEach((o,i)=>{o<Wr(r,i)&&es(t,Gt(i,o))}),Nd(t,e.ds,o=>{}),n.add(e))};class TH{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Av=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const o=n[n.length-1];e.set(r,o.id.clock+o.length)}),e},Wr=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},AH=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw Ms()}n.push(e)},ga=(t,e)=>{let n=0,r=t.length-1,o=t[r],i=o.id.clock;if(i===e)return r;let s=Qc(e/(i+o.length-1)*r);for(;n<=r;){if(o=t[s],i=o.id.clock,i<=e){if(e<i+o.length)return s;n=s+1}else r=s-1;s=Qc((n+r)/2)}throw Ms()},$ge=(t,e)=>{const n=t.clients.get(e.client);return n[ga(n,e.clock)]},jp=$ge,C2=(t,e,n)=>{const r=ga(e,n),o=e[r];return o.id.clock<n&&o instanceof pr?(e.splice(r+1,0,$w(t,o,n-o.id.clock)),r+1):r},es=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[C2(t,n,e.clock)]},RL=(t,e,n)=>{const r=e.clients.get(n.client),o=ga(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==aa&&r.splice(o+1,0,$w(t,i,n.clock-i.id.clock+1)),i},Hge=(t,e,n)=>{const r=t.clients.get(e.id.client);r[ga(r,e.id.clock)]=n},RH=(t,e,n,r,o)=>{if(r===0)return;const i=n+r;let s=C2(t,e,n),a;do a=e[s++],i<a.id.clock+a.length&&C2(t,e,i),o(a);while(s<e.length&&e[s].id.clock<i)};class Fge{constructor(e,n,r){this.doc=e,this.deleteSet=new Mm,this.beforeState=Av(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const ML=(t,e)=>e.deleteSet.clients.size===0&&!tme(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(kM(e.deleteSet),Tge(t,e),Nm(t,e.deleteSet),!0),IL=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&Xl(t.changed,e,ah).add(n)},f1=(t,e)=>{let n=t[e],r=t[e-1],o=e;for(;o>0;n=r,r=t[--o-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof pr&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const i=e-o;return i&&t.splice(e+1-i,i),i},zge=(t,e,n)=>{for(const[r,o]of t.clients.entries()){const i=e.clients.get(r);for(let s=o.length-1;s>=0;s--){const a=o[s],l=a.clock+a.len;for(let u=ga(i,a.clock),f=i[u];u<i.length&&f.id.clock<l;f=i[++u]){const h=i[u];if(a.clock+a.len<=h.id.clock)break;h instanceof pr&&h.deleted&&!h.keep&&n(h)&&h.gc(e,!1)}}}},Uge=(t,e)=>{t.clients.forEach((n,r)=>{const o=e.clients.get(r);for(let i=n.length-1;i>=0;i--){const s=n[i],a=Fc(o.length-1,1+ga(o,s.clock+s.len-1));for(let l=a,u=o[l];l>0&&u.id.clock>=s.clock;u=o[l])l-=1+f1(o,l)}})},MH=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,o=r.store,i=n.deleteSet,s=n._mergeStructs;try{kM(i),n.afterState=Av(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((l,u)=>a.push(()=>{(u._item===null||!u._item.deleted)&&u._callObserver(n,l)})),a.push(()=>{n.changedParentTypes.forEach((l,u)=>{u._dEH.l.length>0&&(u._item===null||!u._item.deleted)&&(l=l.filter(f=>f.target._item===null||!f.target._item.deleted),l.forEach(f=>{f.currentTarget=u,f._path=null}),l.sort((f,h)=>f.path.length-h.path.length),_H(u._dEH,l,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),SM(a,[]),n._needFormattingCleanup&&dye(n)}finally{r.gc&&zge(i,o,r.gcFilter),Uge(i,o),n.afterState.forEach((f,h)=>{const p=n.beforeState.get(h)||0;if(p!==f){const g=o.clients.get(h),v=Qa(ga(g,p),1);for(let b=g.length-1;b>=v;)b-=1+f1(g,b)}});for(let f=s.length-1;f>=0;f--){const{client:h,clock:p}=s[f].id,g=o.clients.get(h),v=ga(g,p);v+1<g.length&&f1(g,v+1)>1||v>0&&f1(g,v)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(wge(EM,cH,"[yjs] ",uH,dH,"Changed the client-id because another client seems to be using it."),r.clientID=vH()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const f=new Tv;ML(f,n)&&r.emit("update",[f.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const f=new lh;ML(f,n)&&r.emit("updateV2",[f.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:u}=n;(a.size>0||u.size>0||l.size>0)&&(a.forEach(f=>{f.clientID=r.clientID,f.collectionid==null&&(f.collectionid=r.collectionid),r.subdocs.add(f)}),u.forEach(f=>r.subdocs.delete(f)),r.emit("subdocs",[{loaded:l,added:a,removed:u},r,n]),u.forEach(f=>f.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):MH(t,e+1)}}},ir=(t,e,n=null,r=!0)=>{const o=t._transactionCleanups;let i=!1,s=null;t._transaction===null&&(i=!0,t._transaction=new Fge(t,n,r),o.push(t._transaction),o.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{s=e(t._transaction)}finally{if(i){const a=t._transaction===o[0];t._transaction=null,a&&MH(o,0)}}return s};class qge{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}}const NL=(t,e,n)=>{Nd(t,n.deletions,r=>{r instanceof pr&&e.scope.some(o=>o===t.doc||Uy(o,r))&&VM(r,!1)})},DL=(t,e,n)=>{let r=null;const o=t.doc,i=t.scope;ir(o,a=>{for(;e.length>0&&t.currStackItem===null;){const l=o.store,u=e.pop(),f=new Set,h=[];let p=!1;Nd(a,u.insertions,g=>{if(g instanceof pr){if(g.redone!==null){let{item:v,diff:b}=x2(l,g.id);b>0&&(v=es(a,Gt(v.id.client,v.id.clock+b))),g=v}!g.deleted&&i.some(v=>v===a.doc||Uy(v,g))&&h.push(g)}}),Nd(a,u.deletions,g=>{g instanceof pr&&i.some(v=>v===a.doc||Uy(v,g))&&!Im(u.insertions,g.id)&&f.add(g)}),f.forEach(g=>{p=XH(a,g,f,u.insertions,t.ignoreRemoteMapChanges,t)!==null||p});for(let g=h.length-1;g>=0;g--){const v=h[g];t.deleteFilter(v)&&(v.delete(a),p=!0)}t.currStackItem=p?u:null}a.changed.forEach((l,u)=>{l.has(null)&&u._searchMarker&&(u._searchMarker.length=0)}),r=a},t);const s=t.currStackItem;if(s!=null){const a=r.changedParentTypes;t.emit("stack-item-popped",[{stackItem:s,type:n,changedParentTypes:a,origin:t},t]),t.currStackItem=null}return s};class IH extends X${constructor(e,{captureTimeout:n=500,captureTransaction:r=l=>!0,deleteFilter:o=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:s=!1,doc:a=p2(e)?e[0].doc:e instanceof Fd?e:e.doc}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=o,i.add(this),this.trackedOrigins=i,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=s,this.captureTimeout=n,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(E=>l.changedParentTypes.has(E)||E===this.doc)||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const u=this.undoing,f=this.redoing,h=u?this.redoStack:this.undoStack;u?this.stopCapturing():f||this.clear(!1,!0);const p=new Mm;l.afterState.forEach((E,T)=>{const P=l.beforeState.get(T)||0,D=E-P;D>0&&Fy(p,T,P,D)});const g=$me();let v=!1;if(this.lastChange>0&&g-this.lastChange<this.captureTimeout&&h.length>0&&!u&&!f){const E=h[h.length-1];E.deletions=b2([E.deletions,l.deleteSet]),E.insertions=b2([E.insertions,p])}else h.push(new qge(l.deleteSet,p)),v=!0;!u&&!f&&(this.lastChange=g),Nd(l,l.deleteSet,E=>{E instanceof pr&&this.scope.some(T=>T===l.doc||Uy(T,E))&&VM(E,!0)});const b=[{stackItem:h[h.length-1],origin:l.origin,type:u?"redo":"undo",changedParentTypes:l.changedParentTypes},this];v?this.emit("stack-item-added",b):this.emit("stack-item-updated",b)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const n=new Set(this.scope);e=p2(e)?e:[e],e.forEach(r=>{n.has(r)||(n.add(r),(r instanceof Ro?r.doc!==this.doc:r!==this.doc)&&hH("[yjs#509] Not same Y.Doc"),this.scope.push(r))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(o=>NL(r,this,o)),this.undoStack=[]),n&&(this.redoStack.forEach(o=>NL(r,this,o)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=DL(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=DL(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*Gge(t){const e=cn(t.restDecoder);for(let n=0;n<e;n++){const r=cn(t.restDecoder),o=t.readClient();let i=cn(t.restDecoder);for(let s=0;s<r;s++){const a=t.readInfo();if(a===10){const l=cn(t.restDecoder);yield new la(Gt(o,i),l),i+=l}else if((mS&a)!==0){const l=(a&(zc|Ri))===0,u=new pr(Gt(o,i),null,(a&Ri)===Ri?t.readLeftID():null,null,(a&zc)===zc?t.readRightID():null,l?t.readParentInfo()?t.readString():t.readLeftID():null,l&&(a&By)===By?t.readString():null,QH(t,a));yield u,i+=u.length}else{const l=t.readLen();yield new aa(Gt(o,i),l),i+=l}}}}class MM{constructor(e,n){this.gen=Gge(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===la);return this.curr}}class IM{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const Kge=t=>Pw(t,wH,Tv),Wge=(t,e)=>{if(t.constructor===aa){const{client:n,clock:r}=t.id;return new aa(Gt(n,r+e),t.length-e)}else if(t.constructor===la){const{client:n,clock:r}=t.id;return new la(Gt(n,r+e),t.length-e)}else{const n=t,{client:r,clock:o}=n.id;return new pr(Gt(r,o+e),null,Gt(r,o+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},Pw=(t,e=cm,n=lh)=>{if(t.length===1)return t[0];const r=t.map(f=>new e(Rm(f)));let o=r.map(f=>new MM(f,!0)),i=null;const s=new n,a=new IM(s);for(;o=o.filter(p=>p.curr!==null),o.sort((p,g)=>{if(p.curr.id.client===g.curr.id.client){const v=p.curr.id.clock-g.curr.id.clock;return v===0?p.curr.constructor===g.curr.constructor?0:p.curr.constructor===la?1:-1:v}else return g.curr.id.client-p.curr.id.client}),o.length!==0;){const f=o[0],h=f.curr.id.client;if(i!==null){let p=f.curr,g=!1;for(;p!==null&&p.id.clock+p.length<=i.struct.id.clock+i.struct.length&&p.id.client>=i.struct.id.client;)p=f.next(),g=!0;if(p===null||p.id.client!==h||g&&p.id.clock>i.struct.id.clock+i.struct.length)continue;if(h!==i.struct.id.client)td(a,i.struct,i.offset),i={struct:p,offset:0},f.next();else if(i.struct.id.clock+i.struct.length<p.id.clock)if(i.struct.constructor===la)i.struct.length=p.id.clock+p.length-i.struct.id.clock;else{td(a,i.struct,i.offset);const v=p.id.clock-i.struct.id.clock-i.struct.length;i={struct:new la(Gt(h,i.struct.id.clock+i.struct.length),v),offset:0}}else{const v=i.struct.id.clock+i.struct.length-p.id.clock;v>0&&(i.struct.constructor===la?i.struct.length-=v:p=Wge(p,v)),i.struct.mergeWith(p)||(td(a,i.struct,i.offset),i={struct:p,offset:0},f.next())}}else i={struct:f.curr,offset:0},f.next();for(let p=f.curr;p!==null&&p.id.client===h&&p.id.clock===i.struct.id.clock+i.struct.length&&p.constructor!==la;p=f.next())td(a,i.struct,i.offset),i={struct:p,offset:0}}i!==null&&(td(a,i.struct,i.offset),i=null),NM(a);const l=r.map(f=>TM(f)),u=b2(l);return Nm(s,u),s.toUint8Array()},Yge=(t,e,n=cm,r=lh)=>{const o=xH(e),i=new r,s=new IM(i),a=new n(Rm(t)),l=new MM(a,!1);for(;l.curr;){const f=l.curr,h=f.id.client,p=o.get(h)||0;if(l.curr.constructor===la){l.next();continue}if(f.id.clock+f.length>p)for(td(s,f,Qa(p-f.id.clock,0)),l.next();l.curr&&l.curr.id.client===h;)td(s,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===h&&l.curr.id.clock+l.curr.length<=p;)l.next()}NM(s);const u=TM(a);return Nm(i,u),i.toUint8Array()},NH=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:Fa(t.encoder.restEncoder)}),t.encoder.restEncoder=kv(),t.written=0)},td=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&NH(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),wn(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},NM=t=>{NH(t);const e=t.encoder.restEncoder;wn(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];wn(e,r.written),gS(e,r.restEncoder)}},Xge=(t,e,n,r)=>{const o=new n(Rm(t)),i=new MM(o,!1),s=new r,a=new IM(s);for(let u=i.curr;u!==null;u=i.next())td(a,e(u),0);NM(a);const l=TM(o);return Nm(s,l),s.toUint8Array()},Qge=t=>Xge(t,Xme,cm,Tv),OL="You must not compute changes after the event-handler fired.";class vS{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Zge(this.currentTarget,this.target))}deletes(e){return Im(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Id(OL);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(o=>{if(o!==null){const i=n._map.get(o);let s,a;if(this.adds(i)){let l=i.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(i))if(l!==null&&this.deletes(l))s="delete",a=Z_(l.content.getContent());else return;else l!==null&&this.deletes(l)?(s="update",a=Z_(l.content.getContent())):(s="add",a=void 0)}else if(this.deletes(i))s="delete",a=Z_(i.content.getContent());else return;e.set(o,{action:s,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Id(OL);const n=this.target,r=ah(),o=ah(),i=[];if(e={added:r,deleted:o,delta:i,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const l=()=>{a&&i.push(a)};for(let u=n._start;u!==null;u=u.right)u.deleted?this.deletes(u)&&!this.adds(u)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=u.length,o.add(u)):this.adds(u)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(u.content.getContent()),r.add(u)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=u.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const Zge=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,o=e._item.parent._start;for(;o!==e._item&&o!==null;)!o.deleted&&o.countable&&(r+=o.length),o=o.right;n.unshift(r)}e=e._item.parent}return n},gi=()=>{hH("Invalid access: Add Yjs type to a document before reading data.")},DH=80;let DM=0;class Jge{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=DM++}}const eye=t=>{t.timestamp=DM++},OH=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=DM++},tye=(t,e,n)=>{if(t.length>=DH){const r=t.reduce((o,i)=>o.timestamp<i.timestamp?o:i);return OH(r,e,n),r}else{const r=new Jge(e,n);return t.push(r),r}},bS=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((i,s)=>c1(e-i.index)<c1(e-s.index)?i:s);let r=t._start,o=0;for(n!==null&&(r=n.p,o=n.index,eye(n));r.right!==null&&o<e;){if(!r.deleted&&r.countable){if(e<o+r.length)break;o+=r.length}r=r.right}for(;r.left!==null&&o>e;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return n!==null&&c1(n.index-o)<r.parent.length/DH?(OH(n,r,o),n):tye(t._searchMarker,r,o)},Gy=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const o=t[r];if(n>0){let i=o.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(o.index-=i.length);if(i===null||i.marker===!0){t.splice(r,1);continue}o.p=i,i.marker=!0}(e<o.index||n>0&&e===o.index)&&(o.index=Qa(e,o.index+n))}},wS=(t,e,n)=>{const r=t,o=e.changedParentTypes;for(;Xl(o,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;_H(r._eH,n,e)};class Ro{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=_L(),this._dEH=_L(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw Ga()}clone(){throw Ga()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){kL(this._eH,e)}observeDeep(e){kL(this._dEH,e)}unobserve(e){TL(this._eH,e)}unobserveDeep(e){TL(this._dEH,e)}toJSON(){}}const PH=(t,e,n)=>{t.doc??gi(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const o=[];let i=t._start;for(;i!==null&&r>0;){if(i.countable&&!i.deleted){const s=i.content.getContent();if(s.length<=e)e-=s.length;else{for(let a=e;a<s.length&&r>0;a++)o.push(s[a]),r--;e=0}}i=i.right}return o},LH=t=>{t.doc??gi();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let o=0;o<r.length;o++)e.push(r[o])}n=n.right}return e},VH=(t,e)=>{const n=[];let r=t._start;for(;r!==null;){if(r.countable&&kf(r,e)){const o=r.content.getContent();for(let i=0;i<o.length;i++)n.push(o[i])}r=r.right}return n},Ky=(t,e)=>{let n=0,r=t._start;for(t.doc??gi();r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let i=0;i<o.length;i++)e(o[i],n++,t)}r=r.right}},jH=(t,e)=>{const n=[];return Ky(t,(r,o)=>{n.push(e(r,o,t))}),n},nye=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const o=n[r++];return n.length<=r&&(n=null),{done:!1,value:o}}}},BH=(t,e)=>{t.doc??gi();const n=bS(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},Lw=(t,e,n,r)=>{let o=n;const i=t.doc,s=i.clientID,a=i.store,l=n===null?e._start:n.right;let u=[];const f=()=>{u.length>0&&(o=new pr(Gt(s,Wr(a,s)),o,o&&o.lastId,l,l&&l.id,e,null,new uh(u)),o.integrate(t,0),u=[])};r.forEach(h=>{if(h===null)u.push(h);else switch(h.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(h);break;default:switch(f(),h.constructor){case Uint8Array:case ArrayBuffer:o=new pr(Gt(s,Wr(a,s)),o,o&&o.lastId,l,l&&l.id,e,null,new Rv(new Uint8Array(h))),o.integrate(t,0);break;case Fd:o=new pr(Gt(s,Wr(a,s)),o,o&&o.lastId,l,l&&l.id,e,null,new Mv(h)),o.integrate(t,0);break;default:if(h instanceof Ro)o=new pr(Gt(s,Wr(a,s)),o,o&&o.lastId,l,l&&l.id,e,null,new rl(h)),o.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),f()},$H=()=>Id("Length exceeded!"),HH=(t,e,n,r)=>{if(n>e._length)throw $H();if(n===0)return e._searchMarker&&Gy(e._searchMarker,n,r.length),Lw(t,e,null,r);const o=n,i=bS(e,n);let s=e._start;for(i!==null&&(s=i.p,n-=i.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&es(t,Gt(s.id.client,s.id.clock+n));break}n-=s.length}return e._searchMarker&&Gy(e._searchMarker,o,r.length),Lw(t,e,s,r)},rye=(t,e,n)=>{let o=(e._searchMarker||[]).reduce((i,s)=>s.index>i.index?s:i,{index:0,p:e._start}).p;if(o)for(;o.right;)o=o.right;return Lw(t,e,o,n)},FH=(t,e,n,r)=>{if(r===0)return;const o=n,i=r,s=bS(e,n);let a=e._start;for(s!==null&&(a=s.p,n-=s.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&es(t,Gt(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&es(t,Gt(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw $H();e._searchMarker&&Gy(e._searchMarker,o,-i+r)},Vw=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},OM=(t,e,n,r)=>{const o=e._map.get(n)||null,i=t.doc,s=i.clientID;let a;if(r==null)a=new uh([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new uh([r]);break;case Uint8Array:a=new Rv(r);break;case Fd:a=new Mv(r);break;default:if(r instanceof Ro)a=new rl(r);else throw new Error("Unexpected content type")}new pr(Gt(s,Wr(i.store,s)),o,o&&o.lastId,null,null,e,n,a).integrate(t,0)},PM=(t,e)=>{t.doc??gi();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},zH=t=>{const e={};return t.doc??gi(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},UH=(t,e)=>{t.doc??gi();const n=t._map.get(e);return n!==void 0&&!n.deleted},oye=(t,e)=>{const n={};return t._map.forEach((r,o)=>{let i=r;for(;i!==null&&(!e.sv.has(i.id.client)||i.id.clock>=(e.sv.get(i.id.client)||0));)i=i.left;i!==null&&kf(i,e)&&(n[o]=i.content.getContent()[i.length-1])}),n},Db=t=>(t.doc??gi(),Cge(t._map.entries(),e=>!e[1].deleted));class iye extends vS{}class Bp extends Ro{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new Bp;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Bp}clone(){const e=new Bp;return e.insert(0,this.toArray().map(n=>n instanceof Ro?n.clone():n)),e}get length(){return this.doc??gi(),this._length}_callObserver(e,n){super._callObserver(e,n),wS(this,e,new iye(this,e))}insert(e,n){this.doc!==null?ir(this.doc,r=>{HH(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?ir(this.doc,n=>{rye(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?ir(this.doc,r=>{FH(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return BH(this,e)}toArray(){return LH(this)}slice(e=0,n=this.length){return PH(this,e,n)}toJSON(){return this.map(e=>e instanceof Ro?e.toJSON():e)}map(e){return jH(this,e)}forEach(e){Ky(this,e)}[Symbol.iterator](){return nye(this)}_write(e){e.writeTypeRef(Mye)}}const sye=t=>new Bp;class aye extends vS{constructor(e,n,r){super(e,n),this.keysChanged=r}}class um extends Ro{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,o)=>{this.set(o,r)}),this._prelimContent=null}_copy(){return new um}clone(){const e=new um;return this.forEach((n,r)=>{e.set(r,n instanceof Ro?n.clone():n)}),e}_callObserver(e,n){wS(this,e,new aye(this,e,n))}toJSON(){this.doc??gi();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const o=n.content.getContent()[n.length-1];e[r]=o instanceof Ro?o.toJSON():o}}),e}get size(){return[...Db(this)].length}keys(){return rk(Db(this),e=>e[0])}values(){return rk(Db(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return rk(Db(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??gi(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?ir(this.doc,n=>{Vw(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?ir(this.doc,r=>{OM(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return PM(this,e)}has(e){return UH(this,e)}clear(){this.doc!==null?ir(this.doc,e=>{this.forEach(function(n,r,o){Vw(e,o,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(Iye)}}const lye=t=>new um,ad=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&Wme(t,e);class S2{constructor(e,n,r,o){this.left=e,this.right=n,this.index=r,this.currentAttributes=o}forward(){switch(this.right===null&&Ms(),this.right.content.constructor){case lo:this.right.deleted||Dm(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const PL=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case lo:e.right.deleted||Dm(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&es(t,Gt(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Ob=(t,e,n,r)=>{const o=new Map,i=r?bS(e,n):null;if(i){const s=new S2(i.p.left,i.p,i.index,o);return PL(t,s,n-i.index)}else{const s=new S2(null,e._start,0,o);return PL(t,s,n)}},qH=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===lo&&ad(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=t.doc,i=o.clientID;r.forEach((s,a)=>{const l=n.left,u=n.right,f=new pr(Gt(i,Wr(o.store,i)),l,l&&l.lastId,u,u&&u.id,e,null,new lo(a,s));f.integrate(t,0),n.right=f,n.forward()})},Dm=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},GH=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===lo&&ad(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},KH=(t,e,n,r)=>{const o=t.doc,i=o.clientID,s=new Map;for(const a in r){const l=r[a],u=n.currentAttributes.get(a)??null;if(!ad(u,l)){s.set(a,u);const{left:f,right:h}=n;n.right=new pr(Gt(i,Wr(o.store,i)),f,f&&f.lastId,h,h&&h.id,e,null,new lo(a,l)),n.right.integrate(t,0),n.forward()}}return s},sk=(t,e,n,r,o)=>{n.currentAttributes.forEach((p,g)=>{o[g]===void 0&&(o[g]=null)});const i=t.doc,s=i.clientID;GH(n,o);const a=KH(t,e,n,o),l=r.constructor===String?new Za(r):r instanceof Ro?new rl(r):new wh(r);let{left:u,right:f,index:h}=n;e._searchMarker&&Gy(e._searchMarker,n.index,l.getLength()),f=new pr(Gt(s,Wr(i.store,s)),u,u&&u.lastId,f,f&&f.id,e,null,l),f.integrate(t,0),n.right=f,n.index=h,n.forward(),qH(t,e,n,a)},LL=(t,e,n,r,o)=>{const i=t.doc,s=i.clientID;GH(n,o);const a=KH(t,e,n,o);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===lo));){if(!n.right.deleted)switch(n.right.content.constructor){case lo:{const{key:l,value:u}=n.right.content,f=o[l];if(f!==void 0){if(ad(f,u))a.delete(l);else{if(r===0)break e;a.set(l,u)}n.right.delete(t)}else n.currentAttributes.set(l,u);break}default:r<n.right.length&&es(t,Gt(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new pr(Gt(s,Wr(i.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Za(l)),n.right.integrate(t,0),n.forward()}qH(t,e,n,a)},WH=(t,e,n,r,o)=>{let i=e;const s=da();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===lo){const u=i.content;s.set(u.key,u)}i=i.right}let a=0,l=!1;for(;e!==i;){if(n===e&&(l=!0),!e.deleted){const u=e.content;switch(u.constructor){case lo:{const{key:f,value:h}=u,p=r.get(f)??null;(s.get(f)!==u||p===h)&&(e.delete(t),a++,!l&&(o.get(f)??null)===h&&p!==h&&(p===null?o.delete(f):o.set(f,p))),!l&&!e.deleted&&Dm(o,u);break}}}e=e.right}return a},cye=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===lo){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},uye=t=>{let e=0;return ir(t.doc,n=>{let r=t._start,o=t._start,i=da();const s=h2(i);for(;o;){if(o.deleted===!1)switch(o.content.constructor){case lo:Dm(s,o.content);break;default:e+=WH(n,r,o,i,s),i=h2(s),r=o;break}o=o.right}}),e},dye=t=>{const e=new Set,n=t.doc;for(const[r,o]of t.afterState.entries()){const i=t.beforeState.get(r)||0;o!==i&&RH(t,n.store.clients.get(r),i,o,s=>{!s.deleted&&s.content.constructor===lo&&s.constructor!==aa&&e.add(s.parent)})}ir(n,r=>{Nd(t,t.deleteSet,o=>{if(o instanceof aa||!o.parent._hasFormatting||e.has(o.parent))return;const i=o.parent;o.content.constructor===lo?e.add(i):cye(r,o)});for(const o of e)uye(o)})},VL=(t,e,n)=>{const r=n,o=h2(e.currentAttributes),i=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case rl:case wh:case Za:n<e.right.length&&es(t,Gt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}i&&WH(t,i,e.right,o,e.currentAttributes);const s=(e.left||e.right).parent;return s._searchMarker&&Gy(s._searchMarker,e.index,-r+n),e};class fye extends vS{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(o=>{o===null?this.childListChanged=!0:this.keysChanged.add(o)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];ir(e,r=>{const o=new Map,i=new Map;let s=this.target._start,a=null;const l={};let u="",f=0,h=0;const p=()=>{if(a!==null){let g=null;switch(a){case"delete":h>0&&(g={delete:h}),h=0;break;case"insert":(typeof u=="object"||u.length>0)&&(g={insert:u},o.size>0&&(g.attributes={},o.forEach((v,b)=>{v!==null&&(g.attributes[b]=v)}))),u="";break;case"retain":f>0&&(g={retain:f},Gme(l)||(g.attributes=Ume({},l))),f=0;break}g&&n.push(g),a=null}};for(;s!==null;){switch(s.content.constructor){case rl:case wh:this.adds(s)?this.deletes(s)||(p(),a="insert",u=s.content.getContent()[0],p()):this.deletes(s)?(a!=="delete"&&(p(),a="delete"),h+=1):s.deleted||(a!=="retain"&&(p(),a="retain"),f+=1);break;case Za:this.adds(s)?this.deletes(s)||(a!=="insert"&&(p(),a="insert"),u+=s.content.str):this.deletes(s)?(a!=="delete"&&(p(),a="delete"),h+=s.length):s.deleted||(a!=="retain"&&(p(),a="retain"),f+=s.length);break;case lo:{const{key:g,value:v}=s.content;if(this.adds(s)){if(!this.deletes(s)){const b=o.get(g)??null;ad(b,v)?v!==null&&s.delete(r):(a==="retain"&&p(),ad(v,i.get(g)??null)?delete l[g]:l[g]=v)}}else if(this.deletes(s)){i.set(g,v);const b=o.get(g)??null;ad(b,v)||(a==="retain"&&p(),l[g]=b)}else if(!s.deleted){i.set(g,v);const b=l[g];b!==void 0&&(ad(b,v)?b!==null&&s.delete(r):(a==="retain"&&p(),v===null?delete l[g]:l[g]=v))}s.deleted||(a==="insert"&&p(),Dm(o,s.content));break}}s=s.right}for(p();n.length>0;){const g=n[n.length-1];if(g.retain!==void 0&&g.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class Dd extends Ro{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??gi(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new Dd}clone(){const e=new Dd;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new fye(this,e,n);wS(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??gi();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Za&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?ir(this.doc,r=>{const o=new S2(null,this._start,0,new Map);for(let i=0;i<e.length;i++){const s=e[i];if(s.insert!==void 0){const a=!n&&typeof s.insert=="string"&&i===e.length-1&&o.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof a!="string"||a.length>0)&&sk(r,this,o,a,s.attributes||{})}else s.retain!==void 0?LL(r,this,o,s.retain,s.attributes||{}):s.delete!==void 0&&VL(r,o,s.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??gi();const o=[],i=new Map,s=this.doc;let a="",l=this._start;function u(){if(a.length>0){const h={};let p=!1;i.forEach((v,b)=>{p=!0,h[b]=v});const g={insert:a};p&&(g.attributes=h),o.push(g),a=""}}const f=()=>{for(;l!==null;){if(kf(l,e)||n!==void 0&&kf(l,n))switch(l.content.constructor){case Za:{const h=i.get("ychange");e!==void 0&&!kf(l,e)?(h===void 0||h.user!==l.id.client||h.type!=="removed")&&(u(),i.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!kf(l,n)?(h===void 0||h.user!==l.id.client||h.type!=="added")&&(u(),i.set("ychange",r?r("added",l.id):{type:"added"})):h!==void 0&&(u(),i.delete("ychange")),a+=l.content.str;break}case rl:case wh:{u();const h={insert:l.content.getContent()[0]};if(i.size>0){const p={};h.attributes=p,i.forEach((g,v)=>{p[v]=g})}o.push(h);break}case lo:kf(l,e)&&(u(),Dm(i,l.content));break}l=l.right}u()};return e||n?ir(s,h=>{e&&w2(h,e),n&&w2(h,n),f()},"cleanup"):f(),o}insert(e,n,r){if(n.length<=0)return;const o=this.doc;o!==null?ir(o,i=>{const s=Ob(i,this,e,!r);r||(r={},s.currentAttributes.forEach((a,l)=>{r[l]=a})),sk(i,this,s,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const o=this.doc;o!==null?ir(o,i=>{const s=Ob(i,this,e,!r);sk(i,this,s,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?ir(r,o=>{VL(o,Ob(o,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const o=this.doc;o!==null?ir(o,i=>{const s=Ob(i,this,e,!1);s.right!==null&&LL(i,this,s,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?ir(this.doc,n=>{Vw(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?ir(this.doc,r=>{OM(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return PM(this,e)}getAttributes(){return zH(this)}_write(e){e.writeTypeRef(Nye)}}const hye=t=>new Dd;class ak{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??gi()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Ai||n.constructor===ch)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class ch extends Ro{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new ch}clone(){const e=new ch;return e.insert(0,this.toArray().map(n=>n instanceof Ro?n.clone():n)),e}get length(){return this.doc??gi(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new ak(this,e)}querySelector(e){e=e.toUpperCase();const r=new ak(this,o=>o.nodeName&&o.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),Md(new ak(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){wS(this,e,new gye(this,n,e))}toString(){return jH(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const o=e.createDocumentFragment();return r!==void 0&&r._createAssociation(o,this),Ky(this,i=>{o.insertBefore(i.toDOM(e,n,r),null)}),o}insert(e,n){this.doc!==null?ir(this.doc,r=>{HH(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)ir(this.doc,r=>{const o=e&&e instanceof Ro?e._item:e;Lw(r,this,o,n)});else{const r=this._prelimContent,o=e===null?0:r.findIndex(i=>i===e)+1;if(o===0&&e!==null)throw Id("Reference item not found");r.splice(o,0,...n)}}delete(e,n=1){this.doc!==null?ir(this.doc,r=>{FH(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return LH(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return BH(this,e)}slice(e=0,n=this.length){return PH(this,e,n)}forEach(e){Ky(this,e)}_write(e){e.writeTypeRef(Oye)}}const pye=t=>new ch;class Ai extends ch{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,o)=>{this.setAttribute(o,r)}),this._prelimAttrs=null}_copy(){return new Ai(this.nodeName)}clone(){const e=new Ai(this.nodeName),n=this.getAttributes();return qme(n,(r,o)=>{typeof r=="string"&&e.setAttribute(o,r)}),e.insert(0,this.toArray().map(r=>r instanceof Ro?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const a in e)r.push(a);r.sort();const o=r.length;for(let a=0;a<o;a++){const l=r[a];n.push(l+'="'+e[l]+'"')}const i=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${i}${s}>${super.toString()}</${i}>`}removeAttribute(e){this.doc!==null?ir(this.doc,n=>{Vw(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?ir(this.doc,r=>{OM(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return PM(this,e)}hasAttribute(e){return UH(this,e)}getAttributes(e){return e?oye(this,e):zH(this)}toDOM(e=document,n={},r){const o=e.createElement(this.nodeName),i=this.getAttributes();for(const s in i){const a=i[s];typeof a=="string"&&o.setAttribute(s,a)}return Ky(this,s=>{o.appendChild(s.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(o,this),o}_write(e){e.writeTypeRef(Dye),e.writeKey(this.nodeName)}}const mye=t=>new Ai(t.readKey());class gye extends vS{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(o=>{o===null?this.childListChanged=!0:this.attributesChanged.add(o)})}}class jw extends um{constructor(e){super(),this.hookName=e}_copy(){return new jw(this.hookName)}clone(){const e=new jw(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const o=n[this.hookName];let i;return o!==void 0?i=o.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(Pye),e.writeKey(this.hookName)}}const yye=t=>new jw(t.readKey());class _s extends Dd{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new _s}clone(){const e=new _s;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const o=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(o,this),o}toString(){return this.toDelta().map(e=>{const n=[];for(const o in e.attributes){const i=[];for(const s in e.attributes[o])i.push({key:s,value:e.attributes[o][s]});i.sort((s,a)=>s.key<a.key?-1:1),n.push({nodeName:o,attrs:i})}n.sort((o,i)=>o.nodeName<i.nodeName?-1:1);let r="";for(let o=0;o<n.length;o++){const i=n[o];r+=`<${i.nodeName}`;for(let s=0;s<i.attrs.length;s++){const a=i.attrs[s];r+=` ${a.key}="${a.value}"`}r+=">"}r+=e.insert;for(let o=n.length-1;o>=0;o--)r+=`</${n[o].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(Lye)}}const vye=t=>new _s;class LM{constructor(e,n){this.id=e,this.length=n}get deleted(){throw Ga()}mergeWith(e){return!1}write(e,n,r){throw Ga()}integrate(e,n){throw Ga()}}const bye=0;class aa extends LM{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),AH(e.doc.store,this)}write(e,n){e.writeInfo(bye),e.writeLen(this.length-n)}getMissing(e,n){return null}}class Rv{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Rv(this.content)}splice(e){throw Ga()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const wye=t=>new Rv(t.readBuf());class Wy{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Wy(this.len)}splice(e){const n=new Wy(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){Fy(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const Cye=t=>new Wy(t.readLen()),YH=(t,e)=>new Fd({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Mv{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Mv(YH(this.doc.guid,this.opts))}splice(e){throw Ga()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const Sye=t=>new Mv(YH(t.readString(),t.readAny()));class wh{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new wh(this.embed)}splice(e){throw Ga()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const xye=t=>new wh(t.readJSON());class lo{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new lo(this.key,this.value)}splice(e){throw Ga()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const Eye=t=>new lo(t.readKey(),t.readJSON());class Bw{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Bw(this.arr)}splice(e){const n=new Bw(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];e.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const _ye=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const o=t.readString();o==="undefined"?n.push(void 0):n.push(JSON.parse(o))}return new Bw(n)},kye=Dw("node_env")==="development";class uh{constructor(e){this.arr=e,kye&&iH(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new uh(this.arr)}splice(e){const n=new uh(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];e.writeAny(i)}}getRef(){return 8}}const Tye=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new uh(n)};class Za{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Za(this.str)}splice(e){const n=new Za(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const Aye=t=>new Za(t.readString()),Rye=[sye,lye,hye,mye,pye,yye,vye],Mye=0,Iye=1,Nye=2,Dye=3,Oye=4,Pye=5,Lye=6;class rl{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new rl(this.type._copy())}splice(e){throw Ga()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const Vye=t=>new rl(Rye[t.readTypeRef()](t)),x2=(t,e)=>{let n=e,r=0,o;do r>0&&(n=Gt(n.client,n.clock+r)),o=jp(t,n),r=n.clock-o.id.clock,n=o.redone;while(n!==null&&o instanceof pr);return{item:o,diff:r}},VM=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},$w=(t,e,n)=>{const{client:r,clock:o}=e.id,i=new pr(Gt(r,o+n),e,Gt(r,o+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&i.markDeleted(),e.keep&&(i.keep=!0),e.redone!==null&&(i.redone=Gt(e.redone.client,e.redone.clock+n)),e.right=i,i.right!==null&&(i.right.left=i),t._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),e.length=n,i},jL=(t,e)=>rme(t,n=>Im(n.deletions,e)),XH=(t,e,n,r,o,i)=>{const s=t.doc,a=s.store,l=s.clientID,u=e.redone;if(u!==null)return es(t,u);let f=e.parent._item,h=null,p;if(f!==null&&f.deleted===!0){if(f.redone===null&&(!n.has(f)||XH(t,f,n,r,o,i)===null))return null;for(;f.redone!==null;)f=es(t,f.redone)}const g=f===null?e.parent:f.content.type;if(e.parentSub===null){for(h=e.left,p=e;h!==null;){let T=h;for(;T!==null&&T.parent._item!==f;)T=T.redone===null?null:es(t,T.redone);if(T!==null&&T.parent._item===f){h=T;break}h=h.left}for(;p!==null;){let T=p;for(;T!==null&&T.parent._item!==f;)T=T.redone===null?null:es(t,T.redone);if(T!==null&&T.parent._item===f){p=T;break}p=p.right}}else if(p=null,e.right&&!o){for(h=e;h!==null&&h.right!==null&&(h.right.redone||Im(r,h.right.id)||jL(i.undoStack,h.right.id)||jL(i.redoStack,h.right.id));)for(h=h.right;h.redone;)h=es(t,h.redone);if(h&&h.right!==null)return null}else h=g._map.get(e.parentSub)||null;const v=Wr(a,l),b=Gt(l,v),E=new pr(b,h,h&&h.lastId,p,p&&p.id,g,e.parentSub,e.content.copy());return e.redone=b,VM(E,!0),E.integrate(t,0),E};let pr=class E2 extends LM{constructor(e,n,r,o,i,s,a,l){super(e,l.getLength()),this.origin=r,this.left=n,this.right=o,this.rightOrigin=i,this.parent=s,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?fL:0}set marker(e){(this.info&ek)>0!==e&&(this.info^=ek)}get marker(){return(this.info&ek)>0}get keep(){return(this.info&dL)>0}set keep(e){this.keep!==e&&(this.info^=dL)}get countable(){return(this.info&fL)>0}get deleted(){return(this.info&J_)>0}set deleted(e){this.deleted!==e&&(this.info^=J_)}markDeleted(){this.info|=J_}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Wr(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Wr(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Vp&&this.id.client!==this.parent.client&&this.parent.clock>=Wr(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=RL(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=es(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===aa||this.right&&this.right.constructor===aa)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===E2?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===E2&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Vp){const r=jp(n,this.parent);r.constructor===aa?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=RL(e,e.doc.store,Gt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,o;if(r!==null)o=r.right;else if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start;const i=new Set,s=new Set;for(;o!==null&&o!==this.right;){if(s.add(o),i.add(o),Cp(this.origin,o.origin)){if(o.id.client<this.id.client)r=o,i.clear();else if(Cp(this.rightOrigin,o.rightOrigin))break}else if(o.origin!==null&&s.has(jp(e.doc.store,o.origin)))i.has(jp(e.doc.store,o.origin))||(r=o,i.clear());else break;o=o.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),AH(e.doc.store,this),this.content.integrate(e,this),IL(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new aa(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:Gt(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Cp(e.origin,this.lastId)&&this.right===e&&Cp(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Fy(e.deleteSet,this.id.client,this.id.clock,this.length),IL(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw Ms();this.content.gc(e),n?Hge(e,this,new aa(this.id,this.length)):this.content=new Wy(this.length)}write(e,n){const r=n>0?Gt(this.id.client,this.id.clock+n-1):this.origin,o=this.rightOrigin,i=this.parentSub,s=this.content.getRef()&mS|(r===null?0:Ri)|(o===null?0:zc)|(i===null?0:By);if(e.writeInfo(s),r!==null&&e.writeLeftID(r),o!==null&&e.writeRightID(o),r===null&&o===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const u=zy(a);e.writeParentInfo(!0),e.writeString(u)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===Vp?(e.writeParentInfo(!1),e.writeLeftID(a)):Ms();i!==null&&e.writeString(i)}this.content.write(e,n)}};const QH=(t,e)=>jye[e&mS](t),jye=[()=>{Ms()},Cye,_ye,wye,Aye,xye,Eye,Vye,Tye,Sye,()=>{Ms()}],Bye=10;class la extends LM{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){Ms()}write(e,n){e.writeInfo(Bye),wn(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const ZH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},JH="__ $YJS$ __";ZH[JH]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");ZH[JH]=!0;const $ye=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},Hye=/[\uD800-\uDBFF]/,Fye=/[\uDC00-\uDFFF]/,zye=(t,e)=>{let n=0,r=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;for(n>0&&Hye.test(t[n-1])&&n--;r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1];)r++;return r>0&&Fye.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},Uye=zye,Un=new Nn("y-sync"),ca=new Nn("y-undo"),Gg=new Nn("yjs-cursor"),Ll=(t,e)=>t>>>e|t<<32-e,qye=t=>Ll(t,2)^Ll(t,13)^Ll(t,22),Gye=t=>Ll(t,6)^Ll(t,11)^Ll(t,25),Kye=t=>Ll(t,7)^Ll(t,18)^t>>>3,Wye=t=>Ll(t,17)^Ll(t,19)^t>>>10,Yye=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xye=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class Qye{constructor(){const e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(Xye),this._W=new Uint32Array(e,64,64)}_updateHash(){const e=this._H,n=this._W;for(let h=16;h<64;h++)n[h]=Wye(n[h-2])+n[h-7]+Kye(n[h-15])+n[h-16];let r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],l=e[5],u=e[6],f=e[7];for(let h=0,p,g;h<64;h++)p=f+Gye(a)+(a&l^~a&u)+Yye[h]+n[h]>>>0,g=qye(r)+(r&o^r&i^o&i)>>>0,f=u,u=l,l=a,a=s+p>>>0,s=i,i=o,o=r,r=p+g>>>0;e[0]+=r,e[1]+=o,e[2]+=i,e[3]+=s,e[4]+=a,e[5]+=l,e[6]+=u,e[7]+=f}digest(e){let n=0;for(;n+56<=e.length;){let s=0;for(;s<16&&n+3<e.length;s++)this._W[s]=e[n++]<<24|e[n++]<<16|e[n++]<<8|e[n++];if(n%64!==0){for(this._W.fill(0,s,16);n<e.length;)this._W[s]|=e[n]<<(3-n%4)*8,n++;this._W[s]|=Ri<<(3-n%4)*8}this._updateHash()}const r=n%64!==0;this._W.fill(0,0,16);let o=0;for(;n<e.length;o++)for(let s=3;s>=0&&n<e.length;s--)this._W[o]|=e[n++]<<s*8;r||(this._W[o-(n%4===0?0:1)]|=Ri<<(3-n%4)*8),this._W[14]=e.byteLength/ome,this._W[15]=e.byteLength*8,this._updateHash();const i=new Uint8Array(32);for(let s=0;s<this._H.length;s++)for(let a=0;a<4;a++)i[s*4+a]=this._H[s]>>>(3-a)*8;return i}}const Zye=t=>new Qye().digest(t),Jye=t=>{for(let n=6;n<t.length;n++)t[n%6]=t[n%6]^t[n];return t.slice(0,6)},eve=t=>oge(Jye(Zye(sge(t)))),Hw=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!Im(e.ds,t.id),tve=[{light:"#ecd44433",dark:"#ecd444"}],nve=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const r=ah();t.forEach(o=>r.add(o)),e=e.filter(o=>!r.has(o))}t.set(n,Vme(e))}return t.get(n)},rve=(t,{colors:e=tve,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:o=()=>{},mapping:i}={})=>{let s=!1;const a=new ive(t,i),l=new nn({props:{editable:u=>{const f=Un.getState(u);return f.snapshot==null&&f.prevSnapshot==null}},key:Un,state:{init:(u,f)=>({type:t,doc:t.doc,binding:a,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:n,permanentUserData:r}),apply:(u,f)=>{const h=u.getMeta(Un);if(h!==void 0){f=Object.assign({},f);for(const p in h)f[p]=h[p]}return f.addToHistory=u.getMeta("addToHistory")!==!1,f.isChangeOrigin=h!==void 0&&!!h.isChangeOrigin,f.isUndoRedoOperation=h!==void 0&&!!h.isChangeOrigin&&!!h.isUndoRedoOperation,a.prosemirrorView!==null&&h!==void 0&&(h.snapshot!=null||h.prevSnapshot!=null)&&xM(0,()=>{a.prosemirrorView!=null&&(h.restore==null?a._renderSnapshot(h.snapshot,h.prevSnapshot,f):(a._renderSnapshot(h.snapshot,h.snapshot,f),delete f.restore,delete f.snapshot,delete f.prevSnapshot,a.mux(()=>{a._prosemirrorChanged(a.prosemirrorView.state.doc)})))}),f}},view:u=>(a.initView(u),i==null&&a._forceRerender(),o(),{update:()=>{const f=l.getState(u.state);if(f.snapshot==null&&f.prevSnapshot==null&&(s||u.state.doc.content.findDiffStart(u.state.doc.type.createAndFill().content)!==null)){if(s=!0,f.addToHistory===!1&&!f.isChangeOrigin){const h=ca.getState(u.state),p=h&&h.undoManager;p&&p.stopCapturing()}a.mux(()=>{f.doc.transact(h=>{h.meta.set("addToHistory",f.addToHistory),a._prosemirrorChanged(u.state.doc)},Un)})}},destroy:()=>{a.destroy()}})});return l},ove=(t,e,n)=>{if(e!==null&&e.anchor!==null&&e.head!==null)if(e.type==="all")t.setSelection(new rs(t.doc));else if(e.type==="node"){const r=qf(n.doc,n.type,e.anchor,n.mapping);t.setSelection(ht.create(t.doc,r))}else{const r=qf(n.doc,n.type,e.anchor,n.mapping),o=qf(n.doc,n.type,e.head,n.mapping);if(r!==null&&o!==null){const i=at.between(t.doc.resolve(r),t.doc.resolve(o));t.setSelection(i)}}},Fw=(t,e)=>({type:e.selection.jsonID,anchor:Xy(e.selection.anchor,t.type,t.mapping),head:Xy(e.selection.head,t.type,t.mapping)});class ive{constructor(e,n=new Map){this.type=e,this.prosemirrorView=null,this.mux=$ye(),this.mapping=n,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=Fw(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(aH&&this._domSelectionInView===null&&(xM(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection();if(e==null||e.anchorNode==null)return!1;const n=this.prosemirrorView._root.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const o=n.getBoundingClientRect(),i=lge.documentElement;return o.bottom>=0&&o.right>=0&&o.left<=(window.innerWidth||i.clientWidth||0)&&o.top<=(window.innerHeight||i.clientHeight||0)}renderSnapshot(e,n){n||(n=kH(gH(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(Un,{snapshot:e,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(r=>h1(r,this.prosemirrorView.state.schema,this)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ye(Le.from(e),0,0));n.setMeta(Un,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(o=>h1(o,this.prosemirrorView.state.schema,this)).filter(o=>o!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ye(Le.from(n),0,0));if(e){const o=Fc(Qa(e.anchor,0),r.doc.content.size),i=Fc(Qa(e.head,0),r.doc.content.size);r.setSelection(at.create(r.doc,o,i))}this.prosemirrorView.dispatch(r.setMeta(Un,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,n,r){let o=this.doc,i=this.type;if(e||(e=ik(this.doc)),e instanceof Uint8Array||n instanceof Uint8Array)if((!(e instanceof Uint8Array)||!(n instanceof Uint8Array))&&Ms(),o=new Fd({gc:!1}),Ow(o,n),n=ik(o),Ow(o,e),e=ik(o),i._item===null){const s=Array.from(this.doc.share.keys()).find(a=>this.doc.share.get(a)===this.type);i=o.getXmlFragment(s)}else{const s=o.store.clients.get(i._item.id.client)??[],a=ga(s,i._item.id.clock);i=s[a].content.type}this.mapping.clear(),this.mux(()=>{o.transact(s=>{const a=r.permanentUserData;a&&a.dss.forEach(h=>{Nd(s,h,p=>{})});const l=(h,p)=>{const g=h==="added"?a.getUserByClientId(p.client):a.getUserByDeletedId(p);return{user:g,type:h,color:nve(r.colorMapping,r.colors,g)}},u=VH(i,new RM(n.ds,e.sv)).map(h=>!h._item.deleted||Hw(h._item,e)||Hw(h._item,n)?h1(h,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,n,l):null).filter(h=>h!==null),f=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ye(Le.from(u),0,0));this.prosemirrorView.dispatch(f.setMeta(Un,{isChangeOrigin:!0}))},Un)})}_typeChanged(e,n){if(this.prosemirrorView==null)return;const r=Un.getState(this.prosemirrorView.state);if(e.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const o=(a,l)=>this.mapping.delete(l);Nd(n,n.deleteSet,a=>{if(a.constructor===pr){const l=a.content.type;l&&this.mapping.delete(l)}}),n.changed.forEach(o),n.changedParentTypes.forEach(o);const i=this.type.toArray().map(a=>eF(a,this.prosemirrorView.state.schema,this)).filter(a=>a!==null);let s=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ye(Le.from(i),0,0));ove(s,this.beforeTransactionSelection,this),s=s.setMeta(Un,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof IH}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&s.scrollIntoView(),this.prosemirrorView.dispatch(s)})}_prosemirrorChanged(e){this.doc.transact(()=>{k2(this.doc,this.type,e,this),this.beforeTransactionSelection=Fw(this,this.prosemirrorView.state)},Un)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const eF=(t,e,n,r,o,i)=>{const s=n.mapping.get(t);if(s===void 0){if(t instanceof Ai)return h1(t,e,n,r,o,i);throw Ga()}return s},h1=(t,e,n,r,o,i)=>{const s=[],a=l=>{if(l instanceof Ai){const u=eF(l,e,n,r,o,i);u!==null&&s.push(u)}else{const u=l._item.right?.content?.type;u instanceof Dd&&!u._item.deleted&&u._item.id.client===u.doc.clientID&&(l.applyDelta([{retain:l.length},...u.toDelta()]),u.doc.transact(h=>{u._item.delete(h)}));const f=sve(l,e,n,r,o,i);f!==null&&f.forEach(h=>{h!==null&&s.push(h)})}};r===void 0||o===void 0?t.toArray().forEach(a):VH(t,new RM(o.ds,r.sv)).forEach(a);try{const l=t.getAttributes(r);r!==void 0&&(Hw(t._item,r)?Hw(t._item,o)||(l.ychange=i?i("added",t._item.id):{type:"added"}):l.ychange=i?i("removed",t._item.id):{type:"removed"});const u=e.node(t.nodeName,l,s);return n.mapping.set(t,u),u}catch{return t.doc.transact(u=>{t._item.delete(u)},Un),n.mapping.delete(t),null}},sve=(t,e,n,r,o,i)=>{const s=[],a=t.toDelta(r,o,i);try{for(let l=0;l<a.length;l++){const u=a[l];s.push(e.text(u.insert,fve(u.attributes,e)))}}catch{return t.doc.transact(u=>{t._item.delete(u)},Un),null}return s},ave=(t,e)=>{const n=new _s,r=t.map(o=>({insert:o.text,attributes:rF(o.marks,e)}));return n.applyDelta(r),e.mapping.set(n,t),n},lve=(t,e)=>{const n=new Ai(t.type.name);for(const r in t.attrs){const o=t.attrs[r];o!==null&&r!=="ychange"&&n.setAttribute(r,o)}return n.insert(0,CS(t).map(r=>_2(r,e))),e.mapping.set(n,t),n},_2=(t,e)=>t instanceof Array?ave(t,e):lve(t,e),BL=t=>typeof t=="object"&&t!==null,jM=(t,e)=>{const n=Object.keys(t).filter(o=>t[o]!==null);let r=n.length===(e==null?0:Object.keys(e).filter(o=>e[o]!==null).length);for(let o=0;o<n.length&&r;o++){const i=n[o],s=t[i],a=e[i];r=i==="ychange"||s===a||BL(s)&&BL(a)&&jM(s,a)}return r},CS=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const o=e[r];if(o.isText){const i=[];for(let s=e[r];r<e.length&&s.isText;s=e[++r])i.push(s);r--,n.push(i)}else n.push(o)}return n},tF=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((r,o)=>r.insert===e[o].text&&rH(r.attributes||{}).length===e[o].marks.length&&oH(r.attributes,(i,s)=>{const a=nF(s),l=e[o].marks;return jM(i,l.find(u=>u.type.name===a)?.attrs)}))},Yy=(t,e)=>{if(t instanceof Ai&&!(e instanceof Array)&&T2(t,e)){const n=CS(e);return t._length===n.length&&jM(t.getAttributes(),e.attrs)&&t.toArray().every((r,o)=>Yy(r,n[o]))}return t instanceof _s&&e instanceof Array&&tF(t,e)},zw=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((n,r)=>e[r]===n),$L=(t,e,n)=>{const r=t.toArray(),o=CS(e),i=o.length,s=r.length,a=Fc(s,i);let l=0,u=0,f=!1;for(;l<a;l++){const h=r[l],p=o[l];if(zw(n.mapping.get(h),p))f=!0;else if(!Yy(h,p))break}for(;l+u<a;u++){const h=r[s-u-1],p=o[i-u-1];if(zw(n.mapping.get(h),p))f=!0;else if(!Yy(h,p))break}return{equalityFactor:l+u,foundMappedChild:f}},cve=t=>{let e="",n=t._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof Za?e+=n.content.str:n.content instanceof lo&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},uve=(t,e,n)=>{n.mapping.set(t,e);const{nAttrs:r,str:o}=cve(t),i=e.map(u=>({insert:u.text,attributes:Object.assign({},r,rF(u.marks,n))})),{insert:s,remove:a,index:l}=Uye(o,i.map(u=>u.insert).join(""));t.delete(l,a),t.insert(l,s),t.applyDelta(i.map(u=>({retain:u.insert.length,attributes:u.attributes})))},dve=/(.*)(--[a-zA-Z0-9+/=]{8})$/,nF=t=>dve.exec(t)?.[1]??t,fve=(t,e)=>{const n=[];for(const r in t)n.push(e.mark(nF(r),t[r]));return n},rF=(t,e)=>{const n={};return t.forEach(r=>{if(r.type.name!=="ychange"){const o=Xl(e.isOMark,r.type,()=>!r.type.excludes(r.type));n[o?`${r.type.name}--${eve(r.toJSON())}`:r.type.name]=r.attrs}}),n},k2=(t,e,n,r)=>{if(e instanceof Ai&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(e,n),e instanceof Ai){const h=e.getAttributes(),p=n.attrs;for(const g in p)p[g]!==null?h[g]!==p[g]&&g!=="ychange"&&e.setAttribute(g,p[g]):e.removeAttribute(g);for(const g in h)p[g]===void 0&&e.removeAttribute(g)}const o=CS(n),i=o.length,s=e.toArray(),a=s.length,l=Fc(i,a);let u=0,f=0;for(;u<l;u++){const h=s[u],p=o[u];if(!zw(r.mapping.get(h),p))if(Yy(h,p))r.mapping.set(h,p);else break}for(;f+u<l;f++){const h=s[a-f-1],p=o[i-f-1];if(!zw(r.mapping.get(h),p))if(Yy(h,p))r.mapping.set(h,p);else break}t.transact(()=>{for(;a-u-f>0&&i-u-f>0;){const p=s[u],g=o[u],v=s[a-f-1],b=o[i-f-1];if(p instanceof _s&&g instanceof Array)tF(p,g)||uve(p,g,r),u+=1;else{let E=p instanceof Ai&&T2(p,g),T=v instanceof Ai&&T2(v,b);if(E&&T){const P=$L(p,g,r),D=$L(v,b,r);P.foundMappedChild&&!D.foundMappedChild?T=!1:!P.foundMappedChild&&D.foundMappedChild||P.equalityFactor<D.equalityFactor?E=!1:T=!1}E?(k2(t,p,g,r),u+=1):T?(k2(t,v,b,r),f+=1):(r.mapping.delete(e.get(u)),e.delete(u,1),e.insert(u,[_2(g,r)]),u+=1)}}const h=a-u-f;if(a===1&&i===0&&s[0]instanceof _s?(r.mapping.delete(s[0]),s[0].delete(0,s[0].length)):h>0&&(e.slice(u,u+h).forEach(p=>r.mapping.delete(p)),e.delete(u,h)),u+f<i){const p=[];for(let g=u;g<i-f;g++)p.push(_2(o[g],r));e.insert(u,p)}},Un)},T2=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name;let gy=null;const hve=()=>{const t=gy;gy=null,t.forEach((e,n)=>{const r=n.state.tr,o=Un.getState(n.state);o&&o.binding&&!o.binding.isDestroyed&&(e.forEach((i,s)=>{r.setMeta(s,i)}),n.dispatch(r))})},pve=(t,e,n)=>{gy||(gy=new Map,xM(0,hve)),Xl(gy,t,da).set(e,n)},Xy=(t,e,n)=>{if(t===0)return ok(e,0,e.length===0?-1:0);let r=e._first===null?null:e._first.content.type;for(;r!==null&&e!==r;){if(r instanceof _s){if(r._length>=t)return ok(r,t,e.length===0?-1:0);if(t-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,t--;while(r!==e&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==e&&(r=r._item===null?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&t<o)r=r._first.content.type,t--;else{if(t===1&&r._length===0&&o>1)return new qy(r._item===null?null:r._item.id,r._item===null?zy(r):null,null);if(t-=o,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(t===0)return r=r._item===null?r:r._item.parent,new qy(r._item===null?null:r._item.id,r._item===null?zy(r):null,null);do r=r._item.parent,t--;while(r!==e&&r._item.next===null);r!==e&&(r=r._item.next.content.type)}}}if(r===null)throw Ms();if(t===0&&r.constructor!==_s&&r!==e)return mve(r._item.parent,r._item)}return ok(e,e._length,e.length===0?-1:0)},mve=(t,e)=>{let n=null,r=null;return t._item===null?r=zy(t):n=Gt(t._item.id.client,t._item.id.clock),new qy(n,r,e.id)},qf=(t,e,n,r)=>{const o=Bge(n,t);if(o===null||o.type!==e&&!Uy(e,o.type._item))return null;let i=o.type,s=0;if(i.constructor===_s)s=o.index;else if(i._item===null||!i._item.deleted){let a=i._first,l=0;for(;l<i._length&&l<o.index&&a!==null;){if(!a.deleted){const u=a.content.type;l++,u instanceof _s?s+=u._length:s+=r.get(u).nodeSize}a=a.right}s+=1}for(;i!==e&&i._item!==null;){const a=i._item.parent;if(a._item===null||!a._item.deleted){s+=1;let l=a._first;for(;l!==null;){const u=l.content.type;if(u===i)break;l.deleted||(u instanceof _s?s+=u._length:s+=r.get(u).nodeSize),l=l.right}}i=a}return s-1},gve=(t,e,n)=>t!==e,yve=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null);const r=document.createTextNode(""),o=document.createTextNode("");return e.insertBefore(r,null),e.insertBefore(n,null),e.insertBefore(o,null),e},oF=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),vve=/^#[0-9a-fA-F]{6}$/,HL=(t,e,n,r,o)=>{const i=Un.getState(t),s=i.doc,a=[];return i.snapshot!=null||i.prevSnapshot!=null||i.binding.mapping.size===0?Cn.create(t.doc,[]):(e.getStates().forEach((l,u)=>{if(n(s.clientID,u,l)&&l.cursor!=null){const f=l.user||{};f.color==null?f.color="#ffa500":vve.test(f.color)||console.warn("A user uses an unsupported color format",f),f.name==null&&(f.name=`User: ${u}`);let h=qf(s,i.type,my(l.cursor.anchor),i.binding.mapping),p=qf(s,i.type,my(l.cursor.head),i.binding.mapping);if(h!==null&&p!==null){const g=Qa(t.doc.content.size-1,0);h=Fc(h,g),p=Fc(p,g),a.push(nr.widget(p,()=>r(f,u),{key:u+"",side:10}));const v=Fc(h,p),b=Qa(h,p);a.push(nr.inline(v,b,o(f,u),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),Cn.create(t.doc,a))},bve=(t,{awarenessStateFilter:e=gve,cursorBuilder:n=yve,selectionBuilder:r=oF,getSelection:o=s=>s.selection}={},i="cursor")=>new nn({key:Gg,state:{init(s,a){return HL(a,t,e,n,r)},apply(s,a,l,u){const f=Un.getState(u),h=s.getMeta(Gg);return f&&f.isChangeOrigin||h&&h.awarenessUpdated?HL(u,t,e,n,r):a.map(s.mapping,s.doc)}},props:{decorations:s=>Gg.getState(s)},view:s=>{const a=()=>{s.docView&&pve(s,Gg,{awarenessUpdated:!0})},l=()=>{const u=Un.getState(s.state),f=t.getLocalState()||{};if(s.hasFocus()){const h=o(s.state),p=Xy(h.anchor,u.type,u.binding.mapping),g=Xy(h.head,u.type,u.binding.mapping);(f.cursor==null||!AL(my(f.cursor.anchor),p)||!AL(my(f.cursor.head),g))&&t.setLocalStateField(i,{anchor:p,head:g})}else f.cursor!=null&&qf(u.doc,u.type,my(f.cursor.anchor),u.binding.mapping)!==null&&t.setLocalStateField(i,null)};return t.on("change",a),s.dom.addEventListener("focusin",l),s.dom.addEventListener("focusout",l),{update:l,destroy:()=>{s.dom.removeEventListener("focusin",l),s.dom.removeEventListener("focusout",l),t.off("change",a),t.setLocalStateField(i,null)}}}}),wve=t=>ca.getState(t)?.undoManager?.undo()!=null,Cve=t=>ca.getState(t)?.undoManager?.redo()!=null,Sve=(t,e)=>e==null?ca.getState(t)?.undoManager?.canUndo():wve(t),xve=(t,e)=>e==null?ca.getState(t)?.undoManager?.canRedo():Cve(t),Eve=new Set(["paragraph"]),_ve=(t,e)=>!(t instanceof pr)||!(t.content instanceof rl)||!(t.content.type instanceof Dd||t.content.type instanceof Ai&&e.has(t.content.type.nodeName))||t.content.type._length===0,kve=({protectedNodes:t=Eve,trackedOrigins:e=[],undoManager:n=null}={})=>new nn({key:ca,state:{init:(r,o)=>{const i=Un.getState(o),s=n||new IH(i.type,{trackedOrigins:new Set([Un].concat(e)),deleteFilter:a=>_ve(a,t),captureTransaction:a=>a.meta.get("addToHistory")!==!1});return{undoManager:s,prevSel:null,hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}},apply:(r,o,i,s)=>{const a=Un.getState(s).binding,l=o.undoManager,u=l.undoStack.length>0,f=l.redoStack.length>0;return a?{undoManager:l,prevSel:Fw(a,i),hasUndoOps:u,hasRedoOps:f}:u!==o.hasUndoOps||f!==o.hasRedoOps?Object.assign({},o,{hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}):o}},view:r=>{const o=Un.getState(r.state),i=ca.getState(r.state).undoManager;return i.on("stack-item-added",({stackItem:s})=>{const a=o.binding;a&&s.meta.set(a,ca.getState(r.state).prevSel)}),i.on("stack-item-popped",({stackItem:s})=>{const a=o.binding;a&&(a.beforeTransactionSelection=s.meta.get(a)||a.beforeTransactionSelection)}),{destroy:()=>{i.destroy()}}}});function Tve(t={}){return new nn({view(e){return new Ave(e,t)}})}class Ave{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let i=s=>{this[o](s)};return e.dom.addEventListener(o,i),{name:o,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,o=this.editorView.dom,i=o.getBoundingClientRect(),s=i.width/o.offsetWidth,a=i.height/o.offsetHeight;if(n){let h=e.nodeBefore,p=e.nodeAfter;if(h||p){let g=this.editorView.nodeDOM(this.cursorPos-(h?h.nodeSize:0));if(g){let v=g.getBoundingClientRect(),b=h?v.bottom:v.top;h&&p&&(b=(b+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let E=this.width/2*a;r={left:v.left,right:v.right,top:b-E,bottom:b+E}}}}if(!r){let h=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*s;r={left:h.left-p,right:h.left+p,top:h.top,bottom:h.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,f;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,f=-pageYOffset;else{let h=l.getBoundingClientRect(),p=h.width/l.offsetWidth,g=h.height/l.offsetHeight;u=h.left-l.scrollLeft*p,f=h.top-l.scrollTop*g}this.element.style.left=(r.left-u)/s+"px",this.element.style.top=(r.top-f)/a+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!i){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=oB(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const Rve={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},heading_4:{title:"Heading 4",subtext:"Minor subsection heading",aliases:["h4","heading4","subheading4"],group:"Subheadings"},heading_5:{title:"Heading 5",subtext:"Small subsection heading",aliases:["h5","heading5","subheading5"],group:"Subheadings"},heading_6:{title:"Heading 6",subtext:"Lowest-level heading",aliases:["h6","heading6","subheading6"],group:"Subheadings"},toggle_heading:{title:"Toggle Heading 1",subtext:"Toggleable top-level heading",aliases:["h","heading1","h1","collapsable"],group:"Subheadings"},toggle_heading_2:{title:"Toggle Heading 2",subtext:"Toggleable key section heading",aliases:["h2","heading2","subheading","collapsable"],group:"Subheadings"},toggle_heading_3:{title:"Toggle Heading 3",subtext:"Toggleable subsection and group heading",aliases:["h3","heading3","subheading","collapsable"],group:"Subheadings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},toggle_list:{title:"Toggle List",subtext:"List with hideable sub-items",aliases:["li","list","toggleList","toggle list","collapsable list"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",toggleListItem:"Toggle",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{edited:"edited",save_button_text:"Save",cancel_button_text:"Cancel",actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:t=>`${t} more replies`}},generic:{ctrl_shortcut:"Ctrl"}};var Mve=Object.defineProperty,Ive=(t,e,n)=>e in t?Mve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ee=(t,e,n)=>Ive(t,typeof e!="symbol"?e+"":e,n);function Nve(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function Dve(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Nve(e)}const SS=lr.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const t=window.__TEST_OPTIONS;return t.mockID===void 0?t.mockID=0:t.mockID++,t.mockID.toString()}return T$()},filterTransaction:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:t=>t.getAttribute(`data-${this.options.attributeName}`),renderHTML:t=>{const e={[`data-${this.options.attributeName}`]:t[this.options.attributeName]};return this.options.setIdAttribute?{...e,id:t[this.options.attributeName]}:e}}}}]},addProseMirrorPlugins(){let t=null,e=!1;return[new nn({key:new Nn("uniqueID"),appendTransaction:(n,r,o)=>{const i=n.some(g=>g.docChanged)&&!r.doc.eq(o.doc),s=this.options.filterTransaction&&n.some(g=>{let v,b;return!(!((b=(v=this.options).filterTransaction)===null||b===void 0)&&b.call(v,g))});if(!i||s)return;const{tr:a}=o,{types:l,attributeName:u,generateID:f}=this.options,h=eM(r.doc,n),{mapping:p}=h;if(v$(h).forEach(({newRange:g})=>{const v=g$(o.doc,g,T=>l.includes(T.type.name)),b=v.map(({node:T})=>T.attrs[u]).filter(T=>T!==null),E=Dve(b);v.forEach(({node:T,pos:P})=>{let D;const z=(D=a.doc.nodeAt(P))===null||D===void 0?void 0:D.attrs[u];if(z===null){const $=r.doc.type.createAndFill().content;if(r.doc.content.findDiffStart($)===null){const O=JSON.parse(JSON.stringify(o.doc.toJSON()));if(O.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(O.content)===JSON.stringify($.toJSON())){a.setNodeMarkup(P,void 0,{...T.attrs,[u]:"initialBlockId"});return}}a.setNodeMarkup(P,void 0,{...T.attrs,[u]:f()});return}const{deleted:V}=p.invert().mapResult(P);V&&E.includes(z)&&a.setNodeMarkup(P,void 0,{...T.attrs,[u]:f()})})}),!!a.steps.length)return a},view(n){const r=o=>{let i;t=!((i=n.dom.parentElement)===null||i===void 0)&&i.contains(o.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{let o;return t!==n.dom.parentElement||((o=r.dataTransfer)===null||o===void 0?void 0:o.effectAllowed)==="copy"?e=!0:e=!1,t=null,!1},paste:()=>(e=!0,!1)},transformPasted:n=>{if(!e)return n;const{types:r,attributeName:o}=this.options,i=s=>{const a=[];return s.forEach(l=>{if(l.isText){a.push(l);return}if(!r.includes(l.type.name)){a.push(l.copy(i(l.content)));return}const u=l.type.create({...l.attrs,[o]:null},i(l.content),l.marks);a.push(u)}),Le.from(a)};return e=!1,new Ye(i(n.content),n.openStart,n.openEnd)}}})]}});function FL(t){return t.type==="link"}function iF(t){return typeof t!="string"&&t.type==="link"}function dh(t){return typeof t!="string"&&t.type==="text"}function Od(t){var e,n,r,o,i;return Pd(t)?{...t}:Qy(t)?{type:"tableCell",content:[].concat(t.content),props:{backgroundColor:((e=t.props)==null?void 0:e.backgroundColor)??"default",textColor:((n=t.props)==null?void 0:n.textColor)??"default",textAlignment:((r=t.props)==null?void 0:r.textAlignment)??"left",colspan:((o=t.props)==null?void 0:o.colspan)??1,rowspan:((i=t.props)==null?void 0:i.rowspan)??1}}:{type:"tableCell",content:[].concat(t),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function Qy(t){return t!=null&&typeof t!="string"&&!Array.isArray(t)&&t.type==="tableCell"}function Pd(t){return Qy(t)&&t.props!==void 0&&t.content!==void 0}function fh(t){return Pd(t)?t.props.colspan??1:1}function Zy(t){return Pd(t)?t.props.rowspan??1:1}class zl extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function Zt(t,e=!0){const{"data-test":n,...r}=t;if(Object.keys(r).length>0&&e)throw new Error("Object must be empty "+JSON.stringify(t))}const Ove=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function Ss(t,e="Ctrl"){return Ove()?t.replace("Mod",""):t.replace("Mod",e)}function mr(...t){return[...new Set(t.filter(e=>e).join(" ").split(" "))].join(" ")}const A2=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function Is(t,e,n,r){const o=document.createElement("div");o.className=mr("bn-block-content",n.class),o.setAttribute("data-content-type",t);for(const[s,a]of Object.entries(n))s!=="class"&&o.setAttribute(s,a);const i=document.createElement(e);i.className=mr("bn-inline-content",r.class);for(const[s,a]of Object.entries(r))s!=="class"&&i.setAttribute(s,a);return o.appendChild(i),{dom:o,contentDOM:i}}const zL=(t,e)=>{let n=Ch(t,e.pmSchema);n.type.name==="blockContainer"&&(n=n.firstChild);const r=e.pmSchema.nodes[n.type.name].spec.toDOM;if(r===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const o=r(n);if(typeof o!="object"||!("dom"in o))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return o},Xr={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},BM=["backgroundColor","textColor"];function Uw(t){return"data-"+t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function UL(t){const e=t.split("/");return!e.length||e[e.length-1]===""?t:e[e.length-1]}function Iv(t){const e={};return Object.entries(t).filter(([n,r])=>!BM.includes(n)).forEach(([n,r])=>{e[n]={default:r.default,keepOnSplit:!0,parseHTML:o=>{const i=o.getAttribute(Uw(n));if(i===null)return null;if(r.default===void 0&&r.type==="boolean"||r.default!==void 0&&typeof r.default=="boolean")return i==="true"?!0:i==="false"?!1:null;if(r.default===void 0&&r.type==="number"||r.default!==void 0&&typeof r.default=="number"){const s=parseFloat(i);return!Number.isNaN(s)&&Number.isFinite(s)?s:null}return i},renderHTML:o=>o[n]!==r.default?{[Uw(n)]:o[n]}:{}}}),e}function xS(t,e,n,r){if(typeof t=="boolean")throw new Error("Cannot find node position as getPos is a boolean, not a function.");const o=t(),i=n.state.doc.resolve(o).node().attrs.id;if(!i)throw new Error("Block doesn't have id");const s=e.getBlock(i);if(s.type!==r)throw new Error("Block type does not match");return s}function Kg(t,e,n,r,o=!1,i){const s=document.createElement("div");if(i!==void 0)for(const[a,l]of Object.entries(i))a!=="class"&&s.setAttribute(a,l);s.className=mr("bn-block-content",i?.class||""),s.setAttribute("data-content-type",e);for(const[a,l]of Object.entries(n)){const u=r[a].default;!BM.includes(a)&&l!==u&&s.setAttribute(Uw(a),l)}return o&&s.setAttribute("data-file-block",""),s.appendChild(t.dom),t.contentDOM!==void 0&&(t.contentDOM.className=mr("bn-inline-content",t.contentDOM.className)),{...t,dom:s}}function Os(t){return Kl.create(t)}function $M(t,e){return{config:t,implementation:e}}function Ql(t,e,n){return $M({type:t.name,content:t.config.content==="inline*"?"inline":t.config.content==="tableRow+"?"table":"none",propSchema:e},{node:t,requiredExtensions:n,toInternalHTML:zL,toExternalHTML:zL})}function sF(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function aF(t,e){t.stopEvent=n=>(n.type==="mousedown"&&setTimeout(()=>{e.view.dom.blur()},10),!0)}function lF(t,e){const n=[{tag:"[data-content-type="+t.type+"]",contentElement:".bn-inline-content"}];return e&&n.push({tag:"*",getAttrs(r){if(typeof r=="string")return!1;const o=e?.(r);return o===void 0?!1:o}}),n}function Nv(t,e){const n=Os({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return Iv(t.propSchema)},parseHTML(){return lF(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return Kg({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return({getPos:r})=>{var o;const i=this.options.editor,s=xS(r,i,this.editor,t.type),a=((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},l=e.render(s,i),u=Kg(l,s.type,s.props,t.propSchema,t.isFileBlock,a);return t.isSelectable===!1&&aF(u,this.editor),u}}});if(n.name!==t.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return $M(t,{node:n,toInternalHTML:(r,o)=>{var i;const s=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{},a=e.render(r,o);return Kg(a,r.type,r.props,t.propSchema,t.isFileBlock,s)},toExternalHTML:(r,o)=>{var i,s;const a=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{};let l=(s=e.toExternalHTML)==null?void 0:s.call(e,r,o);return l===void 0&&(l=e.render(r,o)),Kg(l,r.type,r.props,t.propSchema,a)}})}function Zc(t,e){const n=t.resolve(e);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};let r=n.depth,o=n.node(r);for(;r>0;){if(o.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:o};r--,o=n.node(r)}const i=[];t.descendants((a,l)=>{a.type.isInGroup("bnBlock")&&i.push(l)}),console.warn(`Position ${e} is not within a blockContainer node.`);const s=t.resolve(i.find(a=>a>=e)||i[i.length-1]);return{posBeforeNode:s.pos,node:s.nodeAfter}}function HM(t,e){if(!t.type.isInGroup("bnBlock"))throw new Error(`Attempted to get bnBlock node at position but found node of different type ${t.type.name}`);const n=t,r=e,o=r+n.nodeSize,i={node:n,beforePos:r,afterPos:o};if(n.type.name==="blockContainer"){let s,a;if(n.forEach((l,u)=>{if(l.type.spec.group==="blockContent"){const f=l,h=r+u+1,p=h+l.nodeSize;s={node:f,beforePos:h,afterPos:p}}else if(l.type.name==="blockGroup"){const f=l,h=r+u+1,p=h+l.nodeSize;a={node:f,beforePos:h,afterPos:p}}}),!s)throw new Error(`blockContainer node does not contain a blockContent node in its children: ${n}`);return{isBlockContainer:!0,bnBlock:i,blockContent:s,childContainer:a,blockNoteType:s.node.type.name}}else{if(!i.node.type.isInGroup("childContainer"))throw new Error(`bnBlock node is not in the childContainer group: ${i.node}`);return{isBlockContainer:!1,bnBlock:i,childContainer:i,blockNoteType:i.node.type.name}}}function Ld(t){return HM(t.node,t.posBeforeNode)}function Dv(t){if(!t.nodeAfter)throw new Error(`Attempted to get blockContainer node at position ${t.pos} but a node at this position does not exist`);return HM(t.nodeAfter,t.pos)}function vr(t){const e=Zc(t.doc,t.selection.anchor);return Ld(e)}function ES(t){const e=Zc(t.doc,t.selection.anchor);return Ld(e)}function No(t){return"doc"in t?t.doc.type.schema:t.type.schema}function cF(t){return t.cached.blockNoteEditor}function Ov(t){return cF(t).schema}function FM(t){return Ov(t).blockSchema}function zM(t){return Ov(t).inlineContentSchema}function Om(t){return Ov(t).styleSchema}function UM(t){return cF(t).blockCache}function uF(t,e,n){var r,o;const i={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},s=[];t.content.forEach((a,l,u)=>{const f={cells:[]};u===0&&a.content.forEach(h=>{let p=h.attrs.colwidth;p==null&&(p=new Array(h.attrs.colspan??1).fill(void 0)),i.columnWidths.push(...p)}),f.cells=a.content.content.map((h,p)=>(s[u]||(s[u]=[]),s[u][p]=h.type.name==="tableHeader",{type:"tableCell",content:h.content.content.map(g=>_S(g,e,n)).reduce((g,v)=>{if(!g.length)return v;const b=g[g.length-1],E=v[0];return E&&dh(b)&&dh(E)&&JSON.stringify(b.styles)===JSON.stringify(E.styles)?(b.text+=`
`+E.text,g.push(...v.slice(1)),g):(g.push(...v),g)},[]),props:{colspan:h.attrs.colspan,rowspan:h.attrs.rowspan,backgroundColor:h.attrs.backgroundColor,textColor:h.attrs.textColor,textAlignment:h.attrs.textAlignment}})),i.rows.push(f)});for(let a=0;a<s.length;a++)(r=s[a])!=null&&r.every(l=>l)&&(i.headerRows=(i.headerRows??0)+1);for(let a=0;a<((o=s[0])==null?void 0:o.length);a++)s!=null&&s.every(l=>l[a])&&(i.headerCols=(i.headerCols??0)+1);return i}function _S(t,e,n){const r=[];let o;return t.content.forEach(i=>{if(i.type.name==="hardBreak"){if(o)if(dh(o))o.text+=`
`;else if(FL(o))o.content[o.content.length-1].text+=`
`;else throw new Error("unexpected");else o={type:"text",text:`
`,styles:{}};return}if(i.type.name!=="link"&&i.type.name!=="text"){if(!e[i.type.name]){console.warn("unrecognized inline content type",i.type.name);return}o&&(r.push(o),o=void 0),r.push(Pve(i,e,n));return}const s={};let a;for(const l of i.marks)if(l.type.name==="link")a=l;else{const u=n[l.type.name];if(!u){if(l.type.spec.blocknoteIgnore)continue;throw new Error(`style ${l.type.name} not found in styleSchema`)}if(u.propSchema==="boolean")s[u.type]=!0;else if(u.propSchema==="string")s[u.type]=l.attrs.stringValue;else throw new zl(u.propSchema)}o?dh(o)?a?(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:s}]}):JSON.stringify(o.styles)===JSON.stringify(s)?o.text+=i.textContent:(r.push(o),o={type:"text",text:i.textContent,styles:s}):FL(o)&&(a?o.href===a.attrs.href?JSON.stringify(o.content[o.content.length-1].styles)===JSON.stringify(s)?o.content[o.content.length-1].text+=i.textContent:o.content.push({type:"text",text:i.textContent,styles:s}):(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:s}]}):(r.push(o),o={type:"text",text:i.textContent,styles:s})):a?o={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:s}]}:o={type:"text",text:i.textContent,styles:s}}),o&&r.push(o),r}function Pve(t,e,n){if(t.type.name==="text"||t.type.name==="link")throw new Error("unexpected");const r={},o=e[t.type.name];for(const[s,a]of Object.entries(t.attrs)){if(!o)throw Error("ic node is of an unrecognized type: "+t.type.name);const l=o.propSchema;s in l&&(r[s]=a)}let i;return o.content==="styled"?i=_S(t,e,n):i=void 0,{type:t.type.name,props:r,content:i}}function Rr(t,e,n=FM(e),r=zM(e),o=Om(e),i=UM(e)){var s;if(!t.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+t.type.name);const a=i?.get(t);if(a)return a;const l=HM(t,0);let u=l.bnBlock.node.attrs.id;u===null&&(u=SS.options.generateID());const f=n[l.blockNoteType];if(!f)throw Error("Block is of an unrecognized type: "+l.blockNoteType);const h={};for(const[E,T]of Object.entries({...t.attrs,...l.isBlockContainer?l.blockContent.node.attrs:{}})){const P=f.propSchema;E in P&&!(P[E].default===void 0&&T===void 0)&&(h[E]=T)}const p=n[l.blockNoteType],g=[];(s=l.childContainer)==null||s.node.forEach(E=>{g.push(Rr(E,e,n,r,o,i))});let v;if(p.content==="inline"){if(!l.isBlockContainer)throw new Error("impossible");v=_S(l.blockContent.node,r,o)}else if(p.content==="table"){if(!l.isBlockContainer)throw new Error("impossible");v=uF(l.blockContent.node,r,o)}else if(p.content==="none")v=void 0;else throw new zl(p.content);const b={id:u,type:p.type,props:h,content:v,children:g};return i?.set(t,b),b}function Lve(t,e,n=FM(e),r=zM(e),o=Om(e),i=UM(e)){const s=[];return t.firstChild.descendants(a=>(s.push(Rr(a,e,n,r,o,i)),!1)),s}function Vve(t,e,n=FM(e),r=zM(e),o=Om(e),i=UM(e)){function s(a,l,u){if(a.type.name!=="blockGroup")throw new Error("unexpected");const f=[];let h,p;return a.forEach((g,v,b)=>{if(g.type.name!=="blockContainer")throw new Error("unexpected");if(g.childCount===0)return;if(g.childCount===0||g.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+g.childCount);const E=b===0,T=b===a.childCount-1;if(g.firstChild.type.name==="blockGroup"){if(!E)throw new Error("unexpected");const V=s(g.firstChild,Math.max(0,l-1),T?Math.max(0,u-1):0);h=V.blockCutAtStart,T&&(p=V.blockCutAtEnd),f.push(...V.blocks);return}const P=Rr(g,e,n,r,o,i),D=g.childCount>1?g.child(1):void 0;let z=[];if(D){const V=s(D,0,T?Math.max(0,u-1):0);z=V.blocks,T&&(p=V.blockCutAtEnd)}T&&!D&&u>1&&(p=P.id),E&&l>1&&(h=P.id),f.push({...P,children:z})}),{blocks:f,blockCutAtStart:h,blockCutAtEnd:p}}if(t.content.childCount===0)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(t.content.childCount!==1)throw new Error("slice must be a single block, did you forget includeParents=true?");return s(t.content.firstChild,Math.max(t.openStart-1,0),Math.max(t.openEnd-1,0))}function dF(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function jve(t,e){return{config:t,implementation:e}}function Tf(t,e){return jve({type:t.name,propSchema:e},{mark:t})}function fF(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function zd(t){const{height:e,width:n}=qM(t),r=new Array(e).fill(!1).map(()=>new Array(n).fill(null)),o=(i,s)=>{for(let a=i;a<e;a++)for(let l=s;l<n;l++)if(!r[a][l])return{row:a,col:l};throw new Error("Unable to create occupancy grid for table, no more available cells")};for(let i=0;i<t.content.rows.length;i++)for(let s=0;s<t.content.rows[i].cells.length;s++){const a=Od(t.content.rows[i].cells[s]),l=Zy(a),u=fh(a),{row:f,col:h}=o(i,s);for(let p=f;p<f+l;p++)for(let g=h;g<h+u;g++){if(r[p][g])throw new Error(`Unable to create occupancy grid for table, cell at ${p},${g} is already occupied`);r[p][g]={row:i,col:s,rowspan:l,colspan:u,cell:a}}}return r}function Jy(t){const e=new Set;return t.map(n=>({cells:n.map(r=>e.has(r.row+":"+r.col)?!1:(e.add(r.row+":"+r.col),r.cell)).filter(r=>r!==!1)}))}function hh(t,e,n=zd(e)){for(let r=0;r<n.length;r++)for(let o=0;o<n[r].length;o++){const i=n[r][o];if(i.row===t.row&&i.col===t.col)return{row:r,col:o,cell:i.cell}}throw new Error(`Unable to resolve relative table cell indices for table, cell at ${t.row},${t.col} is not occupied`)}function qM(t){const e=t.content.rows.length;let n=0;return t.content.rows.forEach(r=>{let o=0;r.cells.forEach(i=>{o+=fh(i)}),n=Math.max(n,o)}),{height:e,width:n}}function hF(t,e,n=zd(e)){var r;const o=(r=n[t.row])==null?void 0:r[t.col];if(o)return{row:o.row,col:o.col,cell:o.cell}}function R2(t,e){var n;const r=zd(t);if(e<0||e>=r.length)return[];let o=0;for(let s=0;s<e;s++){const a=(n=r[o])==null?void 0:n[0];if(!a)return[];o+=a.rowspan}const i=new Array(r[0].length).fill(!1).map((s,a)=>hF({row:o,col:a},t,r)).filter(s=>s!==void 0);return i.filter((s,a)=>i.findIndex(l=>l.row===s.row&&l.col===s.col)===a)}function M2(t,e){var n;const r=zd(t);if(e<0||e>=r[0].length)return[];let o=0;for(let s=0;s<e;s++){const a=(n=r[0])==null?void 0:n[o];if(!a)return[];o+=a.colspan}const i=new Array(r.length).fill(!1).map((s,a)=>hF({row:a,col:o},t,r)).filter(s=>s!==void 0);return i.filter((s,a)=>i.findIndex(l=>l.row===s.row&&l.col===s.col)===a)}function Bve(t,e,n,r=zd(t)){const{col:o}=hh({row:0,col:e},t,r),{col:i}=hh({row:0,col:n},t,r);return r.forEach(s=>{const[a]=s.splice(o,1);s.splice(i,0,a)}),Jy(r)}function $ve(t,e,n,r=zd(t)){const{row:o}=hh({row:e,col:0},t,r),{row:i}=hh({row:n,col:0},t,r),[s]=r.splice(o,1);return r.splice(i,0,s),Jy(r)}function I2(t){return t?Qy(t)?I2(t.content):typeof t=="string"?t.length===0:Array.isArray(t)?t.every(e=>typeof e=="string"?e.length===0:dh(e)?e.text.length===0:iF(e)?typeof e.content=="string"?e.content.length===0:e.content.every(n=>n.text.length===0):!1):!1:!0}function Hve(t,e,n=zd(t)){if(e==="columns"){let i=0;for(let s=n[0].length-1;s>=0&&n.every(a=>I2(a[s].cell)&&a[s].colspan===1);s--)i++;for(let s=n.length-1;s>=0;s--){const a=Math.max(n[s].length-i,1);n[s]=n[s].slice(0,a)}return Jy(n)}let r=0;for(let i=n.length-1;i>=0&&n[i].every(s=>I2(s.cell)&&s.rowspan===1);i--)r++;const o=Math.min(r,n.length-1);return n.splice(n.length-o,o),Jy(n)}function Fve(t,e,n,r=zd(t)){const{width:o,height:i}=qM(t);if(e==="columns")r.forEach((s,a)=>{if(n>=0)for(let l=0;l<n;l++)s.push({row:a,col:Math.max(...s.map(u=>u.col))+1,rowspan:1,colspan:1,cell:Od("")});else s.splice(o+n,-1*n)});else if(n>0)for(let s=0;s<n;s++){const a=new Array(o).fill(null).map((l,u)=>({row:i+s,col:u,rowspan:1,colspan:1,cell:Od("")}));r.push(a)}else n<0&&r.splice(i+n,-1*n);return Jy(r)}function pF(t,e,n){const r=R2(t,n);if(!r.some(s=>Zy(s.cell)>1))return!0;let o=n,i=n;return r.forEach(s=>{const a=Zy(s.cell);o=Math.max(o,s.row+a-1),i=Math.min(i,s.row)}),e<n?n===o:n===i}function mF(t,e,n){const r=M2(t,n);if(!r.some(s=>fh(s.cell)>1))return!0;let o=n,i=n;return r.forEach(s=>{const a=fh(s.cell);o=Math.max(o,s.col+a-1),i=Math.min(i,s.col)}),e<n?n===o:n===i}function zve(t,e,n){const r=hh(t,n),o=hh(e,n);return r.col===o.col}function qL(t,e,n,r){const o=[];for(const[i,s]of Object.entries(t.styles||{})){const a=n[i];if(!a)throw new Error(`style ${i} not found in styleSchema`);if(a.propSchema==="boolean")s&&o.push(e.mark(i));else if(a.propSchema==="string")s&&o.push(e.mark(i,{stringValue:s}));else throw new zl(a.propSchema)}return!r||!e.nodes[r].spec.code?t.text.split(/(\n)/g).filter(i=>i.length>0).map(i=>i===`
`?e.nodes.hardBreak.createChecked():e.text(i,o)):t.text.length>0?[e.text(t.text,o)]:[]}function Uve(t,e,n){const r=e.marks.link.create({href:t.href});return N2(t.content,e,n).map(o=>{if(o.type.name==="text")return o.mark([...o.marks,r]);if(o.type.name==="hardBreak")return o;throw new Error("unexpected node type")})}function N2(t,e,n,r){const o=[];if(typeof t=="string")return o.push(...qL({text:t,styles:{}},e,n,r)),o;for(const i of t)o.push(...qL(i,e,n,r));return o}function Ja(t,e,n,r=Om(e)){const o=[];for(const i of t)typeof i=="string"?o.push(...N2(i,e,r,n)):iF(i)?o.push(...Uve(i,e,r)):dh(i)?o.push(...N2([i],e,r,n)):o.push(gF(i,e,r));return o}function kS(t,e,n=Om(e)){const r=[],o=new Array(t.headerRows??0).fill(!0),i=new Array(t.headerCols??0).fill(!0),s=t.columnWidths??[];for(let a=0;a<t.rows.length;a++){const l=t.rows[a],u=[],f=o[a];for(let p=0;p<l.cells.length;p++){const g=l.cells[p],v=i[p],b=void 0;let E=null;const T=hh({row:a,col:p},{content:t});let P=s[T.col]?[s[T.col]]:null;if(g)if(typeof g=="string")E=e.text(g);else if(Qy(g)){g.content&&(E=Ja(g.content,e,"tableParagraph",n));const z=fh(g);z>1&&(P=new Array(z).fill(!1).map((V,$)=>s[T.col+$]??void 0))}else E=Ja(g,e,"tableParagraph",n);const D=e.nodes[v||f?"tableHeader":"tableCell"].createChecked({...Qy(g)?g.props:{},colwidth:P},e.nodes.tableParagraph.createChecked(b,E));u.push(D)}const h=e.nodes.tableRow.createChecked({},u);r.push(h)}return r}function gF(t,e,n){let r,o=t.type;if(o===void 0&&(o="paragraph"),!e.nodes[o])throw new Error(`node type ${o} not found in schema`);if(!t.content)r=e.nodes[o].createChecked(t.props);else if(typeof t.content=="string"){const i=Ja([t.content],e,o,n);r=e.nodes[o].createChecked(t.props,i)}else if(Array.isArray(t.content)){const i=Ja(t.content,e,o,n);r=e.nodes[o].createChecked(t.props,i)}else if(t.content.type==="tableContent"){const i=kS(t.content,e,n);r=e.nodes[o].createChecked(t.props,i)}else throw new zl(t.content.type);return r}function Ch(t,e,n=Om(e)){let r=t.id;r===void 0&&(r=SS.options.generateID());const o=[];if(t.children)for(const i of t.children)o.push(Ch(i,e,n));if(!t.type||e.nodes[t.type].isInGroup("blockContent")){const i=gF(t,e,n),s=o.length>0?e.nodes.blockGroup.createChecked({},o):void 0;return e.nodes.blockContainer.createChecked({id:r,...t.props},s?[i,s]:i)}else{if(e.nodes[t.type].isInGroup("bnBlock"))return e.nodes[t.type].createChecked({id:r,...t.props},o);throw new Error(`block type ${t.type} doesn't match blockContent or bnBlock group`)}}function qve(t,e){if(e===0)return;const n=t.resolve(e);for(let r=n.depth;r>0;r--){const o=n.node(r);if(GM(o))return o.attrs.id}}function Ns(t,e){let n,r;if(e.firstChild.descendants((o,i)=>n?!1:!GM(o)||o.attrs.id!==t?!0:(n=o,r=i+1,!1)),!(n===void 0||r===void 0))return{node:n,posBeforeNode:r}}function GM(t){return t.type.isInGroup("bnBlock")}function Gve(t,e){return t.id!==e.id||t.type!==e.type||JSON.stringify(t.props)!==JSON.stringify(e.props)||JSON.stringify(t.content)!==JSON.stringify(e.content)}function Kve(t){return t.getMeta("paste")?{type:"paste"}:t.getMeta("uiEvent")==="drop"?{type:"drop"}:t.getMeta("history$")?{type:t.getMeta("history$").redo?"redo":"undo"}:t.getMeta("y-sync$")?t.getMeta("y-sync$").isUndoRedoOperation?{type:"undo-redo"}:{type:"yjs-remote"}:{type:"local"}}function GL(t){const e={},n=No(t);return t.descendants((r,o)=>{if(GM(r)){const i=qve(t,o);e[r.attrs.id]={block:Rr(r,n),parentId:i}}return!0}),e}function yF(t,e=[]){const n=Kve(t),r=eM(t.before,[t,...e]),o=GL(r.before),i=GL(r.doc),s=[];return Object.keys(i).filter(a=>!(a in o)).forEach(a=>{s.push({type:"insert",block:i[a].block,source:n,prevBlock:void 0})}),Object.keys(o).filter(a=>!(a in i)).forEach(a=>{s.push({type:"delete",block:o[a].block,source:n,prevBlock:void 0})}),Object.keys(i).filter(a=>a in o).forEach(a=>{var l,u;const f=o[a],h=i[a];f.parentId!==h.parentId?s.push({type:"move",block:h.block,prevBlock:f.block,source:n,prevParent:f.parentId?(l=o[f.parentId])==null?void 0:l.block:void 0,currentParent:h.parentId?(u=i[h.parentId])==null?void 0:u.block:void 0}):Gve(f.block,h.block)&&s.push({type:"update",block:h.block,prevBlock:f.block,source:n})}),s}function Wve(t,e,n,r="before"){const o=typeof n=="string"?n:n.id,i=No(t),s=e.map(u=>Ch(u,i)),a=Ns(o,t.doc);if(!a)throw new Error(`Block with ID ${o} not found`);let l=a.posBeforeNode;return r==="after"&&(l+=a.node.nodeSize),t.step(new ro(l,l,new Ye(Le.from(s),0,0))),s.map(u=>Rr(u,i))}function KL(t,e,n){const r=No(t),o=n.map(u=>Ch(u,r)),i=new Set(e.map(u=>typeof u=="string"?u:u.id)),s=[],a=typeof e[0]=="string"?e[0]:e[0].id;let l=0;if(t.doc.descendants((u,f)=>{if(i.size===0)return!1;if(!u.type.isInGroup("bnBlock")||!i.has(u.attrs.id))return!0;if(s.push(Rr(u,r)),i.delete(u.attrs.id),n.length>0&&u.attrs.id===a){const v=t.doc.nodeSize;t.insert(f,o);const b=t.doc.nodeSize;l+=v-b}const h=t.doc.nodeSize,p=t.doc.resolve(f-l);p.node().type.name==="blockGroup"&&p.node(p.depth-1).type.name!=="doc"&&p.node().childCount===1?t.delete(p.before(),p.after()):t.delete(f-l,f-l+u.nodeSize);const g=t.doc.nodeSize;return l+=h-g,!1}),i.size>0){const u=[...i].join(`
`);throw Error("Blocks with the following IDs could not be found in the editor: "+u)}return{insertedBlocks:o.map(u=>Rr(u,r)),removedBlocks:s}}const mi=(t,e)=>({tr:n,dispatch:r})=>(r&&vF(n,t,e),!0);function vF(t,e,n,r,o){const i=Dv(t.doc.resolve(e)),s=No(t),a=s.nodes[i.blockNoteType],l=s.nodes[n.type||i.blockNoteType],u=l.isInGroup("bnBlock")?l:s.nodes.blockContainer;if(i.isBlockContainer&&l.isInGroup("blockContent"))WL(n,t,i),Yve(n,t,a,l,i);else if(!i.isBlockContainer&&l.isInGroup("bnBlock"))WL(n,t,i);else{const f=Rr(i.bnBlock.node,s);t.replaceWith(i.bnBlock.beforePos,i.bnBlock.afterPos,Ch({children:f.children,...n},s));return}t.setNodeMarkup(i.bnBlock.beforePos,u,{...i.bnBlock.node.attrs,...n.props})}function Yve(t,e,n,r,o,i,s){const a=No(e);let l="keep";if(t.content)if(typeof t.content=="string")l=Ja([t.content],a,r.name);else if(Array.isArray(t.content))l=Ja(t.content,a,r.name);else if(t.content.type==="tableContent")l=kS(t.content,a);else throw new zl(t.content.type);else n.spec.content===""||r.spec.content!==n.spec.content&&(l=[]);l==="keep"?e.setNodeMarkup(o.blockContent.beforePos,r,{...o.blockContent.node.attrs,...t.props}):e.replaceWith(o.blockContent.beforePos,o.blockContent.afterPos,r.createChecked({...o.blockContent.node.attrs,...t.props},l))}function WL(t,e,n){const r=No(e);if(t.children!==void 0&&t.children.length>0){const o=t.children.map(i=>Ch(i,r));if(n.childContainer)e.step(new ro(n.childContainer.beforePos+1,n.childContainer.afterPos-1,new Ye(Le.from(o),0,0)));else{if(!n.isBlockContainer)throw new Error("impossible");e.insert(n.blockContent.afterPos,r.nodes.blockGroup.createChecked({},o))}}}function Xve(t,e,n,r,o){const i=typeof e=="string"?e:e.id,s=Ns(i,t.doc);if(!s)throw new Error(`Block with ID ${i} not found`);vF(t,s.posBeforeNode,n);const a=t.doc.resolve(s.posBeforeNode+1).node(),l=No(t);return Rr(a,l)}function bF(t){const e=Array.from(t.classList).filter(n=>!n.startsWith("bn-"))||[];e.length>0?t.className=e.join(" "):t.removeAttribute("class")}function wF(t,e,n,r){let o;if(e)if(typeof e=="string")o=Ja([e],t.pmSchema);else if(Array.isArray(e))o=Ja(e,t.pmSchema);else if(e.type==="tableContent")o=kS(e,t.pmSchema);else throw new zl(e.type);else throw new Error("blockContent is required");const i=n.serializeFragment(Le.from(o),r);return i.nodeType===1&&bF(i),i}function Qve(t,e,n,r,o,i,s){var a,l,u,f,h,p,g,v;const b=s?.document??document,E=e.pmSchema.nodes.blockContainer;let T=n.props;if(!n.props){T={};for(const[O,R]of Object.entries(e.schema.blockSchema[n.type].propSchema))R.default!==void 0&&(T[O]=R.default)}const P=(l=(a=E.spec)==null?void 0:a.toDOM)==null?void 0:l.call(a,E.create({id:n.id,...T})),D=Array.from(P.dom.attributes),z=e.blockImplementations[n.type].implementation.toExternalHTML({...n,props:T},e),V=b.createDocumentFragment();if(z.dom.classList.contains("bn-block-content")){const O=[...D,...Array.from(z.dom.attributes)].filter(R=>R.name.startsWith("data")&&R.name!=="data-content-type"&&R.name!=="data-file-block"&&R.name!=="data-node-view-wrapper"&&R.name!=="data-node-type"&&R.name!=="data-id"&&R.name!=="data-index"&&R.name!=="data-editable");for(const R of O)z.dom.firstChild.setAttribute(R.name,R.value);bF(z.dom.firstChild),V.append(...Array.from(z.dom.childNodes))}else V.append(z.dom);if(z.contentDOM&&n.content){const O=wF(e,n.content,r,s);z.contentDOM.appendChild(O)}let $;if(o.has(n.type)?$="OL":i.has(n.type)&&($="UL"),$){if(((u=t.lastChild)==null?void 0:u.nodeName)!==$){const R=b.createElement($);$==="OL"&&T!=null&&T.start&&T?.start!==1&&R.setAttribute("start",T.start+""),t.append(R)}const O=b.createElement("li");O.append(V),t.lastChild.appendChild(O)}else t.append(V);if(n.children&&n.children.length>0){const O=b.createDocumentFragment();if(CF(O,e,n.children,r,o,i,s),((f=t.lastChild)==null?void 0:f.nodeName)==="UL"||((h=t.lastChild)==null?void 0:h.nodeName)==="OL")for(;((p=O.firstChild)==null?void 0:p.nodeName)==="UL"||((g=O.firstChild)==null?void 0:g.nodeName)==="OL";)t.lastChild.lastChild.appendChild(O.firstChild);e.pmSchema.nodes[n.type].isInGroup("blockContent")?t.append(O):(v=z.contentDOM)==null||v.append(O)}}const CF=(t,e,n,r,o,i,s)=>{for(const a of n)Qve(t,e,a,r,o,i,s)},Zve=(t,e,n,r,o,i)=>{const s=(i?.document??document).createDocumentFragment();return CF(s,t,e,n,r,o,i),s},TS=(t,e)=>{const n=tu.fromSchema(t);return{exportBlocks:(r,o)=>{const i=Zve(e,r,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),o),s=document.createElement("div");return s.append(i),s.innerHTML},exportInlineContent:(r,o)=>{const i=wF(e,r,n,o),s=document.createElement("div");return s.append(i.cloneNode(!0)),s.innerHTML}}};function Jve(t,e,n,r,o){let i;if(e)if(typeof e=="string")i=Ja([e],t.pmSchema,r);else if(Array.isArray(e))i=Ja(e,t.pmSchema,r);else if(e.type==="tableContent")i=kS(e,t.pmSchema);else throw new zl(e.type);else throw new Error("blockContent is required");return n.serializeFragment(Le.from(i),o)}function e0e(t,e,n,r,o){var i,s,a,l,u;const f=t.pmSchema.nodes.blockContainer;let h=e.props;if(!e.props){h={};for(const[v,b]of Object.entries(t.schema.blockSchema[e.type].propSchema))b.default!==void 0&&(h[v]=b.default)}const p=t.blockImplementations[e.type].implementation.toInternalHTML({...e,props:h},t);if(e.type==="numberedListItem"&&p.dom.setAttribute("data-index",r.toString()),p.contentDOM&&e.content){const v=Jve(t,e.content,n,e.type,o);p.contentDOM.appendChild(v)}if(t.pmSchema.nodes[e.type].isInGroup("bnBlock")){if(e.children&&e.children.length>0){const v=SF(t,e.children,n,o);(i=p.contentDOM)==null||i.append(v)}return p.dom}const g=(a=(s=f.spec)==null?void 0:s.toDOM)==null?void 0:a.call(s,f.create({id:e.id,...h}));return(l=g.contentDOM)==null||l.appendChild(p.dom),e.children&&e.children.length>0&&((u=g.contentDOM)==null||u.appendChild(xF(t,e.children,n,o))),g.dom}function SF(t,e,n,r){const o=(r?.document??document).createDocumentFragment();let i=0;for(const s of e){s.type==="numberedListItem"?i++:i=0;const a=e0e(t,s,n,i,r);o.appendChild(a)}return o}const xF=(t,e,n,r)=>{var o;const i=t.pmSchema.nodes.blockGroup,s=i.spec.toDOM(i.create({})),a=SF(t,e,n,r);return(o=s.contentDOM)==null||o.appendChild(a),s.dom},t0e=(t,e)=>{const n=tu.fromSchema(t);return{serializeBlocks:(r,o)=>xF(e,r,n,o).outerHTML}},AS=(t,e)=>{const n=t.querySelector(e);if(!n)return;const r=t.querySelector("figcaption"),o=r?.textContent??void 0;return{targetElement:n,caption:o}},n0e=(t,e,n,r)=>{const o=document.createElement("div");o.className="bn-add-file-button";const i=document.createElement("div");i.className="bn-add-file-button-icon",r?i.appendChild(r):i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',o.appendChild(i);const s=document.createElement("p");s.className="bn-add-file-button-text",s.innerHTML=n||e.dictionary.file_blocks.file.add_button_text,o.appendChild(s);const a=u=>{u.preventDefault()},l=()=>{e.transact(u=>u.setMeta(e.filePanel.plugins[0],{block:t}))};return o.addEventListener("mousedown",a,!0),o.addEventListener("click",l,!0),{dom:o,destroy:()=>{o.removeEventListener("mousedown",a,!0),o.removeEventListener("click",l,!0)}}},r0e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',o0e=t=>{const e=document.createElement("div");e.className="bn-file-name-with-icon";const n=document.createElement("div");n.className="bn-file-icon",n.innerHTML=r0e,e.appendChild(n);const r=document.createElement("p");return r.className="bn-file-name",r.textContent=t.props.name,e.appendChild(r),{dom:e}},KM=(t,e,n,r,o)=>{const i=document.createElement("div");if(i.className="bn-file-block-content-wrapper",t.props.url===""){const a=n0e(t,e,r,o);i.appendChild(a.dom);const l=e.onUploadStart(u=>{if(u===t.id){i.removeChild(a.dom);const f=document.createElement("div");f.className="bn-file-loading-preview",f.textContent="Loading...",i.appendChild(f)}});return{dom:i,destroy:()=>{l(),a.destroy()}}}const s={dom:i};if(t.props.showPreview===!1||!n){const a=o0e(t);i.appendChild(a.dom),s.destroy=()=>{var l;(l=a.destroy)==null||l.call(a)}}else i.appendChild(n.dom);if(t.props.caption){const a=document.createElement("p");a.className="bn-file-caption",a.textContent=t.props.caption,i.appendChild(a)}return s},WM=(t,e)=>{const n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},RS=(t,e)=>{const n=document.createElement("div"),r=document.createElement("p");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},YL=t=>({url:t.src||void 0}),i0e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>',s0e={backgroundColor:Xr.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},EF={type:"audio",propSchema:s0e,content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},a0e=(t,e)=>{const n=document.createElement("div");n.innerHTML=i0e;const r=document.createElement("audio");return r.className="bn-audio",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(o=>{r.src=o}):r.src=t.props.url,r.controls=!0,r.contentEditable="false",r.draggable=!1,KM(t,e,{dom:r},e.dictionary.file_blocks.audio.add_button_text,n.firstElementChild)},_F=t=>{if(t.tagName==="AUDIO")return t.closest("figure")?void 0:YL(t);if(t.tagName==="FIGURE"){const e=AS(t,"audio");if(!e)return;const{targetElement:n,caption:r}=e;return{...YL(n),caption:r}}},l0e=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add audio",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("audio"),e.src=t.props.url):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?WM(e,t.props.caption):RS(e,t.props.caption):{dom:e}},c0e=Nv(EF,{render:a0e,parse:_F,toExternalHTML:l0e}),XL=Symbol.for("blocknote.shikiParser"),lk=Symbol.for("blocknote.shikiHighlighterPromise"),u0e={language:{default:"text"}},d0e=Os({name:"codeBlock",content:"inline*",group:"blockContent",marks:"insertion deletion modification",code:!0,defining:!0,addOptions(){return{defaultLanguage:"text",indentLineWithTab:!0,supportedLanguages:{}}},addAttributes(){const t=this.options;return{language:{default:t.editor.settings.codeBlock.defaultLanguage,parseHTML:e=>{let n=e,r=null;n?.tagName==="DIV"&&n?.dataset.contentType==="codeBlock"&&(n=n.children[0]),n?.tagName==="PRE"&&(n=n?.children[0]);const o=n?.getAttribute("data-language");if(o)r=o.toLowerCase();else{const i=[...n?.className.split(" ")||[]].filter(s=>s.startsWith("language-")).map(s=>s.replace("language-",""));i.length>0&&(r=i[0].toLowerCase())}return r?ck(t.editor.settings.codeBlock,r)??r:null},renderHTML:e=>e.language?{class:`language-${e.language}`,"data-language":e.language}:{}}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:t}){var e,n;const r=document.createElement("pre"),{dom:o,contentDOM:i}=Is(this.name,"code",((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},{...((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{},...t});return o.removeChild(i),o.appendChild(r),r.appendChild(i),{dom:o,contentDOM:i}},addNodeView(){const t=this.options;return({editor:e,node:n,getPos:r,HTMLAttributes:o})=>{var i,s;const a=document.createElement("pre"),l=document.createElement("select"),u=document.createElement("div"),{dom:f,contentDOM:h}=Is(this.name,"code",{...((i=this.options.domAttributes)==null?void 0:i.blockContent)||{},...o},((s=this.options.domAttributes)==null?void 0:s.inlineContent)||{}),p=g=>{const v=g.target.value;e.commands.command(({tr:b})=>(b.setNodeAttribute(r(),"language",v),!0))};return Object.entries(t.editor.settings.codeBlock.supportedLanguages).forEach(([g,{name:v}])=>{const b=document.createElement("option");b.value=g,b.text=v,l.appendChild(b)}),u.contentEditable="false",l.value=n.attrs.language||t.editor.settings.codeBlock.defaultLanguage,f.removeChild(h),f.appendChild(u),f.appendChild(a),a.appendChild(h),u.appendChild(l),l.addEventListener("change",p),{dom:f,contentDOM:h,update:g=>g.type===this.type,destroy:()=>{l.removeEventListener("change",p)}}}},addProseMirrorPlugins(){const t=this.options,e=globalThis;let n,r;return[Gfe({parser:o=>{if(!t.editor.settings.codeBlock.createHighlighter)return[];if(!n)return e[lk]=e[lk]||t.editor.settings.codeBlock.createHighlighter(),e[lk].then(s=>{n=s});const i=ck(t.editor.settings.codeBlock,o.language);return!i||i==="text"||i==="none"||i==="plaintext"||i==="txt"?[]:n.getLoadedLanguages().includes(i)?(r||(r=e[XL]||Kfe(n),e[XL]=r),r(o)):n.loadLanguage(i)},languageExtractor:o=>o.attrs.language,nodeTypes:[this.name]})]},addInputRules(){const t=this.options;return[new Rd({find:/^```(.*?)\s$/,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),i=r[1].trim(),s={language:ck(t.editor.settings.codeBlock,i)??i};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),this.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,this.type,s).setSelection(at.create(e.tr.doc,n.from))}})]},addKeyboardShortcuts(){return{Delete:({editor:t})=>{const{selection:e}=t.state,{$from:n}=e;if(t.isActive(this.name)&&!n.parent.textContent&&uS(e)){const r=n.pos-n.parentOffset-2;return t.chain().setNodeSelection(r).deleteSelection().run(),!0}return!1},Tab:({editor:t})=>this.options.indentLineWithTab&&t.isActive(this.name)?(t.commands.insertContent("  "),!0):!1,Enter:({editor:t})=>{const{$from:e}=t.state.selection;if(!t.isActive(this.name))return!1;const n=e.parentOffset===e.parent.nodeSize-2,r=e.parent.textContent.endsWith(`

`);return!n||!r?(t.commands.insertContent(`
`),!0):t.chain().command(({tr:o})=>(o.delete(e.pos-2,e.pos),!0)).exitCode().run()},"Shift-Enter":({editor:t})=>{const{$from:e}=t.state.selection;return t.isActive(this.name)?(t.chain().insertContentAt(e.pos-e.parentOffset+e.parent.nodeSize,{type:"paragraph"}).run(),!0):!1}}}}),f0e=Ql(d0e,u0e);function ck(t,e){var n;return(n=Object.entries(t.supportedLanguages).find(([r,{aliases:o}])=>o?.includes(e)||r===e))==null?void 0:n[0]}const h0e=Zo.create({name:"backgroundColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-background-color"),renderHTML:t=>({"data-background-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-background-color")?{stringValue:t.getAttribute("data-background-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),p0e=Tf(h0e,"string"),m0e=Zo.create({name:"textColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-text-color"),renderHTML:t=>({"data-text-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-text-color")?{stringValue:t.getAttribute("data-text-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),g0e=Tf(m0e,"string"),QL=t=>({url:t.src||void 0}),y0e={backgroundColor:Xr.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},kF={type:"file",propSchema:y0e,content:"none",isFileBlock:!0},v0e=(t,e)=>KM(t,e),TF=t=>{if(t.tagName==="EMBED")return t.closest("figure")?void 0:QL(t);if(t.tagName==="FIGURE"){const e=AS(t,"embed");if(!e)return;const{targetElement:n,caption:r}=e;return{...QL(n),caption:r}}},b0e=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add file",{dom:n}}const e=document.createElement("a");return e.href=t.props.url,e.textContent=t.props.name||t.props.url,t.props.caption?RS(e,t.props.caption):{dom:e}},w0e=Nv(kF,{render:v0e,parse:TF,toExternalHTML:b0e}),C0e={set:(t,e)=>window.localStorage.setItem(`toggle-${t.id}`,e?"true":"false"),get:t=>window.localStorage.getItem(`toggle-${t.id}`)==="true"},AF=(t,e,n,r=C0e)=>{if("isToggleable"in t.props&&!t.props.isToggleable)return{dom:n};const o=document.createElement("div"),i=document.createElement("div");i.className="bn-toggle-wrapper";const s=document.createElement("button");s.className="bn-toggle-button",s.type="button",s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="CURRENTCOLOR"><path d="M320-200v-560l440 280-440 280Z"/></svg>';const a=v=>v.preventDefault();s.addEventListener("mousedown",a);const l=()=>{var v;i.getAttribute("data-show-children")==="true"?(i.setAttribute("data-show-children","false"),r.set(e.getBlock(t),!1),o.contains(u)&&o.removeChild(u)):(i.setAttribute("data-show-children","true"),r.set(e.getBlock(t),!0),((v=e.getBlock(t))==null?void 0:v.children.length)===0&&!o.contains(u)&&o.appendChild(u))};s.addEventListener("click",l),i.appendChild(s),i.appendChild(n);const u=document.createElement("button");u.className="bn-toggle-add-block-button",u.type="button",u.textContent="Empty toggle. Click to add a block.";const f=v=>v.preventDefault();u.addEventListener("mousedown",f);const h=()=>{e.transact(()=>{const v=e.updateBlock(t,{children:[{}]});e.setTextCursorPosition(v.children[0].id,"end"),e.focus()})};u.addEventListener("click",h),o.appendChild(i);let p=t.children.length;const g=e.onChange(()=>{var v;const b=((v=e.getBlock(t))==null?void 0:v.children.length)??0;b>p?(i.getAttribute("data-show-children")==="false"&&(i.setAttribute("data-show-children","true"),r.set(e.getBlock(t),!0)),o.contains(u)&&o.removeChild(u)):b===0&&b<p&&(i.getAttribute("data-show-children")==="true"&&(i.setAttribute("data-show-children","false"),r.set(e.getBlock(t),!1)),o.contains(u)&&o.removeChild(u)),p=b});return r.get(t)?(i.setAttribute("data-show-children","true"),t.children.length===0&&o.appendChild(u)):i.setAttribute("data-show-children","false"),{dom:o,ignoreMutation:v=>v instanceof MutationRecord&&(v.type==="attributes"&&v.target===i&&v.attributeName==="data-show-children"||v.type==="childList"&&(v.addedNodes[0]===u||v.removedNodes[0]===u)),destroy:()=>{s.removeEventListener("mousedown",a),s.removeEventListener("click",l),u.removeEventListener("mousedown",f),u.removeEventListener("click",h),g?.()}}},S0e=[1,2,3,4,5,6],RF={...Xr,level:{default:1,values:S0e},isToggleable:{default:!1}},x0e=Os({name:"heading",content:"inline*",group:"blockContent",addAttributes(){return Iv(RF)},addInputRules(){return[...this.options.editor.settings.heading.levels.map(t=>new Rd({find:new RegExp(`^(#{${t}})\\s$`),handler:({state:e,chain:n,range:r})=>{const o=vr(e);!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||n().command(mi(o.bnBlock.beforePos,{type:"heading",props:{level:t}})).deleteRange({from:r.from,to:r.to}).run()}}))]},addKeyboardShortcuts(){const t=this.options.editor;return Object.fromEntries(t.settings.heading.levels.map(e=>[`Mod-Alt-${e}`,()=>{const n=vr(this.editor.state);return!n.isBlockContainer||n.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(mi(n.bnBlock.beforePos,{type:"heading",props:{level:e}}))}]))},parseHTML(){const t=this.options.editor;return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},...t.settings.heading.levels.map(e=>({tag:`h${e}`,attrs:{level:e},node:"heading"}))]},renderHTML({node:t,HTMLAttributes:e}){var n,r;return Is(this.name,`h${t.attrs.level}`,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{})},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n})=>{var r,o;const{dom:i,contentDOM:s}=Is(this.name,`h${t.attrs.level}`,{...((r=this.options.domAttributes)==null?void 0:r.blockContent)||{},...e},((o=this.options.domAttributes)==null?void 0:o.inlineContent)||{});i.removeChild(s);const a=this.options.editor,l=xS(n,a,this.editor,this.name),u=AF(l,a,s);return i.appendChild(u.dom),{dom:i,contentDOM:s,ignoreMutation:u.ignoreMutation,destroy:u.destroy}}}}),E0e=Ql(x0e,RF),MF=(t,e,n,r,o,i)=>{const{dom:s,destroy:a}=KM(t,e,n,o,i),l=s;t.props.url&&t.props.showPreview&&(t.props.previewWidth?l.style.width=`${t.props.previewWidth}px`:l.style.width="fit-content");const u=document.createElement("div");u.className="bn-resize-handle",u.style.left="4px";const f=document.createElement("div");f.className="bn-resize-handle",f.style.right="4px";let h,p=t.props.previewWidth;const g=D=>{var z,V;if(!h){!e.isEditable&&r.contains(u)&&r.contains(f)&&(r.removeChild(u),r.removeChild(f));return}let $;t.props.textAlignment==="center"?h.handleUsed==="left"?$=h.initialWidth+(h.initialClientX-D.clientX)*2:$=h.initialWidth+(D.clientX-h.initialClientX)*2:h.handleUsed==="left"?$=h.initialWidth+h.initialClientX-D.clientX:$=h.initialWidth+D.clientX-h.initialClientX,p=Math.min(Math.max($,64),((V=(z=e.domElement)==null?void 0:z.firstElementChild)==null?void 0:V.clientWidth)||Number.MAX_VALUE),l.style.width=`${p}px`},v=D=>{(!D.target||!l.contains(D.target)||!e.isEditable)&&r.contains(u)&&r.contains(f)&&(r.removeChild(u),r.removeChild(f)),h&&(h=void 0,e.updateBlock(t,{props:{previewWidth:p}}))},b=()=>{e.isEditable&&(r.appendChild(u),r.appendChild(f))},E=D=>{D.relatedTarget===u||D.relatedTarget===f||h||e.isEditable&&r.contains(u)&&r.contains(f)&&(r.removeChild(u),r.removeChild(f))},T=D=>{D.preventDefault(),h={handleUsed:"left",initialWidth:l.clientWidth,initialClientX:D.clientX}},P=D=>{D.preventDefault(),h={handleUsed:"right",initialWidth:l.clientWidth,initialClientX:D.clientX}};return window.addEventListener("mousemove",g),window.addEventListener("mouseup",v),l.addEventListener("mouseenter",b),l.addEventListener("mouseleave",E),u.addEventListener("mousedown",T),f.addEventListener("mousedown",P),{dom:l,destroy:()=>{a?.(),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",v),l.removeEventListener("mouseenter",b),l.removeEventListener("mouseleave",E),u.removeEventListener("mousedown",T),f.removeEventListener("mousedown",P)}}},ZL=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},_0e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>',k0e={textAlignment:Xr.textAlignment,backgroundColor:Xr.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},IF={type:"image",propSchema:k0e,content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},T0e=(t,e)=>{const n=document.createElement("div");n.innerHTML=_0e;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("img");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(i=>{o.src=i}):o.src=t.props.url,o.alt=t.props.name||t.props.caption||"BlockNote image",o.contentEditable="false",o.draggable=!1,r.appendChild(o),MF(t,e,{dom:r},r,e.dictionary.file_blocks.image.add_button_text,n.firstElementChild)},NF=t=>{if(t.tagName==="IMG")return t.closest("figure")?void 0:ZL(t);if(t.tagName==="FIGURE"){const e=AS(t,"img");if(!e)return;const{targetElement:n,caption:r}=e;return{...ZL(n),caption:r}}},A0e=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add image",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("img"),e.src=t.props.url,e.alt=t.props.name||t.props.caption||"BlockNote image",t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?WM(e,t.props.caption):RS(e,t.props.caption):{dom:e}},R0e=Nv(IF,{render:T0e,parse:NF,toExternalHTML:A0e}),DF=(t,e,n)=>({state:r,dispatch:o})=>{const i=Zc(r.doc,t),s=Ld(i);if(!s.isBlockContainer)throw new Error(`BlockContainer expected when calling splitBlock, position ${t}`);const a=[{type:s.bnBlock.node.type,attrs:n?{...s.bnBlock.node.attrs,id:void 0}:{}},{type:e?s.blockContent.node.type:r.schema.nodes.paragraph,attrs:n?{...s.blockContent.node.attrs}:{}}];return o&&r.tr.split(t,2,a),!0},MS=t=>{const{blockInfo:e,selectionEmpty:n}=t.transact(i=>({blockInfo:ES(i),selectionEmpty:i.selection.anchor===i.selection.head}));if(!e.isBlockContainer)return!1;const{bnBlock:r,blockContent:o}=e;return!(o.node.type.name==="toggleListItem"||o.node.type.name==="bulletListItem"||o.node.type.name==="numberedListItem"||o.node.type.name==="checkListItem")||!n?!1:t._tiptapEditor.commands.first(({state:i,chain:s,commands:a})=>[()=>a.command(()=>o.node.childCount===0?a.command(mi(r.beforePos,{type:"paragraph",props:{}})):!1),()=>a.command(()=>o.node.childCount>0?(s().deleteSelection().command(DF(i.selection.from,!0)).run(),!0):!1)])},M0e={...Xr},I0e=Os({name:"toggleListItem",content:"inline*",group:"blockContent",priority:90,addKeyboardShortcuts(){return{Enter:()=>MS(this.options.editor),"Mod-Shift-6":()=>{const t=vr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(mi(t.bnBlock.beforePos,{type:"toggleListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"}]},renderHTML({HTMLAttributes:t}){var e,n;return Is(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({HTMLAttributes:t,getPos:e})=>{var n,r;const{dom:o,contentDOM:i}=Is(this.name,"p",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...t},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{}),s=this.options.editor,a=xS(e,s,this.editor,this.name),l=AF(a,s,i);return o.appendChild(l.dom),{dom:o,contentDOM:i,ignoreMutation:l.ignoreMutation,destroy:l.destroy}}}}),N0e=Ql(I0e,M0e);function YM(t,e,n){var r,o,i;const s=Bc.fromSchema(e),a=t,l=document.createElement("div");l.setAttribute("data-node-type","blockGroup");for(const g of Array.from(a.childNodes))l.appendChild(g.cloneNode(!0));let u=s.parse(l,{topNode:e.nodes.blockGroup.create()});((o=(r=u.firstChild)==null?void 0:r.firstChild)==null?void 0:o.type.name)==="checkListItem"&&(u=u.copy(u.content.cut(u.firstChild.firstChild.nodeSize+2)));const f=(i=u.firstChild)==null?void 0:i.firstChild;if(!(f!=null&&f.isTextblock))return Le.from(u);const h=e.nodes[n].create({},f.content),p=u.content.cut(f.nodeSize+2);if(p.size>0){const g=u.copy(p);return h.content.addToEnd(g)}return h.content}const D0e={...Xr},O0e=Os({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules(){return[new Rd({find:new RegExp("^[-+*]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=vr(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||r.blockNoteType==="heading"||e().command(mi(r.bnBlock.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>MS(this.options.editor),"Mod-Shift-8":()=>{const t=vr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(mi(t.bnBlock.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;return n===null?!1:n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"?{}:!1},getContent:(t,e)=>YM(t,e,this.name),node:"bulletListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return Is(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),P0e=Ql(O0e,D0e),OF={...Xr,checked:{default:!1}},L0e=Os({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes(){return Iv(OF)},addInputRules(){return[new Rd({find:new RegExp("\\[\\s*\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=vr(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(mi(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:n.from,to:n.to})}}),new Rd({find:new RegExp("\\[[Xx]\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=vr(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(mi(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>MS(this.options.editor),"Mod-Shift-9":()=>{const t=vr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(mi(t.bnBlock.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"input",getAttrs:t=>typeof t=="string"||t.closest("[data-content-type]")||t.closest("li")?!1:t.type==="checkbox"?{checked:t.checked}:!1,node:"checkListItem"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;if(n===null)return!1;if(n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"){const r=t.querySelector("input[type=checkbox]")||null;return r===null?!1:{checked:r.checked}}return!1},getContent:(t,e)=>YM(t,e,this.name),node:"checkListItem"}]},renderHTML({node:t,HTMLAttributes:e}){var n,r;const o=document.createElement("input");o.type="checkbox",o.checked=t.attrs.checked,t.attrs.checked&&o.setAttribute("checked","");const{dom:i,contentDOM:s}=Is(this.name,"p",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{});return i.insertBefore(o,s),{dom:i,contentDOM:s}},addNodeView(){return({node:t,getPos:e,editor:n,HTMLAttributes:r})=>{var o,i;const s=document.createElement("div"),a=document.createElement("div");a.contentEditable="false";const l=document.createElement("input");l.type="checkbox",l.checked=t.attrs.checked,t.attrs.checked&&l.setAttribute("checked","");const u=()=>{if(!n.isEditable){l.checked=!l.checked;return}if(typeof e!="boolean"){const p=Zc(n.state.doc,e());if(p.node.type.name!=="blockContainer")throw new Error(`Expected blockContainer node, got ${p.node.type.name}`);this.editor.commands.command(mi(p.posBeforeNode,{type:"checkListItem",props:{checked:l.checked}}))}};l.addEventListener("change",u);const{dom:f,contentDOM:h}=Is(this.name,"p",{...((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},...r},((i=this.options.domAttributes)==null?void 0:i.inlineContent)||{});if(typeof e!="boolean"){const p="label-"+this.editor.state.doc.resolve(e()).node().attrs.id;l.setAttribute("aria-labelledby",p),h.id=p}return f.removeChild(h),f.appendChild(s),s.appendChild(a),s.appendChild(h),a.appendChild(l),{dom:f,contentDOM:h,destroy:()=>{l.removeEventListener("change",u)}}}}}),V0e=Ql(L0e,OF),j0e=new Nn("numbered-list-indexing"),B0e=()=>new nn({key:j0e,appendTransaction:(t,e,n)=>{const r=n.tr;r.setMeta("numberedListIndexing",!0);let o=!1;return n.doc.descendants((i,s)=>{var a;if(i.type.name==="blockContainer"&&i.firstChild.type.name==="numberedListItem"){let l=`${i.firstChild.attrs.start||1}`;const u=Ld({posBeforeNode:s,node:i});if(!u.isBlockContainer)throw new Error("impossible");const f=r.doc.resolve(u.bnBlock.beforePos).nodeBefore;if(f){const v=Ld({posBeforeNode:u.bnBlock.beforePos-f.nodeSize,node:f});if(v.blockNoteType==="numberedListItem"){if(!v.isBlockContainer)throw new Error("impossible");const b=v.blockContent.node.attrs.index;l=(parseInt(b)+1).toString()}}const h=u.blockContent.node,p=h.attrs.index,g=((a=f?.firstChild)==null?void 0:a.type.name)!=="numberedListItem";if(p!==l||h.attrs.start&&!g){o=!0;const{start:v,...b}=h.attrs;r.setNodeMarkup(u.blockContent.beforePos,void 0,{...b,index:l,...typeof v=="number"&&g&&{start:v}})}}}),o?r:null}}),PF={...Xr,start:{default:void 0,type:"number"}},$0e=Os({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes(){return{...Iv(PF),index:{default:null,parseHTML:t=>t.getAttribute("data-index"),renderHTML:t=>({"data-index":t.index})}}},addInputRules(){return[new Rd({find:new RegExp("^(\\d+)\\.\\s$"),handler:({state:t,chain:e,range:n,match:r})=>{const o=vr(t);if(!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||o.blockNoteType==="numberedListItem"||o.blockNoteType==="heading")return;const i=parseInt(r[1]);e().command(mi(o.bnBlock.beforePos,{type:"numberedListItem",props:i===1&&{}||{start:i}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>MS(this.options.editor),"Mod-Shift-7":()=>{const t=vr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(mi(t.bnBlock.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins(){return[B0e()]},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;if(n===null)return!1;if(n.tagName==="OL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="OL"){const r=parseInt(n.getAttribute("start")||"1")||1;return t.previousSibling||r===1?{}:{start:r}}return!1},getContent:(t,e)=>YM(t,e,this.name),priority:300,node:"numberedListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return Is(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),H0e=Ql($0e,PF),F0e={...Xr},z0e=Os({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts(){return{"Mod-Alt-0":()=>{const t=vr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(mi(t.bnBlock.beforePos,{type:"paragraph",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"p",getAttrs:t=>{var e;return typeof t=="string"||!((e=t.textContent)!=null&&e.trim())?!1:{}},node:"paragraph"}]},renderHTML({HTMLAttributes:t}){var e,n;return Is(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),U0e=Ql(z0e,F0e),q0e={...Xr},G0e=Os({name:"quote",content:"inline*",group:"blockContent",addInputRules(){return[new Rd({find:new RegExp("^>\\s$"),handler:({state:t,chain:e,range:n})=>{const r=vr(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(mi(r.bnBlock.beforePos,{type:"quote",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{"Mod-Alt-q":()=>{const t=vr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(mi(t.bnBlock.beforePos,{type:"quote"}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"blockquote",node:"quote"}]},renderHTML({HTMLAttributes:t}){var e,n;return Is(this.name,"blockquote",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),K0e=Ql(G0e,q0e),W0e=35,XM=120,Y0e=31,X0e=lr.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[Jhe({cellMinWidth:W0e,defaultCellMinWidth:XM,View:null}),cpe()],addKeyboardShortcuts(){return{Enter:()=>this.editor.state.selection.empty&&this.editor.state.selection.$head.parent.type.name==="tableParagraph"?(this.editor.commands.insertContent({type:"hardBreak"}),!0):!1,Backspace:()=>{const t=this.editor.state.selection,e=t.empty,n=t.$head.parentOffset===0,r=t.$head.node().type.name==="tableParagraph";return e&&n&&r},Tab:()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>W5(1)(t,e,n)),"Shift-Tab":()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>W5(-1)(t,e,n))}},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:pn(dt(t,"tableRole",e))}}}),Q0e={textColor:Xr.textColor},Z0e=Os({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:t}){var e,n;return Is(this.name,"table",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({node:t,HTMLAttributes:e})=>{var n;class r extends L${constructor(i,s,a){super(i,s),this.node=i,this.cellMinWidth=s,this.blockContentHTMLAttributes=a;const l=document.createElement("div");l.className=mr("bn-block-content",a.class),l.setAttribute("data-content-type","table");for(const[p,g]of Object.entries(a))p!=="class"&&l.setAttribute(p,g);const u=this.dom,f=document.createElement("div");f.className="tableWrapper-inner",f.appendChild(u.firstChild),u.appendChild(f),l.appendChild(u);const h=document.createElement("div");h.className="table-widgets-container",h.style.position="relative",u.appendChild(h),this.dom=l}ignoreMutation(i){return!i.target.closest(".tableWrapper-inner")||super.ignoreMutation(i)}}return new r(t,XM,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e})}}}),J0e=Os({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML(){return[{tag:"p",getAttrs:t=>{if(typeof t=="string"||!t.textContent||!t.closest("[data-content-type]"))return!1;const e=t.parentElement;return e===null?!1:e.tagName==="TD"||e.tagName==="TH"?{}:!1},node:"tableParagraph"}]},renderHTML({HTMLAttributes:t}){return["p",t,0]}}),ebe=Kl.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Rs(this.options.HTMLAttributes,t),0]}});function JL(t,e){const n=Bc.fromSchema(e).parse(t,{topNode:e.nodes.blockGroup.create()}),r=[];return n.content.descendants(o=>{if(o.isInline)return r.push(o),!1}),Le.fromArray(r)}const tbe=Ql(Z0e,Q0e,[X0e,J0e,hhe.extend({content:"tableContent+",parseHTML(){return[{tag:"th",getContent:(t,e)=>JL(t,e)}]}}),fhe.extend({content:"tableContent+",parseHTML(){return[{tag:"td",getContent:(t,e)=>JL(t,e)}]}}),ebe]),eV=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},nbe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>',rbe={textAlignment:Xr.textAlignment,backgroundColor:Xr.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},LF={type:"video",propSchema:rbe,content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},obe=(t,e)=>{const n=document.createElement("div");n.innerHTML=nbe;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("video");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(i=>{o.src=i}):o.src=t.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,o.width=t.props.previewWidth,r.appendChild(o),MF(t,e,{dom:r},r,e.dictionary.file_blocks.video.add_button_text,n.firstElementChild)},VF=t=>{if(t.tagName==="VIDEO")return t.closest("figure")?void 0:eV(t);if(t.tagName==="FIGURE"){const e=AS(t,"video");if(!e)return;const{targetElement:n,caption:r}=e;return{...eV(n),caption:r}}},ibe=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add video",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("video"),e.src=t.props.url,t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?WM(e,t.props.caption):RS(e,t.props.caption):{dom:e}},sbe=Nv(LF,{render:obe,parse:VF,toExternalHTML:ibe}),QM={paragraph:U0e,heading:E0e,quote:K0e,codeBlock:f0e,toggleListItem:N0e,bulletListItem:P0e,numberedListItem:H0e,checkListItem:V0e,table:tbe,file:w0e,image:R0e,video:sbe,audio:c0e},abe=sF(QM),ZM={bold:Tf(Jfe,"boolean"),italic:Tf(ahe,"boolean"),underline:Tf(dhe,"boolean"),strike:Tf(uhe,"boolean"),code:Tf(nhe,"boolean"),textColor:g0e,backgroundColor:p0e};fF(ZM);const jF={text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}},lbe=dF(jF);function ci(t,e){return t in e.schema.blockSchema&&e.schema.blockSchema[t]===abe[t]}function cbe(t,e){return t in e.schema.inlineContentSchema&&e.schema.inlineContentSchema[t]===lbe[t]}function ube(t,e,n){return e.type===t&&e.type in n.schema.blockSchema&&ci(e.type,n)}function Pv(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock||!1}function dbe(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock&&"showPreview"in e.schema.blockSchema[t.type].propSchema||!1}function Lv(t,e){return e.schema.blockSchema[t.type].isFileBlock&&!t.props.url}function Sp(t,e,n){return e in n.schema.blockSchema&&t in n.schema.blockSchema[e].propSchema&&n.schema.blockSchema[e].propSchema[t]===Xr[t]}function D2(t,e,n){return Sp(t,e.type,n)}function O2(t){return t instanceof rr}function fbe(t){let e=t.getTextCursorPosition().block,n=t.schema.blockSchema[e.type].content;for(;n==="none";){if(e=t.getTextCursorPosition().nextBlock,e===void 0)return;n=t.schema.blockSchema[e.type].content,t.setTextCursorPosition(e,"end")}}function mo(t,e){const n=t.getTextCursorPosition().block;if(n.content===void 0)throw new Error("Slash Menu open in a block that doesn't contain content.");let r;return Array.isArray(n.content)&&(n.content.length===1&&dh(n.content[0])&&n.content[0].type==="text"&&n.content[0].text==="/"||n.content.length===0)?(r=t.updateBlock(n,e),t.setTextCursorPosition(r)):(r=t.insertBlocks([e],n,"after")[0],t.setTextCursorPosition(t.getTextCursorPosition().nextBlock)),fbe(t),r}function hbe(t){const e=[];return ci("heading",t)&&e.push({onItemClick:()=>{mo(t,{type:"heading",props:{level:1}})},badge:Ss("Mod-Alt-1"),key:"heading",...t.dictionary.slash_menu.heading},{onItemClick:()=>{mo(t,{type:"heading",props:{level:2}})},badge:Ss("Mod-Alt-2"),key:"heading_2",...t.dictionary.slash_menu.heading_2},{onItemClick:()=>{mo(t,{type:"heading",props:{level:3}})},badge:Ss("Mod-Alt-3"),key:"heading_3",...t.dictionary.slash_menu.heading_3}),ci("quote",t)&&e.push({onItemClick:()=>{mo(t,{type:"quote"})},key:"quote",...t.dictionary.slash_menu.quote}),ci("toggleListItem",t)&&e.push({onItemClick:()=>{mo(t,{type:"toggleListItem"})},badge:Ss("Mod-Shift-6"),key:"toggle_list",...t.dictionary.slash_menu.toggle_list}),ci("numberedListItem",t)&&e.push({onItemClick:()=>{mo(t,{type:"numberedListItem"})},badge:Ss("Mod-Shift-7"),key:"numbered_list",...t.dictionary.slash_menu.numbered_list}),ci("bulletListItem",t)&&e.push({onItemClick:()=>{mo(t,{type:"bulletListItem"})},badge:Ss("Mod-Shift-8"),key:"bullet_list",...t.dictionary.slash_menu.bullet_list}),ci("checkListItem",t)&&e.push({onItemClick:()=>{mo(t,{type:"checkListItem"})},badge:Ss("Mod-Shift-9"),key:"check_list",...t.dictionary.slash_menu.check_list}),ci("paragraph",t)&&e.push({onItemClick:()=>{mo(t,{type:"paragraph"})},badge:Ss("Mod-Alt-0"),key:"paragraph",...t.dictionary.slash_menu.paragraph}),ci("codeBlock",t)&&e.push({onItemClick:()=>{mo(t,{type:"codeBlock"})},badge:Ss("Mod-Alt-c"),key:"code_block",...t.dictionary.slash_menu.code_block}),ci("table",t)&&e.push({onItemClick:()=>{mo(t,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...t.dictionary.slash_menu.table}),ci("image",t)&&e.push({onItemClick:()=>{const n=mo(t,{type:"image"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"image",...t.dictionary.slash_menu.image}),ci("video",t)&&e.push({onItemClick:()=>{const n=mo(t,{type:"video"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"video",...t.dictionary.slash_menu.video}),ci("audio",t)&&e.push({onItemClick:()=>{const n=mo(t,{type:"audio"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"audio",...t.dictionary.slash_menu.audio}),ci("file",t)&&e.push({onItemClick:()=>{const n=mo(t,{type:"file"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"file",...t.dictionary.slash_menu.file}),ci("heading",t)&&(e.push({onItemClick:()=>{mo(t,{type:"heading",props:{level:1,isToggleable:!0}})},key:"toggle_heading",...t.dictionary.slash_menu.toggle_heading},{onItemClick:()=>{mo(t,{type:"heading",props:{level:2,isToggleable:!0}})},key:"toggle_heading_2",...t.dictionary.slash_menu.toggle_heading_2},{onItemClick:()=>{mo(t,{type:"heading",props:{level:3,isToggleable:!0}})},key:"toggle_heading_3",...t.dictionary.slash_menu.toggle_heading_3}),t.settings.heading.levels.filter(n=>n>3).forEach(n=>{e.push({onItemClick:()=>{mo(t,{type:"heading",props:{level:n}})},key:`heading_${n}`,...t.dictionary.slash_menu[`heading_${n}`]})})),e.push({onItemClick:()=>{t.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...t.dictionary.slash_menu.emoji}),e}function pbe(t,e){return t.filter(({title:n,aliases:r})=>n.toLowerCase().includes(e.toLowerCase())||r&&r.filter(o=>o.toLowerCase().includes(e.toLowerCase())).length!==0)}function uk(t){return t&&Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}let JM=class BF{constructor(e){Ee(this,"blockSpecs"),Ee(this,"inlineContentSpecs"),Ee(this,"styleSpecs"),Ee(this,"blockSchema"),Ee(this,"inlineContentSchema"),Ee(this,"styleSchema"),Ee(this,"BlockNoteEditor","only for types"),Ee(this,"Block","only for types"),Ee(this,"PartialBlock","only for types"),this.blockSpecs=uk(e?.blockSpecs)||QM,this.inlineContentSpecs=uk(e?.inlineContentSpecs)||jF,this.styleSpecs=uk(e?.styleSpecs)||ZM,this.blockSchema=sF(this.blockSpecs),this.inlineContentSchema=dF(this.inlineContentSpecs),this.styleSchema=fF(this.styleSpecs)}static create(e){return new BF(e)}};const mbe={type:"pageBreak",propSchema:{},content:"none",isFileBlock:!1,isSelectable:!1},gbe=()=>{const t=document.createElement("div");return t.className="bn-page-break",t.setAttribute("data-page-break",""),{dom:t}},ybe=t=>{if(t.tagName==="DIV"&&t.hasAttribute("data-page-break"))return{type:"pageBreak"}},vbe=()=>{const t=document.createElement("div");return t.setAttribute("data-page-break",""),{dom:t}},bbe=Nv(mbe,{render:gbe,parse:ybe,toExternalHTML:vbe});JM.create({blockSpecs:{pageBreak:bbe}});function wbe(t){return t.transact(e=>{const n=Zc(e.doc,e.selection.anchor);if(e.selection instanceof rr)return{type:"cell",anchorBlockId:n.node.attrs.id,anchorCellOffset:e.selection.$anchorCell.pos-n.posBeforeNode,headCellOffset:e.selection.$headCell.pos-n.posBeforeNode};if(e.selection instanceof ht)return{type:"node",anchorBlockId:n.node.attrs.id};{const r=Zc(e.doc,e.selection.head);return{type:"text",anchorBlockId:n.node.attrs.id,headBlockId:r.node.attrs.id,anchorOffset:e.selection.anchor-n.posBeforeNode,headOffset:e.selection.head-r.posBeforeNode}}})}function Cbe(t,e){var n,r;const o=(n=Ns(e.anchorBlockId,t.doc))==null?void 0:n.posBeforeNode;if(o===void 0)throw new Error(`Could not find block with ID ${e.anchorBlockId} to update selection`);let i;if(e.type==="cell")i=rr.create(t.doc,o+e.anchorCellOffset,o+e.headCellOffset);else if(e.type==="node")i=ht.create(t.doc,o+1);else{const s=(r=Ns(e.headBlockId,t.doc))==null?void 0:r.posBeforeNode;if(s===void 0)throw new Error(`Could not find block with ID ${e.headBlockId} to update selection`);i=at.create(t.doc,o+e.anchorOffset,s+e.headOffset)}t.setSelection(i)}function P2(t){return t.map(e=>e.type==="columnList"?e.children.map(n=>P2(n.children)).flat():{...e,children:P2(e.children)}).flat()}function $F(t,e,n){t.transact(r=>{var o;const i=((o=t.getSelection())==null?void 0:o.blocks)||[t.getTextCursorPosition().block],s=wbe(t);t.removeBlocks(i),t.insertBlocks(P2(i),e,n),Cbe(r,s)})}function HF(t){return!t||t.type!=="columnList"}function FF(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[e.children.length-1],o="after"):(r=e,o="before"):n&&(r=n,o="before"),!r||!o)return;const i=t.getParentBlock(r);return HF(i)?{referenceBlock:r,placement:o}:FF(t,o==="after"?r:t.getPrevBlock(r),i)}function zF(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[0],o="before"):(r=e,o="after"):n&&(r=n,o="after"),!r||!o)return;const i=t.getParentBlock(r);return HF(i)?{referenceBlock:r,placement:o}:zF(t,o==="before"?r:t.getNextBlock(r),i)}function Sbe(t){t.transact(()=>{const e=t.getSelection(),n=e?.blocks[0]||t.getTextCursorPosition().block,r=FF(t,t.getPrevBlock(n),t.getParentBlock(n));r&&$F(t,r.referenceBlock,r.placement)})}function xbe(t){t.transact(()=>{const e=t.getSelection(),n=e?.blocks[e?.blocks.length-1]||t.getTextCursorPosition().block,r=zF(t,t.getNextBlock(n),t.getParentBlock(n));r&&$F(t,r.referenceBlock,r.placement)})}function Ebe(t,e,n){const{$from:r,$to:o}=t.selection,i=r.blockRange(o,g=>g.childCount>0&&(g.type.name==="blockGroup"||g.type.name==="column"));if(!i)return!1;const s=i.startIndex;if(s===0)return!1;const a=i.parent.child(s-1);if(a.type!==e)return!1;const l=a.lastChild&&a.lastChild.type===n,u=Le.from(l?e.create():null),f=new Ye(Le.from(e.create(null,Le.from(n.create(null,u)))),l?3:1,0),h=i.start,p=i.end;return t.step(new Yr(h-(l?3:1),p,h,p,f,1,!0)).scrollIntoView(),!0}function UF(t){return t.transact(e=>Ebe(e,t.pmSchema.nodes.blockContainer,t.pmSchema.nodes.blockGroup))}function _be(t){t._tiptapEditor.commands.liftListItem("blockContainer")}function kbe(t){return t.transact(e=>{const{bnBlock:n}=ES(e);return e.doc.resolve(n.beforePos).nodeBefore!==null})}function Tbe(t){return t.transact(e=>{const{bnBlock:n}=ES(e);return e.doc.resolve(n.beforePos).depth>1})}function Abe(t,e){const n=typeof e=="string"?e:e.id,r=No(t),o=Ns(n,t);if(o)return Rr(o.node,r)}function Rbe(t,e){const n=typeof e=="string"?e:e.id,r=Ns(n,t),o=No(t);if(!r)return;const i=t.resolve(r.posBeforeNode).nodeBefore;if(i)return Rr(i,o)}function Mbe(t,e){const n=typeof e=="string"?e:e.id,r=Ns(n,t),o=No(t);if(!r)return;const i=t.resolve(r.posBeforeNode+r.node.nodeSize).nodeAfter;if(i)return Rr(i,o)}function Ibe(t,e){const n=typeof e=="string"?e:e.id,r=No(t),o=Ns(n,t);if(!o)return;const i=t.resolve(o.posBeforeNode),s=i.node(),a=i.node(-1),l=a.type.name!=="doc"?s.type.name==="blockGroup"?a:s:void 0;if(l)return Rr(l,r)}function Nbe(t,e,n,r={updateSelection:!0}){let{from:o,to:i}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},s=!0,a=!0,l="";if(n.forEach(u=>{u.check(),s&&u.isText&&u.marks.length===0?l+=u.text:s=!1,a=a?u.isBlock:!1}),o===i&&a){const{parent:u}=t.doc.resolve(o);u.isTextblock&&!u.type.spec.code&&!u.childCount&&(o-=1,i+=1)}return s?t.insertText(l,o,i):t.replaceWith(o,i,n),r.updateSelection&&h$(t,t.steps.length-1,-1),!0}function Dbe(t){const e=No(t);if(t.selection.empty||"node"in t.selection)return;const n=t.doc.resolve(Zc(t.doc,t.selection.from).posBeforeNode),r=t.doc.resolve(Zc(t.doc,t.selection.to).posBeforeNode),o=(u,f)=>{const h=n.posAtIndex(u,f),p=t.doc.resolve(h).nodeAfter;if(!p)throw new Error(`Error getting selection - node not found at position ${h}`);return Rr(p,e)},i=[],s=n.sharedDepth(r.pos),a=n.index(s),l=r.index(s);if(n.depth>s){i.push(Rr(n.nodeAfter,e));for(let u=n.depth;u>s;u--)if(n.node(u).type.isInGroup("childContainer")){const f=n.index(u)+1,h=n.node(u).childCount;for(let p=f;p<h;p++)i.push(o(p,u))}}else i.push(o(a,s));for(let u=a+1;u<=l;u++)i.push(o(u,s));if(i.length===0)throw new Error(`Error getting selection - selection doesn't span any blocks (${t.selection})`);return{blocks:i}}function Obe(t,e,n){const r=typeof e=="string"?e:e.id,o=typeof n=="string"?n:n.id,i=No(t),s=Ov(i);if(r===o)throw new Error(`Attempting to set selection with the same anchor and head blocks (id ${r})`);const a=Ns(r,t.doc);if(!a)throw new Error(`Block with ID ${r} not found`);const l=Ns(o,t.doc);if(!l)throw new Error(`Block with ID ${o} not found`);const u=Ld(a),f=Ld(l),h=s.blockSchema[u.blockNoteType],p=s.blockSchema[f.blockNoteType];if(!u.isBlockContainer||h.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${r})`);if(!f.isBlockContainer||p.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${o})`);let g,v;if(h.content==="table"){const b=_r.get(u.blockContent.node);g=u.blockContent.beforePos+b.positionAt(0,0,u.blockContent.node)+1+2}else g=u.blockContent.beforePos+1;if(p.content==="table"){const b=_r.get(f.blockContent.node),E=f.blockContent.beforePos+b.positionAt(b.height-1,b.width-1,f.blockContent.node)+1,T=t.doc.resolve(E).nodeAfter.nodeSize;v=E+T-2}else v=f.blockContent.afterPos-1;t.setSelection(at.create(t.doc,g,v))}function Pbe(t){const e=No(t);let n=t.selection.$from,r=t.selection.$to;for(;r.parentOffset>=r.parent.nodeSize-2&&r.depth>0;)r=t.doc.resolve(r.pos+1);for(;r.parentOffset===0&&r.depth>0;)r=t.doc.resolve(r.pos-1);for(;n.parentOffset===0&&n.depth>0;)n=t.doc.resolve(n.pos-1);for(;n.parentOffset>=n.parent.nodeSize-2&&n.depth>0;)n=t.doc.resolve(n.pos+1);const o=Vve(t.doc.slice(n.pos,r.pos,!0),e);return{_meta:{startPos:n.pos,endPos:r.pos},...o}}function Lbe(t){const{bnBlock:e}=ES(t),n=No(t.doc),r=t.doc.resolve(e.beforePos),o=r.nodeBefore,i=t.doc.resolve(e.afterPos).nodeAfter;let s;return r.depth>1&&(s=r.node(),s.type.isInGroup("bnBlock")||(s=r.node(r.depth-1))),{block:Rr(e.node,n),prevBlock:o===null?void 0:Rr(o,n),nextBlock:i===null?void 0:Rr(i,n),parentBlock:s===void 0?void 0:Rr(s,n)}}function qF(t,e,n="start"){const r=typeof e=="string"?e:e.id,o=No(t.doc),i=Ov(o),s=Ns(r,t.doc);if(!s)throw new Error(`Block with ID ${r} not found`);const a=Ld(s),l=i.blockSchema[a.blockNoteType].content;if(a.isBlockContainer){const u=a.blockContent;if(l==="none"){t.setSelection(ht.create(t.doc,u.beforePos));return}if(l==="inline")n==="start"?t.setSelection(at.create(t.doc,u.beforePos+1)):t.setSelection(at.create(t.doc,u.afterPos-1));else if(l==="table")n==="start"?t.setSelection(at.create(t.doc,u.beforePos+4)):t.setSelection(at.create(t.doc,u.afterPos-4));else throw new zl(l)}else{const u=n==="start"?a.childContainer.node.firstChild:a.childContainer.node.lastChild;qF(t,u.attrs.id,n)}}let xp;async function eI(){if(xp)return xp;const t=await Promise.all([Wi(()=>import("./index-D-5rahc_.js"),__vite__mapDeps([0,1,2,3,4,5])),Wi(()=>import("./index-5Zz36bbo.js"),__vite__mapDeps([6,4,7,8,9])),Wi(()=>import("./index-CeoFZv18.js"),__vite__mapDeps([10,1,2])),Wi(()=>import("./index-CfyObm-o.js"),__vite__mapDeps([11,5,4])),Wi(()=>import("./index-CS_xzTwR.js"),__vite__mapDeps([12,13,14,15,9,16,17,18])),Wi(()=>import("./index-BuQLf8Am.js"),__vite__mapDeps([19,20,21,22,8,3,15,23,17,18,16])),Wi(()=>import("./index--n2O05f-.js"),__vite__mapDeps([24,7,23,22,21,17,15,18,16,25])),Wi(()=>import("./index-BxE2facF.js"),__vite__mapDeps([26,25,20,21,22,2,18])),Wi(()=>import("./index-DoJwJBw7.js"),__vite__mapDeps([27,13,21,17,15])),Wi(()=>import("./index-BCPnb1JI.js"),__vite__mapDeps([28,14,15,9]))]);return xp={rehypeParse:t[0],rehypeStringify:t[1],unified:t[2],hastUtilFromDom:t[3],rehypeRemark:t[4],remarkGfm:t[5],remarkStringify:t[6],remarkParse:t[7],remarkRehype:t[8],rehypeFormat:t[9]},xp}function Vbe(){const t=e=>{let n=e.children.length;for(let r=0;r<n;r++){const o=e.children[r];if(o.type==="element"&&(t(o),o.tagName==="u"))if(o.children.length>0){e.children.splice(r,1,...o.children);const i=o.children.length-1;n+=i,r+=i}else e.children.splice(r,1),n--,r--}};return t}function jbe(){const t=xp;if(!t)throw new Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");const e=n=>{var r;if(n.children&&"length"in n.children&&n.children.length)for(let o=n.children.length-1;o>=0;o--){const i=n.children[o],s=o+1<n.children.length?n.children[o+1]:void 0;i.type==="element"&&i.tagName==="input"&&((r=i.properties)==null?void 0:r.type)==="checkbox"&&s?.type==="element"&&s.tagName==="p"?(s.tagName="span",s.children.splice(0,0,t.hastUtilFromDom.fromDom(document.createTextNode(" ")))):e(i)}};return e}function tI(t){const e=xp;if(!e)throw new Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return e.unified.unified().use(e.rehypeParse.default,{fragment:!0}).use(Vbe).use(jbe).use(e.rehypeRemark.default).use(e.remarkGfm.default).use(e.remarkStringify.default,{handlers:{text:n=>n.value}}).processSync(t).value}async function Bbe(t,e,n,r){await eI();const o=TS(e,n).exportBlocks(t,r);return tI(o)}function $be(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function Hbe(t){return t.nodeType===3&&!/\S/.test(t.nodeValue||"")}function Fbe(t){t.querySelectorAll("li > ul, li > ol").forEach(e=>{const n=$be(e),r=e.parentElement,o=Array.from(r.childNodes).slice(n+1);e.remove(),o.forEach(i=>{i.remove()}),r.insertAdjacentElement("afterend",e),o.reverse().forEach(i=>{if(Hbe(i))return;const s=document.createElement("li");s.append(i),e.insertAdjacentElement("afterend",s)}),r.childNodes.length===0&&r.remove()})}function zbe(t){t.querySelectorAll("li + ul, li + ol").forEach(e=>{var n,r;const o=e.previousElementSibling,i=document.createElement("div");o.insertAdjacentElement("afterend",i),i.append(o);const s=document.createElement("div");for(s.setAttribute("data-node-type","blockGroup"),i.append(s);((n=i.nextElementSibling)==null?void 0:n.nodeName)==="UL"||((r=i.nextElementSibling)==null?void 0:r.nodeName)==="OL";)s.append(i.nextElementSibling)})}let tV=null;function Ube(){return tV||(tV=document.implementation.createHTMLDocument("title"))}function GF(t){if(typeof t=="string"){const e=Ube().createElement("div");e.innerHTML=t,t=e}return Fbe(t),zbe(t),t}async function KF(t,e){const n=GF(t),r=Bc.fromSchema(e).parse(n,{topNode:e.nodes.blockGroup.create()}),o=[];for(let i=0;i<r.childCount;i++)o.push(Rr(r.child(i),e));return o}function qbe(t,e){const n=e.value?e.value:"",r={};e.lang&&(r["data-language"]=e.lang);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}async function WF(t){const e=await eI();return e.unified.unified().use(e.remarkParse.default).use(e.remarkGfm.default).use(e.remarkRehype.default,{handlers:{...e.remarkRehype.defaultHandlers,code:qbe}}).use(e.rehypeStringify.default).processSync(t).value}async function Gbe(t,e){const n=await WF(t);return KF(n,e)}const nI=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function Kbe(t,e){if(!t.startsWith(".")||!e.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return t===e}function Wbe(t,e){const n=t.split("/"),r=e.split("/");if(n.length!==2)throw new Error(`The string ${t} is not a valid MIME type.`);if(r.length!==2)throw new Error(`The string ${e} is not a valid MIME type.`);return n[1]==="*"||r[1]==="*"?n[0]===r[0]:(n[0]==="*"||r[0]==="*"||n[0]===r[0])&&n[1]===r[1]}function nV(t,e,n){let r;return Array.isArray(e.content)&&e.content.length===0?r=t.updateBlock(e,n).id:r=t.insertBlocks([n],e,"after")[0].id,r}async function YF(t,e){var n;if(!e.uploadFile){console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");return}const r="dataTransfer"in t?t.dataTransfer:t.clipboardData;if(r===null)return;let o=null;for(const a of nI)if(r.types.includes(a)){o=a;break}if(o!=="Files")return;const i=r.items;if(!i)return;t.preventDefault();const s=Object.values(e.schema.blockSchema).filter(a=>a.isFileBlock);for(let a=0;a<i.length;a++){let l="file";for(const f of s)for(const h of f.fileBlockAccept||[]){const p=h.startsWith("."),g=i[a].getAsFile();if(g&&(!p&&g.type&&Wbe(i[a].type,h)||p&&Kbe("."+g.name.split(".").pop(),h))){l=f.type;break}}const u=i[a].getAsFile();if(u){const f={type:l,props:{name:u.name}};let h;if(t.type==="paste"){const v=e.getTextCursorPosition().block;h=nV(e,v,f)}else if(t.type==="drop"){const v={left:t.clientX,top:t.clientY},b=(n=e.prosemirrorView)==null?void 0:n.posAtCoords(v);if(!b)return;h=e.transact(E=>{const T=Zc(E.doc,b.pos);return nV(e,e.getBlock(T.node.attrs.id),f)})}else return;const p=await e.uploadFile(u,h),g=typeof p=="string"?{props:{url:p}}:{...p};e.updateBlock(h,g)}}}const Ybe=t=>lr.create({name:"dropFile",addProseMirrorPlugins(){return[new nn({props:{handleDOMEvents:{drop(e,n){if(!t.isEditable)return;let r=null;for(const o of nI)if(n.dataTransfer.types.includes(o)){r=o;break}return r===null?!0:r==="Files"?(YF(n,t),!0):!1}}}})]}}),Xbe=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,Qbe=/(_|__|\*|\*\*|~~|==|\+\+)(?!\s)(?:[^\s](?:.{0,62}[^\s])?|\S)(?=\1)/,Zbe=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,Jbe=/(?:\s|^)`(?!\s)(?:[^\s`](?:[^`]{0,46}[^\s`])?|[^\s`])`([^\w]|$)/,e1e=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,t1e=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,n1e=/\n{2} {0,3}-{2,48}\n{2}/,r1e=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,o1e=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,i1e=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,s1e=/^\s*\|(.+\|)+\s*$/m,a1e=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,l1e=/^\s*\|(.+\|)+\s*$/m,c1e=t=>Xbe.test(t)||Qbe.test(t)||Zbe.test(t)||Jbe.test(t)||e1e.test(t)||t1e.test(t)||n1e.test(t)||r1e.test(t)||o1e.test(t)||i1e.test(t)||s1e.test(t)||a1e.test(t)||l1e.test(t);async function u1e(t,e){const{schema:n}=e.state;if(!t.clipboardData)return!1;const r=t.clipboardData.getData("text/plain");if(!r)return!1;if(!n.nodes.codeBlock)return e.pasteText(r),!0;const o=t.clipboardData.getData("vscode-editor-data"),i=o?JSON.parse(o):void 0,s=i?.mode;return s?(e.pasteHTML(`<pre><code class="language-${s}">${r.replace(/\r\n?/g,`
`)}</code></pre>`),!0):!1}function d1e({event:t,editor:e,prioritizeMarkdownOverHTML:n,plainTextAsMarkdown:r}){var o;if(e.transact(a=>a.selection.$from.parent.type.spec.code&&a.selection.$to.parent.type.spec.code)){const a=(o=t.clipboardData)==null?void 0:o.getData("text/plain");if(a)return e.pasteText(a),!0}let i;for(const a of nI)if(t.clipboardData.types.includes(a)){i=a;break}if(!i)return!0;if(i==="vscode-editor-data")return u1e(t,e.prosemirrorView),!0;if(i==="Files")return YF(t,e),!0;const s=t.clipboardData.getData(i);if(i==="blocknote/html")return e.pasteHTML(s,!0),!0;if(i==="text/markdown")return e.pasteMarkdown(s),!0;if(n){const a=t.clipboardData.getData("text/plain");if(c1e(a))return e.pasteMarkdown(a),!0}return i==="text/html"?(e.pasteHTML(s),!0):r?(e.pasteMarkdown(s),!0):(e.pasteText(s),!0)}const f1e=(t,e)=>lr.create({name:"pasteFromClipboard",addProseMirrorPlugins(){return[new nn({props:{handleDOMEvents:{paste(n,r){if(r.preventDefault(),!!t.isEditable)return e({event:r,editor:t,defaultPasteHandler:({prioritizeMarkdownOverHTML:o=!0,plainTextAsMarkdown:i=!0}={})=>d1e({event:r,editor:t,prioritizeMarkdownOverHTML:o,plainTextAsMarkdown:i})})}}}})]}});function XF(t){const e=[];return t.descendants(n=>{var r,o;const i=No(n);return n.type.name==="blockContainer"&&((r=n.firstChild)==null?void 0:r.type.name)==="blockGroup"?!0:n.type.name==="columnList"&&n.childCount===1?((o=n.firstChild)==null||o.forEach(s=>{e.push(Rr(s,i))}),!1):n.type.isInGroup("bnBlock")?(e.push(Rr(n,i)),!1):!0}),e}function h1e(t,e,n){var r;let o=!1;const i=t.state.selection instanceof rr;if(!i){const l=t.state.doc.slice(t.state.selection.from,t.state.selection.to,!1).content,u=[];for(let f=0;f<l.childCount;f++)u.push(l.child(f));o=u.find(f=>f.type.isInGroup("bnBlock")||f.type.name==="blockGroup"||f.type.spec.group==="blockContent")===void 0,o&&(e=l)}let s;const a=TS(t.state.schema,n);if(i){((r=e.firstChild)==null?void 0:r.type.name)==="table"&&(e=e.firstChild.content);const l=uF(e,n.schema.inlineContentSchema,n.schema.styleSchema);s=`<table>${a.exportInlineContent(l,{})}</table>`}else if(o){const l=_S(e,n.schema.inlineContentSchema,n.schema.styleSchema);s=a.exportInlineContent(l,{})}else{const l=XF(e);s=a.exportBlocks(l,{})}return s}function QF(t,e){"node"in t.state.selection&&t.state.selection.node.type.spec.group==="blockContent"&&e.transact(s=>s.setSelection(new ht(s.doc.resolve(t.state.selection.from-1))));const n=t.serializeForClipboard(t.state.selection.content()).dom.innerHTML,r=t.state.selection.content().content,o=h1e(t,r,e),i=tI(o);return{clipboardHTML:n,externalHTML:o,markdown:i}}const rV=()=>{const t=window.getSelection();if(!t||t.isCollapsed)return!0;let e=t.focusNode;for(;e;){if(e instanceof HTMLElement&&e.getAttribute("contenteditable")==="false")return!0;e=e.parentElement}return!1},oV=(t,e,n)=>{n.preventDefault(),n.clipboardData.clearData();const{clipboardHTML:r,externalHTML:o,markdown:i}=QF(e,t);n.clipboardData.setData("blocknote/html",r),n.clipboardData.setData("text/html",o),n.clipboardData.setData("text/plain",i)},p1e=t=>lr.create({name:"copyToClipboard",addProseMirrorPlugins(){return[new nn({props:{handleDOMEvents:{copy(e,n){return rV()||oV(t,e,n),!0},cut(e,n){return rV()||(oV(t,e,n),e.editable&&e.dispatch(e.state.tr.deleteSelection())),!0},dragstart(e,n){if(!("node"in e.state.selection)||e.state.selection.node.type.spec.group!=="blockContent")return;t.transact(s=>s.setSelection(new ht(s.doc.resolve(e.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();const{clipboardHTML:r,externalHTML:o,markdown:i}=QF(e,t);return n.dataTransfer.setData("blocknote/html",r),n.dataTransfer.setData("text/html",o),n.dataTransfer.setData("text/plain",i),!0}}}})]}}),m1e=lr.create({name:"blockBackgroundColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{backgroundColor:{default:Xr.backgroundColor.default,parseHTML:t=>t.hasAttribute("data-background-color")?t.getAttribute("data-background-color"):Xr.backgroundColor.default,renderHTML:t=>t.backgroundColor===Xr.backgroundColor.default?{}:{"data-background-color":t.backgroundColor}}}}]}});let rI=class{constructor(){Ee(this,"callbacks",{})}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),()=>this.off(e,n)}emit(e,...n){const r=this.callbacks[e];r&&r.forEach(o=>o.apply(this,n))}off(e,n){const r=this.callbacks[e];r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e])}removeAllListeners(){this.callbacks={}}},Io=class extends rI{constructor(...e){super(),Ee(this,"plugins",[])}static key(){throw new Error("You must implement the key method in your extension")}addProsemirrorPlugin(e){this.plugins.push(e)}get priority(){}};class g1e extends Io{constructor(){super(),Ee(this,"beforeChangeCallbacks",[]),this.addProsemirrorPlugin(new nn({filterTransaction:e=>{let n;return this.beforeChangeCallbacks.reduce((r,o)=>r===!1?r:o({getChanges(){return n||(n=yF(e),n)},tr:e})!==!1,!0)}}))}static key(){return"blockChange"}subscribe(e){return this.beforeChangeCallbacks.push(e),()=>{this.beforeChangeCallbacks=this.beforeChangeCallbacks.filter(n=>n!==e)}}}const p1=class ZF extends Io{constructor(e){super(),Ee(this,"provider"),Ee(this,"recentlyUpdatedCursors"),Ee(this,"renderCursor",(n,r)=>{let o=this.recentlyUpdatedCursors.get(r);if(!o){const i=(this.collaboration.renderCursor??ZF.defaultCursorRender)(n);this.collaboration.showCursorLabels!=="always"&&(i.addEventListener("mouseenter",()=>{const s=this.recentlyUpdatedCursors.get(r);s.element.setAttribute("data-active",""),s.hideTimeout&&(clearTimeout(s.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:s.element,hideTimeout:void 0}))}),i.addEventListener("mouseleave",()=>{const s=this.recentlyUpdatedCursors.get(r);this.recentlyUpdatedCursors.set(r,{element:s.element,hideTimeout:setTimeout(()=>{s.element.removeAttribute("data-active")},2e3)})})),o={element:i,hideTimeout:void 0},this.recentlyUpdatedCursors.set(r,o)}return o.element}),Ee(this,"updateUser",n=>{this.provider.awareness.setLocalStateField("user",n)}),this.collaboration=e,this.provider=e.provider,this.recentlyUpdatedCursors=new Map,this.provider.awareness.setLocalStateField("user",e.user),e.showCursorLabels!=="always"&&this.provider.awareness.on("change",({updated:n})=>{for(const r of n){const o=this.recentlyUpdatedCursors.get(r);o&&(o.element.setAttribute("data-active",""),o.hideTimeout&&clearTimeout(o.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:o.element,hideTimeout:setTimeout(()=>{o.element.removeAttribute("data-active")},2e3)}))}}),this.addProsemirrorPlugin(bve(this.provider.awareness,{selectionBuilder:oF,cursorBuilder:this.renderCursor}))}static key(){return"yCursorPlugin"}get priority(){return 999}static isDarkColor(e){const n=e.charAt(0)==="#"?e.substring(1,7):e,r=parseInt(n.substring(0,2),16),o=parseInt(n.substring(2,4),16),i=parseInt(n.substring(4,6),16),s=[r/255,o/255,i/255].map(a=>a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4));return .2126*s[0]+.7152*s[1]+.0722*s[2]<=.179}};Ee(p1,"defaultCursorRender",t=>{const e=document.createElement("span");e.classList.add("bn-collaboration-cursor__base");const n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style",`background-color: ${t.color}; color: ${p1.isDarkColor(t.color)?"white":"black"}`);const r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style",`background-color: ${t.color}; color: ${p1.isDarkColor(t.color)?"white":"black"}`),r.insertBefore(document.createTextNode(t.name),null),n.insertBefore(r,null),e.insertBefore(document.createTextNode(""),null),e.insertBefore(n,null),e.insertBefore(document.createTextNode(""),null),e});let JF=p1,L2=class extends Io{static key(){return"ySyncPlugin"}constructor(e){super(),this.addProsemirrorPlugin(rve(e))}get priority(){return 1001}},V2=class extends Io{static key(){return"yUndoPlugin"}constructor({editor:e}){super(),this.addProsemirrorPlugin(kve({trackedOrigins:[e]}))}get priority(){return 1e3}};const ez=Zo.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes(){return{orphan:{parseHTML:t=>!!t.getAttribute("data-orphan"),renderHTML:t=>t.orphan?{"data-orphan":"true"}:{},default:!1},threadId:{parseHTML:t=>t.getAttribute("data-bn-thread-id"),renderHTML:t=>({"data-bn-thread-id":t.threadId}),default:""}}},renderHTML({HTMLAttributes:t}){return["span",Rs(t,{class:"bn-thread-mark"})]},parseHTML(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema(t){return t.name==="comment"?{blocknoteIgnore:!0}:{}}});class y1e extends rI{constructor(e){super(),Ee(this,"userCache",new Map),Ee(this,"loadingUsers",new Set),this.resolveUsers=e}async loadUsers(e){const n=e.filter(r=>!this.userCache.has(r)&&!this.loadingUsers.has(r));if(n.length!==0){for(const r of n)this.loadingUsers.add(r);try{const r=await this.resolveUsers(n);for(const o of r)this.userCache.set(o.id,o);this.emit("update",this.userCache)}finally{for(const r of n)this.loadingUsers.delete(r)}}}getUser(e){return this.userCache.get(e)}subscribe(e){return this.on("update",e)}}const Pb=new Nn("blocknote-comments"),v1e="SET_SELECTED_THREAD_ID";function b1e(t,e){const n=new Map;return t.descendants((r,o)=>{r.marks.forEach(i=>{if(i.type.name===e){const s=i.attrs.threadId;if(!s)return;const a=o,l=a+r.nodeSize,u=n.get(s)??{from:1/0,to:0};n.set(s,{from:Math.min(a,u.from),to:Math.max(l,u.to)})}})}),n}class w1e extends Io{constructor(e,n,r){if(super(),Ee(this,"userStore"),Ee(this,"pendingComment",!1),Ee(this,"selectedThreadId"),Ee(this,"threadPositions",new Map),Ee(this,"updateMarksFromThreads",i=>{this.editor.transact(s=>{s.doc.descendants((a,l)=>{a.marks.forEach(u=>{if(u.type.name===this.markType){const f=u.type,h=u.attrs.threadId,p=i.get(h),g=!!(!p||p.resolved||p.deletedAt);if(g!==u.attrs.orphan){const v=Math.max(l,0),b=Math.min(l+a.nodeSize,s.doc.content.size-1,s.doc.content.size-1);s.removeMark(v,b,u),s.addMark(v,b,f.create({...u.attrs,orphan:g})),g&&this.selectedThreadId===h&&(this.selectedThreadId=void 0,this.emitStateUpdate())}}})})})}),this.editor=e,this.threadStore=n,this.markType=r,!e.resolveUsers)throw new Error("resolveUsers is required for comments");this.userStore=new y1e(e.resolveUsers),this.threadStore.subscribe(this.updateMarksFromThreads),e.onCreate(()=>{this.updateMarksFromThreads(this.threadStore.getThreads()),e.onSelectionChange(()=>{this.pendingComment&&(this.pendingComment=!1,this.emitStateUpdate())})});const o=this;this.addProsemirrorPlugin(new nn({key:Pb,state:{init(){return{decorations:Cn.empty}},apply(i,s){const a=i.getMeta(Pb);if(!i.docChanged&&!a)return s;const l=i.docChanged?b1e(i.doc,o.markType):o.threadPositions;(l.size>0||o.threadPositions.size>0)&&(o.threadPositions=l,o.emitStateUpdate());const u=[];if(o.selectedThreadId){const f=l.get(o.selectedThreadId);f&&u.push(nr.inline(f.from,f.to,{class:"bn-thread-mark-selected"}))}return{decorations:Cn.create(i.doc,u)}}},props:{decorations(i){var s;return((s=Pb.getState(i))==null?void 0:s.decorations)??Cn.empty},handleClick:(i,s,a)=>{if(a.button!==0)return;const l=i.state.doc.nodeAt(s);if(!l){o.selectThread(void 0);return}const u=l.marks.find(h=>h.type.name===r&&h.attrs.orphan!==!0),f=u?.attrs.threadId;o.selectThread(f,!1)}}}))}static key(){return"comments"}emitStateUpdate(){this.emit("update",{selectedThreadId:this.selectedThreadId,pendingComment:this.pendingComment,threadPositions:this.threadPositions})}onUpdate(e){return this.on("update",e)}selectThread(e,n=!0){var r,o;if(this.selectedThreadId!==e&&(this.selectedThreadId=e,this.emitStateUpdate(),this.editor.transact(i=>i.setMeta(Pb,{name:v1e})),e&&n)){const i=this.threadPositions.get(e);if(!i)return;(o=(r=this.editor.prosemirrorView)==null?void 0:r.domAtPos(i.from).node)==null||o.scrollIntoView({behavior:"smooth",block:"center"})}}startPendingComment(){this.pendingComment=!0,this.emitStateUpdate()}stopPendingComment(){this.pendingComment=!1,this.emitStateUpdate()}async createThread(e){const n=await this.threadStore.createThread(e);if(this.threadStore.addThreadToDocument){const r=this.editor.prosemirrorView,o=r.state.selection,i=Un.getState(r.state),s={prosemirror:{head:o.head,anchor:o.anchor},yjs:i?Fw(i.binding,r.state):void 0};await this.threadStore.addThreadToDocument({threadId:n.id,selection:s})}else this.editor._tiptapEditor.commands.setMark(this.markType,{orphan:!1,threadId:n.id})}}class C1e{constructor(e,n,r,o){Ee(this,"state"),Ee(this,"emitUpdate"),Ee(this,"mouseDownHandler",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),Ee(this,"dragstartHandler",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),Ee(this,"scrollHandler",()=>{var i;if((i=this.state)!=null&&i.show){const s=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${this.state.block.id}"]`);if(!s)return;this.state.referencePos=s.getBoundingClientRect(),this.emitUpdate()}}),Ee(this,"closeMenu",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pluginKey=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized file panel");o(this.state)},r.dom.addEventListener("mousedown",this.mouseDownHandler),r.dom.addEventListener("dragstart",this.dragstartHandler),r.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o;const i=this.pluginKey.getState(e.state),s=this.pluginKey.getState(n);if(!((r=this.state)!=null&&r.show)&&i!=null&&i.block&&this.editor.isEditable){const u=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${i.block.id}"]`);if(!u)return;this.state={show:!0,referencePos:u.getBoundingClientRect(),block:i.block},this.emitUpdate();return}const a=i?.block&&!(s!=null&&s.block),l=!(i!=null&&i.block)&&s?.block;a&&this.state&&!this.state.show&&(this.state.show=!0,this.emitUpdate()),l&&(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}const dk=new Nn("FilePanelPlugin");class S1e extends Io{constructor(e){super(),Ee(this,"view"),Ee(this,"closeMenu",()=>{var n;return(n=this.view)==null?void 0:n.closeMenu()}),this.addProsemirrorPlugin(new nn({key:dk,view:n=>(this.view=new C1e(e,dk,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>{var o;return r.key==="Escape"&&this.shown?((o=this.view)==null||o.closeMenu(),!0):!1}},state:{init:()=>({block:void 0}),apply:(n,r)=>n.getMeta(dk)||(!n.getMeta(Un)&&(n.selectionSet||n.docChanged)?{block:void 0}:r)}}))}static key(){return"filePanel"}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}class x1e{constructor(e,n,r){Ee(this,"state"),Ee(this,"emitUpdate"),Ee(this,"preventHide",!1),Ee(this,"preventShow",!1),Ee(this,"shouldShow",({view:o,state:i,from:s,to:a})=>{const{doc:l,selection:u}=i,{empty:f}=u,h=!l.textBetween(s,a).length&&uS(i.selection);if(u.$from.parent.type.spec.code||ZT(u)&&u.node.type.spec.code||f||h)return!1;const p=document.activeElement;return!(!this.isElementWithinEditorWrapper(p)&&o.editable)}),Ee(this,"blurHandler",o=>{var i;if(this.preventHide){this.preventHide=!1;return}const s=this.pmView.dom.parentElement;o&&o.relatedTarget&&(s===o.relatedTarget||s.contains(o.relatedTarget)||o.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),Ee(this,"isElementWithinEditorWrapper",o=>{if(!o)return!1;const i=this.pmView.dom.parentElement;return i?i.contains(o):!1}),Ee(this,"viewMousedownHandler",o=>{(!this.isElementWithinEditorWrapper(o.target)||o.button===0)&&(this.preventShow=!0)}),Ee(this,"mouseupHandler",()=>{this.preventShow&&(this.preventShow=!1,setTimeout(()=>this.update(this.pmView)))}),Ee(this,"dragHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),Ee(this,"scrollHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.referencePos=this.getSelectionBoundingBox(),this.emitUpdate())}),Ee(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized formatting toolbar");r(this.state)},n.dom.addEventListener("mousedown",this.viewMousedownHandler),n.root.addEventListener("mouseup",this.mouseupHandler),n.dom.addEventListener("dragstart",this.dragHandler),n.dom.addEventListener("dragover",this.dragHandler),n.dom.addEventListener("blur",this.blurHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o,i;const{state:s,composing:a}=e,{doc:l,selection:u}=s,f=n&&n.doc.eq(l)&&n.selection.eq(u);if(a||f)return;const{ranges:h}=u,p=Math.min(...h.map(E=>E.$from.pos)),g=Math.max(...h.map(E=>E.$to.pos)),v=this.shouldShow({view:e,state:s,from:p,to:g}),b=typeof Range.prototype.getClientRects>"u";if(!this.preventShow&&(v||this.preventHide)&&!b){const E={show:!0,referencePos:this.getSelectionBoundingBox()};(E.show!==((r=this.state)==null?void 0:r.show)||E.referencePos.toJSON()!==((o=this.state)==null?void 0:o.referencePos.toJSON()))&&(this.state=E,this.emitUpdate());return}if((i=this.state)!=null&&i.show&&!this.preventHide&&(!v||this.preventShow||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("mouseup",this.mouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}getSelectionBoundingBox(){const{state:e}=this.pmView,{selection:n}=e,{ranges:r}=n,o=Math.min(...r.map(s=>s.$from.pos)),i=Math.max(...r.map(s=>s.$to.pos));if(ZT(n)){const s=this.pmView.nodeDOM(o);if(s)return s.getBoundingClientRect()}return ow(this.pmView,o,i)}}const E1e=new Nn("FormattingToolbarPlugin");class _1e extends Io{constructor(e){super(),Ee(this,"view"),Ee(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new nn({key:E1e,view:n=>(this.view=new x1e(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"formattingToolbar"}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}const k1e=Kl.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Rs(this.options.HTMLAttributes,t)]},renderText(){return`
`}}),iV=(t,e)=>{const n=t.resolve(e);if(n.depth<=1)return;const r=n.posAtIndex(n.index(n.depth-1),n.depth-1);return Dv(t.resolve(r))},m1=(t,e)=>{const n=t.resolve(e),r=n.index();if(r===0)return;const o=n.posAtIndex(r-1);return Dv(t.resolve(o))},tz=(t,e)=>{for(;e.childContainer;){const n=e.childContainer.node,r=t.resolve(e.childContainer.beforePos+1).posAtIndex(n.childCount-1);e=Dv(t.resolve(r))}return e},T1e=(t,e)=>t.isBlockContainer&&t.blockContent.node.type.spec.content==="inline*"&&t.blockContent.node.childCount>0&&e.isBlockContainer&&e.blockContent.node.type.spec.content==="inline*",A1e=(t,e,n,r)=>{if(!r.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but next block is not a block container`);if(r.childContainer){const o=t.doc.resolve(r.childContainer.beforePos+1),i=t.doc.resolve(r.childContainer.afterPos-1),s=o.blockRange(i);if(e){const a=t.doc.resolve(r.bnBlock.beforePos);t.tr.lift(s,a.depth)}}if(e){if(!n.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but previous block is not a block container`);e(t.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0},sV=t=>({state:e,dispatch:n})=>{const r=e.doc.resolve(t),o=Dv(r),i=m1(e.doc,o.bnBlock.beforePos);if(!i)return!1;const s=tz(e.doc,i);return T1e(s,o)?A1e(e,n,s,o):!1},R1e=lr.create({priority:50,addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({chain:r,commands:o})=>[()=>o.deleteSelection(),()=>o.undoInputRule(),()=>o.command(({state:i})=>{const s=vr(i);if(!s.isBlockContainer)return!1;const a=i.selection.from===s.blockContent.beforePos+1,l=s.blockContent.node.type.name==="paragraph";return a&&!l?o.command(mi(s.bnBlock.beforePos,{type:"paragraph",props:{}})):!1}),()=>o.command(({state:i})=>{const s=vr(i);if(!s.isBlockContainer)return!1;const{blockContent:a}=s;return i.selection.from===a.beforePos+1?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:i})=>{const s=vr(i);if(!s.isBlockContainer)return!1;const{bnBlock:a,blockContent:l}=s,u=i.selection.from===l.beforePos+1,f=i.selection.empty,h=a.beforePos;return u&&f?r().command(sV(h)).scrollIntoView().run():!1}),()=>o.command(({state:i,dispatch:s})=>{const a=vr(i);if(!a.isBlockContainer||i.selection.from!==a.blockContent.beforePos+1||m1(i.doc,a.bnBlock.beforePos))return!1;const l=iV(i.doc,a.bnBlock.beforePos);if(l?.blockNoteType!=="column")return!1;const u=l,f=iV(i.doc,u.bnBlock.beforePos);if(f?.blockNoteType!=="columnList")throw new Error("parent of column is not a column list");const h=u.childContainer.node.childCount===1,p=h&&f.childContainer.node.childCount===2,g=f.childContainer.node.firstChild===u.bnBlock.node;if(s){const v=i.doc.slice(a.bnBlock.beforePos,a.bnBlock.afterPos,!1);if(p)if(g){i.tr.step(new Yr(f.bnBlock.beforePos,f.bnBlock.afterPos,u.bnBlock.afterPos+1,f.bnBlock.afterPos-2,v,v.size,!1));const b=i.tr.doc.resolve(u.bnBlock.beforePos);i.tr.setSelection(at.between(b,b))}else{i.tr.step(new Yr(f.bnBlock.beforePos,f.bnBlock.afterPos,f.bnBlock.beforePos+2,u.bnBlock.beforePos-1,v,0,!1));const b=i.tr.doc.resolve(i.tr.mapping.map(u.bnBlock.beforePos-1));i.tr.setSelection(at.between(b,b))}else if(h)if(g){i.tr.delete(u.bnBlock.beforePos,u.bnBlock.afterPos),i.tr.insert(f.bnBlock.beforePos,v.content);const b=i.tr.doc.resolve(f.bnBlock.beforePos);i.tr.setSelection(at.between(b,b))}else i.tr.delete(u.bnBlock.beforePos-1,u.bnBlock.beforePos+1);else{i.tr.delete(a.bnBlock.beforePos,a.bnBlock.afterPos),g?i.tr.insert(f.bnBlock.beforePos-1,v.content):i.tr.insert(u.bnBlock.beforePos-1,v.content);const b=i.tr.doc.resolve(u.bnBlock.beforePos-1);i.tr.setSelection(at.between(b,b))}}return!0}),()=>o.command(({state:i})=>{const s=vr(i);if(!s.isBlockContainer)return!1;if(s.blockContent.node.childCount===0&&s.blockContent.node.type.spec.content==="inline*"){const a=m1(i.doc,s.bnBlock.beforePos);if(!a||!a.isBlockContainer)return!1;let l=r();if(a.blockContent.node.type.spec.content==="tableRow+"){const u=s.bnBlock.beforePos-1-1-1-1-1;l=l.setTextSelection(u)}else if(a.blockContent.node.type.spec.content===""){const u=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setNodeSelection(u)}else{const u=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setTextSelection(u)}return l.deleteRange({from:s.bnBlock.beforePos,to:s.bnBlock.afterPos}).scrollIntoView().run()}return!1}),()=>o.command(({state:i})=>{const s=vr(i);if(!s.isBlockContainer)throw new Error("todo");const a=i.selection.from===s.blockContent.beforePos+1,l=i.selection.empty,u=m1(i.doc,s.bnBlock.beforePos);if(u&&a&&l){const f=tz(i.doc,u);if(!f.isBlockContainer)throw new Error("todo");if(f.blockContent.node.type.spec.content===""||f.blockContent.node.type.spec.content==="inline*"&&f.blockContent.node.childCount===0)return r().cut({from:s.bnBlock.beforePos,to:s.bnBlock.afterPos},f.bnBlock.afterPos).deleteRange({from:f.bnBlock.beforePos,to:f.bnBlock.afterPos}).run()}return!1})]),e=()=>this.editor.commands.first(({commands:r})=>[()=>r.deleteSelection(),()=>r.command(({state:o})=>{const i=vr(o);if(!i.isBlockContainer)return!1;const{bnBlock:s,blockContent:a,childContainer:l}=i,{depth:u}=o.doc.resolve(s.beforePos),f=s.afterPos===o.doc.nodeSize-3,h=o.selection.from===a.afterPos-1,p=o.selection.empty;if(!f&&h&&p&&l===void 0){let g=u,v=s.afterPos+1,b=o.doc.resolve(v).depth;for(;b<g;)g=b,v+=2,b=o.doc.resolve(v).depth;return r.command(sV(v-1))}return!1})]),n=(r=!1)=>this.editor.commands.first(({commands:o,tr:i})=>[()=>o.command(({state:s})=>{const a=vr(s);if(!a.isBlockContainer)return!1;const{bnBlock:l,blockContent:u}=a,{depth:f}=s.doc.resolve(l.beforePos),h=s.selection.$anchor.parentOffset===0,p=s.selection.anchor===s.selection.head,g=u.node.childCount===0,v=f>1;return h&&p&&g&&v?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:s})=>{const a=vr(s),l=this.options.editor.schema.blockSchema[a.blockNoteType].hardBreakShortcut??"shift+enter";if(l==="none")return!1;if(l==="shift+enter"&&r||l==="enter"){const u=i.storedMarks||i.selection.$head.marks().filter(f=>this.editor.extensionManager.splittableMarks.includes(f.type.name));return i.insert(i.selection.head,i.doc.type.schema.nodes.hardBreak.create()).ensureMarks(u),!0}return!1}),()=>o.command(({state:s,dispatch:a})=>{const l=vr(s);if(!l.isBlockContainer)return!1;const{bnBlock:u,blockContent:f}=l,h=s.selection.$anchor.parentOffset===0,p=s.selection.anchor===s.selection.head,g=f.node.childCount===0;if(h&&p&&g){const v=u.afterPos,b=v+2;if(a){const E=s.schema.nodes.blockContainer.createAndFill();s.tr.insert(v,E).scrollIntoView(),s.tr.setSelection(new at(s.doc.resolve(b)))}return!0}return!1}),()=>o.command(({state:s,chain:a})=>{const l=vr(s);if(!l.isBlockContainer)return!1;const{blockContent:u}=l,f=s.selection.$anchor.parentOffset===0;return u.node.childCount===0?!1:(a().deleteSelection().command(DF(s.selection.from,f,f)).run(),!0)})]);return{Backspace:t,Delete:e,Enter:()=>n(),"Shift-Enter":()=>n(!0),Tab:()=>{var r,o,i;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(i=this.options.editor.filePanel)!=null&&i.shown)?!1:UF(this.options.editor)},"Shift-Tab":()=>{var r,o,i;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(i=this.options.editor.filePanel)!=null&&i.shown)?!1:(this.editor.commands.liftListItem("blockContainer"),!0)},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0),"Mod-z":()=>this.options.editor.undo(),"Mod-y":()=>this.options.editor.redo(),"Shift-Mod-z":()=>this.options.editor.redo()}}});class M1e{constructor(e,n,r){Ee(this,"state"),Ee(this,"emitUpdate"),Ee(this,"menuUpdateTimer"),Ee(this,"startMenuUpdateTimer"),Ee(this,"stopMenuUpdateTimer"),Ee(this,"mouseHoveredLinkMark"),Ee(this,"mouseHoveredLinkMarkRange"),Ee(this,"keyboardHoveredLinkMark"),Ee(this,"keyboardHoveredLinkMarkRange"),Ee(this,"linkMark"),Ee(this,"linkMarkRange"),Ee(this,"mouseOverHandler",o=>{if(this.mouseHoveredLinkMark=void 0,this.mouseHoveredLinkMarkRange=void 0,this.stopMenuUpdateTimer(),o.target instanceof HTMLAnchorElement&&o.target.nodeName==="A"){const i=o.target,s=this.pmView.posAtDOM(i,0)+1,a=this.pmView.state.doc.resolve(s),l=a.marks();for(const u of l)if(u.type.name===this.pmView.state.schema.mark("link").type.name){this.mouseHoveredLinkMark=u,this.mouseHoveredLinkMarkRange=Oy(a,u.type,u.attrs)||void 0;break}}return this.startMenuUpdateTimer(),!1}),Ee(this,"clickHandler",o=>{var i;const s=this.pmView.dom.parentElement;this.linkMark&&o&&o.target&&!(s===o.target||s.contains(o.target))&&(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),Ee(this,"scrollHandler",()=>{var o;this.linkMark!==void 0&&(o=this.state)!=null&&o.show&&(this.state.referencePos=ow(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),this.emitUpdate())}),Ee(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized link toolbar");r(this.state)},this.startMenuUpdateTimer=()=>{this.menuUpdateTimer=setTimeout(()=>{this.update(this.pmView,void 0,!0)},250)},this.stopMenuUpdateTimer=()=>(this.menuUpdateTimer&&(clearTimeout(this.menuUpdateTimer),this.menuUpdateTimer=void 0),!1),this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}editLink(e,n){var r;this.editor.transact(o=>{const i=No(o);o.insertText(n,this.linkMarkRange.from,this.linkMarkRange.to),o.addMark(this.linkMarkRange.from,this.linkMarkRange.from+n.length,i.mark("link",{href:e}))}),this.pmView.focus(),(r=this.state)!=null&&r.show&&(this.state.show=!1,this.emitUpdate())}deleteLink(){var e;this.editor.transact(n=>n.removeMark(this.linkMarkRange.from,this.linkMarkRange.to,this.linkMark.type).setMeta("preventAutolink",!0)),this.pmView.focus(),(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate())}update(e,n,r=!1){var o;const{state:i}=e;if(n&&n.selection.from===i.selection.from&&n.selection.to===i.selection.to||!this.pmView.hasFocus())return;const s=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){const a=this.pmView.state.selection.$from.marks();for(const l of a)if(l.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=l,this.keyboardHoveredLinkMarkRange=Oy(this.pmView.state.selection.$from,l.type,l.attrs)||void 0;break}}if(this.mouseHoveredLinkMark&&r&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable){this.state={show:!0,referencePos:ow(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},this.emitUpdate();return}if((o=this.state)!=null&&o.show&&s&&(!this.linkMark||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}const I1e=new Nn("LinkToolbarPlugin");class N1e extends Io{constructor(e){super(),Ee(this,"view"),Ee(this,"editLink",(n,r)=>{this.view.editLink(n,r)}),Ee(this,"deleteLink",()=>{this.view.deleteLink()}),Ee(this,"startHideTimer",()=>{this.view.startMenuUpdateTimer()}),Ee(this,"stopHideTimer",()=>{this.view.stopMenuUpdateTimer()}),Ee(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new nn({key:I1e,view:n=>(this.view=new M1e(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"linkToolbar"}onUpdate(e){return this.on("update",e)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}const nz=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],rz="https",D1e=new Nn("node-selection-keyboard");class O1e extends Io{static key(){return"nodeSelectionKeyboard"}constructor(){super(),this.addProsemirrorPlugin(new nn({key:D1e,props:{handleKeyDown:(e,n)=>{if("node"in e.state.selection){if(n.ctrlKey||n.metaKey)return!1;if(n.key.length===1)return n.preventDefault(),!0;if(n.key==="Enter"&&!n.shiftKey&&!n.altKey&&!n.ctrlKey&&!n.metaKey){const r=e.state.tr;return e.dispatch(r.insert(e.state.tr.selection.$to.after(),e.state.schema.nodes.paragraph.createChecked()).setSelection(new at(r.doc.resolve(e.state.tr.selection.$to.after()+1)))),!0}}return!1}}}))}}const P1e=new Nn("blocknote-placeholder");class L1e extends Io{static key(){return"placeholder"}constructor(e,n){super(),this.addProsemirrorPlugin(new nn({key:P1e,view:r=>{var o,i;const s=`placeholder-selector-${T$()}`;r.dom.classList.add(s);const a=document.createElement("style"),l=e._tiptapEditor.options.injectNonce;l&&a.setAttribute("nonce",l),((o=e.prosemirrorView)==null?void 0:o.root)instanceof ShadowRoot?e.prosemirrorView.root.append(a):(i=e.prosemirrorView)==null||i.root.head.appendChild(a);const u=a.sheet,f=(h="")=>`.${s} .bn-block-content${h} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`;try{const{default:h,emptyDocument:p,...g}=n;for(const[E,T]of Object.entries(g)){const P=`[data-content-type="${E}"]`;u.insertRule(`${f(P)} { content: ${JSON.stringify(T)}; }`)}u.insertRule(`${f("[data-is-only-empty-block]")} { content: ${JSON.stringify(p)}; }`),u.insertRule(`${f("[data-is-empty-and-focused]")} { content: ${JSON.stringify(h)}; }`)}catch(h){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",h)}return{destroy:()=>{var h,p;((h=e.prosemirrorView)==null?void 0:h.root)instanceof ShadowRoot?e.prosemirrorView.root.removeChild(a):(p=e.prosemirrorView)==null||p.root.head.removeChild(a)}}},props:{decorations:r=>{const{doc:o,selection:i}=r;if(!e.isEditable||!i.empty||i.$from.parent.type.spec.code)return;const s=[];r.doc.content.size===6&&s.push(nr.node(2,4,{"data-is-only-empty-block":"true"}));const a=i.$anchor,l=a.parent;if(l.content.size===0){const u=a.before();s.push(nr.node(u,u+l.nodeSize,{"data-is-empty-and-focused":"true"}))}return Cn.create(o,s)}}}))}}const aV=new Nn("previous-blocks"),V1e={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"};class j1e extends Io{static key(){return"previousBlockType"}constructor(){super();let e;this.addProsemirrorPlugin(new nn({key:aV,view(n){return{update:async(r,o)=>{var i;((i=this.key)==null?void 0:i.getState(r.state).updatedBlocks.size)>0&&(e=setTimeout(()=>{r.dispatch(r.state.tr.setMeta(aV,{clearUpdate:!0}))},0))},destroy:()=>{e&&clearTimeout(e)}}},state:{init(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply(n,r,o,i){if(r.currentTransactionOldBlockAttrs={},r.updatedBlocks.clear(),!n.docChanged||o.doc.eq(i.doc))return r;const s={},a=F5(o.doc,f=>f.attrs.id),l=new Map(a.map(f=>[f.node.attrs.id,f])),u=F5(i.doc,f=>f.attrs.id);for(const f of u){const h=l.get(f.node.attrs.id),p=h?.node.firstChild,g=f.node.firstChild;if(h&&p&&g){const v={index:g.attrs.index,level:g.attrs.level,type:g.type.name,depth:i.doc.resolve(f.pos).depth};let b={index:p.attrs.index,level:p.attrs.level,type:p.type.name,depth:o.doc.resolve(h.pos).depth};s[f.node.attrs.id]=b,n.getMeta("numberedListIndexing")&&(f.node.attrs.id in r.prevTransactionOldBlockAttrs&&(b=r.prevTransactionOldBlockAttrs[f.node.attrs.id]),v.type==="numberedListItem"&&(b.index=v.index)),r.currentTransactionOldBlockAttrs[f.node.attrs.id]=b,JSON.stringify(b)!==JSON.stringify(v)&&(b["depth-change"]=b.depth-v.depth,r.updatedBlocks.add(f.node.attrs.id))}}return r.prevTransactionOldBlockAttrs=s,r}},props:{decorations(n){const r=this.getState(n);if(r.updatedBlocks.size===0)return;const o=[];return n.doc.descendants((i,s)=>{if(!i.attrs.id||!r.updatedBlocks.has(i.attrs.id))return;const a=r.currentTransactionOldBlockAttrs[i.attrs.id],l={};for(const[f,h]of Object.entries(a))l["data-prev-"+V1e[f]]=h||"none";const u=nr.node(s,s+i.nodeSize,{...l});o.push(u)}),Cn.create(n.doc,o)}}}))}}const lV=new Nn("blocknote-show-selection");class B1e extends Io{constructor(e){super(),Ee(this,"enabled",!1),this.editor=e,this.addProsemirrorPlugin(new nn({key:lV,props:{decorations:n=>{const{doc:r,selection:o}=n;if(!this.enabled)return Cn.empty;const i=nr.inline(o.from,o.to,{"data-show-selection":"true"});return Cn.create(r,[i])}}}))}static key(){return"showSelection"}setEnabled(e){this.enabled!==e&&(this.enabled=e,this.editor.transact(n=>n.setMeta(lV,{})))}getEnabled(){return this.enabled}}function oz(t,e){for(var n,r;t&&t.parentElement&&t.parentElement!==e.dom&&((n=t.getAttribute)==null?void 0:n.call(t,"data-node-type"))!=="blockContainer";)t=t.parentElement;if(((r=t.getAttribute)==null?void 0:r.call(t,"data-node-type"))==="blockContainer")return{node:t,id:t.getAttribute("data-id")}}let j2=class g1 extends Ct{constructor(e,n){super(e,n),Ee(this,"nodes");const r=e.node();this.nodes=[],e.doc.nodesBetween(e.pos,n.pos,(o,i,s)=>{if(s!==null&&s.eq(r))return this.nodes.push(o),!1})}static create(e,n,r=n){return new g1(e.resolve(n),e.resolve(r))}content(){return new Ye(Le.from(this.nodes),0,0)}eq(e){if(!(e instanceof g1)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(let n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(e.nodes[n]))return!1;return!0}map(e,n){const r=n.mapResult(this.from),o=n.mapResult(this.to);return o.deleted?Ct.near(e.resolve(r.pos)):r.deleted?Ct.near(e.resolve(o.pos)):new g1(e.resolve(r.pos),e.resolve(o.pos))}toJSON(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}};Ct.jsonID("multiple-node",j2);let La;function $1e(t,e){let n,r;const o=e.resolve(t.from).node().type.spec.group==="blockContent",i=e.resolve(t.to).node().type.spec.group==="blockContent",s=Math.min(t.$anchor.depth,t.$head.depth);if(o&&i){const a=t.$from.start(s-1),l=t.$to.end(s-1);n=e.resolve(a-1).pos,r=e.resolve(l+1).pos}else n=t.from,r=t.to;return{from:n,to:r}}function cV(t,e,n=e){e===n&&(n+=t.state.doc.resolve(e+1).node().nodeSize);const r=t.domAtPos(e).node.cloneNode(!0),o=t.domAtPos(e).node,i=(f,h)=>Array.prototype.indexOf.call(f.children,h),s=i(o,t.domAtPos(e+1).node.parentElement),a=i(o,t.domAtPos(n-1).node.parentElement);for(let f=o.childElementCount-1;f>=0;f--)(f>a||f<s)&&r.removeChild(r.children[f]);iz(t.root),La=r;const l=La.getElementsByTagName("iframe");for(let f=0;f<l.length;f++){const h=l[f],p=h.parentElement;p&&p.removeChild(h)}const u=t.dom.className.split(" ").filter(f=>f!=="ProseMirror"&&f!=="bn-root"&&f!=="bn-editor").join(" ");La.className=La.className+" bn-drag-preview "+u,t.root instanceof ShadowRoot?t.root.appendChild(La):t.root.body.appendChild(La)}function iz(t){La!==void 0&&(t instanceof ShadowRoot?t.removeChild(La):t.body.removeChild(La),La=void 0)}function H1e(t,e,n){if(!t.dataTransfer)return;const r=n.prosemirrorView;if(!r)return;const o=Ns(e.id,r.state.doc);if(!o)throw new Error(`Block with ID ${e.id} not found`);const i=o.posBeforeNode;if(i!=null){const s=r.state.selection,a=r.state.doc,{from:l,to:u}=$1e(s,a),f=l<=i&&i<u,h=s.$anchor.node()!==s.$head.node()||s instanceof j2;f&&h?(r.dispatch(r.state.tr.setSelection(j2.create(a,l,u))),cV(r,l,u)):(r.dispatch(r.state.tr.setSelection(ht.create(r.state.doc,i))),cV(r,i));const p=r.state.selection.content(),g=n.pmSchema,v=r.serializeForClipboard(p).dom.innerHTML,b=TS(g,n),E=XF(p.content),T=b.exportBlocks(E,{}),P=tI(T);t.dataTransfer.clearData(),t.dataTransfer.setData("blocknote/html",v),t.dataTransfer.setData("text/html",T),t.dataTransfer.setData("text/plain",P),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(La,0,0)}}const uV=250;function B2(t,e,n=!0){const r=t.root.elementsFromPoint(e.left,e.top);for(const o of r)if(t.dom.contains(o))return n&&o.closest("[data-node-type=columnList]")?B2(t,{left:e.left+50,top:e.top},!1):oz(o,t)}function F1e(t,e){if(!e.dom.firstChild)return;const n=e.dom.firstChild.getBoundingClientRect(),r={left:Math.min(Math.max(n.left+10,t.x),n.right-10),top:t.y},o=B2(e,r);if(!o)return;const i=o.node.getBoundingClientRect();return B2(e,{left:i.right-10,top:t.y},!1)}class z1e{constructor(e,n,r){Ee(this,"state"),Ee(this,"emitUpdate"),Ee(this,"mousePos"),Ee(this,"hoveredBlock"),Ee(this,"menuFrozen",!1),Ee(this,"isDragOrigin",!1),Ee(this,"updateState",o=>{this.state=o,this.emitUpdate(this.state)}),Ee(this,"updateStateFromMousePos",()=>{var o,i,s,a,l;if(this.menuFrozen||!this.mousePos)return;const u=this.findClosestEditorElement({clientX:this.mousePos.x,clientY:this.mousePos.y});if(u?.element!==this.pmView.dom||u.distance>uV){(o=this.state)!=null&&o.show&&(this.state.show=!1,this.updateState(this.state));return}const f=F1e(this.mousePos,this.pmView);if(!f||!this.editor.isEditable){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.updateState(this.state));return}if((s=this.state)!=null&&s.show&&(a=this.hoveredBlock)!=null&&a.hasAttribute("data-id")&&((l=this.hoveredBlock)==null?void 0:l.getAttribute("data-id"))===f.id)return;this.hoveredBlock=f.node;const h=f.node.firstChild;if(h&&this.editor.isEditable){const p=h.getBoundingClientRect(),g=f.node.closest("[data-node-type=column]");this.updateState({show:!0,referencePos:new DOMRect(g?g.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,p.y,p.width,p.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))})}}),Ee(this,"onDragStart",o=>{var i;const s=(i=o.dataTransfer)==null?void 0:i.getData("blocknote/html");if(!s||this.pmView.dragging)return;const a=document.createElement("div");a.innerHTML=s;const l=Bc.fromSchema(this.pmView.state.schema).parse(a,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new Ye(l.content,0,0),move:!0}}),Ee(this,"findClosestEditorElement",o=>{const i=Array.from(this.pmView.root.querySelectorAll(".bn-editor"));if(i.length===0)return null;let s=i[0],a=Number.MAX_VALUE;return i.forEach(l=>{const u=l.querySelector(".bn-block-group").getBoundingClientRect(),f=o.clientX<u.left?u.left-o.clientX:o.clientX>u.right?o.clientX-u.right:0,h=o.clientY<u.top?u.top-o.clientY:o.clientY>u.bottom?o.clientY-u.bottom:0,p=Math.sqrt(Math.pow(f,2)+Math.pow(h,2));p<a&&(a=p,s=l)}),{element:s,distance:a}}),Ee(this,"onDragOver",o=>{if(o.synthetic)return;const i=this.getDragEventContext(o);if(!i||!i.isDropPoint){this.closeDropCursor();return}i.isDropPoint&&!i.isDropWithinEditorBounds&&this.dispatchSyntheticEvent(o)}),Ee(this,"closeDropCursor",()=>{const o=new Event("dragleave",{bubbles:!1});o.synthetic=!0,this.pmView.dom.dispatchEvent(o)}),Ee(this,"getDragEventContext",o=>{var i;const s=!((i=o.dataTransfer)!=null&&i.types.includes("blocknote/html"))&&!!this.pmView.dragging,a=!!this.isDragOrigin,l=s||a,u=this.findClosestEditorElement(o);if(!u||u.distance>uV)return;const f=u.element===this.pmView.dom,h=f&&u.distance===0;if(!(!f&&!l))return{isDropPoint:f,isDropWithinEditorBounds:h,isDragOrigin:l}}),Ee(this,"onDrop",o=>{if(o.synthetic)return;const i=this.getDragEventContext(o);if(!i){this.closeDropCursor();return}const{isDropPoint:s,isDropWithinEditorBounds:a,isDragOrigin:l}=i;if(a||this.dispatchSyntheticEvent(o),!(s&&l)){if(s){this.pmView.dispatch(this.pmView.state.tr.setSelection(at.create(this.pmView.state.tr.doc,this.pmView.state.tr.selection.anchor)));return}else if(l){setTimeout(()=>this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),0);return}}}),Ee(this,"onDragEnd",o=>{o.synthetic||(this.pmView.dragging=null)}),Ee(this,"onKeyDown",o=>{var i;(i=this.state)!=null&&i.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),Ee(this,"onMouseMove",o=>{var i;if(this.menuFrozen)return;this.mousePos={x:o.clientX,y:o.clientY};const s=this.pmView.dom.getBoundingClientRect(),a=this.mousePos.x>s.left&&this.mousePos.x<s.right&&this.mousePos.y>s.top&&this.mousePos.y<s.bottom,l=this.pmView.dom.parentElement;if(a&&o&&o.target&&!(l===o.target||l.contains(o.target))){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate(this.state));return}this.updateStateFromMousePos()}),Ee(this,"onScroll",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.referencePos=this.hoveredBlock.getBoundingClientRect(),this.emitUpdate(this.state)),this.updateStateFromMousePos()}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");r(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),eI(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),n.root.addEventListener("scroll",this.onScroll,!0)}dispatchSyntheticEvent(e){const n=new Event(e.type,e),r=this.pmView.dom.firstChild.getBoundingClientRect();n.clientX=e.clientX,n.clientY=e.clientY,n.clientX=Math.min(Math.max(e.clientX,r.left),r.left+r.width),n.clientY=Math.min(Math.max(e.clientY,r.top),r.top+r.height),n.dataTransfer=e.dataTransfer,n.preventDefault=()=>e.preventDefault(),n.synthetic=!0,this.pmView.dom.dispatchEvent(n)}update(e,n){var r;!n.doc.eq(this.pmView.state.doc)&&(r=this.state)!=null&&r.show&&this.updateStateFromMousePos()}destroy(){var e;(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}}const U1e=new Nn("SideMenuPlugin");class q1e extends Io{constructor(e){super(),Ee(this,"view"),Ee(this,"blockDragStart",(n,r)=>{this.view&&(this.view.isDragOrigin=!0),H1e(n,r,this.editor)}),Ee(this,"blockDragEnd",()=>{this.editor.prosemirrorView&&iz(this.editor.prosemirrorView.root),this.view&&(this.view.isDragOrigin=!1)}),Ee(this,"freezeMenu",()=>{this.view.menuFrozen=!0,this.view.state.show=!0,this.view.emitUpdate(this.view.state)}),Ee(this,"unfreezeMenu",()=>{this.view.menuFrozen=!1,this.view.state.show=!1,this.view.emitUpdate(this.view.state)}),this.editor=e,this.addProsemirrorPlugin(new nn({key:U1e,view:n=>(this.view=new z1e(e,n,r=>{this.emit("update",r)}),this.view)}))}static key(){return"sideMenu"}onUpdate(e){return this.on("update",e)}}const Lb=new Map;function G1e(t){if(Lb.has(t))return Lb.get(t);const e=new Jp;return t._tiptapEditor.on("transaction",({transaction:n})=>{e.appendMapping(n.mapping)}),t._tiptapEditor.on("destroy",()=>{Lb.delete(t)}),Lb.set(t,e),e}function K1e(t,e,n="left"){const r=Un.getState(t._tiptapEditor.state);if(!r){const i=G1e(t),s=i.maps.length;return()=>i.slice(s).map(e,n==="left"?-1:1)}const o=Xy(e+(n==="right"?1:0),r.binding.type,r.binding.mapping);return()=>{const i=Un.getState(t._tiptapEditor.state),s=qf(i.doc,i.binding.type,o,i.binding.mapping);if(s===null)throw new Error("Position not found, cannot track positions");return s+(n==="right"?-1:0)}}const W1e=hS(t=>t.type.name==="blockContainer");class Y1e{constructor(e,n){Ee(this,"state"),Ee(this,"emitUpdate"),Ee(this,"rootEl"),Ee(this,"pluginState"),Ee(this,"handleScroll",()=>{var i,s;if((i=this.state)!=null&&i.show){const a=(s=this.rootEl)==null?void 0:s.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!a)return;this.state.referencePos=a.getBoundingClientRect(),this.emitUpdate(this.pluginState.triggerCharacter)}}),Ee(this,"closeMenu",()=>{this.editor.transact(i=>i.setMeta($p,null))}),Ee(this,"clearQuery",()=>{this.pluginState!==void 0&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos()-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor.transact(i=>i.selection.from)}).run()});var r,o;this.editor=e,this.pluginState=void 0,this.emitUpdate=i=>{var s;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");n(i,{...this.state,ignoreQueryLength:(s=this.pluginState)==null?void 0:s.ignoreQueryLength})},this.rootEl=(r=this.editor.prosemirrorView)==null?void 0:r.root,(o=this.rootEl)==null||o.addEventListener("scroll",this.handleScroll,!0)}update(e,n){var r;const o=$p.getState(n),i=$p.getState(e.state),s=o===void 0&&i!==void 0,a=o!==void 0&&i===void 0;if(!s&&!(o!==void 0&&i!==void 0)&&!a)return;if(this.pluginState=a?o:i,a||!this.editor.isEditable){this.state&&(this.state.show=!1),this.emitUpdate(this.pluginState.triggerCharacter);return}const l=(r=this.rootEl)==null?void 0:r.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&l&&(this.state={show:!0,referencePos:l.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var e;(e=this.rootEl)==null||e.removeEventListener("scroll",this.handleScroll,!0)}}const $p=new Nn("SuggestionMenuPlugin");class X1e extends Io{constructor(e){super(),Ee(this,"view"),Ee(this,"triggerCharacters",[]),Ee(this,"addTriggerCharacter",r=>{this.triggerCharacters.push(r)}),Ee(this,"removeTriggerCharacter",r=>{this.triggerCharacters=this.triggerCharacters.filter(o=>o!==r)}),Ee(this,"closeMenu",()=>this.view.closeMenu()),Ee(this,"clearQuery",()=>this.view.clearQuery());const n=this.triggerCharacters;this.addProsemirrorPlugin(new nn({key:$p,view:()=>(this.view=new Y1e(e,(r,o)=>{this.emit(`update ${r}`,o)}),this.view),state:{init(){},apply:(r,o,i,s)=>{if(r.getMeta("orderedListIndexing")!==void 0||r.selection.$from.parent.type.spec.code)return o;const a=r.getMeta($p);if(typeof a=="object"&&a!==null){o&&this.closeMenu();const u=K1e(e,s.selection.from-a.triggerCharacter.length);return{triggerCharacter:a.triggerCharacter,deleteTriggerCharacter:a.deleteTriggerCharacter!==!1,queryStartPos:()=>u()+a.triggerCharacter.length,query:"",decorationId:`id_${Math.floor(Math.random()*4294967295)}`,ignoreQueryLength:a?.ignoreQueryLength}}if(o===void 0)return o;if(s.selection.from!==s.selection.to||a===null||r.getMeta("focus")||r.getMeta("blur")||r.getMeta("pointer")||o.triggerCharacter!==void 0&&s.selection.from<o.queryStartPos()||!s.selection.$from.sameParent(s.doc.resolve(o.queryStartPos())))return;const l={...o};return l.query=s.doc.textBetween(o.queryStartPos(),s.selection.from),l}},props:{handleTextInput(r,o,i,s){if(o===i){const a=r.state.doc;for(const l of n){const u=l.length>1?a.textBetween(o-l.length,o)+s:s;if(l===u)return r.dispatch(r.state.tr.insertText(s)),r.dispatch(r.state.tr.setMeta($p,{triggerCharacter:u}).scrollIntoView()),!0}}return!1},decorations(r){const o=this.getState(r);if(o===void 0)return null;if(!o.deleteTriggerCharacter){const i=W1e(r.selection);if(i)return Cn.create(r.doc,[nr.node(i.pos,i.pos+i.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}return Cn.create(r.doc,[nr.inline(o.queryStartPos()-o.triggerCharacter.length,o.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}}}))}static key(){return"suggestionMenu"}onUpdate(e,n){return this.triggerCharacters.includes(e)||this.addTriggerCharacter(e),this.on(`update ${e}`,n)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}const Q1e=Zo.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="insertion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["ins",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"ins",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),Z1e=Zo.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="deletion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["del",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"del",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),J1e=Zo.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema(t){return t.name!=="modification"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return[n?"span":"div",{"data-type":"modification","data-id":String(e.attrs.id),"data-mod-type":e.attrs.type,"data-mod-prev-val":JSON.stringify(e.attrs.previousValue),"data-mod-new-val":JSON.stringify(e.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal,newValue:e.dataset.modNewVal}:!1}},{tag:"div[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal}:!1}}]}}});let Qi;function dV(t){Qi||(Qi=document.createElement("div"),Qi.innerHTML="_",Qi.style.opacity="0",Qi.style.height="1px",Qi.style.width="1px",t instanceof Document?t.body.appendChild(Qi):t.appendChild(Qi))}function ewe(t){Qi&&(t instanceof Document?t.body.removeChild(Qi):t.removeChild(Qi),Qi=void 0)}function Vb(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function twe(t){let e=t;for(;e&&e.nodeName!=="TD"&&e.nodeName!=="TH"&&!e.classList.contains("tableWrapper");){if(e.classList.contains("ProseMirror"))return;const n=e.parentNode;if(!n||!(n instanceof Element))return;e=n}return e.nodeName==="TD"||e.nodeName==="TH"?{type:"cell",domNode:e,tbodyNode:e.closest("tbody")}:{type:"wrapper",domNode:e,tbodyNode:e.querySelector("tbody")}}function nwe(t,e){const n=e.querySelectorAll(t);for(let r=0;r<n.length;r++)n[r].style.visibility="hidden"}class rwe{constructor(e,n,r){Ee(this,"state"),Ee(this,"emitUpdate"),Ee(this,"tableId"),Ee(this,"tablePos"),Ee(this,"tableElement"),Ee(this,"menuFrozen",!1),Ee(this,"mouseState","up"),Ee(this,"prevWasEditable",null),Ee(this,"viewMousedownHandler",()=>{this.mouseState="down"}),Ee(this,"mouseUpHandler",o=>{this.mouseState="up",this.mouseMoveHandler(o)}),Ee(this,"mouseMoveHandler",o=>{var i,s,a,l,u,f,h;if(this.menuFrozen||this.mouseState==="selecting"||!(o.target instanceof Element)||!this.pmView.dom.contains(o.target))return;const p=twe(o.target);if(p?.type==="cell"&&this.mouseState==="down"&&!((i=this.state)!=null&&i.draggingState)){this.mouseState="selecting",(s=this.state)!=null&&s.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!p||!this.editor.isEditable){(a=this.state)!=null&&a.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!p.tbodyNode)return;const g=p.tbodyNode.getBoundingClientRect(),v=oz(p.domNode,this.pmView);if(!v)return;this.tableElement=v.node;let b;const E=this.editor.transact(D=>Ns(v.id,D.doc));if(!E)throw new Error(`Block with ID ${v.id} not found`);const T=Rr(E.node,this.editor.pmSchema,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema);if(ube("table",T,this.editor)&&(this.tablePos=E.posBeforeNode+1,b=T),!b)return;this.tableId=v.id;const P=(l=p.domNode.closest(".tableWrapper"))==null?void 0:l.querySelector(".table-widgets-container");if(p?.type==="wrapper"){const D=o.clientY>=g.bottom-1&&o.clientY<g.bottom+20,z=o.clientX>=g.right-1&&o.clientX<g.right+20,V=o.clientX>g.right||o.clientY>g.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:D,showAddOrRemoveColumnsButton:z,referencePosTable:g,block:b,widgetContainer:P,colIndex:V||(u=this.state)==null?void 0:u.colIndex,rowIndex:V||(f=this.state)==null?void 0:f.rowIndex,referencePosCell:V||(h=this.state)==null?void 0:h.referencePosCell}}else{const D=Vb(p.domNode),z=Vb(p.domNode.parentElement),V=p.domNode.getBoundingClientRect();if(this.state!==void 0&&this.state.show&&this.tableId===v.id&&this.state.rowIndex===z&&this.state.colIndex===D)return;this.state={show:!0,showAddOrRemoveColumnsButton:D===b.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:z===b.content.rows.length-1,referencePosTable:g,block:b,draggingState:void 0,referencePosCell:V,colIndex:D,rowIndex:z,widgetContainer:P}}return this.emitUpdate(),!1}),Ee(this,"dragOverHandler",o=>{var i;if(((i=this.state)==null?void 0:i.draggingState)===void 0)return;o.preventDefault(),o.dataTransfer.dropEffect="move",nwe(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const s={left:Math.min(Math.max(o.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(o.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},a=this.pmView.root.elementsFromPoint(s.left,s.top).filter(b=>b.tagName==="TD"||b.tagName==="TH");if(a.length===0)return;const l=a[0];let u=!1;const f=Vb(l.parentElement),h=Vb(l),p=this.state.draggingState.draggedCellOrientation==="row"?this.state.rowIndex:this.state.colIndex,g=(this.state.draggingState.draggedCellOrientation==="row"?f:h)!==p;(this.state.rowIndex!==f||this.state.colIndex!==h)&&(this.state.rowIndex=f,this.state.colIndex=h,this.state.referencePosCell=l.getBoundingClientRect(),u=!0);const v=this.state.draggingState.draggedCellOrientation==="row"?s.top:s.left;this.state.draggingState.mousePos!==v&&(this.state.draggingState.mousePos=v,u=!0),u&&this.emitUpdate(),g&&this.editor.transact(b=>b.setMeta(Wg,!0))}),Ee(this,"dropHandler",o=>{if(this.mouseState="up",this.state===void 0||this.state.draggingState===void 0)return!1;if(this.state.rowIndex===void 0||this.state.colIndex===void 0)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");o.preventDefault();const{draggingState:i,colIndex:s,rowIndex:a}=this.state,l=this.state.block.content.columnWidths;if(i.draggedCellOrientation==="row"){if(!pF(this.state.block,i.originalIndex,a))return!1;const u=$ve(this.state.block,i.originalIndex,a);this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,rows:u}})}else{if(!mF(this.state.block,i.originalIndex,s))return!1;const u=Bve(this.state.block,i.originalIndex,s),[f]=l.splice(i.originalIndex,1);l.splice(s,0,f),this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,columnWidths:l,rows:u}})}return this.editor.setTextCursorPosition(this.state.block.id),!0}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");r(this.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}update(){var e;if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||this.state.block.type!=="table"||!((e=this.tableElement)!=null&&e.isConnected)){this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate();return}const{height:n,width:r}=qM(this.state.block);this.state.rowIndex!==void 0&&this.state.colIndex!==void 0&&(this.state.rowIndex>=n&&(this.state.rowIndex=n-1),this.state.colIndex>=r&&(this.state.colIndex=r-1));const o=this.tableElement.querySelector("tbody");if(!o)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(this.state.rowIndex!==void 0&&this.state.colIndex!==void 0){const i=o.children[this.state.rowIndex].children[this.state.colIndex];i?this.state.referencePosCell=i.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=o.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}const Wg=new Nn("TableHandlesPlugin");class owe extends Io{constructor(e){super(),Ee(this,"view"),Ee(this,"colDragStart",n=>{if(this.view.state===void 0||this.view.state.colIndex===void 0)throw new Error("Attempted to drag table column, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"col",originalIndex:this.view.state.colIndex,mousePos:n.clientX},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(Wg,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.colIndex,newIndex:this.view.state.colIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");dV(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(Qi,0,0),n.dataTransfer.effectAllowed="move"}),Ee(this,"rowDragStart",n=>{if(this.view.state===void 0||this.view.state.rowIndex===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"row",originalIndex:this.view.state.rowIndex,mousePos:n.clientY},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(Wg,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.rowIndex,newIndex:this.view.state.rowIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");dV(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(Qi,0,0),n.dataTransfer.effectAllowed="copyMove"}),Ee(this,"dragEnd",()=>{if(this.view.state===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState=void 0,this.view.emitUpdate(),this.editor.transact(n=>n.setMeta(Wg,null)),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");ewe(this.editor.prosemirrorView.root)}),Ee(this,"freezeHandles",()=>{this.view.menuFrozen=!0}),Ee(this,"unfreezeHandles",()=>{this.view.menuFrozen=!1}),Ee(this,"getCellsAtRowHandle",(n,r)=>R2(n,r)),Ee(this,"getCellsAtColumnHandle",(n,r)=>M2(n,r)),Ee(this,"setCellSelection",(n,r,o=r)=>{const i=this.view;if(!i)throw new Error("Table handles view not initialized");const s=n.doc.resolve(i.tablePos+1),a=n.doc.resolve(s.posAtIndex(r.row)+1),l=n.doc.resolve(a.posAtIndex(r.col)),u=n.doc.resolve(s.posAtIndex(o.row)+1),f=n.doc.resolve(u.posAtIndex(o.col)),h=n.tr;return h.setSelection(new rr(l,f)),n.apply(h)}),Ee(this,"addRowOrColumn",(n,r)=>{this.editor.exec((o,i)=>{const s=this.setCellSelection(o,r.orientation==="row"?{row:n,col:0}:{row:0,col:n});return r.orientation==="row"?r.side==="above"?Phe(s,i):Lhe(s,i):r.side==="left"?Mhe(s,i):Ihe(s,i)})}),Ee(this,"removeRowOrColumn",(n,r)=>r==="row"?this.editor.exec((o,i)=>{const s=this.setCellSelection(o,{row:n,col:0});return jhe(s,i)}):this.editor.exec((o,i)=>{const s=this.setCellSelection(o,{row:0,col:n});return Dhe(s,i)})),Ee(this,"mergeCells",n=>this.editor.exec((r,o)=>{const i=n?this.setCellSelection(r,n.relativeStartCell,n.relativeEndCell):r;return $he(i,o)})),Ee(this,"splitCell",n=>this.editor.exec((r,o)=>{const i=n?this.setCellSelection(r,n):r;return Hhe(i,o)})),Ee(this,"getCellSelection",()=>this.editor.transact(n=>{const r=n.selection;let o=r.$from,i=r.$to;if(O2(r)){const{ranges:v}=r;v.forEach(b=>{o=b.$from.min(o??b.$from),i=b.$to.max(i??b.$to)})}else if(o=n.doc.resolve(r.$from.pos-r.$from.parentOffset-1),i=n.doc.resolve(r.$to.pos-r.$to.parentOffset-1),o.pos===0||i.pos===0)return;const s=n.doc.resolve(o.pos-o.parentOffset-1),a=n.doc.resolve(i.pos-i.parentOffset-1),l=n.doc.resolve(s.pos-s.parentOffset-1),u=o.index(s.depth),f=s.index(l.depth),h=i.index(a.depth),p=a.index(l.depth),g=[];for(let v=f;v<=p;v++)for(let b=u;b<=h;b++)g.push({row:v,col:b});return{from:{row:f,col:u},to:{row:p,col:h},cells:g}})),Ee(this,"getMergeDirection",n=>this.editor.transact(r=>{const o=O2(r.selection)?r.selection:void 0;if(!o||!n||o.ranges.length<=1)return;const i=this.getCellSelection();if(i)return zve(i.from,i.to,n)?"vertical":"horizontal"})),Ee(this,"cropEmptyRowsOrColumns",(n,r)=>Hve(n,r)),Ee(this,"addRowsOrColumns",(n,r,o)=>Fve(n,r,o)),this.editor=e,this.addProsemirrorPlugin(new nn({key:Wg,view:n=>(this.view=new rwe(e,n,r=>{this.emit("update",r)}),this.view),props:{decorations:n=>{if(this.view===void 0||this.view.state===void 0||this.view.state.draggingState===void 0||this.view.tablePos===void 0)return;const r=this.view.state.draggingState.draggedCellOrientation==="row"?this.view.state.rowIndex:this.view.state.colIndex;if(r===void 0)return;const o=[],{block:i,draggingState:s}=this.view.state,{originalIndex:a,draggedCellOrientation:l}=s;if(r===a||!i||l==="row"&&!pF(i,a,r)||l==="col"&&!mF(i,a,r))return Cn.create(n.doc,o);const u=n.doc.resolve(this.view.tablePos+1);return this.view.state.draggingState.draggedCellOrientation==="row"?R2(this.view.state.block,r).forEach(({row:f,col:h})=>{const p=n.doc.resolve(u.posAtIndex(f)+1),g=n.doc.resolve(p.posAtIndex(h)+1),v=g.node(),b=g.pos+(r>a?v.nodeSize-2:0);o.push(nr.widget(b,()=>{const E=document.createElement("div");return E.className="bn-table-drop-cursor",E.style.left="0",E.style.right="0",r>a?E.style.bottom="-2px":E.style.top="-3px",E.style.height="4px",E}))}):M2(this.view.state.block,r).forEach(({row:f,col:h})=>{const p=n.doc.resolve(u.posAtIndex(f)+1),g=n.doc.resolve(p.posAtIndex(h)+1),v=g.node(),b=g.pos+(r>a?v.nodeSize-2:0);o.push(nr.widget(b,()=>{const E=document.createElement("div");return E.className="bn-table-drop-cursor",E.style.top="0",E.style.bottom="0",r>a?E.style.right="-2px":E.style.left="-3px",E.style.width="4px",E}))}),Cn.create(n.doc,o)}}}))}static key(){return"tableHandles"}onUpdate(e){return this.on("update",e)}}const iwe=lr.create({name:"textAlignment",addGlobalAttributes(){return[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem","tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:t=>t.getAttribute("data-text-alignment"),renderHTML:t=>t.textAlignment==="left"?{}:{"data-text-alignment":t.textAlignment}}}}]}}),swe=lr.create({name:"blockTextColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{textColor:{default:Xr.textColor.default,parseHTML:t=>t.hasAttribute("data-text-color")?t.getAttribute("data-text-color"):Xr.textColor.default,renderHTML:t=>t.textColor===Xr.textColor.default?{}:{"data-text-color":t.textColor}}}}]}}),awe=lr.create({name:"trailingNode",addProseMirrorPlugins(){const t=new Nn(this.name);return[new nn({key:t,appendTransaction:(e,n,r)=>{const{doc:o,tr:i,schema:s}=r,a=t.getState(r),l=o.content.size-2,u=s.nodes.blockContainer,f=s.nodes.paragraph;if(a)return i.insert(l,u.create(void 0,f.create()))},state:{init:(e,n)=>{},apply:(e,n)=>{if(!e.docChanged)return n;let r=e.doc.lastChild;if(!r||r.type.name!=="blockGroup")throw new Error("Expected blockGroup");if(r=r.lastChild,!r||r.type.name!=="blockContainer")return!0;const o=r.firstChild;if(!o)throw new Error("Expected blockContent");return r.nodeSize>4||o.type.spec.content!=="inline*"}}})]}}),lwe={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},cwe=Kl.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:t=>{if(typeof t=="string")return!1;const e={};for(const[n,r]of Object.entries(lwe))t.getAttribute(r)&&(e[n]=t.getAttribute(r));return e}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML({HTMLAttributes:t}){var e;const n=document.createElement("div");n.className="bn-block-outer",n.setAttribute("data-node-type","blockOuter");for(const[i,s]of Object.entries(t))i!=="class"&&n.setAttribute(i,s);const r={...((e=this.options.domAttributes)==null?void 0:e.block)||{},...t},o=document.createElement("div");o.className=mr("bn-block",r.class),o.setAttribute("data-node-type",this.name);for(const[i,s]of Object.entries(r))i!=="class"&&o.setAttribute(i,s);return n.appendChild(o),{dom:n,contentDOM:o}}}),uwe=Kl.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML(){return[{tag:"div",getAttrs:t=>typeof t=="string"?!1:t.getAttribute("data-node-type")==="blockGroup"?null:!1}]},renderHTML({HTMLAttributes:t}){var e;const n={...((e=this.options.domAttributes)==null?void 0:e.blockGroup)||{},...t},r=document.createElement("div");r.className=mr("bn-block-group",n.class),r.setAttribute("data-node-type","blockGroup");for(const[o,i]of Object.entries(n))o!=="class"&&r.setAttribute(o,i);return{dom:r,contentDOM:r}}}),dwe=Kl.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"});class fwe extends Io{constructor({editor:e,collaboration:n}){super(e),Ee(this,"editor"),Ee(this,"collaboration"),Ee(this,"forkedState"),this.editor=e,this.collaboration=n}static key(){return"ForkYDocPlugin"}findTypeInOtherYdoc(e,n){const r=e.doc;if(e._item===null){const o=Array.from(r.share.keys()).find(i=>r.share.get(i)===e);if(o==null)throw new Error("type does not exist in other ydoc");return n.get(o,e.constructor)}else{const o=e._item,i=n.store.clients.get(o.id.client)??[],s=ga(i,o.id.clock);return i[s].content.type}}get isForkedFromRemote(){return this.forkedState!==void 0}fork(){if(this.isForkedFromRemote)return;const e=this.collaboration.fragment;if(!e)throw new Error("No fragment to fork from");const n=new Fd;xL(n,EL(e.doc));const r=this.findTypeInOtherYdoc(e,n);this.forkedState={undoStack:ca.getState(this.editor.prosemirrorState).undoManager.undoStack,originalFragment:e,forkedFragment:r},this.editor._tiptapEditor.unregisterPlugin([Gg,ca,Un]),this.editor._tiptapEditor.registerPlugin(new L2(r).plugins[0]),this.editor._tiptapEditor.registerPlugin(new V2({editor:this.editor}).plugins[0]),this.emit("forked",!0)}merge({keepChanges:e}){if(!this.forkedState)return;this.editor._tiptapEditor.unregisterPlugin(Un),this.editor._tiptapEditor.unregisterPlugin(ca);const{originalFragment:n,forkedFragment:r,undoStack:o}=this.forkedState;if(this.editor.extensions.ySyncPlugin=new L2(n),this.editor.extensions.yCursorPlugin=new JF(this.collaboration),this.editor.extensions.yUndoPlugin=new V2({editor:this.editor}),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.ySyncPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yCursorPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yUndoPlugin.plugins[0]),ca.getState(this.editor.prosemirrorState).undoManager.undoStack=o,e){const i=EL(r.doc,Oge(n.doc));xL(n.doc,i,this.editor)}this.forkedState=void 0,this.emit("forked",!1)}}const hwe=t=>{var e;const n={},r=pwe(t);for(const i of r)n[i.name]=i;t.collaboration&&(n.ySyncPlugin=new L2(t.collaboration.fragment),n.yUndoPlugin=new V2({editor:t.editor}),(e=t.collaboration.provider)!=null&&e.awareness&&(n.yCursorPlugin=new JF(t.collaboration)),n.forkYDocPlugin=new fwe({editor:t.editor,collaboration:t.collaboration})),n.formattingToolbar=new _1e(t.editor),n.linkToolbar=new N1e(t.editor),n.sideMenu=new q1e(t.editor),n.suggestionMenus=new X1e(t.editor),n.filePanel=new S1e(t.editor),n.placeholder=new L1e(t.editor,t.placeholders),(t.animations??!0)&&(n.animations=new j1e),t.tableHandles&&(n.tableHandles=new owe(t.editor)),n.nodeSelectionKeyboard=new O1e,n.blockChange=new g1e,n.showSelection=new B1e(t.editor),t.comments&&(n.comments=new w1e(t.editor,t.comments.threadStore,ez.name));const o=t.disableExtensions||[];for(const i of o)delete n[i];return n};let fV=!1;const pwe=t=>{const e=[Dg.ClipboardTextSerializer,Dg.Commands,Dg.Editable,Dg.FocusEvents,Dg.Tabindex,ype,lr.create({name:"dropCursor",addProseMirrorPlugins:()=>[t.dropCursor({width:5,color:"#ddeeff",editor:t.editor})]}),SS.configure({types:["blockContainer","columnList","column"],setIdAttribute:t.setIdAttribute}),k1e,Jpe,Q1e,Z1e,J1e,Zpe.extend({inclusive:!1}).configure({defaultProtocol:rz,protocols:fV?[]:nz}),...Object.values(t.styleSpecs).map(n=>n.implementation.mark.configure({editor:t.editor})),swe,m1e,iwe,lr.create({name:"OverrideEscape",addKeyboardShortcuts(){return{Escape:()=>t.editor.suggestionMenus.shown?!1:this.editor.commands.blur()}}}),dwe,cwe.configure({editor:t.editor,domAttributes:t.domAttributes}),R1e.configure({editor:t.editor,tabBehavior:t.tabBehavior}),uwe.configure({domAttributes:t.domAttributes}),...Object.values(t.inlineContentSpecs).filter(n=>n.config!=="link"&&n.config!=="text").map(n=>n.implementation.node.configure({editor:t.editor})),...Object.values(t.blockSpecs).flatMap(n=>[...(n.implementation.requiredExtensions||[]).map(r=>r.configure({editor:t.editor,domAttributes:t.domAttributes})),n.implementation.node.configure({editor:t.editor,domAttributes:t.domAttributes})]),p1e(t.editor),f1e(t.editor,t.pasteHandler||(n=>n.defaultPasteHandler())),Ybe(t.editor),...t.trailingBlock===void 0||t.trailingBlock?[awe]:[],...t.comments?[ez]:[]];return fV=!0,t.collaboration||e.push(Tpe),e};function mwe(t,e){const n=[];return t.forEach((r,o,i)=>{i!==e&&n.push(r)}),Le.from(n)}function gwe(t,e){const n=[];for(let r=0;r<t.childCount;r++)if(t.child(r).type.name==="tableRow")if(n.length>0&&n[n.length-1].type.name==="table"){const o=n[n.length-1],i=o.copy(o.content.addToEnd(t.child(r)));n[n.length-1]=i}else{const o=e.nodes.table.createChecked(void 0,t.child(r));n.push(o)}else n.push(t.child(r));return t=Le.from(n),t}function ywe(t,e){let n=Le.from(t.content);if(n=gwe(n,e.state.schema),!vwe(n,e))return new Ye(n,t.openStart,t.openEnd);for(let r=0;r<n.childCount;r++)if(n.child(r).type.spec.group==="blockContent"){const o=[n.child(r)];if(r+1<n.childCount&&n.child(r+1).type.name==="blockGroup"){const s=n.child(r+1).child(0).child(0);(s.type.name==="bulletListItem"||s.type.name==="numberedListItem"||s.type.name==="checkListItem")&&(o.push(n.child(r+1)),n=mwe(n,r+1))}const i=e.state.schema.nodes.blockContainer.createChecked(void 0,o);n=n.replaceChild(r,i)}return new Ye(n,t.openStart,t.openEnd)}function vwe(t,e){var n,r;const o=t.childCount===1,i=((n=t.firstChild)==null?void 0:n.type.spec.content)==="inline*",s=((r=t.firstChild)==null?void 0:r.type.spec.content)==="tableRow+";if(o){if(i)return!1;if(s){const a=vr(e.state);if(a.isBlockContainer)return a.blockContent.node.type.spec.content!=="tableRow+"}}return!0}const $2=class extends jfe{constructor(e,n){super({...e,content:void 0}),Ee(this,"_state"),Ee(this,"mount",(a,l,u)=>{l?(this.options.element=l,this.createViewAlternative(a,u)):(this.destroy(),this.isInitialized=!1)});const r=this.schema;let o;const i=r.nodes.doc.createAndFill;r.nodes.doc.createAndFill=(...a)=>{if(o)return o;const l=i.apply(r.nodes.doc,a),u=JSON.parse(JSON.stringify(l.toJSON()));return u.content[0].content[0].attrs.id="initialBlockId",o=jc.fromJSON(r,u),o};let s;try{const a=e?.content.map(l=>Ch(l,this.schema,n).toJSON());s=rw({type:"doc",content:[{type:"blockGroup",content:a}]},this.schema,this.options.parseOptions)}catch(a){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",a),new Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(e.content))}this._state=If.create({doc:s,schema:this.schema})}get state(){return this.view&&(this._state=this.view.state),this._state}dispatch(e){if(!this.view){this._state=this.state.apply(e),this.emit("transaction",{editor:this,transaction:e});return}if(this.view.isDestroyed)return;if(this.isCapturingTransaction){this.dispatchTransaction(e);return}const{state:n,transactions:r}=this.state.applyTransaction(e),o=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),o&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&(this.emit("update",{editor:this,transaction:e}),this.emit("v3-update",{editor:this,transaction:e,appendedTransactions:r.slice(1)}))}forceEnablePlugins(){if(this.view)throw new Error("forcePluginsEnabled called after view has been initialized");this._state=this.state.reconfigure({plugins:this.extensionManager.plugins})}createViewAlternative(e,n){this.contentComponent=n;const r={};this.extensionManager.extensions.forEach(i=>{i.type==="mark"&&i.config.addMarkView&&(r[i.name]=i.config.addMarkView(e))}),this.view=new qR({mount:this.options.element},{...this.options.editorProps,dispatchTransaction:this.dispatch.bind(this),state:this.state,markViews:r,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.commands.focus(this.options.autofocus||this.options.element.getAttribute("data-bn-autofocus")==="true",{scrollIntoView:!1}),this.emit("create",{editor:this}),this.isInitialized=!0}};Ee($2,"create",(t,e)=>{var n,r;const o=(n=globalThis?.window)==null?void 0:n.setTimeout;typeof((r=globalThis?.window)==null?void 0:r.setTimeout)<"u"&&(globalThis.window.setTimeout=()=>0);try{return new $2(t,e)}finally{o&&(globalThis.window.setTimeout=o)}});let sz=$2;sz.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};const bwe={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};let az=class lz extends rI{constructor(e){var n,r,o,i,s,a,l,u,f,h,p,g,v,b,E,T;super(),Ee(this,"pmSchema"),Ee(this,"extensions",{}),Ee(this,"headless",!1),Ee(this,"_tiptapEditor"),Ee(this,"elementRenderer",null),Ee(this,"blockCache",new WeakMap),Ee(this,"dictionary"),Ee(this,"schema"),Ee(this,"blockImplementations"),Ee(this,"inlineContentImplementations"),Ee(this,"styleImplementations"),Ee(this,"formattingToolbar"),Ee(this,"linkToolbar"),Ee(this,"sideMenu"),Ee(this,"suggestionMenus"),Ee(this,"filePanel"),Ee(this,"tableHandles"),Ee(this,"comments"),Ee(this,"showSelectionPlugin"),Ee(this,"forkYDocPlugin"),Ee(this,"uploadFile"),Ee(this,"onUploadStartCallbacks",[]),Ee(this,"onUploadEndCallbacks",[]),Ee(this,"resolveFileUrl"),Ee(this,"resolveUsers"),Ee(this,"settings"),Ee(this,"activeTransaction",null),Ee(this,"mount",(R,M)=>{this._tiptapEditor.mount(this,R,M)}),this.options=e;const P=e;if(P.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(P.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(P.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(P.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");this.dictionary=e.dictionary||Rve,this.settings={tables:{splitCells:((n=e?.tables)==null?void 0:n.splitCells)??!1,cellBackgroundColor:((r=e?.tables)==null?void 0:r.cellBackgroundColor)??!1,cellTextColor:((o=e?.tables)==null?void 0:o.cellTextColor)??!1,headers:((i=e?.tables)==null?void 0:i.headers)??!1},codeBlock:{indentLineWithTab:((s=e?.codeBlock)==null?void 0:s.indentLineWithTab)??!0,defaultLanguage:((a=e?.codeBlock)==null?void 0:a.defaultLanguage)??"text",supportedLanguages:((l=e?.codeBlock)==null?void 0:l.supportedLanguages)??{},createHighlighter:((u=e?.codeBlock)==null?void 0:u.createHighlighter)??void 0},heading:{levels:((f=e?.heading)==null?void 0:f.levels)??[1,2,3]}};const D={defaultStyles:!0,schema:e.schema||JM.create(),_headless:!1,...e,placeholders:{...this.dictionary.placeholders,...e.placeholders}};if(D.comments&&!D.resolveUsers)throw new Error("resolveUsers is required when using comments");this.resolveUsers=D.resolveUsers,this.schema=D.schema,this.blockImplementations=D.schema.blockSpecs,this.inlineContentImplementations=D.schema.inlineContentSpecs,this.styleImplementations=D.schema.styleSpecs,this.extensions=hwe({editor:this,domAttributes:D.domAttributes||{},blockSpecs:this.schema.blockSpecs,styleSpecs:this.schema.styleSpecs,inlineContentSpecs:this.schema.inlineContentSpecs,collaboration:D.collaboration,trailingBlock:D.trailingBlock,disableExtensions:D.disableExtensions,setIdAttribute:D.setIdAttribute,animations:D.animations??!0,tableHandles:ci("table",this),dropCursor:this.options.dropCursor??Tve,placeholders:D.placeholders,tabBehavior:D.tabBehavior,comments:D.comments,pasteHandler:D.pasteHandler}),(((h=D._tiptapOptions)==null?void 0:h.extensions)||[]).forEach(R=>{this.extensions[R.name]=R});for(let R of D.extensions||[]){typeof R=="function"&&(R=R(this));const M=R.constructor.key();if(!M)throw new Error(`Extension ${R.constructor.name} does not have a key method`);if(this.extensions[M])throw new Error(`Extension ${R.constructor.name} already exists with key ${M}`);this.extensions[M]=R}if(Object.entries(D._extensions||{}).forEach(([R,M])=>{const B=typeof M=="function"?M(this):M;if(!("plugin"in B)){this.extensions[R]=B;return}this.extensions[R]=new class extends Io{static key(){return R}constructor(){super(),this.addProsemirrorPlugin(B.plugin)}get priority(){return B.priority}}}),this.formattingToolbar=this.extensions.formattingToolbar,this.linkToolbar=this.extensions.linkToolbar,this.sideMenu=this.extensions.sideMenu,this.suggestionMenus=this.extensions.suggestionMenus,this.filePanel=this.extensions.filePanel,this.tableHandles=this.extensions.tableHandles,this.comments=this.extensions.comments,this.showSelectionPlugin=this.extensions.showSelection,this.forkYDocPlugin=this.extensions.forkYDocPlugin,D.uploadFile){const R=D.uploadFile;this.uploadFile=async(M,B)=>{this.onUploadStartCallbacks.forEach(q=>q.apply(this,[B]));try{return await R(M,B)}finally{this.onUploadEndCallbacks.forEach(q=>q.apply(this,[B]))}}}this.resolveFileUrl=D.resolveFileUrl,this.headless=D._headless;const z="ySyncPlugin"in this.extensions||"liveblocksExtension"in this.extensions;z&&D.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const V=D.initialContent||(z?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:SS.options.generateID()}]);if(!Array.isArray(V)||V.length===0)throw new Error("initialContent must be a non-empty array of blocks, received: "+V);const $=[...Object.entries(this.extensions).map(([R,M])=>{if(M instanceof lr||M instanceof Kl||M instanceof Zo)return M;if(!(M instanceof Io&&!M.plugins.length))return lr.create({name:R,priority:M.priority,addProseMirrorPlugins:()=>M.plugins})})].filter(R=>R!==void 0),O={...bwe,...D._tiptapOptions,content:V,extensions:$,editorProps:{...(p=D._tiptapOptions)==null?void 0:p.editorProps,attributes:{tabIndex:"0",...(v=(g=D._tiptapOptions)==null?void 0:g.editorProps)==null?void 0:v.attributes,...(b=D.domAttributes)==null?void 0:b.editor,class:mr("bn-editor",D.defaultStyles?"bn-default-styles":"",((T=(E=D.domAttributes)==null?void 0:E.editor)==null?void 0:T.class)||"")},transformPasted:ywe}};this.headless?this.pmSchema=ufe(O.extensions):(this._tiptapEditor=sz.create(O,this.schema.styleSchema),this.pmSchema=this._tiptapEditor.schema),this.pmSchema.cached.blockNoteEditor=this,this.emit("create")}static create(e={}){return new lz(e)}exec(e){if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return e(n,o=>this._tiptapEditor.dispatch(o),r)}canExec(e){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return e(n,void 0,r)}transact(e){if(this.activeTransaction)return e(this.activeTransaction);try{this.activeTransaction=this._tiptapEditor.state.tr;const n=e(this.activeTransaction),r=this.activeTransaction;return this.activeTransaction=null,r&&(r.docChanged||r.selectionSet||r.scrolledIntoView||r.storedMarksSet||!r.isGeneric)&&this._tiptapEditor.dispatch(r),n}finally{this.activeTransaction=null}}extension(e,n=e.key()){const r=this.extensions[n];if(!r)throw new Error(`Extension ${n} not found`);return r}get prosemirrorState(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this._tiptapEditor.state}get prosemirrorView(){return this._tiptapEditor.view}get domElement(){var e;return(e=this.prosemirrorView)==null?void 0:e.dom}isFocused(){var e;return((e=this.prosemirrorView)==null?void 0:e.hasFocus())||!1}focus(){var e;(e=this.prosemirrorView)==null||e.focus()}onUploadStart(e){return this.onUploadStartCallbacks.push(e),()=>{const n=this.onUploadStartCallbacks.indexOf(e);n>-1&&this.onUploadStartCallbacks.splice(n,1)}}onUploadEnd(e){return this.onUploadEndCallbacks.push(e),()=>{const n=this.onUploadEndCallbacks.indexOf(e);n>-1&&this.onUploadEndCallbacks.splice(n,1)}}get topLevelBlocks(){return this.document}get document(){return this.transact(e=>Lve(e.doc,this.pmSchema))}getBlock(e){return this.transact(n=>Abe(n.doc,e))}getPrevBlock(e){return this.transact(n=>Rbe(n.doc,e))}getNextBlock(e){return this.transact(n=>Mbe(n.doc,e))}getParentBlock(e){return this.transact(n=>Ibe(n.doc,e))}forEachBlock(e,n=!1){const r=this.document.slice();n&&r.reverse();function o(i){for(const s of i){if(e(s)===!1)return!1;const a=n?s.children.slice().reverse():s.children;if(!o(a))return!1}return!0}o(r)}onEditorContentChange(e){this._tiptapEditor.on("update",e)}onEditorSelectionChange(e){this._tiptapEditor.on("selectionUpdate",e)}getTextCursorPosition(){return this.transact(e=>Lbe(e))}setTextCursorPosition(e,n="start"){return this.transact(r=>qF(r,e,n))}getSelection(){return this.transact(e=>Dbe(e))}getSelectionCutBlocks(){return this.transact(e=>Pbe(e))}setSelection(e,n){return this.transact(r=>Obe(r,e,n))}get isEditable(){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return!1}return this._tiptapEditor.isEditable===void 0?!0:this._tiptapEditor.isEditable}set isEditable(e){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return}this._tiptapEditor.options.editable!==e&&this._tiptapEditor.setEditable(e)}insertBlocks(e,n,r="before"){return this.transact(o=>Wve(o,e,n,r))}updateBlock(e,n){return this.transact(r=>Xve(r,e,n))}removeBlocks(e){return this.transact(n=>KL(n,e,[]).removedBlocks)}replaceBlocks(e,n){return this.transact(r=>KL(r,e,n))}undo(){return this.options.collaboration?this.exec(Sve):this.exec(aM)}redo(){return this.options.collaboration?this.exec(xve):this.exec(lM)}insertInlineContent(e,{updateSelection:n=!1}={}){const r=Ja(e,this.pmSchema);this.transact(o=>{Nbe(o,{from:o.selection.from,to:o.selection.to},r,{updateSelection:n})})}getActiveStyles(){return this.transact(e=>{const n={},r=e.selection.$to.marks();for(const o of r){const i=this.schema.styleSchema[o.type.name];if(!i){o.type.name!=="link"&&!o.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",o.type.name);continue}i.propSchema==="boolean"?n[i.type]=!0:n[i.type]=o.attrs.stringValue}return n})}addStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.setMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.setMark(n,{stringValue:r});else throw new zl(o.propSchema)}}removeStyles(e){for(const n of Object.keys(e))this._tiptapEditor.commands.unsetMark(n)}toggleStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.toggleMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.toggleMark(n,{stringValue:r});else throw new zl(o.propSchema)}}getSelectedText(){return this.transact(e=>e.doc.textBetween(e.selection.from,e.selection.to))}getSelectedLinkUrl(){return this._tiptapEditor.getAttributes("link").href}createLink(e,n){if(e==="")return;const r=this.pmSchema.mark("link",{href:e});this.transact(o=>{const{from:i,to:s}=o.selection;n?o.insertText(n,i,s).addMark(i,i+n.length,r):o.setSelection(at.create(o.doc,s)).addMark(i,s,r)})}canNestBlock(){return kbe(this)}nestBlock(){UF(this)}canUnnestBlock(){return Tbe(this)}unnestBlock(){_be(this)}moveBlocksUp(){return Sbe(this)}moveBlocksDown(){return xbe(this)}async blocksToHTMLLossy(e=this.document){return TS(this.pmSchema,this).exportBlocks(e,{})}async blocksToFullHTML(e){return t0e(this.pmSchema,this).serializeBlocks(e,{})}async tryParseHTMLToBlocks(e){return KF(e,this.pmSchema)}async blocksToMarkdownLossy(e=this.document){return Bbe(e,this.pmSchema,this,{})}async tryParseMarkdownToBlocks(e){return Gbe(e,this.pmSchema)}updateCollaborationUserInfo(e){if(!this.options.collaboration)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this.extensions.yCursorPlugin.updateUser(e)}beforeChange(e){return this.headless?()=>{}:this.extensions.blockChange.subscribe(n=>e(this,n))}onChange(e){if(this.headless)return;const n=({transaction:r,appendedTransactions:o})=>{e(this,{getChanges:()=>yF(r,o)})};return this._tiptapEditor.on("v3-update",n),()=>{this._tiptapEditor.off("v3-update",n)}}onSelectionChange(e,n){if(this.headless)return;const r=o=>{o.transaction.getMeta(Un)&&!n||e(this)};return this._tiptapEditor.on("selectionUpdate",r),()=>{this._tiptapEditor.off("selectionUpdate",r)}}onCreate(e){return this.on("create",e),()=>{this.off("create",e)}}getSelectionBoundingBox(){if(!this.prosemirrorView)return;const{selection:e}=this.prosemirrorState,{ranges:n}=e,r=Math.min(...n.map(i=>i.$from.pos)),o=Math.max(...n.map(i=>i.$to.pos));if(ZT(e)){const i=this.prosemirrorView.nodeDOM(r);if(i)return i.getBoundingClientRect()}return ow(this.prosemirrorView,r,o)}get isEmpty(){const e=this.document;return e.length===0||e.length===1&&e[0].type==="paragraph"&&e[0].content.length===0}openSuggestionMenu(e,n){this.prosemirrorView&&(this.focus(),this.transact(r=>{n!=null&&n.deleteTriggerCharacter&&r.insertText(e),r.scrollIntoView().setMeta(this.suggestionMenus.plugins[0],{triggerCharacter:e,deleteTriggerCharacter:n?.deleteTriggerCharacter||!1,ignoreQueryLength:n?.ignoreQueryLength||!1})}))}getForceSelectionVisible(){return this.showSelectionPlugin.getEnabled()}setForceSelectionVisible(e){this.showSelectionPlugin.setEnabled(e)}convertHtmlToBlockNoteHtml(e){return GF(e.trim()).innerHTML}pasteHTML(e,n=!1){var r;let o=e;n||(o=this.convertHtmlToBlockNoteHtml(e)),o&&((r=this.prosemirrorView)==null||r.pasteHTML(o))}pasteText(e){var n;return(n=this.prosemirrorView)==null?void 0:n.pasteText(e)}async pasteMarkdown(e){return this.pasteHTML(await WF(e))}},fk;async function wwe(){return fk||(fk=(async()=>{const[t,e]=await Promise.all([Wi(()=>import("./module-DrROFPns.js"),[]),Wi(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),fk)}async function Cwe(t,e){if(!cbe("text",t))return[];const{emojiData:n,emojiMart:r}=await wwe();return(e.trim()===""?Object.values(n.emojis):await r.SearchIndex.search(e)).map(o=>({id:o.skins[0].native,onItemClick:()=>t.insertInlineContent(o.skins[0].native+" ")}))}function H2(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function dm(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&Xk(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function cz(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function uz(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function Swe(t){return Ewe()?!1:!hV()&&t.width===0&&t.height===0||hV()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function dz(){return/apple/i.test(navigator.vendor)}function hV(){const t=/android/i;return t.test(cz())||t.test(uz())}function xwe(){return cz().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Ewe(){return uz().includes("jsdom/")}function F2(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}function _we(t){return"nativeEvent"in t}function kwe(t){return t.matches("html,body")}function ld(t){return t?.ownerDocument||document}function hk(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function vp(t){return"composedPath"in t?t.composedPath()[0]:t.target}const Twe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Awe(t){return ks(t)&&t.matches(Twe)}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Rwe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],z2=Rwe.join(","),fz=typeof Element>"u",ev=fz?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,qw=!fz&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},Gw=function t(e,n){var r;n===void 0&&(n=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=o===""||o==="true",s=i||n&&e&&t(e.parentNode);return s},Mwe=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},Iwe=function(e,n,r){if(Gw(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(z2));return n&&ev.call(e,z2)&&o.unshift(e),o=o.filter(r),o},Nwe=function t(e,n,r){for(var o=[],i=Array.from(e);i.length;){var s=i.shift();if(!Gw(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),l=a.length?a:s.children,u=t(l,!0,r);r.flatten?o.push.apply(o,u):o.push({scopeParent:s,candidates:u})}else{var f=ev.call(s,z2);f&&r.filter(s)&&(n||!e.includes(s))&&o.push(s);var h=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),p=!Gw(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(h&&p){var g=t(h===!0?s.children:h.children,!0,r);r.flatten?o.push.apply(o,g):o.push({scopeParent:s,candidates:g})}else i.unshift.apply(i,s.children)}}return o},hz=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},pz=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Mwe(e))&&!hz(e)?0:e.tabIndex},Dwe=function(e,n){var r=pz(e);return r<0&&n&&!hz(e)?0:r},Owe=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},mz=function(e){return e.tagName==="INPUT"},Pwe=function(e){return mz(e)&&e.type==="hidden"},Lwe=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},Vwe=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},jwe=function(e){if(!e.name)return!0;var n=e.form||qw(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=Vwe(o,e.form);return!i||i===e},Bwe=function(e){return mz(e)&&e.type==="radio"},$we=function(e){return Bwe(e)&&!jwe(e)},Hwe=function(e){var n,r=e&&qw(e),o=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var s,a,l;for(i=!!((s=o)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(o)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&o;){var u,f,h;r=qw(o),o=(u=r)===null||u===void 0?void 0:u.host,i=!!((f=o)!==null&&f!==void 0&&(h=f.ownerDocument)!==null&&h!==void 0&&h.contains(o))}}return i},pV=function(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},Fwe=function(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=ev.call(e,"details>summary:first-of-type"),s=i?e.parentElement:e;if(ev.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var a=e;e;){var l=e.parentElement,u=qw(e);if(l&&!l.shadowRoot&&o(l)===!0)return pV(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=a}if(Hwe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return pV(e);return!1},zwe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return ev.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},Uwe=function(e,n){return!(n.disabled||Gw(n)||Pwe(n)||Fwe(n,e)||Lwe(n)||zwe(n))},mV=function(e,n){return!($we(n)||pz(n)<0||!Uwe(e,n))},qwe=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},Gwe=function t(e){var n=[],r=[];return e.forEach(function(o,i){var s=!!o.scopeParent,a=s?o.scopeParent:o,l=Dwe(a,s),u=s?t(o.candidates):a;l===0?s?n.push.apply(n,u):n.push(a):r.push({documentOrder:i,tabIndex:l,item:o,isScope:s,content:u})}),r.sort(Owe).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(n)},gz=function(e,n){n=n||{};var r;return n.getShadowRoot?r=Nwe([e],n.includeContainer,{filter:mV.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:qwe}):r=Iwe(e,n.includeContainer,mV.bind(null,n)),Gwe(r)};const yz={...lA},Kwe=yz.useInsertionEffect,Wwe=Kwe||(t=>t());function Ic(t){const e=_.useRef(()=>{});return Wwe(()=>{e.current=t}),_.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}var yi=typeof document<"u"?_.useLayoutEffect:_.useEffect;function U2(){return U2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U2.apply(this,arguments)}let gV=!1,Ywe=0;const yV=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Ywe++;function Xwe(){const[t,e]=_.useState(()=>gV?yV():void 0);return yi(()=>{t==null&&e(yV())},[]),_.useEffect(()=>{gV=!0},[]),t}const Qwe=yz.useId,oI=Qwe||Xwe;function Zwe(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(o=>o!==n))||[])}}}const Jwe=_.createContext(null),eCe=_.createContext(null),iI=()=>{var t;return((t=_.useContext(Jwe))==null?void 0:t.id)||null},sI=()=>_.useContext(eCe);function Vv(t){return"data-floating-ui-"+t}function Lf(t){const e=_.useRef(t);return yi(()=>{e.current=t}),e}const vV=Vv("safe-polygon");function y1(t,e,n){return n&&!F2(n)?0:typeof t=="number"?t:t?.[e]}function tCe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,events:i,elements:s}=t,{enabled:a=!0,delay:l=0,handleClose:u=null,mouseOnly:f=!1,restMs:h=0,move:p=!0}=e,g=sI(),v=iI(),b=Lf(u),E=Lf(l),T=Lf(n),P=_.useRef(),D=_.useRef(-1),z=_.useRef(),V=_.useRef(-1),$=_.useRef(!0),O=_.useRef(!1),R=_.useRef(()=>{}),M=_.useRef(!1),B=_.useCallback(()=>{var U;const Z=(U=o.current.openEvent)==null?void 0:U.type;return Z?.includes("mouse")&&Z!=="mousedown"},[o]);_.useEffect(()=>{if(!a)return;function U(Z){let{open:J}=Z;J||(clearTimeout(D.current),clearTimeout(V.current),$.current=!0,M.current=!1)}return i.on("openchange",U),()=>{i.off("openchange",U)}},[a,i]),_.useEffect(()=>{if(!a||!b.current||!n)return;function U(J){B()&&r(!1,J,"hover")}const Z=ld(s.floating).documentElement;return Z.addEventListener("mouseleave",U),()=>{Z.removeEventListener("mouseleave",U)}},[s.floating,n,r,a,b,B]);const q=_.useCallback(function(U,Z,J){Z===void 0&&(Z=!0),J===void 0&&(J="hover");const Y=y1(E.current,"close",P.current);Y&&!z.current?(clearTimeout(D.current),D.current=window.setTimeout(()=>r(!1,U,J),Y)):Z&&(clearTimeout(D.current),r(!1,U,J))},[E,r]),K=Ic(()=>{R.current(),z.current=void 0}),F=Ic(()=>{if(O.current){const U=ld(s.floating).body;U.style.pointerEvents="",U.removeAttribute(vV),O.current=!1}}),ne=Ic(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);_.useEffect(()=>{if(!a)return;function U(se){if(clearTimeout(D.current),$.current=!1,f&&!F2(P.current)||h>0&&!y1(E.current,"open"))return;const te=y1(E.current,"open",P.current);te?D.current=window.setTimeout(()=>{T.current||r(!0,se,"hover")},te):n||r(!0,se,"hover")}function Z(se){if(ne())return;R.current();const te=ld(s.floating);if(clearTimeout(V.current),M.current=!1,b.current&&o.current.floatingContext){n||clearTimeout(D.current),z.current=b.current({...o.current.floatingContext,tree:g,x:se.clientX,y:se.clientY,onClose(){F(),K(),ne()||q(se,!0,"safe-polygon")}});const ue=z.current;te.addEventListener("mousemove",ue),R.current=()=>{te.removeEventListener("mousemove",ue)};return}(P.current==="touch"?!dm(s.floating,se.relatedTarget):!0)&&q(se)}function J(se){ne()||o.current.floatingContext&&(b.current==null||b.current({...o.current.floatingContext,tree:g,x:se.clientX,y:se.clientY,onClose(){F(),K(),ne()||q(se)}})(se))}if(dr(s.domReference)){var Y;const se=s.domReference;return n&&se.addEventListener("mouseleave",J),(Y=s.floating)==null||Y.addEventListener("mouseleave",J),p&&se.addEventListener("mousemove",U,{once:!0}),se.addEventListener("mouseenter",U),se.addEventListener("mouseleave",Z),()=>{var te;n&&se.removeEventListener("mouseleave",J),(te=s.floating)==null||te.removeEventListener("mouseleave",J),p&&se.removeEventListener("mousemove",U),se.removeEventListener("mouseenter",U),se.removeEventListener("mouseleave",Z)}}},[s,a,t,f,h,p,q,K,F,r,n,T,g,E,b,o,ne]),yi(()=>{var U;if(a&&n&&(U=b.current)!=null&&U.__options.blockPointerEvents&&B()){O.current=!0;const J=s.floating;if(dr(s.domReference)&&J){var Z;const Y=ld(s.floating).body;Y.setAttribute(vV,"");const se=s.domReference,te=g==null||(Z=g.nodesRef.current.find(ie=>ie.id===v))==null||(Z=Z.context)==null?void 0:Z.elements.floating;return te&&(te.style.pointerEvents=""),Y.style.pointerEvents="none",se.style.pointerEvents="auto",J.style.pointerEvents="auto",()=>{Y.style.pointerEvents="",se.style.pointerEvents="",J.style.pointerEvents=""}}}},[a,n,v,s,g,b,B]),yi(()=>{n||(P.current=void 0,M.current=!1,K(),F())},[n,K,F]),_.useEffect(()=>()=>{K(),clearTimeout(D.current),clearTimeout(V.current),F()},[a,s.domReference,K,F]);const oe=_.useMemo(()=>{function U(Z){P.current=Z.pointerType}return{onPointerDown:U,onPointerEnter:U,onMouseMove(Z){const{nativeEvent:J}=Z;function Y(){!$.current&&!T.current&&r(!0,J,"hover")}f&&!F2(P.current)||n||h===0||M.current&&Z.movementX**2+Z.movementY**2<2||(clearTimeout(V.current),P.current==="touch"?Y():(M.current=!0,V.current=window.setTimeout(Y,h)))}}},[f,r,n,T,h]),j=_.useMemo(()=>({onMouseEnter(){clearTimeout(D.current)},onMouseLeave(U){ne()||q(U.nativeEvent,!1)}}),[q,ne]);return _.useMemo(()=>a?{reference:oe,floating:j}:{},[a,oe,j])}const q2=()=>{},vz=_.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:q2,setState:q2,isInstantPhase:!1}),nCe=()=>_.useContext(vz);function rCe(t){const{children:e,delay:n,timeoutMs:r=0}=t,[o,i]=_.useReducer((l,u)=>({...l,...u}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),s=_.useRef(null),a=_.useCallback(l=>{i({currentId:l})},[]);return yi(()=>{o.currentId?s.current===null?s.current=o.currentId:o.isInstantPhase||i({isInstantPhase:!0}):(o.isInstantPhase&&i({isInstantPhase:!1}),s.current=null)},[o.currentId,o.isInstantPhase]),_.createElement(vz.Provider,{value:_.useMemo(()=>({...o,setState:i,setCurrentId:a}),[o,a])},e)}function oCe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,floatingId:o}=t,{id:i,enabled:s=!0}=e,a=i??o,l=nCe(),{currentId:u,setCurrentId:f,initialDelay:h,setState:p,timeoutMs:g}=l;return yi(()=>{s&&u&&(p({delay:{open:1,close:y1(h,"close")}}),u!==a&&r(!1))},[s,a,r,p,u,h]),yi(()=>{function v(){r(!1),p({delay:h,currentId:null})}if(s&&u&&!n&&u===a){if(g){const b=window.setTimeout(v,g);return()=>{clearTimeout(b)}}v()}},[s,n,p,u,a,r,h,g]),yi(()=>{s&&(f===q2||!n||f(a))},[s,n,f,a]),l}function pk(t,e){let n=t.filter(o=>{var i;return o.parentId===e&&((i=o.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(o=>{var i;return(i=r)==null?void 0:i.some(s=>{var a;return o.parentId===s.id&&((a=o.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const bz=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function wz(t,e){const n=gz(t,bz());e==="prev"&&n.reverse();const r=n.indexOf(H2(ld(t)));return n.slice(r+1)[0]}function iCe(){return wz(document.body,"next")}function sCe(){return wz(document.body,"prev")}function mk(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!dm(n,r)}function aCe(t){gz(t,bz()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function bV(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const Cz={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let lCe;function wV(t){t.key==="Tab"&&(t.target,clearTimeout(lCe))}const CV=_.forwardRef(function(e,n){const[r,o]=_.useState();yi(()=>(dz()&&o("button"),document.addEventListener("keydown",wV),()=>{document.removeEventListener("keydown",wV)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[Vv("focus-guard")]:"",style:Cz};return _.createElement("span",U2({},e,i))}),Sz=_.createContext(null),SV=Vv("portal");function cCe(t){t===void 0&&(t={});const{id:e,root:n}=t,r=oI(),o=dCe(),[i,s]=_.useState(null),a=_.useRef(null);return yi(()=>()=>{i?.remove(),queueMicrotask(()=>{a.current=null})},[i]),yi(()=>{if(!r||a.current)return;const l=e?document.getElementById(e):null;if(!l)return;const u=document.createElement("div");u.id=r,u.setAttribute(SV,""),l.appendChild(u),a.current=u,s(u)},[e,r]),yi(()=>{if(n===null||!r||a.current)return;let l=n||o?.portalNode;l&&!dr(l)&&(l=l.current),l=l||document.body;let u=null;e&&(u=document.createElement("div"),u.id=e,l.appendChild(u));const f=document.createElement("div");f.id=r,f.setAttribute(SV,""),l=u||l,l.appendChild(f),a.current=f,s(f)},[e,n,r,o]),i}function uCe(t){const{children:e,id:n,root:r,preserveTabOrder:o=!0}=t,i=cCe({id:n,root:r}),[s,a]=_.useState(null),l=_.useRef(null),u=_.useRef(null),f=_.useRef(null),h=_.useRef(null),p=s?.modal,g=s?.open,v=!!s&&!s.modal&&s.open&&o&&!!(r||i);return _.useEffect(()=>{if(!i||!o||p)return;function b(E){i&&mk(E)&&(E.type==="focusin"?bV:aCe)(i)}return i.addEventListener("focusin",b,!0),i.addEventListener("focusout",b,!0),()=>{i.removeEventListener("focusin",b,!0),i.removeEventListener("focusout",b,!0)}},[i,o,p]),_.useEffect(()=>{i&&(g||bV(i))},[g,i]),_.createElement(Sz.Provider,{value:_.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:u,beforeInsideRef:f,afterInsideRef:h,portalNode:i,setFocusManagerState:a}),[o,i])},v&&i&&_.createElement(CV,{"data-type":"outside",ref:l,onFocus:b=>{if(mk(b,i)){var E;(E=f.current)==null||E.focus()}else{const T=sCe()||s?.refs.domReference.current;T?.focus()}}}),v&&i&&_.createElement("span",{"aria-owns":i.id,style:Cz}),i&&ha.createPortal(e,i),v&&i&&_.createElement(CV,{"data-type":"outside",ref:u,onFocus:b=>{if(mk(b,i)){var E;(E=h.current)==null||E.focus()}else{const T=iCe()||s?.refs.domReference.current;T?.focus(),s?.closeOnFocusOut&&s?.onOpenChange(!1,b.nativeEvent,"focus-out")}}}))}const dCe=()=>_.useContext(Sz),fCe="data-floating-ui-focusable",hCe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},pCe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},xV=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function xz(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=t,{enabled:s=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:u="pointerdown",referencePress:f=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:g,capture:v}=e,b=sI(),E=Ic(typeof l=="function"?l:()=>!1),T=typeof l=="function"?E:l,P=_.useRef(!1),D=_.useRef(!1),{escapeKey:z,outsidePress:V}=xV(g),{escapeKey:$,outsidePress:O}=xV(v),R=_.useRef(!1),M=Ic(oe=>{var j;if(!n||!s||!a||oe.key!=="Escape"||R.current)return;const U=(j=i.current.floatingContext)==null?void 0:j.nodeId,Z=b?pk(b.nodesRef.current,U):[];if(!z&&(oe.stopPropagation(),Z.length>0)){let J=!0;if(Z.forEach(Y=>{var se;if((se=Y.context)!=null&&se.open&&!Y.context.dataRef.current.__escapeKeyBubbles){J=!1;return}}),!J)return}r(!1,_we(oe)?oe.nativeEvent:oe,"escape-key")}),B=Ic(oe=>{var j;const U=()=>{var Z;M(oe),(Z=vp(oe))==null||Z.removeEventListener("keydown",U)};(j=vp(oe))==null||j.addEventListener("keydown",U)}),q=Ic(oe=>{var j;const U=P.current;P.current=!1;const Z=D.current;if(D.current=!1,u==="click"&&Z||U||typeof T=="function"&&!T(oe))return;const J=vp(oe),Y="["+Vv("inert")+"]",se=ld(o.floating).querySelectorAll(Y);let te=dr(J)?J:null;for(;te&&!bd(te);){const ve=Gc(te);if(bd(ve)||!dr(ve))break;te=ve}if(se.length&&dr(J)&&!kwe(J)&&!dm(J,o.floating)&&Array.from(se).every(ve=>!dm(te,ve)))return;if(ks(J)&&ne){const ve=J.clientWidth>0&&J.scrollWidth>J.clientWidth,De=J.clientHeight>0&&J.scrollHeight>J.clientHeight;let Ue=De&&oe.offsetX>J.clientWidth;if(De&&pa(J).direction==="rtl"&&(Ue=oe.offsetX<=J.offsetWidth-J.clientWidth),Ue||ve&&oe.offsetY>J.clientHeight)return}const ie=(j=i.current.floatingContext)==null?void 0:j.nodeId,ue=b&&pk(b.nodesRef.current,ie).some(ve=>{var De;return hk(oe,(De=ve.context)==null?void 0:De.elements.floating)});if(hk(oe,o.floating)||hk(oe,o.domReference)||ue)return;const ae=b?pk(b.nodesRef.current,ie):[];if(ae.length>0){let ve=!0;if(ae.forEach(De=>{var Ue;if((Ue=De.context)!=null&&Ue.open&&!De.context.dataRef.current.__outsidePressBubbles){ve=!1;return}}),!ve)return}r(!1,oe,"outside-press")}),K=Ic(oe=>{var j;const U=()=>{var Z;q(oe),(Z=vp(oe))==null||Z.removeEventListener(u,U)};(j=vp(oe))==null||j.addEventListener(u,U)});_.useEffect(()=>{if(!n||!s)return;i.current.__escapeKeyBubbles=z,i.current.__outsidePressBubbles=V;let oe=-1;function j(se){r(!1,se,"ancestor-scroll")}function U(){window.clearTimeout(oe),R.current=!0}function Z(){oe=window.setTimeout(()=>{R.current=!1},TC()?5:0)}const J=ld(o.floating);a&&(J.addEventListener("keydown",$?B:M,$),J.addEventListener("compositionstart",U),J.addEventListener("compositionend",Z)),T&&J.addEventListener(u,O?K:q,O);let Y=[];return p&&(dr(o.domReference)&&(Y=Vc(o.domReference)),dr(o.floating)&&(Y=Y.concat(Vc(o.floating))),!dr(o.reference)&&o.reference&&o.reference.contextElement&&(Y=Y.concat(Vc(o.reference.contextElement)))),Y=Y.filter(se=>{var te;return se!==((te=J.defaultView)==null?void 0:te.visualViewport)}),Y.forEach(se=>{se.addEventListener("scroll",j,{passive:!0})}),()=>{a&&(J.removeEventListener("keydown",$?B:M,$),J.removeEventListener("compositionstart",U),J.removeEventListener("compositionend",Z)),T&&J.removeEventListener(u,O?K:q,O),Y.forEach(se=>{se.removeEventListener("scroll",j)}),window.clearTimeout(oe)}},[i,o,a,T,u,n,r,p,s,z,V,M,$,B,q,O,K]),_.useEffect(()=>{P.current=!1},[T,u]);const F=_.useMemo(()=>({onKeyDown:M,[hCe[h]]:oe=>{f&&r(!1,oe.nativeEvent,"reference-press")}}),[M,r,f,h]),ne=_.useMemo(()=>({onKeyDown:M,onMouseDown(){D.current=!0},onMouseUp(){D.current=!0},[pCe[u]]:()=>{P.current=!0}}),[M,u]);return _.useMemo(()=>s?{reference:F,floating:ne}:{},[s,F,ne])}function mCe(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=oI(),i=_.useRef({}),[s]=_.useState(()=>Zwe()),a=iI()!=null,[l,u]=_.useState(r.reference),f=Ic((g,v,b)=>{i.current.openEvent=g?v:void 0,s.emit("openchange",{open:g,event:v,reason:b,nested:a}),n?.(g,v,b)}),h=_.useMemo(()=>({setPositionReference:u}),[]),p=_.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return _.useMemo(()=>({dataRef:i,open:e,onOpenChange:f,elements:p,events:s,floatingId:o,refs:h}),[e,f,p,s,o,h])}function Pm(t){t===void 0&&(t={});const{nodeId:e}=t,n=mCe({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[i,s]=_.useState(null),[a,l]=_.useState(null),f=o?.domReference||i,h=_.useRef(null),p=sI();yi(()=>{f&&(h.current=f)},[f]);const g=I9({...t,elements:{...o,...a&&{reference:a}}}),v=_.useCallback(D=>{const z=dr(D)?{getBoundingClientRect:()=>D.getBoundingClientRect(),contextElement:D}:D;l(z),g.refs.setReference(z)},[g.refs]),b=_.useCallback(D=>{(dr(D)||D===null)&&(h.current=D,s(D)),(dr(g.refs.reference.current)||g.refs.reference.current===null||D!==null&&!dr(D))&&g.refs.setReference(D)},[g.refs]),E=_.useMemo(()=>({...g.refs,setReference:b,setPositionReference:v,domReference:h}),[g.refs,b,v]),T=_.useMemo(()=>({...g.elements,domReference:f}),[g.elements,f]),P=_.useMemo(()=>({...g,...r,refs:E,elements:T,nodeId:e}),[g,E,T,e,r]);return yi(()=>{r.dataRef.current.floatingContext=P;const D=p?.nodesRef.current.find(z=>z.id===e);D&&(D.context=P)}),_.useMemo(()=>({...g,context:P,refs:E,elements:T}),[g,E,T,P])}function gCe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:o,dataRef:i,elements:s}=t,{enabled:a=!0,visibleOnly:l=!0}=e,u=_.useRef(!1),f=_.useRef(),h=_.useRef(!0);_.useEffect(()=>{if(!a)return;const g=ns(s.domReference);function v(){!n&&ks(s.domReference)&&s.domReference===H2(ld(s.domReference))&&(u.current=!0)}function b(){h.current=!0}return g.addEventListener("blur",v),g.addEventListener("keydown",b,!0),()=>{g.removeEventListener("blur",v),g.removeEventListener("keydown",b,!0)}},[s.domReference,n,a]),_.useEffect(()=>{if(!a)return;function g(v){let{reason:b}=v;(b==="reference-press"||b==="escape-key")&&(u.current=!0)}return o.on("openchange",g),()=>{o.off("openchange",g)}},[o,a]),_.useEffect(()=>()=>{clearTimeout(f.current)},[]);const p=_.useMemo(()=>({onPointerDown(g){Swe(g.nativeEvent)||(h.current=!1)},onMouseLeave(){u.current=!1},onFocus(g){if(u.current)return;const v=vp(g.nativeEvent);if(l&&dr(v))try{if(dz()&&xwe())throw Error();if(!v.matches(":focus-visible"))return}catch{if(!h.current&&!Awe(v))return}r(!0,g.nativeEvent,"focus")},onBlur(g){u.current=!1;const v=g.relatedTarget,b=g.nativeEvent,E=dr(v)&&v.hasAttribute(Vv("focus-guard"))&&v.getAttribute("data-type")==="outside";f.current=window.setTimeout(()=>{var T;const P=H2(s.domReference?s.domReference.ownerDocument:document);!v&&P===s.domReference||dm((T=i.current.floatingContext)==null?void 0:T.refs.floating.current,P)||dm(s.domReference,P)||E||r(!1,b,"focus")})}}),[i,s.domReference,r,l]);return _.useMemo(()=>a?{reference:p}:{},[a,p])}const EV="active",_V="selected";function gk(t,e,n){const r=new Map,o=n==="item";let i=t;if(o&&t){const{[EV]:s,[_V]:a,...l}=t;i=l}return{...n==="floating"&&{tabIndex:-1,[fCe]:""},...i,...e.map(s=>{const a=s?s[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((s,a)=>(a&&Object.entries(a).forEach(l=>{let[u,f]=l;if(!(o&&[EV,_V].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof f=="function"){var h;(h=r.get(u))==null||h.push(f),s[u]=function(){for(var p,g=arguments.length,v=new Array(g),b=0;b<g;b++)v[b]=arguments[b];return(p=r.get(u))==null?void 0:p.map(E=>E(...v)).find(E=>E!==void 0)}}}else s[u]=f}),s),{})}}function Ez(t){t===void 0&&(t=[]);const e=t.map(a=>a?.reference),n=t.map(a=>a?.floating),r=t.map(a=>a?.item),o=_.useCallback(a=>gk(a,t,"reference"),e),i=_.useCallback(a=>gk(a,t,"floating"),n),s=_.useCallback(a=>gk(a,t,"item"),r);return _.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:s}),[o,i,s])}const yCe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function vCe(t,e){var n;e===void 0&&(e={});const{open:r,floatingId:o}=t,{enabled:i=!0,role:s="dialog"}=e,a=(n=yCe.get(s))!=null?n:s,l=oI(),f=iI()!=null,h=_.useMemo(()=>a==="tooltip"||s==="label"?{["aria-"+(s==="label"?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?o:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&f&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[a,o,f,r,l,s]),p=_.useMemo(()=>{const v={id:o,...a&&{role:a}};return a==="tooltip"||s==="label"?v:{...v,...a==="menu"&&{"aria-labelledby":l}}},[a,o,l,s]),g=_.useCallback(v=>{let{active:b,selected:E}=v;const T={role:"option",...b&&{id:o+"-option"}};switch(s){case"select":return{...T,"aria-selected":b&&E};case"combobox":return{...T,...b&&{"aria-selected":!0}}}return{}},[o,s]);return _.useMemo(()=>i?{reference:h,floating:p,item:g}:{},[i,h,p,g])}const kV=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function ap(t,e){return typeof t=="function"?t(e):t}function bCe(t,e){const[n,r]=_.useState(t);return t&&!n&&r(!0),_.useEffect(()=>{if(!t&&n){const o=setTimeout(()=>r(!1),e);return()=>clearTimeout(o)}},[t,n,e]),n}function wCe(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:o=250}=e,s=(typeof o=="number"?o:o.close)||0,[a,l]=_.useState("unmounted"),u=bCe(n,s);return!u&&a==="close"&&l("unmounted"),yi(()=>{if(r){if(n){l("initial");const f=requestAnimationFrame(()=>{l("open")});return()=>{cancelAnimationFrame(f)}}l("close")}},[n,r]),{isMounted:u,status:a}}function aI(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:o,common:i,duration:s=250}=e,a=t.placement,l=a.split("-")[0],u=_.useMemo(()=>({side:l,placement:a}),[l,a]),f=typeof s=="number",h=(f?s:s.open)||0,p=(f?s:s.close)||0,[g,v]=_.useState(()=>({...ap(i,u),...ap(n,u)})),{isMounted:b,status:E}=wCe(t,{duration:s}),T=Lf(n),P=Lf(r),D=Lf(o),z=Lf(i);return yi(()=>{const V=ap(T.current,u),$=ap(D.current,u),O=ap(z.current,u),R=ap(P.current,u)||Object.keys(V).reduce((M,B)=>(M[B]="",M),{});if(E==="initial"&&v(M=>({transitionProperty:M.transitionProperty,...O,...V})),E==="open"&&v({transitionProperty:Object.keys(R).map(kV).join(","),transitionDuration:h+"ms",...O,...R}),E==="close"){const M=$||V;v({transitionProperty:Object.keys(M).map(kV).join(","),transitionDuration:p+"ms",...O,...M})}},[p,D,T,P,z,h,E,u]),{isMounted:b,styles:g}}var _z={exports:{}},yk={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TV;function CCe(){if(TV)return yk;TV=1;var t=Pe;function e(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,i=t.useLayoutEffect,s=t.useDebugValue;function a(h,p){var g=p(),v=r({inst:{value:g,getSnapshot:p}}),b=v[0].inst,E=v[1];return i(function(){b.value=g,b.getSnapshot=p,l(b)&&E({inst:b})},[h,g,p]),o(function(){return l(b)&&E({inst:b}),h(function(){l(b)&&E({inst:b})})},[h]),s(g),g}function l(h){var p=h.getSnapshot;h=h.value;try{var g=p();return!n(h,g)}catch{return!0}}function u(h,p){return p()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:a;return yk.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,yk}_z.exports=CCe();var kz=_z.exports;const SCe=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},xCe=({contentComponent:t})=>{const e=kz.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return Pe.createElement(Pe.Fragment,null,Object.values(e))};function ECe(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:gC.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}class _Ce extends Pe.Component{constructor(e){var n;super(e),this.editorContentRef=Pe.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=ECe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return Pe.createElement(Pe.Fragment,null,Pe.createElement("div",{ref:SCe(n,this.editorContentRef),...r}),e?.contentComponent&&Pe.createElement(xCe,{contentComponent:e.contentComponent}))}}const kCe=_.forwardRef((t,e)=>{const n=Pe.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Pe.createElement(_Ce,{key:n,innerRef:e,...t})});Pe.memo(kCe);var vk={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AV;function TCe(){if(AV)return vk;AV=1;var t=Pe,e=kz;function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,i=t.useRef,s=t.useEffect,a=t.useMemo,l=t.useDebugValue;return vk.useSyncExternalStoreWithSelector=function(u,f,h,p,g){var v=i(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=a(function(){function T($){if(!P){if(P=!0,D=$,$=p($),g!==void 0&&b.hasValue){var O=b.value;if(g(O,$))return z=O}return z=$}if(O=z,r(D,$))return O;var R=p($);return g!==void 0&&g(O,R)?O:(D=$,z=R)}var P=!1,D,z,V=h===void 0?null:h;return[function(){return T(f())},V===null?void 0:function(){return T(V())}]},[f,h,p,g]);var E=o(u,v[0],v[1]);return s(function(){b.hasValue=!0,b.value=E},[E]),l(E),E},vk}TCe();const ACe=_.createContext({editor:null});ACe.Consumer;const Tz=_.createContext({onDragStart:void 0}),Az=()=>_.useContext(Tz),RCe=Pe.forwardRef((t,e)=>{const{onDragStart:n}=Az(),r=t.as||"div";return Pe.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function RV(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function MV(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.forward_ref)"||t.$$typeof.description==="react.forward_ref"))}function MCe(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.memo)"||t.$$typeof.description==="react.memo"))}function ICe(t){if(RV(t)||MV(t))return!0;if(MCe(t)){const e=t.type;if(e)return RV(e)||MV(e)}return!1}function NCe(){try{if(_.version)return parseInt(_.version.split(".")[0],10)>=19}catch{}return!1}class DCe{constructor(e,{editor:n,props:r={},as:o="div",className:i=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=n,this.props=r,this.element=document.createElement(o),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?ha.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const n=this.component,r=this.props,o=this.editor,i=NCe(),s=ICe(n),a={...r};a.ref&&!(i||s)&&delete a.ref,!a.ref&&(i||s)&&(a.ref=l=>{this.ref=l}),this.reactElement=Pe.createElement(n,{...a}),(e=o?.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const n=this.editor;(e=n?.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(n=>{this.element.setAttribute(n,e[n])})}}class OCe extends Bfe{constructor(e,n,r){if(super(e,n,r),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const o=this.dom.querySelector("[data-node-view-content]");if(!o)return;o.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(u={})=>this.updateAttributes(u),deleteNode:()=>this.deleteNode(),ref:_.createRef()};if(!this.component.displayName){const u=f=>f.charAt(0).toUpperCase()+f.substring(1);this.component.displayName=u(this.extension.name)}const o={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:u=>{u&&this.contentDOMElement&&u.firstChild!==this.contentDOMElement&&(u.hasAttribute("data-node-view-wrapper")&&u.removeAttribute("data-node-view-wrapper"),u.appendChild(this.contentDOMElement))}},i=this.component,s=_.memo(u=>Pe.createElement(Tz.Provider,{value:o},_.createElement(i,u)));s.displayName="ReactNodeView";let a=this.node.isInline?"span":"div";this.options.as&&(a=this.options.as);const{className:l=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new DCe(s,{editor:this.editor,props:e,as:a,className:`node-${this.node.type.name} ${l}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:n}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,n,r){const o=i=>{this.renderer.updateProps(i),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const i=this.node,s=this.decorations,a=this.innerDecorations;return this.node=e,this.decorations=n,this.innerDecorations=r,this.options.update({oldNode:i,oldDecorations:s,newNode:e,newDecorations:n,oldInnerDecorations:a,innerDecorations:r,updateProps:()=>o({node:e,decorations:n,innerDecorations:r})})}return e===this.node&&this.decorations===n&&this.innerDecorations===r||(this.node=e,this.decorations=n,this.innerDecorations=r,o({node:e,decorations:n,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const n=this.editor.extensionManager.attributes,r=tw(this.node,n);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function PCe(t,e){return n=>n.editor.contentComponent?new OCe(t,n,e):{}}const Rz=_.createContext(void 0);function Zl(t){return _.useContext(Rz)}function St(t){const e=Zl();if(!(e!=null&&e.editor))throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return e.editor}function lI(t,e,n){const r=Zl();e||(e=r?.editor),_.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onSelectionChange(t,n)},[t,e,n])}function LCe(t,e){const n=St();e=e||n;const[r,o]=_.useState(()=>{if(t)return e.getSelectionBoundingBox()}),i=_.useCallback(()=>{if(!t)return;const s=e.getSelectionBoundingBox();o(s)},[e,t]);return lI(i,e,!0),_.useEffect(()=>{o(t?e.getSelectionBoundingBox():void 0)},[t,e]),r}function VCe(t){return t.getBoundingClientRect!==void 0}function Ud(t,e,n,r){const{refs:o,update:i,context:s,floatingStyles:a,isPositioned:l}=Pm({open:t,...r}),{isMounted:u,styles:f}=aI(s),h=typeof r?.canDismiss=="object"?r.canDismiss:{enabled:r?.canDismiss},p=xz(s,h),{getReferenceProps:g,getFloatingProps:v}=Ez([p]);return _.useEffect(()=>{i()},[e,i]),_.useEffect(()=>{e!==null&&(e instanceof HTMLElement||VCe(e)?o.setReference(e):o.setReference({getBoundingClientRect:()=>e}))},[e,o]),_.useMemo(()=>({isMounted:u,ref:o.setFloating,setReference:o.setReference,style:{display:"flex",...f,...a,zIndex:n},getFloatingProps:v,getReferenceProps:g,isPositioned:l}),[l,a,u,o.setFloating,o.setReference,f,n,v,g])}function ru(t){const[e,n]=_.useState();return _.useEffect(()=>t(r=>{n({...r})}),[t]),e}const Mz=_.createContext(void 0);function bt(){return _.useContext(Mz)}const cI=(t={},e=[])=>_.useMemo(()=>{const n=az.create(t);return window&&(window.ProseMirror=n._tiptapEditor),n},e);function Kt(){return Zl().editor.dictionary}function uI(t,e){const n=Zl();e||(e=n?.editor),_.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onChange(t)},[t,e])}const dI=t=>{const[e,n]=_.useState(!1),[r,o]=_.useState(t.editor.isEmpty),i=bt();uI(()=>{o(t.editor.isEmpty)},t.editor);const s=_.useCallback(()=>{n(!0)},[]),a=_.useCallback(()=>{n(!1)},[]);return _.useEffect(()=>{t.editable&&t.autoFocus&&t.editor.focus()},[t.autoFocus,t.editable,t.editor]),C.jsxs(C.Fragment,{children:[C.jsx(i.Comments.Editor,{autoFocus:t.autoFocus,className:"bn-comment-editor",editor:t.editor,onFocus:s,onBlur:a,editable:t.editable}),t.actions&&C.jsx("div",{className:"bn-comment-actions-wrapper",children:C.jsx(t.actions,{isFocused:e,isEmpty:r})})]})},jCe=Ql(Os(QM.paragraph.implementation.node.config),{}),{textColor:UIe,backgroundColor:qIe,...BCe}=ZM,fI=JM.create({blockSpecs:{paragraph:jCe},styleSpecs:BCe});function $Ce(){const t=St();if(!t.comments)throw new Error("Comments plugin not found");const e=t.comments,n=bt(),r=Kt(),o=cI({trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.new_comment}},schema:fI});return C.jsx(n.Comments.Card,{className:"bn-thread",children:C.jsx(dI,{autoFocus:!0,editable:!0,editor:o,actions:({isEmpty:i})=>C.jsx(n.Generic.Toolbar.Root,{className:mr("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:C.jsx(n.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:i,onClick:async()=>{await e.createThread({initialComment:{body:o.document}}),e.stopPendingComment()},children:"Save"})})})})}const HCe=t=>{const e=St();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=e.comments;_.useEffect(()=>{const f=n.onUpdate(h=>e.setForceSelectionVisible(h.pendingComment));return()=>f()},[n,e]);const r=ru(n.onUpdate.bind(n)),o=LCe(r?.pendingComment),{isMounted:i,ref:s,style:a,getFloatingProps:l}=Ud(r?.pendingComment||!1,o||null,5e3,{placement:"bottom",middleware:[nl(10),Bd(),ma()],onOpenChange:f=>{f||(n.stopPendingComment(),e.focus())},...t.floatingOptions});if(!i||!r)return null;const u=t.floatingComposer||$Ce;return C.jsx("div",{ref:s,style:a,...l(),children:C.jsx(u,{})})};var Iz={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IV=Pe.createContext&&Pe.createContext(Iz),FCe=["attr","size","title"];function zCe(t,e){if(t==null)return{};var n=UCe(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function UCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Kw(){return Kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kw.apply(this,arguments)}function NV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Ww(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NV(Object(n),!0).forEach(function(r){qCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qCe(t,e,n){return e=GCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GCe(t){var e=KCe(t,"string");return typeof e=="symbol"?e:e+""}function KCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nz(t){return t&&t.map((e,n)=>Pe.createElement(e.tag,Ww({key:n},e.attr),Nz(e.child)))}function xt(t){return e=>Pe.createElement(WCe,Kw({attr:Ww({},t.attr)},e),Nz(t.child))}function WCe(t){var e=n=>{var{attr:r,size:o,title:i}=t,s=zCe(t,FCe),a=o||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Pe.createElement("svg",Kw({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:Ww(Ww({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&Pe.createElement("title",null,i),t.children)};return IV!==void 0?Pe.createElement(IV.Consumer,null,n=>e(n)):e(Iz)}function YCe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(t)}function Dz(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(t)}function XCe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(t)}function QCe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(t)}function hI(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(t)}function ZCe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(t)}function JCe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(t)}function eSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(t)}function tSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(t)}function nSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(t)}function rSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(t)}function DV(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(t)}function Yw(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(t)}function Xw(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(t)}function Qw(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function Oz(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM22 8V16H23.5V18H22V20H20V18H14.5V16.66L19.5 8H22ZM20 11.133L17.19 16H20V11.133Z"},child:[]}]})(t)}function Pz(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8V10H17.6769L17.2126 12.6358C17.5435 12.5472 17.8912 12.5 18.25 12.5C20.4591 12.5 22.25 14.2909 22.25 16.5C22.25 18.7091 20.4591 20.5 18.25 20.5C16.4233 20.5 14.8827 19.2756 14.4039 17.6027L16.3271 17.0519C16.5667 17.8881 17.3369 18.5 18.25 18.5C19.3546 18.5 20.25 17.6046 20.25 16.5C20.25 15.3954 19.3546 14.5 18.25 14.5C17.6194 14.5 17.057 14.7918 16.6904 15.2478L14.8803 14.3439L16 8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function Lz(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21.097 8L18.499 12.5C20.7091 12.5 22.5 14.2909 22.5 16.5C22.5 18.7091 20.7091 20.5 18.5 20.5C16.2909 20.5 14.5 18.7091 14.5 16.5C14.5 15.7636 14.699 15.0737 15.0461 14.4811L18.788 8H21.097ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 14.5C17.3954 14.5 16.5 15.3954 16.5 16.5C16.5 17.6046 17.3954 18.5 18.5 18.5C19.6046 18.5 20.5 17.6046 20.5 16.5C20.5 15.3954 19.6046 14.5 18.5 14.5Z"},child:[]}]})(t)}function oSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(t)}function iSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(t)}function OV(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(t)}function sSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(t)}function aSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(t)}function Vz(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(t)}function jz(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(t)}function Bz(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function $z(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function lSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(t)}function cSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(t)}function Hz(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(t)}function uSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(t)}function dSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(t)}function pI(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(t)}function fSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(t)}function hSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(t)}function Fz(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(t)}function pSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(t)}function mSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(t)}function zz(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 18V20H2V18H22ZM2 3.5L10 8.5L2 13.5V3.5ZM22 11V13H12V11H22ZM22 4V6H12V4H22Z"},child:[]}]})(t)}function gSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(t)}function Uz(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(t)}function ySe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(t)}function vSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(t)}function bSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function wSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function CSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(t)}function SSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(t)}function xSe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(t)}function ESe(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(t)}function PV(t){return xt({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(t)}let bk;async function _Se(){return bk||(bk=(async()=>{const[t,e]=await Promise.all([Wi(()=>import("./module-DrROFPns.js"),[]),Wi(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),bk)}function kSe(t){const e=_.useRef(null),n=_.useRef(null);return n.current&&n.current.update(t),_.useEffect(()=>((async()=>{const{emojiMart:r}=await _Se();n.current=new r.Picker({...t,ref:e})})(),()=>{n.current=null}),[]),Pe.createElement("div",{ref:e})}const LV=t=>{const[e,n]=_.useState(!1),r=bt(),o=Zl();return C.jsxs(r.Generic.Popover.Root,{opened:e,children:[C.jsx(r.Generic.Popover.Trigger,{children:C.jsx("div",{onClick:i=>{i.preventDefault(),i.stopPropagation(),n(!e)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t.children})}),C.jsx(r.Generic.Popover.Content,{variant:"panel-popover",children:C.jsx(kSe,{perLine:7,onClickOutside:()=>n(!1),onEmojiSelect:i=>{t.onEmojiSelect(i),n(!1)},theme:o?.colorSchemePreference})})]})};function TSe(t,e){return mI(t,[e]).get(e)}function mI(t,e){const n=t.comments;if(!n)throw new Error("Comments plugin not found");const r=n.userStore,o=_.useCallback(()=>{const a=new Map;for(const l of e){const u=r.getUser(l);u&&a.set(l,u)}return a},[r,e]),i=_.useMemo(()=>({current:o()}),[o]),s=_.useCallback(a=>{const l=r.subscribe(u=>{i.current=o(),a()});return r.loadUsers(e),l},[r,o,e,i]);return _.useSyncExternalStore(s,()=>i.current)}const ASe=t=>{const e=bt(),n=Kt(),r=St();if(!r.comments)throw new Error("ReactionBadge must be used inside a BlockNote editor with comments enabled");const o=t.comment.reactions.find(l=>l.emoji===t.emoji);if(!o)throw new Error("Trying to render reaction badge for non-existing reaction");const[i,s]=_.useState([]),a=mI(r,i);return C.jsx(e.Generic.Badge.Root,{className:mr("bn-badge","bn-comment-reaction"),text:o.userIds.length.toString(),icon:o.emoji,isSelected:r.comments.threadStore.auth.canDeleteReaction(t.comment,o.emoji),onClick:()=>t.onReactionSelect(o.emoji),onMouseEnter:()=>s(o.userIds),mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:`${Array.from(a.values()).map(l=>l.username).join(`
`)}`},o.emoji)},RSe=({comment:t,thread:e,showResolveButton:n})=>{const r=Kt(),o=cI({initialContent:t.body,trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.edit_comment}},schema:fI},[t.body]),i=bt(),[s,a]=_.useState(!1),l=St();if(!l.comments)throw new Error("Comments plugin not found");const u=l.comments.threadStore,f=_.useCallback(()=>{a(!0)},[]),h=_.useCallback(()=>{o.replaceBlocks(o.document,t.body),a(!1)},[o,t.body]),p=_.useCallback(async R=>{await u.updateComment({commentId:t.id,comment:{body:o.document},threadId:e.id}),a(!1)},[t,e.id,o,u]),g=_.useCallback(async()=>{await u.deleteComment({commentId:t.id,threadId:e.id})},[t,e.id,u]),v=_.useCallback(async R=>{u.auth.canAddReaction(t,R)?await u.addReaction({threadId:e.id,commentId:t.id,emoji:R}):u.auth.canDeleteReaction(t,R)&&await u.deleteReaction({threadId:e.id,commentId:t.id,emoji:R})},[u,t,e.id]),b=_.useCallback(async()=>{await u.resolveThread({threadId:e.id})},[e.id,u]),E=_.useCallback(async()=>{await u.unresolveThread({threadId:e.id})},[e.id,u]),T=TSe(l,t.userId);if(!t.body)return null;let P;const D=u.auth.canAddReaction(t),z=u.auth.canDeleteComment(t),V=u.auth.canUpdateComment(t),$=n&&(e.resolved?u.auth.canUnresolveThread(e):u.auth.canResolveThread(e));s||(P=C.jsxs(i.Generic.Toolbar.Root,{className:mr("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[D&&C.jsx(LV,{onEmojiSelect:R=>v(R.native),children:C.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.add_reaction,variant:"compact",children:C.jsx(PV,{size:16})},"add-reaction")}),$&&(e.resolved?C.jsx(i.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:E,children:C.jsx(YCe,{size:16})},"reopen"):C.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.resolve,variant:"compact",onClick:b,children:C.jsx(vSe,{size:16})},"resolve")),(z||V)&&C.jsxs(i.Generic.Menu.Root,{position:"bottom-start",children:[C.jsx(i.Generic.Menu.Trigger,{children:C.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.more_actions,variant:"compact",children:C.jsx(xSe,{size:16})},"more-actions")}),C.jsxs(i.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[V&&C.jsx(i.Generic.Menu.Item,{icon:C.jsx(XCe,{}),onClick:f,children:r.comments.actions.edit_comment},"edit-comment"),z&&C.jsx(i.Generic.Menu.Item,{icon:C.jsx(wSe,{}),onClick:g,children:r.comments.actions.delete_comment},"delete-comment")]})]})]}));const O=t.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!t.body)throw new Error("soft deletes are not yet supported");return C.jsx(i.Comments.Comment,{authorInfo:T??"loading",timeString:O,edited:t.updatedAt.getTime()!==t.createdAt.getTime(),showActions:"hover",actions:P,className:"bn-thread-comment",children:C.jsx(dI,{autoFocus:s,editor:o,editable:s,actions:t.reactions.length>0||s?({isEmpty:R})=>C.jsxs(C.Fragment,{children:[t.reactions.length>0&&!s&&C.jsxs(i.Generic.Badge.Group,{className:mr("bn-badge-group","bn-comment-reactions"),children:[t.reactions.map(M=>C.jsx(ASe,{comment:t,emoji:M.emoji,onReactionSelect:v},M.emoji)),C.jsx(LV,{onEmojiSelect:M=>v(M.native),children:C.jsx(i.Generic.Badge.Root,{className:mr("bn-badge","bn-comment-add-reaction"),text:"+",icon:C.jsx(PV,{size:16}),mainTooltip:r.comments.actions.add_reaction})})]}),s&&C.jsxs(i.Generic.Toolbar.Root,{variant:"action-toolbar",className:mr("bn-action-toolbar","bn-comment-actions"),children:[C.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.save_button_text,variant:"compact",onClick:p,isDisabled:R,children:r.comments.save_button_text}),C.jsx(i.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:r.comments.cancel_button_text,variant:"compact",onClick:h,children:r.comments.cancel_button_text})]})]}):void 0})})},MSe=({thread:t,maxCommentsBeforeCollapse:e})=>{const n=bt(),r=Kt(),o=St(),i=mI(o,t.resolvedBy?[t.resolvedBy]:[]),s=t.comments.map((a,l)=>C.jsx(RSe,{thread:t,comment:a,showResolveButton:l===0},a.id));if(t.resolved&&t.resolvedUpdatedAt&&t.resolvedBy){if(!i.get(t.resolvedBy))throw new Error(`User ${t.resolvedBy} resolved thread ${t.id}, but their data could not be found.`);const a=t.comments.findLastIndex(l=>t.resolvedUpdatedAt.getTime()>l.createdAt.getTime())+1;s.splice(a,0,C.jsx(n.Comments.Comment,{className:"bn-thread-comment",authorInfo:t.resolvedBy&&i.get(t.resolvedBy)||"loading",timeString:t.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:C.jsx("div",{className:"bn-resolved-text",children:r.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return e&&s.length>e&&s.splice(1,s.length-2,C.jsx(n.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:r.comments.sidebar.more_replies(t.comments.length-2)},"expand-prompt")),s},qz=({thread:t,selected:e,referenceText:n,maxCommentsBeforeCollapse:r,onFocus:o,onBlur:i,tabIndex:s})=>{const a=bt(),l=Kt(),u=St().comments;if(!u)throw new Error("Comments plugin not found");const f=cI({trailingBlock:!1,dictionary:{...l,placeholders:{emptyDocument:l.placeholders.comment_reply}},schema:fI}),h=_.useCallback(async()=>{await u.threadStore.addComment({comment:{body:f.document},threadId:t.id}),f.removeBlocks(f.document)},[u,f,t.id]);return C.jsxs(a.Comments.Card,{className:"bn-thread",headerText:n,onFocus:o,onBlur:i,selected:e,tabIndex:s,children:[C.jsx(a.Comments.CardSection,{className:"bn-thread-comments",children:C.jsx(MSe,{thread:t,maxCommentsBeforeCollapse:e?void 0:r||5})}),e&&C.jsx(a.Comments.CardSection,{className:"bn-thread-composer",children:C.jsx(dI,{autoFocus:!1,editable:!0,editor:f,actions:({isEmpty:p})=>p?null:C.jsx(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:mr("bn-action-toolbar","bn-comment-actions"),children:C.jsx(a.Generic.Toolbar.Button,{mainTooltip:l.comments.save_button_text,variant:"compact",isDisabled:p,onClick:h,children:l.comments.save_button_text})})})})]})};function ISe(t){const e=t.comments;if(!e)throw new Error("Comments plugin not found");const n=e.threadStore,r=_.useRef(void 0);r.current||(r.current=n.getThreads());const o=_.useCallback(i=>n.subscribe(s=>{r.current=s,i()}),[n]);return _.useSyncExternalStore(o,()=>r.current)}const NSe=t=>{const e=St();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=ru(e.comments.onUpdate.bind(e.comments)),{isMounted:r,ref:o,style:i,getFloatingProps:s,setReference:a}=Ud(!!(n!=null&&n.selectedThreadId),null,5e3,{placement:"bottom",middleware:[nl(10),Bd(),ma()],onOpenChange:h=>{var p;h||((p=e.comments)==null||p.selectThread(void 0),e.focus())},...t.floatingOptions}),l=_.useCallback(()=>{var h;if(!(n!=null&&n.selectedThreadId))return;const p=(h=e.domElement)==null?void 0:h.querySelector(`[data-bn-thread-id="${n?.selectedThreadId}"]`);p&&a(p)},[a,e,n?.selectedThreadId]);_.useEffect(()=>{if(n!=null&&n.selectedThreadId)return e.onChange(()=>{l()})},[e,l,n?.selectedThreadId]),_.useLayoutEffect(l,[l]);const u=ISe(e);if(!r||!n||!n.selectedThreadId)return null;const f=t.floatingThread||qz;return C.jsx("div",{ref:o,style:i,...s(),children:C.jsx(f,{thread:u.get(n.selectedThreadId),selected:!0})})},DSe=t=>{const e=bt(),n=Kt(),{block:r}=t,o=St(),[i,s]=_.useState(""),a=_.useCallback(f=>{s(f.currentTarget.value)},[]),l=_.useCallback(f=>{f.key==="Enter"&&(f.preventDefault(),o.updateBlock(r,{props:{name:UL(i),url:i}}))},[o,r,i]),u=_.useCallback(()=>{o.updateBlock(r,{props:{name:UL(i),url:i}})},[o,r,i]);return C.jsxs(e.FilePanel.TabPanel,{className:"bn-tab-panel",children:[C.jsx(e.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:i,onChange:a,onKeyDown:l,"data-test":"embed-input"}),C.jsx(e.FilePanel.Button,{className:"bn-button",onClick:u,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[r.type]||n.file_panel.embed.embed_button.file})]})},OSe=t=>{var e;const n=bt(),r=Kt(),{block:o,setLoading:i}=t,s=St(),[a,l]=_.useState(!1);_.useEffect(()=>{a&&setTimeout(()=>{l(!1)},3e3)},[a]);const u=_.useCallback(p=>{if(p===null)return;async function g(v){if(i(!0),s.uploadFile!==void 0)try{let b=await s.uploadFile(v,o.id);typeof b=="string"&&(b={props:{name:v.name,url:b}}),s.updateBlock(o,b)}catch{l(!0)}finally{i(!1)}}g(p)},[o,s,i]),f=s.schema.blockSchema[o.type],h=f.isFileBlock&&(e=f.fileBlockAccept)!=null&&e.length?f.fileBlockAccept.join(","):"*/*";return C.jsxs(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[C.jsx(n.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:h,placeholder:r.file_panel.upload.file_placeholder[o.type]||r.file_panel.upload.file_placeholder.file,value:null,onChange:u}),a&&C.jsx("div",{className:"bn-error-text",children:r.file_panel.upload.upload_error})]})},Gz=t=>{const e=bt(),n=Kt(),r=St(),[o,i]=_.useState(!1),s=t.tabs??[...r.uploadFile!==void 0?[{name:n.file_panel.upload.title,tabPanel:C.jsx(OSe,{block:t.block,setLoading:i})}]:[],{name:n.file_panel.embed.title,tabPanel:C.jsx(DSe,{block:t.block})}],[a,l]=_.useState(t.defaultOpenTab||s[0].name);return C.jsx(e.FilePanel.Root,{className:"bn-panel",defaultOpenTab:a,openTab:a,setOpenTab:l,tabs:s,loading:o})},PSe=t=>{const e=St();if(!e.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");const n=ru(e.filePanel.onUpdate.bind(e.filePanel)),{isMounted:r,ref:o,style:i,getFloatingProps:s}=Ud(n?.show||!1,n?.referencePos||null,5e3,{placement:"bottom",middleware:[nl(10),ma()],onOpenChange:h=>{h||(e.filePanel.closeMenu(),e.focus())},...t.floatingOptions});if(!r||!n)return null;const{show:a,referencePos:l,...u}=n,f=t.filePanel||Gz;return C.jsx("div",{ref:o,style:i,...s(),children:C.jsx(f,{...u})})};function LSe(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function qd(t,e){uI(t,e),lI(t,e)}function gI(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function ls(t){const e=Zl();if(t||(t=e?.editor),!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");const n=t,[r,o]=_.useState(()=>{var s;return((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block]}),i=_.useCallback(()=>{var s;return o(((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block])},[n]);return qd(i,n),r}const VSe={bold:nSe,italic:sSe,underline:fSe,strike:uSe,code:QCe};function jSe(t,e){return t in e.schema.styleSchema&&e.schema.styleSchema[t].type===t&&e.schema.styleSchema[t].propSchema==="boolean"}const jb=t=>{const e=Kt(),n=bt(),r=St(),o=jSe(t.basicTextStyle,r),i=ls(r),[s,a]=_.useState(t.basicTextStyle in r.getActiveStyles());qd(()=>{o&&a(t.basicTextStyle in r.getActiveStyles())},r);const l=f=>{if(r.focus(),!!o){if(r.schema.styleSchema[f].propSchema!=="boolean")throw new Error("can only toggle boolean styles");r.toggleStyles({[f]:!0})}};if(!_.useMemo(()=>o?!!i.find(f=>f.content!==void 0):!1,[o,i])||!r.isEditable)return null;const u=VSe[t.basicTextStyle];return C.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":t.basicTextStyle,onClick:()=>l(t.basicTextStyle),isSelected:s,label:e.formatting_toolbar[t.basicTextStyle].tooltip,mainTooltip:e.formatting_toolbar[t.basicTextStyle].tooltip,secondaryTooltip:Ss(e.formatting_toolbar[t.basicTextStyle].secondary_tooltip,e.generic.ctrl_shortcut),icon:C.jsx(u,{})})},G2=t=>{const e=t.textColor||"default",n=t.backgroundColor||"default",r=t.size||16,o=_.useMemo(()=>({pointerEvents:"none",fontSize:(r*.75).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}),[r]);return C.jsx("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":e,style:o,children:"A"})},VV=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],IS=t=>{const e=bt(),n=Kt();return C.jsxs(C.Fragment,{children:[C.jsx(()=>t.text?C.jsxs(C.Fragment,{children:[C.jsx(e.Generic.Menu.Label,{children:n.color_picker.text_title}),VV.map(r=>C.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.text.setColor(r)},"data-test":"text-color-"+r,icon:C.jsx(G2,{textColor:r,size:t.iconSize}),checked:t.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r))]}):null,{}),C.jsx(()=>t.background?C.jsxs(C.Fragment,{children:[C.jsx(e.Generic.Menu.Label,{children:n.color_picker.background_title}),VV.map(r=>C.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.background.setColor(r)},"data-test":"background-color-"+r,icon:C.jsx(G2,{backgroundColor:r,size:t.iconSize}),checked:t.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r))]}):null,{})]})};function jV(t,e){return`${t}Color`in e.schema.styleSchema&&e.schema.styleSchema[`${t}Color`].type===`${t}Color`&&e.schema.styleSchema[`${t}Color`].propSchema==="string"}const BSe=()=>{const t=bt(),e=Kt(),n=St(),r=jV("text",n),o=jV("background",n),i=ls(n),[s,a]=_.useState(r&&n.getActiveStyles().textColor||"default"),[l,u]=_.useState(o&&n.getActiveStyles().backgroundColor||"default");qd(()=>{r&&a(n.getActiveStyles().textColor||"default"),o&&u(n.getActiveStyles().backgroundColor||"default")},n);const f=_.useCallback(p=>{if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");p==="default"?n.removeStyles({textColor:p}):n.addStyles({textColor:p}),setTimeout(()=>{n.focus()})},[n,r]),h=_.useCallback(p=>{if(!o)throw Error("Tried to set background color, but style does not exist in editor schema.");p==="default"?n.removeStyles({backgroundColor:p}):n.addStyles({backgroundColor:p}),setTimeout(()=>{n.focus()})},[o,n]);return!_.useMemo(()=>{if(!r&&!o)return!1;for(const p of i)if(p.content!==void 0)return!0;return!1},[o,i,r])||!n.isEditable?null:C.jsxs(t.Generic.Menu.Root,{children:[C.jsx(t.Generic.Menu.Trigger,{children:C.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:e.formatting_toolbar.colors.tooltip,mainTooltip:e.formatting_toolbar.colors.tooltip,icon:C.jsx(G2,{textColor:s,backgroundColor:l,size:20})})}),C.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:C.jsx(IS,{text:r?{color:s,setColor:f}:void 0,background:o?{color:l,setColor:h}:void 0})})]})},BV=t=>{for(const e of nz)if(t.startsWith(e))return t;return`${rz}://${t}`},Kz=t=>{const e=bt(),n=Kt(),{url:r,text:o,editLink:i,showTextField:s}=t,[a,l]=_.useState(r),[u,f]=_.useState(o);_.useEffect(()=>{l(r),f(o)},[o,r]);const h=_.useCallback(b=>{b.key==="Enter"&&(b.preventDefault(),i(BV(a),u))},[i,a,u]),p=_.useCallback(b=>l(b.currentTarget.value),[]),g=_.useCallback(b=>f(b.currentTarget.value),[]),v=_.useCallback(()=>i(BV(a),u),[i,a,u]);return C.jsxs(e.Generic.Form.Root,{children:[C.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:C.jsx(Vz,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:a,onKeyDown:h,onChange:p,onSubmit:v}),s!==!1&&C.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:C.jsx(pI,{}),placeholder:n.link_toolbar.form.title_placeholder,value:u,onKeyDown:h,onChange:g,onSubmit:v})]})};function $Se(t){return"link"in t.schema.inlineContentSchema&&t.schema.inlineContentSchema.link==="link"}const HSe=()=>{var t;const e=St(),n=bt(),r=Kt(),o=$Se(e),i=ls(e),[s,a]=_.useState(!1),[l,u]=_.useState(e.getSelectedLinkUrl()||""),[f,h]=_.useState(e.getSelectedText());qd(()=>{h(e.getSelectedText()||""),u(e.getSelectedLinkUrl()||"")},e),_.useEffect(()=>{var v;const b=E=>{(E.ctrlKey||E.metaKey)&&E.key==="k"&&(a(!0),E.preventDefault())};return(v=e.prosemirrorView)==null||v.dom.addEventListener("keydown",b),()=>{var E;(E=e.prosemirrorView)==null||E.dom.removeEventListener("keydown",b)}},[(t=e.prosemirrorView)==null?void 0:t.dom]);const p=_.useCallback(v=>{e.createLink(v),e.focus()},[e]),g=e.transact(v=>O2(v.selection));return!_.useMemo(()=>{if(!o)return!1;for(const v of i)if(v.content===void 0)return!1;return!g},[o,i,g])||!("link"in e.schema.inlineContentSchema)||!e.isEditable?null:C.jsxs(n.Generic.Popover.Root,{opened:s,children:[C.jsx(n.Generic.Popover.Trigger,{children:C.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:r.formatting_toolbar.link.tooltip,mainTooltip:r.formatting_toolbar.link.tooltip,secondaryTooltip:Ss(r.formatting_toolbar.link.secondary_tooltip,r.generic.ctrl_shortcut),icon:C.jsx(Vz,{}),onClick:()=>a(!0)})}),C.jsx(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:C.jsx(Kz,{url:l,text:f,editLink:p,showTextField:!1})})]})},FSe=()=>{const t=Kt(),e=bt(),n=St(),[r,o]=_.useState(),i=ls(n),s=_.useMemo(()=>{if(i.length!==1)return;const u=i[0];if(Pv(u,n))return o(u.props.caption),u},[n,i]),a=_.useCallback(u=>{s&&u.key==="Enter"&&(u.preventDefault(),n.updateBlock(s,{props:{caption:r}}))},[r,n,s]),l=_.useCallback(u=>o(u.currentTarget.value),[]);return!s||Lv(s,n)||!n.isEditable?null:C.jsxs(e.Generic.Popover.Root,{children:[C.jsx(e.Generic.Popover.Trigger,{children:C.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_caption.tooltip,mainTooltip:t.formatting_toolbar.file_caption.tooltip,icon:C.jsx(OV,{}),isSelected:s.props.caption!==""})}),C.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:C.jsx(e.Generic.Form.Root,{children:C.jsx(e.Generic.Form.TextInput,{name:"file-caption",icon:C.jsx(OV,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_caption.input_placeholder,onKeyDown:a,onChange:l})})})]})},zSe=()=>{const t=Kt(),e=bt(),n=St(),r=ls(n),o=_.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(Pv(s,n))return s},[n,r]),i=_.useCallback(()=>{n.focus(),n.removeBlocks([o])},[n,o]);return!o||Lv(o,n)||!n.isEditable?null:C.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,mainTooltip:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,icon:C.jsx(bSe,{}),onClick:i})},USe=()=>{const t=Kt(),e=bt(),n=St(),[r,o]=_.useState(),i=ls(n),s=_.useMemo(()=>{if(i.length!==1)return;const u=i[0];if(Pv(u,n))return o(u.props.name),u},[n,i]),a=_.useCallback(u=>{s&&u.key==="Enter"&&(u.preventDefault(),n.updateBlock(s,{props:{name:r}}))},[r,n,s]),l=_.useCallback(u=>o(u.currentTarget.value),[]);return!s||Lv(s,n)||!n.isEditable?null:C.jsxs(e.Generic.Popover.Root,{children:[C.jsx(e.Generic.Popover.Trigger,{children:C.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_rename.tooltip[s.type]||t.formatting_toolbar.file_rename.tooltip.file,mainTooltip:t.formatting_toolbar.file_rename.tooltip[s.type]||t.formatting_toolbar.file_rename.tooltip.file,icon:C.jsx(DV,{})})}),C.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:C.jsx(e.Generic.Form.Root,{children:C.jsx(e.Generic.Form.TextInput,{name:"file-name",icon:C.jsx(DV,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_rename.input_placeholder[s.type]||t.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:a,onChange:l})})})]})},qSe=()=>{const t=Kt(),e=bt(),n=St(),r=ls(n),[o,i]=_.useState(!1);_.useEffect(()=>{i(!1)},[r]);const s=r.length===1?r[0]:void 0;return s===void 0||!Pv(s,n)||!n.isEditable?null:C.jsxs(e.Generic.Popover.Root,{opened:o,position:"bottom",children:[C.jsx(e.Generic.Popover.Trigger,{children:C.jsx(e.FormattingToolbar.Button,{className:"bn-button",onClick:()=>i(!o),isSelected:o,mainTooltip:t.formatting_toolbar.file_replace.tooltip[s.type]||t.formatting_toolbar.file_replace.tooltip.file,label:t.formatting_toolbar.file_replace.tooltip[s.type]||t.formatting_toolbar.file_replace.tooltip.file,icon:C.jsx(mSe,{})})}),C.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:C.jsx(Gz,{block:s})})]})},GSe=()=>{const t=Kt(),e=bt(),n=St(),r=ls(n),[o,i]=_.useState(()=>n.canNestBlock());qd(()=>{i(n.canNestBlock())},n);const s=_.useCallback(()=>{n.focus(),n.nestBlock()},[n]);return!_.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:C.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:s,isDisabled:!o,label:t.formatting_toolbar.nest.tooltip,mainTooltip:t.formatting_toolbar.nest.tooltip,secondaryTooltip:Ss(t.formatting_toolbar.nest.secondary_tooltip,t.generic.ctrl_shortcut),icon:C.jsx(iSe,{})})},KSe=()=>{const t=Kt(),e=bt(),n=St(),r=ls(n),[o,i]=_.useState(()=>n.canUnnestBlock());qd(()=>{i(n.canUnnestBlock())},n);const s=_.useCallback(()=>{n.focus(),n.unnestBlock()},[n]);return!_.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:C.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:s,isDisabled:!o,label:t.formatting_toolbar.unnest.tooltip,mainTooltip:t.formatting_toolbar.unnest.tooltip,secondaryTooltip:Ss(t.formatting_toolbar.unnest.secondary_tooltip,t.generic.ctrl_shortcut),icon:C.jsx(oSe,{})})},WSe=t=>[{name:t.slash_menu.paragraph.title,type:"paragraph",icon:pI,isSelected:e=>e.type==="paragraph"},{name:t.slash_menu.heading.title,type:"heading",props:{level:1},icon:Yw,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===1},{name:t.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:Xw,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===2},{name:t.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:Qw,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===3},{name:t.slash_menu.heading_4.title,type:"heading",props:{level:4},icon:Oz,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===4},{name:t.slash_menu.heading_5.title,type:"heading",props:{level:5},icon:Pz,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===5},{name:t.slash_menu.heading_6.title,type:"heading",props:{level:6},icon:Lz,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===6},{name:t.slash_menu.toggle_heading.title,type:"heading",props:{level:1,isToggleable:!0},icon:Yw,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===1&&"isToggleable"in e.props&&e.props.isToggleable},{name:t.slash_menu.toggle_heading_2.title,type:"heading",props:{level:2,isToggleable:!0},icon:Xw,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===2&&"isToggleable"in e.props&&e.props.isToggleable},{name:t.slash_menu.toggle_heading_3.title,type:"heading",props:{level:3,isToggleable:!0},icon:Qw,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===3&&"isToggleable"in e.props&&e.props.isToggleable},{name:t.slash_menu.quote.title,type:"quote",icon:Hz,isSelected:e=>e.type==="quote"},{name:t.slash_menu.toggle_list.title,type:"toggleListItem",icon:zz,isSelected:e=>e.type==="toggleListItem"},{name:t.slash_menu.bullet_list.title,type:"bulletListItem",icon:$z,isSelected:e=>e.type==="bulletListItem"},{name:t.slash_menu.numbered_list.title,type:"numberedListItem",icon:Bz,isSelected:e=>e.type==="numberedListItem"},{name:t.slash_menu.check_list.title,type:"checkListItem",icon:jz,isSelected:e=>e.type==="checkListItem"}],YSe=t=>{const e=bt(),n=Kt(),r=St(),o=ls(r),[i,s]=_.useState(r.getTextCursorPosition().block),a=_.useMemo(()=>(t.items||WSe(n)).filter(f=>f.type in r.schema.blockSchema),[r,n,t.items]),l=_.useMemo(()=>a.find(f=>f.type===i.type)!==void 0,[i.type,a]),u=_.useMemo(()=>{const f=h=>{r.focus(),r.transact(()=>{for(const p of o)r.updateBlock(p,{type:h.type,props:h.props})})};return a.map(h=>{const p=h.icon;return{text:h.name,icon:C.jsx(p,{size:16}),onClick:()=>f(h),isSelected:h.isSelected(i)}})},[i,a,r,o]);return qd(()=>{s(r.getTextCursorPosition().block)},r),!l||!r.isEditable?null:C.jsx(e.FormattingToolbar.Select,{className:"bn-select",items:u})},XSe=()=>{const t=Kt(),e=bt(),n=St(),r=_.useCallback(()=>{var o;(o=n.comments)==null||o.startPendingComment(),n.formattingToolbar.closeMenu()},[n]);return n.comments?C.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:C.jsx(Dz,{}),onClick:r}):null},QSe=()=>{const t=Kt(),e=bt(),n=St(),r=_.useCallback(()=>{n._tiptapEditor.chain().focus().addPendingComment().run()},[n]);return!n._tiptapEditor.commands.addPendingComment||!n.isEditable?null:C.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:C.jsx(Dz,{}),onClick:r})};function K2(t,e){try{const n=new URL(t,e);if(n.protocol!=="javascript:")return n.href}catch{}return"#"}const ZSe=()=>{const t=Kt(),e=bt(),n=St(),r=ls(n),o=_.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(Pv(s,n))return s},[n,r]),i=_.useCallback(()=>{o&&o.props.url&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(o.props.url).then(s=>window.open(K2(s,window.location.href))):window.open(K2(o.props.url,window.location.href)))},[n,o]);return!o||Lv(o,n)?null:C.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,mainTooltip:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,icon:C.jsx(CSe,{}),onClick:i})},JSe=()=>{const t=Kt(),e=bt(),n=St(),r=ls(n),o=_.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(dbe(s,n))return s},[n,r]),i=_.useCallback(()=>{o&&n.updateBlock(o,{props:{showPreview:!o.props.showPreview}})},[n,o]);return!o||Lv(o,n)||!n.isEditable?null:C.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:t.formatting_toolbar.file_preview_toggle.tooltip,icon:C.jsx(pSe,{}),isSelected:o.props.showPreview,onClick:i})},exe=()=>{const t=Kt(),e=bt(),n=St(),r=ls(n),o=_.useMemo(()=>{var s;if(r.length!==1)return;const a=r[0];if(a.type==="table")return(s=n.tableHandles)==null?void 0:s.getMergeDirection(a)},[n,r]),i=_.useCallback(()=>{var s;(s=n.tableHandles)==null||s.mergeCells()},[n]);return!n.isEditable||o===void 0||!n.settings.tables.splitCells?null:C.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:t.formatting_toolbar.table_cell_merge.tooltip,icon:o==="horizontal"?C.jsx(lSe,{}):C.jsx(cSe,{}),onClick:i})},txe={left:eSe,center:ZCe,right:tSe,justify:JCe},wk=t=>{const e=bt(),n=Kt(),r=St(),o=ls(r),i=_.useMemo(()=>{var l;const u=o[0];if(D2("textAlignment",u,r))return u.props.textAlignment;if(u.type==="table"){const f=(l=r.tableHandles)==null?void 0:l.getCellSelection();if(!f)return;const h=f.cells.map(({row:g,col:v})=>Od(u.content.rows[g].cells[v]).props.textAlignment),p=h[0];if(h.every(g=>g===p))return p}},[r,o]),s=_.useCallback(l=>{var u;r.focus();for(const f of o)if(Sp("textAlignment",f.type,r))r.updateBlock(f,{props:{textAlignment:l}});else if(f.type==="table"){const h=(u=r.tableHandles)==null?void 0:u.getCellSelection();if(!h)continue;const p=f.content.rows.map(g=>({...g,cells:g.cells.map(v=>Od(v))}));h.cells.forEach(({row:g,col:v})=>{p[g].cells[v].props.textAlignment=l}),r.updateBlock(f,{type:"table",content:{...f.content,type:"tableContent",rows:p}}),r.setTextCursorPosition(f)}},[r,o]);if(!_.useMemo(()=>!!o.find(l=>"textAlignment"in l.props||l.type==="table"&&l.children),[o])||!r.isEditable)return null;const a=txe[t.textAlignment];return C.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${t.textAlignment.slice(0,1).toUpperCase()+t.textAlignment.slice(1)}`,onClick:()=>s(t.textAlignment),isSelected:i===t.textAlignment,label:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,mainTooltip:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,icon:C.jsx(a,{})})},Wz=t=>[C.jsx(YSe,{items:t},"blockTypeSelect"),C.jsx(exe,{},"tableCellMergeButton"),C.jsx(FSe,{},"fileCaptionButton"),C.jsx(qSe,{},"replaceFileButton"),C.jsx(USe,{},"fileRenameButton"),C.jsx(zSe,{},"fileDeleteButton"),C.jsx(ZSe,{},"fileDownloadButton"),C.jsx(JSe,{},"filePreviewButton"),C.jsx(jb,{basicTextStyle:"bold"},"boldStyleButton"),C.jsx(jb,{basicTextStyle:"italic"},"italicStyleButton"),C.jsx(jb,{basicTextStyle:"underline"},"underlineStyleButton"),C.jsx(jb,{basicTextStyle:"strike"},"strikeStyleButton"),C.jsx(wk,{textAlignment:"left"},"textAlignLeftButton"),C.jsx(wk,{textAlignment:"center"},"textAlignCenterButton"),C.jsx(wk,{textAlignment:"right"},"textAlignRightButton"),C.jsx(BSe,{},"colorStyleButton"),C.jsx(GSe,{},"nestBlockButton"),C.jsx(KSe,{},"unnestBlockButton"),C.jsx(HSe,{},"createLinkButton"),C.jsx(XSe,{},"addCommentButton"),C.jsx(QSe,{},"addTiptapCommentButton")],Yz=t=>{const e=bt();return C.jsx(e.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:t.children||Wz(t.blockTypeSelectItems)})},$V=t=>{switch(t){case"left":return"top-start";case"center":return"top";case"right":return"top-end";default:return"top-start"}},Xz=t=>{const e=_.useRef(null),n=St(),[r,o]=_.useState(()=>{const p=n.getTextCursorPosition().block;return"textAlignment"in p.props?$V(p.props.textAlignment):"top-start"});qd(()=>{const p=n.getTextCursorPosition().block;"textAlignment"in p.props?o($V(p.props.textAlignment)):o("top-start")},n);const i=ru(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),{isMounted:s,ref:a,style:l,getFloatingProps:u}=Ud(i?.show||!1,i?.referencePos||null,3e3,{placement:r,middleware:[nl(10),Bd(),ma()],onOpenChange:(p,g)=>{p||(n.formattingToolbar.closeMenu(),n.focus())},canDismiss:{enabled:!0,escapeKey:!0,outsidePress:p=>{var g;const v=(g=n._tiptapEditor)==null?void 0:g.view;return!v||!p.target?!1:!LSe(p,v.dom.parentElement)}},...t.floatingOptions}),f=_.useMemo(()=>gI([e,a]),[e,a]);if(!s||!i)return null;if(!i.show&&e.current)return C.jsx("div",{ref:f,style:l,dangerouslySetInnerHTML:{__html:e.current.innerHTML}});const h=t.formattingToolbar||Yz;return C.jsx("div",{ref:f,style:l,...u(),children:C.jsx(h,{})})},nxe=t=>{const e=bt(),n=Kt();return C.jsx(e.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:t.deleteLink,icon:C.jsx(aSe,{})})},rxe=t=>{const e=bt(),n=Kt();return C.jsxs(e.Generic.Popover.Root,{children:[C.jsx(e.Generic.Popover.Trigger,{children:C.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),C.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:C.jsx(Kz,{...t})})]})},oxe=t=>{const e=bt(),n=Kt();return C.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(K2(t.url,window.location.href),"_blank")},icon:C.jsx(SSe,{})})},ixe=t=>{const e=bt();return t.children?C.jsx(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:t.children}):C.jsxs(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:t.stopHideTimer,onMouseLeave:t.startHideTimer,children:[C.jsx(rxe,{url:t.url,text:t.text,editLink:t.editLink}),C.jsx(oxe,{url:t.url}),C.jsx(nxe,{deleteLink:t.deleteLink})]})},sxe=t=>{const e=St(),n={deleteLink:e.linkToolbar.deleteLink,editLink:e.linkToolbar.editLink,startHideTimer:e.linkToolbar.startHideTimer,stopHideTimer:e.linkToolbar.stopHideTimer},r=ru(e.linkToolbar.onUpdate.bind(e.linkToolbar)),{isMounted:o,ref:i,style:s,getFloatingProps:a}=Ud(r?.show||!1,r?.referencePos||null,4e3,{placement:"top-start",middleware:[nl(10),ma()],onOpenChange:p=>{p||(e.linkToolbar.closeMenu(),e.focus())},...t.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:u,...f}=r,h=t.linkToolbar||ixe;return C.jsx("div",{ref:i,style:s,...a(),children:C.jsx(h,{...f,...n})})};function axe(t){return xt({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(t)}const lxe=t=>{const e=bt(),n=Kt(),r=St(),o=_.useCallback(()=>{const i=t.block.content;if(i!==void 0&&Array.isArray(i)&&i.length===0)r.setTextCursorPosition(t.block),r.openSuggestionMenu("/");else{const s=r.insertBlocks([{type:"paragraph"}],t.block,"after")[0];r.setTextCursorPosition(s),r.openSuggestionMenu("/")}},[r,t.block]);return C.jsx(e.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:C.jsx(axe,{size:24,onClick:o,"data-test":"dragHandleAdd"})})};function Qz(t){return xt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function cxe(t){return xt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(t)}const uxe=t=>{const e=bt(),n=St();return!Sp("textColor",t.block.type,n)&&!Sp("backgroundColor",t.block.type,n)?null:C.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[C.jsx(e.Generic.Menu.Trigger,{sub:!0,children:C.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children})}),C.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:C.jsx(IS,{iconSize:18,text:Sp("textColor",t.block.type,n)&&D2("textColor",t.block,n)?{color:t.block.props.textColor,setColor:r=>n.updateBlock(t.block,{type:t.block.type,props:{textColor:r}})}:void 0,background:Sp("backgroundColor",t.block.type,n)&&D2("backgroundColor",t.block,n)?{color:t.block.props.backgroundColor,setColor:r=>n.updateBlock(t.block,{props:{backgroundColor:r}})}:void 0})})]})},dxe=t=>{const e=bt(),n=St();return C.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>n.removeBlocks([t.block]),children:t.children})},fxe=t=>{const e=bt(),n=St();if(t.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!t.block.content.headerRows;return C.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{const o=n.getBlock(t.block.id);o&&n.updateBlock(o,{...o,content:{...o.content,headerRows:r?void 0:1}})},children:t.children})},hxe=t=>{const e=bt(),n=St();if(t.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!t.block.content.headerCols;return C.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{n.updateBlock(t.block,{type:"table",content:{...t.block.content,type:"tableContent",headerCols:r?void 0:1}})},children:t.children})},pxe=t=>{const e=bt(),n=Kt();return C.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||C.jsxs(C.Fragment,{children:[C.jsx(dxe,{...t,children:n.drag_handle.delete_menuitem}),C.jsx(uxe,{...t,children:n.drag_handle.colors_menuitem}),C.jsx(fxe,{...t,children:n.drag_handle.header_row_menuitem}),C.jsx(hxe,{...t,children:n.drag_handle.header_column_menuitem})]})})},mxe=t=>{const e=bt(),n=Kt(),r=t.dragHandleMenu||pxe;return C.jsxs(e.Generic.Menu.Root,{onOpenChange:o=>{o?t.freezeMenu():t.unfreezeMenu()},position:"left",children:[C.jsx(e.Generic.Menu.Trigger,{children:C.jsx(e.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:o=>t.blockDragStart(o,t.block),onDragEnd:t.blockDragEnd,className:"bn-button",icon:C.jsx(Qz,{size:24,"data-test":"dragHandle"})})}),C.jsx(r,{block:t.block,children:t.children})]})},gxe=t=>{const e=bt(),n=_.useMemo(()=>{const r={"data-block-type":t.block.type};return t.block.type==="heading"&&(r["data-level"]=t.block.props.level.toString()),t.editor.schema.blockSchema[t.block.type].isFileBlock&&(t.block.props.url?r["data-url"]="true":r["data-url"]="false"),r},[t.block,t.editor.schema.blockSchema]);return C.jsx(e.SideMenu.Root,{className:"bn-side-menu",...n,children:t.children||C.jsxs(C.Fragment,{children:[C.jsx(lxe,{...t}),C.jsx(mxe,{...t})]})})},yxe=t=>{const e=St(),n={blockDragStart:e.sideMenu.blockDragStart,blockDragEnd:e.sideMenu.blockDragEnd,freezeMenu:e.sideMenu.freezeMenu,unfreezeMenu:e.sideMenu.unfreezeMenu},r=ru(e.sideMenu.onUpdate.bind(e.sideMenu)),{isMounted:o,ref:i,style:s,getFloatingProps:a}=Ud(r?.show||!1,r?.referencePos||null,1e3,{placement:"left-start",...t.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:u,...f}=r,h=t.sideMenu||gxe;return C.jsx("div",{ref:i,style:s,...a(),children:C.jsx(h,{...f,...n,editor:e})})};async function vxe(t,e){return(await Cwe(t,e)).map(({id:n,onItemClick:r})=>({id:n,onItemClick:r,icon:n}))}function bxe(t){const e=bt(),n=Kt(),{items:r,loadingState:o,selectedIndex:i,onItemClick:s,columns:a}=t,l=o==="loading-initial"||o==="loading"?C.jsx(e.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:a}):null,u=_.useMemo(()=>{const f=[];for(let h=0;h<r.length;h++){const p=r[h];f.push(C.jsx(e.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:p,id:`bn-grid-suggestion-menu-item-${h}`,isSelected:h===i,onClick:()=>s?.(p)},p.id))}return f},[e,r,s,i]);return C.jsxs(e.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:a,className:"bn-grid-suggestion-menu",children:[l,u,u.length===0&&t.loadingState==="loaded"&&C.jsx(e.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:a,children:n.suggestion_menu.no_items_title})]})}function Zz(t,e,n,r=3){const o=_.useRef(0);_.useEffect(()=>{e!==void 0&&(t.length>0?o.current=e.length:e.length-o.current>r&&n())},[n,r,t.length,e])}function Jz(t,e){const[n,r]=_.useState([]),[o,i]=_.useState(!1),s=_.useRef(void 0),a=_.useRef(void 0);return _.useEffect(()=>{const l=t;s.current=t,i(!0),e(t).then(u=>{s.current===l&&(r(u),i(!1),a.current=l)})},[t,e]),{items:n||[],usedQuery:a.current,loadingState:a.current===void 0?"loading-initial":o?"loading":"loaded"}}function wxe(t,e,n,r,o){const[i,s]=_.useState(0),a=r!==void 0&&r>1;return _.useEffect(()=>{var l;const u=f=>(f.key==="ArrowLeft"&&(f.preventDefault(),n.length&&s((i-1+n.length)%n.length)),f.key==="ArrowRight"&&(f.preventDefault(),n.length&&s((i+1+n.length)%n.length)),f.key==="ArrowUp"?(f.preventDefault(),n.length&&s((i-r+n.length)%n.length),!0):f.key==="ArrowDown"?(f.preventDefault(),n.length&&s((i+r)%n.length),!0):f.key==="Enter"&&!f.isComposing?(f.stopPropagation(),f.preventDefault(),n.length&&o?.(n[i]),!0):!1);return(l=t.domElement)==null||l.addEventListener("keydown",u,!0),()=>{var f;(f=t.domElement)==null||f.removeEventListener("keydown",u,!0)}},[t.domElement,n,i,o,r,a]),_.useEffect(()=>{s(0)},[e]),{selectedIndex:n.length===0?void 0:i}}function Cxe(t){const e=Zl().setContentEditableProps,n=St(),{getItems:r,gridSuggestionMenuComponent:o,query:i,clearQuery:s,closeMenu:a,onItemClick:l,columns:u}=t,f=_.useCallback(b=>{a(),s(),l?.(b)},[l,a,s]),{items:h,usedQuery:p,loadingState:g}=Jz(i,r);Zz(h,p,a);const{selectedIndex:v}=wxe(n,i,h,u,f);return _.useEffect(()=>(e(b=>({...b,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(b=>({...b,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),_.useEffect(()=>(e(b=>({...b,"aria-activedescendant":v?"bn-suggestion-menu-item-"+v:void 0})),()=>{e(b=>({...b,"aria-activedescendant":void 0}))}),[e,v]),C.jsx(o,{items:h,onItemClick:f,loadingState:g,selectedIndex:v,columns:u})}function Sxe(t){const e=St(),{triggerCharacter:n,gridSuggestionMenuComponent:r,columns:o,minQueryLength:i,onItemClick:s,getItems:a,floatingOptions:l}=t,u=_.useMemo(()=>s||(P=>{P.onItemClick(e)}),[e,s]),f=_.useMemo(()=>a||(async P=>await vxe(e,P)),[e,a]),h={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},p=_.useCallback(P=>e.suggestionMenus.onUpdate(n,P),[e.suggestionMenus,n]),g=ru(p),{isMounted:v,ref:b,style:E,getFloatingProps:T}=Ud(g?.show||!1,g?.referencePos||null,2e3,{placement:"bottom-start",middleware:[nl(10),ma(),cv({apply({availableHeight:P,elements:D}){Object.assign(D.floating.style,{maxHeight:`${P-10}px`})}})],onOpenChange(P){P||e.suggestionMenus.closeMenu()},...l});return!v||!g||!(g!=null&&g.ignoreQueryLength)&&i&&(g.query.startsWith(" ")||g.query.length<i)?null:C.jsx("div",{ref:b,style:E,...T(),children:C.jsx(Cxe,{query:g.query,closeMenu:h.closeMenu,clearQuery:h.clearQuery,getItems:f,columns:o,gridSuggestionMenuComponent:r||bxe,onItemClick:u})})}function xxe(t){const e=bt(),n=Kt(),{items:r,loadingState:o,selectedIndex:i,onItemClick:s}=t,a=o==="loading-initial"||o==="loading"?C.jsx(e.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,l=_.useMemo(()=>{let u;const f=[];for(let h=0;h<r.length;h++){const p=r[h];p.group!==u&&(u=p.group,f.push(C.jsx(e.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:u},u))),f.push(C.jsx(e.SuggestionMenu.Item,{className:mr("bn-suggestion-menu-item",p.size==="small"?"bn-suggestion-menu-item-small":""),item:p,id:`bn-suggestion-menu-item-${h}`,isSelected:h===i,onClick:()=>s?.(p)},p.title))}return f},[e,r,s,i]);return C.jsxs(e.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[l,l.length===0&&(t.loadingState==="loading"||t.loadingState==="loaded")&&C.jsx(e.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),a]})}function Exe(t,e){const[n,r]=_.useState(0);return{selectedIndex:n,setSelectedIndex:r,handler:o=>{if(o.key==="ArrowUp")return o.preventDefault(),t.length&&r((n-1+t.length)%t.length),!0;if(o.key==="ArrowDown")return o.preventDefault(),t.length&&r((n+1)%t.length),!0;const i=_xe(o)?o.nativeEvent.isComposing:o.isComposing;return o.key==="Enter"&&!i?(o.preventDefault(),o.stopPropagation(),t.length&&e?.(t[n]),!0):!1}}}function _xe(t){return t.nativeEvent!==void 0}function kxe(t,e,n,r,o){const{selectedIndex:i,setSelectedIndex:s,handler:a}=Exe(n,r);return _.useEffect(()=>{var l;return(l=t.domElement)==null||l.addEventListener("keydown",a,!0),()=>{var u;(u=t.domElement)==null||u.removeEventListener("keydown",a,!0)}},[t.domElement,n,i,r,o,a]),_.useEffect(()=>{s(0)},[e,s]),{selectedIndex:n.length===0?void 0:i}}function Txe(t){const e=Zl().setContentEditableProps,n=St(),{getItems:r,suggestionMenuComponent:o,query:i,clearQuery:s,closeMenu:a,onItemClick:l}=t,u=_.useCallback(v=>{a(),s(),l?.(v)},[l,a,s]),{items:f,usedQuery:h,loadingState:p}=Jz(i,r);Zz(f,h,a);const{selectedIndex:g}=kxe(n,i,f,u);return _.useEffect(()=>(e(v=>({...v,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(v=>({...v,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),_.useEffect(()=>(e(v=>({...v,"aria-activedescendant":g?"bn-suggestion-menu-item-"+g:void 0})),()=>{e(v=>({...v,"aria-activedescendant":void 0}))}),[e,g]),C.jsx(o,{items:f,onItemClick:u,loadingState:p,selectedIndex:g})}const Axe={heading:Yw,heading_2:Xw,heading_3:Qw,heading_4:Oz,heading_5:Pz,heading_6:Lz,toggle_heading:Yw,toggle_heading_2:Xw,toggle_heading_3:Qw,quote:Hz,toggle_list:zz,numbered_list:Bz,bullet_list:$z,check_list:jz,paragraph:pI,table:dSe,image:Fz,video:hSe,audio:Uz,file:hI,emoji:ESe,code_block:rSe};function Rxe(t){return hbe(t).map(e=>{const n=Axe[e.key];return{...e,icon:C.jsx(n,{size:18})}})}function Mxe(t){const e=St(),{triggerCharacter:n,suggestionMenuComponent:r,minQueryLength:o,onItemClick:i,getItems:s,floatingOptions:a}=t,l=_.useMemo(()=>i||(T=>{T.onItemClick(e)}),[e,i]),u=_.useMemo(()=>s||(async T=>pbe(Rxe(e),T)),[e,s]),f={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},h=_.useCallback(T=>e.suggestionMenus.onUpdate(n,T),[e.suggestionMenus,n]),p=ru(h),{isMounted:g,ref:v,style:b,getFloatingProps:E}=Ud(p?.show||!1,p?.referencePos||null,2e3,{placement:"bottom-start",middleware:[nl(10),ma({mainAxis:!0,crossAxis:!1}),Bd(),cv({apply({availableHeight:T,elements:P}){Object.assign(P.floating.style,{maxHeight:`${T-10}px`})}})],onOpenChange(T){T||e.suggestionMenus.closeMenu()},...a});return!g||!p||!(p!=null&&p.ignoreQueryLength)&&o&&(p.query.startsWith(" ")||p.query.length<o)?null:C.jsx("div",{ref:v,style:b,...E(),children:C.jsx(Txe,{query:p.query,closeMenu:f.closeMenu,clearQuery:f.clearQuery,getItems:u,suggestionMenuComponent:r||xxe,onItemClick:l})})}const Ixe=(t,e=.3)=>{const n=Math.floor(t)+e,r=Math.ceil(t)-e;return t>=n&&t<=r?Math.round(t):t<n?Math.floor(t):Math.ceil(t)},Nxe=t=>{const e=bt(),n=_.useRef(!1),[r,o]=_.useState(),i=_.useCallback(a=>{t.onMouseDown(),o({originalContent:t.block.content,originalCroppedContent:{rows:t.editor.tableHandles.cropEmptyRowsOrColumns(t.block,t.orientation==="addOrRemoveColumns"?"columns":"rows")},startPos:t.orientation==="addOrRemoveColumns"?a.clientX:a.clientY}),n.current=!1,a.preventDefault()},[t]),s=_.useCallback(()=>{n.current||t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns(t.block,"columns",1):t.editor.tableHandles.addRowsOrColumns(t.block,"rows",1)}})},[t.block,t.orientation,t.editor]);return _.useEffect(()=>{const a=l=>{var u,f;if(!r)throw new Error("editingState is undefined");n.current=!0;const h=(t.orientation==="addOrRemoveColumns"?l.clientX:l.clientY)-r.startPos,p=t.orientation==="addOrRemoveColumns"?((u=r.originalCroppedContent.rows[0])==null?void 0:u.cells.length)??0:r.originalCroppedContent.rows.length,g=t.orientation==="addOrRemoveColumns"?((f=r.originalContent.rows[0])==null?void 0:f.cells.length)??0:r.originalContent.rows.length,v=t.orientation==="addOrRemoveColumns"?t.block.content.rows[0].cells.length:t.block.content.rows.length,b=g+Ixe(h/(t.orientation==="addOrRemoveColumns"?XM:Y0e),.3);b>=p&&b>0&&b!==v&&(t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"columns",b-p):t.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"rows",b-p)}}),t.block.content&&t.editor.setTextCursorPosition(t.block))};return r&&window.addEventListener("mousemove",a),()=>{window.removeEventListener("mousemove",a)}},[r,t.block,t.editor,t.orientation]),_.useEffect(()=>{const a=t.onMouseUp,l=()=>{o(void 0),a()};return r&&window.addEventListener("mouseup",l),()=>{window.removeEventListener("mouseup",l)}},[r,t.onMouseUp]),t.editor.isEditable?C.jsx(e.TableHandle.ExtendButton,{className:mr("bn-extend-button",t.orientation==="addOrRemoveColumns"?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",r!==null?"bn-extend-button-editing":""),onClick:s,onMouseDown:i,children:t.children||C.jsx(ySe,{size:18,"data-test":"extendButton"})}):null},HV=t=>{const e=bt(),n=Kt(),r=St().tableHandles;return r?C.jsx(e.Generic.Menu.Item,{onClick:()=>{r.addRowOrColumn(t.index,t.orientation==="row"?{orientation:"row",side:t.side}:{orientation:"column",side:t.side})},children:n.table_handle[`add_${t.side}_menuitem`]}):null},Dxe=t=>{const e=bt(),n=Kt(),r=St().tableHandles;return r?C.jsx(e.Generic.Menu.Item,{onClick:()=>{r.removeRowOrColumn(t.index,t.orientation)},children:t.orientation==="row"?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem}):null},Oxe=t=>{const e=bt(),n=Kt(),r=St(),o=r.tableHandles,i=_.useMemo(()=>!o||!t.block?[]:t.orientation==="row"?o.getCellsAtRowHandle(t.block,t.index):o.getCellsAtColumnHandle(t.block,t.index),[t.block,t.index,t.orientation,o]),s=(l,u)=>{const f=t.block.content.rows.map(h=>({...h,cells:h.cells.map(p=>Od(p))}));i.forEach(({row:h,col:p})=>{u==="text"?f[h].cells[p].props.textColor=l:f[h].cells[p].props.backgroundColor=l}),r.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:f}}),r.setTextCursorPosition(t.block)};if(!i||!i[0]||!o||r.settings.tables.cellTextColor===!1&&r.settings.tables.cellBackgroundColor===!1)return null;const a=Od(i[0].cell);return C.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[C.jsx(e.Generic.Menu.Trigger,{sub:!0,children:C.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||n.drag_handle.colors_menuitem})}),C.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:C.jsx(IS,{iconSize:18,text:r.settings.tables.cellTextColor?{color:i.every(({cell:l})=>Pd(l)&&l.props.textColor===a.props.textColor)?a.props.textColor:"default",setColor:l=>{s(l,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:i.every(({cell:l})=>Pd(l)&&l.props.backgroundColor===a.props.backgroundColor)?a.props.backgroundColor:"default",setColor:l=>s(l,"background")}:void 0})})]})},Pxe=t=>{const e=bt(),n=Kt(),r=St();if(!r.tableHandles||t.index!==0||t.orientation!=="row"||!r.settings.tables.headers)return null;const o=!!t.block.content.headerRows;return C.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const i=r.getBlock(t.block.id);i&&r.updateBlock(i,{...i,content:{...i.content,headerRows:o?void 0:1}})},children:n.drag_handle.header_row_menuitem})},Lxe=t=>{const e=bt(),n=Kt(),r=St();if(!r.tableHandles||t.index!==0||t.orientation!=="column"||!r.settings.tables.headers)return null;const o=!!t.block.content.headerCols;return C.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const i=r.getBlock(t.block.id);i&&r.updateBlock(i,{...i,content:{...i.content,headerCols:o?void 0:1}})},children:n.drag_handle.header_column_menuitem})},Vxe=t=>{const e=bt();return C.jsx(e.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:t.children||C.jsxs(C.Fragment,{children:[C.jsx(Dxe,{orientation:t.orientation,block:t.block,index:t.index}),C.jsx(HV,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"above":"left"}),C.jsx(HV,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"below":"right"}),C.jsx(Pxe,{orientation:t.orientation,block:t.block,index:t.index}),C.jsx(Lxe,{orientation:t.orientation,block:t.block,index:t.index}),C.jsx(Oxe,{orientation:t.orientation,block:t.block,index:t.index})]})})},jxe=t=>{const e=bt(),[n,r]=_.useState(!1),o=t.tableHandleMenu||Vxe,i=_.useMemo(()=>{const s=t.editor.tableHandles;return!s||!t.block||t.block.type!=="table"?!1:t.orientation==="column"?s.getCellsAtColumnHandle(t.block,t.index).every(({cell:a})=>fh(a)===1):s.getCellsAtRowHandle(t.block,t.index).every(({cell:a})=>Zy(a)===1)},[t.block,t.editor.tableHandles,t.index,t.orientation]);return C.jsxs(e.Generic.Menu.Root,{onOpenChange:s=>{s?(t.freezeHandles(),t.hideOtherSide()):(t.unfreezeHandles(),t.showOtherSide(),t.editor.focus())},position:"right",children:[C.jsx(e.Generic.Menu.Trigger,{children:C.jsx(e.TableHandle.Root,{className:mr("bn-table-handle",n?"bn-table-handle-dragging":"",i?"":"bn-table-handle-not-draggable"),draggable:i,onDragStart:s=>{r(!0),t.dragStart(s)},onDragEnd:()=>{t.dragEnd(),r(!1)},style:t.orientation==="column"?{transform:"rotate(0.25turn)"}:void 0,children:t.children||C.jsx(Qz,{size:24,"data-test":"tableHandle"})})}),ha.createPortal(C.jsx(o,{orientation:t.orientation,block:t.block,index:t.index}),t.menuContainer)]})};function FV(t,e,n){const{refs:r,update:o,context:i,floatingStyles:s}=Pm({open:e,placement:t==="addOrRemoveColumns"?"right":"bottom",middleware:[cv({apply({rects:u,elements:f}){Object.assign(f.floating.style,t==="addOrRemoveColumns"?{height:`${u.reference.height}px`}:{width:`${u.reference.width}px`})}})]}),{isMounted:a,styles:l}=aI(i);return _.useEffect(()=>{o()},[n,o]),_.useEffect(()=>{n!==null&&r.setReference({getBoundingClientRect:()=>n})},[t,n,r]),_.useMemo(()=>({isMounted:a,ref:r.setFloating,style:{display:"flex",...l,...s}}),[s,a,r.setFloating,l])}function Bxe(t,e,n){const r=FV("addOrRemoveRows",e,n),o=FV("addOrRemoveColumns",t,n);return _.useMemo(()=>({addOrRemoveRowsButton:r,addOrRemoveColumnsButton:o}),[o,r])}function $xe(t,e,n){return n&&n.draggedCellOrientation==="row"?new DOMRect(e.x,n.mousePos,e.width,0):new DOMRect(e.x,t.y,e.width,t.height)}function Hxe(t,e,n){return n&&n.draggedCellOrientation==="col"?new DOMRect(n.mousePos,e.y,0,e.height):new DOMRect(t.x,e.y,t.width,e.height)}function Fxe(t){return new DOMRect(t.x,t.y,t.width,0)}function Ck(t,e,n,r,o){const{refs:i,update:s,context:a,floatingStyles:l}=Pm({open:e,placement:t==="row"?"left":t==="col"?"top":"bottom-end",middleware:[nl(t==="row"?-10:t==="col"?-12:{mainAxis:1,crossAxis:-1})]}),{isMounted:u,styles:f}=aI(a);return _.useEffect(()=>{s()},[n,r,s]),_.useEffect(()=>{n===null||r===null||o&&t==="cell"||i.setReference({getBoundingClientRect:()=>(t==="row"?$xe:t==="col"?Hxe:Fxe)(n,r,o)})},[o,t,n,r,i]),_.useMemo(()=>({isMounted:u,ref:i.setFloating,style:{display:"flex",...f,...l}}),[l,u,i.setFloating,f])}function zxe(t,e,n,r){const o=Ck("row",t,e,n,r),i=Ck("col",t,e,n,r),s=Ck("cell",t,e,n,r);return _.useMemo(()=>({rowHandle:o,colHandle:i,cellHandle:s}),[i,o,s])}const Uxe=t=>{var e,n;const r=bt(),o=Kt(),i=St(),s=(l,u)=>{const f=t.block.content.rows.map(h=>({...h,cells:h.cells.map(p=>Od(p))}));u==="text"?f[t.rowIndex].cells[t.colIndex].props.textColor=l:f[t.rowIndex].cells[t.colIndex].props.backgroundColor=l,i.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:f}}),i.setTextCursorPosition(t.block)},a=(n=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:n[t.colIndex];return!a||i.settings.tables.cellTextColor===!1&&i.settings.tables.cellBackgroundColor===!1?null:C.jsxs(r.Generic.Menu.Root,{position:"right",sub:!0,children:[C.jsx(r.Generic.Menu.Trigger,{sub:!0,children:C.jsx(r.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||o.drag_handle.colors_menuitem})}),C.jsx(r.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:C.jsx(IS,{iconSize:18,text:i.settings.tables.cellTextColor?{color:Pd(a)?a.props.textColor:"default",setColor:l=>s(l,"text")}:void 0,background:i.settings.tables.cellBackgroundColor?{color:Pd(a)?a.props.backgroundColor:"default",setColor:l=>s(l,"background")}:void 0})})]})},qxe=t=>{var e,n;const r=bt(),o=Kt(),i=St(),s=(n=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:n[t.colIndex];return!s||!Pd(s)||Zy(s)===1&&fh(s)===1||!i.settings.tables.splitCells?null:C.jsx(r.Generic.Menu.Item,{onClick:()=>{var a;(a=i.tableHandles)==null||a.splitCell({row:t.rowIndex,col:t.colIndex})},children:o.table_handle.split_cell_menuitem})},Gxe=t=>{const e=bt();return C.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||C.jsxs(C.Fragment,{children:[C.jsx(qxe,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),C.jsx(Uxe,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex})]})})},Kxe=t=>{const e=bt(),n=t.tableCellMenu||Gxe;return!t.editor.settings.tables.splitCells&&!t.editor.settings.tables.cellBackgroundColor&&!t.editor.settings.tables.cellTextColor?null:C.jsxs(e.Generic.Menu.Root,{onOpenChange:r=>{r?t.freezeHandles():(t.unfreezeHandles(),t.editor.focus())},position:"right",children:[C.jsx(e.Generic.Menu.Trigger,{children:C.jsx(e.Generic.Menu.Button,{className:"bn-table-cell-handle",children:t.children||C.jsx(cxe,{size:12,"data-test":"tableCellHandle"})})}),ha.createPortal(C.jsx(n,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),t.menuContainer)]})},Wxe=t=>{var e,n;const r=St(),[o,i]=_.useState(null);if(!r.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");const s={rowDragStart:r.tableHandles.rowDragStart,colDragStart:r.tableHandles.colDragStart,dragEnd:r.tableHandles.dragEnd,freezeHandles:r.tableHandles.freezeHandles,unfreezeHandles:r.tableHandles.unfreezeHandles},{freezeHandles:a,unfreezeHandles:l}=s,u=_.useCallback(()=>{a(),V(!0),D(!0)},[a]),f=_.useCallback(()=>{l(),V(!1),D(!1)},[l]),h=ru(r.tableHandles.onUpdate.bind(r.tableHandles)),p=_.useMemo(()=>{var M,B;return h!=null&&h.draggingState?{draggedCellOrientation:(M=h?.draggingState)==null?void 0:M.draggedCellOrientation,mousePos:(B=h?.draggingState)==null?void 0:B.mousePos}:void 0},[h?.draggingState,(e=h?.draggingState)==null?void 0:e.draggedCellOrientation,(n=h?.draggingState)==null?void 0:n.mousePos]),{rowHandle:g,colHandle:v,cellHandle:b}=zxe(h?.show||!1,h?.referencePosCell||null,h?.referencePosTable||null,p),{addOrRemoveColumnsButton:E,addOrRemoveRowsButton:T}=Bxe(h?.showAddOrRemoveColumnsButton||!1,h?.showAddOrRemoveRowsButton||!1,h?.referencePosTable||null),[P,D]=_.useState(!1),[z,V]=_.useState(!1);if(!h)return null;const $=t.tableHandle||jxe,O=t.extendButton||Nxe,R=t.tableCellHandle||Kxe;return C.jsxs(C.Fragment,{children:[C.jsx("div",{ref:i}),C.jsxs(uCe,{root:h.widgetContainer,children:[!P&&o&&g.isMounted&&h.rowIndex!==void 0&&C.jsx("div",{ref:g.ref,style:g.style,children:C.jsx($,{editor:r,orientation:"row",showOtherSide:()=>V(!1),hideOtherSide:()=>V(!0),index:h.rowIndex,block:h.block,dragStart:s.rowDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:o})}),!z&&o&&v.isMounted&&h.colIndex!==void 0&&C.jsx("div",{ref:v.ref,style:v.style,children:C.jsx($,{editor:r,orientation:"column",showOtherSide:()=>D(!1),hideOtherSide:()=>D(!0),index:h.colIndex,block:h.block,dragStart:s.colDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:o})}),o&&b.isMounted&&h.colIndex!==void 0&&h.rowIndex!==void 0&&C.jsx("div",{ref:b.ref,style:b.style,children:C.jsx(R,{editor:r,block:h.block,rowIndex:h.rowIndex,colIndex:h.colIndex,menuContainer:o,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles})}),C.jsx("div",{ref:T.ref,style:T.style,children:C.jsx(O,{editor:r,orientation:"addOrRemoveRows",block:h.block,onMouseDown:u,onMouseUp:f})}),C.jsx("div",{ref:E.ref,style:E.style,children:C.jsx(O,{editor:r,orientation:"addOrRemoveColumns",block:h.block,onMouseDown:u,onMouseUp:f})})]})]})};function Yxe(t){const e=St();if(!e)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return C.jsxs(C.Fragment,{children:[t.formattingToolbar!==!1&&C.jsx(Xz,{}),t.linkToolbar!==!1&&C.jsx(sxe,{}),t.slashMenu!==!1&&C.jsx(Mxe,{triggerCharacter:"/"}),t.emojiPicker!==!1&&C.jsx(Sxe,{triggerCharacter:":",columns:10,minQueryLength:2}),t.sideMenu!==!1&&C.jsx(yxe,{}),e.filePanel&&t.filePanel!==!1&&C.jsx(PSe,{}),e.tableHandles&&t.tableHandles!==!1&&C.jsx(Wxe,{}),e.comments&&t.comments!==!1&&C.jsxs(C.Fragment,{children:[C.jsx(HCe,{}),C.jsx(NSe,{})]})]})}const eU=()=>{const t=_.useMemo(()=>{var s;return(s=window.matchMedia)==null?void 0:s.call(window,"(prefers-color-scheme: dark)")},[]),e=_.useMemo(()=>{var s;return(s=window.matchMedia)==null?void 0:s.call(window,"(prefers-color-scheme: light)")},[]),n=t?.matches,r=e?.matches,[o,i]=_.useState(n?"dark":r?"light":"no-preference");return _.useEffect(()=>{i(n?"dark":r?"light":"no-preference")},[n,r]),_.useEffect(()=>{if(typeof t?.addEventListener=="function"){const s=({matches:l})=>l&&i("dark"),a=({matches:l})=>l&&i("light");return t?.addEventListener("change",s),e?.addEventListener("change",a),()=>{t?.removeEventListener("change",s),e?.removeEventListener("change",a)}}else{const s=()=>i(t.matches?"dark":e.matches?"light":"no-preference");return t?.addEventListener("change",s),e?.addEventListener("change",s),()=>{t?.removeEventListener("change",s),e?.removeEventListener("change",s)}}},[t,e]),o},tU=_.createContext(void 0);function Xxe(){return _.useContext(tU)}function Qxe(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:ha.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}const Zxe=({contentComponent:t})=>{const e=_.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return C.jsx(C.Fragment,{children:Object.values(e)})},Jxe=_.forwardRef((t,e)=>{const[n,r]=_.useState();return _.useImperativeHandle(e,()=>(o,i)=>{ha.flushSync(()=>{r({node:o,container:i})}),r(void 0)},[]),C.jsx(C.Fragment,{children:n&&ha.createPortal(n.node,n.container)})}),zV=()=>{};function eEe(t,e){const{editor:n,className:r,theme:o,children:i,editable:s,onSelectionChange:a,onChange:l,formattingToolbar:u,linkToolbar:f,slashMenu:h,emojiPicker:p,sideMenu:g,filePanel:v,tableHandles:b,comments:E,autoFocus:T,renderEditor:P=!n.headless,...D}=t,[z,V]=_.useState(),$=Zl(),O=eU(),R=$?.colorSchemePreference||O,M=o||(R==="dark"?"dark":"light");uI(l||zV,n),lI(a||zV,n),_.useEffect(()=>{n.isEditable=s!==!1},[s,n]);const B=_.useCallback(F=>{n.elementRenderer=F},[n]),q=_.useMemo(()=>({...$,editor:n,setContentEditableProps:V}),[$,n]),K=_.useMemo(()=>({editorProps:{autoFocus:T,contentEditableProps:z},defaultUIProps:{formattingToolbar:u,linkToolbar:f,slashMenu:h,emojiPicker:p,sideMenu:g,filePanel:v,tableHandles:b,comments:E}}),[T,z,u,f,h,p,g,v,b,E]);return C.jsx(Rz.Provider,{value:q,children:C.jsxs(tU.Provider,{value:K,children:[C.jsx(Jxe,{ref:B}),C.jsx(tEe,{className:r,renderEditor:P,editorColorScheme:M,ref:e,...D,children:i})]})})}const tEe=Pe.forwardRef(({className:t,renderEditor:e,editorColorScheme:n,children:r,...o},i)=>C.jsx("div",{className:mr("bn-container",n,t),"data-color-scheme":n,...o,ref:i,children:e?C.jsx(rEe,{children:r}):r})),nEe=Pe.forwardRef(eEe),rEe=t=>{const e=Xxe(),n=St(),r=_.useMemo(()=>Qxe(),[]),o=_.useCallback(i=>{n.mount(i,r)},[n,r]);return C.jsxs(C.Fragment,{children:[C.jsx(Zxe,{contentComponent:r}),C.jsx(oEe,{...e.editorProps,...t,mount:o}),C.jsx(Yxe,{...e.defaultUIProps}),t.children]})},oEe=t=>{const{autoFocus:e,mount:n,contentEditableProps:r}=t;return C.jsx("div",{"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":e,ref:n,...r})};function UV(t,e){let n;const r=document.createElement("div");let o;if(e!=null&&e.elementRenderer)e.elementRenderer(t(l=>n=l||void 0),r);else{if(!(e!=null&&e.headless))throw new Error("elementRenderer not available, expected headless editor");o=k6.createRoot(r),ha.flushSync(()=>{o.render(t(l=>n=l||void 0))})}if(!r.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};n?.setAttribute("data-tmp-find","true");const i=r.cloneNode(!0),s=i.firstElementChild,a=i.querySelector("[data-tmp-find]");return a?.removeAttribute("data-tmp-find"),o?.unmount(),{dom:s,contentDOM:a||void 0}}function Sk(t){var e;return C.jsx(RCe,{onDragOver:n=>n.preventDefault(),...Object.fromEntries(Object.entries(t.domAttributes||{}).filter(([n])=>n!=="class")),className:mr("bn-block-content",((e=t.domAttributes)==null?void 0:e.class)||""),"data-content-type":t.blockType,...Object.fromEntries(Object.entries(t.blockProps).filter(([n,r])=>{const o=t.propSchema[n];return!BM.includes(n)&&r!==o.default}).map(([n,r])=>[Uw(n),r])),"data-file-block":t.isFileBlock===!0||void 0,children:t.children})}function NS(t,e){const n=Os({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return Iv(t.propSchema)},parseHTML(){return lF(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return Kg({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return r=>{const o=PCe(i=>{var s;const a=this.options.editor,l=xS(i.getPos,a,this.editor,t.type),u=((s=this.options.domAttributes)==null?void 0:s.blockContent)||{},f=Az().nodeViewContentRef;if(!f)throw new Error("nodeViewContentRef is not set");const h=e.render;return C.jsx(Sk,{blockType:l.type,blockProps:l.props,propSchema:t.propSchema,isFileBlock:t.isFileBlock,domAttributes:u,children:C.jsx(h,{block:l,editor:a,contentRef:p=>{f(p),p&&(p.className=mr("bn-inline-content",p.className))}})})},{className:"bn-react-node-view-renderer"})(r);return t.isSelectable===!1&&aF(o,this.editor),o}}});return $M(t,{node:n,toInternalHTML:(r,o)=>{var i;const s=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{},a=e.render;return UV(l=>C.jsx(Sk,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:s,children:C.jsx(a,{block:r,editor:o,contentRef:u=>{l(u),u&&(u.className=mr("bn-inline-content",u.className))}})}),o)},toExternalHTML:(r,o)=>{var i;const s=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{},a=e.toExternalHTML||e.render;return UV(l=>C.jsx(Sk,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:s,children:C.jsx(a,{block:r,editor:o,contentRef:u=>{l(u),u&&(u.className=mr("bn-inline-content",u.className))}})}),o)}})}function yI(t){const e=St(),[n,r]=_.useState("loading"),[o,i]=_.useState();if(_.useEffect(()=>{let s=!0;return(async()=>{let a="";r("loading");try{a=e.resolveFileUrl?await e.resolveFileUrl(t):t}catch{r("error");return}s&&(r("loaded"),i(a))})(),()=>{s=!1}},[e,t]),n!=="loaded")return{loadingState:n};if(!o)throw new Error("Finished fetching file but did not get download URL.");return{loadingState:n,downloadUrl:o}}const vI=t=>C.jsxs("figure",{children:[t.children,C.jsx("figcaption",{children:t.caption})]});function iEe(t){const e=St();_.useEffect(()=>e.onUploadEnd(t),[t,e])}function sEe(t){const e=St();_.useEffect(()=>e.onUploadStart(t),[t,e])}function nU(t){const[e,n]=_.useState(!1);return sEe(r=>{r===t&&n(!0)}),iEe(r=>{r===t&&n(!1)}),e}const aEe=t=>{const e=Kt(),n=_.useCallback(o=>{o.preventDefault()},[]),r=_.useCallback(()=>{t.editor.transact(o=>o.setMeta(t.editor.filePanel.plugins[0],{block:t.block}))},[t.block,t.editor]);return C.jsxs("div",{className:"bn-add-file-button",onMouseDown:n,onClick:r,children:[C.jsx("div",{className:"bn-add-file-button-icon",children:t.buttonIcon||C.jsx(hI,{size:24})}),C.jsx("div",{className:"bn-add-file-button-text",children:t.buttonText||e.file_blocks.file.add_button_text})]})},lEe=t=>C.jsxs("div",{className:"bn-file-name-with-icon",contentEditable:!1,draggable:!1,children:[C.jsx("div",{className:"bn-file-icon",children:C.jsx(hI,{size:24})}),C.jsx("p",{className:"bn-file-name",children:t.block.props.name})]}),bI=t=>{const e=nU(t.block.id);return C.jsx("div",{className:"bn-file-block-content-wrapper",onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,style:t.style,children:e?C.jsx("div",{className:"bn-file-loading-preview",children:"Loading..."}):t.block.props.url===""?C.jsx(aEe,{...t}):C.jsxs(C.Fragment,{children:[t.block.props.showPreview===!1||!t.children?C.jsx(lEe,{...t}):t.children,t.block.props.caption&&C.jsx("p",{className:"bn-file-caption",children:t.block.props.caption})]})})},DS=t=>C.jsxs("div",{children:[t.children,C.jsx("p",{children:t.caption})]}),cEe=t=>{const e=yI(t.block.props.url);return C.jsx("audio",{className:"bn-audio",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},uEe=t=>{if(!t.block.props.url)return C.jsx("p",{children:"Add audio"});const e=t.block.props.showPreview?C.jsx("audio",{src:t.block.props.url}):C.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?C.jsx(vI,{caption:t.block.props.caption,children:e}):C.jsx(DS,{caption:t.block.props.caption,children:e}):e},dEe=t=>C.jsx(bI,{...t,buttonText:t.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:C.jsx(Uz,{size:24}),children:C.jsx(cEe,{...t})});NS(EF,{render:dEe,parse:_F,toExternalHTML:uEe});const fEe=t=>{if(!t.block.props.url)return C.jsx("p",{children:"Add file"});const e=C.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?C.jsx(DS,{caption:t.block.props.caption,children:e}):e},hEe=t=>C.jsx(bI,{...t});NS(kF,{render:hEe,parse:TF,toExternalHTML:fEe});const rU=t=>{const[e,n]=_.useState(void 0),[r,o]=_.useState(t.block.props.previewWidth),[i,s]=_.useState(!1),a=_.useRef(null);_.useEffect(()=>{const g=b=>{var E,T;let P;t.block.props.textAlignment==="center"?e.handleUsed==="left"?P=e.initialWidth+(e.initialClientX-b.clientX)*2:P=e.initialWidth+(b.clientX-e.initialClientX)*2:e.handleUsed==="left"?P=e.initialWidth+e.initialClientX-b.clientX:P=e.initialWidth+b.clientX-e.initialClientX,o(Math.min(Math.max(P,64),((T=(E=t.editor.domElement)==null?void 0:E.firstElementChild)==null?void 0:T.clientWidth)||Number.MAX_VALUE))},v=()=>{n(void 0),t.editor.updateBlock(t.block,{props:{previewWidth:r}})};return e&&(window.addEventListener("mousemove",g),window.addEventListener("mouseup",v)),()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",v)}},[t,e,r]);const l=_.useCallback(()=>{t.editor.isEditable&&s(!0)},[t.editor.isEditable]),u=_.useCallback(()=>{s(!1)},[]),f=_.useCallback(g=>{g.preventDefault(),n({handleUsed:"left",initialWidth:a.current.clientWidth,initialClientX:g.clientX})},[]),h=_.useCallback(g=>{g.preventDefault(),n({handleUsed:"right",initialWidth:a.current.clientWidth,initialClientX:g.clientX})},[]),p=nU(t.block.id);return C.jsx(bI,{...t,onMouseEnter:l,onMouseLeave:u,style:t.block.props.url&&!p&&t.block.props.showPreview?{width:r?`${r}px`:"fit-content"}:void 0,children:C.jsxs("div",{className:"bn-visual-media-wrapper",ref:a,children:[t.children,(i||e)&&C.jsxs(C.Fragment,{children:[C.jsx("div",{className:"bn-resize-handle",style:{left:"4px"},onMouseDown:f}),C.jsx("div",{className:"bn-resize-handle",style:{right:"4px"},onMouseDown:h})]})]})})},pEe=t=>{const e=yI(t.block.props.url);return C.jsx("img",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,alt:t.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1})},mEe=t=>{if(!t.block.props.url)return C.jsx("p",{children:"Add image"});const e=t.block.props.showPreview?C.jsx("img",{src:t.block.props.url,alt:t.block.props.name||t.block.props.caption||"BlockNote image",width:t.block.props.previewWidth}):C.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?C.jsx(vI,{caption:t.block.props.caption,children:e}):C.jsx(DS,{caption:t.block.props.caption,children:e}):e},gEe=t=>C.jsx(rU,{...t,buttonText:t.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:C.jsx(Fz,{size:24}),children:C.jsx(pEe,{...t})});NS(IF,{render:gEe,parse:NF,toExternalHTML:mEe});const yEe=t=>{const e=yI(t.block.props.url);return C.jsx("video",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},vEe=t=>{if(!t.block.props.url)return C.jsx("p",{children:"Add video"});const e=t.block.props.showPreview?C.jsx("video",{src:t.block.props.url}):C.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?C.jsx(vI,{caption:t.block.props.caption,children:e}):C.jsx(DS,{caption:t.block.props.caption,children:e}):e},bEe=t=>C.jsx(rU,{...t,buttonText:t.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:C.jsx(gSe,{size:24}),children:C.jsx(yEe,{...t})});NS(LF,{render:bEe,parse:VF,toExternalHTML:vEe});Pe.memo(({thread:t,selectedThreadId:e,editor:n,maxCommentsBeforeCollapse:r,referenceText:o})=>{const i=_.useCallback(a=>{var l;a.target.closest(".bn-action-toolbar")||(l=n.comments)==null||l.selectThread(t.id)},[n.comments,t.id]),s=_.useCallback(a=>{var l;if(!a.relatedTarget||a.relatedTarget.closest(".bn-action-toolbar"))return;const u=a.target instanceof Node?a.target:null,f=a.relatedTarget instanceof Node?a.relatedTarget.closest(".bn-thread"):null;(!u||!f||!f.contains(u))&&((l=n.comments)==null||l.selectThread(void 0))},[n.comments]);return C.jsx(qz,{thread:t,selected:t.id===e,referenceText:o,maxCommentsBeforeCollapse:r,onFocus:i,onBlur:s,tabIndex:0})});function oU(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=n.top<r.top,i=n.bottom>r.bottom;return o&&i?"both":o?"top":i?"bottom":"none"}function Vl(t){return Object.keys(t)}function xk(t){return t&&typeof t=="object"&&!Array.isArray(t)}function wI(t,e){const n={...t},r=e;return xk(t)&&xk(e)&&Object.keys(e).forEach(o=>{xk(r[o])&&o in t?n[o]=wI(n[o],r[o]):n[o]=r[o]}),n}function wEe(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function CEe(t){return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:t.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim()}function SEe(t){const e=CEe(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function Ek(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function iU(t,{shouldScale:e=!1}={}){function n(r){if(r===0||r==="0")return`0${t}`;if(typeof r=="number"){const o=`${r/16}${t}`;return e?Ek(o):o}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(i=>n(i)).join(",");if(r.includes(" "))return r.split(" ").map(i=>n(i)).join(" ");if(r.includes(t))return e?Ek(r):r;const o=r.replace("px","");if(!Number.isNaN(Number(o))){const i=`${Number(o)/16}${t}`;return e?Ek(i):i}}return r}return n}const ze=iU("rem",{shouldScale:!0}),qV=iU("em");function OS(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}function sU(t){if(typeof t=="number")return!0;if(typeof t=="string"){if(t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return t.trim().split(/\s+/).every(r=>e.test(r))}return!1}function jv(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==_.Fragment:!1}function PS(t){const e=_.createContext(null);return[({children:o,value:i})=>C.jsx(e.Provider,{value:i,children:o}),()=>{const o=_.useContext(e);if(o===null)throw new Error(t);return o}]}function CI(t=null){const e=_.createContext(t);return[({children:o,value:i})=>C.jsx(e.Provider,{value:i,children:o}),()=>_.useContext(e)]}function GV(t,e){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(e);return`${t}-${n}`}}function Zw(t,e){let n=t;for(;(n=n.parentElement)&&!n.matches(e););return n}function xEe(t,e,n){for(let r=t-1;r>=0;r-=1)if(!e[r].disabled)return r;if(n){for(let r=e.length-1;r>-1;r-=1)if(!e[r].disabled)return r}return t}function EEe(t,e,n){for(let r=t+1;r<e.length;r+=1)if(!e[r].disabled)return r;if(n){for(let r=0;r<e.length;r+=1)if(!e[r].disabled)return r}return t}function _Ee(t,e,n){return Zw(t,n)===Zw(e,n)}function aU({parentSelector:t,siblingSelector:e,onKeyDown:n,loop:r=!0,activateOnFocus:o=!1,dir:i="rtl",orientation:s}){return a=>{n?.(a);const l=Array.from(Zw(a.currentTarget,t)?.querySelectorAll(e)||[]).filter(v=>_Ee(a.currentTarget,v,t)),u=l.findIndex(v=>a.currentTarget===v),f=EEe(u,l,r),h=xEe(u,l,r),p=i==="rtl"?h:f,g=i==="rtl"?f:h;switch(a.key){case"ArrowRight":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[p].focus(),o&&l[p].click());break}case"ArrowLeft":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[g].focus(),o&&l[g].click());break}case"ArrowUp":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),o&&l[h].click());break}case"ArrowDown":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),o&&l[f].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const v=l.length-1;!l[v].disabled&&l[v].focus();break}}}}const kEe={app:100,modal:200,popover:300,overlay:400,max:9999};function Bv(t){return kEe[t]}const TEe=()=>{};function AEe(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||TEe:n=>{n.key==="Escape"&&(t(n),e.onTrigger?.())}}function hr(t,e="size",n=!0){if(t!==void 0)return sU(t)?n?ze(t):t:`var(--${e}-${t})`}function $v(t){return hr(t,"mantine-spacing")}function Ci(t){return t===void 0?"var(--mantine-radius-default)":hr(t,"mantine-radius")}function ss(t){return hr(t,"mantine-font-size")}function REe(t){return hr(t,"mantine-line-height",!1)}function lU(t){if(t)return hr(t,"mantine-shadow",!1)}function Al(t,e){return n=>{t?.(n),e?.(n)}}function MEe(t,e,n){return n?Array.from(Zw(n,e)?.querySelectorAll(t)||[]).findIndex(r=>r===n):null}function IEe(){const[t,e]=_.useState(-1);return[t,{setHovered:e,resetHovered:()=>e(-1)}]}function NEe(t="mantine-"){return`${t}${Math.random().toString(36).slice(2,11)}`}const KV=["mousedown","touchstart"];function DEe(t,e,n){const r=_.useRef(null);return _.useEffect(()=>{const o=i=>{const{target:s}=i??{};if(Array.isArray(n)){const a=s?.hasAttribute("data-ignore-outside-clicks")||!document.body.contains(s)&&s.tagName!=="HTML";n.every(u=>!!u&&!i.composedPath().includes(u))&&!a&&t()}else r.current&&!r.current.contains(s)&&t()};return(e||KV).forEach(i=>document.addEventListener(i,o)),()=>{(e||KV).forEach(i=>document.removeEventListener(i,o))}},[r,t,n]),r}function OEe(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function PEe(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function LEe(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,o]=_.useState(n?e:PEe(t)),i=_.useRef(null);return _.useEffect(()=>{if("matchMedia"in window)return i.current=window.matchMedia(t),o(i.current.matches),OEe(i.current,s=>o(s.matches))},[t]),r}const LS=typeof document<"u"?_.useLayoutEffect:_.useEffect;function Vd(t,e){const n=_.useRef(!1);_.useEffect(()=>()=>{n.current=!1},[]),_.useEffect(()=>{if(n.current)return t();n.current=!0},e)}function VEe({opened:t,shouldReturnFocus:e=!0}){const n=_.useRef(null),r=()=>{n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&n.current?.focus({preventScroll:!0})};return Vd(()=>{let o=-1;const i=s=>{s.key==="Tab"&&window.clearTimeout(o)};return document.addEventListener("keydown",i),t?n.current=document.activeElement:e&&(o=window.setTimeout(r,10)),()=>{window.clearTimeout(o),document.removeEventListener("keydown",i)}},[t,e]),r}const jEe=/input|select|textarea|button|object/,cU="a, input, select, textarea, button, object, [tabindex]";function BEe(t){return t.style.display==="none"}function $Ee(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let n=t;for(;n&&!(n===document.body||n.nodeType===11);){if(BEe(n))return!1;n=n.parentNode}return!0}function uU(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function W2(t){const e=t.nodeName.toLowerCase(),n=!Number.isNaN(uU(t));return(jEe.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||n)&&$Ee(t)}function dU(t){const e=uU(t);return(Number.isNaN(e)||e>=0)&&W2(t)}function HEe(t){return Array.from(t.querySelectorAll(cU)).filter(dU)}function FEe(t,e){const n=HEe(t);if(!n.length){e.preventDefault();return}const r=n[e.shiftKey?0:n.length-1],o=t.getRootNode();let i=r===o.activeElement||t===o.activeElement;const s=o.activeElement;if(s.tagName==="INPUT"&&s.getAttribute("type")==="radio"&&(i=n.filter(f=>f.getAttribute("type")==="radio"&&f.getAttribute("name")===s.getAttribute("name")).includes(r)),!i)return;e.preventDefault();const l=n[e.shiftKey?n.length-1:0];l&&l.focus()}function fU(t=!0){const e=_.useRef(null),n=o=>{let i=o.querySelector("[data-autofocus]");if(!i){const s=Array.from(o.querySelectorAll(cU));i=s.find(dU)||s.find(W2)||null,!i&&W2(o)&&(i=o)}i&&i.focus({preventScroll:!0})},r=_.useCallback(o=>{t&&o!==null&&e.current!==o&&(o?(setTimeout(()=>{o.getRootNode()&&n(o)}),e.current=o):e.current=null)},[t]);return _.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>n(e.current));const o=i=>{i.key==="Tab"&&e.current&&FEe(e.current,i)};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t]),r}const zEe=Pe.useId||(()=>{});function UEe(){const t=zEe();return t?`mantine-${t.replace(/:/g,"")}`:""}function Hv(t){const e=UEe(),[n,r]=_.useState(e);return LS(()=>{r(NEe())},[]),typeof t=="string"?t:typeof window>"u"?e:n}function Jw(t,e){if(typeof t=="function")return t(e);typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function Fv(...t){const e=new Map;return n=>{if(t.forEach(r=>{const o=Jw(r,n);o&&e.set(r,o)}),e.size>0)return()=>{t.forEach(r=>{const o=e.get(r);o?o():Jw(r,null)}),e.clear()}}}function ou(...t){return _.useCallback(Fv(...t),t)}function Lm({value:t,defaultValue:e,finalValue:n,onChange:r=()=>{}}){const[o,i]=_.useState(e!==void 0?e:n),s=(a,...l)=>{i(a),r?.(a,...l)};return t!==void 0?[t,r,!0]:[o,s,!1]}function qEe(t,e){return LEe("(prefers-reduced-motion: reduce)",t,e)}function GEe(){const[t,e]=_.useState(!1),n=_.useRef(null),r=_.useCallback(()=>e(!0),[]),o=_.useCallback(()=>e(!1),[]);return _.useEffect(()=>{const i=n.current;if(i)return i.addEventListener("mouseenter",r),i.addEventListener("mouseleave",o),()=>{i?.removeEventListener("mouseenter",r),i?.removeEventListener("mouseleave",o)}},[n.current]),{ref:n,hovered:t}}function KEe(t){return t.currentTarget instanceof HTMLElement&&t.relatedTarget instanceof HTMLElement?t.currentTarget.contains(t.relatedTarget):!1}function hU({onBlur:t,onFocus:e}={}){const n=_.useRef(null),[r,o]=_.useState(!1),i=_.useRef(!1),s=u=>{o(u),i.current=u},a=u=>{i.current||(s(!0),e?.(u))},l=u=>{i.current&&!KEe(u)&&(s(!1),t?.(u))};return _.useEffect(()=>{const u=n.current;if(u)return u.addEventListener("focusin",a),u.addEventListener("focusout",l),()=>{u?.removeEventListener("focusin",a),u?.removeEventListener("focusout",l)}},[a,l]),{ref:n,focused:r}}function SI(t){const e=Pe.version;return typeof Pe.version!="string"||e.startsWith("18.")?t?.ref:t?.props?.ref}const WEe={};function YEe(t){const e={};return t.forEach(n=>{Object.entries(n).forEach(([r,o])=>{e[r]?e[r]=el(e[r],o):e[r]=o})}),e}function VS({theme:t,classNames:e,props:n,stylesCtx:r}){const i=(Array.isArray(e)?e:[e]).map(s=>typeof s=="function"?s(t,n,r):s||WEe);return YEe(i)}function eC({theme:t,styles:e,props:n,stylesCtx:r}){return(Array.isArray(e)?e:[e]).reduce((i,s)=>typeof s=="function"?{...i,...s(t,n,r)}:{...i,...s},{})}const pU=_.createContext(null);function Gd(){const t=_.useContext(pU);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function XEe(){return Gd().cssVariablesResolver}function QEe(){return Gd().classNamesPrefix}function xI(){return Gd().getStyleNonce}function ZEe(){return Gd().withStaticClasses}function JEe(){return Gd().headless}function e_e(){return Gd().stylesTransform?.sx}function t_e(){return Gd().stylesTransform?.styles}function mU(){return Gd().env||"default"}function n_e(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function r_e(t){let e=t.replace("#","");if(e.length===3){const s=e.split("");e=[s[0],s[0],s[1],s[1],s[2],s[2]].join("")}if(e.length===8){const s=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:s}}const n=parseInt(e,16),r=n>>16&255,o=n>>8&255,i=n&255;return{r,g:o,b:i,a:1}}function o_e(t){const[e,n,r,o]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:n,b:r,a:o===void 0?1:o}}function i_e(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=t.match(e);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),o=parseInt(n[2],10)/100,i=parseInt(n[3],10)/100,s=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*i-1))*o,l=r/60,u=a*(1-Math.abs(l%2-1)),f=i-a/2;let h,p,g;return l>=0&&l<1?(h=a,p=u,g=0):l>=1&&l<2?(h=u,p=a,g=0):l>=2&&l<3?(h=0,p=a,g=u):l>=3&&l<4?(h=0,p=u,g=a):l>=4&&l<5?(h=u,p=0,g=a):(h=a,p=0,g=u),{r:Math.round((h+f)*255),g:Math.round((p+f)*255),b:Math.round((g+f)*255),a:s||1}}function EI(t){return n_e(t)?r_e(t):t.startsWith("rgb")?o_e(t):t.startsWith("hsl")?i_e(t):{r:0,g:0,b:0,a:1}}function Bb(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r:n,g:r,b:o,a:i}=EI(t),s=1-e,a=l=>Math.round(l*s);return`rgba(${a(n)}, ${a(r)}, ${a(o)}, ${i})`}function tv(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function _k(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function s_e(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function a_e(t){if(t.startsWith("oklch("))return(s_e(t)||0)/100;const{r:e,g:n,b:r}=EI(t),o=e/255,i=n/255,s=r/255,a=_k(o),l=_k(i),u=_k(s);return .2126*a+.7152*l+.0722*u}function Pg(t,e=.179){return t.startsWith("var(")?!1:a_e(t)>e}function Vm({color:t,theme:e,colorScheme:n}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:n==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Pg(n==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:n==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Pg(n==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Pg(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[r,o]=t.split("."),i=o?Number(o):void 0,s=r in e.colors;if(s){const a=i!==void 0?e.colors[r][i]:e.colors[r][tv(e,n||"light")];return{color:r,value:a,shade:i,isThemeColor:s,isLight:Pg(a,e.luminanceThreshold),variable:o?`--mantine-color-${r}-${i}`:`--mantine-color-${r}-filled`}}return{color:t,value:t,isThemeColor:s,isLight:Pg(t,e.luminanceThreshold),shade:i,variable:void 0}}function Ul(t,e){const n=Vm({color:t||e.primaryColor,theme:e});return n.variable?`var(${n.variable})`:t}function Y2(t,e){const n={from:t?.from||e.defaultGradient.from,to:t?.to||e.defaultGradient.to,deg:t?.deg??e.defaultGradient.deg??0},r=Ul(n.from,e),o=Ul(n.to,e);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function xl(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const i=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${i}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r:n,g:r,b:o}=EI(t);return`rgba(${n}, ${r}, ${o}, ${e})`}const lp=xl,l_e=({color:t,theme:e,variant:n,gradient:r,autoContrast:o})=>{const i=Vm({color:t,theme:e}),s=typeof o=="boolean"?o:e.autoContrast;if(n==="filled"){const a=s&&i.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return i.isThemeColor?i.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:a,border:`${ze(1)} solid transparent`}:{background:`var(--mantine-color-${i.color}-${i.shade})`,hover:`var(--mantine-color-${i.color}-${i.shade===9?8:i.shade+1})`,color:a,border:`${ze(1)} solid transparent`}:{background:t,hover:Bb(t,.1),color:a,border:`${ze(1)} solid transparent`}}if(n==="light"){if(i.isThemeColor){if(i.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${ze(1)} solid transparent`};const a=e.colors[i.color][i.shade];return{background:xl(a,.1),hover:xl(a,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${ze(1)} solid transparent`}}return{background:xl(t,.1),hover:xl(t,.12),color:t,border:`${ze(1)} solid transparent`}}if(n==="outline")return i.isThemeColor?i.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${ze(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:xl(e.colors[i.color][i.shade],.05),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${ze(1)} solid var(--mantine-color-${i.color}-${i.shade})`}:{background:"transparent",hover:xl(t,.05),color:t,border:`${ze(1)} solid ${t}`};if(n==="subtle"){if(i.isThemeColor){if(i.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${ze(1)} solid transparent`};const a=e.colors[i.color][i.shade];return{background:"transparent",hover:xl(a,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${ze(1)} solid transparent`}}return{background:"transparent",hover:xl(t,.12),color:t,border:`${ze(1)} solid transparent`}}return n==="transparent"?i.isThemeColor?i.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${ze(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${ze(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${ze(1)} solid transparent`}:n==="white"?i.isThemeColor?i.shade===void 0?{background:"var(--mantine-color-white)",hover:Bb(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${ze(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Bb(e.white,.01),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${ze(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:Bb(e.white,.01),color:t,border:`${ze(1)} solid transparent`}:n==="gradient"?{background:Y2(r,e),hover:Y2(r,e),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${ze(1)} solid var(--mantine-color-default-border)`}:{}},c_e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},WV="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",_I={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:c_e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:l_e,autoContrast:!1,luminanceThreshold:.3,fontFamily:WV,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:WV,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:ze(34),lineHeight:"1.3"},h2:{fontSize:ze(26),lineHeight:"1.35"},h3:{fontSize:ze(22),lineHeight:"1.4"},h4:{fontSize:ze(18),lineHeight:"1.45"},h5:{fontSize:ze(16),lineHeight:"1.5"},h6:{fontSize:ze(14),lineHeight:"1.5"}}},fontSizes:{xs:ze(12),sm:ze(14),md:ze(16),lg:ze(18),xl:ze(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:ze(2),sm:ze(4),md:ze(8),lg:ze(16),xl:ze(32)},spacing:{xs:ze(10),sm:ze(12),md:ze(16),lg:ze(20),xl:ze(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), 0 ${ze(1)} ${ze(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(10)} ${ze(15)} ${ze(-5)}, rgba(0, 0, 0, 0.04) 0 ${ze(7)} ${ze(7)} ${ze(-5)}`,md:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(20)} ${ze(25)} ${ze(-5)}, rgba(0, 0, 0, 0.04) 0 ${ze(10)} ${ze(10)} ${ze(-5)}`,lg:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(28)} ${ze(23)} ${ze(-7)}, rgba(0, 0, 0, 0.04) 0 ${ze(12)} ${ze(12)} ${ze(-7)}`,xl:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(36)} ${ze(28)} ${ze(-7)}, rgba(0, 0, 0, 0.04) 0 ${ze(17)} ${ze(17)} ${ze(-7)}`},other:{},components:{}};function YV(t){return t==="auto"||t==="dark"||t==="light"}function u_e({key:t="mantine-color-scheme-value"}={}){let e;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(t);return YV(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(t,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{e=r=>{r.storageArea===window.localStorage&&r.key===t&&YV(r.newValue)&&n(r.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const d_e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",XV="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function kk(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function QV(t){if(!(t.primaryColor in t.colors))throw new Error(d_e);if(typeof t.primaryShade=="object"&&(!kk(t.primaryShade.dark)||!kk(t.primaryShade.light)))throw new Error(XV);if(typeof t.primaryShade=="number"&&!kk(t.primaryShade))throw new Error(XV)}function f_e(t,e){if(!e)return QV(t),t;const n=wI(t,e);return e.fontFamily&&!e.headings?.fontFamily&&(n.headings.fontFamily=e.fontFamily),QV(n),n}const kI=_.createContext(null),h_e=()=>_.useContext(kI)||_I;function Ps(){const t=_.useContext(kI);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function gU({theme:t,children:e,inherit:n=!0}){const r=h_e(),o=_.useMemo(()=>f_e(n?r:_I,t),[t,r,n]);return C.jsx(kI.Provider,{value:o,children:e})}gU.displayName="@mantine/core/MantineThemeProvider";function p_e(){const t=Ps(),e=xI(),n=Vl(t.breakpoints).reduce((r,o)=>{const i=t.breakpoints[o].includes("px"),s=SEe(t.breakpoints[o]),a=i?`${s-.1}px`:qV(s-.1),l=i?`${s}px`:qV(s);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${o} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${o} {display: none !important;}}`},"");return C.jsx("style",{"data-mantine-styles":"classes",nonce:e?.(),dangerouslySetInnerHTML:{__html:n}})}function Tk(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join("")}function Lg(t,e){return(Array.isArray(t)?t:[t]).reduce((r,o)=>`${o}{${r}}`,e)}function m_e(t,e){const n=Tk(t.variables),r=n?Lg(e,n):"",o=Tk(t.dark),i=Tk(t.light),s=o?Lg(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,o):"",a=i?Lg(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,i):"";return`${r}${s}${a}`}function yU({color:t,theme:e,autoContrast:n}){return(typeof n=="boolean"?n:e.autoContrast)&&Vm({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function ZV(t,e){return yU({color:t.colors[t.primaryColor][tv(t,e)],theme:t,autoContrast:null})}function $b({theme:t,color:e,colorScheme:n,name:r=e,withColorValues:o=!0}){if(!t.colors[e])return{};if(n==="light"){const a=tv(t,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:lp(t.colors[e][a],.1),[`--mantine-color-${r}-light-hover`]:lp(t.colors[e][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:lp(t.colors[e][a],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...l}:l}const i=tv(t,"dark"),s={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${i})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${i===9?8:i+1})`,[`--mantine-color-${r}-light`]:lp(t.colors[e][Math.max(0,i-2)],.15),[`--mantine-color-${r}-light-hover`]:lp(t.colors[e][Math.max(0,i-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(i-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(i-4,0)})`,[`--mantine-color-${r}-outline-hover`]:lp(t.colors[e][Math.max(i-4,0)],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...s}:s}function g_e(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function cp(t,e,n){Vl(e).forEach(r=>Object.assign(t,{[`--mantine-${n}-${r}`]:e[r]}))}const vU=t=>{const e=tv(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:ze(t.defaultRadius),r={variables:{"--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":ZV(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":ZV(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};cp(r.variables,t.breakpoints,"breakpoint"),cp(r.variables,t.spacing,"spacing"),cp(r.variables,t.fontSizes,"font-size"),cp(r.variables,t.lineHeights,"line-height"),cp(r.variables,t.shadows,"shadow"),cp(r.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((i,s)=>{r.variables[`--mantine-primary-color-${s}`]=`var(--mantine-color-${t.primaryColor}-${s})`}),Vl(t.colors).forEach(i=>{const s=t.colors[i];if(g_e(s)){Object.assign(r.light,$b({theme:t,name:s.name,color:s.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,$b({theme:t,name:s.name,color:s.dark,colorScheme:"dark",withColorValues:!0}));return}s.forEach((a,l)=>{r.variables[`--mantine-color-${i}-${l}`]=a}),Object.assign(r.light,$b({theme:t,color:i,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,$b({theme:t,color:i,colorScheme:"dark",withColorValues:!1}))});const o=t.headings.sizes;return Vl(o).forEach(i=>{r.variables[`--mantine-${i}-font-size`]=o[i].fontSize,r.variables[`--mantine-${i}-line-height`]=o[i].lineHeight,r.variables[`--mantine-${i}-font-weight`]=o[i].fontWeight||t.headings.fontWeight}),r};function y_e({theme:t,generator:e}){const n=vU(t),r=e?.(t);return r?wI(n,r):n}const Ak=vU(_I);function v_e(t){const e={variables:{},light:{},dark:{}};return Vl(t.variables).forEach(n=>{Ak.variables[n]!==t.variables[n]&&(e.variables[n]=t.variables[n])}),Vl(t.light).forEach(n=>{Ak.light[n]!==t.light[n]&&(e.light[n]=t.light[n])}),Vl(t.dark).forEach(n=>{Ak.dark[n]!==t.dark[n]&&(e.dark[n]=t.dark[n])}),e}function b_e(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function bU({cssVariablesSelector:t,deduplicateCssVariables:e}){const n=Ps(),r=xI(),o=XEe(),i=y_e({theme:n,generator:o}),s=t===":root"&&e,a=s?v_e(i):i,l=m_e(a,t);return l?C.jsx("style",{"data-mantine-styles":!0,nonce:r?.(),dangerouslySetInnerHTML:{__html:`${l}${s?"":b_e(t)}`}}):null}bU.displayName="@mantine/CssVariables";function w_e(){const t=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||t(...e)}}function up(t,e){const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,r=t!=="auto"?t:n?"dark":"light";e()?.setAttribute("data-mantine-color-scheme",r)}function C_e({manager:t,defaultColorScheme:e,getRootElement:n,forceColorScheme:r}){const o=_.useRef(null),[i,s]=_.useState(()=>t.get(e)),a=r||i,l=_.useCallback(f=>{r||(up(f,n),s(f),t.set(f))},[t.set,a,r]),u=_.useCallback(()=>{s(e),up(e,n),t.clear()},[t.clear,e]);return _.useEffect(()=>(t.subscribe(l),t.unsubscribe),[t.subscribe,t.unsubscribe]),LS(()=>{up(t.get(e),n)},[]),_.useEffect(()=>{if(r)return up(r,n),()=>{};r===void 0&&up(i,n),typeof window<"u"&&"matchMedia"in window&&(o.current=window.matchMedia("(prefers-color-scheme: dark)"));const f=h=>{i==="auto"&&up(h.matches?"dark":"light",n)};return o.current?.addEventListener("change",f),()=>o.current?.removeEventListener("change",f)},[i,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:u}}function S_e({respectReducedMotion:t,getRootElement:e}){LS(()=>{t&&e()?.setAttribute("data-respect-reduced-motion","true")},[t])}w_e();function wU({theme:t,children:e,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:o=!0,deduplicateCssVariables:i=!0,withCssVariables:s=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:u=u_e(),defaultColorScheme:f="light",getRootElement:h=()=>document.documentElement,cssVariablesResolver:p,forceColorScheme:g,stylesTransform:v,env:b}){const{colorScheme:E,setColorScheme:T,clearColorScheme:P}=C_e({defaultColorScheme:f,forceColorScheme:g,manager:u,getRootElement:h});return S_e({respectReducedMotion:t?.respectReducedMotion||!1,getRootElement:h}),C.jsx(pU.Provider,{value:{colorScheme:E,setColorScheme:T,clearColorScheme:P,getRootElement:h,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:p,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:v,env:b},children:C.jsxs(gU,{theme:t,children:[s&&C.jsx(bU,{cssVariablesSelector:a,deduplicateCssVariables:i}),o&&C.jsx(p_e,{}),e]})})}wU.displayName="@mantine/core/MantineProvider";function jS({classNames:t,styles:e,props:n,stylesCtx:r}){const o=Ps();return{resolvedClassNames:VS({theme:o,classNames:t,props:n,stylesCtx:r||void 0}),resolvedStyles:eC({theme:o,styles:e,props:n,stylesCtx:r||void 0})}}const x_e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function E_e({theme:t,options:e,unstyled:n}){return el(e?.focusable&&!n&&(t.focusClassName||x_e[t.focusRing]),e?.active&&!n&&t.activeClassName)}function __e({selector:t,stylesCtx:e,options:n,props:r,theme:o}){return VS({theme:o,classNames:n?.classNames,props:n?.props||r,stylesCtx:e})[t]}function JV({selector:t,stylesCtx:e,theme:n,classNames:r,props:o}){return VS({theme:n,classNames:r,props:o,stylesCtx:e})[t]}function k_e({rootSelector:t,selector:e,className:n}){return t===e?n:void 0}function T_e({selector:t,classes:e,unstyled:n}){return n?void 0:e[t]}function A_e({themeName:t,classNamesPrefix:e,selector:n,withStaticClass:r}){return r===!1?[]:t.map(o=>`${e}-${o}-${n}`)}function R_e({themeName:t,theme:e,selector:n,props:r,stylesCtx:o}){return t.map(i=>VS({theme:e,classNames:e.components[i]?.classNames,props:r,stylesCtx:o})?.[n])}function M_e({options:t,classes:e,selector:n,unstyled:r}){return t?.variant&&!r?e[`${n}--${t.variant}`]:void 0}function I_e({theme:t,options:e,themeName:n,selector:r,classNamesPrefix:o,classNames:i,classes:s,unstyled:a,className:l,rootSelector:u,props:f,stylesCtx:h,withStaticClasses:p,headless:g,transformedStyles:v}){return el(E_e({theme:t,options:e,unstyled:a||g}),R_e({theme:t,themeName:n,selector:r,props:f,stylesCtx:h}),M_e({options:e,classes:s,selector:r,unstyled:a}),JV({selector:r,stylesCtx:h,theme:t,classNames:i,props:f}),JV({selector:r,stylesCtx:h,theme:t,classNames:v,props:f}),__e({selector:r,stylesCtx:h,options:e,props:f,theme:t}),k_e({rootSelector:u,selector:r,className:l}),T_e({selector:r,classes:s,unstyled:a||g}),p&&!g&&A_e({themeName:n,classNamesPrefix:o,selector:r,withStaticClass:e?.withStaticClass}),e?.className)}function N_e({theme:t,themeName:e,props:n,stylesCtx:r,selector:o}){return e.map(i=>eC({theme:t,styles:t.components[i]?.styles,props:n,stylesCtx:r})[o]).reduce((i,s)=>({...i,...s}),{})}function X2({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...X2({style:r,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function D_e(t){return t.reduce((e,n)=>(n&&Object.keys(n).forEach(r=>{e[r]={...e[r],...OS(n[r])}}),e),{})}function O_e({vars:t,varsResolver:e,theme:n,props:r,stylesCtx:o,selector:i,themeName:s,headless:a}){return D_e([a?{}:e?.(n,r,o),...s.map(l=>n.components?.[l]?.vars?.(n,r,o)),t?.(n,r,o)])?.[i]}function P_e({theme:t,themeName:e,selector:n,options:r,props:o,stylesCtx:i,rootSelector:s,styles:a,style:l,vars:u,varsResolver:f,headless:h,withStylesTransform:p}){return{...!p&&N_e({theme:t,themeName:e,props:o,stylesCtx:i,selector:n}),...!p&&eC({theme:t,styles:a,props:o,stylesCtx:i})[n],...!p&&eC({theme:t,styles:r?.styles,props:r?.props||o,stylesCtx:i})[n],...O_e({theme:t,props:o,stylesCtx:i,vars:u,varsResolver:f,selector:n,themeName:e,headless:h}),...s===n?X2({style:l,theme:t}):null,...X2({style:r?.style,theme:t})}}function L_e({props:t,stylesCtx:e,themeName:n}){const r=Ps(),o=t_e()?.();return{getTransformedStyles:s=>o?[...s.map(l=>o(l,{props:t,theme:r,ctx:e})),...n.map(l=>o(r.components[l]?.styles,{props:t,theme:r,ctx:e}))].filter(Boolean):[],withStylesTransform:!!o}}function En({name:t,classes:e,props:n,stylesCtx:r,className:o,style:i,rootSelector:s="root",unstyled:a,classNames:l,styles:u,vars:f,varsResolver:h}){const p=Ps(),g=QEe(),v=ZEe(),b=JEe(),E=(Array.isArray(t)?t:[t]).filter(D=>D),{withStylesTransform:T,getTransformedStyles:P}=L_e({props:n,stylesCtx:r,themeName:E});return(D,z)=>({className:I_e({theme:p,options:z,themeName:E,selector:D,classNamesPrefix:g,classNames:l,classes:e,unstyled:a,className:o,rootSelector:s,props:n,stylesCtx:r,withStaticClasses:v,headless:b,transformedStyles:P([z?.styles,u])}),style:P_e({theme:p,themeName:E,selector:D,options:z,props:n,stylesCtx:r,rootSelector:s,styles:u,style:i,vars:f,varsResolver:h,headless:b,withStylesTransform:T})})}function V_e(t,e){return typeof t=="boolean"?t:e.autoContrast}function pt(t,e,n){const r=Ps(),o=r.components[t]?.defaultProps,i=typeof o=="function"?o(r):o;return{...e,...i,...OS(n)}}function Rk(t){return Vl(t).reduce((e,n)=>t[n]!==void 0?`${e}${wEe(n)}:${t[n]};`:e,"").trim()}function j_e({selector:t,styles:e,media:n,container:r}){const o=e?Rk(e):"",i=Array.isArray(n)?n.map(a=>`@media${a.query}{${t}{${Rk(a.styles)}}}`):[],s=Array.isArray(r)?r.map(a=>`@container ${a.query}{${t}{${Rk(a.styles)}}}`):[];return`${o?`${t}{${o}}`:""}${i.join("")}${s.join("")}`.trim()}function CU(t){const e=xI();return C.jsx("style",{"data-mantine-styles":"inline",nonce:e?.(),dangerouslySetInnerHTML:{__html:j_e(t)}})}function BS(t){const{m:e,mx:n,my:r,mt:o,mb:i,ml:s,mr:a,me:l,ms:u,p:f,px:h,py:p,pt:g,pb:v,pl:b,pr:E,pe:T,ps:P,bd:D,bg:z,c:V,opacity:$,ff:O,fz:R,fw:M,lts:B,ta:q,lh:K,fs:F,tt:ne,td:oe,w:j,miw:U,maw:Z,h:J,mih:Y,mah:se,bgsz:te,bgp:ie,bgr:ue,bga:ae,pos:ve,top:De,left:Ue,bottom:Oe,right:rt,inset:wt,display:tt,flex:mn,hiddenFrom:Ln,visibleFrom:$t,lightHidden:$n,darkHidden:At,sx:sn,...Jt}=t;return{styleProps:OS({m:e,mx:n,my:r,mt:o,mb:i,ml:s,mr:a,me:l,ms:u,p:f,px:h,py:p,pt:g,pb:v,pl:b,pr:E,pe:T,ps:P,bd:D,bg:z,c:V,opacity:$,ff:O,fz:R,fw:M,lts:B,ta:q,lh:K,fs:F,tt:ne,td:oe,w:j,miw:U,maw:Z,h:J,mih:Y,mah:se,bgsz:te,bgp:ie,bgr:ue,bga:ae,pos:ve,top:De,left:Ue,bottom:Oe,right:rt,inset:wt,display:tt,flex:mn,hiddenFrom:Ln,visibleFrom:$t,lightHidden:$n,darkHidden:At,sx:sn}),rest:Jt}}const B_e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function TI(t,e){const n=Vm({color:t,theme:e});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function $_e(t,e){const n=Vm({color:t,theme:e});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:TI(t,e)}function H_e(t,e){if(typeof t=="number")return ze(t);if(typeof t=="string"){const[n,r,...o]=t.split(" ").filter(s=>s.trim()!=="");let i=`${ze(n)}`;return r&&(i+=` ${r}`),o.length>0&&(i+=` ${TI(o.join(" "),e)}`),i.trim()}return t}const e6={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function F_e(t){return typeof t=="string"&&t in e6?e6[t]:t}const z_e=["h1","h2","h3","h4","h5","h6"];function U_e(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&z_e.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?ze(t):t}function q_e(t){return t}const G_e=["h1","h2","h3","h4","h5","h6"];function K_e(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&G_e.includes(t)?`var(--mantine-${t}-line-height)`:t}function W_e(t){return typeof t=="number"?ze(t):t}function Y_e(t,e){if(typeof t=="number")return ze(t);if(typeof t=="string"){const n=t.replace("-","");if(!(n in e.spacing))return ze(t);const r=`--mantine-spacing-${n}`;return t.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return t}const Mk={color:TI,textColor:$_e,fontSize:U_e,spacing:Y_e,identity:q_e,size:W_e,lineHeight:K_e,fontFamily:F_e,border:H_e};function t6(t){return t.replace("(min-width: ","").replace("em)","")}function X_e({media:t,...e}){const r=Object.keys(t).sort((o,i)=>Number(t6(o))-Number(t6(i))).map(o=>({query:o,styles:t[o]}));return{...e,media:r}}function Q_e(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function Z_e(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function J_e(t){return typeof t=="object"&&t!==null?Vl(t).filter(e=>e!=="base"):[]}function eke(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function SU({styleProps:t,data:e,theme:n}){return X_e(Vl(t).reduce((r,o)=>{if(o==="hiddenFrom"||o==="visibleFrom"||o==="sx")return r;const i=e[o],s=Array.isArray(i.property)?i.property:[i.property],a=Z_e(t[o]);if(!Q_e(t[o]))return s.forEach(u=>{r.inlineStyles[u]=Mk[i.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=J_e(t[o]);return s.forEach(u=>{a&&(r.styles[u]=Mk[i.type](a,n)),l.forEach(f=>{const h=`(min-width: ${n.breakpoints[f]})`;r.media[h]={...r.media[h],[u]:Mk[i.type](eke(t[o],f),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function xU(){return`__m__-${_.useId().replace(/:/g,"")}`}function EU(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...EU(r,e)}),{}):typeof t=="function"?t(e):t??{}}function _U(t){return t.startsWith("data-")?t:`data-${t}`}function tke(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r===void 0||r===""||r===!1||r===null||(e[_U(n)]=t[n]),e},{})}function kU(t){return t?typeof t=="string"?{[_U(t)]:!0}:Array.isArray(t)?[...t].reduce((e,n)=>({...e,...kU(n)}),{}):tke(t):null}function Q2(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...Q2(r,e)}),{}):typeof t=="function"?t(e):t??{}}function nke({theme:t,style:e,vars:n,styleProps:r}){const o=Q2(e,t),i=Q2(n,t);return{...o,...i,...r}}const TU=_.forwardRef(({component:t,style:e,__vars:n,className:r,variant:o,mod:i,size:s,hiddenFrom:a,visibleFrom:l,lightHidden:u,darkHidden:f,renderRoot:h,__size:p,...g},v)=>{const b=Ps(),E=t||"div",{styleProps:T,rest:P}=BS(g),z=e_e()?.()?.(T.sx),V=xU(),$=SU({styleProps:T,theme:b,data:B_e}),O={ref:v,style:nke({theme:b,style:e,vars:n,styleProps:$.inlineStyles}),className:el(r,z,{[V]:$.hasResponsiveStyles,"mantine-light-hidden":u,"mantine-dark-hidden":f,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":o,"data-size":sU(s)?void 0:s||void 0,size:p,...kU(i),...P};return C.jsxs(C.Fragment,{children:[$.hasResponsiveStyles&&C.jsx(CU,{selector:`.${V}`,styles:$.styles,media:$.media}),typeof h=="function"?h(O):C.jsx(E,{...O})]})});TU.displayName="@mantine/core/Box";const Lt=TU;function AU(t){return t}function rke(t){const e=t;return n=>{const r=_.forwardRef((o,i)=>C.jsx(e,{...n,...o,ref:i}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r}}function In(t){const e=_.forwardRef(t);return e.extend=AU,e.withProps=n=>{const r=_.forwardRef((o,i)=>C.jsx(e,{...n,...o,ref:i}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e}function Di(t){const e=_.forwardRef(t);return e.withProps=n=>{const r=_.forwardRef((o,i)=>C.jsx(e,{...n,...o,ref:i}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e.extend=AU,e}const oke=_.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function zv(){return _.useContext(oke)}var RU={root:"m_87cf2631"};const ike={__staticSelector:"UnstyledButton"},Sh=Di((t,e)=>{const n=pt("UnstyledButton",ike,t),{className:r,component:o="button",__staticSelector:i,unstyled:s,classNames:a,styles:l,style:u,...f}=n,h=En({name:i,props:n,classes:RU,className:r,style:u,classNames:a,styles:l,unstyled:s});return C.jsx(Lt,{...h("root",{focusable:!0}),component:o,ref:e,type:o==="button"?"button":void 0,...f})});Sh.classes=RU;Sh.displayName="@mantine/core/UnstyledButton";var MU={root:"m_515a97f8"};const ske={},AI=In((t,e)=>{const n=pt("VisuallyHidden",ske,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,...u}=n,f=En({name:"VisuallyHidden",classes:MU,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a});return C.jsx(Lt,{component:"span",ref:e,...f("root"),...u})});AI.classes=MU;AI.displayName="@mantine/core/VisuallyHidden";var IU={root:"m_1b7284a3"};const ake={},lke=(t,{radius:e,shadow:n})=>({root:{"--paper-radius":e===void 0?void 0:Ci(e),"--paper-shadow":lU(n)}}),RI=Di((t,e)=>{const n=pt("Paper",ake,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,withBorder:l,vars:u,radius:f,shadow:h,variant:p,mod:g,...v}=n,b=En({name:"Paper",props:n,classes:IU,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:u,varsResolver:lke});return C.jsx(Lt,{ref:e,mod:[{"data-with-border":l},g],...b("root"),variant:p,...v})});RI.classes=IU;RI.displayName="@mantine/core/Paper";function NU(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[n,r]=e.split("-"),o=n==="right"?"left":"right";return r===void 0?o:`${o}-${r}`}return e}function n6(t,e,n,r){return t==="center"||r==="center"?{top:e}:t==="end"?{bottom:n}:t==="start"?{top:n}:{}}function r6(t,e,n,r,o){return t==="center"||r==="center"?{left:e}:t==="end"?{[o==="ltr"?"right":"left"]:n}:t==="start"?{[o==="ltr"?"left":"right"]:n}:{}}const cke={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function uke({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,arrowX:i,arrowY:s,dir:a}){const[l,u="center"]=t.split("-"),f={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[cke[l]]:r},h=-e/2;return l==="left"?{...f,...n6(u,s,n,o),right:h,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:l==="right"?{...f,...n6(u,s,n,o),left:h,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:l==="top"?{...f,...r6(u,i,n,o,a),bottom:h,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:l==="bottom"?{...f,...r6(u,i,n,o,a),top:h,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const MI=_.forwardRef(({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,visible:i,arrowX:s,arrowY:a,style:l,...u},f)=>{const{dir:h}=zv();return i?C.jsx("div",{...u,ref:f,style:{...l,...uke({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,dir:h,arrowX:s,arrowY:a})}}):null});MI.displayName="@mantine/core/FloatingArrow";var DU={root:"m_9814e45f"};const dke={zIndex:Bv("modal")},fke=(t,{gradient:e,color:n,backgroundOpacity:r,blur:o,radius:i,zIndex:s})=>({root:{"--overlay-bg":e||(n!==void 0||r!==void 0)&&xl(n||"#000",r??.6)||void 0,"--overlay-filter":o?`blur(${ze(o)})`:void 0,"--overlay-radius":i===void 0?void 0:Ci(i),"--overlay-z-index":s?.toString()}}),nv=Di((t,e)=>{const n=pt("Overlay",dke,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,fixed:u,center:f,children:h,radius:p,zIndex:g,gradient:v,blur:b,color:E,backgroundOpacity:T,mod:P,...D}=n,z=En({name:"Overlay",props:n,classes:DU,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:fke});return C.jsx(Lt,{ref:e,...z("root"),mod:[{center:f,fixed:u},P],...D,children:h})});nv.classes=DU;nv.displayName="@mantine/core/Overlay";function Ik(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}function hke({target:t,reuseTargetNode:e,...n}){if(t)return typeof t=="string"?document.querySelector(t)||Ik(n):t;if(e){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const o=Ik(n);return o.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(o),o}return Ik(n)}const pke={},OU=In((t,e)=>{const{children:n,target:r,reuseTargetNode:o,...i}=pt("Portal",pke,t),[s,a]=_.useState(!1),l=_.useRef(null);return LS(()=>(a(!0),l.current=hke({target:r,reuseTargetNode:o,...i}),Jw(e,l.current),!r&&!o&&l.current&&document.body.appendChild(l.current),()=>{!r&&!o&&l.current&&document.body.removeChild(l.current)}),[r]),!s||!l.current?null:ha.createPortal(C.jsx(C.Fragment,{children:n}),l.current)});OU.displayName="@mantine/core/Portal";const Uv=In(({withinPortal:t=!0,children:e,...n},r)=>mU()==="test"||!t?C.jsx(C.Fragment,{children:e}):C.jsx(OU,{ref:r,...n,children:e}));Uv.displayName="@mantine/core/OptionalPortal";const Vg=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${t==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),Hb={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Vg("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Vg("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Vg("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Vg("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Vg("top"),common:{transformOrigin:"top right"}}},o6={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function mke({transition:t,state:e,duration:n,timingFunction:r}){const o={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof t=="string"?t in Hb?{transitionProperty:Hb[t].transitionProperty,...o,...Hb[t].common,...Hb[t][o6[e]]}:{}:{transitionProperty:t.transitionProperty,...o,...t.common,...t[o6[e]]}}function gke({duration:t,exitDuration:e,timingFunction:n,mounted:r,onEnter:o,onExit:i,onEntered:s,onExited:a,enterDelay:l,exitDelay:u}){const f=Ps(),h=qEe(),p=f.respectReducedMotion?h:!1,[g,v]=_.useState(p?0:t),[b,E]=_.useState(r?"entered":"exited"),T=_.useRef(-1),P=_.useRef(-1),D=_.useRef(-1);function z(){window.clearTimeout(T.current),window.clearTimeout(P.current),cancelAnimationFrame(D.current)}const V=O=>{z();const R=O?o:i,M=O?s:a,B=p?0:O?t:e;v(B),B===0?(typeof R=="function"&&R(),typeof M=="function"&&M(),E(O?"entered":"exited")):D.current=requestAnimationFrame(()=>{gC.flushSync(()=>{E(O?"pre-entering":"pre-exiting")}),D.current=requestAnimationFrame(()=>{typeof R=="function"&&R(),E(O?"entering":"exiting"),T.current=window.setTimeout(()=>{typeof M=="function"&&M(),E(O?"entered":"exited")},B)})})},$=O=>{if(z(),typeof(O?l:u)!="number"){V(O);return}P.current=window.setTimeout(()=>{V(O)},O?l:u)};return Vd(()=>{$(r)},[r]),_.useEffect(()=>()=>{z()},[]),{transitionDuration:g,transitionStatus:b,transitionTimingFunction:n||"ease"}}function xh({keepMounted:t,transition:e="fade",duration:n=250,exitDuration:r=n,mounted:o,children:i,timingFunction:s="ease",onExit:a,onEntered:l,onEnter:u,onExited:f,enterDelay:h,exitDelay:p}){const g=mU(),{transitionDuration:v,transitionStatus:b,transitionTimingFunction:E}=gke({mounted:o,exitDuration:r,duration:n,timingFunction:s,onExit:a,onEntered:l,onEnter:u,onExited:f,enterDelay:h,exitDelay:p});return v===0||g==="test"?o?C.jsx(C.Fragment,{children:i({})}):t?i({display:"none"}):null:b==="exited"?t?i({display:"none"}):null:C.jsx(C.Fragment,{children:i(mke({transition:e,duration:v,state:b,timingFunction:E}))})}xh.displayName="@mantine/core/Transition";const[yke,PU]=PS("Popover component was not found in the tree");function II({children:t,active:e=!0,refProp:n="ref",innerRef:r}){const o=fU(e),i=ou(o,r);return jv(t)?_.cloneElement(t,{[n]:i}):t}function LU(t){return C.jsx(AI,{tabIndex:-1,"data-autofocus":!0,...t})}II.displayName="@mantine/core/FocusTrap";LU.displayName="@mantine/core/FocusTrapInitialFocus";II.InitialFocus=LU;var VU={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const vke={},$S=In((t,e)=>{const n=pt("PopoverDropdown",vke,t),{className:r,style:o,vars:i,children:s,onKeyDownCapture:a,variant:l,classNames:u,styles:f,...h}=n,p=PU(),g=VEe({opened:p.opened,shouldReturnFocus:p.returnFocus}),v=p.withRoles?{"aria-labelledby":p.getTargetId(),id:p.getDropdownId(),role:"dialog",tabIndex:-1}:{},b=ou(e,p.floating);return p.disabled?null:C.jsx(Uv,{...p.portalProps,withinPortal:p.withinPortal,children:C.jsx(xh,{mounted:p.opened,...p.transitionProps,transition:p.transitionProps?.transition||"fade",duration:p.transitionProps?.duration??150,keepMounted:p.keepMounted,exitDuration:typeof p.transitionProps?.exitDuration=="number"?p.transitionProps.exitDuration:p.transitionProps?.duration,children:E=>C.jsx(II,{active:p.trapFocus&&p.opened,innerRef:b,children:C.jsxs(Lt,{...v,...h,variant:l,onKeyDownCapture:AEe(()=>{p.onClose?.(),p.onDismiss?.()},{active:p.closeOnEscape,onTrigger:g,onKeyDown:a}),"data-position":p.placement,"data-fixed":p.floatingStrategy==="fixed"||void 0,...p.getStyles("dropdown",{className:r,props:n,classNames:u,styles:f,style:[{...E,zIndex:p.zIndex,top:p.y??0,left:p.x??0,width:p.width==="target"?void 0:ze(p.width)},p.resolvedStyles.dropdown,f?.dropdown,o]}),children:[s,C.jsx(MI,{ref:p.arrowRef,arrowX:p.arrowX,arrowY:p.arrowY,visible:p.withArrow,position:p.placement,arrowSize:p.arrowSize,arrowRadius:p.arrowRadius,arrowOffset:p.arrowOffset,arrowPosition:p.arrowPosition,...p.getStyles("arrow",{props:n,classNames:u,styles:f})})]})})})})});$S.classes=VU;$S.displayName="@mantine/core/PopoverDropdown";const bke={refProp:"ref",popupType:"dialog"},NI=In((t,e)=>{const{children:n,refProp:r,popupType:o,...i}=pt("PopoverTarget",bke,t);if(!jv(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=i,a=PU(),l=ou(a.reference,SI(n),e),u=a.withRoles?{"aria-haspopup":o,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return _.cloneElement(n,{...s,...u,...a.targetProps,className:el(a.targetProps.className,s.className,n.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});NI.displayName="@mantine/core/PopoverTarget";function jU({opened:t,floating:e,position:n,positionDependencies:r}){const[o,i]=_.useState(0);_.useEffect(()=>{if(e.refs.reference.current&&e.refs.floating.current&&t)return R9(e.refs.reference.current,e.refs.floating.current,e.update)},[e.refs.reference.current,e.refs.floating.current,t,o,n]),Vd(()=>{e.update()},r),Vd(()=>{i(s=>s+1)},[t])}function wke(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function Cke(t,e){const n=wke(t.middlewares),r=[nl(t.offset)];return n.shift&&r.push(Bd(typeof n.shift=="boolean"?{limiter:Zk(),padding:5}:{limiter:Zk(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?ma():ma(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?Xg():Xg(n.inline)),r.push(TA({element:t.arrowRef,padding:t.arrowOffset})),(n.size||t.width==="target")&&r.push(cv({...typeof n.size=="boolean"?{}:n.size,apply({rects:o,availableWidth:i,availableHeight:s,...a}){const u=e().refs.floating.current?.style??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:o,availableWidth:i,availableHeight:s,...a}):Object.assign(u,{maxWidth:`${i}px`,maxHeight:`${s}px`})),t.width==="target"&&Object.assign(u,{width:`${o.reference.width}px`})}})),r}function Ske(t){const[e,n]=Lm({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),r=_.useRef(e),o=()=>{e&&!t.disabled&&n(!1)},i=()=>!t.disabled&&n(!e),s=Pm({strategy:t.strategy,placement:t.position,middleware:Cke(t,()=>s)});return jU({opened:e,position:t.position,positionDependencies:t.positionDependencies||[],floating:s}),Vd(()=>{t.onPositionChange?.(s.placement)},[s.placement]),Vd(()=>{e!==r.current&&(e?t.onOpen?.():t.onClose?.()),r.current=e},[e,t.onClose,t.onOpen]),{floating:s,controlled:typeof t.opened=="boolean",opened:e,onClose:o,onToggle:i}}const xke={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Bv("popover"),__staticSelector:"Popover",width:"max-content"},Eke=(t,{radius:e,shadow:n})=>({dropdown:{"--popover-radius":e===void 0?void 0:Ci(e),"--popover-shadow":lU(n)}});function Kd(t){const e=pt("Popover",xke,t),{children:n,position:r,offset:o,onPositionChange:i,positionDependencies:s,opened:a,transitionProps:l,onExitTransitionEnd:u,onEnterTransitionEnd:f,width:h,middlewares:p,withArrow:g,arrowSize:v,arrowOffset:b,arrowRadius:E,arrowPosition:T,unstyled:P,classNames:D,styles:z,closeOnClickOutside:V,withinPortal:$,portalProps:O,closeOnEscape:R,clickOutsideEvents:M,trapFocus:B,onClose:q,onDismiss:K,onOpen:F,onChange:ne,zIndex:oe,radius:j,shadow:U,id:Z,defaultOpened:J,__staticSelector:Y,withRoles:se,disabled:te,returnFocus:ie,variant:ue,keepMounted:ae,vars:ve,floatingStrategy:De,withOverlay:Ue,overlayProps:Oe,...rt}=e,wt=En({name:Y,props:e,classes:VU,classNames:D,styles:z,unstyled:P,rootSelector:"dropdown",vars:ve,varsResolver:Eke}),{resolvedStyles:tt}=jS({classNames:D,styles:z,props:e}),mn=_.useRef(null),[Ln,$t]=_.useState(null),[$n,At]=_.useState(null),{dir:sn}=zv(),Jt=Hv(Z),Vt=Ske({middlewares:p,width:h,position:NU(sn,r),offset:typeof o=="number"?o+(g?v/2:0):o,arrowRef:mn,arrowOffset:b,onPositionChange:i,positionDependencies:s,opened:a,defaultOpened:J,onChange:ne,onOpen:F,onClose:q,onDismiss:K,strategy:De,disabled:te});DEe(()=>{V&&(Vt.onClose(),K?.())},M,[Ln,$n]);const Ut=_.useCallback(_n=>{$t(_n),Vt.floating.refs.setReference(_n)},[Vt.floating.refs.setReference]),gn=_.useCallback(_n=>{At(_n),Vt.floating.refs.setFloating(_n)},[Vt.floating.refs.setFloating]),Wt=_.useCallback(()=>{l?.onExited?.(),u?.()},[l?.onExited,u]),an=_.useCallback(()=>{l?.onEntered?.(),f?.()},[l?.onEntered,f]);return C.jsxs(yke,{value:{returnFocus:ie,disabled:te,controlled:Vt.controlled,reference:Ut,floating:gn,x:Vt.floating.x,y:Vt.floating.y,arrowX:Vt.floating?.middlewareData?.arrow?.x,arrowY:Vt.floating?.middlewareData?.arrow?.y,opened:Vt.opened,arrowRef:mn,transitionProps:{...l,onExited:Wt,onEntered:an},width:h,withArrow:g,arrowSize:v,arrowOffset:b,arrowRadius:E,arrowPosition:T,placement:Vt.floating.placement,trapFocus:B,withinPortal:$,portalProps:O,zIndex:oe,radius:j,shadow:U,closeOnEscape:R,onDismiss:K,onClose:Vt.onClose,onToggle:Vt.onToggle,getTargetId:()=>`${Jt}-target`,getDropdownId:()=>`${Jt}-dropdown`,withRoles:se,targetProps:rt,__staticSelector:Y,classNames:D,styles:z,unstyled:P,variant:ue,keepMounted:ae,getStyles:wt,resolvedStyles:tt,floatingStrategy:De},children:[n,Ue&&C.jsx(xh,{transition:"fade",mounted:Vt.opened,duration:l?.duration||250,exitDuration:l?.exitDuration||250,children:_n=>C.jsx(Uv,{withinPortal:$,children:C.jsx(nv,{...Oe,...wt("overlay",{className:Oe?.className,style:[_n,Oe?.style]})})})})]})}Kd.Target=NI;Kd.Dropdown=$S;Kd.displayName="@mantine/core/Popover";Kd.extend=t=>t;var za={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const BU=_.forwardRef(({className:t,...e},n)=>C.jsxs(Lt,{component:"span",className:el(za.barsLoader,t),...e,ref:n,children:[C.jsx("span",{className:za.bar}),C.jsx("span",{className:za.bar}),C.jsx("span",{className:za.bar})]}));BU.displayName="@mantine/core/Bars";const $U=_.forwardRef(({className:t,...e},n)=>C.jsxs(Lt,{component:"span",className:el(za.dotsLoader,t),...e,ref:n,children:[C.jsx("span",{className:za.dot}),C.jsx("span",{className:za.dot}),C.jsx("span",{className:za.dot})]}));$U.displayName="@mantine/core/Dots";const HU=_.forwardRef(({className:t,...e},n)=>C.jsx(Lt,{component:"span",className:el(za.ovalLoader,t),...e,ref:n}));HU.displayName="@mantine/core/Oval";const FU={bars:BU,oval:HU,dots:$U},_ke={loaders:FU,type:"oval"},kke=(t,{size:e,color:n})=>({root:{"--loader-size":hr(e,"loader-size"),"--loader-color":n?Ul(n,t):void 0}}),Wd=In((t,e)=>{const n=pt("Loader",_ke,t),{size:r,color:o,type:i,vars:s,className:a,style:l,classNames:u,styles:f,unstyled:h,loaders:p,variant:g,children:v,...b}=n,E=En({name:"Loader",props:n,classes:za,className:a,style:l,classNames:u,styles:f,unstyled:h,vars:s,varsResolver:kke});return v?C.jsx(Lt,{...E("root"),ref:e,...b,children:v}):C.jsx(Lt,{...E("root"),ref:e,component:p[i],variant:g,size:r,...b})});Wd.defaultLoaders=FU;Wd.classes=za;Wd.displayName="@mantine/core/Loader";var jm={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const i6={orientation:"horizontal"},Tke=(t,{borderWidth:e})=>({group:{"--ai-border-width":ze(e)}}),DI=In((t,e)=>{const n=pt("ActionIconGroup",i6,t),{className:r,style:o,classNames:i,styles:s,unstyled:a,orientation:l,vars:u,borderWidth:f,variant:h,mod:p,...g}=pt("ActionIconGroup",i6,t),v=En({name:"ActionIconGroup",props:n,classes:jm,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:u,varsResolver:Tke,rootSelector:"group"});return C.jsx(Lt,{...v("group"),ref:e,variant:h,mod:[{"data-orientation":l},p],role:"group",...g})});DI.classes=jm;DI.displayName="@mantine/core/ActionIconGroup";const s6={},Ake=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:i,size:s})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:i});return{groupSection:{"--section-height":hr(s,"section-height"),"--section-padding-x":hr(s,"section-padding-x"),"--section-fz":ss(s),"--section-radius":e===void 0?void 0:Ci(e),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},OI=In((t,e)=>{const n=pt("ActionIconGroupSection",s6,t),{className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,variant:u,gradient:f,radius:h,autoContrast:p,...g}=pt("ActionIconGroupSection",s6,t),v=En({name:"ActionIconGroupSection",props:n,classes:jm,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,varsResolver:Ake,rootSelector:"groupSection"});return C.jsx(Lt,{...v("groupSection"),ref:e,variant:u,...g})});OI.classes=jm;OI.displayName="@mantine/core/ActionIconGroupSection";const Rke={},Mke=(t,{size:e,radius:n,variant:r,gradient:o,color:i,autoContrast:s})=>{const a=t.variantColorResolver({color:i||t.primaryColor,theme:t,gradient:o,variant:r||"filled",autoContrast:s});return{root:{"--ai-size":hr(e,"ai-size"),"--ai-radius":n===void 0?void 0:Ci(n),"--ai-bg":i||r?a.background:void 0,"--ai-hover":i||r?a.hover:void 0,"--ai-hover-color":i||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":i||r?a.border:void 0}}},Eh=Di((t,e)=>{const n=pt("ActionIcon",Rke,t),{className:r,unstyled:o,variant:i,classNames:s,styles:a,style:l,loading:u,loaderProps:f,size:h,color:p,radius:g,__staticSelector:v,gradient:b,vars:E,children:T,disabled:P,"data-disabled":D,autoContrast:z,mod:V,...$}=n,O=En({name:["ActionIcon",v],props:n,className:r,style:l,classes:jm,classNames:s,styles:a,unstyled:o,vars:E,varsResolver:Mke});return C.jsxs(Sh,{...O("root",{active:!P&&!u&&!D}),...$,unstyled:o,variant:i,size:h,disabled:P||u,ref:e,mod:[{loading:u,disabled:P||D},V],children:[C.jsx(xh,{mounted:!!u,transition:"slide-down",duration:150,children:R=>C.jsx(Lt,{component:"span",...O("loader",{style:R}),"aria-hidden":!0,children:C.jsx(Wd,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...f})})}),C.jsx(Lt,{component:"span",mod:{loading:u},...O("icon"),children:T})]})});Eh.classes=jm;Eh.displayName="@mantine/core/ActionIcon";Eh.Group=DI;Eh.GroupSection=OI;const zU=_.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...n},r)=>C.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:r,...n,children:C.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));zU.displayName="@mantine/core/CloseIcon";var UU={root:"m_86a44da5","root--subtle":"m_220c80f2"};const Ike={variant:"subtle"},Nke=(t,{size:e,radius:n,iconSize:r})=>({root:{"--cb-size":hr(e,"cb-size"),"--cb-radius":n===void 0?void 0:Ci(n),"--cb-icon-size":ze(r)}}),HS=Di((t,e)=>{const n=pt("CloseButton",Ike,t),{iconSize:r,children:o,vars:i,radius:s,className:a,classNames:l,style:u,styles:f,unstyled:h,"data-disabled":p,disabled:g,variant:v,icon:b,mod:E,__staticSelector:T,...P}=n,D=En({name:T||"CloseButton",props:n,className:a,style:u,classes:UU,classNames:l,styles:f,unstyled:h,vars:i,varsResolver:Nke});return C.jsxs(Sh,{ref:e,...P,unstyled:h,variant:v,disabled:g,mod:[{disabled:g||p},E],...D("root",{variant:v,active:!g&&!p}),children:[b||C.jsx(zU,{}),o]})});HS.classes=UU;HS.displayName="@mantine/core/CloseButton";function Dke(t){return _.Children.toArray(t).filter(Boolean)}var qU={root:"m_4081bf90"};const Oke={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},Pke=(t,{grow:e,preventGrowOverflow:n,gap:r,align:o,justify:i,wrap:s},{childWidth:a})=>({root:{"--group-child-width":e&&n?a:void 0,"--group-gap":$v(r),"--group-align":o,"--group-justify":i,"--group-wrap":s}}),Xo=In((t,e)=>{const n=pt("Group",Oke,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,children:l,gap:u,align:f,justify:h,wrap:p,grow:g,preventGrowOverflow:v,vars:b,variant:E,__size:T,mod:P,...D}=n,z=Dke(l),V=z.length,$=$v(u??"md"),R={childWidth:`calc(${100/V}% - (${$} - ${$} / ${V}))`},M=En({name:"Group",props:n,stylesCtx:R,className:o,style:i,classes:qU,classNames:r,styles:s,unstyled:a,vars:b,varsResolver:Pke});return C.jsx(Lt,{...M("root"),ref:e,variant:E,mod:[{grow:g},P],size:T,...D,children:z})});Xo.classes=qU;Xo.displayName="@mantine/core/Group";const[Lke,Vke]=CI({size:"sm"}),jke={},GU=In((t,e)=>{const n=pt("InputClearButton",jke,t),{size:r,variant:o,vars:i,classNames:s,styles:a,...l}=n,u=Vke(),{resolvedClassNames:f,resolvedStyles:h}=jS({classNames:s,styles:a,props:n});return C.jsx(HS,{variant:o||"transparent",ref:e,size:r||u?.size||"sm",classNames:f,styles:h,__staticSelector:"InputClearButton",...l})});GU.displayName="@mantine/core/InputClearButton";const[Bke,FS]=CI({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var va={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const a6={},$ke=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${ss(e)} - ${ze(2)})`}}),zS=In((t,e)=>{const n=pt("InputDescription",a6,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,size:u,__staticSelector:f,__inheritStyles:h=!0,variant:p,...g}=pt("InputDescription",a6,n),v=FS(),b=En({name:["InputWrapper",f],props:n,classes:va,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"description",vars:l,varsResolver:$ke}),E=h&&v?.getStyles||b;return C.jsx(Lt,{component:"p",ref:e,variant:p,size:u,...E("description",v?.getStyles?{className:o,style:i}:void 0),...g})});zS.classes=va;zS.displayName="@mantine/core/InputDescription";const Hke={},Fke=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${ss(e)} - ${ze(2)})`}}),US=In((t,e)=>{const n=pt("InputError",Hke,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,size:u,__staticSelector:f,__inheritStyles:h=!0,variant:p,...g}=n,v=En({name:["InputWrapper",f],props:n,classes:va,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"error",vars:l,varsResolver:Fke}),b=FS(),E=h&&b?.getStyles||v;return C.jsx(Lt,{component:"p",ref:e,variant:p,size:u,...E("error",b?.getStyles?{className:o,style:i}:void 0),...g})});US.classes=va;US.displayName="@mantine/core/InputError";const l6={labelElement:"label"},zke=(t,{size:e})=>({label:{"--input-label-size":ss(e),"--input-asterisk-color":void 0}}),qS=In((t,e)=>{const n=pt("InputLabel",l6,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,labelElement:u,size:f,required:h,htmlFor:p,onMouseDown:g,children:v,__staticSelector:b,variant:E,mod:T,...P}=pt("InputLabel",l6,n),D=En({name:["InputWrapper",b],props:n,classes:va,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"label",vars:l,varsResolver:zke}),z=FS(),V=z?.getStyles||D;return C.jsxs(Lt,{...V("label",z?.getStyles?{className:o,style:i}:void 0),component:u,variant:E,size:f,ref:e,htmlFor:u==="label"?p:void 0,mod:[{required:h},T],onMouseDown:$=>{g?.($),!$.defaultPrevented&&$.detail>1&&$.preventDefault()},...P,children:[v,h&&C.jsx("span",{...V("required"),"aria-hidden":!0,children:" *"})]})});qS.classes=va;qS.displayName="@mantine/core/InputLabel";const c6={},PI=In((t,e)=>{const n=pt("InputPlaceholder",c6,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,__staticSelector:u,variant:f,error:h,mod:p,...g}=pt("InputPlaceholder",c6,n),v=En({name:["InputPlaceholder",u],props:n,classes:va,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"placeholder"});return C.jsx(Lt,{...v("placeholder"),mod:[{error:!!h},p],component:"span",variant:f,ref:e,...g})});PI.classes=va;PI.displayName="@mantine/core/InputPlaceholder";function Uke(t,{hasDescription:e,hasError:n}){const r=t.findIndex(l=>l==="input"),o=t.slice(0,r),i=t.slice(r+1),s=e&&o.includes("description")||n&&o.includes("error");return{offsetBottom:e&&i.includes("description")||n&&i.includes("error"),offsetTop:s}}const qke={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},Gke=(t,{size:e})=>({label:{"--input-label-size":ss(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${ss(e)} - ${ze(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${ss(e)} - ${ze(2)})`}}),LI=In((t,e)=>{const n=pt("InputWrapper",qke,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,size:u,variant:f,__staticSelector:h,inputContainer:p,inputWrapperOrder:g,label:v,error:b,description:E,labelProps:T,descriptionProps:P,errorProps:D,labelElement:z,children:V,withAsterisk:$,id:O,required:R,__stylesApiProps:M,mod:B,...q}=n,K=En({name:["InputWrapper",h],props:M||n,classes:va,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:Gke}),F={size:u,variant:f,__staticSelector:h},ne=Hv(O),oe=typeof $=="boolean"?$:R,j=D?.id||`${ne}-error`,U=P?.id||`${ne}-description`,Z=ne,J=!!b&&typeof b!="boolean",Y=!!E,se=`${J?j:""} ${Y?U:""}`,te=se.trim().length>0?se.trim():void 0,ie=T?.id||`${ne}-label`,ue=v&&C.jsx(qS,{labelElement:z,id:ie,htmlFor:Z,required:oe,...F,...T,children:v},"label"),ae=Y&&C.jsx(zS,{...P,...F,size:P?.size||F.size,id:P?.id||U,children:E},"description"),ve=C.jsx(_.Fragment,{children:p(V)},"input"),De=J&&_.createElement(US,{...D,...F,size:D?.size||F.size,key:"error",id:D?.id||j},b),Ue=g.map(Oe=>{switch(Oe){case"label":return ue;case"input":return ve;case"description":return ae;case"error":return De;default:return null}});return C.jsx(Bke,{value:{getStyles:K,describedBy:te,inputId:Z,labelId:ie,...Uke(g,{hasDescription:Y,hasError:J})},children:C.jsx(Lt,{ref:e,variant:f,size:u,mod:[{error:!!b},B],...K("root"),...q,children:Ue})})});LI.classes=va;LI.displayName="@mantine/core/InputWrapper";const Kke={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},Wke=(t,e,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":hr(e.size,"input-height"),"--input-fz":ss(e.size),"--input-radius":e.radius===void 0?void 0:Ci(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?ze(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?ze(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?hr(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),Ds=Di((t,e)=>{const n=pt("Input",Kke,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,required:l,__staticSelector:u,__stylesApiProps:f,size:h,wrapperProps:p,error:g,disabled:v,leftSection:b,leftSectionProps:E,leftSectionWidth:T,rightSection:P,rightSectionProps:D,rightSectionWidth:z,rightSectionPointerEvents:V,leftSectionPointerEvents:$,variant:O,vars:R,pointer:M,multiline:B,radius:q,id:K,withAria:F,withErrorStyles:ne,mod:oe,inputSize:j,__clearSection:U,__clearable:Z,__defaultRightSection:J,...Y}=n,{styleProps:se,rest:te}=BS(Y),ie=FS(),ue={offsetBottom:ie?.offsetBottom,offsetTop:ie?.offsetTop},ae=En({name:["Input",u],props:f||n,classes:va,className:o,style:i,classNames:r,styles:s,unstyled:a,stylesCtx:ue,rootSelector:"wrapper",vars:R,varsResolver:Wke}),ve=F?{required:l,disabled:v,"aria-invalid":!!g,"aria-describedby":ie?.describedBy,id:ie?.inputId||K}:{},De=P||Z&&U||J;return C.jsx(Lke,{value:{size:h||"sm"},children:C.jsxs(Lt,{...ae("wrapper"),...se,...p,mod:[{error:!!g&&ne,pointer:M,disabled:v,multiline:B,"data-with-right-section":!!De,"data-with-left-section":!!b},oe],variant:O,size:h,children:[b&&C.jsx("div",{...E,"data-position":"left",...ae("section",{className:E?.className,style:E?.style}),children:b}),C.jsx(Lt,{component:"input",...te,...ve,ref:e,required:l,mod:{disabled:v,error:!!g&&ne},variant:O,__size:j,...ae("input")}),De&&C.jsx("div",{...D,"data-position":"right",...ae("section",{className:D?.className,style:D?.style}),children:De})]})})});Ds.classes=va;Ds.Wrapper=LI;Ds.Label=qS;Ds.Error=US;Ds.Description=zS;Ds.Placeholder=PI;Ds.ClearButton=GU;Ds.displayName="@mantine/core/Input";function Yke(t,e,n){const r=pt(t,e,n),{label:o,description:i,error:s,required:a,classNames:l,styles:u,className:f,unstyled:h,__staticSelector:p,__stylesApiProps:g,errorProps:v,labelProps:b,descriptionProps:E,wrapperProps:T,id:P,size:D,style:z,inputContainer:V,inputWrapperOrder:$,withAsterisk:O,variant:R,vars:M,mod:B,...q}=r,{styleProps:K,rest:F}=BS(q),ne={label:o,description:i,error:s,required:a,classNames:l,className:f,__staticSelector:p,__stylesApiProps:g||r,errorProps:v,labelProps:b,descriptionProps:E,unstyled:h,styles:u,size:D,style:z,inputContainer:V,inputWrapperOrder:$,withAsterisk:O,variant:R,id:P,mod:B,...T};return{...F,classNames:l,styles:u,unstyled:h,wrapperProps:{...ne,...K},inputProps:{required:a,classNames:l,styles:u,unstyled:h,size:D,__staticSelector:p,__stylesApiProps:g||r,error:s,variant:R,id:P}}}const Xke={__staticSelector:"InputBase",withAria:!0},Bm=Di((t,e)=>{const{inputProps:n,wrapperProps:r,...o}=Yke("InputBase",Xke,t);return C.jsx(Ds.Wrapper,{...r,children:C.jsx(Ds,{...n,...o,ref:e})})});Bm.classes={...Ds.classes,...Ds.Wrapper.classes};Bm.displayName="@mantine/core/InputBase";const Qke={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var KU={root:"m_8bffd616"};const Zke={},VI=Di((t,e)=>{const n=pt("Flex",Zke,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,gap:u,rowGap:f,columnGap:h,align:p,justify:g,wrap:v,direction:b,...E}=n,T=En({name:"Flex",classes:KU,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l}),P=Ps(),D=xU(),z=SU({styleProps:{gap:u,rowGap:f,columnGap:h,align:p,justify:g,wrap:v,direction:b},theme:P,data:Qke});return C.jsxs(C.Fragment,{children:[z.hasResponsiveStyles&&C.jsx(CU,{selector:`.${D}`,styles:z.styles,media:z.media}),C.jsx(Lt,{ref:e,...T("root",{className:D,style:OS(z.inlineStyles)}),...E})]})});VI.classes=KU;VI.displayName="@mantine/core/Flex";var WU={root:"m_b6d8b162"};function Jke(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const eTe={inherit:!1},tTe=(t,{variant:e,lineClamp:n,gradient:r,size:o,color:i})=>({root:{"--text-fz":ss(o),"--text-lh":REe(o),"--text-gradient":e==="gradient"?Y2(r,t):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":i?Ul(i,t):void 0}}),ql=Di((t,e)=>{const n=pt("Text",eTe,t),{lineClamp:r,truncate:o,inline:i,inherit:s,gradient:a,span:l,__staticSelector:u,vars:f,className:h,style:p,classNames:g,styles:v,unstyled:b,variant:E,mod:T,size:P,...D}=n,z=En({name:["Text",u],props:n,classes:WU,className:h,style:p,classNames:g,styles:v,unstyled:b,vars:f,varsResolver:tTe});return C.jsx(Lt,{...z("root",{focusable:!0}),ref:e,component:l?"span":"p",variant:E,mod:[{"data-truncate":Jke(o),"data-line-clamp":typeof r=="number","data-inline":i,"data-inherit":s},T],size:P,...D})});ql.classes=WU;ql.displayName="@mantine/core/Text";function jI({size:t,style:e,...n}){const r=t!==void 0?{width:ze(t),height:ze(t),...e}:e;return C.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:C.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}const YU=_.createContext(null),nTe=YU.Provider;function rTe(){return{withinGroup:!!_.useContext(YU)}}var GS={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const oTe={},iTe=(t,{spacing:e})=>({group:{"--ag-spacing":$v(e)}}),BI=In((t,e)=>{const n=pt("AvatarGroup",oTe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,spacing:u,...f}=n,h=En({name:"AvatarGroup",classes:GS,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:iTe,rootSelector:"group"});return C.jsx(nTe,{value:!0,children:C.jsx(Lt,{ref:e,...h("group"),...f})})});BI.classes=GS;BI.displayName="@mantine/core/AvatarGroup";function sTe(t){return C.jsx("svg",{...t,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function aTe(t){let e=0;for(let n=0;n<t.length;n+=1){const r=t.charCodeAt(n);e=(e<<5)-e+r,e|=0}return e}const lTe=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function cTe(t,e=lTe){const n=aTe(t),r=Math.abs(n)%e.length;return e[r]}function uTe(t,e=2){const n=t.split(" ");return n.length===1?t.slice(0,e).toUpperCase():n.map(r=>r[0]).slice(0,e).join("").toUpperCase()}const dTe={},fTe=(t,{size:e,radius:n,variant:r,gradient:o,color:i,autoContrast:s,name:a,allowedInitialsColors:l})=>{const u=i==="initials"&&typeof a=="string"?cTe(a,l):i,f=t.variantColorResolver({color:u||"gray",theme:t,gradient:o,variant:r||"light",autoContrast:s});return{root:{"--avatar-size":hr(e,"avatar-size"),"--avatar-radius":n===void 0?void 0:Ci(n),"--avatar-bg":u||r?f.background:void 0,"--avatar-color":u||r?f.color:void 0,"--avatar-bd":u||r?f.border:void 0}}},KS=Di((t,e)=>{const n=pt("Avatar",dTe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,src:u,alt:f,radius:h,color:p,gradient:g,imageProps:v,children:b,autoContrast:E,mod:T,name:P,allowedInitialsColors:D,...z}=n,V=rTe(),[$,O]=_.useState(!u),R=En({name:"Avatar",props:n,classes:GS,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:fTe});return _.useEffect(()=>O(!u),[u]),C.jsx(Lt,{...R("root"),mod:[{"within-group":V.withinGroup},T],ref:e,...z,children:$?C.jsx("span",{...R("placeholder"),title:f,children:b||typeof P=="string"&&uTe(P)||C.jsx(sTe,{})}):C.jsx("img",{...v,...R("image"),src:u,alt:f,onError:M=>{O(!0),v?.onError?.(M)}})})});KS.classes=GS;KS.displayName="@mantine/core/Avatar";KS.Group=BI;var XU={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const hTe={},pTe=(t,{radius:e,color:n,gradient:r,variant:o,size:i,autoContrast:s})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:s});return{root:{"--badge-height":hr(i,"badge-height"),"--badge-padding-x":hr(i,"badge-padding-x"),"--badge-fz":hr(i,"badge-fz"),"--badge-radius":e===void 0?void 0:Ci(e),"--badge-bg":n||o?a.background:void 0,"--badge-color":n||o?a.color:void 0,"--badge-bd":n||o?a.border:void 0,"--badge-dot-color":o==="dot"?Ul(n,t):void 0}}},$I=Di((t,e)=>{const n=pt("Badge",hTe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,radius:u,color:f,gradient:h,leftSection:p,rightSection:g,children:v,variant:b,fullWidth:E,autoContrast:T,circle:P,mod:D,...z}=n,V=En({name:"Badge",props:n,classes:XU,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:pTe});return C.jsxs(Lt,{variant:b,mod:[{block:E,circle:P,"with-right-section":!!g,"with-left-section":!!p},D],...V("root",{variant:b}),ref:e,...z,children:[p&&C.jsx("span",{...V("section"),"data-position":"left",children:p}),C.jsx("span",{...V("label"),children:v}),g&&C.jsx("span",{...V("section"),"data-position":"right",children:g})]})});$I.classes=XU;$I.displayName="@mantine/core/Badge";var $m={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const u6={orientation:"horizontal"},mTe=(t,{borderWidth:e})=>({group:{"--button-border-width":ze(e)}}),HI=In((t,e)=>{const n=pt("ButtonGroup",u6,t),{className:r,style:o,classNames:i,styles:s,unstyled:a,orientation:l,vars:u,borderWidth:f,variant:h,mod:p,...g}=pt("ButtonGroup",u6,t),v=En({name:"ButtonGroup",props:n,classes:$m,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:u,varsResolver:mTe,rootSelector:"group"});return C.jsx(Lt,{...v("group"),ref:e,variant:h,mod:[{"data-orientation":l},p],role:"group",...g})});HI.classes=$m;HI.displayName="@mantine/core/ButtonGroup";const d6={},gTe=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:i,size:s})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:i});return{groupSection:{"--section-height":hr(s,"section-height"),"--section-padding-x":hr(s,"section-padding-x"),"--section-fz":s?.includes("compact")?ss(s.replace("compact-","")):ss(s),"--section-radius":e===void 0?void 0:Ci(e),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},FI=In((t,e)=>{const n=pt("ButtonGroupSection",d6,t),{className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,variant:u,gradient:f,radius:h,autoContrast:p,...g}=pt("ButtonGroupSection",d6,t),v=En({name:"ButtonGroupSection",props:n,classes:$m,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,varsResolver:gTe,rootSelector:"groupSection"});return C.jsx(Lt,{...v("groupSection"),ref:e,variant:u,...g})});FI.classes=$m;FI.displayName="@mantine/core/ButtonGroupSection";const yTe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${ze(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},vTe={},bTe=(t,{radius:e,color:n,gradient:r,variant:o,size:i,justify:s,autoContrast:a})=>{const l=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:a});return{root:{"--button-justify":s,"--button-height":hr(i,"button-height"),"--button-padding-x":hr(i,"button-padding-x"),"--button-fz":i?.includes("compact")?ss(i.replace("compact-","")):ss(i),"--button-radius":e===void 0?void 0:Ci(e),"--button-bg":n||o?l.background:void 0,"--button-hover":n||o?l.hover:void 0,"--button-color":l.color,"--button-bd":n||o?l.border:void 0,"--button-hover-color":n||o?l.hoverColor:void 0}}},ol=Di((t,e)=>{const n=pt("Button",vTe,t),{style:r,vars:o,className:i,color:s,disabled:a,children:l,leftSection:u,rightSection:f,fullWidth:h,variant:p,radius:g,loading:v,loaderProps:b,gradient:E,classNames:T,styles:P,unstyled:D,"data-disabled":z,autoContrast:V,mod:$,...O}=n,R=En({name:"Button",props:n,classes:$m,className:i,style:r,classNames:T,styles:P,unstyled:D,vars:o,varsResolver:bTe}),M=!!u,B=!!f;return C.jsxs(Sh,{ref:e,...R("root",{active:!a&&!v&&!z}),unstyled:D,variant:p,disabled:a||v,mod:[{disabled:a||z,loading:v,block:h,"with-left-section":M,"with-right-section":B},$],...O,children:[C.jsx(xh,{mounted:!!v,transition:yTe,duration:150,children:q=>C.jsx(Lt,{component:"span",...R("loader",{style:q}),"aria-hidden":!0,children:C.jsx(Wd,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...b})})}),C.jsxs("span",{...R("inner"),children:[u&&C.jsx(Lt,{component:"span",...R("section"),mod:{position:"left"},children:u}),C.jsx(Lt,{component:"span",mod:{loading:v},...R("label"),children:l}),f&&C.jsx(Lt,{component:"span",...R("section"),mod:{position:"right"},children:f})]})]})});ol.classes=$m;ol.displayName="@mantine/core/Button";ol.Group=HI;ol.GroupSection=FI;const[wTe,CTe]=PS("Card component was not found in tree");var zI={root:"m_e615b15f",section:"m_599a2148"};const STe={},WS=Di((t,e)=>{const n=pt("CardSection",STe,t),{classNames:r,className:o,style:i,styles:s,vars:a,withBorder:l,inheritPadding:u,mod:f,...h}=n,p=CTe();return C.jsx(Lt,{ref:e,mod:[{"with-border":l,"inherit-padding":u},f],...p.getStyles("section",{className:o,style:i,styles:s,classNames:r}),...h})});WS.classes=zI;WS.displayName="@mantine/core/CardSection";const xTe={},ETe=(t,{padding:e})=>({root:{"--card-padding":$v(e)}}),qv=Di((t,e)=>{const n=pt("Card",xTe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,children:u,padding:f,...h}=n,p=En({name:"Card",props:n,classes:zI,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:ETe}),g=_.Children.toArray(u),v=g.map((b,E)=>typeof b=="object"&&b&&"type"in b&&b.type===WS?_.cloneElement(b,{"data-first-section":E===0||void 0,"data-last-section":E===g.length-1||void 0}):b);return C.jsx(wTe,{value:{getStyles:p},children:C.jsx(RI,{ref:e,unstyled:a,...p("root"),...h,children:v})})});qv.classes=zI;qv.displayName="@mantine/core/Card";qv.Section=WS;const[_Te,kTe]=CI(),TTe={};function QU(t){const{value:e,defaultValue:n,onChange:r,multiple:o,children:i}=pt("ChipGroup",TTe,t),[s,a]=Lm({value:e,defaultValue:n,finalValue:o?[]:null,onChange:r}),l=f=>Array.isArray(s)?s.includes(f):f===s,u=f=>{const h=f.currentTarget.value;Array.isArray(s)?a(s.includes(h)?s.filter(p=>p!==h):[...s,h]):a(h)};return C.jsx(_Te,{value:{isChipSelected:l,onChange:u,multiple:o},children:i})}QU.displayName="@mantine/core/ChipGroup";var ZU={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const ATe={type:"checkbox"},RTe=(t,{size:e,radius:n,variant:r,color:o,autoContrast:i})=>{const s=t.variantColorResolver({color:o||t.primaryColor,theme:t,variant:r||"filled",autoContrast:i});return{root:{"--chip-fz":ss(e),"--chip-size":hr(e,"chip-size"),"--chip-radius":n===void 0?void 0:Ci(n),"--chip-checked-padding":hr(e,"chip-checked-padding"),"--chip-padding":hr(e,"chip-padding"),"--chip-icon-size":hr(e,"chip-icon-size"),"--chip-bg":o||r?s.background:void 0,"--chip-hover":o||r?s.hover:void 0,"--chip-color":o||r?s.color:void 0,"--chip-bd":o||r?s.border:void 0,"--chip-spacing":hr(e,"chip-spacing")}}},YS=In((t,e)=>{const n=pt("Chip",ATe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,id:u,checked:f,defaultChecked:h,onChange:p,value:g,wrapperProps:v,type:b,disabled:E,children:T,size:P,variant:D,icon:z,rootRef:V,autoContrast:$,mod:O,...R}=n,M=En({name:"Chip",classes:ZU,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:RTe}),B=kTe(),q=Hv(u),{styleProps:K,rest:F}=BS(R),[ne,oe]=Lm({value:f,defaultValue:h,finalValue:!1,onChange:p}),j=B?{checked:B.isChipSelected(g),onChange:Z=>{B.onChange(Z),p?.(Z.currentTarget.checked)},type:B.multiple?"checkbox":"radio"}:{},U=j.checked||ne;return C.jsxs(Lt,{size:P,variant:D,ref:V,mod:O,...M("root"),...K,...v,children:[C.jsx("input",{type:b,...M("input"),checked:U,onChange:Z=>oe(Z.currentTarget.checked),id:q,disabled:E,ref:e,value:g,...j,...F}),C.jsxs("label",{htmlFor:q,"data-checked":U||void 0,"data-disabled":E||void 0,...M("label",{variant:D||"filled"}),children:[U&&C.jsx("span",{...M("iconWrapper"),children:z||C.jsx(jI,{...M("checkIcon")})}),C.jsx("span",{children:T})]})]})});YS.classes=ZU;YS.displayName="@mantine/core/Chip";YS.Group=QU;var JU={root:"m_3eebeb36",label:"m_9e365f20"};const MTe={orientation:"horizontal"},ITe=(t,{color:e,variant:n,size:r})=>({root:{"--divider-color":e?Ul(e,t):void 0,"--divider-border-style":n,"--divider-size":hr(r,"divider-size")}}),UI=In((t,e)=>{const n=pt("Divider",MTe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,color:u,orientation:f,label:h,labelPosition:p,mod:g,...v}=n,b=En({name:"Divider",classes:JU,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:ITe});return C.jsx(Lt,{ref:e,mod:[{orientation:f,"with-label":!!h},g],...b("root"),...v,role:"separator",children:h&&C.jsx(Lt,{component:"span",mod:{position:p},...b("label"),children:h})})});UI.classes=JU;UI.displayName="@mantine/core/Divider";const NTe={multiple:!1},eq=_.forwardRef((t,e)=>{const{onChange:n,children:r,multiple:o,accept:i,name:s,form:a,resetRef:l,disabled:u,capture:f,inputProps:h,...p}=pt("FileButton",NTe,t),g=_.useRef(null),v=()=>{!u&&g.current?.click()},b=T=>{n(o?Array.from(T.currentTarget.files):T.currentTarget.files[0]||null)};return Jw(l,()=>{g.current&&(g.current.value="")}),C.jsxs(C.Fragment,{children:[C.jsx("input",{style:{display:"none"},type:"file",accept:i,multiple:o,onChange:b,ref:ou(e,g),name:s,form:a,capture:f,...h}),r({onClick:v,...p})]})});eq.displayName="@mantine/core/FileButton";const DTe=({value:t})=>C.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(t)?t.map(e=>e.name).join(", "):t?.name}),OTe={valueComponent:DTe},qI=In((t,e)=>{const n=pt("FileInput",OTe,t),{unstyled:r,vars:o,onChange:i,value:s,defaultValue:a,multiple:l,accept:u,name:f,form:h,valueComponent:p,clearable:g,clearButtonProps:v,readOnly:b,capture:E,fileInputProps:T,rightSection:P,size:D,placeholder:z,component:V,resetRef:$,classNames:O,styles:R,...M}=n,B=_.useRef(null),{resolvedClassNames:q,resolvedStyles:K}=jS({classNames:O,styles:R,props:n}),[F,ne]=Lm({value:s,defaultValue:a,onChange:i,finalValue:l?[]:null}),oe=Array.isArray(F)?F.length!==0:F!==null,j=P||(g&&oe&&!b?C.jsx(HS,{...v,variant:"subtle",onClick:()=>ne(l?[]:null),size:D,unstyled:r}):null);_.useEffect(()=>{(Array.isArray(F)&&F.length===0||F===null)&&B.current?.()},[F]);const U=p;return C.jsx(eq,{onChange:ne,multiple:l,accept:u,name:f,form:h,resetRef:ou(B,$),disabled:b,capture:E,inputProps:T,children:Z=>C.jsx(Bm,{component:V||"button",ref:e,rightSection:j,...Z,...M,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:D,classNames:O,styles:R,children:oe?C.jsx(U,{value:F}):C.jsx(Ds.Placeholder,{__staticSelector:"FileInput",classNames:q,styles:K,children:z})})})});qI.classes=Bm.classes;qI.displayName="@mantine/core/FileInput";const PTe=qI;function LTe({open:t,close:e,openDelay:n,closeDelay:r}){const o=_.useRef(-1),i=_.useRef(-1),s=()=>{window.clearTimeout(o.current),window.clearTimeout(i.current)},a=()=>{s(),n===0||n===void 0?t():o.current=window.setTimeout(t,n)},l=()=>{s(),r===0||r===void 0?e():i.current=window.setTimeout(e,r)};return _.useEffect(()=>s,[]),{openDropdown:a,closeDropdown:l}}var tq={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const f6={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Bv("overlay")},VTe=(t,{zIndex:e})=>({root:{"--lo-z-index":e?.toString()}}),GI=In((t,e)=>{const n=pt("LoadingOverlay",f6,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,transitionProps:u,loaderProps:f,overlayProps:h,visible:p,zIndex:g,...v}=n,b=Ps(),E=En({name:"LoadingOverlay",classes:tq,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:VTe}),T={...f6.overlayProps,...h};return C.jsx(xh,{transition:"fade",...u,mounted:!!p,children:P=>C.jsxs(Lt,{...E("root",{style:P}),ref:e,...v,children:[C.jsx(Wd,{...E("loader"),unstyled:a,...f}),C.jsx(nv,{...T,...E("overlay"),darkHidden:!0,unstyled:a,color:h?.color||b.white}),C.jsx(nv,{...T,...E("overlay"),lightHidden:!0,unstyled:a,color:h?.color||b.colors.dark[5]})]})})});GI.classes=tq;GI.displayName="@mantine/core/LoadingOverlay";const[jTe,Gv]=PS("Menu component was not found in the tree");var Hm={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const BTe={},KI=In((t,e)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,...a}=pt("MenuDivider",BTe,t),l=Gv();return C.jsx(Lt,{ref:e,...l.getStyles("divider",{className:r,style:o,styles:i,classNames:n}),...a})});KI.classes=Hm;KI.displayName="@mantine/core/MenuDivider";const $Te={},WI=In((t,e)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,onMouseEnter:a,onMouseLeave:l,onKeyDown:u,children:f,...h}=pt("MenuDropdown",$Te,t),p=_.useRef(null),g=Gv(),v=Al(u,T=>{(T.key==="ArrowUp"||T.key==="ArrowDown")&&(T.preventDefault(),p.current?.querySelectorAll("[data-menu-item]:not(:disabled)")[0]?.focus())}),b=Al(a,()=>(g.trigger==="hover"||g.trigger==="click-hover")&&g.openDropdown()),E=Al(l,()=>(g.trigger==="hover"||g.trigger==="click-hover")&&g.closeDropdown());return C.jsxs(Kd.Dropdown,{...h,onMouseEnter:b,onMouseLeave:E,role:"menu","aria-orientation":"vertical",ref:ou(e,p),...g.getStyles("dropdown",{className:r,style:o,styles:i,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:v,children:[g.withInitialFocusPlaceholder&&C.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),f]})});WI.classes=Hm;WI.displayName="@mantine/core/MenuDropdown";const HTe={},YI=Di((t,e)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,color:a,closeMenuOnClick:l,leftSection:u,rightSection:f,children:h,disabled:p,"data-disabled":g,...v}=pt("MenuItem",HTe,t),b=Gv(),E=Ps(),{dir:T}=zv(),P=_.useRef(null),D=b.getItemIndex(P.current),z=v,V=Al(z.onMouseLeave,()=>b.setHovered(-1)),$=Al(z.onMouseEnter,()=>b.setHovered(b.getItemIndex(P.current))),O=Al(z.onClick,()=>{g||(typeof l=="boolean"?l&&b.closeDropdownImmediately():b.closeOnItemClick&&b.closeDropdownImmediately())}),R=Al(z.onFocus,()=>b.setHovered(b.getItemIndex(P.current))),M=a?E.variantColorResolver({color:a,theme:E,variant:"light"}):void 0,B=a?Vm({color:a,theme:E}):null;return C.jsxs(Sh,{...v,unstyled:b.unstyled,tabIndex:b.menuItemTabIndex,onFocus:R,...b.getStyles("item",{className:r,style:o,styles:i,classNames:n}),ref:ou(P,e),role:"menuitem",disabled:p,"data-menu-item":!0,"data-disabled":p||g||void 0,"data-hovered":b.hovered===D?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:$,onMouseLeave:V,onClick:O,onKeyDown:aU({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:b.loop,dir:T,orientation:"vertical",onKeyDown:z.onKeyDown}),__vars:{"--menu-item-color":B?.isThemeColor&&B?.shade===void 0?`var(--mantine-color-${B.color}-6)`:M?.color,"--menu-item-hover":M?.hover},children:[u&&C.jsx("div",{...b.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"left",children:u}),h&&C.jsx("div",{...b.getStyles("itemLabel",{styles:i,classNames:n}),children:h}),f&&C.jsx("div",{...b.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"right",children:f})]})});YI.classes=Hm;YI.displayName="@mantine/core/MenuItem";const FTe={},XI=In((t,e)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,...a}=pt("MenuLabel",FTe,t),l=Gv();return C.jsx(Lt,{ref:e,...l.getStyles("label",{className:r,style:o,styles:i,classNames:n}),...a})});XI.classes=Hm;XI.displayName="@mantine/core/MenuLabel";const zTe={refProp:"ref"},nq=_.forwardRef((t,e)=>{const{children:n,refProp:r,...o}=pt("MenuTarget",zTe,t);if(!jv(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=Gv(),s=n.props,a=Al(s.onClick,()=>{i.trigger==="click"?i.toggleDropdown():i.trigger==="click-hover"&&(i.setOpenedViaClick(!0),i.opened||i.openDropdown())}),l=Al(s.onMouseEnter,()=>(i.trigger==="hover"||i.trigger==="click-hover")&&i.openDropdown()),u=Al(s.onMouseLeave,()=>{(i.trigger==="hover"||i.trigger==="click-hover"&&!i.openedViaClick)&&i.closeDropdown()});return C.jsx(Kd.Target,{refProp:r,popupType:"menu",ref:e,...o,children:_.cloneElement(n,{onClick:a,onMouseEnter:l,onMouseLeave:u,"data-expanded":i.opened?!0:void 0})})});nq.displayName="@mantine/core/MenuTarget";const UTe={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function jr(t){const e=pt("Menu",UTe,t),{children:n,onOpen:r,onClose:o,opened:i,defaultOpened:s,trapFocus:a,onChange:l,closeOnItemClick:u,loop:f,closeOnEscape:h,trigger:p,openDelay:g,closeDelay:v,classNames:b,styles:E,unstyled:T,variant:P,vars:D,menuItemTabIndex:z,keepMounted:V,withInitialFocusPlaceholder:$,...O}=e,R=En({name:"Menu",classes:Hm,props:e,classNames:b,styles:E,unstyled:T}),[M,{setHovered:B,resetHovered:q}]=IEe(),[K,F]=Lm({value:i,defaultValue:s,finalValue:!1,onChange:l}),[ne,oe]=_.useState(!1),j=()=>{F(!1),oe(!1),K&&o?.()},U=()=>{F(!0),!K&&r?.()},Z=()=>{K?j():U()},{openDropdown:J,closeDropdown:Y}=LTe({open:U,close:j,closeDelay:v,openDelay:g}),se=ue=>MEe("[data-menu-item]","[data-menu-dropdown]",ue),{resolvedClassNames:te,resolvedStyles:ie}=jS({classNames:b,styles:E,props:e});return Vd(()=>{q()},[K]),C.jsx(jTe,{value:{getStyles:R,opened:K,toggleDropdown:Z,getItemIndex:se,hovered:M,setHovered:B,openedViaClick:ne,setOpenedViaClick:oe,closeOnItemClick:u,closeDropdown:p==="click"?j:Y,openDropdown:p==="click"?U:J,closeDropdownImmediately:j,loop:f,trigger:p,unstyled:T,menuItemTabIndex:z,withInitialFocusPlaceholder:$},children:C.jsx(Kd,{...O,opened:K,onChange:Z,defaultOpened:s,trapFocus:V?!1:a,closeOnEscape:h,__staticSelector:"Menu",classNames:te,styles:ie,unstyled:T,variant:P,keepMounted:V,children:n})})}jr.extend=t=>t;jr.withProps=rke(jr);jr.classes=Hm;jr.displayName="@mantine/core/Menu";jr.Item=YI;jr.Label=XI;jr.Dropdown=WI;jr.Target=nq;jr.Divider=KI;const qTe={duration:100,transition:"fade"};function GTe(t,e){return{...qTe,...e,...t}}function KTe({offset:t,position:e,defaultOpened:n}){const[r,o]=_.useState(n),i=_.useRef(null),{x:s,y:a,elements:l,refs:u,update:f,placement:h}=Pm({placement:e,middleware:[Bd({crossAxis:!0,padding:5,rootBoundary:"document"})]}),p=h.includes("right")?t:e.includes("left")?t*-1:0,g=h.includes("bottom")?t:e.includes("top")?t*-1:0,v=_.useCallback(({clientX:b,clientY:E})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:b,y:E,left:b+p,top:E+g,right:b,bottom:E}}})},[l.reference]);return _.useEffect(()=>{if(u.floating.current){const b=i.current;b.addEventListener("mousemove",v);const E=Vc(u.floating.current);return E.forEach(T=>{T.addEventListener("scroll",f)}),()=>{b.removeEventListener("mousemove",v),E.forEach(T=>{T.removeEventListener("scroll",f)})}}},[l.reference,u.floating.current,f,v,r]),{handleMouseMove:v,x:s,y:a,opened:r,setOpened:o,boundaryRef:i,floating:u.setFloating}}var XS={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const WTe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:Bv("popover")},YTe=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Ci(e),"--tooltip-bg":n?Ul(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),QI=In((t,e)=>{const n=pt("TooltipFloating",WTe,t),{children:r,refProp:o,withinPortal:i,style:s,className:a,classNames:l,styles:u,unstyled:f,radius:h,color:p,label:g,offset:v,position:b,multiline:E,zIndex:T,disabled:P,defaultOpened:D,variant:z,vars:V,portalProps:$,...O}=n,R=Ps(),M=En({name:"TooltipFloating",props:n,classes:XS,className:a,style:s,classNames:l,styles:u,unstyled:f,rootSelector:"tooltip",vars:V,varsResolver:YTe}),{handleMouseMove:B,x:q,y:K,opened:F,boundaryRef:ne,floating:oe,setOpened:j}=KTe({offset:v,position:b,defaultOpened:D});if(!jv(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const U=ou(ne,SI(r),e),Z=r.props,J=se=>{Z.onMouseEnter?.(se),B(se),j(!0)},Y=se=>{Z.onMouseLeave?.(se),j(!1)};return C.jsxs(C.Fragment,{children:[C.jsx(Uv,{...$,withinPortal:i,children:C.jsx(Lt,{...O,...M("tooltip",{style:{...EU(s,R),zIndex:T,display:!P&&F?"block":"none",top:(K&&Math.round(K))??"",left:(q&&Math.round(q))??""}}),variant:z,ref:oe,mod:{multiline:E},children:g})}),_.cloneElement(r,{...Z,[o]:U,onMouseEnter:J,onMouseLeave:Y})]})});QI.classes=XS;QI.displayName="@mantine/core/TooltipFloating";const rq=_.createContext(!1),XTe=rq.Provider,QTe=()=>_.useContext(rq),ZTe={openDelay:0,closeDelay:0};function ZI(t){const{openDelay:e,closeDelay:n,children:r}=pt("TooltipGroup",ZTe,t);return C.jsx(XTe,{value:!0,children:C.jsx(rCe,{delay:{open:e,close:n},children:r})})}ZI.displayName="@mantine/core/TooltipGroup";ZI.extend=t=>t;function JTe(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function e2e(t){const e=JTe(t.middlewares),n=[nl(t.offset)];return e.shift&&n.push(Bd(typeof e.shift=="boolean"?{padding:8}:{padding:8,...e.shift})),e.flip&&n.push(typeof e.flip=="boolean"?ma():ma(e.flip)),n.push(TA({element:t.arrowRef,padding:t.arrowOffset})),e.inline?n.push(typeof e.inline=="boolean"?Xg():Xg(e.inline)):t.inline&&n.push(Xg()),n}function t2e(t){const[e,n]=_.useState(t.defaultOpened),o=typeof t.opened=="boolean"?t.opened:e,i=QTe(),s=Hv(),a=_.useCallback($=>{n($),$&&P(s)},[s]),{x:l,y:u,context:f,refs:h,update:p,placement:g,middlewareData:{arrow:{x:v,y:b}={}}}=Pm({strategy:t.strategy,placement:t.position,open:o,onOpenChange:a,middleware:e2e(t)}),{delay:E,currentId:T,setCurrentId:P}=oCe(f,{id:s}),{getReferenceProps:D,getFloatingProps:z}=Ez([tCe(f,{enabled:t.events?.hover,delay:i?E:{open:t.openDelay,close:t.closeDelay},mouseOnly:!t.events?.touch}),gCe(f,{enabled:t.events?.focus,visibleOnly:!0}),vCe(f,{role:"tooltip"}),xz(f,{enabled:typeof t.opened>"u"})]);jU({opened:o,position:t.position,positionDependencies:t.positionDependencies,floating:{refs:h,update:p}}),Vd(()=>{t.onPositionChange?.(g)},[g]);const V=o&&T&&T!==s;return{x:l,y:u,arrowX:v,arrowY:b,reference:h.setReference,floating:h.setFloating,getFloatingProps:z,getReferenceProps:D,isGroupPhase:V,opened:o,placement:g}}const h6={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Bv("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},n2e=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Ci(e),"--tooltip-bg":n?Ul(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Fm=In((t,e)=>{const n=pt("Tooltip",h6,t),{children:r,position:o,refProp:i,label:s,openDelay:a,closeDelay:l,onPositionChange:u,opened:f,defaultOpened:h,withinPortal:p,radius:g,color:v,classNames:b,styles:E,unstyled:T,style:P,className:D,withArrow:z,arrowSize:V,arrowOffset:$,arrowRadius:O,arrowPosition:R,offset:M,transitionProps:B,multiline:q,events:K,zIndex:F,disabled:ne,positionDependencies:oe,onClick:j,onMouseEnter:U,onMouseLeave:Z,inline:J,variant:Y,keepMounted:se,vars:te,portalProps:ie,mod:ue,floatingStrategy:ae,middlewares:ve,...De}=pt("Tooltip",h6,n),{dir:Ue}=zv(),Oe=_.useRef(null),rt=t2e({position:NU(Ue,o),closeDelay:l,openDelay:a,onPositionChange:u,opened:f,defaultOpened:h,events:K,arrowRef:Oe,arrowOffset:$,offset:typeof M=="number"?M+(z?V/2:0):M,positionDependencies:[...oe,r],inline:J,strategy:ae,middlewares:ve}),wt=En({name:"Tooltip",props:n,classes:XS,className:D,style:P,classNames:b,styles:E,unstyled:T,rootSelector:"tooltip",vars:te,varsResolver:n2e});if(!jv(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const tt=ou(rt.reference,SI(r),e),mn=GTe(B,{duration:100,transition:"fade"}),Ln=r.props;return C.jsxs(C.Fragment,{children:[C.jsx(Uv,{...ie,withinPortal:p,children:C.jsx(xh,{...mn,keepMounted:se,mounted:!ne&&!!rt.opened,duration:rt.isGroupPhase?10:mn.duration,children:$t=>C.jsxs(Lt,{...De,"data-fixed":ae==="fixed"||void 0,variant:Y,mod:[{multiline:q},ue],...rt.getFloatingProps({ref:rt.floating,className:wt("tooltip").className,style:{...wt("tooltip").style,...$t,zIndex:F,top:rt.y??0,left:rt.x??0}}),children:[s,C.jsx(MI,{ref:Oe,arrowX:rt.arrowX,arrowY:rt.arrowY,visible:z,position:rt.placement,arrowSize:V,arrowOffset:$,arrowRadius:O,arrowPosition:R,...wt("arrow")})]})})}),_.cloneElement(r,rt.getReferenceProps({onClick:j,onMouseEnter:U,onMouseLeave:Z,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:el(D,Ln.className),...Ln,[i]:tt}))]})});Fm.classes=XS;Fm.displayName="@mantine/core/Tooltip";Fm.Floating=QI;Fm.Group=ZI;var oq={root:"m_18320242","skeleton-fade":"m_299c329c"};const r2e={visible:!0,animate:!0},o2e=(t,{width:e,height:n,radius:r,circle:o})=>({root:{"--skeleton-height":ze(n),"--skeleton-width":ze(o?n:e),"--skeleton-radius":o?"1000px":r===void 0?void 0:Ci(r)}}),tC=In((t,e)=>{const n=pt("Skeleton",r2e,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,width:u,height:f,circle:h,visible:p,radius:g,animate:v,mod:b,...E}=n,T=En({name:"Skeleton",classes:oq,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:o2e});return C.jsx(Lt,{ref:e,...T("root"),mod:[{visible:p,animate:v},b],...E})});tC.classes=oq;tC.displayName="@mantine/core/Skeleton";var iq={root:"m_6d731127"};const i2e={gap:"md",align:"stretch",justify:"flex-start"},s2e=(t,{gap:e,align:n,justify:r})=>({root:{"--stack-gap":$v(e),"--stack-align":n,"--stack-justify":r}}),Kv=In((t,e)=>{const n=pt("Stack",i2e,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,align:u,justify:f,gap:h,variant:p,...g}=n,v=En({name:"Stack",props:n,classes:iq,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:s2e});return C.jsx(Lt,{ref:e,...v("root"),variant:p,...g})});Kv.classes=iq;Kv.displayName="@mantine/core/Stack";const[a2e,JI]=PS("Tabs component was not found in the tree");var Wv={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const l2e={},eN=In((t,e)=>{const n=pt("TabsList",l2e,t),{children:r,className:o,grow:i,justify:s,classNames:a,styles:l,style:u,mod:f,...h}=n,p=JI();return C.jsx(Lt,{...h,...p.getStyles("list",{className:o,style:u,classNames:a,styles:l,props:n,variant:p.variant}),ref:e,role:"tablist",variant:p.variant,mod:[{grow:i,orientation:p.orientation,placement:p.orientation==="vertical"&&p.placement,inverted:p.inverted},f],"aria-orientation":p.orientation,__vars:{"--tabs-justify":s},children:r})});eN.classes=Wv;eN.displayName="@mantine/core/TabsList";const c2e={},tN=In((t,e)=>{const n=pt("TabsPanel",c2e,t),{children:r,className:o,value:i,classNames:s,styles:a,style:l,mod:u,keepMounted:f,...h}=n,p=JI(),g=p.value===i,v=p.keepMounted||f||g?r:null;return C.jsx(Lt,{...h,...p.getStyles("panel",{className:o,classNames:s,styles:a,style:[l,g?void 0:{display:"none"}],props:n}),ref:e,mod:[{orientation:p.orientation},u],role:"tabpanel",id:p.getPanelId(i),"aria-labelledby":p.getTabId(i),children:v})});tN.classes=Wv;tN.displayName="@mantine/core/TabsPanel";const u2e={},nN=In((t,e)=>{const n=pt("TabsTab",u2e,t),{className:r,children:o,rightSection:i,leftSection:s,value:a,onClick:l,onKeyDown:u,disabled:f,color:h,style:p,classNames:g,styles:v,vars:b,mod:E,tabIndex:T,...P}=n,D=Ps(),{dir:z}=zv(),V=JI(),$=a===V.value,O=M=>{V.onChange(V.allowTabDeactivation&&a===V.value?null:a),l?.(M)},R={classNames:g,styles:v,props:n};return C.jsxs(Sh,{...P,...V.getStyles("tab",{className:r,style:p,variant:V.variant,...R}),disabled:f,unstyled:V.unstyled,variant:V.variant,mod:[{active:$,disabled:f,orientation:V.orientation,inverted:V.inverted,placement:V.orientation==="vertical"&&V.placement},E],ref:e,role:"tab",id:V.getTabId(a),"aria-selected":$,tabIndex:T!==void 0?T:$||V.value===null?0:-1,"aria-controls":V.getPanelId(a),onClick:O,__vars:{"--tabs-color":h?Ul(h,D):void 0},onKeyDown:aU({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:V.activateTabWithKeyboard,loop:V.loop,orientation:V.orientation||"horizontal",dir:z,onKeyDown:u}),children:[s&&C.jsx("span",{...V.getStyles("tabSection",R),"data-position":"left",children:s}),o&&C.jsx("span",{...V.getStyles("tabLabel",R),children:o}),i&&C.jsx("span",{...V.getStyles("tabSection",R),"data-position":"right",children:i})]})});nN.classes=Wv;nN.displayName="@mantine/core/TabsTab";const p6="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",d2e={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},f2e=(t,{radius:e,color:n,autoContrast:r})=>({root:{"--tabs-radius":Ci(e),"--tabs-color":Ul(n,t),"--tabs-text-color":V_e(r,t)?yU({color:n,theme:t,autoContrast:r}):void 0}}),Lc=In((t,e)=>{const n=pt("Tabs",d2e,t),{defaultValue:r,value:o,onChange:i,orientation:s,children:a,loop:l,id:u,activateTabWithKeyboard:f,allowTabDeactivation:h,variant:p,color:g,radius:v,inverted:b,placement:E,keepMounted:T,classNames:P,styles:D,unstyled:z,className:V,style:$,vars:O,autoContrast:R,mod:M,...B}=n,q=Hv(u),[K,F]=Lm({value:o,defaultValue:r,finalValue:null,onChange:i}),ne=En({name:"Tabs",props:n,classes:Wv,className:V,style:$,classNames:P,styles:D,unstyled:z,vars:O,varsResolver:f2e});return C.jsx(a2e,{value:{placement:E,value:K,orientation:s,id:q,loop:l,activateTabWithKeyboard:f,getTabId:GV(`${q}-tab`,p6),getPanelId:GV(`${q}-panel`,p6),onChange:F,allowTabDeactivation:h,variant:p,color:g,radius:v,inverted:b,keepMounted:T,unstyled:z,getStyles:ne},children:C.jsx(Lt,{ref:e,id:q,variant:p,mod:[{orientation:s,inverted:s==="horizontal"&&b,placement:s==="vertical"&&E},M],...ne("root"),...B,children:a})})});Lc.classes=Wv;Lc.displayName="@mantine/core/Tabs";Lc.Tab=nN;Lc.Panel=tN;Lc.List=eN;const h2e={},QS=In((t,e)=>{const n=pt("TextInput",h2e,t);return C.jsx(Bm,{component:"input",ref:e,...n,__staticSelector:"TextInput"})});QS.classes=Bm.classes;QS.displayName="@mantine/core/TextInput";const sq=(t,e,n=!1)=>{const r=[];function o(i,s="--bn"){for(const a in i){const l=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),u=`${s}-${l}`;typeof i[a]!="object"?(typeof i[a]=="number"&&(i[a]=`${i[a]}px`),n?e.style.removeProperty(u):e.style.setProperty(u,i[a].toString())):o(i[a],u)}}return o(t),r},m6=(t,e)=>sq(t,e),p2e={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},m2e=t=>sq(p2e,t,!0),aq=t=>C.jsxs(Kv,{gap:0,className:"bn-tooltip",children:[C.jsx(ql,{size:"sm",lineClamp:5,children:t.mainTooltip}),t.secondaryTooltip&&C.jsx(ql,{size:"xs",lineClamp:5,children:t.secondaryTooltip})]}),Nk=_.forwardRef((t,e)=>{const{className:n,children:r,mainTooltip:o,secondaryTooltip:i,icon:s,isSelected:a,isDisabled:l,onClick:u,label:f,variant:h,...p}=t;Zt(p,!1);const[g,v]=_.useState(!1),b=r?C.jsx(ol,{"aria-label":f,className:n,onMouseDown:E=>{A2()&&E.currentTarget.focus()},onClick:E=>{v(!0),u?.(E)},onPointerLeave:()=>v(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:h==="compact"?"compact-xs":"xs",disabled:l||!1,ref:e,...p,children:r}):C.jsx(Eh,{className:n,"aria-label":f,onMouseDown:E=>{A2()&&E.currentTarget.focus()},onClick:E=>{v(!0),u?.(E)},onPointerLeave:()=>v(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:h==="compact"?20:30,disabled:l||!1,ref:e,...p,children:s});return o?C.jsx(Fm,{disabled:g,withinPortal:!1,label:C.jsx(aq,{mainTooltip:o,secondaryTooltip:i}),children:b}):b}),g2e=_.forwardRef((t,e)=>{const{className:n,text:r,icon:o,isSelected:i,mainTooltip:s,secondaryTooltip:a,onClick:l,onMouseEnter:u,...f}=t;Zt(f,!1);const[h,p]=_.useState(!1),g=C.jsxs(YS,{className:n,checked:i===!0,wrapperProps:{onMouseEnter:u,onMouseLeave:()=>p(!1),onClick:v=>{p(!0),l?.(v)}},variant:"light",icon:null,ref:e,children:[C.jsx("span",{children:o}),C.jsx("span",{children:r})]});return!s||h?g:C.jsx(Fm,{refProp:"rootRef",withinPortal:!1,label:C.jsx(aq,{mainTooltip:s,secondaryTooltip:a}),children:g})}),y2e=_.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return Zt(o),C.jsx(Xo,{className:n,ref:e,children:r})}),v2e=_.forwardRef((t,e)=>{const{className:n,children:r,headerText:o,selected:i,onFocus:s,onBlur:a,tabIndex:l,...u}=t;Zt(u,!1);const f=_.useRef(null);return _.useEffect(()=>{var h;i&&((h=f.current)==null||h.scrollIntoView({behavior:"smooth",block:"center"}))},[i]),C.jsxs(qv,{className:mr(n,i?"selected":""),onFocus:s,onBlur:a,tabIndex:l,ref:gI([e,f]),children:[o&&C.jsx(ql,{className:"bn-header-text",children:o}),r]})}),b2e=_.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return Zt(o,!1),C.jsx(qv.Section,{className:n,ref:e,children:r})}),w2e=_.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return Zt(o,!1),C.jsx(UI,{className:n,label:C.jsx(ql,{children:r}),ref:e})}),C2e=_.forwardRef((t,e)=>{const{authorInfo:n,timeString:r,edited:o,...i}=t,s=Kt();return Zt(i,!1),n==="loading"?C.jsxs(Xo,{children:[C.jsx(tC,{height:24,width:24}),C.jsx("div",{children:C.jsx(tC,{height:12,width:100})})]}):C.jsxs(Xo,{children:[C.jsx(KS,{src:n.avatarUrl,alt:n.username,radius:"xl",size:"sm",color:"initials"}),C.jsxs(ql,{fz:"sm",fw:"bold",children:[n.username,C.jsxs(ql,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[r," ",o&&`(${s.comments.edited})`]})]})]})}),S2e=_.forwardRef((t,e)=>{const{className:n,showActions:r,authorInfo:o,timeString:i,edited:s,actions:a,children:l,...u}=t,{hovered:f,ref:h}=GEe(),{focused:p,ref:g}=hU(),v=gI([e,h]);return Zt(u,!1),C.jsxs(Xo,{pos:"relative",ref:v,className:n,children:[a&&(r===!0||r===void 0||r==="hover"&&f||p)?C.jsx(Xo,{ref:g,style:{position:"absolute",right:0,top:0,zIndex:10},children:a}):null,C.jsx(C2e,{...t}),l]})}),x2e=_.forwardRef((t,e)=>{const{className:n,autoFocus:r,onFocus:o,onBlur:i,editor:s,editable:a,...l}=t;return Zt(l,!1),C.jsx(fq,{autoFocus:r,className:n,editor:t.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:a,ref:e,onFocus:o,onBlur:i,children:C.jsx(Xz,{formattingToolbar:E2e})})}),E2e=()=>{const t=Wz([]).filter(e=>e.key!=="nestBlockButton"&&e.key!=="unnestBlockButton");return C.jsx(Yz,{blockTypeSelectItems:[],children:t})},_2e=_.forwardRef((t,e)=>{const{className:n,name:r,label:o,variant:i,icon:s,value:a,autoFocus:l,placeholder:u,disabled:f,onKeyDown:h,onChange:p,onSubmit:g,autoComplete:v,rightSection:b,...E}=t;return Zt(E),C.jsx(QS,{size:"xs",className:mr(n||"",i==="large"?"bn-mt-input-large":""),ref:e,name:r,label:o,leftSection:s,value:a,autoFocus:l,"data-autofocus":l?"true":void 0,rightSection:b,placeholder:u,disabled:f,onKeyDown:h,onChange:p,onSubmit:g,autoComplete:v})});var lq={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},g6=Pe.createContext&&Pe.createContext(lq),k2e=["attr","size","title"];function T2e(t,e){if(t==null)return{};var n=A2e(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function A2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function nC(){return nC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nC.apply(this,arguments)}function y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function rC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y6(Object(n),!0).forEach(function(r){R2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R2e(t,e,n){return e=M2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M2e(t){var e=I2e(t,"string");return typeof e=="symbol"?e:e+""}function I2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cq(t){return t&&t.map((e,n)=>Pe.createElement(e.tag,rC({key:n},e.attr),cq(e.child)))}function uq(t){return e=>Pe.createElement(N2e,nC({attr:rC({},t.attr)},e),cq(t.child))}function N2e(t){var e=n=>{var{attr:r,size:o,title:i}=t,s=T2e(t,k2e),a=o||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Pe.createElement("svg",nC({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:rC(rC({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&Pe.createElement("title",null,i),t.children)};return g6!==void 0?Pe.createElement(g6.Consumer,null,n=>e(n)):e(lq)}function D2e(t){return uq({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}function O2e(t){return uq({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(t)}const dq=_.createContext(void 0),P2e=_.forwardRef((t,e)=>{const{children:n,onOpenChange:r,position:o,sub:i,...s}=t;Zt(s);const[a,l]=_.useState(!1),u=_.useRef(null),f=_.useRef(void 0),h=_.useCallback(()=>{f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{l(!1)},250)},[]),p=_.useCallback(()=>{f.current&&clearTimeout(f.current),l(!0)},[]);return C.jsx(dq.Provider,{value:{onMenuMouseOver:p,onMenuMouseLeave:h},children:C.jsx(jr.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:Fv(e,u),onMouseOver:p,onMouseLeave:h,children:C.jsx(jr,{portalProps:{target:u.current?u.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:a,onChange:r,position:o,children:n})})})}),L2e=t=>{const{children:e,onOpenChange:n,position:r,sub:o,...i}=t;return Zt(i),o?C.jsx(P2e,{...t}):C.jsx(jr,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:e})},V2e=_.forwardRef((t,e)=>{const{className:n,children:r,icon:o,checked:i,subTrigger:s,onClick:a,...l}=t;return Zt(l,!1),s?C.jsxs("div",{onClick:u=>{u.preventDefault(),u.stopPropagation()},ref:e,...l,children:[r,C.jsx(O2e,{size:15})]}):C.jsx(jr.Item,{className:n,ref:e,leftSection:o,rightSection:i?C.jsx(jI,{size:10}):i===!1?C.jsx("div",{className:"bn-tick-space"}):null,onClick:a,...l,children:r})}),j2e=t=>{const{children:e,sub:n,...r}=t;return Zt(r),C.jsx(jr.Target,{children:e})},B2e=_.forwardRef((t,e)=>{const{className:n,children:r,sub:o,...i}=t;Zt(i);const s=_.useContext(dq);return C.jsx(jr.Dropdown,{className:n,ref:e,onMouseOver:s?.onMenuMouseOver,onMouseLeave:s?.onMenuMouseLeave,children:r})}),$2e=_.forwardRef((t,e)=>{const{className:n,...r}=t;return Zt(r),C.jsx(jr.Divider,{className:n,ref:e})}),H2e=_.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return Zt(o),C.jsx(jr.Label,{className:n,ref:e,children:r})}),F2e=_.forwardRef((t,e)=>{const{className:n,children:r,icon:o,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,label:u,...f}=t;return Zt(f,!1),o?C.jsx(Eh,{size:24,className:n,ref:e,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":u,...f,children:o}):C.jsx(ol,{className:n,ref:e,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":u,...f,children:r})}),z2e=_.forwardRef((t,e)=>{const{className:n,tabs:r,defaultOpenTab:o,openTab:i,setOpenTab:s,loading:a,...l}=t;return Zt(l),C.jsx(Xo,{className:n,ref:e,children:C.jsxs(Lc,{value:i,defaultValue:o,onChange:s,children:[a&&C.jsx(GI,{visible:a}),C.jsx(Lc.List,{children:r.map(u=>C.jsx(Lc.Tab,{"data-test":`${u.name.toLowerCase()}-tab`,value:u.name,children:u.name},u.name))}),r.map(u=>C.jsx(Lc.Panel,{value:u.name,children:u.tabPanel},u.name))]})})}),U2e=_.forwardRef((t,e)=>{const{className:n,children:r,onClick:o,label:i,...s}=t;return Zt(s),C.jsx(ol,{size:"xs","aria-label":i,className:n,ref:e,onClick:o,...s,children:r})}),q2e=_.forwardRef((t,e)=>{const{className:n,accept:r,value:o,placeholder:i,onChange:s,...a}=t;return Zt(a),C.jsx(PTe,{size:"xs",className:n,ref:e,accept:r,value:o,placeholder:i,onChange:s,...a})}),G2e=_.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return Zt(o),C.jsx("div",{className:n,ref:e,children:r})}),K2e=_.forwardRef((t,e)=>{const{className:n,value:r,placeholder:o,onKeyDown:i,onChange:s,...a}=t;return Zt(a),C.jsx(QS,{size:"xs","data-test":"embed-input",className:n,ref:e,value:r,placeholder:o,onKeyDown:i,onChange:s})}),W2e=t=>{const{opened:e,position:n,children:r,...o}=t;return Zt(o),C.jsx(Kd,{withinPortal:!1,opened:e,position:n,children:r})},Y2e=t=>{const{children:e,...n}=t;return Zt(n),C.jsx(NI,{children:e})},X2e=_.forwardRef((t,e)=>{const{className:n,children:r,variant:o,...i}=t;return Zt(i),C.jsx($S,{className:n,ref:e,children:r})}),Q2e=_.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return Zt(o,!1),C.jsx(Xo,{align:"center",gap:0,className:n,ref:e,...o,children:r})}),Z2e=_.forwardRef((t,e)=>{const{className:n,children:r,icon:o,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,label:u,...f}=t;return Zt(f,!1),o?C.jsx(Eh,{size:24,className:n,ref:e,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":u,...f,children:o}):C.jsx(ol,{className:n,ref:e,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":u,...f,children:r})}),J2e=_.forwardRef((t,e)=>{const{className:n,children:r,id:o,...i}=t;return Zt(i),C.jsx(Kv,{gap:0,className:n,ref:e,id:o,role:"listbox",children:r})}),eAe=_.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return Zt(o),C.jsx(Xo,{className:n,ref:e,children:C.jsx(Xo,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),tAe=_.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:o,item:i,id:s,...a}=t;Zt(a);const l=_.useRef(null);return _.useEffect(()=>{if(!l.current||!r)return;const u=oU(l.current,document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu"));u==="top"?l.current.scrollIntoView(!0):u==="bottom"&&l.current.scrollIntoView(!1)},[r]),C.jsxs(Xo,{gap:0,className:n,ref:Fv(e,l),id:s,role:"option",onMouseDown:u=>u.preventDefault(),onClick:o,"aria-selected":r||void 0,children:[i.icon&&C.jsx(Xo,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:i.icon}),C.jsxs(Kv,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[C.jsx(ql,{className:"bn-mt-suggestion-menu-item-title",children:i.title}),C.jsx(ql,{className:"bn-mt-suggestion-menu-item-subtitle",children:i.subtext})]}),i.badge&&C.jsx(Xo,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:C.jsx($I,{size:"xs",children:i.badge})})]})}),nAe=_.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return Zt(o),C.jsx(Xo,{className:n,ref:e,children:r})}),rAe=_.forwardRef((t,e)=>{const{className:n,...r}=t;return Zt(r),C.jsx(Wd,{className:n,type:"dots",size:16,ref:e})}),oAe=_.forwardRef((t,e)=>{const{className:n,children:r,id:o,columns:i,...s}=t;return Zt(s),C.jsx("div",{className:n,style:{gridTemplateColumns:`repeat(${i}, 1fr)`},ref:e,id:o,role:"grid",children:r})}),iAe=_.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...i}=t;return Zt(i),C.jsx(Xo,{className:n,style:{gridColumn:`1 / ${o+1}`},ref:e,children:C.jsx(Xo,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),sAe=_.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:o,item:i,id:s,...a}=t;Zt(a);const l=_.useRef(null);return _.useEffect(()=>{if(!l.current||!r)return;const u=oU(l.current,document.querySelector(".bn-grid-suggestion-menu"));u==="top"?l.current.scrollIntoView(!0):u==="bottom"&&l.current.scrollIntoView(!1)},[r]),C.jsx("div",{className:n,ref:Fv(e,l),id:s,role:"option",onClick:o,"aria-selected":r||void 0,children:i.icon})}),aAe=_.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...i}=t;return Zt(i),C.jsx(Wd,{className:n,style:{gridColumn:`1 / ${o+1}`},type:"dots",ref:e})}),lAe=_.forwardRef((t,e)=>{const{children:n,className:r,onMouseDown:o,onClick:i,...s}=t;return Zt(s,!1),C.jsx(ol,{className:r,ref:e,onMouseDown:o,onClick:i,...s,children:n})}),cAe=_.forwardRef((t,e)=>{const{className:n,children:r,draggable:o,onDragStart:i,onDragEnd:s,style:a,label:l,...u}=t;return Zt(u,!1),C.jsx(ol,{className:n,ref:e,"aria-label":l,draggable:o,onDragStart:i,onDragEnd:s,style:a,...u,children:r})}),Dk=_.forwardRef((t,e)=>{const{className:n,children:r,onMouseEnter:o,onMouseLeave:i,variant:s,...a}=t;Zt(a);const{ref:l,focused:u}=hU(),f=fU(u),h=Fv(e,l,f);return C.jsx(VI,{className:n,ref:h,role:"toolbar",onMouseEnter:o,onMouseLeave:i,gap:s==="action-toolbar"?2:void 0,children:r})}),Ok=_.forwardRef((t,e)=>{const{className:n,items:r,isDisabled:o,...i}=t;Zt(i);const s=r.filter(a=>a.isSelected)[0];return s?C.jsxs(jr,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:o,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[C.jsx(jr.Target,{children:C.jsx(ol,{onMouseDown:a=>{A2()&&a.currentTarget.focus()},leftSection:s.icon,rightSection:C.jsx(D2e,{}),size:"xs",variant:"subtle",disabled:o,children:s.text})}),C.jsx(jr.Dropdown,{className:n,ref:e,children:r.map(a=>C.jsx(jr.Item,{onClick:a.onClick,leftSection:a.icon,rightSection:a.isSelected?C.jsx(jI,{size:10,className:"bn-tick-icon"}):C.jsx("div",{className:"bn-tick-space"}),disabled:a.isDisabled,children:a.text},a.text))})]}):null}),uAe={FormattingToolbar:{Root:Dk,Button:Nk,Select:Ok},FilePanel:{Root:z2e,Button:U2e,FileInput:q2e,TabPanel:G2e,TextInput:K2e},GridSuggestionMenu:{Root:oAe,Item:sAe,EmptyItem:iAe,Loader:aAe},LinkToolbar:{Root:Dk,Button:Nk,Select:Ok},SideMenu:{Root:Q2e,Button:Z2e},SuggestionMenu:{Root:J2e,Item:tAe,EmptyItem:eAe,Label:nAe,Loader:rAe},TableHandle:{Root:cAe,ExtendButton:lAe},Generic:{Badge:{Root:g2e,Group:y2e},Form:{Root:t=>C.jsx("div",{children:t.children}),TextInput:_2e},Menu:{Root:L2e,Trigger:j2e,Dropdown:B2e,Divider:$2e,Label:H2e,Item:V2e,Button:F2e},Popover:{Root:W2e,Trigger:Y2e,Content:X2e},Toolbar:{Root:Dk,Button:Nk,Select:Ok}},Comments:{Comment:S2e,Editor:x2e,Card:v2e,CardSection:b2e,ExpandSectionsPrompt:w2e}},dAe={activeClassName:""},fq=t=>{const{className:e,theme:n,...r}=t,o=Zl(),i=eU(),s=o?.colorSchemePreference||i,a=_.useCallback(u=>{if(u&&(m2e(u),typeof n=="object")){if("light"in n&&"dark"in n){m6(n[s==="dark"?"dark":"light"],u);return}m6(n,u);return}},[s,n]),l=typeof n=="string"?n:s!=="no-preference"?s:"light";return C.jsx(Mz.Provider,{value:uAe,children:C.jsx(wU,{theme:dAe,cssVariablesSelector:".bn-mantine",getRootElement:()=>{},children:C.jsx(nEe,{"data-mantine-color-scheme":l,className:mr("bn-mantine",e||""),theme:typeof n=="object"?void 0:n,...r,ref:a})})})};var v6=1,fAe=.9,hAe=.8,pAe=.17,Pk=.1,Lk=.999,mAe=.9999,gAe=.99,yAe=/[\\\/_+.#"@\[\(\{&]/,vAe=/[\\\/_+.#"@\[\(\{&]/g,bAe=/[\s-]/,hq=/[\s-]/g;function Z2(t,e,n,r,o,i,s){if(i===e.length)return o===t.length?v6:gAe;var a=`${o},${i}`;if(s[a]!==void 0)return s[a];for(var l=r.charAt(i),u=n.indexOf(l,o),f=0,h,p,g,v;u>=0;)h=Z2(t,e,n,r,u+1,i+1,s),h>f&&(u===o?h*=v6:yAe.test(t.charAt(u-1))?(h*=hAe,g=t.slice(o,u-1).match(vAe),g&&o>0&&(h*=Math.pow(Lk,g.length))):bAe.test(t.charAt(u-1))?(h*=fAe,v=t.slice(o,u-1).match(hq),v&&o>0&&(h*=Math.pow(Lk,v.length))):(h*=pAe,o>0&&(h*=Math.pow(Lk,u-o))),t.charAt(u)!==e.charAt(i)&&(h*=mAe)),(h<Pk&&n.charAt(u-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(u-1)!==r.charAt(i))&&(p=Z2(t,e,n,r,u+1,i+2,s),p*Pk>h&&(h=p*Pk)),h>f&&(f=h),u=n.indexOf(l,u+1);return s[a]=f,f}function b6(t){return t.toLowerCase().replace(hq," ")}function wAe(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,Z2(t,e,b6(t),b6(e),0,0,{})}var jg='[cmdk-group=""]',Vk='[cmdk-group-items=""]',CAe='[cmdk-group-heading=""]',pq='[cmdk-item=""]',w6=`${pq}:not([aria-disabled="true"])`,J2="cmdk-item-select",bp="data-value",SAe=(t,e,n)=>wAe(t,e,n),mq=_.createContext(void 0),Yv=()=>_.useContext(mq),gq=_.createContext(void 0),rN=()=>_.useContext(gq),yq=_.createContext(void 0),vq=_.forwardRef((t,e)=>{let n=wp(()=>{var te,ie;return{search:"",value:(ie=(te=t.value)!=null?te:t.defaultValue)!=null?ie:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=wp(()=>new Set),o=wp(()=>new Map),i=wp(()=>new Map),s=wp(()=>new Set),a=bq(t),{label:l,children:u,value:f,onValueChange:h,filter:p,shouldFilter:g,loop:v,disablePointerSelection:b=!1,vimBindings:E=!0,...T}=t,P=ts(),D=ts(),z=ts(),V=_.useRef(null),$=DAe();ph(()=>{if(f!==void 0){let te=f.trim();n.current.value=te,O.emit()}},[f]),ph(()=>{$(6,F)},[]);let O=_.useMemo(()=>({subscribe:te=>(s.current.add(te),()=>s.current.delete(te)),snapshot:()=>n.current,setState:(te,ie,ue)=>{var ae,ve,De,Ue;if(!Object.is(n.current[te],ie)){if(n.current[te]=ie,te==="search")K(),B(),$(1,q);else if(te==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Oe=document.getElementById(z);Oe?Oe.focus():(ae=document.getElementById(P))==null||ae.focus()}if($(7,()=>{var Oe;n.current.selectedItemId=(Oe=ne())==null?void 0:Oe.id,O.emit()}),ue||$(5,F),((ve=a.current)==null?void 0:ve.value)!==void 0){let Oe=ie??"";(Ue=(De=a.current).onValueChange)==null||Ue.call(De,Oe);return}}O.emit()}},emit:()=>{s.current.forEach(te=>te())}}),[]),R=_.useMemo(()=>({value:(te,ie,ue)=>{var ae;ie!==((ae=i.current.get(te))==null?void 0:ae.value)&&(i.current.set(te,{value:ie,keywords:ue}),n.current.filtered.items.set(te,M(ie,ue)),$(2,()=>{B(),O.emit()}))},item:(te,ie)=>(r.current.add(te),ie&&(o.current.has(ie)?o.current.get(ie).add(te):o.current.set(ie,new Set([te]))),$(3,()=>{K(),B(),n.current.value||q(),O.emit()}),()=>{i.current.delete(te),r.current.delete(te),n.current.filtered.items.delete(te);let ue=ne();$(4,()=>{K(),ue?.getAttribute("id")===te&&q(),O.emit()})}),group:te=>(o.current.has(te)||o.current.set(te,new Set),()=>{i.current.delete(te),o.current.delete(te)}),filter:()=>a.current.shouldFilter,label:l||t["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:P,inputId:z,labelId:D,listInnerRef:V}),[]);function M(te,ie){var ue,ae;let ve=(ae=(ue=a.current)==null?void 0:ue.filter)!=null?ae:SAe;return te?ve(te,n.current.search,ie):0}function B(){if(!n.current.search||a.current.shouldFilter===!1)return;let te=n.current.filtered.items,ie=[];n.current.filtered.groups.forEach(ae=>{let ve=o.current.get(ae),De=0;ve.forEach(Ue=>{let Oe=te.get(Ue);De=Math.max(Oe,De)}),ie.push([ae,De])});let ue=V.current;oe().sort((ae,ve)=>{var De,Ue;let Oe=ae.getAttribute("id"),rt=ve.getAttribute("id");return((De=te.get(rt))!=null?De:0)-((Ue=te.get(Oe))!=null?Ue:0)}).forEach(ae=>{let ve=ae.closest(Vk);ve?ve.appendChild(ae.parentElement===ve?ae:ae.closest(`${Vk} > *`)):ue.appendChild(ae.parentElement===ue?ae:ae.closest(`${Vk} > *`))}),ie.sort((ae,ve)=>ve[1]-ae[1]).forEach(ae=>{var ve;let De=(ve=V.current)==null?void 0:ve.querySelector(`${jg}[${bp}="${encodeURIComponent(ae[0])}"]`);De?.parentElement.appendChild(De)})}function q(){let te=oe().find(ue=>ue.getAttribute("aria-disabled")!=="true"),ie=te?.getAttribute(bp);O.setState("value",ie||void 0)}function K(){var te,ie,ue,ae;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let ve=0;for(let De of r.current){let Ue=(ie=(te=i.current.get(De))==null?void 0:te.value)!=null?ie:"",Oe=(ae=(ue=i.current.get(De))==null?void 0:ue.keywords)!=null?ae:[],rt=M(Ue,Oe);n.current.filtered.items.set(De,rt),rt>0&&ve++}for(let[De,Ue]of o.current)for(let Oe of Ue)if(n.current.filtered.items.get(Oe)>0){n.current.filtered.groups.add(De);break}n.current.filtered.count=ve}function F(){var te,ie,ue;let ae=ne();ae&&(((te=ae.parentElement)==null?void 0:te.firstChild)===ae&&((ue=(ie=ae.closest(jg))==null?void 0:ie.querySelector(CAe))==null||ue.scrollIntoView({block:"nearest"})),ae.scrollIntoView({block:"nearest"}))}function ne(){var te;return(te=V.current)==null?void 0:te.querySelector(`${pq}[aria-selected="true"]`)}function oe(){var te;return Array.from(((te=V.current)==null?void 0:te.querySelectorAll(w6))||[])}function j(te){let ie=oe()[te];ie&&O.setState("value",ie.getAttribute(bp))}function U(te){var ie;let ue=ne(),ae=oe(),ve=ae.findIndex(Ue=>Ue===ue),De=ae[ve+te];(ie=a.current)!=null&&ie.loop&&(De=ve+te<0?ae[ae.length-1]:ve+te===ae.length?ae[0]:ae[ve+te]),De&&O.setState("value",De.getAttribute(bp))}function Z(te){let ie=ne(),ue=ie?.closest(jg),ae;for(;ue&&!ae;)ue=te>0?IAe(ue,jg):NAe(ue,jg),ae=ue?.querySelector(w6);ae?O.setState("value",ae.getAttribute(bp)):U(te)}let J=()=>j(oe().length-1),Y=te=>{te.preventDefault(),te.metaKey?J():te.altKey?Z(1):U(1)},se=te=>{te.preventDefault(),te.metaKey?j(0):te.altKey?Z(-1):U(-1)};return _.createElement(Pn.div,{ref:e,tabIndex:-1,...T,"cmdk-root":"",onKeyDown:te=>{var ie;(ie=T.onKeyDown)==null||ie.call(T,te);let ue=te.nativeEvent.isComposing||te.keyCode===229;if(!(te.defaultPrevented||ue))switch(te.key){case"n":case"j":{E&&te.ctrlKey&&Y(te);break}case"ArrowDown":{Y(te);break}case"p":case"k":{E&&te.ctrlKey&&se(te);break}case"ArrowUp":{se(te);break}case"Home":{te.preventDefault(),j(0);break}case"End":{te.preventDefault(),J();break}case"Enter":{te.preventDefault();let ae=ne();if(ae){let ve=new Event(J2);ae.dispatchEvent(ve)}}}}},_.createElement("label",{"cmdk-label":"",htmlFor:R.inputId,id:R.labelId,style:PAe},l),ZS(t,te=>_.createElement(gq.Provider,{value:O},_.createElement(mq.Provider,{value:R},te))))}),xAe=_.forwardRef((t,e)=>{var n,r;let o=ts(),i=_.useRef(null),s=_.useContext(yq),a=Yv(),l=bq(t),u=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:s?.forceMount;ph(()=>{if(!u)return a.item(o,s?.id)},[u]);let f=wq(o,i,[t.value,t.children,i],t.keywords),h=rN(),p=jd($=>$.value&&$.value===f.current),g=jd($=>u||a.filter()===!1?!0:$.search?$.filtered.items.get(o)>0:!0);_.useEffect(()=>{let $=i.current;if(!(!$||t.disabled))return $.addEventListener(J2,v),()=>$.removeEventListener(J2,v)},[g,t.onSelect,t.disabled]);function v(){var $,O;b(),(O=($=l.current).onSelect)==null||O.call($,f.current)}function b(){h.setState("value",f.current,!0)}if(!g)return null;let{disabled:E,value:T,onSelect:P,forceMount:D,keywords:z,...V}=t;return _.createElement(Pn.div,{ref:Uc(i,e),...V,id:o,"cmdk-item":"",role:"option","aria-disabled":!!E,"aria-selected":!!p,"data-disabled":!!E,"data-selected":!!p,onPointerMove:E||a.getDisablePointerSelection()?void 0:b,onClick:E?void 0:v},t.children)}),EAe=_.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:o,...i}=t,s=ts(),a=_.useRef(null),l=_.useRef(null),u=ts(),f=Yv(),h=jd(g=>o||f.filter()===!1?!0:g.search?g.filtered.groups.has(s):!0);ph(()=>f.group(s),[]),wq(s,a,[t.value,t.heading,l]);let p=_.useMemo(()=>({id:s,forceMount:o}),[o]);return _.createElement(Pn.div,{ref:Uc(a,e),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&_.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),ZS(t,g=>_.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},_.createElement(yq.Provider,{value:p},g))))}),_Ae=_.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,o=_.useRef(null),i=jd(s=>!s.search);return!n&&!i?null:_.createElement(Pn.div,{ref:Uc(o,e),...r,"cmdk-separator":"",role:"separator"})}),kAe=_.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,o=t.value!=null,i=rN(),s=jd(u=>u.search),a=jd(u=>u.selectedItemId),l=Yv();return _.useEffect(()=>{t.value!=null&&i.setState("search",t.value)},[t.value]),_.createElement(Pn.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":a,id:l.inputId,type:"text",value:o?t.value:s,onChange:u=>{o||i.setState("search",u.target.value),n?.(u.target.value)}})}),TAe=_.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...o}=t,i=_.useRef(null),s=_.useRef(null),a=jd(u=>u.selectedItemId),l=Yv();return _.useEffect(()=>{if(s.current&&i.current){let u=s.current,f=i.current,h,p=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let g=u.offsetHeight;f.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return p.observe(u),()=>{cancelAnimationFrame(h),p.unobserve(u)}}},[]),_.createElement(Pn.div,{ref:Uc(i,e),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":r,id:l.listId},ZS(t,u=>_.createElement("div",{ref:Uc(s,l.listInnerRef),"cmdk-list-sizer":""},u)))}),AAe=_.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:i,container:s,...a}=t;return _.createElement(CC,{open:n,onOpenChange:r},_.createElement(SC,{container:s},_.createElement(xC,{"cmdk-overlay":"",className:o}),_.createElement(EC,{"aria-label":t.label,"cmdk-dialog":"",className:i},_.createElement(vq,{ref:e,...a}))))}),RAe=_.forwardRef((t,e)=>jd(n=>n.filtered.count===0)?_.createElement(Pn.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),MAe=_.forwardRef((t,e)=>{let{progress:n,children:r,label:o="Loading...",...i}=t;return _.createElement(Pn.div,{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},ZS(t,s=>_.createElement("div",{"aria-hidden":!0},s)))}),zm=Object.assign(vq,{List:TAe,Item:xAe,Input:kAe,Group:EAe,Separator:_Ae,Dialog:AAe,Empty:RAe,Loading:MAe});function IAe(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function NAe(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function bq(t){let e=_.useRef(t);return ph(()=>{e.current=t}),e}var ph=typeof window>"u"?_.useEffect:_.useLayoutEffect;function wp(t){let e=_.useRef();return e.current===void 0&&(e.current=t()),e}function jd(t){let e=rN(),n=()=>t(e.snapshot());return _.useSyncExternalStore(e.subscribe,n,n)}function wq(t,e,n,r=[]){let o=_.useRef(),i=Yv();return ph(()=>{var s;let a=(()=>{var u;for(let f of n){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(u=f.current.textContent)==null?void 0:u.trim():o.current}})(),l=r.map(u=>u.trim());i.value(t,a,l),(s=e.current)==null||s.setAttribute(bp,a),o.current=a}),o}var DAe=()=>{let[t,e]=_.useState(),n=wp(()=>new Map);return ph(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,o)=>{n.current.set(r,o),e({})}};function OAe(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function ZS({asChild:t,children:e},n){return t&&_.isValidElement(e)?_.cloneElement(OAe(e),{ref:e.ref},n(e.props.children)):n(e)}var PAe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Cq({...t}){return C.jsx(CC,{"data-slot":"dialog",...t})}function LAe({...t}){return C.jsx(SC,{"data-slot":"dialog-portal",...t})}function VAe({...t}){return C.jsx(mm,{"data-slot":"dialog-close",...t})}function jAe({className:t,...e}){return C.jsx(xC,{"data-slot":"dialog-overlay",className:Mt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function Sq({className:t,children:e,showCloseButton:n=!0,...r}){return C.jsxs(LAe,{"data-slot":"dialog-portal",children:[C.jsx(jAe,{}),C.jsxs(EC,{"data-slot":"dialog-content",className:Mt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:[e,n&&C.jsxs(mm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[C.jsx(N6,{}),C.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function BAe({className:t,...e}){return C.jsx("div",{"data-slot":"dialog-header",className:Mt("flex flex-col gap-2 text-center sm:text-left",t),...e})}function $Ae({className:t,...e}){return C.jsx("div",{"data-slot":"dialog-footer",className:Mt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function xq({className:t,...e}){return C.jsx(vA,{"data-slot":"dialog-title",className:Mt("text-lg leading-none font-semibold",t),...e})}function Eq({className:t,...e}){return C.jsx(bA,{"data-slot":"dialog-description",className:Mt("text-muted-foreground text-sm",t),...e})}function oC({className:t,...e}){return C.jsx(zm,{"data-slot":"command",className:Mt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...e})}function HAe({title:t="Command Palette",description:e="Search for a command to run...",children:n,className:r,showCloseButton:o=!0,...i}){return C.jsxs(Cq,{...i,children:[C.jsxs(BAe,{className:"sr-only",children:[C.jsx(xq,{children:t}),C.jsx(Eq,{children:e})]}),C.jsx(Sq,{className:Mt("overflow-hidden p-0",r),showCloseButton:o,children:C.jsx(oC,{className:"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:n})})]})}function iC({className:t,...e}){return C.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[C.jsx(Fk,{className:"size-4 shrink-0 opacity-50"}),C.jsx(zm.Input,{"data-slot":"command-input",className:Mt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...e})]})}function sC({className:t,...e}){return C.jsx(zm.List,{"data-slot":"command-list",className:Mt("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...e})}function aC({...t}){return C.jsx(zm.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function lC({className:t,...e}){return C.jsx(zm.Group,{"data-slot":"command-group",className:Mt("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...e})}function cC({className:t,...e}){return C.jsx(zm.Item,{"data-slot":"command-item",className:Mt("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}var JS="Popover",[_q,GIe]=Jc(JS,[vm]),Xv=vm(),[FAe,Yd]=_q(JS),kq=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:s=!1}=t,a=Xv(e),l=_.useRef(null),[u,f]=_.useState(!1),[h,p]=iv({prop:r,defaultProp:o??!1,onChange:i,caller:JS});return C.jsx(MA,{...a,children:C.jsx(FAe,{scope:e,contentId:ts(),triggerRef:l,open:h,onOpenChange:p,onOpenToggle:_.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:u,onCustomAnchorAdd:_.useCallback(()=>f(!0),[]),onCustomAnchorRemove:_.useCallback(()=>f(!1),[]),modal:s,children:n})})};kq.displayName=JS;var Tq="PopoverAnchor",zAe=_.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=Yd(Tq,n),i=Xv(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:a}=o;return _.useEffect(()=>(s(),()=>a()),[s,a]),C.jsx(RC,{...i,...r,ref:e})});zAe.displayName=Tq;var Aq="PopoverTrigger",Rq=_.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=Yd(Aq,n),i=Xv(n),s=Mr(e,o.triggerRef),a=C.jsx(Pn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Oq(o.open),...r,ref:s,onClick:kt(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?a:C.jsx(RC,{asChild:!0,...i,children:a})});Rq.displayName=Aq;var oN="PopoverPortal",[UAe,qAe]=_q(oN,{forceMount:void 0}),Mq=t=>{const{__scopePopover:e,forceMount:n,children:r,container:o}=t,i=Yd(oN,e);return C.jsx(UAe,{scope:e,forceMount:n,children:C.jsx(ya,{present:n||i.open,children:C.jsx(av,{asChild:!0,container:o,children:r})})})};Mq.displayName=oN;var fm="PopoverContent",Iq=_.forwardRef((t,e)=>{const n=qAe(fm,t.__scopePopover),{forceMount:r=n.forceMount,...o}=t,i=Yd(fm,t.__scopePopover);return C.jsx(ya,{present:r||i.open,children:i.modal?C.jsx(KAe,{...o,ref:e}):C.jsx(WAe,{...o,ref:e})})});Iq.displayName=fm;var GAe=Gf("PopoverContent.RemoveScroll"),KAe=_.forwardRef((t,e)=>{const n=Yd(fm,t.__scopePopover),r=_.useRef(null),o=Mr(e,r),i=_.useRef(!1);return _.useEffect(()=>{const s=r.current;if(s)return hA(s)},[]),C.jsx(bC,{as:GAe,allowPinchZoom:!0,children:C.jsx(Nq,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:kt(t.onCloseAutoFocus,s=>{s.preventDefault(),i.current||n.triggerRef.current?.focus()}),onPointerDownOutside:kt(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,u=a.button===2||l;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:kt(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),WAe=_.forwardRef((t,e)=>{const n=Yd(fm,t.__scopePopover),r=_.useRef(!1),o=_.useRef(!1);return C.jsx(Nq,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const s=i.target;n.triggerRef.current?.contains(s)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),Nq=_.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:f,...h}=t,p=Yd(fm,n),g=Xv(n);return fA(),C.jsx(yC,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:C.jsx(sv,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:f,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:C.jsx(IA,{"data-state":Oq(p.open),role:"dialog",id:p.contentId,...g,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Dq="PopoverClose",YAe=_.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=Yd(Dq,n);return C.jsx(Pn.button,{type:"button",...r,ref:e,onClick:kt(t.onClick,()=>o.onOpenChange(!1))})});YAe.displayName=Dq;var XAe="PopoverArrow",QAe=_.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=Xv(n);return C.jsx(NA,{...o,...r,ref:e})});QAe.displayName=XAe;function Oq(t){return t?"open":"closed"}var ZAe=kq,JAe=Rq,eRe=Mq,tRe=Iq;function eA({...t}){return C.jsx(ZAe,{"data-slot":"popover",...t})}function tA({...t}){return C.jsx(JAe,{"data-slot":"popover-trigger",...t})}function nA({className:t,align:e="center",sideOffset:n=4,...r}){return C.jsx(eRe,{children:C.jsx(tRe,{"data-slot":"popover-content",align:e,sideOffset:n,className:Mt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...r})})}function C6({classorbook:t}){const e=NC(()=>ao.ClassorBook.toArray(),[],[]),{icons:n,pageClass:r,setPageClass:o,pageBook:i,setPageBook:s,SyncedQueue:a}=wd(),[l,u]=_.useState(!1),f=Array.from(new Set(e.map(h=>h.classId)));return t==="class"?C.jsxs(eA,{open:l,onOpenChange:u,children:[C.jsx(tA,{asChild:!0,className:"mx-2",children:C.jsxs(Kf,{variant:"outline",role:"combobox","aria-expanded":l,className:"justify-between",children:[r?e.find(h=>h.classId===r)?.classId:`Select ${t}`,C.jsx(Hk,{className:"opacity-50"})]})}),C.jsx(nA,{className:"w-[350px] p-0",children:C.jsxs(oC,{children:[C.jsx(iC,{placeholder:`Search ${t}`,className:"h-9"}),C.jsxs(sC,{children:[C.jsx(aC,{children:"No framework found."}),C.jsx(lC,{children:f.map(h=>C.jsxs(cC,{value:h,onSelect:p=>{o(p===r?"":p),s(""),u(!1)},children:[C.jsxs("div",{className:"flex gap-2 items-center",children:[C.jsx("img",{src:n.find(p=>p.value===h)?.url||n.find(p=>p.value==="placeholder")?.url,className:"h-6 aspect-square"}),C.jsx("span",{children:h})]}),C.jsx($k,{className:Mt("ml-auto",r===h?"opacity-100":"opacity-0")})]},h))})]})]})})]}):C.jsxs(eA,{open:l,onOpenChange:u,children:[C.jsx(tA,{asChild:!0,className:"mx-2",children:C.jsxs(Kf,{variant:"outline",role:"combobox","aria-expanded":l,className:"justify-between",children:[i?e.find(h=>h.bookId===i)?.bookId:`Select ${t}`,C.jsx(Hk,{className:"opacity-50"})]})}),C.jsx(nA,{className:"w-[350px] p-0",children:C.jsxs(oC,{children:[C.jsx(iC,{placeholder:`Search ${t}`,className:"h-9",onKeyDown:async h=>{if(h.key==="F2"){const p=prompt("Enter class name:",r),g=prompt("Enter book name:");if(!p||!g)return;o(p),s(g);const v={id:LA(),classId:p,bookId:g};await ao.ClassorBook.add(v),await a(v.id,"ClassorBook","add")}}}),C.jsxs(sC,{children:[C.jsx(aC,{children:"No framework found."}),C.jsx(lC,{children:e.filter(h=>h.classId===r).map(h=>C.jsxs(cC,{value:h.bookId,onSelect:p=>{s(p===i?"":p),u(!1)},children:[C.jsxs("div",{className:"flex gap-2 items-center",children:[C.jsx("img",{src:n.find(p=>p.value===h.bookId)?.url||n.find(p=>p.value==="placeholder")?.url,className:"h-6 aspect-square"}),C.jsx("span",{children:h.bookId})]}),C.jsx($k,{className:Mt("ml-auto",r===h.bookId?"opacity-100":"opacity-0")})]},h.bookId))})]})]})})]})}function nRe(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function Pq(t,e){return new Promise(function(n,r){let o;return rRe(t).then(function(i){try{return o=i,n(new Blob([e.slice(0,2),o,e.slice(2)],{type:"image/jpeg"}))}catch(s){return r(s)}},r)})}const rRe=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:o}})=>{const i=new DataView(o);let s=0;if(i.getUint16(s)!==65496)return n("not a valid JPEG");for(s+=2;;){const a=i.getUint16(s);if(a===65498)break;const l=i.getUint16(s+2);if(a===65505&&i.getUint32(s+4)===1165519206){const u=s+10;let f;switch(i.getUint16(u)){case 18761:f=!0;break;case 19789:f=!1;break;default:return n("TIFF header contains invalid endian")}if(i.getUint16(u+2,f)!==42)return n("TIFF header contains invalid version");const h=i.getUint32(u+4,f),p=u+h+2+12*i.getUint16(u+h,f);for(let g=u+h+2;g<p;g+=12)if(i.getUint16(g,f)==274){if(i.getUint16(g+2,f)!==3)return n("Orientation data type is invalid");if(i.getUint32(g+4,f)!==1)return n("Orientation data count is invalid");i.setUint16(g+8,1,f);break}return e(o.slice(s,s+2+l))}s+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var uC={},oRe={get exports(){return uC},set exports(t){uC=t}};(function(t){var e,n,r={};oRe.exports=r,r.parse=function(o,i){for(var s=r.bin.readUshort,a=r.bin.readUint,l=0,u={},f=new Uint8Array(o),h=f.length-4;a(f,h)!=101010256;)h--;l=h,l+=4;var p=s(f,l+=4);s(f,l+=2);var g=a(f,l+=2),v=a(f,l+=4);l+=4,l=v;for(var b=0;b<p;b++){a(f,l),l+=4,l+=4,l+=4,a(f,l+=4),g=a(f,l+=4);var E=a(f,l+=4),T=s(f,l+=4),P=s(f,l+2),D=s(f,l+4);l+=6;var z=a(f,l+=8);l+=4,l+=T+P+D,r._readLocal(f,z,u,g,E,i)}return u},r._readLocal=function(o,i,s,a,l,u){var f=r.bin.readUshort,h=r.bin.readUint;h(o,i),f(o,i+=4),f(o,i+=2);var p=f(o,i+=2);h(o,i+=2),h(o,i+=4),i+=4;var g=f(o,i+=8),v=f(o,i+=2);i+=2;var b=r.bin.readUTF8(o,i,g);if(i+=g,i+=v,u)s[b]={size:l,csize:a};else{var E=new Uint8Array(o.buffer,i);if(p==0)s[b]=new Uint8Array(E.buffer.slice(i,i+a));else{if(p!=8)throw"unknown compression method: "+p;var T=new Uint8Array(l);r.inflateRaw(E,T),s[b]=T}}},r.inflateRaw=function(o,i){return r.F.inflate(o,i)},r.inflate=function(o,i){return o[0],o[1],r.inflateRaw(new Uint8Array(o.buffer,o.byteOffset+2,o.length-6),i)},r.deflate=function(o,i){i==null&&(i={level:6});var s=0,a=new Uint8Array(50+Math.floor(1.1*o.length));a[s]=120,a[s+1]=156,s+=2,s=r.F.deflateRaw(o,a,s,i.level);var l=r.adler(o,0,o.length);return a[s+0]=l>>>24&255,a[s+1]=l>>>16&255,a[s+2]=l>>>8&255,a[s+3]=l>>>0&255,new Uint8Array(a.buffer,0,s+4)},r.deflateRaw=function(o,i){i==null&&(i={level:6});var s=new Uint8Array(50+Math.floor(1.1*o.length)),a=r.F.deflateRaw(o,s,a,i.level);return new Uint8Array(s.buffer,0,a)},r.encode=function(o,i){i==null&&(i=!1);var s=0,a=r.bin.writeUint,l=r.bin.writeUshort,u={};for(var f in o){var h=!r._noNeed(f)&&!i,p=o[f],g=r.crc.crc(p,0,p.length);u[f]={cpr:h,usize:p.length,crc:g,file:h?r.deflateRaw(p):p}}for(var f in u)s+=u[f].file.length+30+46+2*r.bin.sizeUTF8(f);s+=22;var v=new Uint8Array(s),b=0,E=[];for(var f in u){var T=u[f];E.push(b),b=r._writeHeader(v,b,f,T,0)}var P=0,D=b;for(var f in u)T=u[f],E.push(b),b=r._writeHeader(v,b,f,T,1,E[P++]);var z=b-D;return a(v,b,101010256),b+=4,l(v,b+=4,P),l(v,b+=2,P),a(v,b+=2,z),a(v,b+=4,D),b+=4,b+=2,v.buffer},r._noNeed=function(o){var i=o.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},r._writeHeader=function(o,i,s,a,l,u){var f=r.bin.writeUint,h=r.bin.writeUshort,p=a.file;return f(o,i,l==0?67324752:33639248),i+=4,l==1&&(i+=2),h(o,i,20),h(o,i+=2,0),h(o,i+=2,a.cpr?8:0),f(o,i+=2,0),f(o,i+=4,a.crc),f(o,i+=4,p.length),f(o,i+=4,a.usize),h(o,i+=4,r.bin.sizeUTF8(s)),h(o,i+=2,0),i+=2,l==1&&(i+=2,i+=2,f(o,i+=6,u),i+=4),i+=r.bin.writeUTF8(o,i,s),l==0&&(o.set(p,i),i+=p.length),i},r.crc={table:function(){for(var o=new Uint32Array(256),i=0;i<256;i++){for(var s=i,a=0;a<8;a++)1&s?s=3988292384^s>>>1:s>>>=1;o[i]=s}return o}(),update:function(o,i,s,a){for(var l=0;l<a;l++)o=r.crc.table[255&(o^i[s+l])]^o>>>8;return o},crc:function(o,i,s){return 4294967295^r.crc.update(4294967295,o,i,s)}},r.adler=function(o,i,s){for(var a=1,l=0,u=i,f=i+s;u<f;){for(var h=Math.min(u+5552,f);u<h;)l+=a+=o[u++];a%=65521,l%=65521}return l<<16|a},r.bin={readUshort:function(o,i){return o[i]|o[i+1]<<8},writeUshort:function(o,i,s){o[i]=255&s,o[i+1]=s>>8&255},readUint:function(o,i){return 16777216*o[i+3]+(o[i+2]<<16|o[i+1]<<8|o[i])},writeUint:function(o,i,s){o[i]=255&s,o[i+1]=s>>8&255,o[i+2]=s>>16&255,o[i+3]=s>>24&255},readASCII:function(o,i,s){for(var a="",l=0;l<s;l++)a+=String.fromCharCode(o[i+l]);return a},writeASCII:function(o,i,s){for(var a=0;a<s.length;a++)o[i+a]=s.charCodeAt(a)},pad:function(o){return o.length<2?"0"+o:o},readUTF8:function(o,i,s){for(var a,l="",u=0;u<s;u++)l+="%"+r.bin.pad(o[i+u].toString(16));try{a=decodeURIComponent(l)}catch{return r.bin.readASCII(o,i,s)}return a},writeUTF8:function(o,i,s){for(var a=s.length,l=0,u=0;u<a;u++){var f=s.charCodeAt(u);if((4294967168&f)==0)o[i+l]=f,l++;else if((4294965248&f)==0)o[i+l]=192|f>>6,o[i+l+1]=128|f>>0&63,l+=2;else if((4294901760&f)==0)o[i+l]=224|f>>12,o[i+l+1]=128|f>>6&63,o[i+l+2]=128|f>>0&63,l+=3;else{if((4292870144&f)!=0)throw"e";o[i+l]=240|f>>18,o[i+l+1]=128|f>>12&63,o[i+l+2]=128|f>>6&63,o[i+l+3]=128|f>>0&63,l+=4}}return l},sizeUTF8:function(o){for(var i=o.length,s=0,a=0;a<i;a++){var l=o.charCodeAt(a);if((4294967168&l)==0)s++;else if((4294965248&l)==0)s+=2;else if((4294901760&l)==0)s+=3;else{if((4292870144&l)!=0)throw"e";s+=4}}return s}},r.F={},r.F.deflateRaw=function(o,i,s,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],u=r.F.U,f=r.F._goodIndex;r.F._hash;var h=r.F._putsE,p=0,g=s<<3,v=0,b=o.length;if(a==0){for(;p<b;)h(i,g,p+(q=Math.min(65535,b-p))==b?1:0),g=r.F._copyExact(o,p,q,i,g+8),p+=q;return g>>>3}var E=u.lits,T=u.strt,P=u.prev,D=0,z=0,V=0,$=0,O=0,R=0;for(b>2&&(T[R=r.F._hash(o,0)]=0),p=0;p<b;p++){if(O=R,p+1<b-2){R=r.F._hash(o,p+1);var M=p+1&32767;P[M]=T[R],T[R]=M}if(v<=p){(D>14e3||z>26697)&&b-p>100&&(v<p&&(E[D]=p-v,D+=2,v=p),g=r.F._writeBlock(p==b-1||v==b?1:0,E,D,$,o,V,p-V,i,g),D=z=$=0,V=p);var B=0;p<b-2&&(B=r.F._bestMatch(o,p,P,O,Math.min(l[2],b-p),l[3]));var q=B>>>16,K=65535&B;if(B!=0){K=65535&B;var F=f(q=B>>>16,u.of0);u.lhst[257+F]++;var ne=f(K,u.df0);u.dhst[ne]++,$+=u.exb[F]+u.dxb[ne],E[D]=q<<23|p-v,E[D+1]=K<<16|F<<8|ne,D+=2,v=p+q}else u.lhst[o[p]]++;z++}}for(V==p&&o.length!=0||(v<p&&(E[D]=p-v,D+=2,v=p),g=r.F._writeBlock(1,E,D,$,o,V,p-V,i,g),D=0,z=0,D=z=$=0,V=p);(7&g)!=0;)g++;return g>>>3},r.F._bestMatch=function(o,i,s,a,l,u){var f=32767&i,h=s[f],p=f-h+32768&32767;if(h==f||a!=r.F._hash(o,i-p))return 0;for(var g=0,v=0,b=Math.min(32767,i);p<=b&&--u!=0&&h!=f;){if(g==0||o[i+g]==o[i+g-p]){var E=r.F._howLong(o,i,p);if(E>g){if(v=p,(g=E)>=l)break;p+2<E&&(E=p+2);for(var T=0,P=0;P<E-2;P++){var D=i-p+P+32768&32767,z=D-s[D]+32768&32767;z>T&&(T=z,h=D)}}}p+=(f=h)-(h=s[f])+32768&32767}return g<<16|v},r.F._howLong=function(o,i,s){if(o[i]!=o[i-s]||o[i+1]!=o[i+1-s]||o[i+2]!=o[i+2-s])return 0;var a=i,l=Math.min(o.length,i+258);for(i+=3;i<l&&o[i]==o[i-s];)i++;return i-a},r.F._hash=function(o,i){return(o[i]<<8|o[i+1])+(o[i+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(o,i,s,a,l,u,f,h,p){var g,v,b,E,T,P,D,z,V,$=r.F.U,O=r.F._putsF,R=r.F._putsE;$.lhst[256]++,v=(g=r.F.getTrees())[0],b=g[1],E=g[2],T=g[3],P=g[4],D=g[5],z=g[6],V=g[7];var M=32+((p+3&7)==0?0:8-(p+3&7))+(f<<3),B=a+r.F.contSize($.fltree,$.lhst)+r.F.contSize($.fdtree,$.dhst),q=a+r.F.contSize($.ltree,$.lhst)+r.F.contSize($.dtree,$.dhst);q+=14+3*D+r.F.contSize($.itree,$.ihst)+(2*$.ihst[16]+3*$.ihst[17]+7*$.ihst[18]);for(var K=0;K<286;K++)$.lhst[K]=0;for(K=0;K<30;K++)$.dhst[K]=0;for(K=0;K<19;K++)$.ihst[K]=0;var F=M<B&&M<q?0:B<q?1:2;if(O(h,p,o),O(h,p+1,F),p+=3,F==0){for(;(7&p)!=0;)p++;p=r.F._copyExact(l,u,f,h,p)}else{var ne,oe;if(F==1&&(ne=$.fltree,oe=$.fdtree),F==2){r.F.makeCodes($.ltree,v),r.F.revCodes($.ltree,v),r.F.makeCodes($.dtree,b),r.F.revCodes($.dtree,b),r.F.makeCodes($.itree,E),r.F.revCodes($.itree,E),ne=$.ltree,oe=$.dtree,R(h,p,T-257),R(h,p+=5,P-1),R(h,p+=5,D-4),p+=4;for(var j=0;j<D;j++)R(h,p+3*j,$.itree[1+($.ordr[j]<<1)]);p+=3*D,p=r.F._codeTiny(z,$.itree,h,p),p=r.F._codeTiny(V,$.itree,h,p)}for(var U=u,Z=0;Z<s;Z+=2){for(var J=i[Z],Y=J>>>23,se=U+(8388607&J);U<se;)p=r.F._writeLit(l[U++],ne,h,p);if(Y!=0){var te=i[Z+1],ie=te>>16,ue=te>>8&255,ae=255&te;R(h,p=r.F._writeLit(257+ue,ne,h,p),Y-$.of0[ue]),p+=$.exb[ue],O(h,p=r.F._writeLit(ae,oe,h,p),ie-$.df0[ae]),p+=$.dxb[ae],U+=Y}}p=r.F._writeLit(256,ne,h,p)}return p},r.F._copyExact=function(o,i,s,a,l){var u=l>>>3;return a[u]=s,a[u+1]=s>>>8,a[u+2]=255-a[u],a[u+3]=255-a[u+1],u+=4,a.set(new Uint8Array(o.buffer,i,s),u),l+(s+4<<3)},r.F.getTrees=function(){for(var o=r.F.U,i=r.F._hufTree(o.lhst,o.ltree,15),s=r.F._hufTree(o.dhst,o.dtree,15),a=[],l=r.F._lenCodes(o.ltree,a),u=[],f=r.F._lenCodes(o.dtree,u),h=0;h<a.length;h+=2)o.ihst[a[h]]++;for(h=0;h<u.length;h+=2)o.ihst[u[h]]++;for(var p=r.F._hufTree(o.ihst,o.itree,7),g=19;g>4&&o.itree[1+(o.ordr[g-1]<<1)]==0;)g--;return[i,s,p,l,f,g,a,u]},r.F.getSecond=function(o){for(var i=[],s=0;s<o.length;s+=2)i.push(o[s+1]);return i},r.F.nonZero=function(o){for(var i="",s=0;s<o.length;s+=2)o[s+1]!=0&&(i+=(s>>1)+",");return i},r.F.contSize=function(o,i){for(var s=0,a=0;a<i.length;a++)s+=i[a]*o[1+(a<<1)];return s},r.F._codeTiny=function(o,i,s,a){for(var l=0;l<o.length;l+=2){var u=o[l],f=o[l+1];a=r.F._writeLit(u,i,s,a);var h=u==16?2:u==17?3:7;u>15&&(r.F._putsE(s,a,f,h),a+=h)}return a},r.F._lenCodes=function(o,i){for(var s=o.length;s!=2&&o[s-1]==0;)s-=2;for(var a=0;a<s;a+=2){var l=o[a+1],u=a+3<s?o[a+3]:-1,f=a+5<s?o[a+5]:-1,h=a==0?-1:o[a-1];if(l==0&&u==l&&f==l){for(var p=a+5;p+2<s&&o[p+2]==l;)p+=2;(g=Math.min(p+1-a>>>1,138))<11?i.push(17,g-3):i.push(18,g-11),a+=2*g-2}else if(l==h&&u==l&&f==l){for(p=a+5;p+2<s&&o[p+2]==l;)p+=2;var g=Math.min(p+1-a>>>1,6);i.push(16,g-3),a+=2*g-2}else i.push(l,0)}return s>>>1},r.F._hufTree=function(o,i,s){var a=[],l=o.length,u=i.length,f=0;for(f=0;f<u;f+=2)i[f]=0,i[f+1]=0;for(f=0;f<l;f++)o[f]!=0&&a.push({lit:f,f:o[f]});var h=a.length,p=a.slice(0);if(h==0)return 0;if(h==1){var g=a[0].lit;return p=g==0?1:0,i[1+(g<<1)]=1,i[1+(p<<1)]=1,1}a.sort(function(z,V){return z.f-V.f});var v=a[0],b=a[1],E=0,T=1,P=2;for(a[0]={lit:-1,f:v.f+b.f,l:v,r:b,d:0};T!=h-1;)v=E!=T&&(P==h||a[E].f<a[P].f)?a[E++]:a[P++],b=E!=T&&(P==h||a[E].f<a[P].f)?a[E++]:a[P++],a[T++]={lit:-1,f:v.f+b.f,l:v,r:b};var D=r.F.setDepth(a[T-1],0);for(D>s&&(r.F.restrictDepth(p,s,D),D=s),f=0;f<h;f++)i[1+(p[f].lit<<1)]=p[f].d;return D},r.F.setDepth=function(o,i){return o.lit!=-1?(o.d=i,i):Math.max(r.F.setDepth(o.l,i+1),r.F.setDepth(o.r,i+1))},r.F.restrictDepth=function(o,i,s){var a=0,l=1<<s-i,u=0;for(o.sort(function(h,p){return p.d==h.d?h.f-p.f:p.d-h.d}),a=0;a<o.length&&o[a].d>i;a++){var f=o[a].d;o[a].d=i,u+=l-(1<<s-f)}for(u>>>=s-i;u>0;)(f=o[a].d)<i?(o[a].d++,u-=1<<i-f-1):a++;for(;a>=0;a--)o[a].d==i&&u<0&&(o[a].d--,u++);u!=0&&console.log("debt left")},r.F._goodIndex=function(o,i){var s=0;return i[16|s]<=o&&(s|=16),i[8|s]<=o&&(s|=8),i[4|s]<=o&&(s|=4),i[2|s]<=o&&(s|=2),i[1|s]<=o&&(s|=1),s},r.F._writeLit=function(o,i,s,a){return r.F._putsF(s,a,i[o<<1]),a+i[1+(o<<1)]},r.F.inflate=function(o,i){var s=Uint8Array;if(o[0]==3&&o[1]==0)return i||new s(0);var a=r.F,l=a._bitsF,u=a._bitsE,f=a._decodeTiny,h=a.makeCodes,p=a.codes2map,g=a._get17,v=a.U,b=i==null;b&&(i=new s(o.length>>>2<<3));for(var E,T,P=0,D=0,z=0,V=0,$=0,O=0,R=0,M=0,B=0;P==0;)if(P=l(o,B,1),D=l(o,B+1,2),B+=3,D!=0){if(b&&(i=r.F._check(i,M+(1<<17))),D==1&&(E=v.flmap,T=v.fdmap,O=511,R=31),D==2){z=u(o,B,5)+257,V=u(o,B+5,5)+1,$=u(o,B+10,4)+4,B+=14;for(var q=0;q<38;q+=2)v.itree[q]=0,v.itree[q+1]=0;var K=1;for(q=0;q<$;q++){var F=u(o,B+3*q,3);v.itree[1+(v.ordr[q]<<1)]=F,F>K&&(K=F)}B+=3*$,h(v.itree,K),p(v.itree,K,v.imap),E=v.lmap,T=v.dmap,B=f(v.imap,(1<<K)-1,z+V,o,B,v.ttree);var ne=a._copyOut(v.ttree,0,z,v.ltree);O=(1<<ne)-1;var oe=a._copyOut(v.ttree,z,V,v.dtree);R=(1<<oe)-1,h(v.ltree,ne),p(v.ltree,ne,E),h(v.dtree,oe),p(v.dtree,oe,T)}for(;;){var j=E[g(o,B)&O];B+=15&j;var U=j>>>4;if(!(U>>>8))i[M++]=U;else{if(U==256)break;var Z=M+U-254;if(U>264){var J=v.ldef[U-257];Z=M+(J>>>3)+u(o,B,7&J),B+=7&J}var Y=T[g(o,B)&R];B+=15&Y;var se=Y>>>4,te=v.ddef[se],ie=(te>>>4)+l(o,B,15&te);for(B+=15&te,b&&(i=r.F._check(i,M+(1<<17)));M<Z;)i[M]=i[M++-ie],i[M]=i[M++-ie],i[M]=i[M++-ie],i[M]=i[M++-ie];M=Z}}}else{(7&B)!=0&&(B+=8-(7&B));var ue=4+(B>>>3),ae=o[ue-4]|o[ue-3]<<8;b&&(i=r.F._check(i,M+ae)),i.set(new s(o.buffer,o.byteOffset+ue,ae),M),B=ue+ae<<3,M+=ae}return i.length==M?i:i.slice(0,M)},r.F._check=function(o,i){var s=o.length;if(i<=s)return o;var a=new Uint8Array(Math.max(s<<1,i));return a.set(o,0),a},r.F._decodeTiny=function(o,i,s,a,l,u){for(var f=r.F._bitsE,h=r.F._get17,p=0;p<s;){var g=o[h(a,l)&i];l+=15&g;var v=g>>>4;if(v<=15)u[p]=v,p++;else{var b=0,E=0;v==16?(E=3+f(a,l,2),l+=2,b=u[p-1]):v==17?(E=3+f(a,l,3),l+=3):v==18&&(E=11+f(a,l,7),l+=7);for(var T=p+E;p<T;)u[p]=b,p++}}return l},r.F._copyOut=function(o,i,s,a){for(var l=0,u=0,f=a.length>>>1;u<s;){var h=o[u+i];a[u<<1]=0,a[1+(u<<1)]=h,h>l&&(l=h),u++}for(;u<f;)a[u<<1]=0,a[1+(u<<1)]=0,u++;return l},r.F.makeCodes=function(o,i){for(var s,a,l,u,f=r.F.U,h=o.length,p=f.bl_count,g=0;g<=i;g++)p[g]=0;for(g=1;g<h;g+=2)p[o[g]]++;var v=f.next_code;for(s=0,p[0]=0,a=1;a<=i;a++)s=s+p[a-1]<<1,v[a]=s;for(l=0;l<h;l+=2)(u=o[l+1])!=0&&(o[l]=v[u],v[u]++)},r.F.codes2map=function(o,i,s){for(var a=o.length,l=r.F.U.rev15,u=0;u<a;u+=2)if(o[u+1]!=0)for(var f=u>>1,h=o[u+1],p=f<<4|h,g=i-h,v=o[u]<<g,b=v+(1<<g);v!=b;)s[l[v]>>>15-i]=p,v++},r.F.revCodes=function(o,i){for(var s=r.F.U.rev15,a=15-i,l=0;l<o.length;l+=2){var u=o[l]<<i-o[l+1];o[l]=s[u]>>>a}},r.F._putsE=function(o,i,s){s<<=7&i;var a=i>>>3;o[a]|=s,o[a+1]|=s>>>8},r.F._putsF=function(o,i,s){s<<=7&i;var a=i>>>3;o[a]|=s,o[a+1]|=s>>>8,o[a+2]|=s>>>16},r.F._bitsE=function(o,i,s){return(o[i>>>3]|o[1+(i>>>3)]<<8)>>>(7&i)&(1<<s)-1},r.F._bitsF=function(o,i,s){return(o[i>>>3]|o[1+(i>>>3)]<<8|o[2+(i>>>3)]<<16)>>>(7&i)&(1<<s)-1},r.F._get17=function(o,i){return(o[i>>>3]|o[1+(i>>>3)]<<8|o[2+(i>>>3)]<<16)>>>(7&i)},r.F._get25=function(o,i){return(o[i>>>3]|o[1+(i>>>3)]<<8|o[2+(i>>>3)]<<16|o[3+(i>>>3)]<<24)>>>(7&i)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var o=r.F.U,i=0;i<32768;i++){var s=i;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,o.rev15[i]=(s>>>16|s<<16)>>>17}function a(l,u,f){for(;u--!=0;)l.push(0,f)}for(i=0;i<32;i++)o.ldef[i]=o.of0[i]<<3|o.exb[i],o.ddef[i]=o.df0[i]<<4|o.dxb[i];a(o.fltree,144,8),a(o.fltree,112,9),a(o.fltree,24,7),a(o.fltree,8,8),r.F.makeCodes(o.fltree,9),r.F.codes2map(o.fltree,9,o.flmap),r.F.revCodes(o.fltree,9),a(o.fdtree,32,5),r.F.makeCodes(o.fdtree,5),r.F.codes2map(o.fdtree,5,o.fdmap),r.F.revCodes(o.fdtree,5),a(o.itree,19,0),a(o.ltree,286,0),a(o.dtree,30,0),a(o.ttree,320,0)}()})();var iRe=nRe({__proto__:null,default:uC},[uC]);const Pa=function(){var t={nextZero(f,h){for(;f[h]!=0;)h++;return h},readUshort:(f,h)=>f[h]<<8|f[h+1],writeUshort(f,h,p){f[h]=p>>8&255,f[h+1]=255&p},readUint:(f,h)=>16777216*f[h]+(f[h+1]<<16|f[h+2]<<8|f[h+3]),writeUint(f,h,p){f[h]=p>>24&255,f[h+1]=p>>16&255,f[h+2]=p>>8&255,f[h+3]=255&p},readASCII(f,h,p){let g="";for(let v=0;v<p;v++)g+=String.fromCharCode(f[h+v]);return g},writeASCII(f,h,p){for(let g=0;g<p.length;g++)f[h+g]=p.charCodeAt(g)},readBytes(f,h,p){const g=[];for(let v=0;v<p;v++)g.push(f[h+v]);return g},pad:f=>f.length<2?`0${f}`:f,readUTF8(f,h,p){let g,v="";for(let b=0;b<p;b++)v+=`%${t.pad(f[h+b].toString(16))}`;try{g=decodeURIComponent(v)}catch{return t.readASCII(f,h,p)}return g}};function e(f,h,p,g){const v=h*p,b=i(g),E=Math.ceil(h*b/8),T=new Uint8Array(4*v),P=new Uint32Array(T.buffer),{ctype:D}=g,{depth:z}=g,V=t.readUshort;if(D==6){const J=v<<2;if(z==8)for(var $=0;$<J;$+=4)T[$]=f[$],T[$+1]=f[$+1],T[$+2]=f[$+2],T[$+3]=f[$+3];if(z==16)for($=0;$<J;$++)T[$]=f[$<<1]}else if(D==2){const J=g.tabs.tRNS;if(J==null){if(z==8)for($=0;$<v;$++){var O=3*$;P[$]=255<<24|f[O+2]<<16|f[O+1]<<8|f[O]}if(z==16)for($=0;$<v;$++)O=6*$,P[$]=255<<24|f[O+4]<<16|f[O+2]<<8|f[O]}else{var R=J[0];const Y=J[1],se=J[2];if(z==8)for($=0;$<v;$++){var M=$<<2;O=3*$,P[$]=255<<24|f[O+2]<<16|f[O+1]<<8|f[O],f[O]==R&&f[O+1]==Y&&f[O+2]==se&&(T[M+3]=0)}if(z==16)for($=0;$<v;$++)M=$<<2,O=6*$,P[$]=255<<24|f[O+4]<<16|f[O+2]<<8|f[O],V(f,O)==R&&V(f,O+2)==Y&&V(f,O+4)==se&&(T[M+3]=0)}}else if(D==3){const J=g.tabs.PLTE,Y=g.tabs.tRNS,se=Y?Y.length:0;if(z==1)for(var B=0;B<p;B++){var q=B*E,K=B*h;for($=0;$<h;$++){M=K+$<<2;var F=3*(ne=f[q+($>>3)]>>7-((7&$)<<0)&1);T[M]=J[F],T[M+1]=J[F+1],T[M+2]=J[F+2],T[M+3]=ne<se?Y[ne]:255}}if(z==2)for(B=0;B<p;B++)for(q=B*E,K=B*h,$=0;$<h;$++)M=K+$<<2,F=3*(ne=f[q+($>>2)]>>6-((3&$)<<1)&3),T[M]=J[F],T[M+1]=J[F+1],T[M+2]=J[F+2],T[M+3]=ne<se?Y[ne]:255;if(z==4)for(B=0;B<p;B++)for(q=B*E,K=B*h,$=0;$<h;$++)M=K+$<<2,F=3*(ne=f[q+($>>1)]>>4-((1&$)<<2)&15),T[M]=J[F],T[M+1]=J[F+1],T[M+2]=J[F+2],T[M+3]=ne<se?Y[ne]:255;if(z==8)for($=0;$<v;$++){var ne;M=$<<2,F=3*(ne=f[$]),T[M]=J[F],T[M+1]=J[F+1],T[M+2]=J[F+2],T[M+3]=ne<se?Y[ne]:255}}else if(D==4){if(z==8)for($=0;$<v;$++){M=$<<2;var oe=f[j=$<<1];T[M]=oe,T[M+1]=oe,T[M+2]=oe,T[M+3]=f[j+1]}if(z==16)for($=0;$<v;$++){var j;M=$<<2,oe=f[j=$<<2],T[M]=oe,T[M+1]=oe,T[M+2]=oe,T[M+3]=f[j+2]}}else if(D==0)for(R=g.tabs.tRNS?g.tabs.tRNS:-1,B=0;B<p;B++){const J=B*E,Y=B*h;if(z==1)for(var U=0;U<h;U++){var Z=(oe=255*(f[J+(U>>>3)]>>>7-(7&U)&1))==255*R?0:255;P[Y+U]=Z<<24|oe<<16|oe<<8|oe}else if(z==2)for(U=0;U<h;U++)Z=(oe=85*(f[J+(U>>>2)]>>>6-((3&U)<<1)&3))==85*R?0:255,P[Y+U]=Z<<24|oe<<16|oe<<8|oe;else if(z==4)for(U=0;U<h;U++)Z=(oe=17*(f[J+(U>>>1)]>>>4-((1&U)<<2)&15))==17*R?0:255,P[Y+U]=Z<<24|oe<<16|oe<<8|oe;else if(z==8)for(U=0;U<h;U++)Z=(oe=f[J+U])==R?0:255,P[Y+U]=Z<<24|oe<<16|oe<<8|oe;else if(z==16)for(U=0;U<h;U++)oe=f[J+(U<<1)],Z=V(f,J+(U<<1))==R?0:255,P[Y+U]=Z<<24|oe<<16|oe<<8|oe}return T}function n(f,h,p,g){const v=i(f),b=Math.ceil(p*v/8),E=new Uint8Array((b+1+f.interlace)*g);return h=f.tabs.CgBI?o(h,E):r(h,E),f.interlace==0?h=s(h,f,0,p,g):f.interlace==1&&(h=function(P,D){const z=D.width,V=D.height,$=i(D),O=$>>3,R=Math.ceil(z*$/8),M=new Uint8Array(V*R);let B=0;const q=[0,0,4,0,2,0,1],K=[0,4,0,2,0,1,0],F=[8,8,8,4,4,2,2],ne=[8,8,4,4,2,2,1];let oe=0;for(;oe<7;){const U=F[oe],Z=ne[oe];let J=0,Y=0,se=q[oe];for(;se<V;)se+=U,Y++;let te=K[oe];for(;te<z;)te+=Z,J++;const ie=Math.ceil(J*$/8);s(P,D,B,J,Y);let ue=0,ae=q[oe];for(;ae<V;){let ve=K[oe],De=B+ue*ie<<3;for(;ve<z;){var j;if($==1&&(j=(j=P[De>>3])>>7-(7&De)&1,M[ae*R+(ve>>3)]|=j<<7-((7&ve)<<0)),$==2&&(j=(j=P[De>>3])>>6-(7&De)&3,M[ae*R+(ve>>2)]|=j<<6-((3&ve)<<1)),$==4&&(j=(j=P[De>>3])>>4-(7&De)&15,M[ae*R+(ve>>1)]|=j<<4-((1&ve)<<2)),$>=8){const Ue=ae*R+ve*O;for(let Oe=0;Oe<O;Oe++)M[Ue+Oe]=P[(De>>3)+Oe]}De+=$,ve+=Z}ue++,ae+=U}J*Y!=0&&(B+=Y*(1+ie)),oe+=1}return M}(h,f)),h}function r(f,h){return o(new Uint8Array(f.buffer,2,f.length-6),h)}var o=function(){const f={H:{}};return f.H.N=function(h,p){const g=Uint8Array;let v,b,E=0,T=0,P=0,D=0,z=0,V=0,$=0,O=0,R=0;if(h[0]==3&&h[1]==0)return p||new g(0);const M=f.H,B=M.b,q=M.e,K=M.R,F=M.n,ne=M.A,oe=M.Z,j=M.m,U=p==null;for(U&&(p=new g(h.length>>>2<<5));E==0;)if(E=B(h,R,1),T=B(h,R+1,2),R+=3,T!=0){if(U&&(p=f.H.W(p,O+(1<<17))),T==1&&(v=j.J,b=j.h,V=511,$=31),T==2){P=q(h,R,5)+257,D=q(h,R+5,5)+1,z=q(h,R+10,4)+4,R+=14;let J=1;for(var Z=0;Z<38;Z+=2)j.Q[Z]=0,j.Q[Z+1]=0;for(Z=0;Z<z;Z++){const te=q(h,R+3*Z,3);j.Q[1+(j.X[Z]<<1)]=te,te>J&&(J=te)}R+=3*z,F(j.Q,J),ne(j.Q,J,j.u),v=j.w,b=j.d,R=K(j.u,(1<<J)-1,P+D,h,R,j.v);const Y=M.V(j.v,0,P,j.C);V=(1<<Y)-1;const se=M.V(j.v,P,D,j.D);$=(1<<se)-1,F(j.C,Y),ne(j.C,Y,v),F(j.D,se),ne(j.D,se,b)}for(;;){const J=v[oe(h,R)&V];R+=15&J;const Y=J>>>4;if(!(Y>>>8))p[O++]=Y;else{if(Y==256)break;{let se=O+Y-254;if(Y>264){const ve=j.q[Y-257];se=O+(ve>>>3)+q(h,R,7&ve),R+=7&ve}const te=b[oe(h,R)&$];R+=15&te;const ie=te>>>4,ue=j.c[ie],ae=(ue>>>4)+B(h,R,15&ue);for(R+=15&ue;O<se;)p[O]=p[O++-ae],p[O]=p[O++-ae],p[O]=p[O++-ae],p[O]=p[O++-ae];O=se}}}}else{(7&R)!=0&&(R+=8-(7&R));const J=4+(R>>>3),Y=h[J-4]|h[J-3]<<8;U&&(p=f.H.W(p,O+Y)),p.set(new g(h.buffer,h.byteOffset+J,Y),O),R=J+Y<<3,O+=Y}return p.length==O?p:p.slice(0,O)},f.H.W=function(h,p){const g=h.length;if(p<=g)return h;const v=new Uint8Array(g<<1);return v.set(h,0),v},f.H.R=function(h,p,g,v,b,E){const T=f.H.e,P=f.H.Z;let D=0;for(;D<g;){const z=h[P(v,b)&p];b+=15&z;const V=z>>>4;if(V<=15)E[D]=V,D++;else{let $=0,O=0;V==16?(O=3+T(v,b,2),b+=2,$=E[D-1]):V==17?(O=3+T(v,b,3),b+=3):V==18&&(O=11+T(v,b,7),b+=7);const R=D+O;for(;D<R;)E[D]=$,D++}}return b},f.H.V=function(h,p,g,v){let b=0,E=0;const T=v.length>>>1;for(;E<g;){const P=h[E+p];v[E<<1]=0,v[1+(E<<1)]=P,P>b&&(b=P),E++}for(;E<T;)v[E<<1]=0,v[1+(E<<1)]=0,E++;return b},f.H.n=function(h,p){const g=f.H.m,v=h.length;let b,E,T,P;const D=g.j;for(var z=0;z<=p;z++)D[z]=0;for(z=1;z<v;z+=2)D[h[z]]++;const V=g.K;for(b=0,D[0]=0,E=1;E<=p;E++)b=b+D[E-1]<<1,V[E]=b;for(T=0;T<v;T+=2)P=h[T+1],P!=0&&(h[T]=V[P],V[P]++)},f.H.A=function(h,p,g){const v=h.length,b=f.H.m.r;for(let E=0;E<v;E+=2)if(h[E+1]!=0){const T=E>>1,P=h[E+1],D=T<<4|P,z=p-P;let V=h[E]<<z;const $=V+(1<<z);for(;V!=$;)g[b[V]>>>15-p]=D,V++}},f.H.l=function(h,p){const g=f.H.m.r,v=15-p;for(let b=0;b<h.length;b+=2){const E=h[b]<<p-h[b+1];h[b]=g[E]>>>v}},f.H.M=function(h,p,g){g<<=7&p;const v=p>>>3;h[v]|=g,h[v+1]|=g>>>8},f.H.I=function(h,p,g){g<<=7&p;const v=p>>>3;h[v]|=g,h[v+1]|=g>>>8,h[v+2]|=g>>>16},f.H.e=function(h,p,g){return(h[p>>>3]|h[1+(p>>>3)]<<8)>>>(7&p)&(1<<g)-1},f.H.b=function(h,p,g){return(h[p>>>3]|h[1+(p>>>3)]<<8|h[2+(p>>>3)]<<16)>>>(7&p)&(1<<g)-1},f.H.Z=function(h,p){return(h[p>>>3]|h[1+(p>>>3)]<<8|h[2+(p>>>3)]<<16)>>>(7&p)},f.H.i=function(h,p){return(h[p>>>3]|h[1+(p>>>3)]<<8|h[2+(p>>>3)]<<16|h[3+(p>>>3)]<<24)>>>(7&p)},f.H.m=function(){const h=Uint16Array,p=Uint32Array;return{K:new h(16),j:new h(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new h(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new p(32),J:new h(512),_:[],h:new h(32),$:[],w:new h(32768),C:[],v:[],d:new h(32768),D:[],u:new h(512),Q:[],r:new h(32768),s:new p(286),Y:new p(30),a:new p(19),t:new p(15e3),k:new h(65536),g:new h(32768)}}(),function(){const h=f.H.m;for(var p=0;p<32768;p++){let v=p;v=(2863311530&v)>>>1|(1431655765&v)<<1,v=(3435973836&v)>>>2|(858993459&v)<<2,v=(4042322160&v)>>>4|(252645135&v)<<4,v=(4278255360&v)>>>8|(16711935&v)<<8,h.r[p]=(v>>>16|v<<16)>>>17}function g(v,b,E){for(;b--!=0;)v.push(0,E)}for(p=0;p<32;p++)h.q[p]=h.S[p]<<3|h.T[p],h.c[p]=h.p[p]<<4|h.z[p];g(h._,144,8),g(h._,112,9),g(h._,24,7),g(h._,8,8),f.H.n(h._,9),f.H.A(h._,9,h.J),f.H.l(h._,9),g(h.$,32,5),f.H.n(h.$,5),f.H.A(h.$,5,h.h),f.H.l(h.$,5),g(h.Q,19,0),g(h.C,286,0),g(h.D,30,0),g(h.v,320,0)}(),f.H.N}();function i(f){return[1,null,3,1,2,null,4][f.ctype]*f.depth}function s(f,h,p,g,v){let b=i(h);const E=Math.ceil(g*b/8);let T,P;b=Math.ceil(b/8);let D=f[p],z=0;if(D>1&&(f[p]=[0,0,1][D-2]),D==3)for(z=b;z<E;z++)f[z+1]=f[z+1]+(f[z+1-b]>>>1)&255;for(let V=0;V<v;V++)if(T=p+V*E,P=T+V+1,D=f[P-1],z=0,D==0)for(;z<E;z++)f[T+z]=f[P+z];else if(D==1){for(;z<b;z++)f[T+z]=f[P+z];for(;z<E;z++)f[T+z]=f[P+z]+f[T+z-b]}else if(D==2)for(;z<E;z++)f[T+z]=f[P+z]+f[T+z-E];else if(D==3){for(;z<b;z++)f[T+z]=f[P+z]+(f[T+z-E]>>>1);for(;z<E;z++)f[T+z]=f[P+z]+(f[T+z-E]+f[T+z-b]>>>1)}else{for(;z<b;z++)f[T+z]=f[P+z]+a(0,f[T+z-E],0);for(;z<E;z++)f[T+z]=f[P+z]+a(f[T+z-b],f[T+z-E],f[T+z-b-E])}return f}function a(f,h,p){const g=f+h-p,v=g-f,b=g-h,E=g-p;return v*v<=b*b&&v*v<=E*E?f:b*b<=E*E?h:p}function l(f,h,p){p.width=t.readUint(f,h),h+=4,p.height=t.readUint(f,h),h+=4,p.depth=f[h],h++,p.ctype=f[h],h++,p.compress=f[h],h++,p.filter=f[h],h++,p.interlace=f[h],h++}function u(f,h,p,g,v,b,E,T,P){const D=Math.min(h,v),z=Math.min(p,b);let V=0,$=0;for(let oe=0;oe<z;oe++)for(let j=0;j<D;j++)if(E>=0&&T>=0?(V=oe*h+j<<2,$=(T+oe)*v+E+j<<2):(V=(-T+oe)*h-E+j<<2,$=oe*v+j<<2),P==0)g[$]=f[V],g[$+1]=f[V+1],g[$+2]=f[V+2],g[$+3]=f[V+3];else if(P==1){var O=f[V+3]*.00392156862745098,R=f[V]*O,M=f[V+1]*O,B=f[V+2]*O,q=g[$+3]*(1/255),K=g[$]*q,F=g[$+1]*q,ne=g[$+2]*q;const U=1-O,Z=O+q*U,J=Z==0?0:1/Z;g[$+3]=255*Z,g[$+0]=(R+K*U)*J,g[$+1]=(M+F*U)*J,g[$+2]=(B+ne*U)*J}else if(P==2)O=f[V+3],R=f[V],M=f[V+1],B=f[V+2],q=g[$+3],K=g[$],F=g[$+1],ne=g[$+2],O==q&&R==K&&M==F&&B==ne?(g[$]=0,g[$+1]=0,g[$+2]=0,g[$+3]=0):(g[$]=R,g[$+1]=M,g[$+2]=B,g[$+3]=O);else if(P==3){if(O=f[V+3],R=f[V],M=f[V+1],B=f[V+2],q=g[$+3],K=g[$],F=g[$+1],ne=g[$+2],O==q&&R==K&&M==F&&B==ne)continue;if(O<220&&q>20)return!1}return!0}return{decode:function(h){const p=new Uint8Array(h);let g=8;const v=t,b=v.readUshort,E=v.readUint,T={tabs:{},frames:[]},P=new Uint8Array(p.length);let D,z=0,V=0;const $=[137,80,78,71,13,10,26,10];for(var O=0;O<8;O++)if(p[O]!=$[O])throw"The input is not a PNG file!";for(;g<p.length;){const oe=v.readUint(p,g);g+=4;const j=v.readASCII(p,g,4);if(g+=4,j=="IHDR")l(p,g,T);else if(j=="iCCP"){for(var R=g;p[R]!=0;)R++;v.readASCII(p,g,R-g),p[R+1];const U=p.slice(R+2,g+oe);let Z=null;try{Z=r(U)}catch{Z=o(U)}T.tabs[j]=Z}else if(j=="CgBI")T.tabs[j]=p.slice(g,g+4);else if(j=="IDAT"){for(O=0;O<oe;O++)P[z+O]=p[g+O];z+=oe}else if(j=="acTL")T.tabs[j]={num_frames:E(p,g),num_plays:E(p,g+4)},D=new Uint8Array(p.length);else if(j=="fcTL"){V!=0&&((ne=T.frames[T.frames.length-1]).data=n(T,D.slice(0,V),ne.rect.width,ne.rect.height),V=0);const U={x:E(p,g+12),y:E(p,g+16),width:E(p,g+4),height:E(p,g+8)};let Z=b(p,g+22);Z=b(p,g+20)/(Z==0?100:Z);const J={rect:U,delay:Math.round(1e3*Z),dispose:p[g+24],blend:p[g+25]};T.frames.push(J)}else if(j=="fdAT"){for(O=0;O<oe-4;O++)D[V+O]=p[g+O+4];V+=oe-4}else if(j=="pHYs")T.tabs[j]=[v.readUint(p,g),v.readUint(p,g+4),p[g+8]];else if(j=="cHRM")for(T.tabs[j]=[],O=0;O<8;O++)T.tabs[j].push(v.readUint(p,g+4*O));else if(j=="tEXt"||j=="zTXt"){T.tabs[j]==null&&(T.tabs[j]={});var M=v.nextZero(p,g),B=v.readASCII(p,g,M-g),q=g+oe-M-1;if(j=="tEXt")F=v.readASCII(p,M+1,q);else{var K=r(p.slice(M+2,M+2+q));F=v.readUTF8(K,0,K.length)}T.tabs[j][B]=F}else if(j=="iTXt"){T.tabs[j]==null&&(T.tabs[j]={}),M=0,R=g,M=v.nextZero(p,R),B=v.readASCII(p,R,M-R);const U=p[R=M+1];var F;p[R+1],R+=2,M=v.nextZero(p,R),v.readASCII(p,R,M-R),R=M+1,M=v.nextZero(p,R),v.readUTF8(p,R,M-R),q=oe-((R=M+1)-g),U==0?F=v.readUTF8(p,R,q):(K=r(p.slice(R,R+q)),F=v.readUTF8(K,0,K.length)),T.tabs[j][B]=F}else if(j=="PLTE")T.tabs[j]=v.readBytes(p,g,oe);else if(j=="hIST"){const U=T.tabs.PLTE.length/3;for(T.tabs[j]=[],O=0;O<U;O++)T.tabs[j].push(b(p,g+2*O))}else if(j=="tRNS")T.ctype==3?T.tabs[j]=v.readBytes(p,g,oe):T.ctype==0?T.tabs[j]=b(p,g):T.ctype==2&&(T.tabs[j]=[b(p,g),b(p,g+2),b(p,g+4)]);else if(j=="gAMA")T.tabs[j]=v.readUint(p,g)/1e5;else if(j=="sRGB")T.tabs[j]=p[g];else if(j=="bKGD")T.ctype==0||T.ctype==4?T.tabs[j]=[b(p,g)]:T.ctype==2||T.ctype==6?T.tabs[j]=[b(p,g),b(p,g+2),b(p,g+4)]:T.ctype==3&&(T.tabs[j]=p[g]);else if(j=="IEND")break;g+=oe,v.readUint(p,g),g+=4}var ne;return V!=0&&((ne=T.frames[T.frames.length-1]).data=n(T,D.slice(0,V),ne.rect.width,ne.rect.height)),T.data=n(T,P,T.width,T.height),delete T.compress,delete T.interlace,delete T.filter,T},toRGBA8:function(h){const p=h.width,g=h.height;if(h.tabs.acTL==null)return[e(h.data,p,g,h).buffer];const v=[];h.frames[0].data==null&&(h.frames[0].data=h.data);const b=p*g*4,E=new Uint8Array(b),T=new Uint8Array(b),P=new Uint8Array(b);for(let z=0;z<h.frames.length;z++){const V=h.frames[z],$=V.rect.x,O=V.rect.y,R=V.rect.width,M=V.rect.height,B=e(V.data,R,M,h);if(z!=0)for(var D=0;D<b;D++)P[D]=E[D];if(V.blend==0?u(B,R,M,E,p,g,$,O,0):V.blend==1&&u(B,R,M,E,p,g,$,O,1),v.push(E.buffer.slice(0)),V.dispose!=0){if(V.dispose==1)u(T,R,M,E,p,g,$,O,0);else if(V.dispose==2)for(D=0;D<b;D++)E[D]=P[D]}}return v},_paeth:a,_copyTile:u,_bin:t}}();(function(){const{_copyTile:t}=Pa,{_bin:e}=Pa,n=Pa._paeth;var r={table:function(){const R=new Uint32Array(256);for(let M=0;M<256;M++){let B=M;for(let q=0;q<8;q++)1&B?B=3988292384^B>>>1:B>>>=1;R[M]=B}return R}(),update(R,M,B,q){for(let K=0;K<q;K++)R=r.table[255&(R^M[B+K])]^R>>>8;return R},crc:(R,M,B)=>4294967295^r.update(4294967295,R,M,B)};function o(R,M,B,q){M[B]+=R[0]*q>>4,M[B+1]+=R[1]*q>>4,M[B+2]+=R[2]*q>>4,M[B+3]+=R[3]*q>>4}function i(R){return Math.max(0,Math.min(255,R))}function s(R,M){const B=R[0]-M[0],q=R[1]-M[1],K=R[2]-M[2],F=R[3]-M[3];return B*B+q*q+K*K+F*F}function a(R,M,B,q,K,F,ne){ne==null&&(ne=1);const oe=q.length,j=[];for(var U=0;U<oe;U++){const ae=q[U];j.push([ae>>>0&255,ae>>>8&255,ae>>>16&255,ae>>>24&255])}for(U=0;U<oe;U++){let ae=4294967295;for(var Z=0,J=0;J<oe;J++){var Y=s(j[U],j[J]);J!=U&&Y<ae&&(ae=Y,Z=J)}}const se=new Uint32Array(K.buffer),te=new Int16Array(M*B*4),ie=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(U=0;U<ie.length;U++)ie[U]=255*((ie[U]+.5)/16-.5);for(let ae=0;ae<B;ae++)for(let ve=0;ve<M;ve++){var ue;U=4*(ae*M+ve),ne!=2?ue=[i(R[U]+te[U]),i(R[U+1]+te[U+1]),i(R[U+2]+te[U+2]),i(R[U+3]+te[U+3])]:(Y=ie[4*(3&ae)+(3&ve)],ue=[i(R[U]+Y),i(R[U+1]+Y),i(R[U+2]+Y),i(R[U+3]+Y)]),Z=0;let De=16777215;for(J=0;J<oe;J++){const rt=s(ue,j[J]);rt<De&&(De=rt,Z=J)}const Ue=j[Z],Oe=[ue[0]-Ue[0],ue[1]-Ue[1],ue[2]-Ue[2],ue[3]-Ue[3]];ne==1&&(ve!=M-1&&o(Oe,te,U+4,7),ae!=B-1&&(ve!=0&&o(Oe,te,U+4*M-4,3),o(Oe,te,U+4*M,5),ve!=M-1&&o(Oe,te,U+4*M+4,1))),F[U>>2]=Z,se[U>>2]=q[Z]}}function l(R,M,B,q,K){K==null&&(K={});const{crc:F}=r,ne=e.writeUint,oe=e.writeUshort,j=e.writeASCII;let U=8;const Z=R.frames.length>1;let J,Y=!1,se=33+(Z?20:0);if(K.sRGB!=null&&(se+=13),K.pHYs!=null&&(se+=21),K.iCCP!=null&&(J=pako.deflate(K.iCCP),se+=21+J.length+4),R.ctype==3){for(var te=R.plte.length,ie=0;ie<te;ie++)R.plte[ie]>>>24!=255&&(Y=!0);se+=8+3*te+4+(Y?8+1*te+4:0)}for(var ue=0;ue<R.frames.length;ue++)Z&&(se+=38),se+=(Ue=R.frames[ue]).cimg.length+12,ue!=0&&(se+=4);se+=12;const ae=new Uint8Array(se),ve=[137,80,78,71,13,10,26,10];for(ie=0;ie<8;ie++)ae[ie]=ve[ie];if(ne(ae,U,13),U+=4,j(ae,U,"IHDR"),U+=4,ne(ae,U,M),U+=4,ne(ae,U,B),U+=4,ae[U]=R.depth,U++,ae[U]=R.ctype,U++,ae[U]=0,U++,ae[U]=0,U++,ae[U]=0,U++,ne(ae,U,F(ae,U-17,17)),U+=4,K.sRGB!=null&&(ne(ae,U,1),U+=4,j(ae,U,"sRGB"),U+=4,ae[U]=K.sRGB,U++,ne(ae,U,F(ae,U-5,5)),U+=4),K.iCCP!=null){const Oe=13+J.length;ne(ae,U,Oe),U+=4,j(ae,U,"iCCP"),U+=4,j(ae,U,"ICC profile"),U+=11,U+=2,ae.set(J,U),U+=J.length,ne(ae,U,F(ae,U-(Oe+4),Oe+4)),U+=4}if(K.pHYs!=null&&(ne(ae,U,9),U+=4,j(ae,U,"pHYs"),U+=4,ne(ae,U,K.pHYs[0]),U+=4,ne(ae,U,K.pHYs[1]),U+=4,ae[U]=K.pHYs[2],U++,ne(ae,U,F(ae,U-13,13)),U+=4),Z&&(ne(ae,U,8),U+=4,j(ae,U,"acTL"),U+=4,ne(ae,U,R.frames.length),U+=4,ne(ae,U,K.loop!=null?K.loop:0),U+=4,ne(ae,U,F(ae,U-12,12)),U+=4),R.ctype==3){for(ne(ae,U,3*(te=R.plte.length)),U+=4,j(ae,U,"PLTE"),U+=4,ie=0;ie<te;ie++){const Oe=3*ie,rt=R.plte[ie],wt=255&rt,tt=rt>>>8&255,mn=rt>>>16&255;ae[U+Oe+0]=wt,ae[U+Oe+1]=tt,ae[U+Oe+2]=mn}if(U+=3*te,ne(ae,U,F(ae,U-3*te-4,3*te+4)),U+=4,Y){for(ne(ae,U,te),U+=4,j(ae,U,"tRNS"),U+=4,ie=0;ie<te;ie++)ae[U+ie]=R.plte[ie]>>>24&255;U+=te,ne(ae,U,F(ae,U-te-4,te+4)),U+=4}}let De=0;for(ue=0;ue<R.frames.length;ue++){var Ue=R.frames[ue];Z&&(ne(ae,U,26),U+=4,j(ae,U,"fcTL"),U+=4,ne(ae,U,De++),U+=4,ne(ae,U,Ue.rect.width),U+=4,ne(ae,U,Ue.rect.height),U+=4,ne(ae,U,Ue.rect.x),U+=4,ne(ae,U,Ue.rect.y),U+=4,oe(ae,U,q[ue]),U+=2,oe(ae,U,1e3),U+=2,ae[U]=Ue.dispose,U++,ae[U]=Ue.blend,U++,ne(ae,U,F(ae,U-30,30)),U+=4);const Oe=Ue.cimg;ne(ae,U,(te=Oe.length)+(ue==0?0:4)),U+=4;const rt=U;j(ae,U,ue==0?"IDAT":"fdAT"),U+=4,ue!=0&&(ne(ae,U,De++),U+=4),ae.set(Oe,U),U+=te,ne(ae,U,F(ae,rt,U-rt)),U+=4}return ne(ae,U,0),U+=4,j(ae,U,"IEND"),U+=4,ne(ae,U,F(ae,U-4,4)),U+=4,ae.buffer}function u(R,M,B){for(let q=0;q<R.frames.length;q++){const K=R.frames[q];K.rect.width;const F=K.rect.height,ne=new Uint8Array(F*K.bpl+F);K.cimg=g(K.img,F,K.bpp,K.bpl,ne,M,B)}}function f(R,M,B,q,K){const F=K[0],ne=K[1],oe=K[2],j=K[3],U=K[4],Z=K[5];let J=6,Y=8,se=255;for(var te=0;te<R.length;te++){const $n=new Uint8Array(R[te]);for(var ie=$n.length,ue=0;ue<ie;ue+=4)se&=$n[ue+3]}const ae=se!=255,ve=function(At,sn,Jt,Vt,Ut,gn){const Wt=[];for(var an=0;an<At.length;an++){const Vn=new Uint8Array(At[an]),kr=new Uint32Array(Vn.buffer);var _n;let xn=0,br=0,wr=sn,jn=Jt,nt=Vt?1:0;if(an!=0){const Do=gn||Vt||an==1||Wt[an-2].dispose!=0?1:2;let Br=0,Nr=1e9;for(let Qe=0;Qe<Do;Qe++){var Ht=new Uint8Array(At[an-1-Qe]);const Oo=new Uint32Array(At[an-1-Qe]);let Cr=sn,$r=Jt,ft=-1,Tn=-1;for(let Fn=0;Fn<Jt;Fn++)for(let Qn=0;Qn<sn;Qn++)kr[un=Fn*sn+Qn]!=Oo[un]&&(Qn<Cr&&(Cr=Qn),Qn>ft&&(ft=Qn),Fn<$r&&($r=Fn),Fn>Tn&&(Tn=Fn));ft==-1&&(Cr=$r=ft=Tn=0),Ut&&((1&Cr)==1&&Cr--,(1&$r)==1&&$r--);const Hn=(ft-Cr+1)*(Tn-$r+1);Hn<Nr&&(Nr=Hn,Br=Qe,xn=Cr,br=$r,wr=ft-Cr+1,jn=Tn-$r+1)}Ht=new Uint8Array(At[an-1-Br]),Br==1&&(Wt[an-1].dispose=2),_n=new Uint8Array(wr*jn*4),t(Ht,sn,Jt,_n,wr,jn,-xn,-br,0),nt=t(Vn,sn,Jt,_n,wr,jn,-xn,-br,3)?1:0,nt==1?p(Vn,sn,Jt,_n,{x:xn,y:br,width:wr,height:jn}):t(Vn,sn,Jt,_n,wr,jn,-xn,-br,0)}else _n=Vn.slice(0);Wt.push({rect:{x:xn,y:br,width:wr,height:jn},img:_n,blend:nt,dispose:0})}if(Vt)for(an=0;an<Wt.length;an++){if((kn=Wt[an]).blend==1)continue;const Vn=kn.rect,kr=Wt[an-1].rect,xn=Math.min(Vn.x,kr.x),br=Math.min(Vn.y,kr.y),wr={x:xn,y:br,width:Math.max(Vn.x+Vn.width,kr.x+kr.width)-xn,height:Math.max(Vn.y+Vn.height,kr.y+kr.height)-br};Wt[an-1].dispose=1,an-1!=0&&h(At,sn,Jt,Wt,an-1,wr,Ut),h(At,sn,Jt,Wt,an,wr,Ut)}let Ft=0;if(At.length!=1)for(var un=0;un<Wt.length;un++){var kn;Ft+=(kn=Wt[un]).rect.width*kn.rect.height}return Wt}(R,M,B,F,ne,oe),De={},Ue=[],Oe=[];if(q!=0){const $n=[];for(ue=0;ue<ve.length;ue++)$n.push(ve[ue].img.buffer);const At=function(Ut){let gn=0;for(var Wt=0;Wt<Ut.length;Wt++)gn+=Ut[Wt].byteLength;const an=new Uint8Array(gn);let _n=0;for(Wt=0;Wt<Ut.length;Wt++){const Ht=new Uint8Array(Ut[Wt]),Ft=Ht.length;for(let un=0;un<Ft;un+=4){let kn=Ht[un],Vn=Ht[un+1],kr=Ht[un+2];const xn=Ht[un+3];xn==0&&(kn=Vn=kr=0),an[_n+un]=kn,an[_n+un+1]=Vn,an[_n+un+2]=kr,an[_n+un+3]=xn}_n+=Ft}return an.buffer}($n),sn=b(At,q);for(ue=0;ue<sn.plte.length;ue++)Ue.push(sn.plte[ue].est.rgba);let Jt=0;for(ue=0;ue<ve.length;ue++){const Vt=(wt=ve[ue]).img.length;var rt=new Uint8Array(sn.inds.buffer,Jt>>2,Vt>>2);Oe.push(rt);const Ut=new Uint8Array(sn.abuf,Jt,Vt);Z&&a(wt.img,wt.rect.width,wt.rect.height,Ue,Ut,rt),wt.img.set(Ut),Jt+=Vt}}else for(te=0;te<ve.length;te++){var wt=ve[te];const $n=new Uint32Array(wt.img.buffer);var tt=wt.rect.width;for(ie=$n.length,rt=new Uint8Array(ie),Oe.push(rt),ue=0;ue<ie;ue++){const At=$n[ue];if(ue!=0&&At==$n[ue-1])rt[ue]=rt[ue-1];else if(ue>tt&&At==$n[ue-tt])rt[ue]=rt[ue-tt];else{let sn=De[At];if(sn==null&&(De[At]=sn=Ue.length,Ue.push(At),Ue.length>=300))break;rt[ue]=sn}}}const mn=Ue.length;for(mn<=256&&U==0&&(Y=mn<=2?1:mn<=4?2:mn<=16?4:8,Y=Math.max(Y,j)),te=0;te<ve.length;te++){(wt=ve[te]).rect.x,wt.rect.y,tt=wt.rect.width;const $n=wt.rect.height;let At=wt.img;new Uint32Array(At.buffer);let sn=4*tt,Jt=4;if(mn<=256&&U==0){sn=Math.ceil(Y*tt/8);var Ln=new Uint8Array(sn*$n);const Vt=Oe[te];for(let Ut=0;Ut<$n;Ut++){ue=Ut*sn;const gn=Ut*tt;if(Y==8)for(var $t=0;$t<tt;$t++)Ln[ue+$t]=Vt[gn+$t];else if(Y==4)for($t=0;$t<tt;$t++)Ln[ue+($t>>1)]|=Vt[gn+$t]<<4-4*(1&$t);else if(Y==2)for($t=0;$t<tt;$t++)Ln[ue+($t>>2)]|=Vt[gn+$t]<<6-2*(3&$t);else if(Y==1)for($t=0;$t<tt;$t++)Ln[ue+($t>>3)]|=Vt[gn+$t]<<7-1*(7&$t)}At=Ln,J=3,Jt=1}else if(ae==0&&ve.length==1){Ln=new Uint8Array(tt*$n*3);const Vt=tt*$n;for(ue=0;ue<Vt;ue++){const Ut=3*ue,gn=4*ue;Ln[Ut]=At[gn],Ln[Ut+1]=At[gn+1],Ln[Ut+2]=At[gn+2]}At=Ln,J=2,Jt=3,sn=3*tt}wt.img=At,wt.bpl=sn,wt.bpp=Jt}return{ctype:J,depth:Y,plte:Ue,frames:ve}}function h(R,M,B,q,K,F,ne){const oe=Uint8Array,j=Uint32Array,U=new oe(R[K-1]),Z=new j(R[K-1]),J=K+1<R.length?new oe(R[K+1]):null,Y=new oe(R[K]),se=new j(Y.buffer);let te=M,ie=B,ue=-1,ae=-1;for(let De=0;De<F.height;De++)for(let Ue=0;Ue<F.width;Ue++){const Oe=F.x+Ue,rt=F.y+De,wt=rt*M+Oe,tt=se[wt];tt==0||q[K-1].dispose==0&&Z[wt]==tt&&(J==null||J[4*wt+3]!=0)||(Oe<te&&(te=Oe),Oe>ue&&(ue=Oe),rt<ie&&(ie=rt),rt>ae&&(ae=rt))}ue==-1&&(te=ie=ue=ae=0),ne&&((1&te)==1&&te--,(1&ie)==1&&ie--),F={x:te,y:ie,width:ue-te+1,height:ae-ie+1};const ve=q[K];ve.rect=F,ve.blend=1,ve.img=new Uint8Array(F.width*F.height*4),q[K-1].dispose==0?(t(U,M,B,ve.img,F.width,F.height,-F.x,-F.y,0),p(Y,M,B,ve.img,F)):t(Y,M,B,ve.img,F.width,F.height,-F.x,-F.y,0)}function p(R,M,B,q,K){t(R,M,B,q,K.width,K.height,-K.x,-K.y,2)}function g(R,M,B,q,K,F,ne){const oe=[];let j,U=[0,1,2,3,4];F!=-1?U=[F]:(M*q>5e5||B==1)&&(U=[0]),ne&&(j={level:0});const Z=iRe;for(var J=0;J<U.length;J++){for(let te=0;te<M;te++)v(K,R,te,q,B,U[J]);oe.push(Z.deflate(K,j))}let Y,se=1e9;for(J=0;J<oe.length;J++)oe[J].length<se&&(Y=J,se=oe[J].length);return oe[Y]}function v(R,M,B,q,K,F){const ne=B*q;let oe=ne+B;if(R[oe]=F,oe++,F==0)if(q<500)for(var j=0;j<q;j++)R[oe+j]=M[ne+j];else R.set(new Uint8Array(M.buffer,ne,q),oe);else if(F==1){for(j=0;j<K;j++)R[oe+j]=M[ne+j];for(j=K;j<q;j++)R[oe+j]=M[ne+j]-M[ne+j-K]+256&255}else if(B==0){for(j=0;j<K;j++)R[oe+j]=M[ne+j];if(F==2)for(j=K;j<q;j++)R[oe+j]=M[ne+j];if(F==3)for(j=K;j<q;j++)R[oe+j]=M[ne+j]-(M[ne+j-K]>>1)+256&255;if(F==4)for(j=K;j<q;j++)R[oe+j]=M[ne+j]-n(M[ne+j-K],0,0)+256&255}else{if(F==2)for(j=0;j<q;j++)R[oe+j]=M[ne+j]+256-M[ne+j-q]&255;if(F==3){for(j=0;j<K;j++)R[oe+j]=M[ne+j]+256-(M[ne+j-q]>>1)&255;for(j=K;j<q;j++)R[oe+j]=M[ne+j]+256-(M[ne+j-q]+M[ne+j-K]>>1)&255}if(F==4){for(j=0;j<K;j++)R[oe+j]=M[ne+j]+256-n(0,M[ne+j-q],0)&255;for(j=K;j<q;j++)R[oe+j]=M[ne+j]+256-n(M[ne+j-K],M[ne+j-q],M[ne+j-K-q])&255}}}function b(R,M){const B=new Uint8Array(R),q=B.slice(0),K=new Uint32Array(q.buffer),F=E(q,M),ne=F[0],oe=F[1],j=B.length,U=new Uint8Array(j>>2);let Z;if(B.length<2e7)for(var J=0;J<j;J+=4)Z=T(ne,Y=B[J]*(1/255),se=B[J+1]*(1/255),te=B[J+2]*(1/255),ie=B[J+3]*(1/255)),U[J>>2]=Z.ind,K[J>>2]=Z.est.rgba;else for(J=0;J<j;J+=4){var Y=B[J]*.00392156862745098,se=B[J+1]*(1/255),te=B[J+2]*(1/255),ie=B[J+3]*(1/255);for(Z=ne;Z.left;)Z=P(Z.est,Y,se,te,ie)<=0?Z.left:Z.right;U[J>>2]=Z.ind,K[J>>2]=Z.est.rgba}return{abuf:q.buffer,inds:U,plte:oe}}function E(R,M,B){B==null&&(B=1e-4);const q=new Uint32Array(R.buffer),K={i0:0,i1:R.length,bst:null,est:null,tdst:0,left:null,right:null};K.bst=V(R,K.i0,K.i1),K.est=$(K.bst);const F=[K];for(;F.length<M;){let oe=0,j=0;for(var ne=0;ne<F.length;ne++)F[ne].est.L>oe&&(oe=F[ne].est.L,j=ne);if(oe<B)break;const U=F[j],Z=D(R,q,U.i0,U.i1,U.est.e,U.est.eMq255);if(U.i0>=Z||U.i1<=Z){U.est.L=0;continue}const J={i0:U.i0,i1:Z,bst:null,est:null,tdst:0,left:null,right:null};J.bst=V(R,J.i0,J.i1),J.est=$(J.bst);const Y={i0:Z,i1:U.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Y.bst={R:[],m:[],N:U.bst.N-J.bst.N},ne=0;ne<16;ne++)Y.bst.R[ne]=U.bst.R[ne]-J.bst.R[ne];for(ne=0;ne<4;ne++)Y.bst.m[ne]=U.bst.m[ne]-J.bst.m[ne];Y.est=$(Y.bst),U.left=J,U.right=Y,F[j]=J,F.push(Y)}for(F.sort((oe,j)=>j.bst.N-oe.bst.N),ne=0;ne<F.length;ne++)F[ne].ind=ne;return[K,F]}function T(R,M,B,q,K){if(R.left==null)return R.tdst=function(J,Y,se,te,ie){const ue=Y-J[0],ae=se-J[1],ve=te-J[2],De=ie-J[3];return ue*ue+ae*ae+ve*ve+De*De}(R.est.q,M,B,q,K),R;const F=P(R.est,M,B,q,K);let ne=R.left,oe=R.right;F>0&&(ne=R.right,oe=R.left);const j=T(ne,M,B,q,K);if(j.tdst<=F*F)return j;const U=T(oe,M,B,q,K);return U.tdst<j.tdst?U:j}function P(R,M,B,q,K){const{e:F}=R;return F[0]*M+F[1]*B+F[2]*q+F[3]*K-R.eMq}function D(R,M,B,q,K,F){for(q-=4;B<q;){for(;z(R,B,K)<=F;)B+=4;for(;z(R,q,K)>F;)q-=4;if(B>=q)break;const ne=M[B>>2];M[B>>2]=M[q>>2],M[q>>2]=ne,B+=4,q-=4}for(;z(R,B,K)>F;)B-=4;return B+4}function z(R,M,B){return R[M]*B[0]+R[M+1]*B[1]+R[M+2]*B[2]+R[M+3]*B[3]}function V(R,M,B){const q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],K=[0,0,0,0],F=B-M>>2;for(let ne=M;ne<B;ne+=4){const oe=R[ne]*.00392156862745098,j=R[ne+1]*(1/255),U=R[ne+2]*(1/255),Z=R[ne+3]*(1/255);K[0]+=oe,K[1]+=j,K[2]+=U,K[3]+=Z,q[0]+=oe*oe,q[1]+=oe*j,q[2]+=oe*U,q[3]+=oe*Z,q[5]+=j*j,q[6]+=j*U,q[7]+=j*Z,q[10]+=U*U,q[11]+=U*Z,q[15]+=Z*Z}return q[4]=q[1],q[8]=q[2],q[9]=q[6],q[12]=q[3],q[13]=q[7],q[14]=q[11],{R:q,m:K,N:F}}function $(R){const{R:M}=R,{m:B}=R,{N:q}=R,K=B[0],F=B[1],ne=B[2],oe=B[3],j=q==0?0:1/q,U=[M[0]-K*K*j,M[1]-K*F*j,M[2]-K*ne*j,M[3]-K*oe*j,M[4]-F*K*j,M[5]-F*F*j,M[6]-F*ne*j,M[7]-F*oe*j,M[8]-ne*K*j,M[9]-ne*F*j,M[10]-ne*ne*j,M[11]-ne*oe*j,M[12]-oe*K*j,M[13]-oe*F*j,M[14]-oe*ne*j,M[15]-oe*oe*j],Z=U,J=O;let Y=[Math.random(),Math.random(),Math.random(),Math.random()],se=0,te=0;if(q!=0)for(let ue=0;ue<16&&(Y=J.multVec(Z,Y),te=Math.sqrt(J.dot(Y,Y)),Y=J.sml(1/te,Y),!(ue!=0&&Math.abs(te-se)<1e-9));ue++)se=te;const ie=[K*j,F*j,ne*j,oe*j];return{Cov:U,q:ie,e:Y,L:se,eMq255:J.dot(J.sml(255,ie),Y),eMq:J.dot(Y,ie),rgba:(Math.round(255*ie[3])<<24|Math.round(255*ie[2])<<16|Math.round(255*ie[1])<<8|Math.round(255*ie[0])<<0)>>>0}}var O={multVec:(R,M)=>[R[0]*M[0]+R[1]*M[1]+R[2]*M[2]+R[3]*M[3],R[4]*M[0]+R[5]*M[1]+R[6]*M[2]+R[7]*M[3],R[8]*M[0]+R[9]*M[1]+R[10]*M[2]+R[11]*M[3],R[12]*M[0]+R[13]*M[1]+R[14]*M[2]+R[15]*M[3]],dot:(R,M)=>R[0]*M[0]+R[1]*M[1]+R[2]*M[2]+R[3]*M[3],sml:(R,M)=>[R*M[0],R*M[1],R*M[2],R*M[3]]};Pa.encode=function(M,B,q,K,F,ne,oe){K==null&&(K=0),oe==null&&(oe=!1);const j=f(M,B,q,K,[!1,!1,!1,0,oe,!1]);return u(j,-1),l(j,B,q,F,ne)},Pa.encodeLL=function(M,B,q,K,F,ne,oe,j){const U={ctype:0+(K==1?0:2)+(F==0?0:4),depth:ne,frames:[]},Z=(K+F)*ne,J=Z*B;for(let Y=0;Y<M.length;Y++)U.frames.push({rect:{x:0,y:0,width:B,height:q},img:new Uint8Array(M[Y]),blend:0,dispose:1,bpp:Math.ceil(Z/8),bpl:Math.ceil(J/8)});return u(U,0,!0),l(U,B,q,oe,j)},Pa.encode.compress=f,Pa.encode.dither=a,Pa.quantize=b,Pa.quantize.getKDtree=E,Pa.quantize.getNearest=T})();const Lq={toArrayBuffer(t,e){const n=t.width,r=t.height,o=n<<2,i=t.getContext("2d").getImageData(0,0,n,r),s=new Uint32Array(i.data.buffer),a=(32*n+31)/32<<2,l=a*r,u=122+l,f=new ArrayBuffer(u),h=new DataView(f),p=1<<20;let g,v,b,E,T=p,P=0,D=0,z=0;function V(R){h.setUint16(D,R,!0),D+=2}function $(R){h.setUint32(D,R,!0),D+=4}function O(R){D+=R}V(19778),$(u),O(4),$(122),$(108),$(n),$(-r>>>0),V(1),V(32),$(3),$(l),$(2835),$(2835),O(8),$(16711680),$(65280),$(255),$(4278190080),$(1466527264),function R(){for(;P<r&&T>0;){for(E=122+P*a,g=0;g<o;)T--,v=s[z++],b=v>>>24,h.setUint32(E+g,v<<8|b),g+=4;P++}z<s.length?(T=p,setTimeout(R,Lq._dly)):e(f)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var Ji={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},sRe={[Ji.CHROME]:16384,[Ji.FIREFOX]:11180,[Ji.DESKTOP_SAFARI]:16384,[Ji.IE]:8192,[Ji.IOS]:4096,[Ji.ETC]:8192};const iN=typeof window<"u",Vq=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,dC=iN&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),aRe=(iN||Vq)&&(dC&&dC.getOriginalSymbol(window,"File")||typeof File<"u"&&File),jq=(iN||Vq)&&(dC&&dC.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function sN(t,e,n=Date.now()){return new Promise(r=>{const o=t.split(","),i=o[0].match(/:(.*?);/)[1],s=globalThis.atob(o[1]);let a=s.length;const l=new Uint8Array(a);for(;a--;)l[a]=s.charCodeAt(a);const u=new Blob([l],{type:i});u.name=e,u.lastModified=n,r(u)})}function Bq(t){return new Promise((e,n)=>{const r=new jq;r.onload=()=>e(r.result),r.onerror=o=>n(o),r.readAsDataURL(t)})}function $q(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=o=>n(o),r.src=t})}function Vf(){if(Vf.cachedResult!==void 0)return Vf.cachedResult;let t=Ji.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=Ji.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=Ji.IOS:/Safari/i.test(e)?t=Ji.DESKTOP_SAFARI:/Firefox/i.test(e)?t=Ji.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=Ji.IE),Vf.cachedResult=t,Vf.cachedResult}function Hq(t,e){const n=Vf(),r=sRe[n];let o=t,i=e,s=o*i;const a=o>i?i/o:o/i;for(;s>r*r;){const l=(r+o)/2,u=(r+i)/2;l<u?(i=u,o=u*a):(i=l*a,o=l),s=o*i}return{width:o,height:i}}function ex(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function Fq(t,e){const{width:n,height:r}=Hq(t.width,t.height),[o,i]=ex(n,r);return e&&/jpe?g/.test(e)&&(i.fillStyle="white",i.fillRect(0,0,o.width,o.height)),i.drawImage(t,0,0,o.width,o.height),o}function v1(){return v1.cachedResult!==void 0||(v1.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),v1.cachedResult}function fC(t,e={}){return new Promise(function(n,r){let o,i;var s=function(){try{return i=Fq(o,e.fileType||t.type),n([o,i])}catch(l){return r(l)}},a=function(l){try{var u=function(f){try{throw f}catch(h){return r(h)}};try{let f;return Bq(t).then(function(h){try{return f=h,$q(f).then(function(p){try{return o=p,function(){try{return s()}catch(g){return r(g)}}()}catch(g){return u(g)}},u)}catch(p){return u(p)}},u)}catch(f){u(f)}}catch(f){return r(f)}};try{if(v1()||[Ji.DESKTOP_SAFARI,Ji.MOBILE_SAFARI].includes(Vf()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return o=l,s()}catch{return a()}},a)}catch{a()}})}function hC(t,e,n,r,o=1){return new Promise(function(i,s){let a;if(e==="image/png"){let u,f,h;return u=t.getContext("2d"),{data:f}=u.getImageData(0,0,t.width,t.height),h=Pa.encode([f.buffer],t.width,t.height,4096*o),a=new Blob([h],{type:e}),a.name=n,a.lastModified=r,l.call(this)}{let u=function(){return l.call(this)};if(e==="image/bmp")return new Promise(f=>Lq.toBlob(t,f)).then((function(f){try{return a=f,a.name=n,a.lastModified=r,u.call(this)}catch(h){return s(h)}}).bind(this),s);{let f=function(){return u.call(this)};if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:o}).then((function(h){try{return a=h,a.name=n,a.lastModified=r,f.call(this)}catch(p){return s(p)}}).bind(this),s);{let h;return h=t.toDataURL(e,o),sN(h,n,r).then((function(p){try{return a=p,f.call(this)}catch(g){return s(g)}}).bind(this),s)}}}function l(){return i(a)}})}function _l(t){t.width=0,t.height=0}function Ep(){return new Promise(function(t,e){let n,r,o,i;return Ep.cachedResult!==void 0?t(Ep.cachedResult):sN("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return n=s,fC(n).then(function(a){try{return r=a[1],hC(r,n.type,n.name,n.lastModified).then(function(l){try{return o=l,_l(r),fC(o).then(function(u){try{return i=u[0],Ep.cachedResult=i.width===1&&i.height===2,t(Ep.cachedResult)}catch(f){return e(f)}},e)}catch(u){return e(u)}},e)}catch(l){return e(l)}},e)}catch(a){return e(a)}},e)})}function zq(t){return new Promise((e,n)=>{const r=new jq;r.onload=o=>{const i=new DataView(o.target.result);if(i.getUint16(0,!1)!=65496)return e(-2);const s=i.byteLength;let a=2;for(;a<s;){if(i.getUint16(a+2,!1)<=8)return e(-1);const l=i.getUint16(a,!1);if(a+=2,l==65505){if(i.getUint32(a+=2,!1)!=1165519206)return e(-1);const u=i.getUint16(a+=6,!1)==18761;a+=i.getUint32(a+4,u);const f=i.getUint16(a,u);a+=2;for(let h=0;h<f;h++)if(i.getUint16(a+12*h,u)==274)return e(i.getUint16(a+12*h+8,u))}else{if((65280&l)!=65280)break;a+=i.getUint16(a,!1)}}return e(-1)},r.onerror=o=>n(o),r.readAsArrayBuffer(t)})}function Uq(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:o}=e;let i,s=t;return isFinite(o)&&(n>o||r>o)&&([s,i]=ex(n,r),n>r?(s.width=o,s.height=r/n*o):(s.width=n/r*o,s.height=o),i.drawImage(t,0,0,s.width,s.height),_l(t)),s}function qq(t,e){const{width:n}=t,{height:r}=t,[o,i]=ex(n,r);switch(e>4&&e<9?(o.width=r,o.height=n):(o.width=n,o.height=r),e){case 2:i.transform(-1,0,0,1,n,0);break;case 3:i.transform(-1,0,0,-1,n,r);break;case 4:i.transform(1,0,0,-1,0,r);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,r,0);break;case 7:i.transform(0,-1,-1,0,r,n);break;case 8:i.transform(0,-1,1,0,0,n)}return i.drawImage(t,0,0,n,r),_l(t),o}function S6(t,e,n=0){return new Promise(function(r,o){let i,s,a,l,u,f,h,p,g,v,b,E,T,P,D,z,V,$,O,R;function M(q=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;i+=q,e.onProgress(Math.min(i,100))}function B(q){if(e.signal&&e.signal.aborted)throw e.signal.reason;i=Math.min(Math.max(q,i),100),e.onProgress(i)}return i=n,s=e.maxIteration||10,a=1024*e.maxSizeMB*1024,M(),fC(t,e).then((function(q){try{return[,l]=q,M(),u=Uq(l,e),M(),new Promise(function(K,F){var ne;if(!(ne=e.exifOrientation))return zq(t).then((function(j){try{return ne=j,oe.call(this)}catch(U){return F(U)}}).bind(this),F);function oe(){return K(ne)}return oe.call(this)}).then((function(K){try{return f=K,M(),Ep().then((function(F){try{return h=F?u:qq(u,f),M(),p=e.initialQuality||1,g=e.fileType||t.type,hC(h,g,t.name,t.lastModified,p).then((function(ne){try{{let j=function(){if(s--&&(D>a||D>T)){let Z,J;return Z=R?.95*O.width:O.width,J=R?.95*O.height:O.height,[V,$]=ex(Z,J),$.drawImage(O,0,0,Z,J),p*=g==="image/png"?.85:.95,hC(V,g,t.name,t.lastModified,p).then(function(Y){try{return z=Y,_l(O),O=V,D=z.size,B(Math.min(99,Math.floor((P-D)/(P-a)*100))),j}catch(se){return o(se)}},o)}return[1]},U=function(){return _l(O),_l(V),_l(u),_l(h),_l(l),B(100),r(z)};if(v=ne,M(),b=v.size>a,E=v.size>t.size,!b&&!E)return B(100),r(v);var oe;return T=t.size,P=v.size,D=P,O=h,R=!e.alwaysKeepResolution&&b,(oe=(function(Z){for(;Z;){if(Z.then)return void Z.then(oe,o);try{if(Z.pop){if(Z.length)return Z.pop()?U.call(this):Z;Z=j}else Z=Z.call(this)}catch(J){return o(J)}}}).bind(this))(j)}}catch(j){return o(j)}}).bind(this),o)}catch(ne){return o(ne)}}).bind(this),o)}catch(F){return o(F)}}).bind(this),o)}catch(K){return o(K)}}).bind(this),o)})}const lRe=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let jk;function cRe(t,e){return new Promise((n,r)=>{jk||(jk=function(s){const a=[];return a.push(s),URL.createObjectURL(new Blob(a))}(lRe));const o=new Worker(jk);o.addEventListener("message",function(s){if(e.signal&&e.signal.aborted)o.terminate();else if(s.data.progress===void 0){if(s.data.error)return r(new Error(s.data.error)),void o.terminate();n(s.data.file),o.terminate()}else e.onProgress(s.data.progress)}),o.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),o.terminate()}),o.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Uo(t,e){return new Promise(function(n,r){let o,i,s,a,l,u;if(o={...e},s=0,{onProgress:a}=o,o.maxSizeMB=o.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof o.useWebWorker!="boolean"||o.useWebWorker,delete o.useWebWorker,o.onProgress=g=>{s=g,typeof a=="function"&&a(s)},!(t instanceof Blob||t instanceof aRe))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(u=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||u)return S6(t,o).then((function(g){try{return i=g,p.call(this)}catch(v){return r(v)}}).bind(this),r);var f=(function(){try{return p.call(this)}catch(g){return r(g)}}).bind(this),h=function(g){try{return S6(t,o).then(function(v){try{return i=v,f()}catch(b){return r(b)}},r)}catch(v){return r(v)}};try{return o.libURL=o.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",cRe(t,o).then(function(g){try{return i=g,f()}catch{return h()}},h)}catch{h()}function p(){try{i.name=t.name,i.lastModified=t.lastModified}catch{}try{o.preserveExif&&t.type==="image/jpeg"&&(!o.fileType||o.fileType&&o.fileType===t.type)&&(i=Pq(t,i))}catch{}return n(i)}})}Uo.getDataUrlFromFile=Bq,Uo.getFilefromDataUrl=sN,Uo.loadImage=$q,Uo.drawImageInCanvas=Fq,Uo.drawFileInCanvas=fC,Uo.canvasToFile=hC,Uo.getExifOrientation=zq,Uo.handleMaxWidthOrHeight=Uq,Uo.followExifOrientation=qq,Uo.cleanupCanvasMemory=_l,Uo.isAutoOrientationInBrowser=Ep,Uo.approximateBelowMaximumCanvasSizeOfBrowser=Hq,Uo.copyExifWithoutOrientation=Pq,Uo.getBrowserName=Vf,Uo.version="2.0.2";function uRe(){const{openSidebar:t,setOpenSidebar:e,pageTitle:n,setPageTitle:r,pageGuess:o,setPageGuess:i,pageClass:s,pageBook:a,pageContent:l,nanoPageId:u,SyncedQueue:f}=wd(),[h,p]=_.useState(null),g=[{type:"paragraph",content:[{type:"text",text:"",styles:{}}]}];async function v(b){const E=await Uo(b,{maxSizeMB:.1,useWebWorker:!0,initialQuality:.4,maxWidthOrHeight:1024});console.log(E.size);const T=await Uo.getDataUrlFromFile(E);return console.log("Base64 String:",T),T}return _.useEffect(()=>{(async()=>{let E;try{E=l&&l!==""?JSON.parse(l):g}catch{E=g}const T=await az.create({initialContent:E,uploadFile:v});p(T)})()},[l]),C.jsxs(y9,{open:t,onOpenChange:e,children:[C.jsx(gA,{className:"hidden",children:"Edit Page"}),C.jsxs(v9,{className:"w-full sm:max-w-1/2",children:[C.jsx("input",{className:"text-xl font-bold w-full bg-transparent focus:outline-none px-2",value:n,placeholder:"Page Title",onChange:b=>r(b.target.value)}),C.jsx("input",{className:"w-full bg-transparent focus:outline-none px-2 text-muted-foreground text-sm",value:o,placeholder:"Page Guess",onChange:b=>i(b.target.value)}),C.jsx(C6,{classorbook:"class"}),C.jsx(C6,{classorbook:"book"}),C.jsx("div",{className:"grid flex-1 auto-rows-min gap-6 px-4",children:h&&C.jsx(fq,{editor:h})}),C.jsxs(fQ,{children:[C.jsx(Kf,{type:"submit",onClick:async()=>{const b=h?JSON.stringify(h.topLevelBlocks,null,2):l||"";try{await ao.Items.add({id:u,title:n,guess:o,content:b,renderRange:0,renderDate:new Date().getTime(),classId:s,bookId:a,priority:"low"}),await f(u,"Items","add"),Mf.success("Success save id",{description:u})}catch(E){const T=E;T.name==="ConstraintError"?(await ao.Items.update(u,{id:u,title:n,guess:o,content:b,renderDate:new Date().getTime(),classId:s,bookId:a,priority:"low"}),await f(u,"Items","update"),Mf.success("Page already present successfully updated",{description:u})):Mf.error("Something went wrong",{description:T.message})}},children:"Save changes"}),C.jsx(lQ,{asChild:!0,children:C.jsx(Kf,{variant:"outline",children:"Close"})})]})]})]})}var Gq="AlertDialog",[dRe,KIe]=Jc(Gq,[n9]),iu=n9(),Kq=t=>{const{__scopeAlertDialog:e,...n}=t,r=iu(e);return C.jsx(CC,{...r,...n,modal:!0})};Kq.displayName=Gq;var fRe="AlertDialogTrigger",Wq=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,o=iu(n);return C.jsx(aQ,{...o,...r,ref:e})});Wq.displayName=fRe;var hRe="AlertDialogPortal",Yq=t=>{const{__scopeAlertDialog:e,...n}=t,r=iu(e);return C.jsx(SC,{...r,...n})};Yq.displayName=hRe;var pRe="AlertDialogOverlay",Xq=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,o=iu(n);return C.jsx(xC,{...o,...r,ref:e})});Xq.displayName=pRe;var Hp="AlertDialogContent",[mRe,gRe]=dRe(Hp),yRe=A6("AlertDialogContent"),Qq=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...o}=t,i=iu(n),s=_.useRef(null),a=Mr(e,s),l=_.useRef(null);return C.jsx(rQ,{contentName:Hp,titleName:Zq,docsSlug:"alert-dialog",children:C.jsx(mRe,{scope:n,cancelRef:l,children:C.jsxs(EC,{role:"alertdialog",...i,...o,ref:a,onOpenAutoFocus:kt(o.onOpenAutoFocus,u=>{u.preventDefault(),l.current?.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[C.jsx(yRe,{children:r}),C.jsx(bRe,{contentRef:s})]})})})});Qq.displayName=Hp;var Zq="AlertDialogTitle",Jq=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,o=iu(n);return C.jsx(vA,{...o,...r,ref:e})});Jq.displayName=Zq;var eG="AlertDialogDescription",tG=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,o=iu(n);return C.jsx(bA,{...o,...r,ref:e})});tG.displayName=eG;var vRe="AlertDialogAction",nG=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,o=iu(n);return C.jsx(mm,{...o,...r,ref:e})});nG.displayName=vRe;var rG="AlertDialogCancel",oG=_.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:o}=gRe(rG,n),i=iu(n),s=Mr(e,o);return C.jsx(mm,{...i,...r,ref:s})});oG.displayName=rG;var bRe=({contentRef:t})=>{const e=`\`${Hp}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Hp}\` by passing a \`${eG}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Hp}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return _.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},wRe=Kq,CRe=Wq,SRe=Yq,xRe=Xq,ERe=Qq,_Re=nG,kRe=oG,TRe=Jq,ARe=tG;function iG({...t}){return C.jsx(wRe,{"data-slot":"alert-dialog",...t})}function RRe({...t}){return C.jsx(CRe,{"data-slot":"alert-dialog-trigger",...t})}function MRe({...t}){return C.jsx(SRe,{"data-slot":"alert-dialog-portal",...t})}function IRe({className:t,...e}){return C.jsx(xRe,{"data-slot":"alert-dialog-overlay",className:Mt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function sG({className:t,...e}){return C.jsxs(MRe,{children:[C.jsx(IRe,{}),C.jsx(ERe,{"data-slot":"alert-dialog-content",className:Mt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...e})]})}function aG({className:t,...e}){return C.jsx("div",{"data-slot":"alert-dialog-header",className:Mt("flex flex-col gap-2 text-center sm:text-left",t),...e})}function lG({className:t,...e}){return C.jsx("div",{"data-slot":"alert-dialog-footer",className:Mt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function cG({className:t,...e}){return C.jsx(TRe,{"data-slot":"alert-dialog-title",className:Mt("text-lg font-semibold",t),...e})}function uG({className:t,...e}){return C.jsx(ARe,{"data-slot":"alert-dialog-description",className:Mt("text-muted-foreground text-sm",t),...e})}function dG({className:t,...e}){return C.jsx(_Re,{className:Mt(dA(),t),...e})}function fG({className:t,...e}){return C.jsx(kRe,{className:Mt(dA({variant:"outline"}),t),...e})}function hG(t){const e=t+"CollectionProvider",[n,r]=Jc(e),[o,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=b=>{const{scope:E,children:T}=b,P=Pe.useRef(null),D=Pe.useRef(new Map).current;return C.jsx(o,{scope:E,itemMap:D,collectionRef:P,children:T})};s.displayName=e;const a=t+"CollectionSlot",l=Gf(a),u=Pe.forwardRef((b,E)=>{const{scope:T,children:P}=b,D=i(a,T),z=Mr(E,D.collectionRef);return C.jsx(l,{ref:z,children:P})});u.displayName=a;const f=t+"CollectionItemSlot",h="data-radix-collection-item",p=Gf(f),g=Pe.forwardRef((b,E)=>{const{scope:T,children:P,...D}=b,z=Pe.useRef(null),V=Mr(E,z),$=i(f,T);return Pe.useEffect(()=>($.itemMap.set(z,{ref:z,...D}),()=>void $.itemMap.delete(z))),C.jsx(p,{[h]:"",ref:V,children:P})});g.displayName=f;function v(b){const E=i(t+"CollectionConsumer",b);return Pe.useCallback(()=>{const P=E.collectionRef.current;if(!P)return[];const D=Array.from(P.querySelectorAll(`[${h}]`));return Array.from(E.itemMap.values()).sort(($,O)=>D.indexOf($.ref.current)-D.indexOf(O.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:s,Slot:u,ItemSlot:g},v,r]}var NRe=_.createContext(void 0);function pG(t){const e=_.useContext(NRe);return t||e||"ltr"}var Bk="rovingFocusGroup.onEntryFocus",DRe={bubbles:!1,cancelable:!0},Qv="RovingFocusGroup",[rA,mG,ORe]=hG(Qv),[PRe,gG]=Jc(Qv,[ORe]),[LRe,VRe]=PRe(Qv),yG=_.forwardRef((t,e)=>C.jsx(rA.Provider,{scope:t.__scopeRovingFocusGroup,children:C.jsx(rA.Slot,{scope:t.__scopeRovingFocusGroup,children:C.jsx(jRe,{...t,ref:e})})}));yG.displayName=Qv;var jRe=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...h}=t,p=_.useRef(null),g=Mr(e,p),v=pG(i),[b,E]=iv({prop:s,defaultProp:a??null,onChange:l,caller:Qv}),[T,P]=_.useState(!1),D=qc(u),z=mG(n),V=_.useRef(!1),[$,O]=_.useState(0);return _.useEffect(()=>{const R=p.current;if(R)return R.addEventListener(Bk,D),()=>R.removeEventListener(Bk,D)},[D]),C.jsx(LRe,{scope:n,orientation:r,dir:v,loop:o,currentTabStopId:b,onItemFocus:_.useCallback(R=>E(R),[E]),onItemShiftTab:_.useCallback(()=>P(!0),[]),onFocusableItemAdd:_.useCallback(()=>O(R=>R+1),[]),onFocusableItemRemove:_.useCallback(()=>O(R=>R-1),[]),children:C.jsx(Pn.div,{tabIndex:T||$===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...t.style},onMouseDown:kt(t.onMouseDown,()=>{V.current=!0}),onFocus:kt(t.onFocus,R=>{const M=!V.current;if(R.target===R.currentTarget&&M&&!T){const B=new CustomEvent(Bk,DRe);if(R.currentTarget.dispatchEvent(B),!B.defaultPrevented){const q=z().filter(j=>j.focusable),K=q.find(j=>j.active),F=q.find(j=>j.id===b),oe=[K,F,...q].filter(Boolean).map(j=>j.ref.current);wG(oe,f)}}V.current=!1}),onBlur:kt(t.onBlur,()=>P(!1))})})}),vG="RovingFocusGroupItem",bG=_.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:i,children:s,...a}=t,l=ts(),u=i||l,f=VRe(vG,n),h=f.currentTabStopId===u,p=mG(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:b}=f;return _.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),C.jsx(rA.ItemSlot,{scope:n,id:u,focusable:r,active:o,children:C.jsx(Pn.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...a,ref:e,onMouseDown:kt(t.onMouseDown,E=>{r?f.onItemFocus(u):E.preventDefault()}),onFocus:kt(t.onFocus,()=>f.onItemFocus(u)),onKeyDown:kt(t.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){f.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const T=HRe(E,f.orientation,f.dir);if(T!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let D=p().filter(z=>z.focusable).map(z=>z.ref.current);if(T==="last")D.reverse();else if(T==="prev"||T==="next"){T==="prev"&&D.reverse();const z=D.indexOf(E.currentTarget);D=f.loop?FRe(D,z+1):D.slice(z+1)}setTimeout(()=>wG(D))}}),children:typeof s=="function"?s({isCurrentTabStop:h,hasTabStop:b!=null}):s})})});bG.displayName=vG;var BRe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $Re(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function HRe(t,e,n){const r=$Re(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return BRe[r]}function wG(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function FRe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var zRe=yG,URe=bG,oA=["Enter"," "],qRe=["ArrowDown","PageUp","Home"],CG=["ArrowUp","PageDown","End"],GRe=[...qRe,...CG],KRe={ltr:[...oA,"ArrowRight"],rtl:[...oA,"ArrowLeft"]},WRe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Zv="Menu",[rv,YRe,XRe]=hG(Zv),[_h,SG]=Jc(Zv,[XRe,vm,gG]),tx=vm(),xG=gG(),[QRe,kh]=_h(Zv),[ZRe,Jv]=_h(Zv),EG=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:o,onOpenChange:i,modal:s=!0}=t,a=tx(e),[l,u]=_.useState(null),f=_.useRef(!1),h=qc(i),p=pG(o);return _.useEffect(()=>{const g=()=>{f.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>f.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),C.jsx(MA,{...a,children:C.jsx(QRe,{scope:e,open:n,onOpenChange:h,content:l,onContentChange:u,children:C.jsx(ZRe,{scope:e,onClose:_.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:p,modal:s,children:r})})})};EG.displayName=Zv;var JRe="MenuAnchor",aN=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=tx(n);return C.jsx(RC,{...o,...r,ref:e})});aN.displayName=JRe;var lN="MenuPortal",[eMe,_G]=_h(lN,{forceMount:void 0}),kG=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:o}=t,i=kh(lN,e);return C.jsx(eMe,{scope:e,forceMount:n,children:C.jsx(ya,{present:n||i.open,children:C.jsx(av,{asChild:!0,container:o,children:r})})})};kG.displayName=lN;var fa="MenuContent",[tMe,cN]=_h(fa),TG=_.forwardRef((t,e)=>{const n=_G(fa,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,i=kh(fa,t.__scopeMenu),s=Jv(fa,t.__scopeMenu);return C.jsx(rv.Provider,{scope:t.__scopeMenu,children:C.jsx(ya,{present:r||i.open,children:C.jsx(rv.Slot,{scope:t.__scopeMenu,children:s.modal?C.jsx(nMe,{...o,ref:e}):C.jsx(rMe,{...o,ref:e})})})})}),nMe=_.forwardRef((t,e)=>{const n=kh(fa,t.__scopeMenu),r=_.useRef(null),o=Mr(e,r);return _.useEffect(()=>{const i=r.current;if(i)return hA(i)},[]),C.jsx(uN,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:kt(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),rMe=_.forwardRef((t,e)=>{const n=kh(fa,t.__scopeMenu);return C.jsx(uN,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),oMe=Gf("MenuContent.ScrollLock"),uN=_.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,onDismiss:g,disableOutsideScroll:v,...b}=t,E=kh(fa,n),T=Jv(fa,n),P=tx(n),D=xG(n),z=YRe(n),[V,$]=_.useState(null),O=_.useRef(null),R=Mr(e,O,E.onContentChange),M=_.useRef(0),B=_.useRef(""),q=_.useRef(0),K=_.useRef(null),F=_.useRef("right"),ne=_.useRef(0),oe=v?bC:_.Fragment,j=v?{as:oMe,allowPinchZoom:!0}:void 0,U=J=>{const Y=B.current+J,se=z().filter(De=>!De.disabled),te=document.activeElement,ie=se.find(De=>De.ref.current===te)?.textValue,ue=se.map(De=>De.textValue),ae=gMe(ue,Y,ie),ve=se.find(De=>De.textValue===ae)?.ref.current;(function De(Ue){B.current=Ue,window.clearTimeout(M.current),Ue!==""&&(M.current=window.setTimeout(()=>De(""),1e3))})(Y),ve&&setTimeout(()=>ve.focus())};_.useEffect(()=>()=>window.clearTimeout(M.current),[]),fA();const Z=_.useCallback(J=>F.current===K.current?.side&&vMe(J,K.current?.area),[]);return C.jsx(tMe,{scope:n,searchRef:B,onItemEnter:_.useCallback(J=>{Z(J)&&J.preventDefault()},[Z]),onItemLeave:_.useCallback(J=>{Z(J)||(O.current?.focus(),$(null))},[Z]),onTriggerLeave:_.useCallback(J=>{Z(J)&&J.preventDefault()},[Z]),pointerGraceTimerRef:q,onPointerGraceIntentChange:_.useCallback(J=>{K.current=J},[]),children:C.jsx(oe,{...j,children:C.jsx(yC,{asChild:!0,trapped:o,onMountAutoFocus:kt(i,J=>{J.preventDefault(),O.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:C.jsx(sv,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,onDismiss:g,children:C.jsx(zRe,{asChild:!0,...D,dir:T.dir,orientation:"vertical",loop:r,currentTabStopId:V,onCurrentTabStopIdChange:$,onEntryFocus:kt(l,J=>{T.isUsingKeyboardRef.current||J.preventDefault()}),preventScrollOnEntryFocus:!0,children:C.jsx(IA,{role:"menu","aria-orientation":"vertical","data-state":zG(E.open),"data-radix-menu-content":"",dir:T.dir,...P,...b,ref:R,style:{outline:"none",...b.style},onKeyDown:kt(b.onKeyDown,J=>{const se=J.target.closest("[data-radix-menu-content]")===J.currentTarget,te=J.ctrlKey||J.altKey||J.metaKey,ie=J.key.length===1;se&&(J.key==="Tab"&&J.preventDefault(),!te&&ie&&U(J.key));const ue=O.current;if(J.target!==ue||!GRe.includes(J.key))return;J.preventDefault();const ve=z().filter(De=>!De.disabled).map(De=>De.ref.current);CG.includes(J.key)&&ve.reverse(),pMe(ve)}),onBlur:kt(t.onBlur,J=>{J.currentTarget.contains(J.target)||(window.clearTimeout(M.current),B.current="")}),onPointerMove:kt(t.onPointerMove,ov(J=>{const Y=J.target,se=ne.current!==J.clientX;if(J.currentTarget.contains(Y)&&se){const te=J.clientX>ne.current?"right":"left";F.current=te,ne.current=J.clientX}}))})})})})})})});TG.displayName=fa;var iMe="MenuGroup",dN=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return C.jsx(Pn.div,{role:"group",...r,ref:e})});dN.displayName=iMe;var sMe="MenuLabel",AG=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return C.jsx(Pn.div,{...r,ref:e})});AG.displayName=sMe;var pC="MenuItem",x6="menu.itemSelect",nx=_.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...o}=t,i=_.useRef(null),s=Jv(pC,t.__scopeMenu),a=cN(pC,t.__scopeMenu),l=Mr(e,i),u=_.useRef(!1),f=()=>{const h=i.current;if(!n&&h){const p=new CustomEvent(x6,{bubbles:!0,cancelable:!0});h.addEventListener(x6,g=>r?.(g),{once:!0}),z6(h,p),p.defaultPrevented?u.current=!1:s.onClose()}};return C.jsx(RG,{...o,ref:l,disabled:n,onClick:kt(t.onClick,f),onPointerDown:h=>{t.onPointerDown?.(h),u.current=!0},onPointerUp:kt(t.onPointerUp,h=>{u.current||h.currentTarget?.click()}),onKeyDown:kt(t.onKeyDown,h=>{const p=a.searchRef.current!=="";n||p&&h.key===" "||oA.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});nx.displayName=pC;var RG=_.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...i}=t,s=cN(pC,n),a=xG(n),l=_.useRef(null),u=Mr(e,l),[f,h]=_.useState(!1),[p,g]=_.useState("");return _.useEffect(()=>{const v=l.current;v&&g((v.textContent??"").trim())},[i.children]),C.jsx(rv.ItemSlot,{scope:n,disabled:r,textValue:o??p,children:C.jsx(URe,{asChild:!0,...a,focusable:!r,children:C.jsx(Pn.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:kt(t.onPointerMove,ov(v=>{r?s.onItemLeave(v):(s.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:kt(t.onPointerLeave,ov(v=>s.onItemLeave(v))),onFocus:kt(t.onFocus,()=>h(!0)),onBlur:kt(t.onBlur,()=>h(!1))})})})}),aMe="MenuCheckboxItem",MG=_.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return C.jsx(PG,{scope:t.__scopeMenu,checked:n,children:C.jsx(nx,{role:"menuitemcheckbox","aria-checked":mC(n)?"mixed":n,...o,ref:e,"data-state":hN(n),onSelect:kt(o.onSelect,()=>r?.(mC(n)?!0:!n),{checkForDefaultPrevented:!1})})})});MG.displayName=aMe;var IG="MenuRadioGroup",[lMe,cMe]=_h(IG,{value:void 0,onValueChange:()=>{}}),NG=_.forwardRef((t,e)=>{const{value:n,onValueChange:r,...o}=t,i=qc(r);return C.jsx(lMe,{scope:t.__scopeMenu,value:n,onValueChange:i,children:C.jsx(dN,{...o,ref:e})})});NG.displayName=IG;var DG="MenuRadioItem",OG=_.forwardRef((t,e)=>{const{value:n,...r}=t,o=cMe(DG,t.__scopeMenu),i=n===o.value;return C.jsx(PG,{scope:t.__scopeMenu,checked:i,children:C.jsx(nx,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":hN(i),onSelect:kt(r.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});OG.displayName=DG;var fN="MenuItemIndicator",[PG,uMe]=_h(fN,{checked:!1}),LG=_.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...o}=t,i=uMe(fN,n);return C.jsx(ya,{present:r||mC(i.checked)||i.checked===!0,children:C.jsx(Pn.span,{...o,ref:e,"data-state":hN(i.checked)})})});LG.displayName=fN;var dMe="MenuSeparator",VG=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return C.jsx(Pn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});VG.displayName=dMe;var fMe="MenuArrow",jG=_.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=tx(n);return C.jsx(NA,{...o,...r,ref:e})});jG.displayName=fMe;var hMe="MenuSub",[WIe,BG]=_h(hMe),Yg="MenuSubTrigger",$G=_.forwardRef((t,e)=>{const n=kh(Yg,t.__scopeMenu),r=Jv(Yg,t.__scopeMenu),o=BG(Yg,t.__scopeMenu),i=cN(Yg,t.__scopeMenu),s=_.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,u={__scopeMenu:t.__scopeMenu},f=_.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return _.useEffect(()=>f,[f]),_.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),l(null)}},[a,l]),C.jsx(aN,{asChild:!0,...u,children:C.jsx(RG,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":zG(n.open),...t,ref:Uc(e,o.onTriggerChange),onClick:h=>{t.onClick?.(h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:kt(t.onPointerMove,ov(h=>{i.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:kt(t.onPointerLeave,ov(h=>{f();const p=n.content?.getBoundingClientRect();if(p){const g=n.content?.dataset.side,v=g==="right",b=v?-5:5,E=p[v?"left":"right"],T=p[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+b,y:h.clientY},{x:E,y:p.top},{x:T,y:p.top},{x:T,y:p.bottom},{x:E,y:p.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:kt(t.onKeyDown,h=>{const p=i.searchRef.current!=="";t.disabled||p&&h.key===" "||KRe[r.dir].includes(h.key)&&(n.onOpenChange(!0),n.content?.focus(),h.preventDefault())})})})});$G.displayName=Yg;var HG="MenuSubContent",FG=_.forwardRef((t,e)=>{const n=_G(fa,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,i=kh(fa,t.__scopeMenu),s=Jv(fa,t.__scopeMenu),a=BG(HG,t.__scopeMenu),l=_.useRef(null),u=Mr(e,l);return C.jsx(rv.Provider,{scope:t.__scopeMenu,children:C.jsx(ya,{present:r||i.open,children:C.jsx(rv.Slot,{scope:t.__scopeMenu,children:C.jsx(uN,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:u,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{s.isUsingKeyboardRef.current&&l.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:kt(t.onFocusOutside,f=>{f.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:kt(t.onEscapeKeyDown,f=>{s.onClose(),f.preventDefault()}),onKeyDown:kt(t.onKeyDown,f=>{const h=f.currentTarget.contains(f.target),p=WRe[s.dir].includes(f.key);h&&p&&(i.onOpenChange(!1),a.trigger?.focus(),f.preventDefault())})})})})})});FG.displayName=HG;function zG(t){return t?"open":"closed"}function mC(t){return t==="indeterminate"}function hN(t){return mC(t)?"indeterminate":t?"checked":"unchecked"}function pMe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function mMe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function gMe(t,e,n){const o=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let s=mMe(t,Math.max(i,0));o.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function yMe(t,e){const{x:n,y:r}=t;let o=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const a=e[i],l=e[s],u=a.x,f=a.y,h=l.x,p=l.y;f>r!=p>r&&n<(h-u)*(r-f)/(p-f)+u&&(o=!o)}return o}function vMe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return yMe(n,e)}function ov(t){return e=>e.pointerType==="mouse"?t(e):void 0}var bMe=EG,wMe=aN,CMe=kG,SMe=TG,xMe=dN,EMe=AG,_Me=nx,kMe=MG,TMe=NG,AMe=OG,RMe=LG,MMe=VG,IMe=jG,NMe=$G,DMe=FG,rx="DropdownMenu",[OMe,YIe]=Jc(rx,[SG]),Oi=SG(),[PMe,UG]=OMe(rx),qG=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:o,defaultOpen:i,onOpenChange:s,modal:a=!0}=t,l=Oi(e),u=_.useRef(null),[f,h]=iv({prop:o,defaultProp:i??!1,onChange:s,caller:rx});return C.jsx(PMe,{scope:e,triggerId:ts(),triggerRef:u,contentId:ts(),open:f,onOpenChange:h,onOpenToggle:_.useCallback(()=>h(p=>!p),[h]),modal:a,children:C.jsx(bMe,{...l,open:f,onOpenChange:h,dir:r,modal:a,children:n})})};qG.displayName=rx;var GG="DropdownMenuTrigger",KG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=t,i=UG(GG,n),s=Oi(n);return C.jsx(wMe,{asChild:!0,...s,children:C.jsx(Pn.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:Uc(e,i.triggerRef),onPointerDown:kt(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:kt(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});KG.displayName=GG;var LMe="DropdownMenuPortal",WG=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Oi(e);return C.jsx(CMe,{...r,...n})};WG.displayName=LMe;var YG="DropdownMenuContent",XG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=UG(YG,n),i=Oi(n),s=_.useRef(!1);return C.jsx(SMe,{id:o.contentId,"aria-labelledby":o.triggerId,...i,...r,ref:e,onCloseAutoFocus:kt(t.onCloseAutoFocus,a=>{s.current||o.triggerRef.current?.focus(),s.current=!1,a.preventDefault()}),onInteractOutside:kt(t.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,f=l.button===2||u;(!o.modal||f)&&(s.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});XG.displayName=YG;var VMe="DropdownMenuGroup",jMe=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Oi(n);return C.jsx(xMe,{...o,...r,ref:e})});jMe.displayName=VMe;var BMe="DropdownMenuLabel",QG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Oi(n);return C.jsx(EMe,{...o,...r,ref:e})});QG.displayName=BMe;var $Me="DropdownMenuItem",ZG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Oi(n);return C.jsx(_Me,{...o,...r,ref:e})});ZG.displayName=$Me;var HMe="DropdownMenuCheckboxItem",FMe=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Oi(n);return C.jsx(kMe,{...o,...r,ref:e})});FMe.displayName=HMe;var zMe="DropdownMenuRadioGroup",UMe=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Oi(n);return C.jsx(TMe,{...o,...r,ref:e})});UMe.displayName=zMe;var qMe="DropdownMenuRadioItem",GMe=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Oi(n);return C.jsx(AMe,{...o,...r,ref:e})});GMe.displayName=qMe;var KMe="DropdownMenuItemIndicator",WMe=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Oi(n);return C.jsx(RMe,{...o,...r,ref:e})});WMe.displayName=KMe;var YMe="DropdownMenuSeparator",JG=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Oi(n);return C.jsx(MMe,{...o,...r,ref:e})});JG.displayName=YMe;var XMe="DropdownMenuArrow",QMe=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Oi(n);return C.jsx(IMe,{...o,...r,ref:e})});QMe.displayName=XMe;var ZMe="DropdownMenuSubTrigger",JMe=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Oi(n);return C.jsx(NMe,{...o,...r,ref:e})});JMe.displayName=ZMe;var eIe="DropdownMenuSubContent",tIe=_.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=Oi(n);return C.jsx(DMe,{...o,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});tIe.displayName=eIe;var nIe=qG,rIe=KG,oIe=WG,iIe=XG,sIe=QG,aIe=ZG,lIe=JG;function cIe({...t}){return C.jsx(nIe,{"data-slot":"dropdown-menu",...t})}function uIe({...t}){return C.jsx(rIe,{"data-slot":"dropdown-menu-trigger",...t})}function dIe({className:t,sideOffset:e=4,...n}){return C.jsx(oIe,{children:C.jsx(iIe,{"data-slot":"dropdown-menu-content",sideOffset:e,className:Mt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function E6({className:t,inset:e,variant:n="default",...r}){return C.jsx(aIe,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:Mt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function fIe({className:t,inset:e,...n}){return C.jsx(sIe,{"data-slot":"dropdown-menu-label","data-inset":e,className:Mt("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...n})}function hIe({className:t,...e}){return C.jsx(lIe,{"data-slot":"dropdown-menu-separator",className:Mt("bg-border -mx-1 my-1 h-px",t),...e})}const iA=e8((t,e)=>({open:!1,options:null,resolve:void 0,show:n=>new Promise(r=>{t({open:!0,options:n,resolve:r})}),close:()=>{const n=e().resolve;n?.(!1),t({open:!1,options:null,resolve:void 0})}}));function pIe(){const{setOpenSidebar:t,setPageTitle:e,setPageGuess:n,setPageContent:r,setPageClass:o,setPageBook:i,setNanoPageId:s,SyncedQueue:a,selectedFilter:l,icons:u,renderRangeData:f}=wd(),h=TJ(l),p=()=>({header:"ID",size:50,thClassName:"p-2",cell:({row:z})=>{const V=z.original;return C.jsx(C.Fragment,{children:C.jsxs(cIe,{children:[C.jsx(uIe,{className:"flex items-center justify-center w-full h-full",children:C.jsx(qW,{})}),C.jsxs(dIe,{className:"w-56",align:"start",children:[C.jsx(fIe,{children:"My Account"}),C.jsx(hIe,{}),C.jsx(E6,{onClick:()=>{navigator.clipboard.writeText(V.id),Mf.success("Success copy id",{description:V.id})},children:"Copy Id"}),C.jsx(E6,{onClick:async()=>{await iA.getState().show({title:"Delete this post?",description:"This cannot be undone.",actionLabel:"Delete",cancelLabel:"Cancel"})?(ao.Items.delete(V.id),await a(V.id,"Items","delete"),Mf.success("deleted item",{description:V.id})):console.log("User canceled")},children:"Delete"})]})]})})}}),g=()=>({header:"Title",size:300,cell:({row:z})=>{const V=z.original;return C.jsxs("div",{onClick:$=>{$.currentTarget.firstElementChild?.classList.toggle("blur-sm")},className:"p-2 font-bold relative cursor-pointer",children:[C.jsx("span",{className:"blur-sm",children:V.title}),C.jsx("span",{onClick:()=>{t(!0),s(V.id),e(V.title),n(V.guess),r(V.content??'[{type: "paragraph",content: [{type: "text",text: "",styles: {},},],},]'),o(V.classId),i(V.bookId)},className:"absolute right-0 mr-2 text-neutral-400 cursor-pointer",children:C.jsx(eY,{})})]})}}),v=()=>({header:"Range",size:100,cell:({row:z})=>{const V=z.original;return C.jsx("div",{className:"p-2",children:C.jsxs(iG,{children:[C.jsx(RRe,{className:"w-full rounded-md text-sm font-medium  bg-primary text-primary-foreground shadow-xs hover:bg-primary/90 h-9 px-4 py-2",children:f[V.renderRange||0].label}),C.jsxs(sG,{children:[C.jsxs(aG,{children:[C.jsx(cG,{children:"Are you absolutely sure?"}),C.jsx(uG,{children:"This action cannot be undone. This will permanently delete your account and remove your data from our servers."})]}),C.jsxs(lG,{children:[C.jsx(fG,{onClick:async()=>{try{await ao.Items.update(V.id,{...V,renderRange:1,renderDate:new Date().getTime()+f[String(1)].time}),await a(V.id,"Items","update"),Mf.success("Page already present successfully updated",{description:V.id})}catch($){console.error(" Failed to update progress:",$)}},children:"Cancel"}),C.jsx(dG,{onClick:async()=>{try{const $=Math.min(V.renderRange||1,9)||1;await ao.Items.update(V.id,{...V,renderRange:$,renderDate:new Date().getTime()+f[String($)].time}),await a(V.id,"Items","update"),Mf.success("Page already present successfully updated",{description:V.id})}catch($){console.error(" Failed to update progress:",$)}},children:"Continue"})]})]})]})})}}),b=()=>({header:"Guess",size:500,cell:({row:z})=>{const V=z.original;return C.jsx("div",{className:"p-2",children:V.guess})}}),E=z=>({header:z==="classId"?"Class":"Book",cell:({row:V})=>{const $=V.original,O=z==="classId"?$.classId.trim():$.bookId.trim();return C.jsxs("div",{className:"p-2 text-center flex items-center gap-2",children:[C.jsx("img",{src:u.find(R=>R.value===O)?.url||u.find(R=>R.value==="placeholder")?.url,className:"h-7 aspect-square",alt:""}),C.jsx("span",{children:z==="classId"?$.classId.trim():$.bookId.trim()})]})}}),T=()=>({header:"Priority",tdClassName:"text-center",cell:({row:z})=>{const V=z.original;return C.jsx("span",{className:`${V.priority==="high"?"bg-green-200/50 text-green-800":V.priority==="medium"?"bg-yellow-200/50 text-yellow-800":"bg-red-200/50 text-red-800"} p-1 rounded-md block mx-2
         `,children:V.priority})}}),P=_.useMemo(()=>[p(),g(),v(),b(),E("classId"),E("bookId"),T()],[]),D=Aae({data:h,columns:P,getCoreRowModel:Eae()});return C.jsxs("div",{className:"overflow-scroll table-wrapper",children:[C.jsxs("table",{className:"table-fixed border-collapse w-full",children:[C.jsx("thead",{children:D.getHeaderGroups().map(z=>C.jsx("tr",{children:z.headers.map(V=>C.jsx("th",{className:`border bg-gray-100 ${V.column?.columnDef?.className||""} ${V.column?.columnDef?.thClassName||""}`,style:{width:V.column.getSize()},children:V.isPlaceholder?null:O3(V.column.columnDef.header,V.getContext())},V.id))},z.id))}),C.jsx("tbody",{children:D.getRowModel().rows.map(z=>C.jsx("tr",{children:z.getVisibleCells().map(V=>C.jsx("td",{className:`border ${V.column?.columnDef?.className||""} ${V.column?.columnDef?.tdClassName||""}`,style:{width:V.column.getSize()},children:O3(V.column.columnDef.cell,V.getContext())},V.id))},z.id))})]}),C.jsx(uRe,{})]})}function mIe(){const{openCommandSearch:t,setOpenCommandSearch:e}=wd(),[n,r]=_.useState(""),[o,i]=_.useState([]),{setOpenSidebar:s,setPageTitle:a,setPageGuess:l,setPageContent:u,setPageClass:f,setPageBook:h,setNanoPageId:p}=wd();return _.useEffect(()=>{(async()=>{if(!n){i([]);return}const v=n.toLowerCase(),b=await ao.Items.filter(E=>E.title.toLowerCase().includes(v)||E.content.toLowerCase().includes(v)||E.bookId.toLowerCase().includes(v)||E.priority.toLowerCase().includes(v)).toArray();i(b),console.log(b)})()},[n]),C.jsxs(HAe,{open:t,onOpenChange:e,children:[C.jsx(iC,{placeholder:"Type a command or search...",value:n,onValueChange:r}),C.jsxs(sC,{children:[o.length===0&&C.jsx(aC,{children:"No results found."}),C.jsx(lC,{heading:"Results",children:o.map(g=>(console.log(g.priority),C.jsxs(cC,{value:`${g.title} ${g.priority} ${g.bookId}`,onSelect:()=>{e(!1),s(!0),p(g.id),a(g.title),l(g.guess),u(g.content??'[{type: "paragraph",content: [{type: "text",text: "",styles: {},},],},]'),f(g.classId),h(g.bookId)},className:"flex flex-col items-start",children:[C.jsx("div",{className:"font-medium w-full",children:g.title}),C.jsxs("div",{className:"text-xs text-muted-foreground flex justify-between gap-2 w-full",children:[C.jsx("span",{children:g.priority}),C.jsx("span",{children:g.classId}),C.jsx("span",{children:g.bookId}),C.jsx("span",{children:g.renderRange})]})]},g.id)))})]})]})}const gIe=()=>{const{open:t,options:e,close:n}=iA(),r=iA(s=>s.resolve);if(!e)return null;const o=()=>{r?.(!0),n()},i=()=>{r?.(!1),n()};return C.jsx(iG,{open:t,onOpenChange:i,children:C.jsxs(sG,{children:[C.jsxs(aG,{children:[C.jsx(cG,{children:e.title}),C.jsx(uG,{children:e.description})]}),C.jsxs(lG,{children:[C.jsx(fG,{onClick:i,children:e.cancelLabel||"Cancel"}),C.jsx(dG,{onClick:o,children:e.actionLabel||"Confirm"})]})]})})};function yIe(){const{SyncedQueue:t,openIcon:e,setOpenIcon:n}=wd(),r=AJ(),[o,i]=_.useState(!1),[s,a]=_.useState("Quran");return C.jsxs(Cq,{open:e,onOpenChange:n,children:[C.jsx(xq,{className:"hidden",children:"Edit Icon"}),C.jsxs(Sq,{className:"sm:max-w-[425px]",children:[C.jsx(Eq,{className:"sr-only",children:"Select or edit an icon"}),C.jsxs(eA,{open:o,onOpenChange:i,children:[C.jsx(tA,{asChild:!0,className:"mx-2",children:C.jsxs(Kf,{variant:"outline",role:"combobox","aria-expanded":o,className:"justify-between",children:[s?r.find(l=>l.value===s)?.value:"Select icon",C.jsx(Hk,{className:"opacity-50"})]})}),C.jsx(nA,{className:"w-[350px] p-0",children:C.jsxs(oC,{children:[C.jsx(iC,{placeholder:"Search Icon",className:"h-9",onKeyDown:async l=>{if(l.key==="F2"){const u=prompt("Enter icon name:"),f=prompt("Enter icon URL:");if(!u||!f)return;a(u);const h=LA(),p={id:h,value:u,url:f};await ao.Icons.put(p),await t(h,"Icons","add")}}}),C.jsxs(sC,{children:[C.jsx(aC,{children:"No framework found."}),C.jsx(lC,{children:r.filter(l=>l.value).map(l=>C.jsxs(cC,{value:l.value,onSelect:u=>{a(u===s?"":u),i(!1)},children:[C.jsxs("div",{className:"flex gap-2 items-center",children:[C.jsx("img",{src:r.find(u=>u.value===l.value)?.url||r.find(u=>u.value==="placeholder")?.url,className:"h-6 aspect-square"}),C.jsx("span",{children:l.value})]}),C.jsx($k,{className:Mt("ml-auto",s===l.value?"opacity-100":"opacity-0")})]},l.value))})]})]})})]}),C.jsx($Ae,{children:C.jsx(VAe,{asChild:!0,children:C.jsx(Kf,{children:"Cancel"})})})]})]})}function vIe({children:t}){return C.jsxs(lJ,{children:[C.jsx(Vse,{}),C.jsxs("main",{className:"flex flex-col h-screen w-full overflow-hidden",children:[C.jsx(uJ,{}),C.jsx(pIe,{}),t||null]}),C.jsx(mIe,{}),C.jsx(yIe,{}),C.jsx(gIe,{})]})}var bIe=(t,e,n,r,o,i,s,a)=>{let l=document.documentElement,u=["light","dark"];function f(g){(Array.isArray(t)?t:[t]).forEach(v=>{let b=v==="class",E=b&&i?o.map(T=>i[T]||T):o;b?(l.classList.remove(...E),l.classList.add(i&&i[g]?i[g]:g)):l.setAttribute(v,g)}),h(g)}function h(g){a&&u.includes(g)&&(l.style.colorScheme=g)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)f(r);else try{let g=localStorage.getItem(e)||n,v=s&&g==="system"?p():g;f(v)}catch{}},wIe=_.createContext(void 0),CIe={setTheme:t=>{},themes:[]},SIe=()=>{var t;return(t=_.useContext(wIe))!=null?t:CIe};_.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:o,defaultTheme:i,value:s,themes:a,nonce:l,scriptProps:u})=>{let f=JSON.stringify([n,e,i,t,a,s,r,o]).slice(1,-1);return _.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${bIe.toString()})(${f})`}})});const xIe=({...t})=>{const{theme:e="system"}=SIe();return C.jsx(tle,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})};function EIe(){const{setSyncLoading:t}=wd();return _.useEffect(()=>{TT(t),setInterval(()=>{TT(t)},3e4)},[]),C.jsxs(C.Fragment,{children:[C.jsx(vIe,{}),C.jsx(xIe,{position:"top-right",expand:!0,richColors:!0})]})}k6.createRoot(document.getElementById("root")).render(C.jsx(_.StrictMode,{children:C.jsx(EIe,{})}));export{sA as g};
