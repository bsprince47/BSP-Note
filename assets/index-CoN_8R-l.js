const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DtSaFv5-.js","assets/index-Bkohaulx.js","assets/index-Ch_qCilz.js","assets/default-0Dp3JUBc.js","assets/index-DwhCSGZk.js","assets/index-Bi9pQyAn.js","assets/index-BETa0OU2.js","assets/index-CxCem7FE.js","assets/index-BdmKeUBW.js","assets/index-_XgM55Dr.js","assets/index-DpipQwVu.js","assets/index-DTzQ7r7Q.js","assets/index-3OOFrDax.js","assets/index-C_aolqmU.js","assets/index-D1Tv6cKP.js","assets/blank-line-D3C7De5j.js","assets/index-hRuAkC1j.js","assets/index-UBgLExeH.js","assets/index-CtreMsrK.js","assets/index-Bk8jjY8w.js","assets/index-Tlm8e_FK.js","assets/index-BxE2facF.js","assets/index-DoJwJBw7.js","assets/index-BHfU2CIP.js","assets/cpp-B41OejNQ.js","assets/regexp-YoNQ8D_6.js","assets/glsl-XaVKT3us.js","assets/c-00UMkd0_.js","assets/sql-DtrFjDzF.js","assets/graphql-CsTf1nXt.js","assets/javascript-rIR2uHHM.js","assets/typescript-2q5-wJRm.js","assets/jsx-BEJ8hti2.js","assets/tsx-CF6OCgoc.js","assets/haml-y6ZlyoUX.js","assets/css-Ba4iZVJU.js","assets/html-B70SOtXk.js","assets/julia-Bsq_Wxjs.js","assets/python-BoZJIzkW.js","assets/r-oUZ2FLAW.js","assets/php-ouCHicdK.js","assets/xml-BGDL4sz7.js","assets/java-DebBBbJF.js","assets/json-CAhrKACI.js","assets/pug-BIhlSSzb.js","assets/scss-DZyPL35B.js","assets/svelte-5DfidACN.js","assets/postcss-B6Y8ymK-.js","assets/vue-BTGJLnBN.js","assets/vue-html-BY_chM9H.js","assets/latex-DJ20RoIt.js","assets/lua-G6E-MZGd.js","assets/ruby-CZhShINw.js","assets/shellscript-C5hMhjGx.js","assets/yaml-CpnjaWiz.js"])))=>i.map(i=>d[i]);
function nte(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(t,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var rte=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function CM(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pT={exports:{}},Uy={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L3;function ote(){if(L3)return Uy;L3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,i){var s=null;if(i!==void 0&&(s=""+i),o.key!==void 0&&(s=""+o.key),"key"in o){i={};for(var a in o)a!=="key"&&(i[a]=o[a])}else i=o;return o=i.ref,{$$typeof:t,type:r,key:s,ref:o!==void 0?o:null,props:i}}return Uy.Fragment=e,Uy.jsx=n,Uy.jsxs=n,Uy}var V3;function ite(){return V3||(V3=1,pT.exports=ote()),pT.exports}var w=ite(),mT={exports:{}},nn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j3;function ste(){if(j3)return nn;j3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function p(Y){return Y===null||typeof Y!="object"?null:(Y=f&&Y[f]||Y["@@iterator"],typeof Y=="function"?Y:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function _(Y,se,te){this.props=Y,this.context=se,this.refs=b,this.updater=te||g}_.prototype.isReactComponent={},_.prototype.setState=function(Y,se){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,se,"setState")},_.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function k(){}k.prototype=_.prototype;function M(Y,se,te){this.props=Y,this.context=se,this.refs=b,this.updater=te||g}var N=M.prototype=new k;N.constructor=M,y(N,_.prototype),N.isPureReactComponent=!0;var j=Array.isArray,B={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function D(Y,se,te,ie,ce,ae){return te=ae.ref,{$$typeof:t,type:Y,key:se,ref:te!==void 0?te:null,props:ae}}function R(Y,se){return D(Y.type,se,void 0,void 0,void 0,Y.props)}function I(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function L(Y){var se={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(te){return se[te]})}var z=/\/+/g;function q(Y,se){return typeof Y=="object"&&Y!==null&&Y.key!=null?L(""+Y.key):se.toString(36)}function H(){}function ne(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(H,H):(Y.status="pending",Y.then(function(se){Y.status==="pending"&&(Y.status="fulfilled",Y.value=se)},function(se){Y.status==="pending"&&(Y.status="rejected",Y.reason=se)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function re(Y,se,te,ie,ce){var ae=typeof Y;(ae==="undefined"||ae==="boolean")&&(Y=null);var ye=!1;if(Y===null)ye=!0;else switch(ae){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(Y.$$typeof){case t:case e:ye=!0;break;case d:return ye=Y._init,re(ye(Y._payload),se,te,ie,ce)}}if(ye)return ce=ce(Y),ye=ie===""?"."+q(Y,0):ie,j(ce)?(te="",ye!=null&&(te=ye.replace(z,"$&/")+"/"),re(ce,se,te,"",function(Ie){return Ie})):ce!=null&&(I(ce)&&(ce=R(ce,te+(ce.key==null||Y&&Y.key===ce.key?"":(""+ce.key).replace(z,"$&/")+"/")+ye)),se.push(ce)),1;ye=0;var we=ie===""?".":ie+":";if(j(Y))for(var Be=0;Be<Y.length;Be++)ie=Y[Be],ae=we+q(ie,Be),ye+=re(ie,se,te,ae,ce);else if(Be=p(Y),typeof Be=="function")for(Y=Be.call(Y),Be=0;!(ie=Y.next()).done;)ie=ie.value,ae=we+q(ie,Be++),ye+=re(ie,se,te,ae,ce);else if(ae==="object"){if(typeof Y.then=="function")return re(ne(Y),se,te,ie,ce);throw se=String(Y),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return ye}function V(Y,se,te){if(Y==null)return Y;var ie=[],ce=0;return re(Y,ie,"","",function(ae){return se.call(te,ae,ce++)}),ie}function U(Y){if(Y._status===-1){var se=Y._result;se=se(),se.then(function(te){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=te)},function(te){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=te)}),Y._status===-1&&(Y._status=0,Y._result=se)}if(Y._status===1)return Y._result.default;throw Y._result}var Q=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function J(){}return nn.Children={map:V,forEach:function(Y,se,te){V(Y,function(){se.apply(this,arguments)},te)},count:function(Y){var se=0;return V(Y,function(){se++}),se},toArray:function(Y){return V(Y,function(se){return se})||[]},only:function(Y){if(!I(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},nn.Component=_,nn.Fragment=n,nn.Profiler=o,nn.PureComponent=M,nn.StrictMode=r,nn.Suspense=l,nn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,nn.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return B.H.useMemoCache(Y)}},nn.cache=function(Y){return function(){return Y.apply(null,arguments)}},nn.cloneElement=function(Y,se,te){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var ie=y({},Y.props),ce=Y.key,ae=void 0;if(se!=null)for(ye in se.ref!==void 0&&(ae=void 0),se.key!==void 0&&(ce=""+se.key),se)!F.call(se,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&se.ref===void 0||(ie[ye]=se[ye]);var ye=arguments.length-2;if(ye===1)ie.children=te;else if(1<ye){for(var we=Array(ye),Be=0;Be<ye;Be++)we[Be]=arguments[Be+2];ie.children=we}return D(Y.type,ce,void 0,void 0,ae,ie)},nn.createContext=function(Y){return Y={$$typeof:s,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:i,_context:Y},Y},nn.createElement=function(Y,se,te){var ie,ce={},ae=null;if(se!=null)for(ie in se.key!==void 0&&(ae=""+se.key),se)F.call(se,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ce[ie]=se[ie]);var ye=arguments.length-2;if(ye===1)ce.children=te;else if(1<ye){for(var we=Array(ye),Be=0;Be<ye;Be++)we[Be]=arguments[Be+2];ce.children=we}if(Y&&Y.defaultProps)for(ie in ye=Y.defaultProps,ye)ce[ie]===void 0&&(ce[ie]=ye[ie]);return D(Y,ae,void 0,void 0,null,ce)},nn.createRef=function(){return{current:null}},nn.forwardRef=function(Y){return{$$typeof:a,render:Y}},nn.isValidElement=I,nn.lazy=function(Y){return{$$typeof:d,_payload:{_status:-1,_result:Y},_init:U}},nn.memo=function(Y,se){return{$$typeof:c,type:Y,compare:se===void 0?null:se}},nn.startTransition=function(Y){var se=B.T,te={};B.T=te;try{var ie=Y(),ce=B.S;ce!==null&&ce(te,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(J,Q)}catch(ae){Q(ae)}finally{B.T=se}},nn.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},nn.use=function(Y){return B.H.use(Y)},nn.useActionState=function(Y,se,te){return B.H.useActionState(Y,se,te)},nn.useCallback=function(Y,se){return B.H.useCallback(Y,se)},nn.useContext=function(Y){return B.H.useContext(Y)},nn.useDebugValue=function(){},nn.useDeferredValue=function(Y,se){return B.H.useDeferredValue(Y,se)},nn.useEffect=function(Y,se,te){var ie=B.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(Y,se)},nn.useId=function(){return B.H.useId()},nn.useImperativeHandle=function(Y,se,te){return B.H.useImperativeHandle(Y,se,te)},nn.useInsertionEffect=function(Y,se){return B.H.useInsertionEffect(Y,se)},nn.useLayoutEffect=function(Y,se){return B.H.useLayoutEffect(Y,se)},nn.useMemo=function(Y,se){return B.H.useMemo(Y,se)},nn.useOptimistic=function(Y,se){return B.H.useOptimistic(Y,se)},nn.useReducer=function(Y,se,te){return B.H.useReducer(Y,se,te)},nn.useRef=function(Y){return B.H.useRef(Y)},nn.useState=function(Y){return B.H.useState(Y)},nn.useSyncExternalStore=function(Y,se,te){return B.H.useSyncExternalStore(Y,se,te)},nn.useTransition=function(){return B.H.useTransition()},nn.version="19.1.0",nn}var B3;function SM(){return B3||(B3=1,mT.exports=ste()),mT.exports}var E=SM();const De=CM(E),_M=nte({__proto__:null,default:De},[E]);var gT={exports:{}},zy={},yT={exports:{}},vT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $3;function ate(){return $3||($3=1,function(t){function e(V,U){var Q=V.length;V.push(U);e:for(;0<Q;){var J=Q-1>>>1,Y=V[J];if(0<o(Y,U))V[J]=U,V[Q]=Y,Q=J;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var U=V[0],Q=V.pop();if(Q!==U){V[0]=Q;e:for(var J=0,Y=V.length,se=Y>>>1;J<se;){var te=2*(J+1)-1,ie=V[te],ce=te+1,ae=V[ce];if(0>o(ie,Q))ce<Y&&0>o(ae,ie)?(V[J]=ae,V[ce]=Q,J=ce):(V[J]=ie,V[te]=Q,J=te);else if(ce<Y&&0>o(ae,Q))V[J]=ae,V[ce]=Q,J=ce;else break e}}return U}function o(V,U){var Q=V.sortIndex-U.sortIndex;return Q!==0?Q:V.id-U.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],d=1,f=null,p=3,g=!1,y=!1,b=!1,_=!1,k=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function j(V){for(var U=n(c);U!==null;){if(U.callback===null)r(c);else if(U.startTime<=V)r(c),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(c)}}function B(V){if(b=!1,j(V),!y)if(n(l)!==null)y=!0,F||(F=!0,q());else{var U=n(c);U!==null&&re(B,U.startTime-V)}}var F=!1,D=-1,R=5,I=-1;function L(){return _?!0:!(t.unstable_now()-I<R)}function z(){if(_=!1,F){var V=t.unstable_now();I=V;var U=!0;try{e:{y=!1,b&&(b=!1,M(D),D=-1),g=!0;var Q=p;try{t:{for(j(V),f=n(l);f!==null&&!(f.expirationTime>V&&L());){var J=f.callback;if(typeof J=="function"){f.callback=null,p=f.priorityLevel;var Y=J(f.expirationTime<=V);if(V=t.unstable_now(),typeof Y=="function"){f.callback=Y,j(V),U=!0;break t}f===n(l)&&r(l),j(V)}else r(l);f=n(l)}if(f!==null)U=!0;else{var se=n(c);se!==null&&re(B,se.startTime-V),U=!1}}break e}finally{f=null,p=Q,g=!1}U=void 0}}finally{U?q():F=!1}}}var q;if(typeof N=="function")q=function(){N(z)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ne=H.port2;H.port1.onmessage=z,q=function(){ne.postMessage(null)}}else q=function(){k(z,0)};function re(V,U){D=k(function(){V(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(V){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var Q=p;p=U;try{return V()}finally{p=Q}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(V,U){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Q=p;p=V;try{return U()}finally{p=Q}},t.unstable_scheduleCallback=function(V,U,Q){var J=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?J+Q:J):Q=J,V){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=Q+Y,V={id:d++,callback:U,priorityLevel:V,startTime:Q,expirationTime:Y,sortIndex:-1},Q>J?(V.sortIndex=Q,e(c,V),n(l)===null&&V===n(c)&&(b?(M(D),D=-1):b=!0,re(B,Q-J))):(V.sortIndex=Y,e(l,V),y||g||(y=!0,F||(F=!0,q()))),V},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(V){var U=p;return function(){var Q=p;p=U;try{return V.apply(this,arguments)}finally{p=Q}}}}(vT)),vT}var F3;function lte(){return F3||(F3=1,yT.exports=ate()),yT.exports}var bT={exports:{}},_i={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H3;function cte(){if(H3)return _i;H3=1;var t=SM();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)c+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function i(l,c,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:f==null?null:""+f,children:l,containerInfo:c,implementation:d}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return _i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_i.createPortal=function(l,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return i(l,c,null,d)},_i.flushSync=function(l){var c=s.T,d=r.p;try{if(s.T=null,r.p=2,l)return l()}finally{s.T=c,r.p=d,r.d.f()}},_i.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},_i.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},_i.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var d=c.as,f=a(d,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;d==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:f,integrity:p,fetchPriority:g}):d==="script"&&r.d.X(l,{crossOrigin:f,integrity:p,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},_i.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var d=a(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},_i.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var d=c.as,f=a(d,c.crossOrigin);r.d.L(l,d,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},_i.preloadModule=function(l,c){if(typeof l=="string")if(c){var d=a(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:d,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},_i.requestFormReset=function(l){r.d.r(l)},_i.unstable_batchedUpdates=function(l,c){return l(c)},_i.useFormState=function(l,c,d){return s.H.useFormState(l,c,d)},_i.useFormStatus=function(){return s.H.useHostTransitionStatus()},_i.version="19.1.0",_i}var U3;function Q9(){if(U3)return bT.exports;U3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),bT.exports=cte(),bT.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z3;function ute(){if(z3)return zy;z3=1;var t=lte(),e=SM(),n=Q9();function r(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function i(u){var h=u,m=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,(h.flags&4098)!==0&&(m=h.return),u=h.return;while(u)}return h.tag===3?m:null}function s(u){if(u.tag===13){var h=u.memoizedState;if(h===null&&(u=u.alternate,u!==null&&(h=u.memoizedState)),h!==null)return h.dehydrated}return null}function a(u){if(i(u)!==u)throw Error(r(188))}function l(u){var h=u.alternate;if(!h){if(h=i(u),h===null)throw Error(r(188));return h!==u?null:u}for(var m=u,v=h;;){var x=m.return;if(x===null)break;var A=x.alternate;if(A===null){if(v=x.return,v!==null){m=v;continue}break}if(x.child===A.child){for(A=x.child;A;){if(A===m)return a(x),u;if(A===v)return a(x),h;A=A.sibling}throw Error(r(188))}if(m.return!==v.return)m=x,v=A;else{for(var K=!1,Z=x.child;Z;){if(Z===m){K=!0,m=x,v=A;break}if(Z===v){K=!0,v=x,m=A;break}Z=Z.sibling}if(!K){for(Z=A.child;Z;){if(Z===m){K=!0,m=A,v=x;break}if(Z===v){K=!0,v=A,m=x;break}Z=Z.sibling}if(!K)throw Error(r(189))}}if(m.alternate!==v)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?u:h}function c(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u;for(u=u.child;u!==null;){if(h=c(u),h!==null)return h;u=u.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),N=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function q(u){return u===null||typeof u!="object"?null:(u=z&&u[z]||u["@@iterator"],typeof u=="function"?u:null)}var H=Symbol.for("react.client.reference");function ne(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===H?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case y:return"Fragment";case _:return"Profiler";case b:return"StrictMode";case B:return"Suspense";case F:return"SuspenseList";case I:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case g:return"Portal";case N:return(u.displayName||"Context")+".Provider";case M:return(u._context.displayName||"Context")+".Consumer";case j:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case D:return h=u.displayName||null,h!==null?h:ne(u.type)||"Memo";case R:h=u._payload,u=u._init;try{return ne(u(h))}catch{}}return null}var re=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},J=[],Y=-1;function se(u){return{current:u}}function te(u){0>Y||(u.current=J[Y],J[Y]=null,Y--)}function ie(u,h){Y++,J[Y]=u.current,u.current=h}var ce=se(null),ae=se(null),ye=se(null),we=se(null);function Be(u,h){switch(ie(ye,h),ie(ae,u),ie(ce,null),h.nodeType){case 9:case 11:u=(u=h.documentElement)&&(u=u.namespaceURI)?u3(u):0;break;default:if(u=h.tagName,h=h.namespaceURI)h=u3(h),u=d3(h,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}te(ce),ie(ce,u)}function Ie(){te(ce),te(ae),te(ye)}function Ge(u){u.memoizedState!==null&&ie(we,u);var h=ce.current,m=d3(h,u.type);h!==m&&(ie(ae,u),ie(ce,m))}function it(u){ae.current===u&&(te(ce),te(ae)),we.current===u&&(te(we),jy._currentValue=Q)}var Xe=Object.prototype.hasOwnProperty,zt=t.unstable_scheduleCallback,un=t.unstable_cancelCallback,Pt=t.unstable_shouldYield,Pn=t.unstable_requestPaint,kt=t.unstable_now,hn=t.unstable_getCurrentPriorityLevel,sn=t.unstable_ImmediatePriority,Ft=t.unstable_UserBlockingPriority,Wt=t.unstable_NormalPriority,En=t.unstable_LowPriority,Jt=t.unstable_IdlePriority,pn=t.log,Dn=t.unstable_setDisableYieldValue,Gt=null,qt=null;function bn(u){if(typeof pn=="function"&&Dn(u),qt&&typeof qt.setStrictMode=="function")try{qt.setStrictMode(Gt,u)}catch{}}var Ln=Math.clz32?Math.clz32:Nn,Gn=Math.log,Dr=Math.LN2;function Nn(u){return u>>>=0,u===0?32:31-(Gn(u)/Dr|0)|0}var Ar=256,Rr=4194304;function qn(u){var h=u&42;if(h!==0)return h;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function st(u,h,m){var v=u.pendingLanes;if(v===0)return 0;var x=0,A=u.suspendedLanes,K=u.pingedLanes;u=u.warmLanes;var Z=v&134217727;return Z!==0?(v=Z&~A,v!==0?x=qn(v):(K&=Z,K!==0?x=qn(K):m||(m=Z&~u,m!==0&&(x=qn(m))))):(Z=v&~A,Z!==0?x=qn(Z):K!==0?x=qn(K):m||(m=v&~u,m!==0&&(x=qn(m)))),x===0?0:h!==0&&h!==x&&(h&A)===0&&(A=x&-x,m=h&-h,A>=m||A===32&&(m&4194048)!==0)?h:x}function Xo(u,h){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&h)===0}function Xr(u,h){switch(u){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fr(){var u=Ar;return Ar<<=1,(Ar&4194048)===0&&(Ar=256),u}function tt(){var u=Rr;return Rr<<=1,(Rr&62914560)===0&&(Rr=4194304),u}function Qo(u){for(var h=[],m=0;31>m;m++)h.push(u);return h}function Ir(u,h){u.pendingLanes|=h,h!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function Qr(u,h,m,v,x,A){var K=u.pendingLanes;u.pendingLanes=m,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=m,u.entangledLanes&=m,u.errorRecoveryDisabledLanes&=m,u.shellSuspendCounter=0;var Z=u.entanglements,ue=u.expirationTimes,Te=u.hiddenUpdates;for(m=K&~m;0<m;){var je=31-Ln(m),Fe=1<<je;Z[je]=0,ue[je]=-1;var Re=Te[je];if(Re!==null)for(Te[je]=null,je=0;je<Re.length;je++){var Me=Re[je];Me!==null&&(Me.lane&=-536870913)}m&=~Fe}v!==0&&yt(u,v,0),A!==0&&x===0&&u.tag!==0&&(u.suspendedLanes|=A&~(K&~h))}function yt(u,h,m){u.pendingLanes|=h,u.suspendedLanes&=~h;var v=31-Ln(h);u.entangledLanes|=h,u.entanglements[v]=u.entanglements[v]|1073741824|m&4194090}function Vn(u,h){var m=u.entangledLanes|=h;for(u=u.entanglements;m;){var v=31-Ln(m),x=1<<v;x&h|u[v]&h&&(u[v]|=h),m&=~x}}function Wn(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Yn(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function sr(){var u=U.p;return u!==0?u:(u=window.event,u===void 0?32:I3(u.type))}function er(u,h){var m=U.p;try{return U.p=u,h()}finally{U.p=m}}var en=Math.random().toString(36).slice(2),tr="__reactFiber$"+en,wt="__reactProps$"+en,Yt="__reactContainer$"+en,Pl="__reactEvents$"+en,gi="__reactListeners$"+en,rs="__reactHandles$"+en,Nc="__reactResources$"+en,Oc="__reactMarker$"+en;function Zo(u){delete u[tr],delete u[wt],delete u[Pl],delete u[gi],delete u[rs]}function yi(u){var h=u[tr];if(h)return h;for(var m=u.parentNode;m;){if(h=m[Yt]||m[tr]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(u=m3(u);u!==null;){if(m=u[tr])return m;u=m3(u)}return h}u=m,m=u.parentNode}return null}function _o(u){if(u=u[tr]||u[Yt]){var h=u.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return u}return null}function Hi(u){var h=u.tag;if(h===5||h===26||h===27||h===6)return u.stateNode;throw Error(r(33))}function Jo(u){var h=u[Nc];return h||(h=u[Nc]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Xn(u){u[Oc]=!0}var Uu=new Set,is={};function ss(u,h){Ms(u,h),Ms(u+"Capture",h)}function Ms(u,h){for(is[u]=h,u=0;u<h.length;u++)Uu.add(h[u])}var vr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sa={},ei={};function Ff(u){return Xe.call(ei,u)?!0:Xe.call(sa,u)?!1:vr.test(u)?ei[u]=!0:(sa[u]=!0,!1)}function Ui(u,h,m){if(Ff(h))if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":u.removeAttribute(h);return;case"boolean":var v=h.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){u.removeAttribute(h);return}}u.setAttribute(h,""+m)}}function zi(u,h,m){if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(h);return}u.setAttribute(h,""+m)}}function Zr(u,h,m,v){if(v===null)u.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttributeNS(h,m,""+v)}}var qa,aa;function la(u){if(qa===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);qa=h&&h[1]||"",aa=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qa+u+aa}var Ka=!1;function Pc(u,h){if(!u||Ka)return"";Ka=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(h){var Fe=function(){throw Error()};if(Object.defineProperty(Fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Fe,[])}catch(Me){var Re=Me}Reflect.construct(u,[],Fe)}else{try{Fe.call()}catch(Me){Re=Me}u.call(Fe.prototype)}}else{try{throw Error()}catch(Me){Re=Me}(Fe=u())&&typeof Fe.catch=="function"&&Fe.catch(function(){})}}catch(Me){if(Me&&Re&&typeof Me.stack=="string")return[Me.stack,Re.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=v.DetermineComponentFrameRoot(),K=A[0],Z=A[1];if(K&&Z){var ue=K.split(`
`),Te=Z.split(`
`);for(x=v=0;v<ue.length&&!ue[v].includes("DetermineComponentFrameRoot");)v++;for(;x<Te.length&&!Te[x].includes("DetermineComponentFrameRoot");)x++;if(v===ue.length||x===Te.length)for(v=ue.length-1,x=Te.length-1;1<=v&&0<=x&&ue[v]!==Te[x];)x--;for(;1<=v&&0<=x;v--,x--)if(ue[v]!==Te[x]){if(v!==1||x!==1)do if(v--,x--,0>x||ue[v]!==Te[x]){var je=`
`+ue[v].replace(" at new "," at ");return u.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",u.displayName)),je}while(1<=v&&0<=x);break}}}finally{Ka=!1,Error.prepareStackTrace=m}return(m=u?u.displayName||u.name:"")?la(m):""}function tn(u){switch(u.tag){case 26:case 27:case 5:return la(u.type);case 16:return la("Lazy");case 13:return la("Suspense");case 19:return la("SuspenseList");case 0:case 15:return Pc(u.type,!1);case 11:return Pc(u.type.render,!1);case 1:return Pc(u.type,!0);case 31:return la("Activity");default:return""}}function Dc(u){try{var h="";do h+=tn(u),u=u.return;while(u);return h}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function No(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function zu(u){var h=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function nr(u){var h=zu(u)?"checked":"value",m=Object.getOwnPropertyDescriptor(u.constructor.prototype,h),v=""+u[h];if(!u.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var x=m.get,A=m.set;return Object.defineProperty(u,h,{configurable:!0,get:function(){return x.call(this)},set:function(K){v=""+K,A.call(this,K)}}),Object.defineProperty(u,h,{enumerable:m.enumerable}),{getValue:function(){return v},setValue:function(K){v=""+K},stopTracking:function(){u._valueTracker=null,delete u[h]}}}}function ca(u){u._valueTracker||(u._valueTracker=nr(u))}function Wa(u){if(!u)return!1;var h=u._valueTracker;if(!h)return!0;var m=h.getValue(),v="";return u&&(v=zu(u)?u.checked?"true":"false":u.value),u=v,u!==m?(h.setValue(u),!0):!1}function as(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var Hf=/[\n"\\]/g;function Mr(u){return u.replace(Hf,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Oo(u,h,m,v,x,A,K,Z){u.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?u.type=K:u.removeAttribute("type"),h!=null?K==="number"?(h===0&&u.value===""||u.value!=h)&&(u.value=""+No(h)):u.value!==""+No(h)&&(u.value=""+No(h)):K!=="submit"&&K!=="reset"||u.removeAttribute("value"),h!=null?Ns(u,K,No(h)):m!=null?Ns(u,K,No(m)):v!=null&&u.removeAttribute("value"),x==null&&A!=null&&(u.defaultChecked=!!A),x!=null&&(u.checked=x&&typeof x!="function"&&typeof x!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?u.name=""+No(Z):u.removeAttribute("name")}function Dl(u,h,m,v,x,A,K,Z){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(u.type=A),h!=null||m!=null){if(!(A!=="submit"&&A!=="reset"||h!=null))return;m=m!=null?""+No(m):"",h=h!=null?""+No(h):m,Z||h===u.value||(u.value=h),u.defaultValue=h}v=v??x,v=typeof v!="function"&&typeof v!="symbol"&&!!v,u.checked=Z?u.checked:!!v,u.defaultChecked=!!v,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(u.name=K)}function Ns(u,h,m){h==="number"&&as(u.ownerDocument)===u||u.defaultValue===""+m||(u.defaultValue=""+m)}function ua(u,h,m,v){if(u=u.options,h){h={};for(var x=0;x<m.length;x++)h["$"+m[x]]=!0;for(m=0;m<u.length;m++)x=h.hasOwnProperty("$"+u[m].value),u[m].selected!==x&&(u[m].selected=x),x&&v&&(u[m].defaultSelected=!0)}else{for(m=""+No(m),h=null,x=0;x<u.length;x++){if(u[x].value===m){u[x].selected=!0,v&&(u[x].defaultSelected=!0);return}h!==null||u[x].disabled||(h=u[x])}h!==null&&(h.selected=!0)}}function jn(u,h,m){if(h!=null&&(h=""+No(h),h!==u.value&&(u.value=h),m==null)){u.defaultValue!==h&&(u.defaultValue=h);return}u.defaultValue=m!=null?""+No(m):""}function Ll(u,h,m,v){if(h==null){if(v!=null){if(m!=null)throw Error(r(92));if(re(v)){if(1<v.length)throw Error(r(93));v=v[0]}m=v}m==null&&(m=""),h=m}m=No(h),u.defaultValue=m,v=u.textContent,v===m&&v!==""&&v!==null&&(u.value=v)}function ls(u,h){if(h){var m=u.firstChild;if(m&&m===u.lastChild&&m.nodeType===3){m.nodeValue=h;return}}u.textContent=h}var an=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gu(u,h,m){var v=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?v?u.setProperty(h,""):h==="float"?u.cssFloat="":u[h]="":v?u.setProperty(h,m):typeof m!="number"||m===0||an.has(h)?h==="float"?u.cssFloat=m:u[h]=(""+m).trim():u[h]=m+"px"}function Uf(u,h,m){if(h!=null&&typeof h!="object")throw Error(r(62));if(u=u.style,m!=null){for(var v in m)!m.hasOwnProperty(v)||h!=null&&h.hasOwnProperty(v)||(v.indexOf("--")===0?u.setProperty(v,""):v==="float"?u.cssFloat="":u[v]="");for(var x in h)v=h[x],h.hasOwnProperty(x)&&m[x]!==v&&Gu(u,x,v)}else for(var A in h)h.hasOwnProperty(A)&&Gu(u,A,h[A])}function zf(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ti=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ya(u){return Vl.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var Po=null;function Gi(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var da=null,ar=null;function vi(u){var h=_o(u);if(h&&(u=h.stateNode)){var m=u[wt]||null;e:switch(u=h.stateNode,h.type){case"input":if(Oo(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=u;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Mr(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var v=m[h];if(v!==u&&v.form===u.form){var x=v[wt]||null;if(!x)throw Error(r(90));Oo(v,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(h=0;h<m.length;h++)v=m[h],v.form===u.form&&Wa(v)}break e;case"textarea":jn(u,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&ua(u,!!m.multiple,h,!1)}}}var bi=!1;function jl(u,h,m){if(bi)return u(h,m);bi=!0;try{var v=u(h);return v}finally{if(bi=!1,(da!==null||ar!==null)&&(a1(),da&&(h=da,u=ar,ar=da=null,vi(h),u)))for(h=0;h<u.length;h++)vi(u[h])}}function Xa(u,h){var m=u.stateNode;if(m===null)return null;var v=m[wt]||null;if(v===null)return null;m=v[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(u=u.type,v=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!v;break e;default:u=!1}if(u)return null;if(m&&typeof m!="function")throw Error(r(231,h,typeof m));return m}var lo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cs=!1;if(lo)try{var Do={};Object.defineProperty(Do,"passive",{get:function(){cs=!0}}),window.addEventListener("test",Do,Do),window.removeEventListener("test",Do,Do)}catch{cs=!1}var us=null,Qa=null,Os=null;function Za(){if(Os)return Os;var u,h=Qa,m=h.length,v,x="value"in us?us.value:us.textContent,A=x.length;for(u=0;u<m&&h[u]===x[u];u++);var K=m-u;for(v=1;v<=K&&h[m-v]===x[A-v];v++);return Os=x.slice(u,1<v?1-v:void 0)}function ds(u){var h=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&h===13&&(u=13)):u=h,u===10&&(u=13),32<=u||u===13?u:0}function Ps(){return!0}function Gf(){return!1}function Nr(u){function h(m,v,x,A,K){this._reactName=m,this._targetInst=x,this.type=v,this.nativeEvent=A,this.target=K,this.currentTarget=null;for(var Z in u)u.hasOwnProperty(Z)&&(m=u[Z],this[Z]=m?m(A):A[Z]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Ps:Gf,this.isPropagationStopped=Gf,this}return d(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Ps)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Ps)},persist:function(){},isPersistent:Ps}),h}var Un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qu=Nr(Un),fa=d({},Un,{view:0,detail:0}),Lc=Nr(fa),Bl,Ku,ha,Vc=d({},fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ds,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==ha&&(ha&&u.type==="mousemove"?(Bl=u.screenX-ha.screenX,Ku=u.screenY-ha.screenY):Ku=Bl=0,ha=u),Bl)},movementY:function(u){return"movementY"in u?u.movementY:Ku}}),wi=Nr(Vc),Wu=d({},Vc,{dataTransfer:0}),xp=Nr(Wu),pa=d({},fa,{relatedTarget:0}),Ja=Nr(pa),$l=d({},Un,{animationName:0,elapsedTime:0,pseudoElement:0}),jc=Nr($l),Ep=d({},Un,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),el=Nr(Ep),qf=d({},Un,{data:0}),Bc=Nr(qf),tl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nl(u){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(u):(u=Jr[u])?!!h[u]:!1}function Ds(){return nl}var Kf=d({},fa,{key:function(u){if(u.key){var h=tl[u.key]||u.key;if(h!=="Unidentified")return h}return u.type==="keypress"?(u=ds(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Yu[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ds,charCode:function(u){return u.type==="keypress"?ds(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?ds(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),rl=Nr(Kf),Wf=d({},Vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xu=Nr(Wf),fs=d({},fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ds}),Qu=Nr(fs),ma=d({},Un,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zu=Nr(ma),Ju=d({},Vc,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),ol=Nr(Ju),xo=d({},Un,{newState:0,oldState:0}),Yf=Nr(xo),kp=[9,13,27,32],hs=lo&&"CompositionEvent"in window,C=null;lo&&"documentMode"in document&&(C=document.documentMode);var P=lo&&"TextEvent"in window&&!C,G=lo&&(!hs||C&&8<C&&11>=C),ee=" ",xe=!1;function Pe(u,h){switch(u){case"keyup":return kp.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nt(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var wn=!1;function Hr(u,h){switch(u){case"compositionend":return nt(h);case"keypress":return h.which!==32?null:(xe=!0,ee);case"textInput":return u=h.data,u===ee&&xe?null:u;default:return null}}function kn(u,h){if(wn)return u==="compositionend"||!hs&&Pe(u,h)?(u=Za(),Os=Qa=us=null,wn=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return G&&h.locale!=="ko"?null:h.data;default:return null}}var eo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lr(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h==="input"?!!eo[u.type]:h==="textarea"}function ga(u,h,m,v){da?ar?ar.push(v):ar=[v]:da=v,h=h1(h,"onChange"),0<h.length&&(m=new qu("onChange","change",null,m,v),u.push({event:m,listeners:h}))}var co=null,ya=null;function Xf(u){i3(u,0)}function Tp(u){var h=Hi(u);if(Wa(h))return u}function Qf(u,h){if(u==="change")return h}var va=!1;if(lo){var kr;if(lo){var ed="oninput"in document;if(!ed){var qi=document.createElement("div");qi.setAttribute("oninput","return;"),ed=typeof qi.oninput=="function"}kr=ed}else kr=!1;va=kr&&(!document.documentMode||9<document.documentMode)}function I0(){co&&(co.detachEvent("onpropertychange",Ap),ya=co=null)}function Ap(u){if(u.propertyName==="value"&&Tp(ya)){var h=[];ga(h,ya,u,Gi(u)),jl(Xf,h)}}function M0(u,h,m){u==="focusin"?(I0(),co=h,ya=m,co.attachEvent("onpropertychange",Ap)):u==="focusout"&&I0()}function $c(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Tp(ya)}function iy(u,h){if(u==="click")return Tp(h)}function td(u,h){if(u==="input"||u==="change")return Tp(h)}function Fl(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var Ci=typeof Object.is=="function"?Object.is:Fl;function S(u,h){if(Ci(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var m=Object.keys(u),v=Object.keys(h);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var x=m[v];if(!Xe.call(h,x)||!Ci(u[x],h[x]))return!1}return!0}function T(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function O(u,h){var m=T(u);u=0;for(var v;m;){if(m.nodeType===3){if(v=u+m.textContent.length,u<=h&&v>=h)return{node:m,offset:h-u};u=v}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=T(m)}}function $(u,h){return u&&h?u===h?!0:u&&u.nodeType===3?!1:h&&h.nodeType===3?$(u,h.parentNode):"contains"in u?u.contains(h):u.compareDocumentPosition?!!(u.compareDocumentPosition(h)&16):!1:!1}function W(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var h=as(u.document);h instanceof u.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)u=h.contentWindow;else break;h=as(u.document)}return h}function X(u){var h=u&&u.nodeName&&u.nodeName.toLowerCase();return h&&(h==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||h==="textarea"||u.contentEditable==="true")}var oe=lo&&"documentMode"in document&&11>=document.documentMode,le=null,he=null,me=null,be=!1;function de(u,h,m){var v=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;be||le==null||le!==as(v)||(v=le,"selectionStart"in v&&X(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),me&&S(me,v)||(me=v,v=h1(he,"onSelect"),0<v.length&&(h=new qu("onSelect","select",null,h,m),u.push({event:h,listeners:v}),h.target=le)))}function Se(u,h){var m={};return m[u.toLowerCase()]=h.toLowerCase(),m["Webkit"+u]="webkit"+h,m["Moz"+u]="moz"+h,m}var fe={animationend:Se("Animation","AnimationEnd"),animationiteration:Se("Animation","AnimationIteration"),animationstart:Se("Animation","AnimationStart"),transitionrun:Se("Transition","TransitionRun"),transitionstart:Se("Transition","TransitionStart"),transitioncancel:Se("Transition","TransitionCancel"),transitionend:Se("Transition","TransitionEnd")},ve={},_e={};lo&&(_e=document.createElement("div").style,"AnimationEvent"in window||(delete fe.animationend.animation,delete fe.animationiteration.animation,delete fe.animationstart.animation),"TransitionEvent"in window||delete fe.transitionend.transition);function ge(u){if(ve[u])return ve[u];if(!fe[u])return u;var h=fe[u],m;for(m in h)if(h.hasOwnProperty(m)&&m in _e)return ve[u]=h[m];return u}var Ae=ge("animationend"),Ne=ge("animationiteration"),Oe=ge("animationstart"),Ve=ge("transitionrun"),We=ge("transitionstart"),rt=ge("transitioncancel"),qe=ge("transitionend"),Je=new Map,ot="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ot.push("scrollEnd");function Ke(u,h){Je.set(u,h),ss(h,[u])}var lt=new WeakMap;function _t(u,h){if(typeof u=="object"&&u!==null){var m=lt.get(u);return m!==void 0?m:(h={value:u,source:h,stack:Dc(h)},lt.set(u,h),h)}return{value:u,source:h,stack:Dc(h)}}var It=[],Ht=0,ni=0;function Dt(){for(var u=Ht,h=ni=Ht=0;h<u;){var m=It[h];It[h++]=null;var v=It[h];It[h++]=null;var x=It[h];It[h++]=null;var A=It[h];if(It[h++]=null,v!==null&&x!==null){var K=v.pending;K===null?x.next=x:(x.next=K.next,K.next=x),v.pending=x}A!==0&&Lo(m,x,A)}}function to(u,h,m,v){It[Ht++]=u,It[Ht++]=h,It[Ht++]=m,It[Ht++]=v,ni|=v,u.lanes|=v,u=u.alternate,u!==null&&(u.lanes|=v)}function uo(u,h,m,v){return to(u,h,m,v),ba(u)}function il(u,h){return to(u,null,null,h),ba(u)}function Lo(u,h,m){u.lanes|=m;var v=u.alternate;v!==null&&(v.lanes|=m);for(var x=!1,A=u.return;A!==null;)A.childLanes|=m,v=A.alternate,v!==null&&(v.childLanes|=m),A.tag===22&&(u=A.stateNode,u===null||u._visibility&1||(x=!0)),u=A,A=A.return;return u.tag===3?(A=u.stateNode,x&&h!==null&&(x=31-Ln(m),u=A.hiddenUpdates,v=u[x],v===null?u[x]=[h]:v.push(h),h.lane=m|536870912),A):null}function ba(u){if(50<Iy)throw Iy=0,jk=null,Error(r(185));for(var h=u.return;h!==null;)u=h,h=u.return;return u.tag===3?u.stateNode:null}var Hl={};function FJ(u,h,m,v){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(u,h,m,v){return new FJ(u,h,m,v)}function OE(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Fc(u,h){var m=u.alternate;return m===null?(m=Ls(u.tag,h,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=h,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&65011712,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,h=u.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m.refCleanup=u.refCleanup,m}function zD(u,h){u.flags&=65011714;var m=u.alternate;return m===null?(u.childLanes=0,u.lanes=h,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,h=m.dependencies,u.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),u}function N0(u,h,m,v,x,A){var K=0;if(v=u,typeof u=="function")OE(u)&&(K=1);else if(typeof u=="string")K=Uee(u,m,ce.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case I:return u=Ls(31,m,h,x),u.elementType=I,u.lanes=A,u;case y:return Zf(m.children,x,A,h);case b:K=8,x|=24;break;case _:return u=Ls(12,m,h,x|2),u.elementType=_,u.lanes=A,u;case B:return u=Ls(13,m,h,x),u.elementType=B,u.lanes=A,u;case F:return u=Ls(19,m,h,x),u.elementType=F,u.lanes=A,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case k:case N:K=10;break e;case M:K=9;break e;case j:K=11;break e;case D:K=14;break e;case R:K=16,v=null;break e}K=29,m=Error(r(130,u===null?"null":typeof u,"")),v=null}return h=Ls(K,m,h,x),h.elementType=u,h.type=v,h.lanes=A,h}function Zf(u,h,m,v){return u=Ls(7,u,v,h),u.lanes=m,u}function PE(u,h,m){return u=Ls(6,u,null,h),u.lanes=m,u}function DE(u,h,m){return h=Ls(4,u.children!==null?u.children:[],u.key,h),h.lanes=m,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}var Rp=[],Ip=0,O0=null,P0=0,wa=[],Ca=0,Jf=null,Hc=1,Uc="";function eh(u,h){Rp[Ip++]=P0,Rp[Ip++]=O0,O0=u,P0=h}function GD(u,h,m){wa[Ca++]=Hc,wa[Ca++]=Uc,wa[Ca++]=Jf,Jf=u;var v=Hc;u=Uc;var x=32-Ln(v)-1;v&=~(1<<x),m+=1;var A=32-Ln(h)+x;if(30<A){var K=x-x%5;A=(v&(1<<K)-1).toString(32),v>>=K,x-=K,Hc=1<<32-Ln(h)+x|m<<x|v,Uc=A+u}else Hc=1<<A|m<<x|v,Uc=u}function LE(u){u.return!==null&&(eh(u,1),GD(u,1,0))}function VE(u){for(;u===O0;)O0=Rp[--Ip],Rp[Ip]=null,P0=Rp[--Ip],Rp[Ip]=null;for(;u===Jf;)Jf=wa[--Ca],wa[Ca]=null,Uc=wa[--Ca],wa[Ca]=null,Hc=wa[--Ca],wa[Ca]=null}var Ki=null,Ur=null,Kn=!1,th=null,Ul=!1,jE=Error(r(519));function nh(u){var h=Error(r(418,""));throw ly(_t(h,u)),jE}function qD(u){var h=u.stateNode,m=u.type,v=u.memoizedProps;switch(h[tr]=u,h[wt]=v,m){case"dialog":Sn("cancel",h),Sn("close",h);break;case"iframe":case"object":case"embed":Sn("load",h);break;case"video":case"audio":for(m=0;m<Ny.length;m++)Sn(Ny[m],h);break;case"source":Sn("error",h);break;case"img":case"image":case"link":Sn("error",h),Sn("load",h);break;case"details":Sn("toggle",h);break;case"input":Sn("invalid",h),Dl(h,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0),ca(h);break;case"select":Sn("invalid",h);break;case"textarea":Sn("invalid",h),Ll(h,v.value,v.defaultValue,v.children),ca(h)}m=v.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||v.suppressHydrationWarning===!0||c3(h.textContent,m)?(v.popover!=null&&(Sn("beforetoggle",h),Sn("toggle",h)),v.onScroll!=null&&Sn("scroll",h),v.onScrollEnd!=null&&Sn("scrollend",h),v.onClick!=null&&(h.onclick=p1),h=!0):h=!1,h||nh(u)}function KD(u){for(Ki=u.return;Ki;)switch(Ki.tag){case 5:case 13:Ul=!1;return;case 27:case 3:Ul=!0;return;default:Ki=Ki.return}}function sy(u){if(u!==Ki)return!1;if(!Kn)return KD(u),Kn=!0,!1;var h=u.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=u.type,m=!(m!=="form"&&m!=="button")||eT(u.type,u.memoizedProps)),m=!m),m&&Ur&&nh(u),KD(u),h===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));e:{for(u=u.nextSibling,h=0;u;){if(u.nodeType===8)if(m=u.data,m==="/$"){if(h===0){Ur=al(u.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++;u=u.nextSibling}Ur=null}}else h===27?(h=Ur,yd(u.type)?(u=oT,oT=null,Ur=u):Ur=h):Ur=Ki?al(u.stateNode.nextSibling):null;return!0}function ay(){Ur=Ki=null,Kn=!1}function WD(){var u=th;return u!==null&&(gs===null?gs=u:gs.push.apply(gs,u),th=null),u}function ly(u){th===null?th=[u]:th.push(u)}var BE=se(null),rh=null,zc=null;function nd(u,h,m){ie(BE,h._currentValue),h._currentValue=m}function Gc(u){u._currentValue=BE.current,te(BE)}function $E(u,h,m){for(;u!==null;){var v=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,v!==null&&(v.childLanes|=h)):v!==null&&(v.childLanes&h)!==h&&(v.childLanes|=h),u===m)break;u=u.return}}function FE(u,h,m,v){var x=u.child;for(x!==null&&(x.return=u);x!==null;){var A=x.dependencies;if(A!==null){var K=x.child;A=A.firstContext;e:for(;A!==null;){var Z=A;A=x;for(var ue=0;ue<h.length;ue++)if(Z.context===h[ue]){A.lanes|=m,Z=A.alternate,Z!==null&&(Z.lanes|=m),$E(A.return,m,u),v||(K=null);break e}A=Z.next}}else if(x.tag===18){if(K=x.return,K===null)throw Error(r(341));K.lanes|=m,A=K.alternate,A!==null&&(A.lanes|=m),$E(K,m,u),K=null}else K=x.child;if(K!==null)K.return=x;else for(K=x;K!==null;){if(K===u){K=null;break}if(x=K.sibling,x!==null){x.return=K.return,K=x;break}K=K.return}x=K}}function cy(u,h,m,v){u=null;for(var x=h,A=!1;x!==null;){if(!A){if((x.flags&524288)!==0)A=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var K=x.alternate;if(K===null)throw Error(r(387));if(K=K.memoizedProps,K!==null){var Z=x.type;Ci(x.pendingProps.value,K.value)||(u!==null?u.push(Z):u=[Z])}}else if(x===we.current){if(K=x.alternate,K===null)throw Error(r(387));K.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(u!==null?u.push(jy):u=[jy])}x=x.return}u!==null&&FE(h,u,m,v),h.flags|=262144}function D0(u){for(u=u.firstContext;u!==null;){if(!Ci(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function oh(u){rh=u,zc=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Si(u){return YD(rh,u)}function L0(u,h){return rh===null&&oh(u),YD(u,h)}function YD(u,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},zc===null){if(u===null)throw Error(r(308));zc=h,u.dependencies={lanes:0,firstContext:h},u.flags|=524288}else zc=zc.next=h;return m}var HJ=typeof AbortController<"u"?AbortController:function(){var u=[],h=this.signal={aborted:!1,addEventListener:function(m,v){u.push(v)}};this.abort=function(){h.aborted=!0,u.forEach(function(m){return m()})}},UJ=t.unstable_scheduleCallback,zJ=t.unstable_NormalPriority,Eo={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function HE(){return{controller:new HJ,data:new Map,refCount:0}}function uy(u){u.refCount--,u.refCount===0&&UJ(zJ,function(){u.controller.abort()})}var dy=null,UE=0,Mp=0,Np=null;function GJ(u,h){if(dy===null){var m=dy=[];UE=0,Mp=Gk(),Np={status:"pending",value:void 0,then:function(v){m.push(v)}}}return UE++,h.then(XD,XD),h}function XD(){if(--UE===0&&dy!==null){Np!==null&&(Np.status="fulfilled");var u=dy;dy=null,Mp=0,Np=null;for(var h=0;h<u.length;h++)(0,u[h])()}}function qJ(u,h){var m=[],v={status:"pending",value:null,reason:null,then:function(x){m.push(x)}};return u.then(function(){v.status="fulfilled",v.value=h;for(var x=0;x<m.length;x++)(0,m[x])(h)},function(x){for(v.status="rejected",v.reason=x,x=0;x<m.length;x++)(0,m[x])(void 0)}),v}var QD=V.S;V.S=function(u,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&GJ(u,h),QD!==null&&QD(u,h)};var ih=se(null);function zE(){var u=ih.current;return u!==null?u:br.pooledCache}function V0(u,h){h===null?ie(ih,ih.current):ie(ih,h.pool)}function ZD(){var u=zE();return u===null?null:{parent:Eo._currentValue,pool:u}}var fy=Error(r(460)),JD=Error(r(474)),j0=Error(r(542)),GE={then:function(){}};function e4(u){return u=u.status,u==="fulfilled"||u==="rejected"}function B0(){}function t4(u,h,m){switch(m=u[m],m===void 0?u.push(h):m!==h&&(h.then(B0,B0),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,r4(u),u;default:if(typeof h.status=="string")h.then(B0,B0);else{if(u=br,u!==null&&100<u.shellSuspendCounter)throw Error(r(482));u=h,u.status="pending",u.then(function(v){if(h.status==="pending"){var x=h;x.status="fulfilled",x.value=v}},function(v){if(h.status==="pending"){var x=h;x.status="rejected",x.reason=v}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw u=h.reason,r4(u),u}throw hy=h,fy}}var hy=null;function n4(){if(hy===null)throw Error(r(459));var u=hy;return hy=null,u}function r4(u){if(u===fy||u===j0)throw Error(r(483))}var rd=!1;function qE(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function KE(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function od(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function id(u,h,m){var v=u.updateQueue;if(v===null)return null;if(v=v.shared,(rr&2)!==0){var x=v.pending;return x===null?h.next=h:(h.next=x.next,x.next=h),v.pending=h,h=ba(u),Lo(u,null,m),h}return to(u,v,h,m),ba(u)}function py(u,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var v=h.lanes;v&=u.pendingLanes,m|=v,h.lanes=m,Vn(u,m)}}function WE(u,h){var m=u.updateQueue,v=u.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var x=null,A=null;if(m=m.firstBaseUpdate,m!==null){do{var K={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};A===null?x=A=K:A=A.next=K,m=m.next}while(m!==null);A===null?x=A=h:A=A.next=h}else x=A=h;m={baseState:v.baseState,firstBaseUpdate:x,lastBaseUpdate:A,shared:v.shared,callbacks:v.callbacks},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=h:u.next=h,m.lastBaseUpdate=h}var YE=!1;function my(){if(YE){var u=Np;if(u!==null)throw u}}function gy(u,h,m,v){YE=!1;var x=u.updateQueue;rd=!1;var A=x.firstBaseUpdate,K=x.lastBaseUpdate,Z=x.shared.pending;if(Z!==null){x.shared.pending=null;var ue=Z,Te=ue.next;ue.next=null,K===null?A=Te:K.next=Te,K=ue;var je=u.alternate;je!==null&&(je=je.updateQueue,Z=je.lastBaseUpdate,Z!==K&&(Z===null?je.firstBaseUpdate=Te:Z.next=Te,je.lastBaseUpdate=ue))}if(A!==null){var Fe=x.baseState;K=0,je=Te=ue=null,Z=A;do{var Re=Z.lane&-536870913,Me=Re!==Z.lane;if(Me?(Bn&Re)===Re:(v&Re)===Re){Re!==0&&Re===Mp&&(YE=!0),je!==null&&(je=je.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var Lt=u,Mt=Z;Re=h;var ur=m;switch(Mt.tag){case 1:if(Lt=Mt.payload,typeof Lt=="function"){Fe=Lt.call(ur,Fe,Re);break e}Fe=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Mt.payload,Re=typeof Lt=="function"?Lt.call(ur,Fe,Re):Lt,Re==null)break e;Fe=d({},Fe,Re);break e;case 2:rd=!0}}Re=Z.callback,Re!==null&&(u.flags|=64,Me&&(u.flags|=8192),Me=x.callbacks,Me===null?x.callbacks=[Re]:Me.push(Re))}else Me={lane:Re,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},je===null?(Te=je=Me,ue=Fe):je=je.next=Me,K|=Re;if(Z=Z.next,Z===null){if(Z=x.shared.pending,Z===null)break;Me=Z,Z=Me.next,Me.next=null,x.lastBaseUpdate=Me,x.shared.pending=null}}while(!0);je===null&&(ue=Fe),x.baseState=ue,x.firstBaseUpdate=Te,x.lastBaseUpdate=je,A===null&&(x.shared.lanes=0),hd|=K,u.lanes=K,u.memoizedState=Fe}}function o4(u,h){if(typeof u!="function")throw Error(r(191,u));u.call(h)}function i4(u,h){var m=u.callbacks;if(m!==null)for(u.callbacks=null,u=0;u<m.length;u++)o4(m[u],h)}var Op=se(null),$0=se(0);function s4(u,h){u=Zc,ie($0,u),ie(Op,h),Zc=u|h.baseLanes}function XE(){ie($0,Zc),ie(Op,Op.current)}function QE(){Zc=$0.current,te(Op),te($0)}var sd=0,dn=null,lr=null,fo=null,F0=!1,Pp=!1,sh=!1,H0=0,yy=0,Dp=null,KJ=0;function no(){throw Error(r(321))}function ZE(u,h){if(h===null)return!1;for(var m=0;m<h.length&&m<u.length;m++)if(!Ci(u[m],h[m]))return!1;return!0}function JE(u,h,m,v,x,A){return sd=A,dn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,V.H=u===null||u.memoizedState===null?U4:z4,sh=!1,A=m(v,x),sh=!1,Pp&&(A=l4(h,m,v,x)),a4(u),A}function a4(u){V.H=W0;var h=lr!==null&&lr.next!==null;if(sd=0,fo=lr=dn=null,F0=!1,yy=0,Dp=null,h)throw Error(r(300));u===null||Vo||(u=u.dependencies,u!==null&&D0(u)&&(Vo=!0))}function l4(u,h,m,v){dn=u;var x=0;do{if(Pp&&(Dp=null),yy=0,Pp=!1,25<=x)throw Error(r(301));if(x+=1,fo=lr=null,u.updateQueue!=null){var A=u.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}V.H=eee,A=h(m,v)}while(Pp);return A}function WJ(){var u=V.H,h=u.useState()[0];return h=typeof h.then=="function"?vy(h):h,u=u.useState()[0],(lr!==null?lr.memoizedState:null)!==u&&(dn.flags|=1024),h}function ek(){var u=H0!==0;return H0=0,u}function tk(u,h,m){h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~m}function nk(u){if(F0){for(u=u.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}F0=!1}sd=0,fo=lr=dn=null,Pp=!1,yy=H0=0,Dp=null}function ps(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fo===null?dn.memoizedState=fo=u:fo=fo.next=u,fo}function ho(){if(lr===null){var u=dn.alternate;u=u!==null?u.memoizedState:null}else u=lr.next;var h=fo===null?dn.memoizedState:fo.next;if(h!==null)fo=h,lr=u;else{if(u===null)throw dn.alternate===null?Error(r(467)):Error(r(310));lr=u,u={memoizedState:lr.memoizedState,baseState:lr.baseState,baseQueue:lr.baseQueue,queue:lr.queue,next:null},fo===null?dn.memoizedState=fo=u:fo=fo.next=u}return fo}function rk(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vy(u){var h=yy;return yy+=1,Dp===null&&(Dp=[]),u=t4(Dp,u,h),h=dn,(fo===null?h.memoizedState:fo.next)===null&&(h=h.alternate,V.H=h===null||h.memoizedState===null?U4:z4),u}function U0(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return vy(u);if(u.$$typeof===N)return Si(u)}throw Error(r(438,String(u)))}function ok(u){var h=null,m=dn.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var v=dn.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(h={data:v.data.map(function(x){return x.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=rk(),dn.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(u),v=0;v<u;v++)m[v]=L;return h.index++,m}function qc(u,h){return typeof h=="function"?h(u):h}function z0(u){var h=ho();return ik(h,lr,u)}function ik(u,h,m){var v=u.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=m;var x=u.baseQueue,A=v.pending;if(A!==null){if(x!==null){var K=x.next;x.next=A.next,A.next=K}h.baseQueue=x=A,v.pending=null}if(A=u.baseState,x===null)u.memoizedState=A;else{h=x.next;var Z=K=null,ue=null,Te=h,je=!1;do{var Fe=Te.lane&-536870913;if(Fe!==Te.lane?(Bn&Fe)===Fe:(sd&Fe)===Fe){var Re=Te.revertLane;if(Re===0)ue!==null&&(ue=ue.next={lane:0,revertLane:0,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null}),Fe===Mp&&(je=!0);else if((sd&Re)===Re){Te=Te.next,Re===Mp&&(je=!0);continue}else Fe={lane:0,revertLane:Te.revertLane,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null},ue===null?(Z=ue=Fe,K=A):ue=ue.next=Fe,dn.lanes|=Re,hd|=Re;Fe=Te.action,sh&&m(A,Fe),A=Te.hasEagerState?Te.eagerState:m(A,Fe)}else Re={lane:Fe,revertLane:Te.revertLane,action:Te.action,hasEagerState:Te.hasEagerState,eagerState:Te.eagerState,next:null},ue===null?(Z=ue=Re,K=A):ue=ue.next=Re,dn.lanes|=Fe,hd|=Fe;Te=Te.next}while(Te!==null&&Te!==h);if(ue===null?K=A:ue.next=Z,!Ci(A,u.memoizedState)&&(Vo=!0,je&&(m=Np,m!==null)))throw m;u.memoizedState=A,u.baseState=K,u.baseQueue=ue,v.lastRenderedState=A}return x===null&&(v.lanes=0),[u.memoizedState,v.dispatch]}function sk(u){var h=ho(),m=h.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=u;var v=m.dispatch,x=m.pending,A=h.memoizedState;if(x!==null){m.pending=null;var K=x=x.next;do A=u(A,K.action),K=K.next;while(K!==x);Ci(A,h.memoizedState)||(Vo=!0),h.memoizedState=A,h.baseQueue===null&&(h.baseState=A),m.lastRenderedState=A}return[A,v]}function c4(u,h,m){var v=dn,x=ho(),A=Kn;if(A){if(m===void 0)throw Error(r(407));m=m()}else m=h();var K=!Ci((lr||x).memoizedState,m);K&&(x.memoizedState=m,Vo=!0),x=x.queue;var Z=f4.bind(null,v,x,u);if(by(2048,8,Z,[u]),x.getSnapshot!==h||K||fo!==null&&fo.memoizedState.tag&1){if(v.flags|=2048,Lp(9,G0(),d4.bind(null,v,x,m,h),null),br===null)throw Error(r(349));A||(sd&124)!==0||u4(v,h,m)}return m}function u4(u,h,m){u.flags|=16384,u={getSnapshot:h,value:m},h=dn.updateQueue,h===null?(h=rk(),dn.updateQueue=h,h.stores=[u]):(m=h.stores,m===null?h.stores=[u]:m.push(u))}function d4(u,h,m,v){h.value=m,h.getSnapshot=v,h4(h)&&p4(u)}function f4(u,h,m){return m(function(){h4(h)&&p4(u)})}function h4(u){var h=u.getSnapshot;u=u.value;try{var m=h();return!Ci(u,m)}catch{return!0}}function p4(u){var h=il(u,2);h!==null&&Fs(h,u,2)}function ak(u){var h=ps();if(typeof u=="function"){var m=u;if(u=m(),sh){bn(!0);try{m()}finally{bn(!1)}}}return h.memoizedState=h.baseState=u,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qc,lastRenderedState:u},h}function m4(u,h,m,v){return u.baseState=m,ik(u,lr,typeof v=="function"?v:qc)}function YJ(u,h,m,v,x){if(K0(u))throw Error(r(485));if(u=h.action,u!==null){var A={payload:x,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){A.listeners.push(K)}};V.T!==null?m(!0):A.isTransition=!1,v(A),m=h.pending,m===null?(A.next=h.pending=A,g4(h,A)):(A.next=m.next,h.pending=m.next=A)}}function g4(u,h){var m=h.action,v=h.payload,x=u.state;if(h.isTransition){var A=V.T,K={};V.T=K;try{var Z=m(x,v),ue=V.S;ue!==null&&ue(K,Z),y4(u,h,Z)}catch(Te){lk(u,h,Te)}finally{V.T=A}}else try{A=m(x,v),y4(u,h,A)}catch(Te){lk(u,h,Te)}}function y4(u,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(v){v4(u,h,v)},function(v){return lk(u,h,v)}):v4(u,h,m)}function v4(u,h,m){h.status="fulfilled",h.value=m,b4(h),u.state=m,h=u.pending,h!==null&&(m=h.next,m===h?u.pending=null:(m=m.next,h.next=m,g4(u,m)))}function lk(u,h,m){var v=u.pending;if(u.pending=null,v!==null){v=v.next;do h.status="rejected",h.reason=m,b4(h),h=h.next;while(h!==v)}u.action=null}function b4(u){u=u.listeners;for(var h=0;h<u.length;h++)(0,u[h])()}function w4(u,h){return h}function C4(u,h){if(Kn){var m=br.formState;if(m!==null){e:{var v=dn;if(Kn){if(Ur){t:{for(var x=Ur,A=Ul;x.nodeType!==8;){if(!A){x=null;break t}if(x=al(x.nextSibling),x===null){x=null;break t}}A=x.data,x=A==="F!"||A==="F"?x:null}if(x){Ur=al(x.nextSibling),v=x.data==="F!";break e}}nh(v)}v=!1}v&&(h=m[0])}}return m=ps(),m.memoizedState=m.baseState=h,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:w4,lastRenderedState:h},m.queue=v,m=$4.bind(null,dn,v),v.dispatch=m,v=ak(!1),A=hk.bind(null,dn,!1,v.queue),v=ps(),x={state:h,dispatch:null,action:u,pending:null},v.queue=x,m=YJ.bind(null,dn,x,A,m),x.dispatch=m,v.memoizedState=u,[h,m,!1]}function S4(u){var h=ho();return _4(h,lr,u)}function _4(u,h,m){if(h=ik(u,h,w4)[0],u=z0(qc)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var v=vy(h)}catch(K){throw K===fy?j0:K}else v=h;h=ho();var x=h.queue,A=x.dispatch;return m!==h.memoizedState&&(dn.flags|=2048,Lp(9,G0(),XJ.bind(null,x,m),null)),[v,A,u]}function XJ(u,h){u.action=h}function x4(u){var h=ho(),m=lr;if(m!==null)return _4(h,m,u);ho(),h=h.memoizedState,m=ho();var v=m.queue.dispatch;return m.memoizedState=u,[h,v,!1]}function Lp(u,h,m,v){return u={tag:u,create:m,deps:v,inst:h,next:null},h=dn.updateQueue,h===null&&(h=rk(),dn.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=u.next=u:(v=m.next,m.next=u,u.next=v,h.lastEffect=u),u}function G0(){return{destroy:void 0,resource:void 0}}function E4(){return ho().memoizedState}function q0(u,h,m,v){var x=ps();v=v===void 0?null:v,dn.flags|=u,x.memoizedState=Lp(1|h,G0(),m,v)}function by(u,h,m,v){var x=ho();v=v===void 0?null:v;var A=x.memoizedState.inst;lr!==null&&v!==null&&ZE(v,lr.memoizedState.deps)?x.memoizedState=Lp(h,A,m,v):(dn.flags|=u,x.memoizedState=Lp(1|h,A,m,v))}function k4(u,h){q0(8390656,8,u,h)}function T4(u,h){by(2048,8,u,h)}function A4(u,h){return by(4,2,u,h)}function R4(u,h){return by(4,4,u,h)}function I4(u,h){if(typeof h=="function"){u=u();var m=h(u);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function M4(u,h,m){m=m!=null?m.concat([u]):null,by(4,4,I4.bind(null,h,u),m)}function ck(){}function N4(u,h){var m=ho();h=h===void 0?null:h;var v=m.memoizedState;return h!==null&&ZE(h,v[1])?v[0]:(m.memoizedState=[u,h],u)}function O4(u,h){var m=ho();h=h===void 0?null:h;var v=m.memoizedState;if(h!==null&&ZE(h,v[1]))return v[0];if(v=u(),sh){bn(!0);try{u()}finally{bn(!1)}}return m.memoizedState=[v,h],v}function uk(u,h,m){return m===void 0||(sd&1073741824)!==0?u.memoizedState=h:(u.memoizedState=m,u=LL(),dn.lanes|=u,hd|=u,m)}function P4(u,h,m,v){return Ci(m,h)?m:Op.current!==null?(u=uk(u,m,v),Ci(u,h)||(Vo=!0),u):(sd&42)===0?(Vo=!0,u.memoizedState=m):(u=LL(),dn.lanes|=u,hd|=u,h)}function D4(u,h,m,v,x){var A=U.p;U.p=A!==0&&8>A?A:8;var K=V.T,Z={};V.T=Z,hk(u,!1,h,m);try{var ue=x(),Te=V.S;if(Te!==null&&Te(Z,ue),ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var je=qJ(ue,v);wy(u,h,je,$s(u))}else wy(u,h,v,$s(u))}catch(Fe){wy(u,h,{then:function(){},status:"rejected",reason:Fe},$s())}finally{U.p=A,V.T=K}}function QJ(){}function dk(u,h,m,v){if(u.tag!==5)throw Error(r(476));var x=L4(u).queue;D4(u,x,h,Q,m===null?QJ:function(){return V4(u),m(v)})}function L4(u){var h=u.memoizedState;if(h!==null)return h;h={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qc,lastRenderedState:Q},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qc,lastRenderedState:m},next:null},u.memoizedState=h,u=u.alternate,u!==null&&(u.memoizedState=h),h}function V4(u){var h=L4(u).next.queue;wy(u,h,{},$s())}function fk(){return Si(jy)}function j4(){return ho().memoizedState}function B4(){return ho().memoizedState}function ZJ(u){for(var h=u.return;h!==null;){switch(h.tag){case 24:case 3:var m=$s();u=od(m);var v=id(h,u,m);v!==null&&(Fs(v,h,m),py(v,h,m)),h={cache:HE()},u.payload=h;return}h=h.return}}function JJ(u,h,m){var v=$s();m={lane:v,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},K0(u)?F4(h,m):(m=uo(u,h,m,v),m!==null&&(Fs(m,u,v),H4(m,h,v)))}function $4(u,h,m){var v=$s();wy(u,h,m,v)}function wy(u,h,m,v){var x={lane:v,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(K0(u))F4(h,x);else{var A=u.alternate;if(u.lanes===0&&(A===null||A.lanes===0)&&(A=h.lastRenderedReducer,A!==null))try{var K=h.lastRenderedState,Z=A(K,m);if(x.hasEagerState=!0,x.eagerState=Z,Ci(Z,K))return to(u,h,x,0),br===null&&Dt(),!1}catch{}finally{}if(m=uo(u,h,x,v),m!==null)return Fs(m,u,v),H4(m,h,v),!0}return!1}function hk(u,h,m,v){if(v={lane:2,revertLane:Gk(),action:v,hasEagerState:!1,eagerState:null,next:null},K0(u)){if(h)throw Error(r(479))}else h=uo(u,m,v,2),h!==null&&Fs(h,u,2)}function K0(u){var h=u.alternate;return u===dn||h!==null&&h===dn}function F4(u,h){Pp=F0=!0;var m=u.pending;m===null?h.next=h:(h.next=m.next,m.next=h),u.pending=h}function H4(u,h,m){if((m&4194048)!==0){var v=h.lanes;v&=u.pendingLanes,m|=v,h.lanes=m,Vn(u,m)}}var W0={readContext:Si,use:U0,useCallback:no,useContext:no,useEffect:no,useImperativeHandle:no,useLayoutEffect:no,useInsertionEffect:no,useMemo:no,useReducer:no,useRef:no,useState:no,useDebugValue:no,useDeferredValue:no,useTransition:no,useSyncExternalStore:no,useId:no,useHostTransitionStatus:no,useFormState:no,useActionState:no,useOptimistic:no,useMemoCache:no,useCacheRefresh:no},U4={readContext:Si,use:U0,useCallback:function(u,h){return ps().memoizedState=[u,h===void 0?null:h],u},useContext:Si,useEffect:k4,useImperativeHandle:function(u,h,m){m=m!=null?m.concat([u]):null,q0(4194308,4,I4.bind(null,h,u),m)},useLayoutEffect:function(u,h){return q0(4194308,4,u,h)},useInsertionEffect:function(u,h){q0(4,2,u,h)},useMemo:function(u,h){var m=ps();h=h===void 0?null:h;var v=u();if(sh){bn(!0);try{u()}finally{bn(!1)}}return m.memoizedState=[v,h],v},useReducer:function(u,h,m){var v=ps();if(m!==void 0){var x=m(h);if(sh){bn(!0);try{m(h)}finally{bn(!1)}}}else x=h;return v.memoizedState=v.baseState=x,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:x},v.queue=u,u=u.dispatch=JJ.bind(null,dn,u),[v.memoizedState,u]},useRef:function(u){var h=ps();return u={current:u},h.memoizedState=u},useState:function(u){u=ak(u);var h=u.queue,m=$4.bind(null,dn,h);return h.dispatch=m,[u.memoizedState,m]},useDebugValue:ck,useDeferredValue:function(u,h){var m=ps();return uk(m,u,h)},useTransition:function(){var u=ak(!1);return u=D4.bind(null,dn,u.queue,!0,!1),ps().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,h,m){var v=dn,x=ps();if(Kn){if(m===void 0)throw Error(r(407));m=m()}else{if(m=h(),br===null)throw Error(r(349));(Bn&124)!==0||u4(v,h,m)}x.memoizedState=m;var A={value:m,getSnapshot:h};return x.queue=A,k4(f4.bind(null,v,A,u),[u]),v.flags|=2048,Lp(9,G0(),d4.bind(null,v,A,m,h),null),m},useId:function(){var u=ps(),h=br.identifierPrefix;if(Kn){var m=Uc,v=Hc;m=(v&~(1<<32-Ln(v)-1)).toString(32)+m,h="«"+h+"R"+m,m=H0++,0<m&&(h+="H"+m.toString(32)),h+="»"}else m=KJ++,h="«"+h+"r"+m.toString(32)+"»";return u.memoizedState=h},useHostTransitionStatus:fk,useFormState:C4,useActionState:C4,useOptimistic:function(u){var h=ps();h.memoizedState=h.baseState=u;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=hk.bind(null,dn,!0,m),m.dispatch=h,[u,h]},useMemoCache:ok,useCacheRefresh:function(){return ps().memoizedState=ZJ.bind(null,dn)}},z4={readContext:Si,use:U0,useCallback:N4,useContext:Si,useEffect:T4,useImperativeHandle:M4,useInsertionEffect:A4,useLayoutEffect:R4,useMemo:O4,useReducer:z0,useRef:E4,useState:function(){return z0(qc)},useDebugValue:ck,useDeferredValue:function(u,h){var m=ho();return P4(m,lr.memoizedState,u,h)},useTransition:function(){var u=z0(qc)[0],h=ho().memoizedState;return[typeof u=="boolean"?u:vy(u),h]},useSyncExternalStore:c4,useId:j4,useHostTransitionStatus:fk,useFormState:S4,useActionState:S4,useOptimistic:function(u,h){var m=ho();return m4(m,lr,u,h)},useMemoCache:ok,useCacheRefresh:B4},eee={readContext:Si,use:U0,useCallback:N4,useContext:Si,useEffect:T4,useImperativeHandle:M4,useInsertionEffect:A4,useLayoutEffect:R4,useMemo:O4,useReducer:sk,useRef:E4,useState:function(){return sk(qc)},useDebugValue:ck,useDeferredValue:function(u,h){var m=ho();return lr===null?uk(m,u,h):P4(m,lr.memoizedState,u,h)},useTransition:function(){var u=sk(qc)[0],h=ho().memoizedState;return[typeof u=="boolean"?u:vy(u),h]},useSyncExternalStore:c4,useId:j4,useHostTransitionStatus:fk,useFormState:x4,useActionState:x4,useOptimistic:function(u,h){var m=ho();return lr!==null?m4(m,lr,u,h):(m.baseState=u,[u,m.queue.dispatch])},useMemoCache:ok,useCacheRefresh:B4},Vp=null,Cy=0;function Y0(u){var h=Cy;return Cy+=1,Vp===null&&(Vp=[]),t4(Vp,u,h)}function Sy(u,h){h=h.props.ref,u.ref=h!==void 0?h:null}function X0(u,h){throw h.$$typeof===f?Error(r(525)):(u=Object.prototype.toString.call(h),Error(r(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u)))}function G4(u){var h=u._init;return h(u._payload)}function q4(u){function h(Ce,pe){if(u){var ke=Ce.deletions;ke===null?(Ce.deletions=[pe],Ce.flags|=16):ke.push(pe)}}function m(Ce,pe){if(!u)return null;for(;pe!==null;)h(Ce,pe),pe=pe.sibling;return null}function v(Ce){for(var pe=new Map;Ce!==null;)Ce.key!==null?pe.set(Ce.key,Ce):pe.set(Ce.index,Ce),Ce=Ce.sibling;return pe}function x(Ce,pe){return Ce=Fc(Ce,pe),Ce.index=0,Ce.sibling=null,Ce}function A(Ce,pe,ke){return Ce.index=ke,u?(ke=Ce.alternate,ke!==null?(ke=ke.index,ke<pe?(Ce.flags|=67108866,pe):ke):(Ce.flags|=67108866,pe)):(Ce.flags|=1048576,pe)}function K(Ce){return u&&Ce.alternate===null&&(Ce.flags|=67108866),Ce}function Z(Ce,pe,ke,$e){return pe===null||pe.tag!==6?(pe=PE(ke,Ce.mode,$e),pe.return=Ce,pe):(pe=x(pe,ke),pe.return=Ce,pe)}function ue(Ce,pe,ke,$e){var ht=ke.type;return ht===y?je(Ce,pe,ke.props.children,$e,ke.key):pe!==null&&(pe.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===R&&G4(ht)===pe.type)?(pe=x(pe,ke.props),Sy(pe,ke),pe.return=Ce,pe):(pe=N0(ke.type,ke.key,ke.props,null,Ce.mode,$e),Sy(pe,ke),pe.return=Ce,pe)}function Te(Ce,pe,ke,$e){return pe===null||pe.tag!==4||pe.stateNode.containerInfo!==ke.containerInfo||pe.stateNode.implementation!==ke.implementation?(pe=DE(ke,Ce.mode,$e),pe.return=Ce,pe):(pe=x(pe,ke.children||[]),pe.return=Ce,pe)}function je(Ce,pe,ke,$e,ht){return pe===null||pe.tag!==7?(pe=Zf(ke,Ce.mode,$e,ht),pe.return=Ce,pe):(pe=x(pe,ke),pe.return=Ce,pe)}function Fe(Ce,pe,ke){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return pe=PE(""+pe,Ce.mode,ke),pe.return=Ce,pe;if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case p:return ke=N0(pe.type,pe.key,pe.props,null,Ce.mode,ke),Sy(ke,pe),ke.return=Ce,ke;case g:return pe=DE(pe,Ce.mode,ke),pe.return=Ce,pe;case R:var $e=pe._init;return pe=$e(pe._payload),Fe(Ce,pe,ke)}if(re(pe)||q(pe))return pe=Zf(pe,Ce.mode,ke,null),pe.return=Ce,pe;if(typeof pe.then=="function")return Fe(Ce,Y0(pe),ke);if(pe.$$typeof===N)return Fe(Ce,L0(Ce,pe),ke);X0(Ce,pe)}return null}function Re(Ce,pe,ke,$e){var ht=pe!==null?pe.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return ht!==null?null:Z(Ce,pe,""+ke,$e);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case p:return ke.key===ht?ue(Ce,pe,ke,$e):null;case g:return ke.key===ht?Te(Ce,pe,ke,$e):null;case R:return ht=ke._init,ke=ht(ke._payload),Re(Ce,pe,ke,$e)}if(re(ke)||q(ke))return ht!==null?null:je(Ce,pe,ke,$e,null);if(typeof ke.then=="function")return Re(Ce,pe,Y0(ke),$e);if(ke.$$typeof===N)return Re(Ce,pe,L0(Ce,ke),$e);X0(Ce,ke)}return null}function Me(Ce,pe,ke,$e,ht){if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return Ce=Ce.get(ke)||null,Z(pe,Ce,""+$e,ht);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case p:return Ce=Ce.get($e.key===null?ke:$e.key)||null,ue(pe,Ce,$e,ht);case g:return Ce=Ce.get($e.key===null?ke:$e.key)||null,Te(pe,Ce,$e,ht);case R:var mn=$e._init;return $e=mn($e._payload),Me(Ce,pe,ke,$e,ht)}if(re($e)||q($e))return Ce=Ce.get(ke)||null,je(pe,Ce,$e,ht,null);if(typeof $e.then=="function")return Me(Ce,pe,ke,Y0($e),ht);if($e.$$typeof===N)return Me(Ce,pe,ke,L0(pe,$e),ht);X0(pe,$e)}return null}function Lt(Ce,pe,ke,$e){for(var ht=null,mn=null,Ct=pe,Nt=pe=0,Bo=null;Ct!==null&&Nt<ke.length;Nt++){Ct.index>Nt?(Bo=Ct,Ct=null):Bo=Ct.sibling;var zn=Re(Ce,Ct,ke[Nt],$e);if(zn===null){Ct===null&&(Ct=Bo);break}u&&Ct&&zn.alternate===null&&h(Ce,Ct),pe=A(zn,pe,Nt),mn===null?ht=zn:mn.sibling=zn,mn=zn,Ct=Bo}if(Nt===ke.length)return m(Ce,Ct),Kn&&eh(Ce,Nt),ht;if(Ct===null){for(;Nt<ke.length;Nt++)Ct=Fe(Ce,ke[Nt],$e),Ct!==null&&(pe=A(Ct,pe,Nt),mn===null?ht=Ct:mn.sibling=Ct,mn=Ct);return Kn&&eh(Ce,Nt),ht}for(Ct=v(Ct);Nt<ke.length;Nt++)Bo=Me(Ct,Ce,Nt,ke[Nt],$e),Bo!==null&&(u&&Bo.alternate!==null&&Ct.delete(Bo.key===null?Nt:Bo.key),pe=A(Bo,pe,Nt),mn===null?ht=Bo:mn.sibling=Bo,mn=Bo);return u&&Ct.forEach(function(Sd){return h(Ce,Sd)}),Kn&&eh(Ce,Nt),ht}function Mt(Ce,pe,ke,$e){if(ke==null)throw Error(r(151));for(var ht=null,mn=null,Ct=pe,Nt=pe=0,Bo=null,zn=ke.next();Ct!==null&&!zn.done;Nt++,zn=ke.next()){Ct.index>Nt?(Bo=Ct,Ct=null):Bo=Ct.sibling;var Sd=Re(Ce,Ct,zn.value,$e);if(Sd===null){Ct===null&&(Ct=Bo);break}u&&Ct&&Sd.alternate===null&&h(Ce,Ct),pe=A(Sd,pe,Nt),mn===null?ht=Sd:mn.sibling=Sd,mn=Sd,Ct=Bo}if(zn.done)return m(Ce,Ct),Kn&&eh(Ce,Nt),ht;if(Ct===null){for(;!zn.done;Nt++,zn=ke.next())zn=Fe(Ce,zn.value,$e),zn!==null&&(pe=A(zn,pe,Nt),mn===null?ht=zn:mn.sibling=zn,mn=zn);return Kn&&eh(Ce,Nt),ht}for(Ct=v(Ct);!zn.done;Nt++,zn=ke.next())zn=Me(Ct,Ce,Nt,zn.value,$e),zn!==null&&(u&&zn.alternate!==null&&Ct.delete(zn.key===null?Nt:zn.key),pe=A(zn,pe,Nt),mn===null?ht=zn:mn.sibling=zn,mn=zn);return u&&Ct.forEach(function(tte){return h(Ce,tte)}),Kn&&eh(Ce,Nt),ht}function ur(Ce,pe,ke,$e){if(typeof ke=="object"&&ke!==null&&ke.type===y&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case p:e:{for(var ht=ke.key;pe!==null;){if(pe.key===ht){if(ht=ke.type,ht===y){if(pe.tag===7){m(Ce,pe.sibling),$e=x(pe,ke.props.children),$e.return=Ce,Ce=$e;break e}}else if(pe.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===R&&G4(ht)===pe.type){m(Ce,pe.sibling),$e=x(pe,ke.props),Sy($e,ke),$e.return=Ce,Ce=$e;break e}m(Ce,pe);break}else h(Ce,pe);pe=pe.sibling}ke.type===y?($e=Zf(ke.props.children,Ce.mode,$e,ke.key),$e.return=Ce,Ce=$e):($e=N0(ke.type,ke.key,ke.props,null,Ce.mode,$e),Sy($e,ke),$e.return=Ce,Ce=$e)}return K(Ce);case g:e:{for(ht=ke.key;pe!==null;){if(pe.key===ht)if(pe.tag===4&&pe.stateNode.containerInfo===ke.containerInfo&&pe.stateNode.implementation===ke.implementation){m(Ce,pe.sibling),$e=x(pe,ke.children||[]),$e.return=Ce,Ce=$e;break e}else{m(Ce,pe);break}else h(Ce,pe);pe=pe.sibling}$e=DE(ke,Ce.mode,$e),$e.return=Ce,Ce=$e}return K(Ce);case R:return ht=ke._init,ke=ht(ke._payload),ur(Ce,pe,ke,$e)}if(re(ke))return Lt(Ce,pe,ke,$e);if(q(ke)){if(ht=q(ke),typeof ht!="function")throw Error(r(150));return ke=ht.call(ke),Mt(Ce,pe,ke,$e)}if(typeof ke.then=="function")return ur(Ce,pe,Y0(ke),$e);if(ke.$$typeof===N)return ur(Ce,pe,L0(Ce,ke),$e);X0(Ce,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,pe!==null&&pe.tag===6?(m(Ce,pe.sibling),$e=x(pe,ke),$e.return=Ce,Ce=$e):(m(Ce,pe),$e=PE(ke,Ce.mode,$e),$e.return=Ce,Ce=$e),K(Ce)):m(Ce,pe)}return function(Ce,pe,ke,$e){try{Cy=0;var ht=ur(Ce,pe,ke,$e);return Vp=null,ht}catch(Ct){if(Ct===fy||Ct===j0)throw Ct;var mn=Ls(29,Ct,null,Ce.mode);return mn.lanes=$e,mn.return=Ce,mn}finally{}}}var jp=q4(!0),K4=q4(!1),Sa=se(null),zl=null;function ad(u){var h=u.alternate;ie(ko,ko.current&1),ie(Sa,u),zl===null&&(h===null||Op.current!==null||h.memoizedState!==null)&&(zl=u)}function W4(u){if(u.tag===22){if(ie(ko,ko.current),ie(Sa,u),zl===null){var h=u.alternate;h!==null&&h.memoizedState!==null&&(zl=u)}}else ld()}function ld(){ie(ko,ko.current),ie(Sa,Sa.current)}function Kc(u){te(Sa),zl===u&&(zl=null),te(ko)}var ko=se(0);function Q0(u){for(var h=u;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||rT(m)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function pk(u,h,m,v){h=u.memoizedState,m=m(v,h),m=m==null?h:d({},h,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var mk={enqueueSetState:function(u,h,m){u=u._reactInternals;var v=$s(),x=od(v);x.payload=h,m!=null&&(x.callback=m),h=id(u,x,v),h!==null&&(Fs(h,u,v),py(h,u,v))},enqueueReplaceState:function(u,h,m){u=u._reactInternals;var v=$s(),x=od(v);x.tag=1,x.payload=h,m!=null&&(x.callback=m),h=id(u,x,v),h!==null&&(Fs(h,u,v),py(h,u,v))},enqueueForceUpdate:function(u,h){u=u._reactInternals;var m=$s(),v=od(m);v.tag=2,h!=null&&(v.callback=h),h=id(u,v,m),h!==null&&(Fs(h,u,m),py(h,u,m))}};function Y4(u,h,m,v,x,A,K){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(v,A,K):h.prototype&&h.prototype.isPureReactComponent?!S(m,v)||!S(x,A):!0}function X4(u,h,m,v){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,v),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,v),h.state!==u&&mk.enqueueReplaceState(h,h.state,null)}function ah(u,h){var m=h;if("ref"in h){m={};for(var v in h)v!=="ref"&&(m[v]=h[v])}if(u=u.defaultProps){m===h&&(m=d({},m));for(var x in u)m[x]===void 0&&(m[x]=u[x])}return m}var Z0=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function Q4(u){Z0(u)}function Z4(u){console.error(u)}function J4(u){Z0(u)}function J0(u,h){try{var m=u.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(v){setTimeout(function(){throw v})}}function eL(u,h,m){try{var v=u.onCaughtError;v(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function gk(u,h,m){return m=od(m),m.tag=3,m.payload={element:null},m.callback=function(){J0(u,h)},m}function tL(u){return u=od(u),u.tag=3,u}function nL(u,h,m,v){var x=m.type.getDerivedStateFromError;if(typeof x=="function"){var A=v.value;u.payload=function(){return x(A)},u.callback=function(){eL(h,m,v)}}var K=m.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(u.callback=function(){eL(h,m,v),typeof x!="function"&&(pd===null?pd=new Set([this]):pd.add(this));var Z=v.stack;this.componentDidCatch(v.value,{componentStack:Z!==null?Z:""})})}function tee(u,h,m,v,x){if(m.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(h=m.alternate,h!==null&&cy(h,m,x,!0),m=Sa.current,m!==null){switch(m.tag){case 13:return zl===null?$k():m.alternate===null&&zr===0&&(zr=3),m.flags&=-257,m.flags|=65536,m.lanes=x,v===GE?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([v]):h.add(v),Hk(u,v,x)),!1;case 22:return m.flags|=65536,v===GE?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([v])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([v]):m.add(v)),Hk(u,v,x)),!1}throw Error(r(435,m.tag))}return Hk(u,v,x),$k(),!1}if(Kn)return h=Sa.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=x,v!==jE&&(u=Error(r(422),{cause:v}),ly(_t(u,m)))):(v!==jE&&(h=Error(r(423),{cause:v}),ly(_t(h,m))),u=u.current.alternate,u.flags|=65536,x&=-x,u.lanes|=x,v=_t(v,m),x=gk(u.stateNode,v,x),WE(u,x),zr!==4&&(zr=2)),!1;var A=Error(r(520),{cause:v});if(A=_t(A,m),Ry===null?Ry=[A]:Ry.push(A),zr!==4&&(zr=2),h===null)return!0;v=_t(v,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,u=x&-x,m.lanes|=u,u=gk(m.stateNode,v,u),WE(m,u),!1;case 1:if(h=m.type,A=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(pd===null||!pd.has(A))))return m.flags|=65536,x&=-x,m.lanes|=x,x=tL(x),nL(x,u,m,v),WE(m,x),!1}m=m.return}while(m!==null);return!1}var rL=Error(r(461)),Vo=!1;function ri(u,h,m,v){h.child=u===null?K4(h,null,m,v):jp(h,u.child,m,v)}function oL(u,h,m,v,x){m=m.render;var A=h.ref;if("ref"in v){var K={};for(var Z in v)Z!=="ref"&&(K[Z]=v[Z])}else K=v;return oh(h),v=JE(u,h,m,K,A,x),Z=ek(),u!==null&&!Vo?(tk(u,h,x),Wc(u,h,x)):(Kn&&Z&&LE(h),h.flags|=1,ri(u,h,v,x),h.child)}function iL(u,h,m,v,x){if(u===null){var A=m.type;return typeof A=="function"&&!OE(A)&&A.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=A,sL(u,h,A,v,x)):(u=N0(m.type,null,v,h,h.mode,x),u.ref=h.ref,u.return=h,h.child=u)}if(A=u.child,!xk(u,x)){var K=A.memoizedProps;if(m=m.compare,m=m!==null?m:S,m(K,v)&&u.ref===h.ref)return Wc(u,h,x)}return h.flags|=1,u=Fc(A,v),u.ref=h.ref,u.return=h,h.child=u}function sL(u,h,m,v,x){if(u!==null){var A=u.memoizedProps;if(S(A,v)&&u.ref===h.ref)if(Vo=!1,h.pendingProps=v=A,xk(u,x))(u.flags&131072)!==0&&(Vo=!0);else return h.lanes=u.lanes,Wc(u,h,x)}return yk(u,h,m,v,x)}function aL(u,h,m){var v=h.pendingProps,x=v.children,A=u!==null?u.memoizedState:null;if(v.mode==="hidden"){if((h.flags&128)!==0){if(v=A!==null?A.baseLanes|m:m,u!==null){for(x=h.child=u.child,A=0;x!==null;)A=A|x.lanes|x.childLanes,x=x.sibling;h.childLanes=A&~v}else h.childLanes=0,h.child=null;return lL(u,h,v,m)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},u!==null&&V0(h,A!==null?A.cachePool:null),A!==null?s4(h,A):XE(),W4(h);else return h.lanes=h.childLanes=536870912,lL(u,h,A!==null?A.baseLanes|m:m,m)}else A!==null?(V0(h,A.cachePool),s4(h,A),ld(),h.memoizedState=null):(u!==null&&V0(h,null),XE(),ld());return ri(u,h,x,m),h.child}function lL(u,h,m,v){var x=zE();return x=x===null?null:{parent:Eo._currentValue,pool:x},h.memoizedState={baseLanes:m,cachePool:x},u!==null&&V0(h,null),XE(),W4(h),u!==null&&cy(u,h,v,!0),null}function e1(u,h){var m=h.ref;if(m===null)u!==null&&u.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(u===null||u.ref!==m)&&(h.flags|=4194816)}}function yk(u,h,m,v,x){return oh(h),m=JE(u,h,m,v,void 0,x),v=ek(),u!==null&&!Vo?(tk(u,h,x),Wc(u,h,x)):(Kn&&v&&LE(h),h.flags|=1,ri(u,h,m,x),h.child)}function cL(u,h,m,v,x,A){return oh(h),h.updateQueue=null,m=l4(h,v,m,x),a4(u),v=ek(),u!==null&&!Vo?(tk(u,h,A),Wc(u,h,A)):(Kn&&v&&LE(h),h.flags|=1,ri(u,h,m,A),h.child)}function uL(u,h,m,v,x){if(oh(h),h.stateNode===null){var A=Hl,K=m.contextType;typeof K=="object"&&K!==null&&(A=Si(K)),A=new m(v,A),h.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=mk,h.stateNode=A,A._reactInternals=h,A=h.stateNode,A.props=v,A.state=h.memoizedState,A.refs={},qE(h),K=m.contextType,A.context=typeof K=="object"&&K!==null?Si(K):Hl,A.state=h.memoizedState,K=m.getDerivedStateFromProps,typeof K=="function"&&(pk(h,m,K,v),A.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(K=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),K!==A.state&&mk.enqueueReplaceState(A,A.state,null),gy(h,v,A,x),my(),A.state=h.memoizedState),typeof A.componentDidMount=="function"&&(h.flags|=4194308),v=!0}else if(u===null){A=h.stateNode;var Z=h.memoizedProps,ue=ah(m,Z);A.props=ue;var Te=A.context,je=m.contextType;K=Hl,typeof je=="object"&&je!==null&&(K=Si(je));var Fe=m.getDerivedStateFromProps;je=typeof Fe=="function"||typeof A.getSnapshotBeforeUpdate=="function",Z=h.pendingProps!==Z,je||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(Z||Te!==K)&&X4(h,A,v,K),rd=!1;var Re=h.memoizedState;A.state=Re,gy(h,v,A,x),my(),Te=h.memoizedState,Z||Re!==Te||rd?(typeof Fe=="function"&&(pk(h,m,Fe,v),Te=h.memoizedState),(ue=rd||Y4(h,m,ue,v,Re,Te,K))?(je||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(h.flags|=4194308)):(typeof A.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=v,h.memoizedState=Te),A.props=v,A.state=Te,A.context=K,v=ue):(typeof A.componentDidMount=="function"&&(h.flags|=4194308),v=!1)}else{A=h.stateNode,KE(u,h),K=h.memoizedProps,je=ah(m,K),A.props=je,Fe=h.pendingProps,Re=A.context,Te=m.contextType,ue=Hl,typeof Te=="object"&&Te!==null&&(ue=Si(Te)),Z=m.getDerivedStateFromProps,(Te=typeof Z=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(K!==Fe||Re!==ue)&&X4(h,A,v,ue),rd=!1,Re=h.memoizedState,A.state=Re,gy(h,v,A,x),my();var Me=h.memoizedState;K!==Fe||Re!==Me||rd||u!==null&&u.dependencies!==null&&D0(u.dependencies)?(typeof Z=="function"&&(pk(h,m,Z,v),Me=h.memoizedState),(je=rd||Y4(h,m,je,v,Re,Me,ue)||u!==null&&u.dependencies!==null&&D0(u.dependencies))?(Te||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(v,Me,ue),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(v,Me,ue)),typeof A.componentDidUpdate=="function"&&(h.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof A.componentDidUpdate!="function"||K===u.memoizedProps&&Re===u.memoizedState||(h.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||K===u.memoizedProps&&Re===u.memoizedState||(h.flags|=1024),h.memoizedProps=v,h.memoizedState=Me),A.props=v,A.state=Me,A.context=ue,v=je):(typeof A.componentDidUpdate!="function"||K===u.memoizedProps&&Re===u.memoizedState||(h.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||K===u.memoizedProps&&Re===u.memoizedState||(h.flags|=1024),v=!1)}return A=v,e1(u,h),v=(h.flags&128)!==0,A||v?(A=h.stateNode,m=v&&typeof m.getDerivedStateFromError!="function"?null:A.render(),h.flags|=1,u!==null&&v?(h.child=jp(h,u.child,null,x),h.child=jp(h,null,m,x)):ri(u,h,m,x),h.memoizedState=A.state,u=h.child):u=Wc(u,h,x),u}function dL(u,h,m,v){return ay(),h.flags|=256,ri(u,h,m,v),h.child}var vk={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bk(u){return{baseLanes:u,cachePool:ZD()}}function wk(u,h,m){return u=u!==null?u.childLanes&~m:0,h&&(u|=_a),u}function fL(u,h,m){var v=h.pendingProps,x=!1,A=(h.flags&128)!==0,K;if((K=A)||(K=u!==null&&u.memoizedState===null?!1:(ko.current&2)!==0),K&&(x=!0,h.flags&=-129),K=(h.flags&32)!==0,h.flags&=-33,u===null){if(Kn){if(x?ad(h):ld(),Kn){var Z=Ur,ue;if(ue=Z){e:{for(ue=Z,Z=Ul;ue.nodeType!==8;){if(!Z){Z=null;break e}if(ue=al(ue.nextSibling),ue===null){Z=null;break e}}Z=ue}Z!==null?(h.memoizedState={dehydrated:Z,treeContext:Jf!==null?{id:Hc,overflow:Uc}:null,retryLane:536870912,hydrationErrors:null},ue=Ls(18,null,null,0),ue.stateNode=Z,ue.return=h,h.child=ue,Ki=h,Ur=null,ue=!0):ue=!1}ue||nh(h)}if(Z=h.memoizedState,Z!==null&&(Z=Z.dehydrated,Z!==null))return rT(Z)?h.lanes=32:h.lanes=536870912,null;Kc(h)}return Z=v.children,v=v.fallback,x?(ld(),x=h.mode,Z=t1({mode:"hidden",children:Z},x),v=Zf(v,x,m,null),Z.return=h,v.return=h,Z.sibling=v,h.child=Z,x=h.child,x.memoizedState=bk(m),x.childLanes=wk(u,K,m),h.memoizedState=vk,v):(ad(h),Ck(h,Z))}if(ue=u.memoizedState,ue!==null&&(Z=ue.dehydrated,Z!==null)){if(A)h.flags&256?(ad(h),h.flags&=-257,h=Sk(u,h,m)):h.memoizedState!==null?(ld(),h.child=u.child,h.flags|=128,h=null):(ld(),x=v.fallback,Z=h.mode,v=t1({mode:"visible",children:v.children},Z),x=Zf(x,Z,m,null),x.flags|=2,v.return=h,x.return=h,v.sibling=x,h.child=v,jp(h,u.child,null,m),v=h.child,v.memoizedState=bk(m),v.childLanes=wk(u,K,m),h.memoizedState=vk,h=x);else if(ad(h),rT(Z)){if(K=Z.nextSibling&&Z.nextSibling.dataset,K)var Te=K.dgst;K=Te,v=Error(r(419)),v.stack="",v.digest=K,ly({value:v,source:null,stack:null}),h=Sk(u,h,m)}else if(Vo||cy(u,h,m,!1),K=(m&u.childLanes)!==0,Vo||K){if(K=br,K!==null&&(v=m&-m,v=(v&42)!==0?1:Wn(v),v=(v&(K.suspendedLanes|m))!==0?0:v,v!==0&&v!==ue.retryLane))throw ue.retryLane=v,il(u,v),Fs(K,u,v),rL;Z.data==="$?"||$k(),h=Sk(u,h,m)}else Z.data==="$?"?(h.flags|=192,h.child=u.child,h=null):(u=ue.treeContext,Ur=al(Z.nextSibling),Ki=h,Kn=!0,th=null,Ul=!1,u!==null&&(wa[Ca++]=Hc,wa[Ca++]=Uc,wa[Ca++]=Jf,Hc=u.id,Uc=u.overflow,Jf=h),h=Ck(h,v.children),h.flags|=4096);return h}return x?(ld(),x=v.fallback,Z=h.mode,ue=u.child,Te=ue.sibling,v=Fc(ue,{mode:"hidden",children:v.children}),v.subtreeFlags=ue.subtreeFlags&65011712,Te!==null?x=Fc(Te,x):(x=Zf(x,Z,m,null),x.flags|=2),x.return=h,v.return=h,v.sibling=x,h.child=v,v=x,x=h.child,Z=u.child.memoizedState,Z===null?Z=bk(m):(ue=Z.cachePool,ue!==null?(Te=Eo._currentValue,ue=ue.parent!==Te?{parent:Te,pool:Te}:ue):ue=ZD(),Z={baseLanes:Z.baseLanes|m,cachePool:ue}),x.memoizedState=Z,x.childLanes=wk(u,K,m),h.memoizedState=vk,v):(ad(h),m=u.child,u=m.sibling,m=Fc(m,{mode:"visible",children:v.children}),m.return=h,m.sibling=null,u!==null&&(K=h.deletions,K===null?(h.deletions=[u],h.flags|=16):K.push(u)),h.child=m,h.memoizedState=null,m)}function Ck(u,h){return h=t1({mode:"visible",children:h},u.mode),h.return=u,u.child=h}function t1(u,h){return u=Ls(22,u,null,h),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function Sk(u,h,m){return jp(h,u.child,null,m),u=Ck(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function hL(u,h,m){u.lanes|=h;var v=u.alternate;v!==null&&(v.lanes|=h),$E(u.return,h,m)}function _k(u,h,m,v,x){var A=u.memoizedState;A===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:x}:(A.isBackwards=h,A.rendering=null,A.renderingStartTime=0,A.last=v,A.tail=m,A.tailMode=x)}function pL(u,h,m){var v=h.pendingProps,x=v.revealOrder,A=v.tail;if(ri(u,h,v.children,m),v=ko.current,(v&2)!==0)v=v&1|2,h.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&hL(u,m,h);else if(u.tag===19)hL(u,m,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}v&=1}switch(ie(ko,v),x){case"forwards":for(m=h.child,x=null;m!==null;)u=m.alternate,u!==null&&Q0(u)===null&&(x=m),m=m.sibling;m=x,m===null?(x=h.child,h.child=null):(x=m.sibling,m.sibling=null),_k(h,!1,x,m,A);break;case"backwards":for(m=null,x=h.child,h.child=null;x!==null;){if(u=x.alternate,u!==null&&Q0(u)===null){h.child=x;break}u=x.sibling,x.sibling=m,m=x,x=u}_k(h,!0,m,null,A);break;case"together":_k(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Wc(u,h,m){if(u!==null&&(h.dependencies=u.dependencies),hd|=h.lanes,(m&h.childLanes)===0)if(u!==null){if(cy(u,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(u!==null&&h.child!==u.child)throw Error(r(153));if(h.child!==null){for(u=h.child,m=Fc(u,u.pendingProps),h.child=m,m.return=h;u.sibling!==null;)u=u.sibling,m=m.sibling=Fc(u,u.pendingProps),m.return=h;m.sibling=null}return h.child}function xk(u,h){return(u.lanes&h)!==0?!0:(u=u.dependencies,!!(u!==null&&D0(u)))}function nee(u,h,m){switch(h.tag){case 3:Be(h,h.stateNode.containerInfo),nd(h,Eo,u.memoizedState.cache),ay();break;case 27:case 5:Ge(h);break;case 4:Be(h,h.stateNode.containerInfo);break;case 10:nd(h,h.type,h.memoizedProps.value);break;case 13:var v=h.memoizedState;if(v!==null)return v.dehydrated!==null?(ad(h),h.flags|=128,null):(m&h.child.childLanes)!==0?fL(u,h,m):(ad(h),u=Wc(u,h,m),u!==null?u.sibling:null);ad(h);break;case 19:var x=(u.flags&128)!==0;if(v=(m&h.childLanes)!==0,v||(cy(u,h,m,!1),v=(m&h.childLanes)!==0),x){if(v)return pL(u,h,m);h.flags|=128}if(x=h.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ie(ko,ko.current),v)break;return null;case 22:case 23:return h.lanes=0,aL(u,h,m);case 24:nd(h,Eo,u.memoizedState.cache)}return Wc(u,h,m)}function mL(u,h,m){if(u!==null)if(u.memoizedProps!==h.pendingProps)Vo=!0;else{if(!xk(u,m)&&(h.flags&128)===0)return Vo=!1,nee(u,h,m);Vo=(u.flags&131072)!==0}else Vo=!1,Kn&&(h.flags&1048576)!==0&&GD(h,P0,h.index);switch(h.lanes=0,h.tag){case 16:e:{u=h.pendingProps;var v=h.elementType,x=v._init;if(v=x(v._payload),h.type=v,typeof v=="function")OE(v)?(u=ah(v,u),h.tag=1,h=uL(null,h,v,u,m)):(h.tag=0,h=yk(null,h,v,u,m));else{if(v!=null){if(x=v.$$typeof,x===j){h.tag=11,h=oL(null,h,v,u,m);break e}else if(x===D){h.tag=14,h=iL(null,h,v,u,m);break e}}throw h=ne(v)||v,Error(r(306,h,""))}}return h;case 0:return yk(u,h,h.type,h.pendingProps,m);case 1:return v=h.type,x=ah(v,h.pendingProps),uL(u,h,v,x,m);case 3:e:{if(Be(h,h.stateNode.containerInfo),u===null)throw Error(r(387));v=h.pendingProps;var A=h.memoizedState;x=A.element,KE(u,h),gy(h,v,null,m);var K=h.memoizedState;if(v=K.cache,nd(h,Eo,v),v!==A.cache&&FE(h,[Eo],m,!0),my(),v=K.element,A.isDehydrated)if(A={element:v,isDehydrated:!1,cache:K.cache},h.updateQueue.baseState=A,h.memoizedState=A,h.flags&256){h=dL(u,h,v,m);break e}else if(v!==x){x=_t(Error(r(424)),h),ly(x),h=dL(u,h,v,m);break e}else{switch(u=h.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Ur=al(u.firstChild),Ki=h,Kn=!0,th=null,Ul=!0,m=K4(h,null,v,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(ay(),v===x){h=Wc(u,h,m);break e}ri(u,h,v,m)}h=h.child}return h;case 26:return e1(u,h),u===null?(m=b3(h.type,null,h.pendingProps,null))?h.memoizedState=m:Kn||(m=h.type,u=h.pendingProps,v=m1(ye.current).createElement(m),v[tr]=h,v[wt]=u,ii(v,m,u),Xn(v),h.stateNode=v):h.memoizedState=b3(h.type,u.memoizedProps,h.pendingProps,u.memoizedState),null;case 27:return Ge(h),u===null&&Kn&&(v=h.stateNode=g3(h.type,h.pendingProps,ye.current),Ki=h,Ul=!0,x=Ur,yd(h.type)?(oT=x,Ur=al(v.firstChild)):Ur=x),ri(u,h,h.pendingProps.children,m),e1(u,h),u===null&&(h.flags|=4194304),h.child;case 5:return u===null&&Kn&&((x=v=Ur)&&(v=Iee(v,h.type,h.pendingProps,Ul),v!==null?(h.stateNode=v,Ki=h,Ur=al(v.firstChild),Ul=!1,x=!0):x=!1),x||nh(h)),Ge(h),x=h.type,A=h.pendingProps,K=u!==null?u.memoizedProps:null,v=A.children,eT(x,A)?v=null:K!==null&&eT(x,K)&&(h.flags|=32),h.memoizedState!==null&&(x=JE(u,h,WJ,null,null,m),jy._currentValue=x),e1(u,h),ri(u,h,v,m),h.child;case 6:return u===null&&Kn&&((u=m=Ur)&&(m=Mee(m,h.pendingProps,Ul),m!==null?(h.stateNode=m,Ki=h,Ur=null,u=!0):u=!1),u||nh(h)),null;case 13:return fL(u,h,m);case 4:return Be(h,h.stateNode.containerInfo),v=h.pendingProps,u===null?h.child=jp(h,null,v,m):ri(u,h,v,m),h.child;case 11:return oL(u,h,h.type,h.pendingProps,m);case 7:return ri(u,h,h.pendingProps,m),h.child;case 8:return ri(u,h,h.pendingProps.children,m),h.child;case 12:return ri(u,h,h.pendingProps.children,m),h.child;case 10:return v=h.pendingProps,nd(h,h.type,v.value),ri(u,h,v.children,m),h.child;case 9:return x=h.type._context,v=h.pendingProps.children,oh(h),x=Si(x),v=v(x),h.flags|=1,ri(u,h,v,m),h.child;case 14:return iL(u,h,h.type,h.pendingProps,m);case 15:return sL(u,h,h.type,h.pendingProps,m);case 19:return pL(u,h,m);case 31:return v=h.pendingProps,m=h.mode,v={mode:v.mode,children:v.children},u===null?(m=t1(v,m),m.ref=h.ref,h.child=m,m.return=h,h=m):(m=Fc(u.child,v),m.ref=h.ref,h.child=m,m.return=h,h=m),h;case 22:return aL(u,h,m);case 24:return oh(h),v=Si(Eo),u===null?(x=zE(),x===null&&(x=br,A=HE(),x.pooledCache=A,A.refCount++,A!==null&&(x.pooledCacheLanes|=m),x=A),h.memoizedState={parent:v,cache:x},qE(h),nd(h,Eo,x)):((u.lanes&m)!==0&&(KE(u,h),gy(h,null,null,m),my()),x=u.memoizedState,A=h.memoizedState,x.parent!==v?(x={parent:v,cache:v},h.memoizedState=x,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=x),nd(h,Eo,v)):(v=A.cache,nd(h,Eo,v),v!==x.cache&&FE(h,[Eo],m,!0))),ri(u,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function Yc(u){u.flags|=4}function gL(u,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!x3(h)){if(h=Sa.current,h!==null&&((Bn&4194048)===Bn?zl!==null:(Bn&62914560)!==Bn&&(Bn&536870912)===0||h!==zl))throw hy=GE,JD;u.flags|=8192}}function n1(u,h){h!==null&&(u.flags|=4),u.flags&16384&&(h=u.tag!==22?tt():536870912,u.lanes|=h,Hp|=h)}function _y(u,h){if(!Kn)switch(u.tailMode){case"hidden":h=u.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:v.sibling=null}}function Vr(u){var h=u.alternate!==null&&u.alternate.child===u.child,m=0,v=0;if(h)for(var x=u.child;x!==null;)m|=x.lanes|x.childLanes,v|=x.subtreeFlags&65011712,v|=x.flags&65011712,x.return=u,x=x.sibling;else for(x=u.child;x!==null;)m|=x.lanes|x.childLanes,v|=x.subtreeFlags,v|=x.flags,x.return=u,x=x.sibling;return u.subtreeFlags|=v,u.childLanes=m,h}function ree(u,h,m){var v=h.pendingProps;switch(VE(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(h),null;case 1:return Vr(h),null;case 3:return m=h.stateNode,v=null,u!==null&&(v=u.memoizedState.cache),h.memoizedState.cache!==v&&(h.flags|=2048),Gc(Eo),Ie(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(sy(h)?Yc(h):u===null||u.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,WD())),Vr(h),null;case 26:return m=h.memoizedState,u===null?(Yc(h),m!==null?(Vr(h),gL(h,m)):(Vr(h),h.flags&=-16777217)):m?m!==u.memoizedState?(Yc(h),Vr(h),gL(h,m)):(Vr(h),h.flags&=-16777217):(u.memoizedProps!==v&&Yc(h),Vr(h),h.flags&=-16777217),null;case 27:it(h),m=ye.current;var x=h.type;if(u!==null&&h.stateNode!=null)u.memoizedProps!==v&&Yc(h);else{if(!v){if(h.stateNode===null)throw Error(r(166));return Vr(h),null}u=ce.current,sy(h)?qD(h):(u=g3(x,v,m),h.stateNode=u,Yc(h))}return Vr(h),null;case 5:if(it(h),m=h.type,u!==null&&h.stateNode!=null)u.memoizedProps!==v&&Yc(h);else{if(!v){if(h.stateNode===null)throw Error(r(166));return Vr(h),null}if(u=ce.current,sy(h))qD(h);else{switch(x=m1(ye.current),u){case 1:u=x.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:u=x.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":u=x.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":u=x.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":u=x.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof v.is=="string"?x.createElement("select",{is:v.is}):x.createElement("select"),v.multiple?u.multiple=!0:v.size&&(u.size=v.size);break;default:u=typeof v.is=="string"?x.createElement(m,{is:v.is}):x.createElement(m)}}u[tr]=h,u[wt]=v;e:for(x=h.child;x!==null;){if(x.tag===5||x.tag===6)u.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break e;for(;x.sibling===null;){if(x.return===null||x.return===h)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}h.stateNode=u;e:switch(ii(u,m,v),m){case"button":case"input":case"select":case"textarea":u=!!v.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Yc(h)}}return Vr(h),h.flags&=-16777217,null;case 6:if(u&&h.stateNode!=null)u.memoizedProps!==v&&Yc(h);else{if(typeof v!="string"&&h.stateNode===null)throw Error(r(166));if(u=ye.current,sy(h)){if(u=h.stateNode,m=h.memoizedProps,v=null,x=Ki,x!==null)switch(x.tag){case 27:case 5:v=x.memoizedProps}u[tr]=h,u=!!(u.nodeValue===m||v!==null&&v.suppressHydrationWarning===!0||c3(u.nodeValue,m)),u||nh(h)}else u=m1(u).createTextNode(v),u[tr]=h,h.stateNode=u}return Vr(h),null;case 13:if(v=h.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(x=sy(h),v!==null&&v.dehydrated!==null){if(u===null){if(!x)throw Error(r(318));if(x=h.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[tr]=h}else ay(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Vr(h),x=!1}else x=WD(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=x),x=!0;if(!x)return h.flags&256?(Kc(h),h):(Kc(h),null)}if(Kc(h),(h.flags&128)!==0)return h.lanes=m,h;if(m=v!==null,u=u!==null&&u.memoizedState!==null,m){v=h.child,x=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(x=v.alternate.memoizedState.cachePool.pool);var A=null;v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(A=v.memoizedState.cachePool.pool),A!==x&&(v.flags|=2048)}return m!==u&&m&&(h.child.flags|=8192),n1(h,h.updateQueue),Vr(h),null;case 4:return Ie(),u===null&&Yk(h.stateNode.containerInfo),Vr(h),null;case 10:return Gc(h.type),Vr(h),null;case 19:if(te(ko),x=h.memoizedState,x===null)return Vr(h),null;if(v=(h.flags&128)!==0,A=x.rendering,A===null)if(v)_y(x,!1);else{if(zr!==0||u!==null&&(u.flags&128)!==0)for(u=h.child;u!==null;){if(A=Q0(u),A!==null){for(h.flags|=128,_y(x,!1),u=A.updateQueue,h.updateQueue=u,n1(h,u),h.subtreeFlags=0,u=m,m=h.child;m!==null;)zD(m,u),m=m.sibling;return ie(ko,ko.current&1|2),h.child}u=u.sibling}x.tail!==null&&kt()>i1&&(h.flags|=128,v=!0,_y(x,!1),h.lanes=4194304)}else{if(!v)if(u=Q0(A),u!==null){if(h.flags|=128,v=!0,u=u.updateQueue,h.updateQueue=u,n1(h,u),_y(x,!0),x.tail===null&&x.tailMode==="hidden"&&!A.alternate&&!Kn)return Vr(h),null}else 2*kt()-x.renderingStartTime>i1&&m!==536870912&&(h.flags|=128,v=!0,_y(x,!1),h.lanes=4194304);x.isBackwards?(A.sibling=h.child,h.child=A):(u=x.last,u!==null?u.sibling=A:h.child=A,x.last=A)}return x.tail!==null?(h=x.tail,x.rendering=h,x.tail=h.sibling,x.renderingStartTime=kt(),h.sibling=null,u=ko.current,ie(ko,v?u&1|2:u&1),h):(Vr(h),null);case 22:case 23:return Kc(h),QE(),v=h.memoizedState!==null,u!==null?u.memoizedState!==null!==v&&(h.flags|=8192):v&&(h.flags|=8192),v?(m&536870912)!==0&&(h.flags&128)===0&&(Vr(h),h.subtreeFlags&6&&(h.flags|=8192)):Vr(h),m=h.updateQueue,m!==null&&n1(h,m.retryQueue),m=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),v=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(v=h.memoizedState.cachePool.pool),v!==m&&(h.flags|=2048),u!==null&&te(ih),null;case 24:return m=null,u!==null&&(m=u.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),Gc(Eo),Vr(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function oee(u,h){switch(VE(h),h.tag){case 1:return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return Gc(Eo),Ie(),u=h.flags,(u&65536)!==0&&(u&128)===0?(h.flags=u&-65537|128,h):null;case 26:case 27:case 5:return it(h),null;case 13:if(Kc(h),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(r(340));ay()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return te(ko),null;case 4:return Ie(),null;case 10:return Gc(h.type),null;case 22:case 23:return Kc(h),QE(),u!==null&&te(ih),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 24:return Gc(Eo),null;case 25:return null;default:return null}}function yL(u,h){switch(VE(h),h.tag){case 3:Gc(Eo),Ie();break;case 26:case 27:case 5:it(h);break;case 4:Ie();break;case 13:Kc(h);break;case 19:te(ko);break;case 10:Gc(h.type);break;case 22:case 23:Kc(h),QE(),u!==null&&te(ih);break;case 24:Gc(Eo)}}function xy(u,h){try{var m=h.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var x=v.next;m=x;do{if((m.tag&u)===u){v=void 0;var A=m.create,K=m.inst;v=A(),K.destroy=v}m=m.next}while(m!==x)}}catch(Z){hr(h,h.return,Z)}}function cd(u,h,m){try{var v=h.updateQueue,x=v!==null?v.lastEffect:null;if(x!==null){var A=x.next;v=A;do{if((v.tag&u)===u){var K=v.inst,Z=K.destroy;if(Z!==void 0){K.destroy=void 0,x=h;var ue=m,Te=Z;try{Te()}catch(je){hr(x,ue,je)}}}v=v.next}while(v!==A)}}catch(je){hr(h,h.return,je)}}function vL(u){var h=u.updateQueue;if(h!==null){var m=u.stateNode;try{i4(h,m)}catch(v){hr(u,u.return,v)}}}function bL(u,h,m){m.props=ah(u.type,u.memoizedProps),m.state=u.memoizedState;try{m.componentWillUnmount()}catch(v){hr(u,h,v)}}function Ey(u,h){try{var m=u.ref;if(m!==null){switch(u.tag){case 26:case 27:case 5:var v=u.stateNode;break;case 30:v=u.stateNode;break;default:v=u.stateNode}typeof m=="function"?u.refCleanup=m(v):m.current=v}}catch(x){hr(u,h,x)}}function Gl(u,h){var m=u.ref,v=u.refCleanup;if(m!==null)if(typeof v=="function")try{v()}catch(x){hr(u,h,x)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(x){hr(u,h,x)}else m.current=null}function wL(u){var h=u.type,m=u.memoizedProps,v=u.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&v.focus();break e;case"img":m.src?v.src=m.src:m.srcSet&&(v.srcset=m.srcSet)}}catch(x){hr(u,u.return,x)}}function Ek(u,h,m){try{var v=u.stateNode;Eee(v,u.type,m,h),v[wt]=h}catch(x){hr(u,u.return,x)}}function CL(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&yd(u.type)||u.tag===4}function kk(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||CL(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&yd(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Tk(u,h,m){var v=u.tag;if(v===5||v===6)u=u.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(u,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(u),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=p1));else if(v!==4&&(v===27&&yd(u.type)&&(m=u.stateNode,h=null),u=u.child,u!==null))for(Tk(u,h,m),u=u.sibling;u!==null;)Tk(u,h,m),u=u.sibling}function r1(u,h,m){var v=u.tag;if(v===5||v===6)u=u.stateNode,h?m.insertBefore(u,h):m.appendChild(u);else if(v!==4&&(v===27&&yd(u.type)&&(m=u.stateNode),u=u.child,u!==null))for(r1(u,h,m),u=u.sibling;u!==null;)r1(u,h,m),u=u.sibling}function SL(u){var h=u.stateNode,m=u.memoizedProps;try{for(var v=u.type,x=h.attributes;x.length;)h.removeAttributeNode(x[0]);ii(h,v,m),h[tr]=u,h[wt]=m}catch(A){hr(u,u.return,A)}}var Xc=!1,ro=!1,Ak=!1,_L=typeof WeakSet=="function"?WeakSet:Set,jo=null;function iee(u,h){if(u=u.containerInfo,Zk=C1,u=W(u),X(u)){if("selectionStart"in u)var m={start:u.selectionStart,end:u.selectionEnd};else e:{m=(m=u.ownerDocument)&&m.defaultView||window;var v=m.getSelection&&m.getSelection();if(v&&v.rangeCount!==0){m=v.anchorNode;var x=v.anchorOffset,A=v.focusNode;v=v.focusOffset;try{m.nodeType,A.nodeType}catch{m=null;break e}var K=0,Z=-1,ue=-1,Te=0,je=0,Fe=u,Re=null;t:for(;;){for(var Me;Fe!==m||x!==0&&Fe.nodeType!==3||(Z=K+x),Fe!==A||v!==0&&Fe.nodeType!==3||(ue=K+v),Fe.nodeType===3&&(K+=Fe.nodeValue.length),(Me=Fe.firstChild)!==null;)Re=Fe,Fe=Me;for(;;){if(Fe===u)break t;if(Re===m&&++Te===x&&(Z=K),Re===A&&++je===v&&(ue=K),(Me=Fe.nextSibling)!==null)break;Fe=Re,Re=Fe.parentNode}Fe=Me}m=Z===-1||ue===-1?null:{start:Z,end:ue}}else m=null}m=m||{start:0,end:0}}else m=null;for(Jk={focusedElem:u,selectionRange:m},C1=!1,jo=h;jo!==null;)if(h=jo,u=h.child,(h.subtreeFlags&1024)!==0&&u!==null)u.return=h,jo=u;else for(;jo!==null;){switch(h=jo,A=h.alternate,u=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&A!==null){u=void 0,m=h,x=A.memoizedProps,A=A.memoizedState,v=m.stateNode;try{var Lt=ah(m.type,x,m.elementType===m.type);u=v.getSnapshotBeforeUpdate(Lt,A),v.__reactInternalSnapshotBeforeUpdate=u}catch(Mt){hr(m,m.return,Mt)}}break;case 3:if((u&1024)!==0){if(u=h.stateNode.containerInfo,m=u.nodeType,m===9)nT(u);else if(m===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":nT(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(r(163))}if(u=h.sibling,u!==null){u.return=h.return,jo=u;break}jo=h.return}}function xL(u,h,m){var v=m.flags;switch(m.tag){case 0:case 11:case 15:ud(u,m),v&4&&xy(5,m);break;case 1:if(ud(u,m),v&4)if(u=m.stateNode,h===null)try{u.componentDidMount()}catch(K){hr(m,m.return,K)}else{var x=ah(m.type,h.memoizedProps);h=h.memoizedState;try{u.componentDidUpdate(x,h,u.__reactInternalSnapshotBeforeUpdate)}catch(K){hr(m,m.return,K)}}v&64&&vL(m),v&512&&Ey(m,m.return);break;case 3:if(ud(u,m),v&64&&(u=m.updateQueue,u!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{i4(u,h)}catch(K){hr(m,m.return,K)}}break;case 27:h===null&&v&4&&SL(m);case 26:case 5:ud(u,m),h===null&&v&4&&wL(m),v&512&&Ey(m,m.return);break;case 12:ud(u,m);break;case 13:ud(u,m),v&4&&TL(u,m),v&64&&(u=m.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(m=pee.bind(null,m),Nee(u,m))));break;case 22:if(v=m.memoizedState!==null||Xc,!v){h=h!==null&&h.memoizedState!==null||ro,x=Xc;var A=ro;Xc=v,(ro=h)&&!A?dd(u,m,(m.subtreeFlags&8772)!==0):ud(u,m),Xc=x,ro=A}break;case 30:break;default:ud(u,m)}}function EL(u){var h=u.alternate;h!==null&&(u.alternate=null,EL(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&Zo(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Or=null,ms=!1;function Qc(u,h,m){for(m=m.child;m!==null;)kL(u,h,m),m=m.sibling}function kL(u,h,m){if(qt&&typeof qt.onCommitFiberUnmount=="function")try{qt.onCommitFiberUnmount(Gt,m)}catch{}switch(m.tag){case 26:ro||Gl(m,h),Qc(u,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:ro||Gl(m,h);var v=Or,x=ms;yd(m.type)&&(Or=m.stateNode,ms=!1),Qc(u,h,m),Py(m.stateNode),Or=v,ms=x;break;case 5:ro||Gl(m,h);case 6:if(v=Or,x=ms,Or=null,Qc(u,h,m),Or=v,ms=x,Or!==null)if(ms)try{(Or.nodeType===9?Or.body:Or.nodeName==="HTML"?Or.ownerDocument.body:Or).removeChild(m.stateNode)}catch(A){hr(m,h,A)}else try{Or.removeChild(m.stateNode)}catch(A){hr(m,h,A)}break;case 18:Or!==null&&(ms?(u=Or,p3(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,m.stateNode),Hy(u)):p3(Or,m.stateNode));break;case 4:v=Or,x=ms,Or=m.stateNode.containerInfo,ms=!0,Qc(u,h,m),Or=v,ms=x;break;case 0:case 11:case 14:case 15:ro||cd(2,m,h),ro||cd(4,m,h),Qc(u,h,m);break;case 1:ro||(Gl(m,h),v=m.stateNode,typeof v.componentWillUnmount=="function"&&bL(m,h,v)),Qc(u,h,m);break;case 21:Qc(u,h,m);break;case 22:ro=(v=ro)||m.memoizedState!==null,Qc(u,h,m),ro=v;break;default:Qc(u,h,m)}}function TL(u,h){if(h.memoizedState===null&&(u=h.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Hy(u)}catch(m){hr(h,h.return,m)}}function see(u){switch(u.tag){case 13:case 19:var h=u.stateNode;return h===null&&(h=u.stateNode=new _L),h;case 22:return u=u.stateNode,h=u._retryCache,h===null&&(h=u._retryCache=new _L),h;default:throw Error(r(435,u.tag))}}function Rk(u,h){var m=see(u);h.forEach(function(v){var x=mee.bind(null,u,v);m.has(v)||(m.add(v),v.then(x,x))})}function Vs(u,h){var m=h.deletions;if(m!==null)for(var v=0;v<m.length;v++){var x=m[v],A=u,K=h,Z=K;e:for(;Z!==null;){switch(Z.tag){case 27:if(yd(Z.type)){Or=Z.stateNode,ms=!1;break e}break;case 5:Or=Z.stateNode,ms=!1;break e;case 3:case 4:Or=Z.stateNode.containerInfo,ms=!0;break e}Z=Z.return}if(Or===null)throw Error(r(160));kL(A,K,x),Or=null,ms=!1,A=x.alternate,A!==null&&(A.return=null),x.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)AL(h,u),h=h.sibling}var sl=null;function AL(u,h){var m=u.alternate,v=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Vs(h,u),js(u),v&4&&(cd(3,u,u.return),xy(3,u),cd(5,u,u.return));break;case 1:Vs(h,u),js(u),v&512&&(ro||m===null||Gl(m,m.return)),v&64&&Xc&&(u=u.updateQueue,u!==null&&(v=u.callbacks,v!==null&&(m=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=m===null?v:m.concat(v))));break;case 26:var x=sl;if(Vs(h,u),js(u),v&512&&(ro||m===null||Gl(m,m.return)),v&4){var A=m!==null?m.memoizedState:null;if(v=u.memoizedState,m===null)if(v===null)if(u.stateNode===null){e:{v=u.type,m=u.memoizedProps,x=x.ownerDocument||x;t:switch(v){case"title":A=x.getElementsByTagName("title")[0],(!A||A[Oc]||A[tr]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=x.createElement(v),x.head.insertBefore(A,x.querySelector("head > title"))),ii(A,v,m),A[tr]=u,Xn(A),v=A;break e;case"link":var K=S3("link","href",x).get(v+(m.href||""));if(K){for(var Z=0;Z<K.length;Z++)if(A=K[Z],A.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&A.getAttribute("rel")===(m.rel==null?null:m.rel)&&A.getAttribute("title")===(m.title==null?null:m.title)&&A.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){K.splice(Z,1);break t}}A=x.createElement(v),ii(A,v,m),x.head.appendChild(A);break;case"meta":if(K=S3("meta","content",x).get(v+(m.content||""))){for(Z=0;Z<K.length;Z++)if(A=K[Z],A.getAttribute("content")===(m.content==null?null:""+m.content)&&A.getAttribute("name")===(m.name==null?null:m.name)&&A.getAttribute("property")===(m.property==null?null:m.property)&&A.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&A.getAttribute("charset")===(m.charSet==null?null:m.charSet)){K.splice(Z,1);break t}}A=x.createElement(v),ii(A,v,m),x.head.appendChild(A);break;default:throw Error(r(468,v))}A[tr]=u,Xn(A),v=A}u.stateNode=v}else _3(x,u.type,u.stateNode);else u.stateNode=C3(x,v,u.memoizedProps);else A!==v?(A===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):A.count--,v===null?_3(x,u.type,u.stateNode):C3(x,v,u.memoizedProps)):v===null&&u.stateNode!==null&&Ek(u,u.memoizedProps,m.memoizedProps)}break;case 27:Vs(h,u),js(u),v&512&&(ro||m===null||Gl(m,m.return)),m!==null&&v&4&&Ek(u,u.memoizedProps,m.memoizedProps);break;case 5:if(Vs(h,u),js(u),v&512&&(ro||m===null||Gl(m,m.return)),u.flags&32){x=u.stateNode;try{ls(x,"")}catch(Me){hr(u,u.return,Me)}}v&4&&u.stateNode!=null&&(x=u.memoizedProps,Ek(u,x,m!==null?m.memoizedProps:x)),v&1024&&(Ak=!0);break;case 6:if(Vs(h,u),js(u),v&4){if(u.stateNode===null)throw Error(r(162));v=u.memoizedProps,m=u.stateNode;try{m.nodeValue=v}catch(Me){hr(u,u.return,Me)}}break;case 3:if(v1=null,x=sl,sl=g1(h.containerInfo),Vs(h,u),sl=x,js(u),v&4&&m!==null&&m.memoizedState.isDehydrated)try{Hy(h.containerInfo)}catch(Me){hr(u,u.return,Me)}Ak&&(Ak=!1,RL(u));break;case 4:v=sl,sl=g1(u.stateNode.containerInfo),Vs(h,u),js(u),sl=v;break;case 12:Vs(h,u),js(u);break;case 13:Vs(h,u),js(u),u.child.flags&8192&&u.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Dk=kt()),v&4&&(v=u.updateQueue,v!==null&&(u.updateQueue=null,Rk(u,v)));break;case 22:x=u.memoizedState!==null;var ue=m!==null&&m.memoizedState!==null,Te=Xc,je=ro;if(Xc=Te||x,ro=je||ue,Vs(h,u),ro=je,Xc=Te,js(u),v&8192)e:for(h=u.stateNode,h._visibility=x?h._visibility&-2:h._visibility|1,x&&(m===null||ue||Xc||ro||lh(u)),m=null,h=u;;){if(h.tag===5||h.tag===26){if(m===null){ue=m=h;try{if(A=ue.stateNode,x)K=A.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{Z=ue.stateNode;var Fe=ue.memoizedProps.style,Re=Fe!=null&&Fe.hasOwnProperty("display")?Fe.display:null;Z.style.display=Re==null||typeof Re=="boolean"?"":(""+Re).trim()}}catch(Me){hr(ue,ue.return,Me)}}}else if(h.tag===6){if(m===null){ue=h;try{ue.stateNode.nodeValue=x?"":ue.memoizedProps}catch(Me){hr(ue,ue.return,Me)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===u)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break e;for(;h.sibling===null;){if(h.return===null||h.return===u)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}v&4&&(v=u.updateQueue,v!==null&&(m=v.retryQueue,m!==null&&(v.retryQueue=null,Rk(u,m))));break;case 19:Vs(h,u),js(u),v&4&&(v=u.updateQueue,v!==null&&(u.updateQueue=null,Rk(u,v)));break;case 30:break;case 21:break;default:Vs(h,u),js(u)}}function js(u){var h=u.flags;if(h&2){try{for(var m,v=u.return;v!==null;){if(CL(v)){m=v;break}v=v.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var x=m.stateNode,A=kk(u);r1(u,A,x);break;case 5:var K=m.stateNode;m.flags&32&&(ls(K,""),m.flags&=-33);var Z=kk(u);r1(u,Z,K);break;case 3:case 4:var ue=m.stateNode.containerInfo,Te=kk(u);Tk(u,Te,ue);break;default:throw Error(r(161))}}catch(je){hr(u,u.return,je)}u.flags&=-3}h&4096&&(u.flags&=-4097)}function RL(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var h=u;RL(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),u=u.sibling}}function ud(u,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)xL(u,h.alternate,h),h=h.sibling}function lh(u){for(u=u.child;u!==null;){var h=u;switch(h.tag){case 0:case 11:case 14:case 15:cd(4,h,h.return),lh(h);break;case 1:Gl(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&bL(h,h.return,m),lh(h);break;case 27:Py(h.stateNode);case 26:case 5:Gl(h,h.return),lh(h);break;case 22:h.memoizedState===null&&lh(h);break;case 30:lh(h);break;default:lh(h)}u=u.sibling}}function dd(u,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var v=h.alternate,x=u,A=h,K=A.flags;switch(A.tag){case 0:case 11:case 15:dd(x,A,m),xy(4,A);break;case 1:if(dd(x,A,m),v=A,x=v.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Te){hr(v,v.return,Te)}if(v=A,x=v.updateQueue,x!==null){var Z=v.stateNode;try{var ue=x.shared.hiddenCallbacks;if(ue!==null)for(x.shared.hiddenCallbacks=null,x=0;x<ue.length;x++)o4(ue[x],Z)}catch(Te){hr(v,v.return,Te)}}m&&K&64&&vL(A),Ey(A,A.return);break;case 27:SL(A);case 26:case 5:dd(x,A,m),m&&v===null&&K&4&&wL(A),Ey(A,A.return);break;case 12:dd(x,A,m);break;case 13:dd(x,A,m),m&&K&4&&TL(x,A);break;case 22:A.memoizedState===null&&dd(x,A,m),Ey(A,A.return);break;case 30:break;default:dd(x,A,m)}h=h.sibling}}function Ik(u,h){var m=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),u=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(u=h.memoizedState.cachePool.pool),u!==m&&(u!=null&&u.refCount++,m!=null&&uy(m))}function Mk(u,h){u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&uy(u))}function ql(u,h,m,v){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)IL(u,h,m,v),h=h.sibling}function IL(u,h,m,v){var x=h.flags;switch(h.tag){case 0:case 11:case 15:ql(u,h,m,v),x&2048&&xy(9,h);break;case 1:ql(u,h,m,v);break;case 3:ql(u,h,m,v),x&2048&&(u=null,h.alternate!==null&&(u=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==u&&(h.refCount++,u!=null&&uy(u)));break;case 12:if(x&2048){ql(u,h,m,v),u=h.stateNode;try{var A=h.memoizedProps,K=A.id,Z=A.onPostCommit;typeof Z=="function"&&Z(K,h.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(ue){hr(h,h.return,ue)}}else ql(u,h,m,v);break;case 13:ql(u,h,m,v);break;case 23:break;case 22:A=h.stateNode,K=h.alternate,h.memoizedState!==null?A._visibility&2?ql(u,h,m,v):ky(u,h):A._visibility&2?ql(u,h,m,v):(A._visibility|=2,Bp(u,h,m,v,(h.subtreeFlags&10256)!==0)),x&2048&&Ik(K,h);break;case 24:ql(u,h,m,v),x&2048&&Mk(h.alternate,h);break;default:ql(u,h,m,v)}}function Bp(u,h,m,v,x){for(x=x&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var A=u,K=h,Z=m,ue=v,Te=K.flags;switch(K.tag){case 0:case 11:case 15:Bp(A,K,Z,ue,x),xy(8,K);break;case 23:break;case 22:var je=K.stateNode;K.memoizedState!==null?je._visibility&2?Bp(A,K,Z,ue,x):ky(A,K):(je._visibility|=2,Bp(A,K,Z,ue,x)),x&&Te&2048&&Ik(K.alternate,K);break;case 24:Bp(A,K,Z,ue,x),x&&Te&2048&&Mk(K.alternate,K);break;default:Bp(A,K,Z,ue,x)}h=h.sibling}}function ky(u,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=u,v=h,x=v.flags;switch(v.tag){case 22:ky(m,v),x&2048&&Ik(v.alternate,v);break;case 24:ky(m,v),x&2048&&Mk(v.alternate,v);break;default:ky(m,v)}h=h.sibling}}var Ty=8192;function $p(u){if(u.subtreeFlags&Ty)for(u=u.child;u!==null;)ML(u),u=u.sibling}function ML(u){switch(u.tag){case 26:$p(u),u.flags&Ty&&u.memoizedState!==null&&Gee(sl,u.memoizedState,u.memoizedProps);break;case 5:$p(u);break;case 3:case 4:var h=sl;sl=g1(u.stateNode.containerInfo),$p(u),sl=h;break;case 22:u.memoizedState===null&&(h=u.alternate,h!==null&&h.memoizedState!==null?(h=Ty,Ty=16777216,$p(u),Ty=h):$p(u));break;default:$p(u)}}function NL(u){var h=u.alternate;if(h!==null&&(u=h.child,u!==null)){h.child=null;do h=u.sibling,u.sibling=null,u=h;while(u!==null)}}function Ay(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var v=h[m];jo=v,PL(v,u)}NL(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)OL(u),u=u.sibling}function OL(u){switch(u.tag){case 0:case 11:case 15:Ay(u),u.flags&2048&&cd(9,u,u.return);break;case 3:Ay(u);break;case 12:Ay(u);break;case 22:var h=u.stateNode;u.memoizedState!==null&&h._visibility&2&&(u.return===null||u.return.tag!==13)?(h._visibility&=-3,o1(u)):Ay(u);break;default:Ay(u)}}function o1(u){var h=u.deletions;if((u.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var v=h[m];jo=v,PL(v,u)}NL(u)}for(u=u.child;u!==null;){switch(h=u,h.tag){case 0:case 11:case 15:cd(8,h,h.return),o1(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,o1(h));break;default:o1(h)}u=u.sibling}}function PL(u,h){for(;jo!==null;){var m=jo;switch(m.tag){case 0:case 11:case 15:cd(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var v=m.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:uy(m.memoizedState.cache)}if(v=m.child,v!==null)v.return=m,jo=v;else e:for(m=u;jo!==null;){v=jo;var x=v.sibling,A=v.return;if(EL(v),v===m){jo=null;break e}if(x!==null){x.return=A,jo=x;break e}jo=A}}}var aee={getCacheForType:function(u){var h=Si(Eo),m=h.data.get(u);return m===void 0&&(m=u(),h.data.set(u,m)),m}},lee=typeof WeakMap=="function"?WeakMap:Map,rr=0,br=null,Cn=null,Bn=0,or=0,Bs=null,fd=!1,Fp=!1,Nk=!1,Zc=0,zr=0,hd=0,ch=0,Ok=0,_a=0,Hp=0,Ry=null,gs=null,Pk=!1,Dk=0,i1=1/0,s1=null,pd=null,oi=0,md=null,Up=null,zp=0,Lk=0,Vk=null,DL=null,Iy=0,jk=null;function $s(){if((rr&2)!==0&&Bn!==0)return Bn&-Bn;if(V.T!==null){var u=Mp;return u!==0?u:Gk()}return sr()}function LL(){_a===0&&(_a=(Bn&536870912)===0||Kn?Fr():536870912);var u=Sa.current;return u!==null&&(u.flags|=32),_a}function Fs(u,h,m){(u===br&&(or===2||or===9)||u.cancelPendingCommit!==null)&&(Gp(u,0),gd(u,Bn,_a,!1)),Ir(u,m),((rr&2)===0||u!==br)&&(u===br&&((rr&2)===0&&(ch|=m),zr===4&&gd(u,Bn,_a,!1)),Kl(u))}function VL(u,h,m){if((rr&6)!==0)throw Error(r(327));var v=!m&&(h&124)===0&&(h&u.expiredLanes)===0||Xo(u,h),x=v?dee(u,h):Fk(u,h,!0),A=v;do{if(x===0){Fp&&!v&&gd(u,h,0,!1);break}else{if(m=u.current.alternate,A&&!cee(m)){x=Fk(u,h,!1),A=!1;continue}if(x===2){if(A=h,u.errorRecoveryDisabledLanes&A)var K=0;else K=u.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){h=K;e:{var Z=u;x=Ry;var ue=Z.current.memoizedState.isDehydrated;if(ue&&(Gp(Z,K).flags|=256),K=Fk(Z,K,!1),K!==2){if(Nk&&!ue){Z.errorRecoveryDisabledLanes|=A,ch|=A,x=4;break e}A=gs,gs=x,A!==null&&(gs===null?gs=A:gs.push.apply(gs,A))}x=K}if(A=!1,x!==2)continue}}if(x===1){Gp(u,0),gd(u,h,0,!0);break}e:{switch(v=u,A=x,A){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:gd(v,h,_a,!fd);break e;case 2:gs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(x=Dk+300-kt(),10<x)){if(gd(v,h,_a,!fd),st(v,0,!0)!==0)break e;v.timeoutHandle=f3(jL.bind(null,v,m,gs,s1,Pk,h,_a,ch,Hp,fd,A,2,-0,0),x);break e}jL(v,m,gs,s1,Pk,h,_a,ch,Hp,fd,A,0,-0,0)}}break}while(!0);Kl(u)}function jL(u,h,m,v,x,A,K,Z,ue,Te,je,Fe,Re,Me){if(u.timeoutHandle=-1,Fe=h.subtreeFlags,(Fe&8192||(Fe&16785408)===16785408)&&(Vy={stylesheets:null,count:0,unsuspend:zee},ML(h),Fe=qee(),Fe!==null)){u.cancelPendingCommit=Fe(GL.bind(null,u,h,A,m,v,x,K,Z,ue,je,1,Re,Me)),gd(u,A,K,!Te);return}GL(u,h,A,m,v,x,K,Z,ue)}function cee(u){for(var h=u;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var v=0;v<m.length;v++){var x=m[v],A=x.getSnapshot;x=x.value;try{if(!Ci(A(),x))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function gd(u,h,m,v){h&=~Ok,h&=~ch,u.suspendedLanes|=h,u.pingedLanes&=~h,v&&(u.warmLanes|=h),v=u.expirationTimes;for(var x=h;0<x;){var A=31-Ln(x),K=1<<A;v[A]=-1,x&=~K}m!==0&&yt(u,m,h)}function a1(){return(rr&6)===0?(My(0),!1):!0}function Bk(){if(Cn!==null){if(or===0)var u=Cn.return;else u=Cn,zc=rh=null,nk(u),Vp=null,Cy=0,u=Cn;for(;u!==null;)yL(u.alternate,u),u=u.return;Cn=null}}function Gp(u,h){var m=u.timeoutHandle;m!==-1&&(u.timeoutHandle=-1,Tee(m)),m=u.cancelPendingCommit,m!==null&&(u.cancelPendingCommit=null,m()),Bk(),br=u,Cn=m=Fc(u.current,null),Bn=h,or=0,Bs=null,fd=!1,Fp=Xo(u,h),Nk=!1,Hp=_a=Ok=ch=hd=zr=0,gs=Ry=null,Pk=!1,(h&8)!==0&&(h|=h&32);var v=u.entangledLanes;if(v!==0)for(u=u.entanglements,v&=h;0<v;){var x=31-Ln(v),A=1<<x;h|=u[x],v&=~A}return Zc=h,Dt(),m}function BL(u,h){dn=null,V.H=W0,h===fy||h===j0?(h=n4(),or=3):h===JD?(h=n4(),or=4):or=h===rL?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Bs=h,Cn===null&&(zr=1,J0(u,_t(h,u.current)))}function $L(){var u=V.H;return V.H=W0,u===null?W0:u}function FL(){var u=V.A;return V.A=aee,u}function $k(){zr=4,fd||(Bn&4194048)!==Bn&&Sa.current!==null||(Fp=!0),(hd&134217727)===0&&(ch&134217727)===0||br===null||gd(br,Bn,_a,!1)}function Fk(u,h,m){var v=rr;rr|=2;var x=$L(),A=FL();(br!==u||Bn!==h)&&(s1=null,Gp(u,h)),h=!1;var K=zr;e:do try{if(or!==0&&Cn!==null){var Z=Cn,ue=Bs;switch(or){case 8:Bk(),K=6;break e;case 3:case 2:case 9:case 6:Sa.current===null&&(h=!0);var Te=or;if(or=0,Bs=null,qp(u,Z,ue,Te),m&&Fp){K=0;break e}break;default:Te=or,or=0,Bs=null,qp(u,Z,ue,Te)}}uee(),K=zr;break}catch(je){BL(u,je)}while(!0);return h&&u.shellSuspendCounter++,zc=rh=null,rr=v,V.H=x,V.A=A,Cn===null&&(br=null,Bn=0,Dt()),K}function uee(){for(;Cn!==null;)HL(Cn)}function dee(u,h){var m=rr;rr|=2;var v=$L(),x=FL();br!==u||Bn!==h?(s1=null,i1=kt()+500,Gp(u,h)):Fp=Xo(u,h);e:do try{if(or!==0&&Cn!==null){h=Cn;var A=Bs;t:switch(or){case 1:or=0,Bs=null,qp(u,h,A,1);break;case 2:case 9:if(e4(A)){or=0,Bs=null,UL(h);break}h=function(){or!==2&&or!==9||br!==u||(or=7),Kl(u)},A.then(h,h);break e;case 3:or=7;break e;case 4:or=5;break e;case 7:e4(A)?(or=0,Bs=null,UL(h)):(or=0,Bs=null,qp(u,h,A,7));break;case 5:var K=null;switch(Cn.tag){case 26:K=Cn.memoizedState;case 5:case 27:var Z=Cn;if(!K||x3(K)){or=0,Bs=null;var ue=Z.sibling;if(ue!==null)Cn=ue;else{var Te=Z.return;Te!==null?(Cn=Te,l1(Te)):Cn=null}break t}}or=0,Bs=null,qp(u,h,A,5);break;case 6:or=0,Bs=null,qp(u,h,A,6);break;case 8:Bk(),zr=6;break e;default:throw Error(r(462))}}fee();break}catch(je){BL(u,je)}while(!0);return zc=rh=null,V.H=v,V.A=x,rr=m,Cn!==null?0:(br=null,Bn=0,Dt(),zr)}function fee(){for(;Cn!==null&&!Pt();)HL(Cn)}function HL(u){var h=mL(u.alternate,u,Zc);u.memoizedProps=u.pendingProps,h===null?l1(u):Cn=h}function UL(u){var h=u,m=h.alternate;switch(h.tag){case 15:case 0:h=cL(m,h,h.pendingProps,h.type,void 0,Bn);break;case 11:h=cL(m,h,h.pendingProps,h.type.render,h.ref,Bn);break;case 5:nk(h);default:yL(m,h),h=Cn=zD(h,Zc),h=mL(m,h,Zc)}u.memoizedProps=u.pendingProps,h===null?l1(u):Cn=h}function qp(u,h,m,v){zc=rh=null,nk(h),Vp=null,Cy=0;var x=h.return;try{if(tee(u,x,h,m,Bn)){zr=1,J0(u,_t(m,u.current)),Cn=null;return}}catch(A){if(x!==null)throw Cn=x,A;zr=1,J0(u,_t(m,u.current)),Cn=null;return}h.flags&32768?(Kn||v===1?u=!0:Fp||(Bn&536870912)!==0?u=!1:(fd=u=!0,(v===2||v===9||v===3||v===6)&&(v=Sa.current,v!==null&&v.tag===13&&(v.flags|=16384))),zL(h,u)):l1(h)}function l1(u){var h=u;do{if((h.flags&32768)!==0){zL(h,fd);return}u=h.return;var m=ree(h.alternate,h,Zc);if(m!==null){Cn=m;return}if(h=h.sibling,h!==null){Cn=h;return}Cn=h=u}while(h!==null);zr===0&&(zr=5)}function zL(u,h){do{var m=oee(u.alternate,u);if(m!==null){m.flags&=32767,Cn=m;return}if(m=u.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(u=u.sibling,u!==null)){Cn=u;return}Cn=u=m}while(u!==null);zr=6,Cn=null}function GL(u,h,m,v,x,A,K,Z,ue){u.cancelPendingCommit=null;do c1();while(oi!==0);if((rr&6)!==0)throw Error(r(327));if(h!==null){if(h===u.current)throw Error(r(177));if(A=h.lanes|h.childLanes,A|=ni,Qr(u,m,A,K,Z,ue),u===br&&(Cn=br=null,Bn=0),Up=h,md=u,zp=m,Lk=A,Vk=x,DL=v,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,gee(Wt,function(){return XL(),null})):(u.callbackNode=null,u.callbackPriority=0),v=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||v){v=V.T,V.T=null,x=U.p,U.p=2,K=rr,rr|=4;try{iee(u,h,m)}finally{rr=K,U.p=x,V.T=v}}oi=1,qL(),KL(),WL()}}function qL(){if(oi===1){oi=0;var u=md,h=Up,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=V.T,V.T=null;var v=U.p;U.p=2;var x=rr;rr|=4;try{AL(h,u);var A=Jk,K=W(u.containerInfo),Z=A.focusedElem,ue=A.selectionRange;if(K!==Z&&Z&&Z.ownerDocument&&$(Z.ownerDocument.documentElement,Z)){if(ue!==null&&X(Z)){var Te=ue.start,je=ue.end;if(je===void 0&&(je=Te),"selectionStart"in Z)Z.selectionStart=Te,Z.selectionEnd=Math.min(je,Z.value.length);else{var Fe=Z.ownerDocument||document,Re=Fe&&Fe.defaultView||window;if(Re.getSelection){var Me=Re.getSelection(),Lt=Z.textContent.length,Mt=Math.min(ue.start,Lt),ur=ue.end===void 0?Mt:Math.min(ue.end,Lt);!Me.extend&&Mt>ur&&(K=ur,ur=Mt,Mt=K);var Ce=O(Z,Mt),pe=O(Z,ur);if(Ce&&pe&&(Me.rangeCount!==1||Me.anchorNode!==Ce.node||Me.anchorOffset!==Ce.offset||Me.focusNode!==pe.node||Me.focusOffset!==pe.offset)){var ke=Fe.createRange();ke.setStart(Ce.node,Ce.offset),Me.removeAllRanges(),Mt>ur?(Me.addRange(ke),Me.extend(pe.node,pe.offset)):(ke.setEnd(pe.node,pe.offset),Me.addRange(ke))}}}}for(Fe=[],Me=Z;Me=Me.parentNode;)Me.nodeType===1&&Fe.push({element:Me,left:Me.scrollLeft,top:Me.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<Fe.length;Z++){var $e=Fe[Z];$e.element.scrollLeft=$e.left,$e.element.scrollTop=$e.top}}C1=!!Zk,Jk=Zk=null}finally{rr=x,U.p=v,V.T=m}}u.current=h,oi=2}}function KL(){if(oi===2){oi=0;var u=md,h=Up,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=V.T,V.T=null;var v=U.p;U.p=2;var x=rr;rr|=4;try{xL(u,h.alternate,h)}finally{rr=x,U.p=v,V.T=m}}oi=3}}function WL(){if(oi===4||oi===3){oi=0,Pn();var u=md,h=Up,m=zp,v=DL;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?oi=5:(oi=0,Up=md=null,YL(u,u.pendingLanes));var x=u.pendingLanes;if(x===0&&(pd=null),Yn(m),h=h.stateNode,qt&&typeof qt.onCommitFiberRoot=="function")try{qt.onCommitFiberRoot(Gt,h,void 0,(h.current.flags&128)===128)}catch{}if(v!==null){h=V.T,x=U.p,U.p=2,V.T=null;try{for(var A=u.onRecoverableError,K=0;K<v.length;K++){var Z=v[K];A(Z.value,{componentStack:Z.stack})}}finally{V.T=h,U.p=x}}(zp&3)!==0&&c1(),Kl(u),x=u.pendingLanes,(m&4194090)!==0&&(x&42)!==0?u===jk?Iy++:(Iy=0,jk=u):Iy=0,My(0)}}function YL(u,h){(u.pooledCacheLanes&=h)===0&&(h=u.pooledCache,h!=null&&(u.pooledCache=null,uy(h)))}function c1(u){return qL(),KL(),WL(),XL()}function XL(){if(oi!==5)return!1;var u=md,h=Lk;Lk=0;var m=Yn(zp),v=V.T,x=U.p;try{U.p=32>m?32:m,V.T=null,m=Vk,Vk=null;var A=md,K=zp;if(oi=0,Up=md=null,zp=0,(rr&6)!==0)throw Error(r(331));var Z=rr;if(rr|=4,OL(A.current),IL(A,A.current,K,m),rr=Z,My(0,!1),qt&&typeof qt.onPostCommitFiberRoot=="function")try{qt.onPostCommitFiberRoot(Gt,A)}catch{}return!0}finally{U.p=x,V.T=v,YL(u,h)}}function QL(u,h,m){h=_t(m,h),h=gk(u.stateNode,h,2),u=id(u,h,2),u!==null&&(Ir(u,2),Kl(u))}function hr(u,h,m){if(u.tag===3)QL(u,u,m);else for(;h!==null;){if(h.tag===3){QL(h,u,m);break}else if(h.tag===1){var v=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(pd===null||!pd.has(v))){u=_t(m,u),m=tL(2),v=id(h,m,2),v!==null&&(nL(m,v,h,u),Ir(v,2),Kl(v));break}}h=h.return}}function Hk(u,h,m){var v=u.pingCache;if(v===null){v=u.pingCache=new lee;var x=new Set;v.set(h,x)}else x=v.get(h),x===void 0&&(x=new Set,v.set(h,x));x.has(m)||(Nk=!0,x.add(m),u=hee.bind(null,u,h,m),h.then(u,u))}function hee(u,h,m){var v=u.pingCache;v!==null&&v.delete(h),u.pingedLanes|=u.suspendedLanes&m,u.warmLanes&=~m,br===u&&(Bn&m)===m&&(zr===4||zr===3&&(Bn&62914560)===Bn&&300>kt()-Dk?(rr&2)===0&&Gp(u,0):Ok|=m,Hp===Bn&&(Hp=0)),Kl(u)}function ZL(u,h){h===0&&(h=tt()),u=il(u,h),u!==null&&(Ir(u,h),Kl(u))}function pee(u){var h=u.memoizedState,m=0;h!==null&&(m=h.retryLane),ZL(u,m)}function mee(u,h){var m=0;switch(u.tag){case 13:var v=u.stateNode,x=u.memoizedState;x!==null&&(m=x.retryLane);break;case 19:v=u.stateNode;break;case 22:v=u.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(h),ZL(u,m)}function gee(u,h){return zt(u,h)}var u1=null,Kp=null,Uk=!1,d1=!1,zk=!1,uh=0;function Kl(u){u!==Kp&&u.next===null&&(Kp===null?u1=Kp=u:Kp=Kp.next=u),d1=!0,Uk||(Uk=!0,vee())}function My(u,h){if(!zk&&d1){zk=!0;do for(var m=!1,v=u1;v!==null;){if(u!==0){var x=v.pendingLanes;if(x===0)var A=0;else{var K=v.suspendedLanes,Z=v.pingedLanes;A=(1<<31-Ln(42|u)+1)-1,A&=x&~(K&~Z),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(m=!0,n3(v,A))}else A=Bn,A=st(v,v===br?A:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(A&3)===0||Xo(v,A)||(m=!0,n3(v,A));v=v.next}while(m);zk=!1}}function yee(){JL()}function JL(){d1=Uk=!1;var u=0;uh!==0&&(kee()&&(u=uh),uh=0);for(var h=kt(),m=null,v=u1;v!==null;){var x=v.next,A=e3(v,h);A===0?(v.next=null,m===null?u1=x:m.next=x,x===null&&(Kp=m)):(m=v,(u!==0||(A&3)!==0)&&(d1=!0)),v=x}My(u)}function e3(u,h){for(var m=u.suspendedLanes,v=u.pingedLanes,x=u.expirationTimes,A=u.pendingLanes&-62914561;0<A;){var K=31-Ln(A),Z=1<<K,ue=x[K];ue===-1?((Z&m)===0||(Z&v)!==0)&&(x[K]=Xr(Z,h)):ue<=h&&(u.expiredLanes|=Z),A&=~Z}if(h=br,m=Bn,m=st(u,u===h?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),v=u.callbackNode,m===0||u===h&&(or===2||or===9)||u.cancelPendingCommit!==null)return v!==null&&v!==null&&un(v),u.callbackNode=null,u.callbackPriority=0;if((m&3)===0||Xo(u,m)){if(h=m&-m,h===u.callbackPriority)return h;switch(v!==null&&un(v),Yn(m)){case 2:case 8:m=Ft;break;case 32:m=Wt;break;case 268435456:m=Jt;break;default:m=Wt}return v=t3.bind(null,u),m=zt(m,v),u.callbackPriority=h,u.callbackNode=m,h}return v!==null&&v!==null&&un(v),u.callbackPriority=2,u.callbackNode=null,2}function t3(u,h){if(oi!==0&&oi!==5)return u.callbackNode=null,u.callbackPriority=0,null;var m=u.callbackNode;if(c1()&&u.callbackNode!==m)return null;var v=Bn;return v=st(u,u===br?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),v===0?null:(VL(u,v,h),e3(u,kt()),u.callbackNode!=null&&u.callbackNode===m?t3.bind(null,u):null)}function n3(u,h){if(c1())return null;VL(u,h,!0)}function vee(){Aee(function(){(rr&6)!==0?zt(sn,yee):JL()})}function Gk(){return uh===0&&(uh=Fr()),uh}function r3(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Ya(""+u)}function o3(u,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,u.id&&m.setAttribute("form",u.id),h.parentNode.insertBefore(m,h),u=new FormData(u),m.parentNode.removeChild(m),u}function bee(u,h,m,v,x){if(h==="submit"&&m&&m.stateNode===x){var A=r3((x[wt]||null).action),K=v.submitter;K&&(h=(h=K[wt]||null)?r3(h.formAction):K.getAttribute("formAction"),h!==null&&(A=h,K=null));var Z=new qu("action","action",null,v,x);u.push({event:Z,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(uh!==0){var ue=K?o3(x,K):new FormData(x);dk(m,{pending:!0,data:ue,method:x.method,action:A},null,ue)}}else typeof A=="function"&&(Z.preventDefault(),ue=K?o3(x,K):new FormData(x),dk(m,{pending:!0,data:ue,method:x.method,action:A},A,ue))},currentTarget:x}]})}}for(var qk=0;qk<ot.length;qk++){var Kk=ot[qk],wee=Kk.toLowerCase(),Cee=Kk[0].toUpperCase()+Kk.slice(1);Ke(wee,"on"+Cee)}Ke(Ae,"onAnimationEnd"),Ke(Ne,"onAnimationIteration"),Ke(Oe,"onAnimationStart"),Ke("dblclick","onDoubleClick"),Ke("focusin","onFocus"),Ke("focusout","onBlur"),Ke(Ve,"onTransitionRun"),Ke(We,"onTransitionStart"),Ke(rt,"onTransitionCancel"),Ke(qe,"onTransitionEnd"),Ms("onMouseEnter",["mouseout","mouseover"]),Ms("onMouseLeave",["mouseout","mouseover"]),Ms("onPointerEnter",["pointerout","pointerover"]),Ms("onPointerLeave",["pointerout","pointerover"]),ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ny="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),See=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ny));function i3(u,h){h=(h&4)!==0;for(var m=0;m<u.length;m++){var v=u[m],x=v.event;v=v.listeners;e:{var A=void 0;if(h)for(var K=v.length-1;0<=K;K--){var Z=v[K],ue=Z.instance,Te=Z.currentTarget;if(Z=Z.listener,ue!==A&&x.isPropagationStopped())break e;A=Z,x.currentTarget=Te;try{A(x)}catch(je){Z0(je)}x.currentTarget=null,A=ue}else for(K=0;K<v.length;K++){if(Z=v[K],ue=Z.instance,Te=Z.currentTarget,Z=Z.listener,ue!==A&&x.isPropagationStopped())break e;A=Z,x.currentTarget=Te;try{A(x)}catch(je){Z0(je)}x.currentTarget=null,A=ue}}}}function Sn(u,h){var m=h[Pl];m===void 0&&(m=h[Pl]=new Set);var v=u+"__bubble";m.has(v)||(s3(h,u,2,!1),m.add(v))}function Wk(u,h,m){var v=0;h&&(v|=4),s3(m,u,v,h)}var f1="_reactListening"+Math.random().toString(36).slice(2);function Yk(u){if(!u[f1]){u[f1]=!0,Uu.forEach(function(m){m!=="selectionchange"&&(See.has(m)||Wk(m,!1,u),Wk(m,!0,u))});var h=u.nodeType===9?u:u.ownerDocument;h===null||h[f1]||(h[f1]=!0,Wk("selectionchange",!1,h))}}function s3(u,h,m,v){switch(I3(h)){case 2:var x=Yee;break;case 8:x=Xee;break;default:x=cT}m=x.bind(null,h,m,u),x=void 0,!cs||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(x=!0),v?x!==void 0?u.addEventListener(h,m,{capture:!0,passive:x}):u.addEventListener(h,m,!0):x!==void 0?u.addEventListener(h,m,{passive:x}):u.addEventListener(h,m,!1)}function Xk(u,h,m,v,x){var A=v;if((h&1)===0&&(h&2)===0&&v!==null)e:for(;;){if(v===null)return;var K=v.tag;if(K===3||K===4){var Z=v.stateNode.containerInfo;if(Z===x)break;if(K===4)for(K=v.return;K!==null;){var ue=K.tag;if((ue===3||ue===4)&&K.stateNode.containerInfo===x)return;K=K.return}for(;Z!==null;){if(K=yi(Z),K===null)return;if(ue=K.tag,ue===5||ue===6||ue===26||ue===27){v=A=K;continue e}Z=Z.parentNode}}v=v.return}jl(function(){var Te=A,je=Gi(m),Fe=[];e:{var Re=Je.get(u);if(Re!==void 0){var Me=qu,Lt=u;switch(u){case"keypress":if(ds(m)===0)break e;case"keydown":case"keyup":Me=rl;break;case"focusin":Lt="focus",Me=Ja;break;case"focusout":Lt="blur",Me=Ja;break;case"beforeblur":case"afterblur":Me=Ja;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=wi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=xp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=Qu;break;case Ae:case Ne:case Oe:Me=jc;break;case qe:Me=Zu;break;case"scroll":case"scrollend":Me=Lc;break;case"wheel":Me=ol;break;case"copy":case"cut":case"paste":Me=el;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=Xu;break;case"toggle":case"beforetoggle":Me=Yf}var Mt=(h&4)!==0,ur=!Mt&&(u==="scroll"||u==="scrollend"),Ce=Mt?Re!==null?Re+"Capture":null:Re;Mt=[];for(var pe=Te,ke;pe!==null;){var $e=pe;if(ke=$e.stateNode,$e=$e.tag,$e!==5&&$e!==26&&$e!==27||ke===null||Ce===null||($e=Xa(pe,Ce),$e!=null&&Mt.push(Oy(pe,$e,ke))),ur)break;pe=pe.return}0<Mt.length&&(Re=new Me(Re,Lt,null,m,je),Fe.push({event:Re,listeners:Mt}))}}if((h&7)===0){e:{if(Re=u==="mouseover"||u==="pointerover",Me=u==="mouseout"||u==="pointerout",Re&&m!==Po&&(Lt=m.relatedTarget||m.fromElement)&&(yi(Lt)||Lt[Yt]))break e;if((Me||Re)&&(Re=je.window===je?je:(Re=je.ownerDocument)?Re.defaultView||Re.parentWindow:window,Me?(Lt=m.relatedTarget||m.toElement,Me=Te,Lt=Lt?yi(Lt):null,Lt!==null&&(ur=i(Lt),Mt=Lt.tag,Lt!==ur||Mt!==5&&Mt!==27&&Mt!==6)&&(Lt=null)):(Me=null,Lt=Te),Me!==Lt)){if(Mt=wi,$e="onMouseLeave",Ce="onMouseEnter",pe="mouse",(u==="pointerout"||u==="pointerover")&&(Mt=Xu,$e="onPointerLeave",Ce="onPointerEnter",pe="pointer"),ur=Me==null?Re:Hi(Me),ke=Lt==null?Re:Hi(Lt),Re=new Mt($e,pe+"leave",Me,m,je),Re.target=ur,Re.relatedTarget=ke,$e=null,yi(je)===Te&&(Mt=new Mt(Ce,pe+"enter",Lt,m,je),Mt.target=ke,Mt.relatedTarget=ur,$e=Mt),ur=$e,Me&&Lt)t:{for(Mt=Me,Ce=Lt,pe=0,ke=Mt;ke;ke=Wp(ke))pe++;for(ke=0,$e=Ce;$e;$e=Wp($e))ke++;for(;0<pe-ke;)Mt=Wp(Mt),pe--;for(;0<ke-pe;)Ce=Wp(Ce),ke--;for(;pe--;){if(Mt===Ce||Ce!==null&&Mt===Ce.alternate)break t;Mt=Wp(Mt),Ce=Wp(Ce)}Mt=null}else Mt=null;Me!==null&&a3(Fe,Re,Me,Mt,!1),Lt!==null&&ur!==null&&a3(Fe,ur,Lt,Mt,!0)}}e:{if(Re=Te?Hi(Te):window,Me=Re.nodeName&&Re.nodeName.toLowerCase(),Me==="select"||Me==="input"&&Re.type==="file")var ht=Qf;else if(Lr(Re))if(va)ht=td;else{ht=$c;var mn=M0}else Me=Re.nodeName,!Me||Me.toLowerCase()!=="input"||Re.type!=="checkbox"&&Re.type!=="radio"?Te&&zf(Te.elementType)&&(ht=Qf):ht=iy;if(ht&&(ht=ht(u,Te))){ga(Fe,ht,m,je);break e}mn&&mn(u,Re,Te),u==="focusout"&&Te&&Re.type==="number"&&Te.memoizedProps.value!=null&&Ns(Re,"number",Re.value)}switch(mn=Te?Hi(Te):window,u){case"focusin":(Lr(mn)||mn.contentEditable==="true")&&(le=mn,he=Te,me=null);break;case"focusout":me=he=le=null;break;case"mousedown":be=!0;break;case"contextmenu":case"mouseup":case"dragend":be=!1,de(Fe,m,je);break;case"selectionchange":if(oe)break;case"keydown":case"keyup":de(Fe,m,je)}var Ct;if(hs)e:{switch(u){case"compositionstart":var Nt="onCompositionStart";break e;case"compositionend":Nt="onCompositionEnd";break e;case"compositionupdate":Nt="onCompositionUpdate";break e}Nt=void 0}else wn?Pe(u,m)&&(Nt="onCompositionEnd"):u==="keydown"&&m.keyCode===229&&(Nt="onCompositionStart");Nt&&(G&&m.locale!=="ko"&&(wn||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&wn&&(Ct=Za()):(us=je,Qa="value"in us?us.value:us.textContent,wn=!0)),mn=h1(Te,Nt),0<mn.length&&(Nt=new Bc(Nt,u,null,m,je),Fe.push({event:Nt,listeners:mn}),Ct?Nt.data=Ct:(Ct=nt(m),Ct!==null&&(Nt.data=Ct)))),(Ct=P?Hr(u,m):kn(u,m))&&(Nt=h1(Te,"onBeforeInput"),0<Nt.length&&(mn=new Bc("onBeforeInput","beforeinput",null,m,je),Fe.push({event:mn,listeners:Nt}),mn.data=Ct)),bee(Fe,u,Te,m,je)}i3(Fe,h)})}function Oy(u,h,m){return{instance:u,listener:h,currentTarget:m}}function h1(u,h){for(var m=h+"Capture",v=[];u!==null;){var x=u,A=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||A===null||(x=Xa(u,m),x!=null&&v.unshift(Oy(u,x,A)),x=Xa(u,h),x!=null&&v.push(Oy(u,x,A))),u.tag===3)return v;u=u.return}return[]}function Wp(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function a3(u,h,m,v,x){for(var A=h._reactName,K=[];m!==null&&m!==v;){var Z=m,ue=Z.alternate,Te=Z.stateNode;if(Z=Z.tag,ue!==null&&ue===v)break;Z!==5&&Z!==26&&Z!==27||Te===null||(ue=Te,x?(Te=Xa(m,A),Te!=null&&K.unshift(Oy(m,Te,ue))):x||(Te=Xa(m,A),Te!=null&&K.push(Oy(m,Te,ue)))),m=m.return}K.length!==0&&u.push({event:h,listeners:K})}var _ee=/\r\n?/g,xee=/\u0000|\uFFFD/g;function l3(u){return(typeof u=="string"?u:""+u).replace(_ee,`
`).replace(xee,"")}function c3(u,h){return h=l3(h),l3(u)===h}function p1(){}function cr(u,h,m,v,x,A){switch(m){case"children":typeof v=="string"?h==="body"||h==="textarea"&&v===""||ls(u,v):(typeof v=="number"||typeof v=="bigint")&&h!=="body"&&ls(u,""+v);break;case"className":zi(u,"class",v);break;case"tabIndex":zi(u,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":zi(u,m,v);break;case"style":Uf(u,v,A);break;case"data":if(h!=="object"){zi(u,"data",v);break}case"src":case"href":if(v===""&&(h!=="a"||m!=="href")){u.removeAttribute(m);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){u.removeAttribute(m);break}v=Ya(""+v),u.setAttribute(m,v);break;case"action":case"formAction":if(typeof v=="function"){u.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(m==="formAction"?(h!=="input"&&cr(u,h,"name",x.name,x,null),cr(u,h,"formEncType",x.formEncType,x,null),cr(u,h,"formMethod",x.formMethod,x,null),cr(u,h,"formTarget",x.formTarget,x,null)):(cr(u,h,"encType",x.encType,x,null),cr(u,h,"method",x.method,x,null),cr(u,h,"target",x.target,x,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){u.removeAttribute(m);break}v=Ya(""+v),u.setAttribute(m,v);break;case"onClick":v!=null&&(u.onclick=p1);break;case"onScroll":v!=null&&Sn("scroll",u);break;case"onScrollEnd":v!=null&&Sn("scrollend",u);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(m=v.__html,m!=null){if(x.children!=null)throw Error(r(60));u.innerHTML=m}}break;case"multiple":u.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":u.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){u.removeAttribute("xlink:href");break}m=Ya(""+v),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(m,""+v):u.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(m,""):u.removeAttribute(m);break;case"capture":case"download":v===!0?u.setAttribute(m,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?u.setAttribute(m,v):u.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?u.setAttribute(m,v):u.removeAttribute(m);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?u.removeAttribute(m):u.setAttribute(m,v);break;case"popover":Sn("beforetoggle",u),Sn("toggle",u),Ui(u,"popover",v);break;case"xlinkActuate":Zr(u,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Zr(u,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Zr(u,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Zr(u,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Zr(u,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Zr(u,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Zr(u,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Zr(u,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Zr(u,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Ui(u,"is",v);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=ti.get(m)||m,Ui(u,m,v))}}function Qk(u,h,m,v,x,A){switch(m){case"style":Uf(u,v,A);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(m=v.__html,m!=null){if(x.children!=null)throw Error(r(60));u.innerHTML=m}}break;case"children":typeof v=="string"?ls(u,v):(typeof v=="number"||typeof v=="bigint")&&ls(u,""+v);break;case"onScroll":v!=null&&Sn("scroll",u);break;case"onScrollEnd":v!=null&&Sn("scrollend",u);break;case"onClick":v!=null&&(u.onclick=p1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!is.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(x=m.endsWith("Capture"),h=m.slice(2,x?m.length-7:void 0),A=u[wt]||null,A=A!=null?A[m]:null,typeof A=="function"&&u.removeEventListener(h,A,x),typeof v=="function")){typeof A!="function"&&A!==null&&(m in u?u[m]=null:u.hasAttribute(m)&&u.removeAttribute(m)),u.addEventListener(h,v,x);break e}m in u?u[m]=v:v===!0?u.setAttribute(m,""):Ui(u,m,v)}}}function ii(u,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Sn("error",u),Sn("load",u);var v=!1,x=!1,A;for(A in m)if(m.hasOwnProperty(A)){var K=m[A];if(K!=null)switch(A){case"src":v=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:cr(u,h,A,K,m,null)}}x&&cr(u,h,"srcSet",m.srcSet,m,null),v&&cr(u,h,"src",m.src,m,null);return;case"input":Sn("invalid",u);var Z=A=K=x=null,ue=null,Te=null;for(v in m)if(m.hasOwnProperty(v)){var je=m[v];if(je!=null)switch(v){case"name":x=je;break;case"type":K=je;break;case"checked":ue=je;break;case"defaultChecked":Te=je;break;case"value":A=je;break;case"defaultValue":Z=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(r(137,h));break;default:cr(u,h,v,je,m,null)}}Dl(u,A,Z,ue,Te,K,x,!1),ca(u);return;case"select":Sn("invalid",u),v=K=A=null;for(x in m)if(m.hasOwnProperty(x)&&(Z=m[x],Z!=null))switch(x){case"value":A=Z;break;case"defaultValue":K=Z;break;case"multiple":v=Z;default:cr(u,h,x,Z,m,null)}h=A,m=K,u.multiple=!!v,h!=null?ua(u,!!v,h,!1):m!=null&&ua(u,!!v,m,!0);return;case"textarea":Sn("invalid",u),A=x=v=null;for(K in m)if(m.hasOwnProperty(K)&&(Z=m[K],Z!=null))switch(K){case"value":v=Z;break;case"defaultValue":x=Z;break;case"children":A=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(91));break;default:cr(u,h,K,Z,m,null)}Ll(u,v,x,A),ca(u);return;case"option":for(ue in m)if(m.hasOwnProperty(ue)&&(v=m[ue],v!=null))switch(ue){case"selected":u.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:cr(u,h,ue,v,m,null)}return;case"dialog":Sn("beforetoggle",u),Sn("toggle",u),Sn("cancel",u),Sn("close",u);break;case"iframe":case"object":Sn("load",u);break;case"video":case"audio":for(v=0;v<Ny.length;v++)Sn(Ny[v],u);break;case"image":Sn("error",u),Sn("load",u);break;case"details":Sn("toggle",u);break;case"embed":case"source":case"link":Sn("error",u),Sn("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Te in m)if(m.hasOwnProperty(Te)&&(v=m[Te],v!=null))switch(Te){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:cr(u,h,Te,v,m,null)}return;default:if(zf(h)){for(je in m)m.hasOwnProperty(je)&&(v=m[je],v!==void 0&&Qk(u,h,je,v,m,void 0));return}}for(Z in m)m.hasOwnProperty(Z)&&(v=m[Z],v!=null&&cr(u,h,Z,v,m,null))}function Eee(u,h,m,v){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,A=null,K=null,Z=null,ue=null,Te=null,je=null;for(Me in m){var Fe=m[Me];if(m.hasOwnProperty(Me)&&Fe!=null)switch(Me){case"checked":break;case"value":break;case"defaultValue":ue=Fe;default:v.hasOwnProperty(Me)||cr(u,h,Me,null,v,Fe)}}for(var Re in v){var Me=v[Re];if(Fe=m[Re],v.hasOwnProperty(Re)&&(Me!=null||Fe!=null))switch(Re){case"type":A=Me;break;case"name":x=Me;break;case"checked":Te=Me;break;case"defaultChecked":je=Me;break;case"value":K=Me;break;case"defaultValue":Z=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(r(137,h));break;default:Me!==Fe&&cr(u,h,Re,Me,v,Fe)}}Oo(u,K,Z,ue,Te,je,A,x);return;case"select":Me=K=Z=Re=null;for(A in m)if(ue=m[A],m.hasOwnProperty(A)&&ue!=null)switch(A){case"value":break;case"multiple":Me=ue;default:v.hasOwnProperty(A)||cr(u,h,A,null,v,ue)}for(x in v)if(A=v[x],ue=m[x],v.hasOwnProperty(x)&&(A!=null||ue!=null))switch(x){case"value":Re=A;break;case"defaultValue":Z=A;break;case"multiple":K=A;default:A!==ue&&cr(u,h,x,A,v,ue)}h=Z,m=K,v=Me,Re!=null?ua(u,!!m,Re,!1):!!v!=!!m&&(h!=null?ua(u,!!m,h,!0):ua(u,!!m,m?[]:"",!1));return;case"textarea":Me=Re=null;for(Z in m)if(x=m[Z],m.hasOwnProperty(Z)&&x!=null&&!v.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:cr(u,h,Z,null,v,x)}for(K in v)if(x=v[K],A=m[K],v.hasOwnProperty(K)&&(x!=null||A!=null))switch(K){case"value":Re=x;break;case"defaultValue":Me=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==A&&cr(u,h,K,x,v,A)}jn(u,Re,Me);return;case"option":for(var Lt in m)if(Re=m[Lt],m.hasOwnProperty(Lt)&&Re!=null&&!v.hasOwnProperty(Lt))switch(Lt){case"selected":u.selected=!1;break;default:cr(u,h,Lt,null,v,Re)}for(ue in v)if(Re=v[ue],Me=m[ue],v.hasOwnProperty(ue)&&Re!==Me&&(Re!=null||Me!=null))switch(ue){case"selected":u.selected=Re&&typeof Re!="function"&&typeof Re!="symbol";break;default:cr(u,h,ue,Re,v,Me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mt in m)Re=m[Mt],m.hasOwnProperty(Mt)&&Re!=null&&!v.hasOwnProperty(Mt)&&cr(u,h,Mt,null,v,Re);for(Te in v)if(Re=v[Te],Me=m[Te],v.hasOwnProperty(Te)&&Re!==Me&&(Re!=null||Me!=null))switch(Te){case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(r(137,h));break;default:cr(u,h,Te,Re,v,Me)}return;default:if(zf(h)){for(var ur in m)Re=m[ur],m.hasOwnProperty(ur)&&Re!==void 0&&!v.hasOwnProperty(ur)&&Qk(u,h,ur,void 0,v,Re);for(je in v)Re=v[je],Me=m[je],!v.hasOwnProperty(je)||Re===Me||Re===void 0&&Me===void 0||Qk(u,h,je,Re,v,Me);return}}for(var Ce in m)Re=m[Ce],m.hasOwnProperty(Ce)&&Re!=null&&!v.hasOwnProperty(Ce)&&cr(u,h,Ce,null,v,Re);for(Fe in v)Re=v[Fe],Me=m[Fe],!v.hasOwnProperty(Fe)||Re===Me||Re==null&&Me==null||cr(u,h,Fe,Re,v,Me)}var Zk=null,Jk=null;function m1(u){return u.nodeType===9?u:u.ownerDocument}function u3(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function d3(u,h){if(u===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&h==="foreignObject"?0:u}function eT(u,h){return u==="textarea"||u==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var tT=null;function kee(){var u=window.event;return u&&u.type==="popstate"?u===tT?!1:(tT=u,!0):(tT=null,!1)}var f3=typeof setTimeout=="function"?setTimeout:void 0,Tee=typeof clearTimeout=="function"?clearTimeout:void 0,h3=typeof Promise=="function"?Promise:void 0,Aee=typeof queueMicrotask=="function"?queueMicrotask:typeof h3<"u"?function(u){return h3.resolve(null).then(u).catch(Ree)}:f3;function Ree(u){setTimeout(function(){throw u})}function yd(u){return u==="head"}function p3(u,h){var m=h,v=0,x=0;do{var A=m.nextSibling;if(u.removeChild(m),A&&A.nodeType===8)if(m=A.data,m==="/$"){if(0<v&&8>v){m=v;var K=u.ownerDocument;if(m&1&&Py(K.documentElement),m&2&&Py(K.body),m&4)for(m=K.head,Py(m),K=m.firstChild;K;){var Z=K.nextSibling,ue=K.nodeName;K[Oc]||ue==="SCRIPT"||ue==="STYLE"||ue==="LINK"&&K.rel.toLowerCase()==="stylesheet"||m.removeChild(K),K=Z}}if(x===0){u.removeChild(A),Hy(h);return}x--}else m==="$"||m==="$?"||m==="$!"?x++:v=m.charCodeAt(0)-48;else v=0;m=A}while(m);Hy(h)}function nT(u){var h=u.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":nT(m),Zo(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}u.removeChild(m)}}function Iee(u,h,m,v){for(;u.nodeType===1;){var x=m;if(u.nodeName.toLowerCase()!==h.toLowerCase()){if(!v&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(v){if(!u[Oc])switch(h){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(A=u.getAttribute("rel"),A==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(A!==x.rel||u.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||u.getAttribute("title")!==(x.title==null?null:x.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(A=u.getAttribute("src"),(A!==(x.src==null?null:x.src)||u.getAttribute("type")!==(x.type==null?null:x.type)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&A&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(h==="input"&&u.type==="hidden"){var A=x.name==null?null:""+x.name;if(x.type==="hidden"&&u.getAttribute("name")===A)return u}else return u;if(u=al(u.nextSibling),u===null)break}return null}function Mee(u,h,m){if(h==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=al(u.nextSibling),u===null))return null;return u}function rT(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function Nee(u,h){var m=u.ownerDocument;if(u.data!=="$?"||m.readyState==="complete")h();else{var v=function(){h(),m.removeEventListener("DOMContentLoaded",v)};m.addEventListener("DOMContentLoaded",v),u._reactRetry=v}}function al(u){for(;u!=null;u=u.nextSibling){var h=u.nodeType;if(h===1||h===3)break;if(h===8){if(h=u.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return u}var oT=null;function m3(u){u=u.previousSibling;for(var h=0;u;){if(u.nodeType===8){var m=u.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return u;h--}else m==="/$"&&h++}u=u.previousSibling}return null}function g3(u,h,m){switch(h=m1(m),u){case"html":if(u=h.documentElement,!u)throw Error(r(452));return u;case"head":if(u=h.head,!u)throw Error(r(453));return u;case"body":if(u=h.body,!u)throw Error(r(454));return u;default:throw Error(r(451))}}function Py(u){for(var h=u.attributes;h.length;)u.removeAttributeNode(h[0]);Zo(u)}var xa=new Map,y3=new Set;function g1(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Jc=U.d;U.d={f:Oee,r:Pee,D:Dee,C:Lee,L:Vee,m:jee,X:$ee,S:Bee,M:Fee};function Oee(){var u=Jc.f(),h=a1();return u||h}function Pee(u){var h=_o(u);h!==null&&h.tag===5&&h.type==="form"?V4(h):Jc.r(u)}var Yp=typeof document>"u"?null:document;function v3(u,h,m){var v=Yp;if(v&&typeof h=="string"&&h){var x=Mr(h);x='link[rel="'+u+'"][href="'+x+'"]',typeof m=="string"&&(x+='[crossorigin="'+m+'"]'),y3.has(x)||(y3.add(x),u={rel:u,crossOrigin:m,href:h},v.querySelector(x)===null&&(h=v.createElement("link"),ii(h,"link",u),Xn(h),v.head.appendChild(h)))}}function Dee(u){Jc.D(u),v3("dns-prefetch",u,null)}function Lee(u,h){Jc.C(u,h),v3("preconnect",u,h)}function Vee(u,h,m){Jc.L(u,h,m);var v=Yp;if(v&&u&&h){var x='link[rel="preload"][as="'+Mr(h)+'"]';h==="image"&&m&&m.imageSrcSet?(x+='[imagesrcset="'+Mr(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(x+='[imagesizes="'+Mr(m.imageSizes)+'"]')):x+='[href="'+Mr(u)+'"]';var A=x;switch(h){case"style":A=Xp(u);break;case"script":A=Qp(u)}xa.has(A)||(u=d({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:u,as:h},m),xa.set(A,u),v.querySelector(x)!==null||h==="style"&&v.querySelector(Dy(A))||h==="script"&&v.querySelector(Ly(A))||(h=v.createElement("link"),ii(h,"link",u),Xn(h),v.head.appendChild(h)))}}function jee(u,h){Jc.m(u,h);var m=Yp;if(m&&u){var v=h&&typeof h.as=="string"?h.as:"script",x='link[rel="modulepreload"][as="'+Mr(v)+'"][href="'+Mr(u)+'"]',A=x;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Qp(u)}if(!xa.has(A)&&(u=d({rel:"modulepreload",href:u},h),xa.set(A,u),m.querySelector(x)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Ly(A)))return}v=m.createElement("link"),ii(v,"link",u),Xn(v),m.head.appendChild(v)}}}function Bee(u,h,m){Jc.S(u,h,m);var v=Yp;if(v&&u){var x=Jo(v).hoistableStyles,A=Xp(u);h=h||"default";var K=x.get(A);if(!K){var Z={loading:0,preload:null};if(K=v.querySelector(Dy(A)))Z.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":h},m),(m=xa.get(A))&&iT(u,m);var ue=K=v.createElement("link");Xn(ue),ii(ue,"link",u),ue._p=new Promise(function(Te,je){ue.onload=Te,ue.onerror=je}),ue.addEventListener("load",function(){Z.loading|=1}),ue.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,y1(K,h,v)}K={type:"stylesheet",instance:K,count:1,state:Z},x.set(A,K)}}}function $ee(u,h){Jc.X(u,h);var m=Yp;if(m&&u){var v=Jo(m).hoistableScripts,x=Qp(u),A=v.get(x);A||(A=m.querySelector(Ly(x)),A||(u=d({src:u,async:!0},h),(h=xa.get(x))&&sT(u,h),A=m.createElement("script"),Xn(A),ii(A,"link",u),m.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(x,A))}}function Fee(u,h){Jc.M(u,h);var m=Yp;if(m&&u){var v=Jo(m).hoistableScripts,x=Qp(u),A=v.get(x);A||(A=m.querySelector(Ly(x)),A||(u=d({src:u,async:!0,type:"module"},h),(h=xa.get(x))&&sT(u,h),A=m.createElement("script"),Xn(A),ii(A,"link",u),m.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},v.set(x,A))}}function b3(u,h,m,v){var x=(x=ye.current)?g1(x):null;if(!x)throw Error(r(446));switch(u){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=Xp(m.href),m=Jo(x).hoistableStyles,v=m.get(h),v||(v={type:"style",instance:null,count:0,state:null},m.set(h,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){u=Xp(m.href);var A=Jo(x).hoistableStyles,K=A.get(u);if(K||(x=x.ownerDocument||x,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(u,K),(A=x.querySelector(Dy(u)))&&!A._p&&(K.instance=A,K.state.loading=5),xa.has(u)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},xa.set(u,m),A||Hee(x,u,m,K.state))),h&&v===null)throw Error(r(528,""));return K}if(h&&v!==null)throw Error(r(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Qp(m),m=Jo(x).hoistableScripts,v=m.get(h),v||(v={type:"script",instance:null,count:0,state:null},m.set(h,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,u))}}function Xp(u){return'href="'+Mr(u)+'"'}function Dy(u){return'link[rel="stylesheet"]['+u+"]"}function w3(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function Hee(u,h,m,v){u.querySelector('link[rel="preload"][as="style"]['+h+"]")?v.loading=1:(h=u.createElement("link"),v.preload=h,h.addEventListener("load",function(){return v.loading|=1}),h.addEventListener("error",function(){return v.loading|=2}),ii(h,"link",m),Xn(h),u.head.appendChild(h))}function Qp(u){return'[src="'+Mr(u)+'"]'}function Ly(u){return"script[async]"+u}function C3(u,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var v=u.querySelector('style[data-href~="'+Mr(m.href)+'"]');if(v)return h.instance=v,Xn(v),v;var x=d({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return v=(u.ownerDocument||u).createElement("style"),Xn(v),ii(v,"style",x),y1(v,m.precedence,u),h.instance=v;case"stylesheet":x=Xp(m.href);var A=u.querySelector(Dy(x));if(A)return h.state.loading|=4,h.instance=A,Xn(A),A;v=w3(m),(x=xa.get(x))&&iT(v,x),A=(u.ownerDocument||u).createElement("link"),Xn(A);var K=A;return K._p=new Promise(function(Z,ue){K.onload=Z,K.onerror=ue}),ii(A,"link",v),h.state.loading|=4,y1(A,m.precedence,u),h.instance=A;case"script":return A=Qp(m.src),(x=u.querySelector(Ly(A)))?(h.instance=x,Xn(x),x):(v=m,(x=xa.get(A))&&(v=d({},m),sT(v,x)),u=u.ownerDocument||u,x=u.createElement("script"),Xn(x),ii(x,"link",v),u.head.appendChild(x),h.instance=x);case"void":return null;default:throw Error(r(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(v=h.instance,h.state.loading|=4,y1(v,m.precedence,u));return h.instance}function y1(u,h,m){for(var v=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=v.length?v[v.length-1]:null,A=x,K=0;K<v.length;K++){var Z=v[K];if(Z.dataset.precedence===h)A=Z;else if(A!==x)break}A?A.parentNode.insertBefore(u,A.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(u,h.firstChild))}function iT(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.title==null&&(u.title=h.title)}function sT(u,h){u.crossOrigin==null&&(u.crossOrigin=h.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=h.referrerPolicy),u.integrity==null&&(u.integrity=h.integrity)}var v1=null;function S3(u,h,m){if(v1===null){var v=new Map,x=v1=new Map;x.set(m,v)}else x=v1,v=x.get(m),v||(v=new Map,x.set(m,v));if(v.has(u))return v;for(v.set(u,null),m=m.getElementsByTagName(u),x=0;x<m.length;x++){var A=m[x];if(!(A[Oc]||A[tr]||u==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var K=A.getAttribute(h)||"";K=u+K;var Z=v.get(K);Z?Z.push(A):v.set(K,[A])}}return v}function _3(u,h,m){u=u.ownerDocument||u,u.head.insertBefore(m,h==="title"?u.querySelector("head > title"):null)}function Uee(u,h,m){if(m===1||h.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return u=h.disabled,typeof h.precedence=="string"&&u==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function x3(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var Vy=null;function zee(){}function Gee(u,h,m){if(Vy===null)throw Error(r(475));var v=Vy;if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var x=Xp(m.href),A=u.querySelector(Dy(x));if(A){u=A._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(v.count++,v=b1.bind(v),u.then(v,v)),h.state.loading|=4,h.instance=A,Xn(A);return}A=u.ownerDocument||u,m=w3(m),(x=xa.get(x))&&iT(m,x),A=A.createElement("link"),Xn(A);var K=A;K._p=new Promise(function(Z,ue){K.onload=Z,K.onerror=ue}),ii(A,"link",m),h.instance=A}v.stylesheets===null&&(v.stylesheets=new Map),v.stylesheets.set(h,u),(u=h.state.preload)&&(h.state.loading&3)===0&&(v.count++,h=b1.bind(v),u.addEventListener("load",h),u.addEventListener("error",h))}}function qee(){if(Vy===null)throw Error(r(475));var u=Vy;return u.stylesheets&&u.count===0&&aT(u,u.stylesheets),0<u.count?function(h){var m=setTimeout(function(){if(u.stylesheets&&aT(u,u.stylesheets),u.unsuspend){var v=u.unsuspend;u.unsuspend=null,v()}},6e4);return u.unsuspend=h,function(){u.unsuspend=null,clearTimeout(m)}}:null}function b1(){if(this.count--,this.count===0){if(this.stylesheets)aT(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var w1=null;function aT(u,h){u.stylesheets=null,u.unsuspend!==null&&(u.count++,w1=new Map,h.forEach(Kee,u),w1=null,b1.call(u))}function Kee(u,h){if(!(h.state.loading&4)){var m=w1.get(u);if(m)var v=m.get(null);else{m=new Map,w1.set(u,m);for(var x=u.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<x.length;A++){var K=x[A];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(m.set(K.dataset.precedence,K),v=K)}v&&m.set(null,v)}x=h.instance,K=x.getAttribute("data-precedence"),A=m.get(K)||v,A===v&&m.set(null,x),m.set(K,x),this.count++,v=b1.bind(this),x.addEventListener("load",v),x.addEventListener("error",v),A?A.parentNode.insertBefore(x,A.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(x,u.firstChild)),h.state.loading|=4}}var jy={$$typeof:N,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function Wee(u,h,m,v,x,A,K,Z){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qo(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qo(0),this.hiddenUpdates=Qo(null),this.identifierPrefix=v,this.onUncaughtError=x,this.onCaughtError=A,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function E3(u,h,m,v,x,A,K,Z,ue,Te,je,Fe){return u=new Wee(u,h,m,K,Z,ue,Te,Fe),h=1,A===!0&&(h|=24),A=Ls(3,null,null,h),u.current=A,A.stateNode=u,h=HE(),h.refCount++,u.pooledCache=h,h.refCount++,A.memoizedState={element:v,isDehydrated:m,cache:h},qE(A),u}function k3(u){return u?(u=Hl,u):Hl}function T3(u,h,m,v,x,A){x=k3(x),v.context===null?v.context=x:v.pendingContext=x,v=od(h),v.payload={element:m},A=A===void 0?null:A,A!==null&&(v.callback=A),m=id(u,v,h),m!==null&&(Fs(m,u,h),py(m,u,h))}function A3(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<h?m:h}}function lT(u,h){A3(u,h),(u=u.alternate)&&A3(u,h)}function R3(u){if(u.tag===13){var h=il(u,67108864);h!==null&&Fs(h,u,67108864),lT(u,67108864)}}var C1=!0;function Yee(u,h,m,v){var x=V.T;V.T=null;var A=U.p;try{U.p=2,cT(u,h,m,v)}finally{U.p=A,V.T=x}}function Xee(u,h,m,v){var x=V.T;V.T=null;var A=U.p;try{U.p=8,cT(u,h,m,v)}finally{U.p=A,V.T=x}}function cT(u,h,m,v){if(C1){var x=uT(v);if(x===null)Xk(u,h,v,S1,m),M3(u,v);else if(Zee(x,u,h,m,v))v.stopPropagation();else if(M3(u,v),h&4&&-1<Qee.indexOf(u)){for(;x!==null;){var A=_o(x);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var K=qn(A.pendingLanes);if(K!==0){var Z=A;for(Z.pendingLanes|=2,Z.entangledLanes|=2;K;){var ue=1<<31-Ln(K);Z.entanglements[1]|=ue,K&=~ue}Kl(A),(rr&6)===0&&(i1=kt()+500,My(0))}}break;case 13:Z=il(A,2),Z!==null&&Fs(Z,A,2),a1(),lT(A,2)}if(A=uT(v),A===null&&Xk(u,h,v,S1,m),A===x)break;x=A}x!==null&&v.stopPropagation()}else Xk(u,h,v,null,m)}}function uT(u){return u=Gi(u),dT(u)}var S1=null;function dT(u){if(S1=null,u=yi(u),u!==null){var h=i(u);if(h===null)u=null;else{var m=h.tag;if(m===13){if(u=s(h),u!==null)return u;u=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;u=null}else h!==u&&(u=null)}}return S1=u,null}function I3(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hn()){case sn:return 2;case Ft:return 8;case Wt:case En:return 32;case Jt:return 268435456;default:return 32}default:return 32}}var fT=!1,vd=null,bd=null,wd=null,By=new Map,$y=new Map,Cd=[],Qee="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function M3(u,h){switch(u){case"focusin":case"focusout":vd=null;break;case"dragenter":case"dragleave":bd=null;break;case"mouseover":case"mouseout":wd=null;break;case"pointerover":case"pointerout":By.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":$y.delete(h.pointerId)}}function Fy(u,h,m,v,x,A){return u===null||u.nativeEvent!==A?(u={blockedOn:h,domEventName:m,eventSystemFlags:v,nativeEvent:A,targetContainers:[x]},h!==null&&(h=_o(h),h!==null&&R3(h)),u):(u.eventSystemFlags|=v,h=u.targetContainers,x!==null&&h.indexOf(x)===-1&&h.push(x),u)}function Zee(u,h,m,v,x){switch(h){case"focusin":return vd=Fy(vd,u,h,m,v,x),!0;case"dragenter":return bd=Fy(bd,u,h,m,v,x),!0;case"mouseover":return wd=Fy(wd,u,h,m,v,x),!0;case"pointerover":var A=x.pointerId;return By.set(A,Fy(By.get(A)||null,u,h,m,v,x)),!0;case"gotpointercapture":return A=x.pointerId,$y.set(A,Fy($y.get(A)||null,u,h,m,v,x)),!0}return!1}function N3(u){var h=yi(u.target);if(h!==null){var m=i(h);if(m!==null){if(h=m.tag,h===13){if(h=s(m),h!==null){u.blockedOn=h,er(u.priority,function(){if(m.tag===13){var v=$s();v=Wn(v);var x=il(m,v);x!==null&&Fs(x,m,v),lT(m,v)}});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){u.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}u.blockedOn=null}function _1(u){if(u.blockedOn!==null)return!1;for(var h=u.targetContainers;0<h.length;){var m=uT(u.nativeEvent);if(m===null){m=u.nativeEvent;var v=new m.constructor(m.type,m);Po=v,m.target.dispatchEvent(v),Po=null}else return h=_o(m),h!==null&&R3(h),u.blockedOn=m,!1;h.shift()}return!0}function O3(u,h,m){_1(u)&&m.delete(h)}function Jee(){fT=!1,vd!==null&&_1(vd)&&(vd=null),bd!==null&&_1(bd)&&(bd=null),wd!==null&&_1(wd)&&(wd=null),By.forEach(O3),$y.forEach(O3)}function x1(u,h){u.blockedOn===h&&(u.blockedOn=null,fT||(fT=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Jee)))}var E1=null;function P3(u){E1!==u&&(E1=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){E1===u&&(E1=null);for(var h=0;h<u.length;h+=3){var m=u[h],v=u[h+1],x=u[h+2];if(typeof v!="function"){if(dT(v||m)===null)continue;break}var A=_o(m);A!==null&&(u.splice(h,3),h-=3,dk(A,{pending:!0,data:x,method:m.method,action:v},v,x))}}))}function Hy(u){function h(ue){return x1(ue,u)}vd!==null&&x1(vd,u),bd!==null&&x1(bd,u),wd!==null&&x1(wd,u),By.forEach(h),$y.forEach(h);for(var m=0;m<Cd.length;m++){var v=Cd[m];v.blockedOn===u&&(v.blockedOn=null)}for(;0<Cd.length&&(m=Cd[0],m.blockedOn===null);)N3(m),m.blockedOn===null&&Cd.shift();if(m=(u.ownerDocument||u).$$reactFormReplay,m!=null)for(v=0;v<m.length;v+=3){var x=m[v],A=m[v+1],K=x[wt]||null;if(typeof A=="function")K||P3(m);else if(K){var Z=null;if(A&&A.hasAttribute("formAction")){if(x=A,K=A[wt]||null)Z=K.formAction;else if(dT(x)!==null)continue}else Z=K.action;typeof Z=="function"?m[v+1]=Z:(m.splice(v,3),v-=3),P3(m)}}}function hT(u){this._internalRoot=u}k1.prototype.render=hT.prototype.render=function(u){var h=this._internalRoot;if(h===null)throw Error(r(409));var m=h.current,v=$s();T3(m,v,u,h,null,null)},k1.prototype.unmount=hT.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var h=u.containerInfo;T3(u.current,2,null,u,null,null),a1(),h[Yt]=null}};function k1(u){this._internalRoot=u}k1.prototype.unstable_scheduleHydration=function(u){if(u){var h=sr();u={blockedOn:null,target:u,priority:h};for(var m=0;m<Cd.length&&h!==0&&h<Cd[m].priority;m++);Cd.splice(m,0,u),m===0&&N3(u)}};var D3=e.version;if(D3!=="19.1.0")throw Error(r(527,D3,"19.1.0"));U.findDOMNode=function(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(r(188)):(u=Object.keys(u).join(","),Error(r(268,u)));return u=l(h),u=u!==null?c(u):null,u=u===null?null:u.stateNode,u};var ete={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var T1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!T1.isDisabled&&T1.supportsFiber)try{Gt=T1.inject(ete),qt=T1}catch{}}return zy.createRoot=function(u,h){if(!o(u))throw Error(r(299));var m=!1,v="",x=Q4,A=Z4,K=J4,Z=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(x=h.onUncaughtError),h.onCaughtError!==void 0&&(A=h.onCaughtError),h.onRecoverableError!==void 0&&(K=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(Z=h.unstable_transitionCallbacks)),h=E3(u,1,!1,null,null,m,v,x,A,K,Z,null),u[Yt]=h.current,Yk(u),new hT(h)},zy.hydrateRoot=function(u,h,m){if(!o(u))throw Error(r(299));var v=!1,x="",A=Q4,K=Z4,Z=J4,ue=null,Te=null;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(x=m.identifierPrefix),m.onUncaughtError!==void 0&&(A=m.onUncaughtError),m.onCaughtError!==void 0&&(K=m.onCaughtError),m.onRecoverableError!==void 0&&(Z=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(ue=m.unstable_transitionCallbacks),m.formState!==void 0&&(Te=m.formState)),h=E3(u,1,!0,h,m??null,v,x,A,K,Z,ue,Te),h.context=k3(null),m=h.current,v=$s(),v=Wn(v),x=od(v),x.callback=null,id(m,x,v),m=v,h.current.lanes=m,Ir(h,m),Kl(h),u[Yt]=h.current,Yk(u),new k1(h)},zy.version="19.1.0",zy}var G3;function dte(){if(G3)return gT.exports;G3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),gT.exports=ute(),gT.exports}var Z9=dte();function q3(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Au(...t){return e=>{let n=!1;const r=t.map(o=>{const i=q3(o,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():q3(t[o],null)}}}}function vn(...t){return E.useCallback(Au(...t),t)}function sf(t){const e=fte(t),n=E.forwardRef((r,o)=>{const{children:i,...s}=r,a=E.Children.toArray(i),l=a.find(hte);if(l){const c=l.props.children,d=a.map(f=>f===l?E.Children.count(c)>1?E.Children.only(null):E.isValidElement(c)?c.props.children:null:f);return w.jsx(e,{...s,ref:o,children:E.isValidElement(c)?E.cloneElement(c,void 0,d):null})}return w.jsx(e,{...s,ref:o,children:i})});return n.displayName=`${t}.Slot`,n}var xM=sf("Slot");function fte(t){const e=E.forwardRef((n,r)=>{const{children:o,...i}=n;if(E.isValidElement(o)){const s=mte(o),a=pte(i,o.props);return o.type!==E.Fragment&&(a.ref=r?Au(r,s):s),E.cloneElement(o,a)}return E.Children.count(o)>1?E.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var J9=Symbol("radix.slottable");function e8(t){const e=({children:n})=>w.jsx(w.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=J9,e}function hte(t){return E.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===J9}function pte(t,e){const n={...e};for(const r in e){const o=t[r],i=e[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const l=i(...a);return o(...a),l}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...t,...n}}function mte(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function t8(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=t8(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Rl(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=t8(t))&&(r&&(r+=" "),r+=e);return r}const K3=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,W3=Rl,n8=(t,e)=>n=>{var r;if(e?.variants==null)return W3(t,n?.class,n?.className);const{variants:o,defaultVariants:i}=e,s=Object.keys(o).map(c=>{const d=n?.[c],f=i?.[c];if(d===null)return null;const p=K3(d)||K3(f);return o[c][p]}),a=n&&Object.entries(n).reduce((c,d)=>{let[f,p]=d;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:f,className:p,...g}=d;return Object.entries(g).every(y=>{let[b,_]=y;return Array.isArray(_)?_.includes({...i,...a}[b]):{...i,...a}[b]===_})?[...c,f,p]:c},[]);return W3(t,s,l,n?.class,n?.className)};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gte=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yte=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Y3=t=>{const e=yte(t);return e.charAt(0).toUpperCase()+e.slice(1)},r8=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),vte=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bte={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wte=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:s,...a},l)=>E.createElement("svg",{ref:l,...bte,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:r8("lucide",o),...!i&&!vte(a)&&{"aria-hidden":"true"},...a},[...s.map(([c,d])=>E.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=(t,e)=>{const n=E.forwardRef(({className:r,...o},i)=>E.createElement(wte,{ref:i,iconNode:e,className:r8(`lucide-${gte(Y3(t))}`,`lucide-${t}`,r),...o}));return n.displayName=Y3(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cte=[["path",{d:"M15 5H9",key:"1tp3ed"}],["path",{d:"M15 9v3h4l-7 7-7-7h4V9z",key:"ncdc4b"}]],Ste=So("arrow-big-down-dash",Cte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _te=[["path",{d:"M6 9h6V5l7 7-7 7v-4H6V9z",key:"7fvt9c"}]],xte=So("arrow-big-right",_te);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ete=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],cC=So("check",Ete);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kte=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],o8=So("chevron-down",kte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tte=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ate=So("chevron-left",Tte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rte=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ite=So("chevron-right",Rte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mte=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Nte=So("chevron-up",Mte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ote=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],M2=So("chevrons-up-down",Ote);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pte=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Dte=So("circle",Pte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lte=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Vte=So("database",Lte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jte=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],Bte=So("file-plus",jte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $te=[["path",{d:"M2 11.5V5a2 2 0 0 1 2-2h3.9c.7 0 1.3.3 1.7.9l.8 1.2c.4.6 1 .9 1.7.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-9.5",key:"a8xqs0"}],["path",{d:"M11.378 13.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1saktj"}]],Fte=So("folder-pen",$te);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hte=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Ute=So("grip-vertical",Hte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zte=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Gte=So("loader-circle",zte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qte=[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]],Kte=So("package-open",qte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wte=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],Yte=So("panel-left",Wte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xte=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Qte=So("pen",Xte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zte=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],i8=So("search",Zte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jte=[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]],ene=So("user-round",Jte);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tne=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],s8=So("x",tne),wT=768;function nne(){const[t,e]=E.useState(void 0);return E.useEffect(()=>{const n=window.matchMedia(`(max-width: ${wT-1}px)`),r=()=>{e(window.innerWidth<wT)};return n.addEventListener("change",r),e(window.innerWidth<wT),()=>n.removeEventListener("change",r)},[]),!!t}const EM="-",rne=t=>{const e=ine(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const a=s.split(EM);return a[0]===""&&a.length!==1&&a.shift(),a8(a,e)||one(s)},getConflictingClassGroupIds:(s,a)=>{const l=n[s]||[];return a&&r[s]?[...l,...r[s]]:l}}},a8=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),o=r?a8(t.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const i=t.join(EM);return e.validators.find(({validator:s})=>s(i))?.classGroupId},X3=/^\[(.+)\]$/,one=t=>{if(X3.test(t)){const e=X3.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},ine=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const o in n)N2(n[o],r,o,e);return r},N2=(t,e,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const i=o===""?e:Q3(e,o);i.classGroupId=n;return}if(typeof o=="function"){if(sne(o)){N2(o(r),e,n,r);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([i,s])=>{N2(s,Q3(e,i),n,r)})})},Q3=(t,e)=>{let n=t;return e.split(EM).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},sne=t=>t.isThemeGetter,ane=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const o=(i,s)=>{n.set(i,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return o(i,s),s},set(i,s){n.has(i)?n.set(i,s):o(i,s)}}},O2="!",P2=":",lne=P2.length,cne=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=o=>{const i=[];let s=0,a=0,l=0,c;for(let y=0;y<o.length;y++){let b=o[y];if(s===0&&a===0){if(b===P2){i.push(o.slice(l,y)),l=y+lne;continue}if(b==="/"){c=y;continue}}b==="["?s++:b==="]"?s--:b==="("?a++:b===")"&&a--}const d=i.length===0?o:o.substring(l),f=une(d),p=f!==d,g=c&&c>l?c-l:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:f,maybePostfixModifierPosition:g}};if(e){const o=e+P2,i=r;r=s=>s.startsWith(o)?i(s.substring(o.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const o=r;r=i=>n({className:i,parseClassName:o})}return r},une=t=>t.endsWith(O2)?t.substring(0,t.length-1):t.startsWith(O2)?t.substring(1):t,dne=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const o=[];let i=[];return r.forEach(s=>{s[0]==="["||e[s]?(o.push(...i.sort(),s),i=[]):i.push(s)}),o.push(...i.sort()),o}},fne=t=>({cache:ane(t.cacheSize),parseClassName:cne(t),sortModifiers:dne(t),...rne(t)}),hne=/\s+/,pne=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o,sortModifiers:i}=e,s=[],a=t.trim().split(hne);let l="";for(let c=a.length-1;c>=0;c-=1){const d=a[c],{isExternal:f,modifiers:p,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:b}=n(d);if(f){l=d+(l.length>0?" "+l:l);continue}let _=!!b,k=r(_?y.substring(0,b):y);if(!k){if(!_){l=d+(l.length>0?" "+l:l);continue}if(k=r(y),!k){l=d+(l.length>0?" "+l:l);continue}_=!1}const M=i(p).join(":"),N=g?M+O2:M,j=N+k;if(s.includes(j))continue;s.push(j);const B=o(k,_);for(let F=0;F<B.length;++F){const D=B[F];s.push(N+D)}l=d+(l.length>0?" "+l:l)}return l};function mne(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=l8(e))&&(r&&(r+=" "),r+=n);return r}const l8=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=l8(t[r]))&&(n&&(n+=" "),n+=e);return n};function gne(t,...e){let n,r,o,i=s;function s(l){const c=e.reduce((d,f)=>f(d),t());return n=fne(c),r=n.cache.get,o=n.cache.set,i=a,a(l)}function a(l){const c=r(l);if(c)return c;const d=pne(l,n);return o(l,d),d}return function(){return i(mne.apply(null,arguments))}}const To=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},c8=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,u8=/^\((?:(\w[\w-]*):)?(.+)\)$/i,yne=/^\d+\/\d+$/,vne=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,bne=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,wne=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Cne=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Sne=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zp=t=>yne.test(t),fn=t=>!!t&&!Number.isNaN(Number(t)),_d=t=>!!t&&Number.isInteger(Number(t)),CT=t=>t.endsWith("%")&&fn(t.slice(0,-1)),eu=t=>vne.test(t),_ne=()=>!0,xne=t=>bne.test(t)&&!wne.test(t),d8=()=>!1,Ene=t=>Cne.test(t),kne=t=>Sne.test(t),Tne=t=>!pt(t)&&!mt(t),Ane=t=>Cg(t,p8,d8),pt=t=>c8.test(t),dh=t=>Cg(t,m8,xne),ST=t=>Cg(t,One,fn),Z3=t=>Cg(t,f8,d8),Rne=t=>Cg(t,h8,kne),A1=t=>Cg(t,g8,Ene),mt=t=>u8.test(t),Gy=t=>Sg(t,m8),Ine=t=>Sg(t,Pne),J3=t=>Sg(t,f8),Mne=t=>Sg(t,p8),Nne=t=>Sg(t,h8),R1=t=>Sg(t,g8,!0),Cg=(t,e,n)=>{const r=c8.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Sg=(t,e,n=!1)=>{const r=u8.exec(t);return r?r[1]?e(r[1]):n:!1},f8=t=>t==="position"||t==="percentage",h8=t=>t==="image"||t==="url",p8=t=>t==="length"||t==="size"||t==="bg-size",m8=t=>t==="length",One=t=>t==="number",Pne=t=>t==="family-name",g8=t=>t==="shadow",Dne=()=>{const t=To("color"),e=To("font"),n=To("text"),r=To("font-weight"),o=To("tracking"),i=To("leading"),s=To("breakpoint"),a=To("container"),l=To("spacing"),c=To("radius"),d=To("shadow"),f=To("inset-shadow"),p=To("text-shadow"),g=To("drop-shadow"),y=To("blur"),b=To("perspective"),_=To("aspect"),k=To("ease"),M=To("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],B=()=>[...j(),mt,pt],F=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],R=()=>[mt,pt,l],I=()=>[Zp,"full","auto",...R()],L=()=>[_d,"none","subgrid",mt,pt],z=()=>["auto",{span:["full",_d,mt,pt]},_d,mt,pt],q=()=>[_d,"auto",mt,pt],H=()=>["auto","min","max","fr",mt,pt],ne=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],re=()=>["start","end","center","stretch","center-safe","end-safe"],V=()=>["auto",...R()],U=()=>[Zp,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],Q=()=>[t,mt,pt],J=()=>[...j(),J3,Z3,{position:[mt,pt]}],Y=()=>["no-repeat",{repeat:["","x","y","space","round"]}],se=()=>["auto","cover","contain",Mne,Ane,{size:[mt,pt]}],te=()=>[CT,Gy,dh],ie=()=>["","none","full",c,mt,pt],ce=()=>["",fn,Gy,dh],ae=()=>["solid","dashed","dotted","double"],ye=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],we=()=>[fn,CT,J3,Z3],Be=()=>["","none",y,mt,pt],Ie=()=>["none",fn,mt,pt],Ge=()=>["none",fn,mt,pt],it=()=>[fn,mt,pt],Xe=()=>[Zp,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[eu],breakpoint:[eu],color:[_ne],container:[eu],"drop-shadow":[eu],ease:["in","out","in-out"],font:[Tne],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[eu],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[eu],shadow:[eu],spacing:["px",fn],text:[eu],"text-shadow":[eu],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Zp,pt,mt,_]}],container:["container"],columns:[{columns:[fn,pt,mt,a]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:B()}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[_d,"auto",mt,pt]}],basis:[{basis:[Zp,"full","auto",a,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[fn,Zp,"auto","initial","none",pt]}],grow:[{grow:["",fn,mt,pt]}],shrink:[{shrink:["",fn,mt,pt]}],order:[{order:[_d,"first","last","none",mt,pt]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:z()}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:z()}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":H()}],"auto-rows":[{"auto-rows":H()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...ne(),"normal"]}],"justify-items":[{"justify-items":[...re(),"normal"]}],"justify-self":[{"justify-self":["auto",...re()]}],"align-content":[{content:["normal",...ne()]}],"align-items":[{items:[...re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...re(),{baseline:["","last"]}]}],"place-content":[{"place-content":ne()}],"place-items":[{"place-items":[...re(),"baseline"]}],"place-self":[{"place-self":["auto",...re()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:V()}],mx:[{mx:V()}],my:[{my:V()}],ms:[{ms:V()}],me:[{me:V()}],mt:[{mt:V()}],mr:[{mr:V()}],mb:[{mb:V()}],ml:[{ml:V()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:U()}],w:[{w:[a,"screen",...U()]}],"min-w":[{"min-w":[a,"screen","none",...U()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[s]},...U()]}],h:[{h:["screen","lh",...U()]}],"min-h":[{"min-h":["screen","lh","none",...U()]}],"max-h":[{"max-h":["screen","lh",...U()]}],"font-size":[{text:["base",n,Gy,dh]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,mt,ST]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",CT,pt]}],"font-family":[{font:[Ine,pt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,mt,pt]}],"line-clamp":[{"line-clamp":[fn,"none",mt,ST]}],leading:[{leading:[i,...R()]}],"list-image":[{"list-image":["none",mt,pt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",mt,pt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Q()}],"text-color":[{text:Q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ae(),"wavy"]}],"text-decoration-thickness":[{decoration:[fn,"from-font","auto",mt,dh]}],"text-decoration-color":[{decoration:Q()}],"underline-offset":[{"underline-offset":[fn,"auto",mt,pt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",mt,pt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",mt,pt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:Y()}],"bg-size":[{bg:se()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},_d,mt,pt],radial:["",mt,pt],conic:[_d,mt,pt]},Nne,Rne]}],"bg-color":[{bg:Q()}],"gradient-from-pos":[{from:te()}],"gradient-via-pos":[{via:te()}],"gradient-to-pos":[{to:te()}],"gradient-from":[{from:Q()}],"gradient-via":[{via:Q()}],"gradient-to":[{to:Q()}],rounded:[{rounded:ie()}],"rounded-s":[{"rounded-s":ie()}],"rounded-e":[{"rounded-e":ie()}],"rounded-t":[{"rounded-t":ie()}],"rounded-r":[{"rounded-r":ie()}],"rounded-b":[{"rounded-b":ie()}],"rounded-l":[{"rounded-l":ie()}],"rounded-ss":[{"rounded-ss":ie()}],"rounded-se":[{"rounded-se":ie()}],"rounded-ee":[{"rounded-ee":ie()}],"rounded-es":[{"rounded-es":ie()}],"rounded-tl":[{"rounded-tl":ie()}],"rounded-tr":[{"rounded-tr":ie()}],"rounded-br":[{"rounded-br":ie()}],"rounded-bl":[{"rounded-bl":ie()}],"border-w":[{border:ce()}],"border-w-x":[{"border-x":ce()}],"border-w-y":[{"border-y":ce()}],"border-w-s":[{"border-s":ce()}],"border-w-e":[{"border-e":ce()}],"border-w-t":[{"border-t":ce()}],"border-w-r":[{"border-r":ce()}],"border-w-b":[{"border-b":ce()}],"border-w-l":[{"border-l":ce()}],"divide-x":[{"divide-x":ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ae(),"hidden","none"]}],"divide-style":[{divide:[...ae(),"hidden","none"]}],"border-color":[{border:Q()}],"border-color-x":[{"border-x":Q()}],"border-color-y":[{"border-y":Q()}],"border-color-s":[{"border-s":Q()}],"border-color-e":[{"border-e":Q()}],"border-color-t":[{"border-t":Q()}],"border-color-r":[{"border-r":Q()}],"border-color-b":[{"border-b":Q()}],"border-color-l":[{"border-l":Q()}],"divide-color":[{divide:Q()}],"outline-style":[{outline:[...ae(),"none","hidden"]}],"outline-offset":[{"outline-offset":[fn,mt,pt]}],"outline-w":[{outline:["",fn,Gy,dh]}],"outline-color":[{outline:Q()}],shadow:[{shadow:["","none",d,R1,A1]}],"shadow-color":[{shadow:Q()}],"inset-shadow":[{"inset-shadow":["none",f,R1,A1]}],"inset-shadow-color":[{"inset-shadow":Q()}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Q()}],"ring-offset-w":[{"ring-offset":[fn,dh]}],"ring-offset-color":[{"ring-offset":Q()}],"inset-ring-w":[{"inset-ring":ce()}],"inset-ring-color":[{"inset-ring":Q()}],"text-shadow":[{"text-shadow":["none",p,R1,A1]}],"text-shadow-color":[{"text-shadow":Q()}],opacity:[{opacity:[fn,mt,pt]}],"mix-blend":[{"mix-blend":[...ye(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ye()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[fn]}],"mask-image-linear-from-pos":[{"mask-linear-from":we()}],"mask-image-linear-to-pos":[{"mask-linear-to":we()}],"mask-image-linear-from-color":[{"mask-linear-from":Q()}],"mask-image-linear-to-color":[{"mask-linear-to":Q()}],"mask-image-t-from-pos":[{"mask-t-from":we()}],"mask-image-t-to-pos":[{"mask-t-to":we()}],"mask-image-t-from-color":[{"mask-t-from":Q()}],"mask-image-t-to-color":[{"mask-t-to":Q()}],"mask-image-r-from-pos":[{"mask-r-from":we()}],"mask-image-r-to-pos":[{"mask-r-to":we()}],"mask-image-r-from-color":[{"mask-r-from":Q()}],"mask-image-r-to-color":[{"mask-r-to":Q()}],"mask-image-b-from-pos":[{"mask-b-from":we()}],"mask-image-b-to-pos":[{"mask-b-to":we()}],"mask-image-b-from-color":[{"mask-b-from":Q()}],"mask-image-b-to-color":[{"mask-b-to":Q()}],"mask-image-l-from-pos":[{"mask-l-from":we()}],"mask-image-l-to-pos":[{"mask-l-to":we()}],"mask-image-l-from-color":[{"mask-l-from":Q()}],"mask-image-l-to-color":[{"mask-l-to":Q()}],"mask-image-x-from-pos":[{"mask-x-from":we()}],"mask-image-x-to-pos":[{"mask-x-to":we()}],"mask-image-x-from-color":[{"mask-x-from":Q()}],"mask-image-x-to-color":[{"mask-x-to":Q()}],"mask-image-y-from-pos":[{"mask-y-from":we()}],"mask-image-y-to-pos":[{"mask-y-to":we()}],"mask-image-y-from-color":[{"mask-y-from":Q()}],"mask-image-y-to-color":[{"mask-y-to":Q()}],"mask-image-radial":[{"mask-radial":[mt,pt]}],"mask-image-radial-from-pos":[{"mask-radial-from":we()}],"mask-image-radial-to-pos":[{"mask-radial-to":we()}],"mask-image-radial-from-color":[{"mask-radial-from":Q()}],"mask-image-radial-to-color":[{"mask-radial-to":Q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[fn]}],"mask-image-conic-from-pos":[{"mask-conic-from":we()}],"mask-image-conic-to-pos":[{"mask-conic-to":we()}],"mask-image-conic-from-color":[{"mask-conic-from":Q()}],"mask-image-conic-to-color":[{"mask-conic-to":Q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:Y()}],"mask-size":[{mask:se()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",mt,pt]}],filter:[{filter:["","none",mt,pt]}],blur:[{blur:Be()}],brightness:[{brightness:[fn,mt,pt]}],contrast:[{contrast:[fn,mt,pt]}],"drop-shadow":[{"drop-shadow":["","none",g,R1,A1]}],"drop-shadow-color":[{"drop-shadow":Q()}],grayscale:[{grayscale:["",fn,mt,pt]}],"hue-rotate":[{"hue-rotate":[fn,mt,pt]}],invert:[{invert:["",fn,mt,pt]}],saturate:[{saturate:[fn,mt,pt]}],sepia:[{sepia:["",fn,mt,pt]}],"backdrop-filter":[{"backdrop-filter":["","none",mt,pt]}],"backdrop-blur":[{"backdrop-blur":Be()}],"backdrop-brightness":[{"backdrop-brightness":[fn,mt,pt]}],"backdrop-contrast":[{"backdrop-contrast":[fn,mt,pt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",fn,mt,pt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[fn,mt,pt]}],"backdrop-invert":[{"backdrop-invert":["",fn,mt,pt]}],"backdrop-opacity":[{"backdrop-opacity":[fn,mt,pt]}],"backdrop-saturate":[{"backdrop-saturate":[fn,mt,pt]}],"backdrop-sepia":[{"backdrop-sepia":["",fn,mt,pt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",mt,pt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[fn,"initial",mt,pt]}],ease:[{ease:["linear","initial",k,mt,pt]}],delay:[{delay:[fn,mt,pt]}],animate:[{animate:["none",M,mt,pt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,mt,pt]}],"perspective-origin":[{"perspective-origin":B()}],rotate:[{rotate:Ie()}],"rotate-x":[{"rotate-x":Ie()}],"rotate-y":[{"rotate-y":Ie()}],"rotate-z":[{"rotate-z":Ie()}],scale:[{scale:Ge()}],"scale-x":[{"scale-x":Ge()}],"scale-y":[{"scale-y":Ge()}],"scale-z":[{"scale-z":Ge()}],"scale-3d":["scale-3d"],skew:[{skew:it()}],"skew-x":[{"skew-x":it()}],"skew-y":[{"skew-y":it()}],transform:[{transform:[mt,pt,"","none","gpu","cpu"]}],"transform-origin":[{origin:B()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Xe()}],"translate-x":[{"translate-x":Xe()}],"translate-y":[{"translate-y":Xe()}],"translate-z":[{"translate-z":Xe()}],"translate-none":["translate-none"],accent:[{accent:Q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",mt,pt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",mt,pt]}],fill:[{fill:["none",...Q()]}],"stroke-w":[{stroke:[fn,Gy,dh,ST]}],stroke:[{stroke:["none",...Q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Lne=gne(Dne);function dt(...t){return Lne(Rl(t))}const x_=n8("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function ic({className:t,variant:e,size:n,asChild:r=!1,...o}){const i=r?xM:"button";return w.jsx(i,{"data-slot":"button",className:dt(x_({variant:e,size:n,className:t})),...o})}var Ts=Q9();const E_=CM(Ts);var Vne=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Rt=Vne.reduce((t,e)=>{const n=sf(`Primitive.${e}`),r=E.forwardRef((o,i)=>{const{asChild:s,...a}=o,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function y8(t,e){t&&Ts.flushSync(()=>t.dispatchEvent(e))}function at(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return e?.(o)}}function jne(t,e){const n=E.createContext(e),r=i=>{const{children:s,...a}=i,l=E.useMemo(()=>a,Object.values(a));return w.jsx(n.Provider,{value:l,children:s})};r.displayName=t+"Provider";function o(i){const s=E.useContext(n);if(s)return s;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,o]}function ra(t,e=[]){let n=[];function r(i,s){const a=E.createContext(s),l=n.length;n=[...n,s];const c=f=>{const{scope:p,children:g,...y}=f,b=p?.[t]?.[l]||a,_=E.useMemo(()=>y,Object.values(y));return w.jsx(b.Provider,{value:_,children:g})};c.displayName=i+"Provider";function d(f,p){const g=p?.[t]?.[l]||a,y=E.useContext(g);if(y)return y;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[c,d]}const o=()=>{const i=n.map(s=>E.createContext(s));return function(a){const l=a?.[t]||i;return E.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return o.scopeName=t,[r,Bne(o,...e)]}function Bne(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const s=r.reduce((a,{useScope:l,scopeName:c})=>{const f=l(i)[`__scope${c}`];return{...a,...f}},{});return E.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}var Vi=globalThis?.document?E.useLayoutEffect:()=>{},$ne=_M[" useId ".trim().toString()]||(()=>{}),Fne=0;function hi(t){const[e,n]=E.useState($ne());return Vi(()=>{n(r=>r??String(Fne++))},[t]),t||(e?`radix-${e}`:"")}var Hne=_M[" useInsertionEffect ".trim().toString()]||Vi;function Ru({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[o,i,s]=Une({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:o;{const d=E.useRef(t!==void 0);E.useEffect(()=>{const f=d.current;f!==a&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=E.useCallback(d=>{if(a){const f=zne(d)?d(t):d;f!==t&&s.current?.(f)}else i(d)},[a,t,i,s]);return[l,c]}function Une({defaultProp:t,onChange:e}){const[n,r]=E.useState(t),o=E.useRef(n),i=E.useRef(e);return Hne(()=>{i.current=e},[e]),E.useEffect(()=>{o.current!==n&&(i.current?.(n),o.current=n)},[n,o]),[n,r,i]}function zne(t){return typeof t=="function"}function gc(t){const e=E.useRef(t);return E.useEffect(()=>{e.current=t}),E.useMemo(()=>(...n)=>e.current?.(...n),[])}function Gne(t,e=globalThis?.document){const n=gc(t);E.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var qne="DismissableLayer",D2="dismissableLayer.update",Kne="dismissableLayer.pointerDownOutside",Wne="dismissableLayer.focusOutside",e5,v8=E.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_g=E.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:s,onDismiss:a,...l}=t,c=E.useContext(v8),[d,f]=E.useState(null),p=d?.ownerDocument??globalThis?.document,[,g]=E.useState({}),y=vn(e,D=>f(D)),b=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),k=b.indexOf(_),M=d?b.indexOf(d):-1,N=c.layersWithOutsidePointerEventsDisabled.size>0,j=M>=k,B=Qne(D=>{const R=D.target,I=[...c.branches].some(L=>L.contains(R));!j||I||(o?.(D),s?.(D),D.defaultPrevented||a?.())},p),F=Zne(D=>{const R=D.target;[...c.branches].some(L=>L.contains(R))||(i?.(D),s?.(D),D.defaultPrevented||a?.())},p);return Gne(D=>{M===c.layers.size-1&&(r?.(D),!D.defaultPrevented&&a&&(D.preventDefault(),a()))},p),E.useEffect(()=>{if(d)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(e5=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),t5(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=e5)}},[d,p,n,c]),E.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),t5())},[d,c]),E.useEffect(()=>{const D=()=>g({});return document.addEventListener(D2,D),()=>document.removeEventListener(D2,D)},[]),w.jsx(Rt.div,{...l,ref:y,style:{pointerEvents:N?j?"auto":"none":void 0,...t.style},onFocusCapture:at(t.onFocusCapture,F.onFocusCapture),onBlurCapture:at(t.onBlurCapture,F.onBlurCapture),onPointerDownCapture:at(t.onPointerDownCapture,B.onPointerDownCapture)})});_g.displayName=qne;var Yne="DismissableLayerBranch",Xne=E.forwardRef((t,e)=>{const n=E.useContext(v8),r=E.useRef(null),o=vn(e,r);return E.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),w.jsx(Rt.div,{...t,ref:o})});Xne.displayName=Yne;function Qne(t,e=globalThis?.document){const n=gc(t),r=E.useRef(!1),o=E.useRef(()=>{});return E.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){b8(Kne,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=l,e.addEventListener("click",o.current,{once:!0})):l()}else e.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",i),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Zne(t,e=globalThis?.document){const n=gc(t),r=E.useRef(!1);return E.useEffect(()=>{const o=i=>{i.target&&!r.current&&b8(Wne,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function t5(){const t=new CustomEvent(D2);document.dispatchEvent(t)}function b8(t,e,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?y8(o,i):o.dispatchEvent(i)}var _T="focusScope.autoFocusOnMount",xT="focusScope.autoFocusOnUnmount",n5={bubbles:!1,cancelable:!0},Jne="FocusScope",Nb=E.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=t,[a,l]=E.useState(null),c=gc(o),d=gc(i),f=E.useRef(null),p=vn(e,b=>l(b)),g=E.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;E.useEffect(()=>{if(r){let b=function(N){if(g.paused||!a)return;const j=N.target;a.contains(j)?f.current=j:Td(f.current,{select:!0})},_=function(N){if(g.paused||!a)return;const j=N.relatedTarget;j!==null&&(a.contains(j)||Td(f.current,{select:!0}))},k=function(N){if(document.activeElement===document.body)for(const B of N)B.removedNodes.length>0&&Td(a)};document.addEventListener("focusin",b),document.addEventListener("focusout",_);const M=new MutationObserver(k);return a&&M.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",_),M.disconnect()}}},[r,a,g.paused]),E.useEffect(()=>{if(a){o5.add(g);const b=document.activeElement;if(!a.contains(b)){const k=new CustomEvent(_T,n5);a.addEventListener(_T,c),a.dispatchEvent(k),k.defaultPrevented||(ere(ire(w8(a)),{select:!0}),document.activeElement===b&&Td(a))}return()=>{a.removeEventListener(_T,c),setTimeout(()=>{const k=new CustomEvent(xT,n5);a.addEventListener(xT,d),a.dispatchEvent(k),k.defaultPrevented||Td(b??document.body,{select:!0}),a.removeEventListener(xT,d),o5.remove(g)},0)}}},[a,c,d,g]);const y=E.useCallback(b=>{if(!n&&!r||g.paused)return;const _=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,k=document.activeElement;if(_&&k){const M=b.currentTarget,[N,j]=tre(M);N&&j?!b.shiftKey&&k===j?(b.preventDefault(),n&&Td(N,{select:!0})):b.shiftKey&&k===N&&(b.preventDefault(),n&&Td(j,{select:!0})):k===M&&b.preventDefault()}},[n,r,g.paused]);return w.jsx(Rt.div,{tabIndex:-1,...s,ref:p,onKeyDown:y})});Nb.displayName=Jne;function ere(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Td(r,{select:e}),document.activeElement!==n)return}function tre(t){const e=w8(t),n=r5(e,t),r=r5(e.reverse(),t);return[n,r]}function w8(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function r5(t,e){for(const n of t)if(!nre(n,{upTo:e}))return n}function nre(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function rre(t){return t instanceof HTMLInputElement&&"select"in t}function Td(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&rre(t)&&e&&t.select()}}var o5=ore();function ore(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=i5(t,e),t.unshift(e)},remove(e){t=i5(t,e),t[0]?.resume()}}}function i5(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function ire(t){return t.filter(e=>e.tagName!=="A")}var sre="Portal",xg=E.forwardRef((t,e)=>{const{container:n,...r}=t,[o,i]=E.useState(!1);Vi(()=>i(!0),[]);const s=n||o&&globalThis?.document?.body;return s?E_.createPortal(w.jsx(Rt.div,{...r,ref:e}),s):null});xg.displayName=sre;function are(t,e){return E.useReducer((n,r)=>e[n][r]??n,t)}var oa=t=>{const{present:e,children:n}=t,r=lre(e),o=typeof n=="function"?n({present:r.isPresent}):E.Children.only(n),i=vn(r.ref,cre(o));return typeof n=="function"||r.isPresent?E.cloneElement(o,{ref:i}):null};oa.displayName="Presence";function lre(t){const[e,n]=E.useState(),r=E.useRef(null),o=E.useRef(t),i=E.useRef("none"),s=t?"mounted":"unmounted",[a,l]=are(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return E.useEffect(()=>{const c=I1(r.current);i.current=a==="mounted"?c:"none"},[a]),Vi(()=>{const c=r.current,d=o.current;if(d!==t){const p=i.current,g=I1(c);t?l("MOUNT"):g==="none"||c?.display==="none"?l("UNMOUNT"):l(d&&p!==g?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,l]),Vi(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,f=g=>{const b=I1(r.current).includes(g.animationName);if(g.target===e&&b&&(l("ANIMATION_END"),!o.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},p=g=>{g.target===e&&(i.current=I1(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:E.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function I1(t){return t?.animationName||"none"}function cre(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ET=0;function k_(){E.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??s5()),document.body.insertAdjacentElement("beforeend",t[1]??s5()),ET++,()=>{ET===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ET--}},[])}function s5(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var nc=function(){return nc=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},nc.apply(this,arguments)};function C8(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function ure(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Tw="right-scroll-bar-position",Aw="width-before-scroll-bar",dre="with-scroll-bars-hidden",fre="--removed-body-scroll-bar-size";function kT(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function hre(t,e){var n=E.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=e,n.facade}var pre=typeof window<"u"?E.useLayoutEffect:E.useEffect,a5=new WeakMap;function mre(t,e){var n=hre(null,function(r){return t.forEach(function(o){return kT(o,r)})});return pre(function(){var r=a5.get(n);if(r){var o=new Set(r),i=new Set(t),s=n.current;o.forEach(function(a){i.has(a)||kT(a,null)}),i.forEach(function(a){o.has(a)||kT(a,s)})}a5.set(n,t)},[t]),n}function gre(t){return t}function yre(t,e){e===void 0&&(e=gre);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var s=e(i,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(i),s=n}var l=function(){var d=s;s=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(d){s.push(d),c()},filter:function(d){return s=s.filter(d),n}}}};return o}function vre(t){t===void 0&&(t={});var e=yre(null);return e.options=nc({async:!0,ssr:!1},t),e}var S8=function(t){var e=t.sideCar,n=C8(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return E.createElement(r,nc({},n))};S8.isSideCarExport=!0;function bre(t,e){return t.useMedium(e),S8}var _8=vre(),TT=function(){},T_=E.forwardRef(function(t,e){var n=E.useRef(null),r=E.useState({onScrollCapture:TT,onWheelCapture:TT,onTouchMoveCapture:TT}),o=r[0],i=r[1],s=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,f=t.shards,p=t.sideCar,g=t.noRelative,y=t.noIsolation,b=t.inert,_=t.allowPinchZoom,k=t.as,M=k===void 0?"div":k,N=t.gapMode,j=C8(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),B=p,F=mre([n,e]),D=nc(nc({},j),o);return E.createElement(E.Fragment,null,d&&E.createElement(B,{sideCar:_8,removeScrollBar:c,shards:f,noRelative:g,noIsolation:y,inert:b,setCallbacks:i,allowPinchZoom:!!_,lockRef:n,gapMode:N}),s?E.cloneElement(E.Children.only(a),nc(nc({},D),{ref:F})):E.createElement(M,nc({},D,{className:l,ref:F}),a))});T_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};T_.classNames={fullWidth:Aw,zeroRight:Tw};var wre=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Cre(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=wre();return e&&t.setAttribute("nonce",e),t}function Sre(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function _re(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var xre=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Cre())&&(Sre(e,n),_re(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Ere=function(){var t=xre();return function(e,n){E.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},x8=function(){var t=Ere(),e=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return e},kre={left:0,top:0,right:0,gap:0},AT=function(t){return parseInt(t||"",10)||0},Tre=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[AT(n),AT(r),AT(o)]},Are=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return kre;var e=Tre(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Rre=x8(),Am="data-scroll-locked",Ire=function(t,e,n,r){var o=t.left,i=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(dre,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Am,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Tw,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Aw,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Tw," .").concat(Tw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Aw," .").concat(Aw,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Am,`] {
    `).concat(fre,": ").concat(a,`px;
  }
`)},l5=function(){var t=parseInt(document.body.getAttribute(Am)||"0",10);return isFinite(t)?t:0},Mre=function(){E.useEffect(function(){return document.body.setAttribute(Am,(l5()+1).toString()),function(){var t=l5()-1;t<=0?document.body.removeAttribute(Am):document.body.setAttribute(Am,t.toString())}},[])},Nre=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;Mre();var i=E.useMemo(function(){return Are(o)},[o]);return E.createElement(Rre,{styles:Ire(i,!e,o,n?"":"!important")})},L2=!1;if(typeof window<"u")try{var M1=Object.defineProperty({},"passive",{get:function(){return L2=!0,!0}});window.addEventListener("test",M1,M1),window.removeEventListener("test",M1,M1)}catch{L2=!1}var Jp=L2?{passive:!1}:!1,Ore=function(t){return t.tagName==="TEXTAREA"},E8=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Ore(t)&&n[e]==="visible")},Pre=function(t){return E8(t,"overflowY")},Dre=function(t){return E8(t,"overflowX")},c5=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=k8(t,r);if(o){var i=T8(t,r),s=i[1],a=i[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Lre=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Vre=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},k8=function(t,e){return t==="v"?Pre(e):Dre(e)},T8=function(t,e){return t==="v"?Lre(e):Vre(e)},jre=function(t,e){return t==="h"&&e==="rtl"?-1:1},Bre=function(t,e,n,r,o){var i=jre(t,window.getComputedStyle(e).direction),s=i*r,a=n.target,l=e.contains(a),c=!1,d=s>0,f=0,p=0;do{if(!a)break;var g=T8(t,a),y=g[0],b=g[1],_=g[2],k=b-_-i*y;(y||k)&&k8(t,a)&&(f+=k,p+=y);var M=a.parentNode;a=M&&M.nodeType===Node.DOCUMENT_FRAGMENT_NODE?M.host:M}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&Math.abs(f)<1||!d&&Math.abs(p)<1)&&(c=!0),c},N1=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},u5=function(t){return[t.deltaX,t.deltaY]},d5=function(t){return t&&"current"in t?t.current:t},$re=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Fre=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Hre=0,em=[];function Ure(t){var e=E.useRef([]),n=E.useRef([0,0]),r=E.useRef(),o=E.useState(Hre++)[0],i=E.useState(x8)[0],s=E.useRef(t);E.useEffect(function(){s.current=t},[t]),E.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var b=ure([t.lockRef.current],(t.shards||[]).map(d5),!0).filter(Boolean);return b.forEach(function(_){return _.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),b.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=E.useCallback(function(b,_){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!s.current.allowPinchZoom;var k=N1(b),M=n.current,N="deltaX"in b?b.deltaX:M[0]-k[0],j="deltaY"in b?b.deltaY:M[1]-k[1],B,F=b.target,D=Math.abs(N)>Math.abs(j)?"h":"v";if("touches"in b&&D==="h"&&F.type==="range")return!1;var R=c5(D,F);if(!R)return!0;if(R?B=D:(B=D==="v"?"h":"v",R=c5(D,F)),!R)return!1;if(!r.current&&"changedTouches"in b&&(N||j)&&(r.current=B),!B)return!0;var I=r.current||B;return Bre(I,_,b,I==="h"?N:j)},[]),l=E.useCallback(function(b){var _=b;if(!(!em.length||em[em.length-1]!==i)){var k="deltaY"in _?u5(_):N1(_),M=e.current.filter(function(B){return B.name===_.type&&(B.target===_.target||_.target===B.shadowParent)&&$re(B.delta,k)})[0];if(M&&M.should){_.cancelable&&_.preventDefault();return}if(!M){var N=(s.current.shards||[]).map(d5).filter(Boolean).filter(function(B){return B.contains(_.target)}),j=N.length>0?a(_,N[0]):!s.current.noIsolation;j&&_.cancelable&&_.preventDefault()}}},[]),c=E.useCallback(function(b,_,k,M){var N={name:b,delta:_,target:k,should:M,shadowParent:zre(k)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(j){return j!==N})},1)},[]),d=E.useCallback(function(b){n.current=N1(b),r.current=void 0},[]),f=E.useCallback(function(b){c(b.type,u5(b),b.target,a(b,t.lockRef.current))},[]),p=E.useCallback(function(b){c(b.type,N1(b),b.target,a(b,t.lockRef.current))},[]);E.useEffect(function(){return em.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Jp),document.addEventListener("touchmove",l,Jp),document.addEventListener("touchstart",d,Jp),function(){em=em.filter(function(b){return b!==i}),document.removeEventListener("wheel",l,Jp),document.removeEventListener("touchmove",l,Jp),document.removeEventListener("touchstart",d,Jp)}},[]);var g=t.removeScrollBar,y=t.inert;return E.createElement(E.Fragment,null,y?E.createElement(i,{styles:Fre(o)}):null,g?E.createElement(Nre,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function zre(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Gre=bre(_8,Ure);var Ob=E.forwardRef(function(t,e){return E.createElement(T_,nc({},t,{ref:e,sideCar:Gre}))});Ob.classNames=T_.classNames;var qre=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},tm=new WeakMap,O1=new WeakMap,P1={},RT=0,A8=function(t){return t&&(t.host||A8(t.parentNode))},Kre=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=A8(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Wre=function(t,e,n,r){var o=Kre(e,Array.isArray(t)?t:[t]);P1[n]||(P1[n]=new WeakMap);var i=P1[n],s=[],a=new Set,l=new Set(o),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};o.forEach(c);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))d(p);else try{var g=p.getAttribute(r),y=g!==null&&g!=="false",b=(tm.get(p)||0)+1,_=(i.get(p)||0)+1;tm.set(p,b),i.set(p,_),s.push(p),b===1&&y&&O1.set(p,!0),_===1&&p.setAttribute(n,"true"),y||p.setAttribute(r,"true")}catch(k){console.error("aria-hidden: cannot operate on ",p,k)}})};return d(e),a.clear(),RT++,function(){s.forEach(function(f){var p=tm.get(f)-1,g=i.get(f)-1;tm.set(f,p),i.set(f,g),p||(O1.has(f)||f.removeAttribute(r),O1.delete(f)),g||f.removeAttribute(n)}),RT--,RT||(tm=new WeakMap,tm=new WeakMap,O1=new WeakMap,P1={})}},A_=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=qre(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),Wre(r,o,n,"aria-hidden")):function(){return null}},R_="Dialog",[R8,I8]=ra(R_),[Yre,Il]=R8(R_),M8=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:s=!0}=t,a=E.useRef(null),l=E.useRef(null),[c,d]=Ru({prop:r,defaultProp:o??!1,onChange:i,caller:R_});return w.jsx(Yre,{scope:e,triggerRef:a,contentRef:l,contentId:hi(),titleId:hi(),descriptionId:hi(),open:c,onOpenChange:d,onOpenToggle:E.useCallback(()=>d(f=>!f),[d]),modal:s,children:n})};M8.displayName=R_;var N8="DialogTrigger",O8=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Il(N8,n),i=vn(e,o.triggerRef);return w.jsx(Rt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":RM(o.open),...r,ref:i,onClick:at(t.onClick,o.onOpenToggle)})});O8.displayName=N8;var kM="DialogPortal",[Xre,P8]=R8(kM,{forceMount:void 0}),D8=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:o}=t,i=Il(kM,e);return w.jsx(Xre,{scope:e,forceMount:n,children:E.Children.map(r,s=>w.jsx(oa,{present:n||i.open,children:w.jsx(xg,{asChild:!0,container:o,children:s})}))})};D8.displayName=kM;var uC="DialogOverlay",L8=E.forwardRef((t,e)=>{const n=P8(uC,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,i=Il(uC,t.__scopeDialog);return i.modal?w.jsx(oa,{present:r||i.open,children:w.jsx(Zre,{...o,ref:e})}):null});L8.displayName=uC;var Qre=sf("DialogOverlay.RemoveScroll"),Zre=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Il(uC,n);return w.jsx(Ob,{as:Qre,allowPinchZoom:!0,shards:[o.contentRef],children:w.jsx(Rt.div,{"data-state":RM(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),$h="DialogContent",V8=E.forwardRef((t,e)=>{const n=P8($h,t.__scopeDialog),{forceMount:r=n.forceMount,...o}=t,i=Il($h,t.__scopeDialog);return w.jsx(oa,{present:r||i.open,children:i.modal?w.jsx(Jre,{...o,ref:e}):w.jsx(eoe,{...o,ref:e})})});V8.displayName=$h;var Jre=E.forwardRef((t,e)=>{const n=Il($h,t.__scopeDialog),r=E.useRef(null),o=vn(e,n.contentRef,r);return E.useEffect(()=>{const i=r.current;if(i)return A_(i)},[]),w.jsx(j8,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:at(t.onCloseAutoFocus,i=>{i.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:at(t.onPointerDownOutside,i=>{const s=i.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&i.preventDefault()}),onFocusOutside:at(t.onFocusOutside,i=>i.preventDefault())})}),eoe=E.forwardRef((t,e)=>{const n=Il($h,t.__scopeDialog),r=E.useRef(!1),o=E.useRef(!1);return w.jsx(j8,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const s=i.target;n.triggerRef.current?.contains(s)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),j8=E.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,...s}=t,a=Il($h,n),l=E.useRef(null),c=vn(e,l);return k_(),w.jsxs(w.Fragment,{children:[w.jsx(Nb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:w.jsx(_g,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":RM(a.open),...s,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),w.jsxs(w.Fragment,{children:[w.jsx(noe,{titleId:a.titleId}),w.jsx(ooe,{contentRef:l,descriptionId:a.descriptionId})]})]})}),TM="DialogTitle",AM=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Il(TM,n);return w.jsx(Rt.h2,{id:o.titleId,...r,ref:e})});AM.displayName=TM;var B8="DialogDescription",$8=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Il(B8,n);return w.jsx(Rt.p,{id:o.descriptionId,...r,ref:e})});$8.displayName=B8;var F8="DialogClose",H8=E.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,o=Il(F8,n);return w.jsx(Rt.button,{type:"button",...r,ref:e,onClick:at(t.onClick,()=>o.onOpenChange(!1))})});H8.displayName=F8;function RM(t){return t?"open":"closed"}var U8="DialogTitleWarning",[toe,z8]=jne(U8,{contentName:$h,titleName:TM,docsSlug:"dialog"}),noe=({titleId:t})=>{const e=z8(U8),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return E.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},roe="DialogDescriptionWarning",ooe=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${z8(roe).contentName}}.`;return E.useEffect(()=>{const o=t.current?.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},I_=M8,ioe=O8,M_=D8,N_=L8,O_=V8,IM=AM,MM=$8,Eg=H8;function dC({...t}){return w.jsx(I_,{"data-slot":"sheet",...t})}function G8({...t}){return w.jsx(Eg,{"data-slot":"sheet-close",...t})}function soe({...t}){return w.jsx(M_,{"data-slot":"sheet-portal",...t})}function aoe({className:t,...e}){return w.jsx(N_,{"data-slot":"sheet-overlay",className:dt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function fC({className:t,children:e,side:n="right",...r}){return w.jsxs(soe,{children:[w.jsx(aoe,{}),w.jsxs(O_,{"data-slot":"sheet-content",className:dt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...r,children:[e,w.jsxs(Eg,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[w.jsx(s8,{className:"size-4"}),w.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function loe({className:t,...e}){return w.jsx("div",{"data-slot":"sheet-header",className:dt("flex flex-col gap-1.5 p-4",t),...e})}function q8({className:t,...e}){return w.jsx("div",{"data-slot":"sheet-footer",className:dt("mt-auto flex flex-col gap-2 p-4",t),...e})}function coe({className:t,...e}){return w.jsx(IM,{"data-slot":"sheet-title",className:dt("text-foreground font-semibold",t),...e})}function uoe({className:t,...e}){return w.jsx(MM,{"data-slot":"sheet-description",className:dt("text-muted-foreground text-sm",t),...e})}const doe=["top","right","bottom","left"],Cl=Math.min,Mi=Math.max,hC=Math.round,D1=Math.floor,sc=t=>({x:t,y:t}),foe={left:"right",right:"left",bottom:"top",top:"bottom"},hoe={start:"end",end:"start"};function V2(t,e,n){return Mi(t,Cl(e,n))}function yc(t,e){return typeof t=="function"?t(e):t}function Sl(t){return t.split("-")[0]}function kg(t){return t.split("-")[1]}function NM(t){return t==="x"?"y":"x"}function OM(t){return t==="y"?"height":"width"}const poe=new Set(["top","bottom"]);function hl(t){return poe.has(Sl(t))?"y":"x"}function PM(t){return NM(hl(t))}function moe(t,e,n){n===void 0&&(n=!1);const r=kg(t),o=PM(t),i=OM(o);let s=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(s=pC(s)),[s,pC(s)]}function goe(t){const e=pC(t);return[j2(t),e,j2(e)]}function j2(t){return t.replace(/start|end/g,e=>hoe[e])}const f5=["left","right"],h5=["right","left"],yoe=["top","bottom"],voe=["bottom","top"];function boe(t,e,n){switch(t){case"top":case"bottom":return n?e?h5:f5:e?f5:h5;case"left":case"right":return e?yoe:voe;default:return[]}}function woe(t,e,n,r){const o=kg(t);let i=boe(Sl(t),n==="start",r);return o&&(i=i.map(s=>s+"-"+o),e&&(i=i.concat(i.map(j2)))),i}function pC(t){return t.replace(/left|right|bottom|top/g,e=>foe[e])}function Coe(t){return{top:0,right:0,bottom:0,left:0,...t}}function DM(t){return typeof t!="number"?Coe(t):{top:t,right:t,bottom:t,left:t}}function Wm(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}function p5(t,e,n){let{reference:r,floating:o}=t;const i=hl(e),s=PM(e),a=OM(s),l=Sl(e),c=i==="y",d=r.x+r.width/2-o.width/2,f=r.y+r.height/2-o.height/2,p=r[a]/2-o[a]/2;let g;switch(l){case"top":g={x:d,y:r.y-o.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-o.width,y:f};break;default:g={x:r.x,y:r.y}}switch(kg(e)){case"start":g[s]-=p*(n&&c?-1:1);break;case"end":g[s]+=p*(n&&c?-1:1);break}return g}const Soe=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=n,a=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:o}),{x:d,y:f}=p5(c,r,l),p=r,g={},y=0;for(let b=0;b<a.length;b++){const{name:_,fn:k}=a[b],{x:M,y:N,data:j,reset:B}=await k({x:d,y:f,initialPlacement:r,placement:p,strategy:o,middlewareData:g,rects:c,platform:s,elements:{reference:t,floating:e}});d=M??d,f=N??f,g={...g,[_]:{...g[_],...j}},B&&y<=50&&(y++,typeof B=="object"&&(B.placement&&(p=B.placement),B.rects&&(c=B.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:o}):B.rects),{x:d,y:f}=p5(c,p,l)),b=-1)}return{x:d,y:f,placement:p,strategy:o,middlewareData:g}};async function jv(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:i,rects:s,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=yc(e,t),y=DM(g),_=a[p?f==="floating"?"reference":"floating":f],k=Wm(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),M=f==="floating"?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),j=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},B=Wm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:M,offsetParent:N,strategy:l}):M);return{top:(k.top-B.top+y.top)/j.y,bottom:(B.bottom-k.bottom+y.bottom)/j.y,left:(k.left-B.left+y.left)/j.x,right:(B.right-k.right+y.right)/j.x}}const _oe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:i,platform:s,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=yc(t,e)||{};if(c==null)return{};const f=DM(d),p={x:n,y:r},g=PM(o),y=OM(g),b=await s.getDimensions(c),_=g==="y",k=_?"top":"left",M=_?"bottom":"right",N=_?"clientHeight":"clientWidth",j=i.reference[y]+i.reference[g]-p[g]-i.floating[y],B=p[g]-i.reference[g],F=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c));let D=F?F[N]:0;(!D||!await(s.isElement==null?void 0:s.isElement(F)))&&(D=a.floating[N]||i.floating[y]);const R=j/2-B/2,I=D/2-b[y]/2-1,L=Cl(f[k],I),z=Cl(f[M],I),q=L,H=D-b[y]-z,ne=D/2-b[y]/2+R,re=V2(q,ne,H),V=!l.arrow&&kg(o)!=null&&ne!==re&&i.reference[y]/2-(ne<q?L:z)-b[y]/2<0,U=V?ne<q?ne-q:ne-H:0;return{[g]:p[g]+U,data:{[g]:re,centerOffset:ne-re-U,...V&&{alignmentOffset:U}},reset:V}}}),xoe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:i,rects:s,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,..._}=yc(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const k=Sl(o),M=hl(a),N=Sl(a)===a,j=await(l.isRTL==null?void 0:l.isRTL(c.floating)),B=p||(N||!b?[pC(a)]:goe(a)),F=y!=="none";!p&&F&&B.push(...woe(a,b,y,j));const D=[a,...B],R=await jv(e,_),I=[];let L=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&I.push(R[k]),f){const ne=moe(o,s,j);I.push(R[ne[0]],R[ne[1]])}if(L=[...L,{placement:o,overflows:I}],!I.every(ne=>ne<=0)){var z,q;const ne=(((z=i.flip)==null?void 0:z.index)||0)+1,re=D[ne];if(re&&(!(f==="alignment"?M!==hl(re):!1)||L.every(Q=>Q.overflows[0]>0&&hl(Q.placement)===M)))return{data:{index:ne,overflows:L},reset:{placement:re}};let V=(q=L.filter(U=>U.overflows[0]<=0).sort((U,Q)=>U.overflows[1]-Q.overflows[1])[0])==null?void 0:q.placement;if(!V)switch(g){case"bestFit":{var H;const U=(H=L.filter(Q=>{if(F){const J=hl(Q.placement);return J===M||J==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter(J=>J>0).reduce((J,Y)=>J+Y,0)]).sort((Q,J)=>Q[1]-J[1])[0])==null?void 0:H[0];U&&(V=U);break}case"initialPlacement":V=a;break}if(o!==V)return{reset:{placement:V}}}return{}}}};function m5(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function g5(t){return doe.some(e=>t[e]>=0)}const Eoe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=yc(t,e);switch(r){case"referenceHidden":{const i=await jv(e,{...o,elementContext:"reference"}),s=m5(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:g5(s)}}}case"escaped":{const i=await jv(e,{...o,altBoundary:!0}),s=m5(i,n.floating);return{data:{escapedOffsets:s,escaped:g5(s)}}}default:return{}}}}};function K8(t){const e=Cl(...t.map(i=>i.left)),n=Cl(...t.map(i=>i.top)),r=Mi(...t.map(i=>i.right)),o=Mi(...t.map(i=>i.bottom));return{x:e,y:n,width:r-e,height:o-n}}function koe(t){const e=t.slice().sort((o,i)=>o.y-i.y),n=[];let r=null;for(let o=0;o<e.length;o++){const i=e[o];!r||i.y-r.y>r.height/2?n.push([i]):n[n.length-1].push(i),r=i}return n.map(o=>Wm(K8(o)))}const Toe=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:r,rects:o,platform:i,strategy:s}=e,{padding:a=2,x:l,y:c}=yc(t,e),d=Array.from(await(i.getClientRects==null?void 0:i.getClientRects(r.reference))||[]),f=koe(d),p=Wm(K8(d)),g=DM(a);function y(){if(f.length===2&&f[0].left>f[1].right&&l!=null&&c!=null)return f.find(_=>l>_.left-g.left&&l<_.right+g.right&&c>_.top-g.top&&c<_.bottom+g.bottom)||p;if(f.length>=2){if(hl(n)==="y"){const L=f[0],z=f[f.length-1],q=Sl(n)==="top",H=L.top,ne=z.bottom,re=q?L.left:z.left,V=q?L.right:z.right,U=V-re,Q=ne-H;return{top:H,bottom:ne,left:re,right:V,width:U,height:Q,x:re,y:H}}const _=Sl(n)==="left",k=Mi(...f.map(L=>L.right)),M=Cl(...f.map(L=>L.left)),N=f.filter(L=>_?L.left===M:L.right===k),j=N[0].top,B=N[N.length-1].bottom,F=M,D=k,R=D-F,I=B-j;return{top:j,bottom:B,left:F,right:D,width:R,height:I,x:F,y:j}}return p}const b=await i.getElementRects({reference:{getBoundingClientRect:y},floating:r.floating,strategy:s});return o.reference.x!==b.reference.x||o.reference.y!==b.reference.y||o.reference.width!==b.reference.width||o.reference.height!==b.reference.height?{reset:{rects:b}}:{}}}},W8=new Set(["left","top"]);async function Aoe(t,e){const{placement:n,platform:r,elements:o}=t,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),s=Sl(n),a=kg(n),l=hl(n)==="y",c=W8.has(s)?-1:1,d=i&&l?-1:1,f=yc(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof y=="number"&&(g=a==="end"?y*-1:y),l?{x:g*d,y:p*c}:{x:p*c,y:g*d}}const Roe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:i,placement:s,middlewareData:a}=e,l=await Aoe(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:s}}}}},Ioe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:_=>{let{x:k,y:M}=_;return{x:k,y:M}}},...l}=yc(t,e),c={x:n,y:r},d=await jv(e,l),f=hl(Sl(o)),p=NM(f);let g=c[p],y=c[f];if(i){const _=p==="y"?"top":"left",k=p==="y"?"bottom":"right",M=g+d[_],N=g-d[k];g=V2(M,g,N)}if(s){const _=f==="y"?"top":"left",k=f==="y"?"bottom":"right",M=y+d[_],N=y-d[k];y=V2(M,y,N)}const b=a.fn({...e,[p]:g,[f]:y});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[p]:i,[f]:s}}}}}},Moe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:i,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=yc(t,e),d={x:n,y:r},f=hl(o),p=NM(f);let g=d[p],y=d[f];const b=yc(a,e),_=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const N=p==="y"?"height":"width",j=i.reference[p]-i.floating[N]+_.mainAxis,B=i.reference[p]+i.reference[N]-_.mainAxis;g<j?g=j:g>B&&(g=B)}if(c){var k,M;const N=p==="y"?"width":"height",j=W8.has(Sl(o)),B=i.reference[f]-i.floating[N]+(j&&((k=s.offset)==null?void 0:k[f])||0)+(j?0:_.crossAxis),F=i.reference[f]+i.reference[N]+(j?0:((M=s.offset)==null?void 0:M[f])||0)-(j?_.crossAxis:0);y<B?y=B:y>F&&(y=F)}return{[p]:g,[f]:y}}}},Noe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:i,platform:s,elements:a}=e,{apply:l=()=>{},...c}=yc(t,e),d=await jv(e,c),f=Sl(o),p=kg(o),g=hl(o)==="y",{width:y,height:b}=i.floating;let _,k;f==="top"||f==="bottom"?(_=f,k=p===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(k=f,_=p==="end"?"top":"bottom");const M=b-d.top-d.bottom,N=y-d.left-d.right,j=Cl(b-d[_],M),B=Cl(y-d[k],N),F=!e.middlewareData.shift;let D=j,R=B;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(R=N),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(D=M),F&&!p){const L=Mi(d.left,0),z=Mi(d.right,0),q=Mi(d.top,0),H=Mi(d.bottom,0);g?R=y-2*(L!==0||z!==0?L+z:Mi(d.left,d.right)):D=b-2*(q!==0||H!==0?q+H:Mi(d.top,d.bottom))}await l({...e,availableWidth:R,availableHeight:D});const I=await s.getDimensions(a.floating);return y!==I.width||b!==I.height?{reset:{rects:!0}}:{}}}};function P_(){return typeof window<"u"}function Tg(t){return Y8(t)?(t.nodeName||"").toLowerCase():"#document"}function _s(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ec(t){var e;return(e=(Y8(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Y8(t){return P_()?t instanceof Node||t instanceof _s(t).Node:!1}function Cr(t){return P_()?t instanceof Element||t instanceof _s(t).Element:!1}function Xs(t){return P_()?t instanceof HTMLElement||t instanceof _s(t).HTMLElement:!1}function B2(t){return!P_()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof _s(t).ShadowRoot}const Ooe=new Set(["inline","contents"]);function Pb(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=Fa(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Ooe.has(o)}const Poe=new Set(["table","td","th"]);function Doe(t){return Poe.has(Tg(t))}const Loe=[":popover-open",":modal"];function D_(t){return Loe.some(e=>{try{return t.matches(e)}catch{return!1}})}const Voe=["transform","translate","scale","rotate","perspective"],joe=["transform","translate","scale","rotate","perspective","filter"],Boe=["paint","layout","strict","content"];function LM(t){const e=L_(),n=Cr(t)?Fa(t):t;return Voe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||joe.some(r=>(n.willChange||"").includes(r))||Boe.some(r=>(n.contain||"").includes(r))}function $oe(t){let e=Iu(t);for(;Xs(e)&&!af(e);){if(LM(e))return e;if(D_(e))return null;e=Iu(e)}return null}function L_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Foe=new Set(["html","body","#document"]);function af(t){return Foe.has(Tg(t))}function Fa(t){return _s(t).getComputedStyle(t)}function V_(t){return Cr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Iu(t){if(Tg(t)==="html")return t;const e=t.assignedSlot||t.parentNode||B2(t)&&t.host||Ec(t);return B2(e)?e.host:e}function X8(t){const e=Iu(t);return af(e)?t.ownerDocument?t.ownerDocument.body:t.body:Xs(e)&&Pb(e)?e:X8(e)}function wu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=X8(t),i=o===((r=t.ownerDocument)==null?void 0:r.body),s=_s(o);if(i){const a=$2(s);return e.concat(s,s.visualViewport||[],Pb(o)?o:[],a&&n?wu(a):[])}return e.concat(o,wu(o,[],n))}function $2(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Q8(t){const e=Fa(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=Xs(t),i=o?t.offsetWidth:n,s=o?t.offsetHeight:r,a=hC(n)!==i||hC(r)!==s;return a&&(n=i,r=s),{width:n,height:r,$:a}}function VM(t){return Cr(t)?t:t.contextElement}function Rm(t){const e=VM(t);if(!Xs(e))return sc(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:i}=Q8(e);let s=(i?hC(n.width):n.width)/r,a=(i?hC(n.height):n.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const Hoe=sc(0);function Z8(t){const e=_s(t);return!L_()||!e.visualViewport?Hoe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Uoe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==_s(t)?!1:e}function Fh(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),i=VM(t);let s=sc(1);e&&(r?Cr(r)&&(s=Rm(r)):s=Rm(t));const a=Uoe(i,n,r)?Z8(i):sc(0);let l=(o.left+a.x)/s.x,c=(o.top+a.y)/s.y,d=o.width/s.x,f=o.height/s.y;if(i){const p=_s(i),g=r&&Cr(r)?_s(r):r;let y=p,b=$2(y);for(;b&&r&&g!==y;){const _=Rm(b),k=b.getBoundingClientRect(),M=Fa(b),N=k.left+(b.clientLeft+parseFloat(M.paddingLeft))*_.x,j=k.top+(b.clientTop+parseFloat(M.paddingTop))*_.y;l*=_.x,c*=_.y,d*=_.x,f*=_.y,l+=N,c+=j,y=_s(b),b=$2(y)}}return Wm({width:d,height:f,x:l,y:c})}function jM(t,e){const n=V_(t).scrollLeft;return e?e.left+n:Fh(Ec(t)).left+n}function J8(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),o=r.left+e.scrollLeft-(n?0:jM(t,r)),i=r.top+e.scrollTop;return{x:o,y:i}}function zoe(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const i=o==="fixed",s=Ec(r),a=e?D_(e.floating):!1;if(r===s||a&&i)return n;let l={scrollLeft:0,scrollTop:0},c=sc(1);const d=sc(0),f=Xs(r);if((f||!f&&!i)&&((Tg(r)!=="body"||Pb(s))&&(l=V_(r)),Xs(r))){const g=Fh(r);c=Rm(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const p=s&&!f&&!i?J8(s,l,!0):sc(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+d.x+p.x,y:n.y*c.y-l.scrollTop*c.y+d.y+p.y}}function Goe(t){return Array.from(t.getClientRects())}function qoe(t){const e=Ec(t),n=V_(t),r=t.ownerDocument.body,o=Mi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Mi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+jM(t);const a=-n.scrollTop;return Fa(r).direction==="rtl"&&(s+=Mi(e.clientWidth,r.clientWidth)-o),{width:o,height:i,x:s,y:a}}function Koe(t,e){const n=_s(t),r=Ec(t),o=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,a=0,l=0;if(o){i=o.width,s=o.height;const c=L_();(!c||c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:i,height:s,x:a,y:l}}const Woe=new Set(["absolute","fixed"]);function Yoe(t,e){const n=Fh(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,i=Xs(t)?Rm(t):sc(1),s=t.clientWidth*i.x,a=t.clientHeight*i.y,l=o*i.x,c=r*i.y;return{width:s,height:a,x:l,y:c}}function y5(t,e,n){let r;if(e==="viewport")r=Koe(t,n);else if(e==="document")r=qoe(Ec(t));else if(Cr(e))r=Yoe(e,n);else{const o=Z8(t);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return Wm(r)}function e7(t,e){const n=Iu(t);return n===e||!Cr(n)||af(n)?!1:Fa(n).position==="fixed"||e7(n,e)}function Xoe(t,e){const n=e.get(t);if(n)return n;let r=wu(t,[],!1).filter(a=>Cr(a)&&Tg(a)!=="body"),o=null;const i=Fa(t).position==="fixed";let s=i?Iu(t):t;for(;Cr(s)&&!af(s);){const a=Fa(s),l=LM(s);!l&&a.position==="fixed"&&(o=null),(i?!l&&!o:!l&&a.position==="static"&&!!o&&Woe.has(o.position)||Pb(s)&&!l&&e7(t,s))?r=r.filter(d=>d!==s):o=a,s=Iu(s)}return e.set(t,r),r}function Qoe(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const s=[...n==="clippingAncestors"?D_(e)?[]:Xoe(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((c,d)=>{const f=y5(e,d,o);return c.top=Mi(f.top,c.top),c.right=Cl(f.right,c.right),c.bottom=Cl(f.bottom,c.bottom),c.left=Mi(f.left,c.left),c},y5(e,a,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Zoe(t){const{width:e,height:n}=Q8(t);return{width:e,height:n}}function Joe(t,e,n){const r=Xs(e),o=Ec(e),i=n==="fixed",s=Fh(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=sc(0);function c(){l.x=jM(o)}if(r||!r&&!i)if((Tg(e)!=="body"||Pb(o))&&(a=V_(e)),r){const g=Fh(e,!0,i,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else o&&c();i&&!r&&o&&c();const d=o&&!r&&!i?J8(o,a):sc(0),f=s.left+a.scrollLeft-l.x-d.x,p=s.top+a.scrollTop-l.y-d.y;return{x:f,y:p,width:s.width,height:s.height}}function IT(t){return Fa(t).position==="static"}function v5(t,e){if(!Xs(t)||Fa(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ec(t)===n&&(n=n.ownerDocument.body),n}function t7(t,e){const n=_s(t);if(D_(t))return n;if(!Xs(t)){let o=Iu(t);for(;o&&!af(o);){if(Cr(o)&&!IT(o))return o;o=Iu(o)}return n}let r=v5(t,e);for(;r&&Doe(r)&&IT(r);)r=v5(r,e);return r&&af(r)&&IT(r)&&!LM(r)?n:r||$oe(t)||n}const eie=async function(t){const e=this.getOffsetParent||t7,n=this.getDimensions,r=await n(t.floating);return{reference:Joe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function tie(t){return Fa(t).direction==="rtl"}const nie={convertOffsetParentRelativeRectToViewportRelativeRect:zoe,getDocumentElement:Ec,getClippingRect:Qoe,getOffsetParent:t7,getElementRects:eie,getClientRects:Goe,getDimensions:Zoe,getScale:Rm,isElement:Cr,isRTL:tie};function n7(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function rie(t,e){let n=null,r;const o=Ec(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const c=t.getBoundingClientRect(),{left:d,top:f,width:p,height:g}=c;if(a||e(),!p||!g)return;const y=D1(f),b=D1(o.clientWidth-(d+p)),_=D1(o.clientHeight-(f+g)),k=D1(d),N={rootMargin:-y+"px "+-b+"px "+-_+"px "+-k+"px",threshold:Mi(0,Cl(1,l))||1};let j=!0;function B(F){const D=F[0].intersectionRatio;if(D!==l){if(!j)return s();D?s(!1,D):r=setTimeout(()=>{s(!1,1e-7)},1e3)}D===1&&!n7(c,t.getBoundingClientRect())&&s(),j=!1}try{n=new IntersectionObserver(B,{...N,root:o.ownerDocument})}catch{n=new IntersectionObserver(B,N)}n.observe(t)}return s(!0),i}function r7(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=VM(t),d=o||i?[...c?wu(c):[],...wu(e)]:[];d.forEach(k=>{o&&k.addEventListener("scroll",n,{passive:!0}),i&&k.addEventListener("resize",n)});const f=c&&a?rie(c,n):null;let p=-1,g=null;s&&(g=new ResizeObserver(k=>{let[M]=k;M&&M.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var N;(N=g)==null||N.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let y,b=l?Fh(t):null;l&&_();function _(){const k=Fh(t);b&&!n7(b,k)&&n(),b=k,y=requestAnimationFrame(_)}return n(),()=>{var k;d.forEach(M=>{o&&M.removeEventListener("scroll",n),i&&M.removeEventListener("resize",n)}),f?.(),(k=g)==null||k.disconnect(),g=null,l&&cancelAnimationFrame(y)}}const oie=Roe,iie=Ioe,sie=xoe,aie=Noe,lie=Eoe,b5=_oe,cie=Toe,uie=Moe,die=(t,e,n)=>{const r=new Map,o={platform:nie,...n},i={...o.platform,_c:r};return Soe(t,e,{...o,platform:i})};var fie=typeof document<"u",hie=function(){},Rw=fie?E.useLayoutEffect:hie;function mC(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!mC(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&t.$$typeof)&&!mC(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function o7(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function w5(t,e){const n=o7(t);return Math.round(e*n)/n}function MT(t){const e=E.useRef(t);return Rw(()=>{e.current=t}),e}function i7(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:s}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,f]=E.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=E.useState(r);mC(p,r)||g(r);const[y,b]=E.useState(null),[_,k]=E.useState(null),M=E.useCallback(Q=>{Q!==F.current&&(F.current=Q,b(Q))},[]),N=E.useCallback(Q=>{Q!==D.current&&(D.current=Q,k(Q))},[]),j=i||y,B=s||_,F=E.useRef(null),D=E.useRef(null),R=E.useRef(d),I=l!=null,L=MT(l),z=MT(o),q=MT(c),H=E.useCallback(()=>{if(!F.current||!D.current)return;const Q={placement:e,strategy:n,middleware:p};z.current&&(Q.platform=z.current),die(F.current,D.current,Q).then(J=>{const Y={...J,isPositioned:q.current!==!1};ne.current&&!mC(R.current,Y)&&(R.current=Y,Ts.flushSync(()=>{f(Y)}))})},[p,e,n,z,q]);Rw(()=>{c===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,f(Q=>({...Q,isPositioned:!1})))},[c]);const ne=E.useRef(!1);Rw(()=>(ne.current=!0,()=>{ne.current=!1}),[]),Rw(()=>{if(j&&(F.current=j),B&&(D.current=B),j&&B){if(L.current)return L.current(j,B,H);H()}},[j,B,H,L,I]);const re=E.useMemo(()=>({reference:F,floating:D,setReference:M,setFloating:N}),[M,N]),V=E.useMemo(()=>({reference:j,floating:B}),[j,B]),U=E.useMemo(()=>{const Q={position:n,left:0,top:0};if(!V.floating)return Q;const J=w5(V.floating,d.x),Y=w5(V.floating,d.y);return a?{...Q,transform:"translate("+J+"px, "+Y+"px)",...o7(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:J,top:Y}},[n,a,V.floating,d.x,d.y]);return E.useMemo(()=>({...d,update:H,refs:re,elements:V,floatingStyles:U}),[d,H,re,V,U])}const pie=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?b5({element:r.current,padding:o}).fn(n):{}:r?b5({element:r,padding:o}).fn(n):{}}}},Ml=(t,e)=>({...oie(t),options:[t,e]}),Tf=(t,e)=>({...iie(t),options:[t,e]}),F2=(t,e)=>({...uie(t),options:[t,e]}),Ha=(t,e)=>({...sie(t),options:[t,e]}),Db=(t,e)=>({...aie(t),options:[t,e]}),mie=(t,e)=>({...lie(t),options:[t,e]}),pv=(t,e)=>({...cie(t),options:[t,e]}),BM=(t,e)=>({...pie(t),options:[t,e]});var gie="Arrow",s7=E.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...i}=t;return w.jsx(Rt.svg,{...i,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:w.jsx("polygon",{points:"0,0 30,0 15,10"})})});s7.displayName=gie;var yie=s7;function $M(t){const[e,n]=E.useState(void 0);return Vi(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let s,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;s=c.inlineSize,a=c.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var FM="Popper",[a7,Af]=ra(FM),[vie,l7]=a7(FM),c7=t=>{const{__scopePopper:e,children:n}=t,[r,o]=E.useState(null);return w.jsx(vie,{scope:e,anchor:r,onAnchorChange:o,children:n})};c7.displayName=FM;var u7="PopperAnchor",d7=E.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,i=l7(u7,n),s=E.useRef(null),a=vn(e,s);return E.useEffect(()=>{i.onAnchorChange(r?.current||s.current)}),r?null:w.jsx(Rt.div,{...o,ref:a})});d7.displayName=u7;var HM="PopperContent",[bie,wie]=a7(HM),f7=E.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:i="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:y,...b}=t,_=l7(HM,n),[k,M]=E.useState(null),N=vn(e,we=>M(we)),[j,B]=E.useState(null),F=$M(j),D=F?.width??0,R=F?.height??0,I=r+(i!=="center"?"-"+i:""),L=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},z=Array.isArray(c)?c:[c],q=z.length>0,H={padding:L,boundary:z.filter(Sie),altBoundary:q},{refs:ne,floatingStyles:re,placement:V,isPositioned:U,middlewareData:Q}=i7({strategy:"fixed",placement:I,whileElementsMounted:(...we)=>r7(...we,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[Ml({mainAxis:o+R,alignmentAxis:s}),l&&Tf({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?F2():void 0,...H}),l&&Ha({...H}),Db({...H,apply:({elements:we,rects:Be,availableWidth:Ie,availableHeight:Ge})=>{const{width:it,height:Xe}=Be.reference,zt=we.floating.style;zt.setProperty("--radix-popper-available-width",`${Ie}px`),zt.setProperty("--radix-popper-available-height",`${Ge}px`),zt.setProperty("--radix-popper-anchor-width",`${it}px`),zt.setProperty("--radix-popper-anchor-height",`${Xe}px`)}}),j&&BM({element:j,padding:a}),_ie({arrowWidth:D,arrowHeight:R}),p&&mie({strategy:"referenceHidden",...H})]}),[J,Y]=m7(V),se=gc(y);Vi(()=>{U&&se?.()},[U,se]);const te=Q.arrow?.x,ie=Q.arrow?.y,ce=Q.arrow?.centerOffset!==0,[ae,ye]=E.useState();return Vi(()=>{k&&ye(window.getComputedStyle(k).zIndex)},[k]),w.jsx("div",{ref:ne.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:U?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ae,"--radix-popper-transform-origin":[Q.transformOrigin?.x,Q.transformOrigin?.y].join(" "),...Q.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:w.jsx(bie,{scope:n,placedSide:J,onArrowChange:B,arrowX:te,arrowY:ie,shouldHideArrow:ce,children:w.jsx(Rt.div,{"data-side":J,"data-align":Y,...b,ref:N,style:{...b.style,animation:U?void 0:"none"}})})})});f7.displayName=HM;var h7="PopperArrow",Cie={top:"bottom",right:"left",bottom:"top",left:"right"},p7=E.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,i=wie(h7,r),s=Cie[i.placedSide];return w.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:w.jsx(yie,{...o,ref:n,style:{...o.style,display:"block"}})})});p7.displayName=h7;function Sie(t){return t!==null}var _ie=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:o}=e,s=o.arrow?.centerOffset!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[c,d]=m7(n),f={start:"0%",center:"50%",end:"100%"}[d],p=(o.arrow?.x??0)+a/2,g=(o.arrow?.y??0)+l/2;let y="",b="";return c==="bottom"?(y=s?f:`${p}px`,b=`${-l}px`):c==="top"?(y=s?f:`${p}px`,b=`${r.floating.height+l}px`):c==="right"?(y=`${-l}px`,b=s?f:`${g}px`):c==="left"&&(y=`${r.floating.width+l}px`,b=s?f:`${g}px`),{data:{x:y,y:b}}}});function m7(t){const[e,n="center"]=t.split("-");return[e,n]}var j_=c7,Lb=d7,B_=f7,$_=p7,g7=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),xie="VisuallyHidden",y7=E.forwardRef((t,e)=>w.jsx(Rt.span,{...t,ref:e,style:{...g7,...t.style}}));y7.displayName=xie;var Eie=y7,[F_,m9e]=ra("Tooltip",[Af]),H_=Af(),v7="TooltipProvider",kie=700,H2="tooltip.open",[Tie,UM]=F_(v7),b7=t=>{const{__scopeTooltip:e,delayDuration:n=kie,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:i}=t,s=E.useRef(!0),a=E.useRef(!1),l=E.useRef(0);return E.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),w.jsx(Tie,{scope:e,isOpenDelayedRef:s,delayDuration:n,onOpen:E.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:E.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:E.useCallback(c=>{a.current=c},[]),disableHoverableContent:o,children:i})};b7.displayName=v7;var Bv="Tooltip",[Aie,Vb]=F_(Bv),w7=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:o,onOpenChange:i,disableHoverableContent:s,delayDuration:a}=t,l=UM(Bv,t.__scopeTooltip),c=H_(e),[d,f]=E.useState(null),p=hi(),g=E.useRef(0),y=s??l.disableHoverableContent,b=a??l.delayDuration,_=E.useRef(!1),[k,M]=Ru({prop:r,defaultProp:o??!1,onChange:D=>{D?(l.onOpen(),document.dispatchEvent(new CustomEvent(H2))):l.onClose(),i?.(D)},caller:Bv}),N=E.useMemo(()=>k?_.current?"delayed-open":"instant-open":"closed",[k]),j=E.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_.current=!1,M(!0)},[M]),B=E.useCallback(()=>{window.clearTimeout(g.current),g.current=0,M(!1)},[M]),F=E.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{_.current=!0,M(!0),g.current=0},b)},[b,M]);return E.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),w.jsx(j_,{...c,children:w.jsx(Aie,{scope:e,contentId:p,open:k,stateAttribute:N,trigger:d,onTriggerChange:f,onTriggerEnter:E.useCallback(()=>{l.isOpenDelayedRef.current?F():j()},[l.isOpenDelayedRef,F,j]),onTriggerLeave:E.useCallback(()=>{y?B():(window.clearTimeout(g.current),g.current=0)},[B,y]),onOpen:j,onClose:B,disableHoverableContent:y,children:n})})};w7.displayName=Bv;var U2="TooltipTrigger",C7=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=Vb(U2,n),i=UM(U2,n),s=H_(n),a=E.useRef(null),l=vn(e,a,o.onTriggerChange),c=E.useRef(!1),d=E.useRef(!1),f=E.useCallback(()=>c.current=!1,[]);return E.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),w.jsx(Lb,{asChild:!0,...s,children:w.jsx(Rt.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:at(t.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(o.onTriggerEnter(),d.current=!0)}),onPointerLeave:at(t.onPointerLeave,()=>{o.onTriggerLeave(),d.current=!1}),onPointerDown:at(t.onPointerDown,()=>{o.open&&o.onClose(),c.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:at(t.onFocus,()=>{c.current||o.onOpen()}),onBlur:at(t.onBlur,o.onClose),onClick:at(t.onClick,o.onClose)})})});C7.displayName=U2;var zM="TooltipPortal",[Rie,Iie]=F_(zM,{forceMount:void 0}),S7=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:o}=t,i=Vb(zM,e);return w.jsx(Rie,{scope:e,forceMount:n,children:w.jsx(oa,{present:n||i.open,children:w.jsx(xg,{asChild:!0,container:o,children:r})})})};S7.displayName=zM;var Ym="TooltipContent",_7=E.forwardRef((t,e)=>{const n=Iie(Ym,t.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...i}=t,s=Vb(Ym,t.__scopeTooltip);return w.jsx(oa,{present:r||s.open,children:s.disableHoverableContent?w.jsx(x7,{side:o,...i,ref:e}):w.jsx(Mie,{side:o,...i,ref:e})})}),Mie=E.forwardRef((t,e)=>{const n=Vb(Ym,t.__scopeTooltip),r=UM(Ym,t.__scopeTooltip),o=E.useRef(null),i=vn(e,o),[s,a]=E.useState(null),{trigger:l,onClose:c}=n,d=o.current,{onPointerInTransitChange:f}=r,p=E.useCallback(()=>{a(null),f(!1)},[f]),g=E.useCallback((y,b)=>{const _=y.currentTarget,k={x:y.clientX,y:y.clientY},M=Die(k,_.getBoundingClientRect()),N=Lie(k,M),j=Vie(b.getBoundingClientRect()),B=Bie([...N,...j]);a(B),f(!0)},[f]);return E.useEffect(()=>()=>p(),[p]),E.useEffect(()=>{if(l&&d){const y=_=>g(_,d),b=_=>g(_,l);return l.addEventListener("pointerleave",y),d.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",y),d.removeEventListener("pointerleave",b)}}},[l,d,g,p]),E.useEffect(()=>{if(s){const y=b=>{const _=b.target,k={x:b.clientX,y:b.clientY},M=l?.contains(_)||d?.contains(_),N=!jie(k,s);M?p():N&&(p(),c())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[l,d,s,c,p]),w.jsx(x7,{...t,ref:i})}),[Nie,Oie]=F_(Bv,{isInside:!1}),Pie=e8("TooltipContent"),x7=E.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:s,...a}=t,l=Vb(Ym,n),c=H_(n),{onClose:d}=l;return E.useEffect(()=>(document.addEventListener(H2,d),()=>document.removeEventListener(H2,d)),[d]),E.useEffect(()=>{if(l.trigger){const f=p=>{p.target?.contains(l.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,d]),w.jsx(_g,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:w.jsxs(B_,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[w.jsx(Pie,{children:r}),w.jsx(Nie,{scope:n,isInside:!0,children:w.jsx(Eie,{id:l.contentId,role:"tooltip",children:o||r})})]})})});_7.displayName=Ym;var E7="TooltipArrow",k7=E.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=H_(n);return Oie(E7,n).isInside?null:w.jsx($_,{...o,...r,ref:e})});k7.displayName=E7;function Die(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,o,i)){case i:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Lie(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Vie(t){const{top:e,right:n,bottom:r,left:o}=t;return[{x:o,y:e},{x:n,y:e},{x:n,y:r},{x:o,y:r}]}function jie(t,e){const{x:n,y:r}=t;let o=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const a=e[i],l=e[s],c=a.x,d=a.y,f=l.x,p=l.y;d>r!=p>r&&n<(f-c)*(r-d)/(p-d)+c&&(o=!o)}return o}function Bie(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),$ie(e)}function $ie(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const o=t[r];for(;e.length>=2;){const i=e[e.length-1],s=e[e.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))e.pop();else break}e.push(o)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const o=t[r];for(;n.length>=2;){const i=n[n.length-1],s=n[n.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))n.pop();else break}n.push(o)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Fie=b7,Hie=w7,Uie=C7,zie=S7,Gie=_7,qie=k7;function T7({delayDuration:t=0,...e}){return w.jsx(Fie,{"data-slot":"tooltip-provider",delayDuration:t,...e})}function Kie({...t}){return w.jsx(T7,{children:w.jsx(Hie,{"data-slot":"tooltip",...t})})}function Wie({...t}){return w.jsx(Uie,{"data-slot":"tooltip-trigger",...t})}function Yie({className:t,sideOffset:e=0,children:n,...r}){return w.jsx(zie,{children:w.jsxs(Gie,{"data-slot":"tooltip-content",sideOffset:e,className:dt("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...r,children:[n,w.jsx(qie,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const Xie="sidebar_state",Qie=3600*24*7,Zie="16rem",Jie="18rem",ese="3rem",tse="b",A7=E.createContext(null);function GM(){const t=E.useContext(A7);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}function nse({defaultOpen:t=!0,open:e,onOpenChange:n,className:r,style:o,children:i,...s}){const a=nne(),[l,c]=E.useState(!1),[d,f]=E.useState(t),p=e??d,g=E.useCallback(k=>{const M=typeof k=="function"?k(p):k;n?n(M):f(M),document.cookie=`${Xie}=${M}; path=/; max-age=${Qie}`},[n,p]),y=E.useCallback(()=>a?c(k=>!k):g(k=>!k),[a,g,c]);E.useEffect(()=>{const k=M=>{M.key===tse&&(M.metaKey||M.ctrlKey)&&(M.preventDefault(),y())};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[y]);const b=p?"expanded":"collapsed",_=E.useMemo(()=>({state:b,open:p,setOpen:g,isMobile:a,openMobile:l,setOpenMobile:c,toggleSidebar:y}),[b,p,g,a,l,c,y]);return w.jsx(A7.Provider,{value:_,children:w.jsx(T7,{delayDuration:0,children:w.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":Zie,"--sidebar-width-icon":ese,...o},className:dt("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",r),...s,children:i})})})}function rse({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:r,children:o,...i}){const{isMobile:s,state:a,openMobile:l,setOpenMobile:c}=GM();return n==="none"?w.jsx("div",{"data-slot":"sidebar",className:dt("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",r),...i,children:o}):s?w.jsx(dC,{open:l,onOpenChange:c,...i,children:w.jsxs(fC,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":Jie},side:t,children:[w.jsxs(loe,{className:"sr-only",children:[w.jsx(coe,{children:"Sidebar"}),w.jsx(uoe,{children:"Displays the mobile sidebar."})]}),w.jsx("div",{className:"flex h-full w-full flex-col",children:o})]})}):w.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":a,"data-collapsible":a==="collapsed"?n:"","data-variant":e,"data-side":t,"data-slot":"sidebar",children:[w.jsx("div",{"data-slot":"sidebar-gap",className:dt("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),w.jsx("div",{"data-slot":"sidebar-container",className:dt("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...i,children:w.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:o})})]})}function ose({className:t,onClick:e,...n}){const{toggleSidebar:r}=GM();return w.jsxs(ic,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:dt("size-7",t),onClick:o=>{e?.(o),r()},...n,children:[w.jsx(Yte,{}),w.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function ise({className:t,...e}){return w.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:dt("flex flex-col gap-2 p-2",t),...e})}function sse({className:t,...e}){return w.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:dt("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e})}function ase({className:t,...e}){return w.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:dt("relative flex w-full min-w-0 flex-col p-2",t),...e})}function C5({className:t,asChild:e=!1,...n}){const r=e?xM:"div";return w.jsx(r,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:dt("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})}function lse({className:t,...e}){return w.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:dt("w-full text-sm",t),...e})}function NT({className:t,...e}){return w.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:dt("flex w-full min-w-0 flex-col gap-1",t),...e})}function S5({className:t,...e}){return w.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:dt("group/menu-item relative",t),...e})}const cse=n8("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function use({asChild:t=!1,isActive:e=!1,variant:n="default",size:r="default",tooltip:o,className:i,...s}){const a=t?xM:"button",{isMobile:l,state:c}=GM(),d=w.jsx(a,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":r,"data-active":e,className:dt(cse({variant:n,size:r}),i),...s});return o?(typeof o=="string"&&(o={children:o}),w.jsxs(Kie,{children:[w.jsx(Wie,{asChild:!0,children:d}),w.jsx(Yie,{side:"right",align:"center",hidden:c!=="collapsed"||l,...o})]})):d}const dse="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let R7=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=dse[n[t]&63];return e};const _5=t=>{let e;const n=new Set,r=(c,d)=>{const f=typeof c=="function"?c(e):c;if(!Object.is(f,e)){const p=e;e=d??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(g=>g(e,p))}},o=()=>e,a={setState:r,getState:o,getInitialState:()=>l,subscribe:c=>(n.add(c),()=>n.delete(c))},l=e=t(r,o,a);return a},fse=t=>t?_5(t):_5,hse=t=>t;function pse(t,e=hse){const n=De.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return De.useDebugValue(n),n}const x5=t=>{const e=fse(t),n=r=>pse(e,r);return Object.assign(n,e),n},I7=t=>t?x5(t):x5;var Iw={exports:{}},mse=Iw.exports,E5;function gse(){return E5||(E5=1,function(t,e){(function(n,r){t.exports=r()})(mse,function(){var n=function(S,T){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,$){O.__proto__=$}||function(O,$){for(var W in $)Object.prototype.hasOwnProperty.call($,W)&&(O[W]=$[W])})(S,T)},r=function(){return(r=Object.assign||function(S){for(var T,O=1,$=arguments.length;O<$;O++)for(var W in T=arguments[O])Object.prototype.hasOwnProperty.call(T,W)&&(S[W]=T[W]);return S}).apply(this,arguments)};function o(S,T,O){for(var $,W=0,X=T.length;W<X;W++)!$&&W in T||(($=$||Array.prototype.slice.call(T,0,W))[W]=T[W]);return S.concat($||Array.prototype.slice.call(T))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:rte,s=Object.keys,a=Array.isArray;function l(S,T){return typeof T!="object"||s(T).forEach(function(O){S[O]=T[O]}),S}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var c=Object.getPrototypeOf,d={}.hasOwnProperty;function f(S,T){return d.call(S,T)}function p(S,T){typeof T=="function"&&(T=T(c(S))),(typeof Reflect>"u"?s:Reflect.ownKeys)(T).forEach(function(O){y(S,O,T[O])})}var g=Object.defineProperty;function y(S,T,O,$){g(S,T,l(O&&f(O,"get")&&typeof O.get=="function"?{get:O.get,set:O.set,configurable:!0}:{value:O,configurable:!0,writable:!0},$))}function b(S){return{from:function(T){return S.prototype=Object.create(T.prototype),y(S.prototype,"constructor",S),{extend:p.bind(null,S.prototype)}}}}var _=Object.getOwnPropertyDescriptor,k=[].slice;function M(S,T,O){return k.call(S,T,O)}function N(S,T){return T(S)}function j(S){if(!S)throw new Error("Assertion Failed")}function B(S){i.setImmediate?setImmediate(S):setTimeout(S,0)}function F(S,T){if(typeof T=="string"&&f(S,T))return S[T];if(!T)return S;if(typeof T!="string"){for(var O=[],$=0,W=T.length;$<W;++$){var X=F(S,T[$]);O.push(X)}return O}var oe=T.indexOf(".");if(oe!==-1){var le=S[T.substr(0,oe)];return le==null?void 0:F(le,T.substr(oe+1))}}function D(S,T,O){if(S&&T!==void 0&&!("isFrozen"in Object&&Object.isFrozen(S)))if(typeof T!="string"&&"length"in T){j(typeof O!="string"&&"length"in O);for(var $=0,W=T.length;$<W;++$)D(S,T[$],O[$])}else{var X,oe,le=T.indexOf(".");le!==-1?(X=T.substr(0,le),(oe=T.substr(le+1))===""?O===void 0?a(S)&&!isNaN(parseInt(X))?S.splice(X,1):delete S[X]:S[X]=O:D(le=!(le=S[X])||!f(S,X)?S[X]={}:le,oe,O)):O===void 0?a(S)&&!isNaN(parseInt(T))?S.splice(T,1):delete S[T]:S[T]=O}}function R(S){var T,O={};for(T in S)f(S,T)&&(O[T]=S[T]);return O}var I=[].concat;function L(S){return I.apply([],S)}var Gt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(L([8,16,32,64].map(function(S){return["Int","Uint","Float"].map(function(T){return T+S+"Array"})}))).filter(function(S){return i[S]}),z=new Set(Gt.map(function(S){return i[S]})),q=null;function H(S){return q=new WeakMap,S=function T(O){if(!O||typeof O!="object")return O;var $=q.get(O);if($)return $;if(a(O)){$=[],q.set(O,$);for(var W=0,X=O.length;W<X;++W)$.push(T(O[W]))}else if(z.has(O.constructor))$=O;else{var oe,le=c(O);for(oe in $=le===Object.prototype?{}:Object.create(le),q.set(O,$),O)f(O,oe)&&($[oe]=T(O[oe]))}return $}(S),q=null,S}var ne={}.toString;function re(S){return ne.call(S).slice(8,-1)}var V=typeof Symbol<"u"?Symbol.iterator:"@@iterator",U=typeof V=="symbol"?function(S){var T;return S!=null&&(T=S[V])&&T.apply(S)}:function(){return null};function Q(S,T){return T=S.indexOf(T),0<=T&&S.splice(T,1),0<=T}var J={};function Y(S){var T,O,$,W;if(arguments.length===1){if(a(S))return S.slice();if(this===J&&typeof S=="string")return[S];if(W=U(S)){for(O=[];!($=W.next()).done;)O.push($.value);return O}if(S==null)return[S];if(typeof(T=S.length)!="number")return[S];for(O=new Array(T);T--;)O[T]=S[T];return O}for(T=arguments.length,O=new Array(T);T--;)O[T]=arguments[T];return O}var se=typeof Symbol<"u"?function(S){return S[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Dn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],qi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Dn),te={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ie(S,T){this.name=S,this.message=T}function ce(S,T){return S+". Errors: "+Object.keys(T).map(function(O){return T[O].toString()}).filter(function(O,$,W){return W.indexOf(O)===$}).join(`
`)}function ae(S,T,O,$){this.failures=T,this.failedKeys=$,this.successCount=O,this.message=ce(S,T)}function ye(S,T){this.name="BulkError",this.failures=Object.keys(T).map(function(O){return T[O]}),this.failuresByPos=T,this.message=ce(S,this.failures)}b(ie).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(ae).from(ie),b(ye).from(ie);var we=qi.reduce(function(S,T){return S[T]=T+"Error",S},{}),Be=ie,Ie=qi.reduce(function(S,T){var O=T+"Error";function $(W,X){this.name=O,W?typeof W=="string"?(this.message="".concat(W).concat(X?`
 `+X:""),this.inner=X||null):typeof W=="object"&&(this.message="".concat(W.name," ").concat(W.message),this.inner=W):(this.message=te[T]||O,this.inner=null)}return b($).from(Be),S[T]=$,S},{});Ie.Syntax=SyntaxError,Ie.Type=TypeError,Ie.Range=RangeError;var Ge=Dn.reduce(function(S,T){return S[T+"Error"]=Ie[T],S},{}),it=qi.reduce(function(S,T){return["Syntax","Type","Range"].indexOf(T)===-1&&(S[T+"Error"]=Ie[T]),S},{});function Xe(){}function zt(S){return S}function un(S,T){return S==null||S===zt?T:function(O){return T(S(O))}}function Pt(S,T){return function(){S.apply(this,arguments),T.apply(this,arguments)}}function Pn(S,T){return S===Xe?T:function(){var O=S.apply(this,arguments);O!==void 0&&(arguments[0]=O);var $=this.onsuccess,W=this.onerror;this.onsuccess=null,this.onerror=null;var X=T.apply(this,arguments);return $&&(this.onsuccess=this.onsuccess?Pt($,this.onsuccess):$),W&&(this.onerror=this.onerror?Pt(W,this.onerror):W),X!==void 0?X:O}}function kt(S,T){return S===Xe?T:function(){S.apply(this,arguments);var O=this.onsuccess,$=this.onerror;this.onsuccess=this.onerror=null,T.apply(this,arguments),O&&(this.onsuccess=this.onsuccess?Pt(O,this.onsuccess):O),$&&(this.onerror=this.onerror?Pt($,this.onerror):$)}}function hn(S,T){return S===Xe?T:function(O){var $=S.apply(this,arguments);l(O,$);var W=this.onsuccess,X=this.onerror;return this.onsuccess=null,this.onerror=null,O=T.apply(this,arguments),W&&(this.onsuccess=this.onsuccess?Pt(W,this.onsuccess):W),X&&(this.onerror=this.onerror?Pt(X,this.onerror):X),$===void 0?O===void 0?void 0:O:l($,O)}}function sn(S,T){return S===Xe?T:function(){return T.apply(this,arguments)!==!1&&S.apply(this,arguments)}}function Ft(S,T){return S===Xe?T:function(){var O=S.apply(this,arguments);if(O&&typeof O.then=="function"){for(var $=this,W=arguments.length,X=new Array(W);W--;)X[W]=arguments[W];return O.then(function(){return T.apply($,X)})}return T.apply(this,arguments)}}it.ModifyError=ae,it.DexieError=ie,it.BulkError=ye;var Wt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function En(S){Wt=S}var Jt={},pn=100,Gt=typeof Promise>"u"?[]:function(){var S=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[S,c(S),S];var T=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[T,c(T),S]}(),Dn=Gt[0],qi=Gt[1],Gt=Gt[2],qi=qi&&qi.then,qt=Dn&&Dn.constructor,bn=!!Gt,Ln=function(S,T){Xo.push([S,T]),Dr&&(queueMicrotask(Yn),Dr=!1)},Gn=!0,Dr=!0,Nn=[],Ar=[],Rr=zt,qn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Xe,pgp:!1,env:{},finalize:Xe},st=qn,Xo=[],Xr=0,Fr=[];function tt(S){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var T=this._PSD=st;if(typeof S!="function"){if(S!==Jt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Qr(this,this._value))}this._state=null,this._value=null,++T.ref,function O($,W){try{W(function(X){if($._state===null){if(X===$)throw new TypeError("A promise cannot be resolved with itself.");var oe=$._lib&&sr();X&&typeof X.then=="function"?O($,function(le,he){X instanceof tt?X._then(le,he):X.then(le,he)}):($._state=!0,$._value=X,yt($)),oe&&er()}},Qr.bind(null,$))}catch(X){Qr($,X)}}(this,S)}var Qo={get:function(){var S=st,T=Nc;function O($,W){var X=this,oe=!S.global&&(S!==st||T!==Nc),le=oe&&!_o(),he=new tt(function(me,be){Vn(X,new Ir(ss($,S,oe,le),ss(W,S,oe,le),me,be,S))});return this._consoleTask&&(he._consoleTask=this._consoleTask),he}return O.prototype=Jt,O},set:function(S){y(this,"then",S&&S.prototype===Jt?Qo:{get:function(){return S},set:Qo.set})}};function Ir(S,T,O,$,W){this.onFulfilled=typeof S=="function"?S:null,this.onRejected=typeof T=="function"?T:null,this.resolve=O,this.reject=$,this.psd=W}function Qr(S,T){var O,$;Ar.push(T),S._state===null&&(O=S._lib&&sr(),T=Rr(T),S._state=!1,S._value=T,$=S,Nn.some(function(W){return W._value===$._value})||Nn.push($),yt(S),O&&er())}function yt(S){var T=S._listeners;S._listeners=[];for(var O=0,$=T.length;O<$;++O)Vn(S,T[O]);var W=S._PSD;--W.ref||W.finalize(),Xr===0&&(++Xr,Ln(function(){--Xr==0&&en()},[]))}function Vn(S,T){if(S._state!==null){var O=S._state?T.onFulfilled:T.onRejected;if(O===null)return(S._state?T.resolve:T.reject)(S._value);++T.psd.ref,++Xr,Ln(Wn,[O,S,T])}else S._listeners.push(T)}function Wn(S,T,O){try{var $,W=T._value;!T._state&&Ar.length&&(Ar=[]),$=Wt&&T._consoleTask?T._consoleTask.run(function(){return S(W)}):S(W),T._state||Ar.indexOf(W)!==-1||function(X){for(var oe=Nn.length;oe;)if(Nn[--oe]._value===X._value)return Nn.splice(oe,1)}(T),O.resolve($)}catch(X){O.reject(X)}finally{--Xr==0&&en(),--O.psd.ref||O.psd.finalize()}}function Yn(){is(qn,function(){sr()&&er()})}function sr(){var S=Gn;return Dr=Gn=!1,S}function er(){var S,T,O;do for(;0<Xo.length;)for(S=Xo,Xo=[],O=S.length,T=0;T<O;++T){var $=S[T];$[0].apply(null,$[1])}while(0<Xo.length);Dr=Gn=!0}function en(){var S=Nn;Nn=[],S.forEach(function($){$._PSD.onunhandled.call(null,$._value,$)});for(var T=Fr.slice(0),O=T.length;O;)T[--O]()}function tr(S){return new tt(Jt,!1,S)}function wt(S,T){var O=st;return function(){var $=sr(),W=st;try{return Xn(O,!0),S.apply(this,arguments)}catch(X){T&&T(X)}finally{Xn(W,!1),$&&er()}}}p(tt.prototype,{then:Qo,_then:function(S,T){Vn(this,new Ir(null,null,S,T,st))},catch:function(S){if(arguments.length===1)return this.then(null,S);var T=S,O=arguments[1];return typeof T=="function"?this.then(null,function($){return($ instanceof T?O:tr)($)}):this.then(null,function($){return($&&$.name===T?O:tr)($)})},finally:function(S){return this.then(function(T){return tt.resolve(S()).then(function(){return T})},function(T){return tt.resolve(S()).then(function(){return tr(T)})})},timeout:function(S,T){var O=this;return S<1/0?new tt(function($,W){var X=setTimeout(function(){return W(new Ie.Timeout(T))},S);O.then($,W).finally(clearTimeout.bind(null,X))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&y(tt.prototype,Symbol.toStringTag,"Dexie.Promise"),qn.env=Uu(),p(tt,{all:function(){var S=Y.apply(null,arguments).map(Hi);return new tt(function(T,O){S.length===0&&T([]);var $=S.length;S.forEach(function(W,X){return tt.resolve(W).then(function(oe){S[X]=oe,--$||T(S)},O)})})},resolve:function(S){return S instanceof tt?S:S&&typeof S.then=="function"?new tt(function(T,O){S.then(T,O)}):new tt(Jt,!0,S)},reject:tr,race:function(){var S=Y.apply(null,arguments).map(Hi);return new tt(function(T,O){S.map(function($){return tt.resolve($).then(T,O)})})},PSD:{get:function(){return st},set:function(S){return st=S}},totalEchoes:{get:function(){return Nc}},newPSD:Zo,usePSD:is,scheduler:{get:function(){return Ln},set:function(S){Ln=S}},rejectionMapper:{get:function(){return Rr},set:function(S){Rr=S}},follow:function(S,T){return new tt(function(O,$){return Zo(function(W,X){var oe=st;oe.unhandleds=[],oe.onunhandled=X,oe.finalize=Pt(function(){var le,he=this;le=function(){he.unhandleds.length===0?W():X(he.unhandleds[0])},Fr.push(function me(){le(),Fr.splice(Fr.indexOf(me),1)}),++Xr,Ln(function(){--Xr==0&&en()},[])},oe.finalize),S()},T,O,$)})}}),qt&&(qt.allSettled&&y(tt,"allSettled",function(){var S=Y.apply(null,arguments).map(Hi);return new tt(function(T){S.length===0&&T([]);var O=S.length,$=new Array(O);S.forEach(function(W,X){return tt.resolve(W).then(function(oe){return $[X]={status:"fulfilled",value:oe}},function(oe){return $[X]={status:"rejected",reason:oe}}).then(function(){return--O||T($)})})})}),qt.any&&typeof AggregateError<"u"&&y(tt,"any",function(){var S=Y.apply(null,arguments).map(Hi);return new tt(function(T,O){S.length===0&&O(new AggregateError([]));var $=S.length,W=new Array($);S.forEach(function(X,oe){return tt.resolve(X).then(function(le){return T(le)},function(le){W[oe]=le,--$||O(new AggregateError(W))})})})}),qt.withResolvers&&(tt.withResolvers=qt.withResolvers));var Yt={awaits:0,echoes:0,id:0},Pl=0,gi=[],rs=0,Nc=0,Oc=0;function Zo(S,T,O,$){var W=st,X=Object.create(W);return X.parent=W,X.ref=0,X.global=!1,X.id=++Oc,qn.env,X.env=bn?{Promise:tt,PromiseProp:{value:tt,configurable:!0,writable:!0},all:tt.all,race:tt.race,allSettled:tt.allSettled,any:tt.any,resolve:tt.resolve,reject:tt.reject}:{},T&&l(X,T),++W.ref,X.finalize=function(){--this.parent.ref||this.parent.finalize()},$=is(X,S,O,$),X.ref===0&&X.finalize(),$}function yi(){return Yt.id||(Yt.id=++Pl),++Yt.awaits,Yt.echoes+=pn,Yt.id}function _o(){return!!Yt.awaits&&(--Yt.awaits==0&&(Yt.id=0),Yt.echoes=Yt.awaits*pn,!0)}function Hi(S){return Yt.echoes&&S&&S.constructor===qt?(yi(),S.then(function(T){return _o(),T},function(T){return _o(),vr(T)})):S}function Jo(){var S=gi[gi.length-1];gi.pop(),Xn(S,!1)}function Xn(S,T){var O,$=st;(T?!Yt.echoes||rs++&&S===st:!rs||--rs&&S===st)||queueMicrotask(T?(function(W){++Nc,Yt.echoes&&--Yt.echoes!=0||(Yt.echoes=Yt.awaits=Yt.id=0),gi.push(st),Xn(W,!0)}).bind(null,S):Jo),S!==st&&(st=S,$===qn&&(qn.env=Uu()),bn&&(O=qn.env.Promise,T=S.env,($.global||S.global)&&(Object.defineProperty(i,"Promise",T.PromiseProp),O.all=T.all,O.race=T.race,O.resolve=T.resolve,O.reject=T.reject,T.allSettled&&(O.allSettled=T.allSettled),T.any&&(O.any=T.any))))}function Uu(){var S=i.Promise;return bn?{Promise:S,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:S.all,race:S.race,allSettled:S.allSettled,any:S.any,resolve:S.resolve,reject:S.reject}:{}}function is(S,T,O,$,W){var X=st;try{return Xn(S,!0),T(O,$,W)}finally{Xn(X,!1)}}function ss(S,T,O,$){return typeof S!="function"?S:function(){var W=st;O&&yi(),Xn(T,!0);try{return S.apply(this,arguments)}finally{Xn(W,!1),$&&queueMicrotask(_o)}}}function Ms(S){Promise===qt&&Yt.echoes===0?rs===0?S():enqueueNativeMicroTask(S):setTimeout(S,0)}(""+qi).indexOf("[native code]")===-1&&(yi=_o=Xe);var vr=tt.reject,sa="￿",ei="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ff="String expected.",Ui=[],zi="__dbnames",Zr="readonly",qa="readwrite";function aa(S,T){return S?T?function(){return S.apply(this,arguments)&&T.apply(this,arguments)}:S:T}var la={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ka(S){return typeof S!="string"||/\./.test(S)?function(T){return T}:function(T){return T[S]===void 0&&S in T&&delete(T=H(T))[S],T}}function Pc(){throw Ie.Type()}function tn(S,T){try{var O=Dc(S),$=Dc(T);if(O!==$)return O==="Array"?1:$==="Array"?-1:O==="binary"?1:$==="binary"?-1:O==="string"?1:$==="string"?-1:O==="Date"?1:$!=="Date"?NaN:-1;switch(O){case"number":case"Date":case"string":return T<S?1:S<T?-1:0;case"binary":return function(W,X){for(var oe=W.length,le=X.length,he=oe<le?oe:le,me=0;me<he;++me)if(W[me]!==X[me])return W[me]<X[me]?-1:1;return oe===le?0:oe<le?-1:1}(No(S),No(T));case"Array":return function(W,X){for(var oe=W.length,le=X.length,he=oe<le?oe:le,me=0;me<he;++me){var be=tn(W[me],X[me]);if(be!==0)return be}return oe===le?0:oe<le?-1:1}(S,T)}}catch{}return NaN}function Dc(S){var T=typeof S;return T!="object"?T:ArrayBuffer.isView(S)?"binary":(S=re(S),S==="ArrayBuffer"?"binary":S)}function No(S){return S instanceof Uint8Array?S:ArrayBuffer.isView(S)?new Uint8Array(S.buffer,S.byteOffset,S.byteLength):new Uint8Array(S)}var zu=(nr.prototype._trans=function(S,T,O){var $=this._tx||st.trans,W=this.name,X=Wt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(S==="readonly"?"read":"write"," ").concat(this.name));function oe(me,be,de){if(!de.schema[W])throw new Ie.NotFound("Table "+W+" not part of transaction");return T(de.idbtrans,de)}var le=sr();try{var he=$&&$.db._novip===this.db._novip?$===st.trans?$._promise(S,oe,O):Zo(function(){return $._promise(S,oe,O)},{trans:$,transless:st.transless||st}):function me(be,de,Se,fe){if(be.idbdb&&(be._state.openComplete||st.letThrough||be._vip)){var ve=be._createTransaction(de,Se,be._dbSchema);try{ve.create(),be._state.PR1398_maxLoop=3}catch(_e){return _e.name===we.InvalidState&&be.isOpen()&&0<--be._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),be.close({disableAutoOpen:!1}),be.open().then(function(){return me(be,de,Se,fe)})):vr(_e)}return ve._promise(de,function(_e,ge){return Zo(function(){return st.trans=ve,fe(_e,ge,ve)})}).then(function(_e){if(de==="readwrite")try{ve.idbtrans.commit()}catch{}return de==="readonly"?_e:ve._completion.then(function(){return _e})})}if(be._state.openComplete)return vr(new Ie.DatabaseClosed(be._state.dbOpenError));if(!be._state.isBeingOpened){if(!be._state.autoOpen)return vr(new Ie.DatabaseClosed);be.open().catch(Xe)}return be._state.dbReadyPromise.then(function(){return me(be,de,Se,fe)})}(this.db,S,[this.name],oe);return X&&(he._consoleTask=X,he=he.catch(function(me){return console.trace(me),vr(me)})),he}finally{le&&er()}},nr.prototype.get=function(S,T){var O=this;return S&&S.constructor===Object?this.where(S).first(T):S==null?vr(new Ie.Type("Invalid argument to Table.get()")):this._trans("readonly",function($){return O.core.get({trans:$,key:S}).then(function(W){return O.hook.reading.fire(W)})}).then(T)},nr.prototype.where=function(S){if(typeof S=="string")return new this.db.WhereClause(this,S);if(a(S))return new this.db.WhereClause(this,"[".concat(S.join("+"),"]"));var T=s(S);if(T.length===1)return this.where(T[0]).equals(S[T[0]]);var O=this.schema.indexes.concat(this.schema.primKey).filter(function(le){if(le.compound&&T.every(function(me){return 0<=le.keyPath.indexOf(me)})){for(var he=0;he<T.length;++he)if(T.indexOf(le.keyPath[he])===-1)return!1;return!0}return!1}).sort(function(le,he){return le.keyPath.length-he.keyPath.length})[0];if(O&&this.db._maxKey!==sa){var X=O.keyPath.slice(0,T.length);return this.where(X).equals(X.map(function(he){return S[he]}))}!O&&Wt&&console.warn("The query ".concat(JSON.stringify(S)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(T.join("+"),"]"));var $=this.schema.idxByName;function W(le,he){return tn(le,he)===0}var oe=T.reduce(function(de,he){var me=de[0],be=de[1],de=$[he],Se=S[he];return[me||de,me||!de?aa(be,de&&de.multi?function(fe){return fe=F(fe,he),a(fe)&&fe.some(function(ve){return W(Se,ve)})}:function(fe){return W(Se,F(fe,he))}):be]},[null,null]),X=oe[0],oe=oe[1];return X?this.where(X.name).equals(S[X.keyPath]).filter(oe):O?this.filter(oe):this.where(T).equals("")},nr.prototype.filter=function(S){return this.toCollection().and(S)},nr.prototype.count=function(S){return this.toCollection().count(S)},nr.prototype.offset=function(S){return this.toCollection().offset(S)},nr.prototype.limit=function(S){return this.toCollection().limit(S)},nr.prototype.each=function(S){return this.toCollection().each(S)},nr.prototype.toArray=function(S){return this.toCollection().toArray(S)},nr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},nr.prototype.orderBy=function(S){return new this.db.Collection(new this.db.WhereClause(this,a(S)?"[".concat(S.join("+"),"]"):S))},nr.prototype.reverse=function(){return this.toCollection().reverse()},nr.prototype.mapToClass=function(S){var T,O=this.db,$=this.name;function W(){return T!==null&&T.apply(this,arguments)||this}(this.schema.mappedClass=S).prototype instanceof Pc&&(function(he,me){if(typeof me!="function"&&me!==null)throw new TypeError("Class extends value "+String(me)+" is not a constructor or null");function be(){this.constructor=he}n(he,me),he.prototype=me===null?Object.create(me):(be.prototype=me.prototype,new be)}(W,T=S),Object.defineProperty(W.prototype,"db",{get:function(){return O},enumerable:!1,configurable:!0}),W.prototype.table=function(){return $},S=W);for(var X=new Set,oe=S.prototype;oe;oe=c(oe))Object.getOwnPropertyNames(oe).forEach(function(he){return X.add(he)});function le(he){if(!he)return he;var me,be=Object.create(S.prototype);for(me in he)if(!X.has(me))try{be[me]=he[me]}catch{}return be}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=le,this.hook("reading",le),S},nr.prototype.defineClass=function(){return this.mapToClass(function(S){l(this,S)})},nr.prototype.add=function(S,T){var O=this,$=this.schema.primKey,W=$.auto,X=$.keyPath,oe=S;return X&&W&&(oe=Ka(X)(S)),this._trans("readwrite",function(le){return O.core.mutate({trans:le,type:"add",keys:T!=null?[T]:null,values:[oe]})}).then(function(le){return le.numFailures?tt.reject(le.failures[0]):le.lastResult}).then(function(le){if(X)try{D(S,X,le)}catch{}return le})},nr.prototype.update=function(S,T){return typeof S!="object"||a(S)?this.where(":id").equals(S).modify(T):(S=F(S,this.schema.primKey.keyPath),S===void 0?vr(new Ie.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(S).modify(T))},nr.prototype.put=function(S,T){var O=this,$=this.schema.primKey,W=$.auto,X=$.keyPath,oe=S;return X&&W&&(oe=Ka(X)(S)),this._trans("readwrite",function(le){return O.core.mutate({trans:le,type:"put",values:[oe],keys:T!=null?[T]:null})}).then(function(le){return le.numFailures?tt.reject(le.failures[0]):le.lastResult}).then(function(le){if(X)try{D(S,X,le)}catch{}return le})},nr.prototype.delete=function(S){var T=this;return this._trans("readwrite",function(O){return T.core.mutate({trans:O,type:"delete",keys:[S]})}).then(function(O){return O.numFailures?tt.reject(O.failures[0]):void 0})},nr.prototype.clear=function(){var S=this;return this._trans("readwrite",function(T){return S.core.mutate({trans:T,type:"deleteRange",range:la})}).then(function(T){return T.numFailures?tt.reject(T.failures[0]):void 0})},nr.prototype.bulkGet=function(S){var T=this;return this._trans("readonly",function(O){return T.core.getMany({keys:S,trans:O}).then(function($){return $.map(function(W){return T.hook.reading.fire(W)})})})},nr.prototype.bulkAdd=function(S,T,O){var $=this,W=Array.isArray(T)?T:void 0,X=(O=O||(W?void 0:T))?O.allKeys:void 0;return this._trans("readwrite",function(oe){var me=$.schema.primKey,le=me.auto,me=me.keyPath;if(me&&W)throw new Ie.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(W&&W.length!==S.length)throw new Ie.InvalidArgument("Arguments objects and keys must have the same length");var he=S.length,me=me&&le?S.map(Ka(me)):S;return $.core.mutate({trans:oe,type:"add",keys:W,values:me,wantResults:X}).then(function(ve){var de=ve.numFailures,Se=ve.results,fe=ve.lastResult,ve=ve.failures;if(de===0)return X?Se:fe;throw new ye("".concat($.name,".bulkAdd(): ").concat(de," of ").concat(he," operations failed"),ve)})})},nr.prototype.bulkPut=function(S,T,O){var $=this,W=Array.isArray(T)?T:void 0,X=(O=O||(W?void 0:T))?O.allKeys:void 0;return this._trans("readwrite",function(oe){var me=$.schema.primKey,le=me.auto,me=me.keyPath;if(me&&W)throw new Ie.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(W&&W.length!==S.length)throw new Ie.InvalidArgument("Arguments objects and keys must have the same length");var he=S.length,me=me&&le?S.map(Ka(me)):S;return $.core.mutate({trans:oe,type:"put",keys:W,values:me,wantResults:X}).then(function(ve){var de=ve.numFailures,Se=ve.results,fe=ve.lastResult,ve=ve.failures;if(de===0)return X?Se:fe;throw new ye("".concat($.name,".bulkPut(): ").concat(de," of ").concat(he," operations failed"),ve)})})},nr.prototype.bulkUpdate=function(S){var T=this,O=this.core,$=S.map(function(oe){return oe.key}),W=S.map(function(oe){return oe.changes}),X=[];return this._trans("readwrite",function(oe){return O.getMany({trans:oe,keys:$,cache:"clone"}).then(function(le){var he=[],me=[];S.forEach(function(de,Se){var fe=de.key,ve=de.changes,_e=le[Se];if(_e){for(var ge=0,Ae=Object.keys(ve);ge<Ae.length;ge++){var Ne=Ae[ge],Oe=ve[Ne];if(Ne===T.schema.primKey.keyPath){if(tn(Oe,fe)!==0)throw new Ie.Constraint("Cannot update primary key in bulkUpdate()")}else D(_e,Ne,Oe)}X.push(Se),he.push(fe),me.push(_e)}});var be=he.length;return O.mutate({trans:oe,type:"put",keys:he,values:me,updates:{keys:$,changeSpecs:W}}).then(function(de){var Se=de.numFailures,fe=de.failures;if(Se===0)return be;for(var ve=0,_e=Object.keys(fe);ve<_e.length;ve++){var ge,Ae=_e[ve],Ne=X[Number(Ae)];Ne!=null&&(ge=fe[Ae],delete fe[Ae],fe[Ne]=ge)}throw new ye("".concat(T.name,".bulkUpdate(): ").concat(Se," of ").concat(be," operations failed"),fe)})})})},nr.prototype.bulkDelete=function(S){var T=this,O=S.length;return this._trans("readwrite",function($){return T.core.mutate({trans:$,type:"delete",keys:S})}).then(function(oe){var W=oe.numFailures,X=oe.lastResult,oe=oe.failures;if(W===0)return X;throw new ye("".concat(T.name,".bulkDelete(): ").concat(W," of ").concat(O," operations failed"),oe)})},nr);function nr(){}function ca(S){function T(oe,le){if(le){for(var he=arguments.length,me=new Array(he-1);--he;)me[he-1]=arguments[he];return O[oe].subscribe.apply(null,me),S}if(typeof oe=="string")return O[oe]}var O={};T.addEventType=X;for(var $=1,W=arguments.length;$<W;++$)X(arguments[$]);return T;function X(oe,le,he){if(typeof oe!="object"){var me;le=le||sn;var be={subscribers:[],fire:he=he||Xe,subscribe:function(de){be.subscribers.indexOf(de)===-1&&(be.subscribers.push(de),be.fire=le(be.fire,de))},unsubscribe:function(de){be.subscribers=be.subscribers.filter(function(Se){return Se!==de}),be.fire=be.subscribers.reduce(le,he)}};return O[oe]=T[oe]=be}s(me=oe).forEach(function(de){var Se=me[de];if(a(Se))X(de,me[de][0],me[de][1]);else{if(Se!=="asap")throw new Ie.InvalidArgument("Invalid event config");var fe=X(de,zt,function(){for(var ve=arguments.length,_e=new Array(ve);ve--;)_e[ve]=arguments[ve];fe.subscribers.forEach(function(ge){B(function(){ge.apply(null,_e)})})})}})}}function Wa(S,T){return b(T).from({prototype:S}),T}function as(S,T){return!(S.filter||S.algorithm||S.or)&&(T?S.justLimit:!S.replayFilter)}function Hf(S,T){S.filter=aa(S.filter,T)}function Mr(S,T,O){var $=S.replayFilter;S.replayFilter=$?function(){return aa($(),T())}:T,S.justLimit=O&&!$}function Oo(S,T){if(S.isPrimKey)return T.primaryKey;var O=T.getIndexByKeyPath(S.index);if(!O)throw new Ie.Schema("KeyPath "+S.index+" on object store "+T.name+" is not indexed");return O}function Dl(S,T,O){var $=Oo(S,T.schema);return T.openCursor({trans:O,values:!S.keysOnly,reverse:S.dir==="prev",unique:!!S.unique,query:{index:$,range:S.range}})}function Ns(S,T,O,$){var W=S.replayFilter?aa(S.filter,S.replayFilter()):S.filter;if(S.or){var X={},oe=function(le,he,me){var be,de;W&&!W(he,me,function(Se){return he.stop(Se)},function(Se){return he.fail(Se)})||((de=""+(be=he.primaryKey))=="[object ArrayBuffer]"&&(de=""+new Uint8Array(be)),f(X,de)||(X[de]=!0,T(le,he,me)))};return Promise.all([S.or._iterate(oe,O),ua(Dl(S,$,O),S.algorithm,oe,!S.keysOnly&&S.valueMapper)])}return ua(Dl(S,$,O),aa(S.algorithm,W),T,!S.keysOnly&&S.valueMapper)}function ua(S,T,O,$){var W=wt($?function(X,oe,le){return O($(X),oe,le)}:O);return S.then(function(X){if(X)return X.start(function(){var oe=function(){return X.continue()};T&&!T(X,function(le){return oe=le},function(le){X.stop(le),oe=Xe},function(le){X.fail(le),oe=Xe})||W(X.value,X,function(le){return oe=le}),oe()})})}var jn=(Ll.prototype.execute=function(S){var T=this["@@propmod"];if(T.add!==void 0){var O=T.add;if(a(O))return o(o([],a(S)?S:[],!0),O).sort();if(typeof O=="number")return(Number(S)||0)+O;if(typeof O=="bigint")try{return BigInt(S)+O}catch{return BigInt(0)+O}throw new TypeError("Invalid term ".concat(O))}if(T.remove!==void 0){var $=T.remove;if(a($))return a(S)?S.filter(function(W){return!$.includes(W)}).sort():[];if(typeof $=="number")return Number(S)-$;if(typeof $=="bigint")try{return BigInt(S)-$}catch{return BigInt(0)-$}throw new TypeError("Invalid subtrahend ".concat($))}return O=(O=T.replacePrefix)===null||O===void 0?void 0:O[0],O&&typeof S=="string"&&S.startsWith(O)?T.replacePrefix[1]+S.substring(O.length):S},Ll);function Ll(S){this["@@propmod"]=S}var ls=(an.prototype._read=function(S,T){var O=this._ctx;return O.error?O.table._trans(null,vr.bind(null,O.error)):O.table._trans("readonly",S).then(T)},an.prototype._write=function(S){var T=this._ctx;return T.error?T.table._trans(null,vr.bind(null,T.error)):T.table._trans("readwrite",S,"locked")},an.prototype._addAlgorithm=function(S){var T=this._ctx;T.algorithm=aa(T.algorithm,S)},an.prototype._iterate=function(S,T){return Ns(this._ctx,S,T,this._ctx.table.core)},an.prototype.clone=function(S){var T=Object.create(this.constructor.prototype),O=Object.create(this._ctx);return S&&l(O,S),T._ctx=O,T},an.prototype.raw=function(){return this._ctx.valueMapper=null,this},an.prototype.each=function(S){var T=this._ctx;return this._read(function(O){return Ns(T,S,O,T.table.core)})},an.prototype.count=function(S){var T=this;return this._read(function(O){var $=T._ctx,W=$.table.core;if(as($,!0))return W.count({trans:O,query:{index:Oo($,W.schema),range:$.range}}).then(function(oe){return Math.min(oe,$.limit)});var X=0;return Ns($,function(){return++X,!1},O,W).then(function(){return X})}).then(S)},an.prototype.sortBy=function(S,T){var O=S.split(".").reverse(),$=O[0],W=O.length-1;function X(he,me){return me?X(he[O[me]],me-1):he[$]}var oe=this._ctx.dir==="next"?1:-1;function le(he,me){return tn(X(he,W),X(me,W))*oe}return this.toArray(function(he){return he.sort(le)}).then(T)},an.prototype.toArray=function(S){var T=this;return this._read(function(O){var $=T._ctx;if($.dir==="next"&&as($,!0)&&0<$.limit){var W=$.valueMapper,X=Oo($,$.table.core.schema);return $.table.core.query({trans:O,limit:$.limit,values:!0,query:{index:X,range:$.range}}).then(function(le){return le=le.result,W?le.map(W):le})}var oe=[];return Ns($,function(le){return oe.push(le)},O,$.table.core).then(function(){return oe})},S)},an.prototype.offset=function(S){var T=this._ctx;return S<=0||(T.offset+=S,as(T)?Mr(T,function(){var O=S;return function($,W){return O===0||(O===1?--O:W(function(){$.advance(O),O=0}),!1)}}):Mr(T,function(){var O=S;return function(){return--O<0}})),this},an.prototype.limit=function(S){return this._ctx.limit=Math.min(this._ctx.limit,S),Mr(this._ctx,function(){var T=S;return function(O,$,W){return--T<=0&&$(W),0<=T}},!0),this},an.prototype.until=function(S,T){return Hf(this._ctx,function(O,$,W){return!S(O.value)||($(W),T)}),this},an.prototype.first=function(S){return this.limit(1).toArray(function(T){return T[0]}).then(S)},an.prototype.last=function(S){return this.reverse().first(S)},an.prototype.filter=function(S){var T;return Hf(this._ctx,function(O){return S(O.value)}),(T=this._ctx).isMatch=aa(T.isMatch,S),this},an.prototype.and=function(S){return this.filter(S)},an.prototype.or=function(S){return new this.db.WhereClause(this._ctx.table,S,this)},an.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},an.prototype.desc=function(){return this.reverse()},an.prototype.eachKey=function(S){var T=this._ctx;return T.keysOnly=!T.isMatch,this.each(function(O,$){S($.key,$)})},an.prototype.eachUniqueKey=function(S){return this._ctx.unique="unique",this.eachKey(S)},an.prototype.eachPrimaryKey=function(S){var T=this._ctx;return T.keysOnly=!T.isMatch,this.each(function(O,$){S($.primaryKey,$)})},an.prototype.keys=function(S){var T=this._ctx;T.keysOnly=!T.isMatch;var O=[];return this.each(function($,W){O.push(W.key)}).then(function(){return O}).then(S)},an.prototype.primaryKeys=function(S){var T=this._ctx;if(T.dir==="next"&&as(T,!0)&&0<T.limit)return this._read(function($){var W=Oo(T,T.table.core.schema);return T.table.core.query({trans:$,values:!1,limit:T.limit,query:{index:W,range:T.range}})}).then(function($){return $.result}).then(S);T.keysOnly=!T.isMatch;var O=[];return this.each(function($,W){O.push(W.primaryKey)}).then(function(){return O}).then(S)},an.prototype.uniqueKeys=function(S){return this._ctx.unique="unique",this.keys(S)},an.prototype.firstKey=function(S){return this.limit(1).keys(function(T){return T[0]}).then(S)},an.prototype.lastKey=function(S){return this.reverse().firstKey(S)},an.prototype.distinct=function(){var S=this._ctx,S=S.index&&S.table.schema.idxByName[S.index];if(!S||!S.multi)return this;var T={};return Hf(this._ctx,function(W){var $=W.primaryKey.toString(),W=f(T,$);return T[$]=!0,!W}),this},an.prototype.modify=function(S){var T=this,O=this._ctx;return this._write(function($){var W,X,oe;oe=typeof S=="function"?S:(W=s(S),X=W.length,function(ge){for(var Ae=!1,Ne=0;Ne<X;++Ne){var Oe=W[Ne],Ve=S[Oe],We=F(ge,Oe);Ve instanceof jn?(D(ge,Oe,Ve.execute(We)),Ae=!0):We!==Ve&&(D(ge,Oe,Ve),Ae=!0)}return Ae});var le=O.table.core,de=le.schema.primaryKey,he=de.outbound,me=de.extractKey,be=200,de=T.db._options.modifyChunkSize;de&&(be=typeof de=="object"?de[le.name]||de["*"]||200:de);function Se(ge,Oe){var Ne=Oe.failures,Oe=Oe.numFailures;ve+=ge-Oe;for(var Ve=0,We=s(Ne);Ve<We.length;Ve++){var rt=We[Ve];fe.push(Ne[rt])}}var fe=[],ve=0,_e=[];return T.clone().primaryKeys().then(function(ge){function Ae(Oe){var Ve=Math.min(be,ge.length-Oe);return le.getMany({trans:$,keys:ge.slice(Oe,Oe+Ve),cache:"immutable"}).then(function(We){for(var rt=[],qe=[],Je=he?[]:null,ot=[],Ke=0;Ke<Ve;++Ke){var lt=We[Ke],_t={value:H(lt),primKey:ge[Oe+Ke]};oe.call(_t,_t.value,_t)!==!1&&(_t.value==null?ot.push(ge[Oe+Ke]):he||tn(me(lt),me(_t.value))===0?(qe.push(_t.value),he&&Je.push(ge[Oe+Ke])):(ot.push(ge[Oe+Ke]),rt.push(_t.value)))}return Promise.resolve(0<rt.length&&le.mutate({trans:$,type:"add",values:rt}).then(function(It){for(var Ht in It.failures)ot.splice(parseInt(Ht),1);Se(rt.length,It)})).then(function(){return(0<qe.length||Ne&&typeof S=="object")&&le.mutate({trans:$,type:"put",keys:Je,values:qe,criteria:Ne,changeSpec:typeof S!="function"&&S,isAdditionalChunk:0<Oe}).then(function(It){return Se(qe.length,It)})}).then(function(){return(0<ot.length||Ne&&S===Gu)&&le.mutate({trans:$,type:"delete",keys:ot,criteria:Ne,isAdditionalChunk:0<Oe}).then(function(It){return Se(ot.length,It)})}).then(function(){return ge.length>Oe+Ve&&Ae(Oe+be)})})}var Ne=as(O)&&O.limit===1/0&&(typeof S!="function"||S===Gu)&&{index:O.index,range:O.range};return Ae(0).then(function(){if(0<fe.length)throw new ae("Error modifying one or more objects",fe,ve,_e);return ge.length})})})},an.prototype.delete=function(){var S=this._ctx,T=S.range;return as(S)&&(S.isPrimKey||T.type===3)?this._write(function(O){var $=S.table.core.schema.primaryKey,W=T;return S.table.core.count({trans:O,query:{index:$,range:W}}).then(function(X){return S.table.core.mutate({trans:O,type:"deleteRange",range:W}).then(function(oe){var le=oe.failures;if(oe.lastResult,oe.results,oe=oe.numFailures,oe)throw new ae("Could not delete some values",Object.keys(le).map(function(he){return le[he]}),X-oe);return X-oe})})}):this.modify(Gu)},an);function an(){}var Gu=function(S,T){return T.value=null};function Uf(S,T){return S<T?-1:S===T?0:1}function zf(S,T){return T<S?-1:S===T?0:1}function ti(S,T,O){return S=S instanceof da?new S.Collection(S):S,S._ctx.error=new(O||TypeError)(T),S}function Vl(S){return new S.Collection(S,function(){return Gi("")}).limit(0)}function Ya(S,T,O,$){var W,X,oe,le,he,me,be,de=O.length;if(!O.every(function(ve){return typeof ve=="string"}))return ti(S,Ff);function Se(ve){W=ve==="next"?function(ge){return ge.toUpperCase()}:function(ge){return ge.toLowerCase()},X=ve==="next"?function(ge){return ge.toLowerCase()}:function(ge){return ge.toUpperCase()},oe=ve==="next"?Uf:zf;var _e=O.map(function(ge){return{lower:X(ge),upper:W(ge)}}).sort(function(ge,Ae){return oe(ge.lower,Ae.lower)});le=_e.map(function(ge){return ge.upper}),he=_e.map(function(ge){return ge.lower}),be=(me=ve)==="next"?"":$}Se("next"),S=new S.Collection(S,function(){return Po(le[0],he[de-1]+$)}),S._ondirectionchange=function(ve){Se(ve)};var fe=0;return S._addAlgorithm(function(ve,_e,ge){var Ae=ve.key;if(typeof Ae!="string")return!1;var Ne=X(Ae);if(T(Ne,he,fe))return!0;for(var Oe=null,Ve=fe;Ve<de;++Ve){var We=function(rt,qe,Je,ot,Ke,lt){for(var _t=Math.min(rt.length,ot.length),It=-1,Ht=0;Ht<_t;++Ht){var ni=qe[Ht];if(ni!==ot[Ht])return Ke(rt[Ht],Je[Ht])<0?rt.substr(0,Ht)+Je[Ht]+Je.substr(Ht+1):Ke(rt[Ht],ot[Ht])<0?rt.substr(0,Ht)+ot[Ht]+Je.substr(Ht+1):0<=It?rt.substr(0,It)+qe[It]+Je.substr(It+1):null;Ke(rt[Ht],ni)<0&&(It=Ht)}return _t<ot.length&&lt==="next"?rt+Je.substr(rt.length):_t<rt.length&&lt==="prev"?rt.substr(0,Je.length):It<0?null:rt.substr(0,It)+ot[It]+Je.substr(It+1)}(Ae,Ne,le[Ve],he[Ve],oe,me);We===null&&Oe===null?fe=Ve+1:(Oe===null||0<oe(Oe,We))&&(Oe=We)}return _e(Oe!==null?function(){ve.continue(Oe+be)}:ge),!1}),S}function Po(S,T,O,$){return{type:2,lower:S,upper:T,lowerOpen:O,upperOpen:$}}function Gi(S){return{type:1,lower:S,upper:S}}var da=(Object.defineProperty(ar.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ar.prototype.between=function(S,T,O,$){O=O!==!1,$=$===!0;try{return 0<this._cmp(S,T)||this._cmp(S,T)===0&&(O||$)&&(!O||!$)?Vl(this):new this.Collection(this,function(){return Po(S,T,!O,!$)})}catch{return ti(this,ei)}},ar.prototype.equals=function(S){return S==null?ti(this,ei):new this.Collection(this,function(){return Gi(S)})},ar.prototype.above=function(S){return S==null?ti(this,ei):new this.Collection(this,function(){return Po(S,void 0,!0)})},ar.prototype.aboveOrEqual=function(S){return S==null?ti(this,ei):new this.Collection(this,function(){return Po(S,void 0,!1)})},ar.prototype.below=function(S){return S==null?ti(this,ei):new this.Collection(this,function(){return Po(void 0,S,!1,!0)})},ar.prototype.belowOrEqual=function(S){return S==null?ti(this,ei):new this.Collection(this,function(){return Po(void 0,S)})},ar.prototype.startsWith=function(S){return typeof S!="string"?ti(this,Ff):this.between(S,S+sa,!0,!0)},ar.prototype.startsWithIgnoreCase=function(S){return S===""?this.startsWith(S):Ya(this,function(T,O){return T.indexOf(O[0])===0},[S],sa)},ar.prototype.equalsIgnoreCase=function(S){return Ya(this,function(T,O){return T===O[0]},[S],"")},ar.prototype.anyOfIgnoreCase=function(){var S=Y.apply(J,arguments);return S.length===0?Vl(this):Ya(this,function(T,O){return O.indexOf(T)!==-1},S,"")},ar.prototype.startsWithAnyOfIgnoreCase=function(){var S=Y.apply(J,arguments);return S.length===0?Vl(this):Ya(this,function(T,O){return O.some(function($){return T.indexOf($)===0})},S,sa)},ar.prototype.anyOf=function(){var S=this,T=Y.apply(J,arguments),O=this._cmp;try{T.sort(O)}catch{return ti(this,ei)}if(T.length===0)return Vl(this);var $=new this.Collection(this,function(){return Po(T[0],T[T.length-1])});$._ondirectionchange=function(X){O=X==="next"?S._ascending:S._descending,T.sort(O)};var W=0;return $._addAlgorithm(function(X,oe,le){for(var he=X.key;0<O(he,T[W]);)if(++W===T.length)return oe(le),!1;return O(he,T[W])===0||(oe(function(){X.continue(T[W])}),!1)}),$},ar.prototype.notEqual=function(S){return this.inAnyRange([[-1/0,S],[S,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ar.prototype.noneOf=function(){var S=Y.apply(J,arguments);if(S.length===0)return new this.Collection(this);try{S.sort(this._ascending)}catch{return ti(this,ei)}var T=S.reduce(function(O,$){return O?O.concat([[O[O.length-1][1],$]]):[[-1/0,$]]},null);return T.push([S[S.length-1],this.db._maxKey]),this.inAnyRange(T,{includeLowers:!1,includeUppers:!1})},ar.prototype.inAnyRange=function(Ae,T){var O=this,$=this._cmp,W=this._ascending,X=this._descending,oe=this._min,le=this._max;if(Ae.length===0)return Vl(this);if(!Ae.every(function(Ne){return Ne[0]!==void 0&&Ne[1]!==void 0&&W(Ne[0],Ne[1])<=0}))return ti(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ie.InvalidArgument);var he=!T||T.includeLowers!==!1,me=T&&T.includeUppers===!0,be,de=W;function Se(Ne,Oe){return de(Ne[0],Oe[0])}try{(be=Ae.reduce(function(Ne,Oe){for(var Ve=0,We=Ne.length;Ve<We;++Ve){var rt=Ne[Ve];if($(Oe[0],rt[1])<0&&0<$(Oe[1],rt[0])){rt[0]=oe(rt[0],Oe[0]),rt[1]=le(rt[1],Oe[1]);break}}return Ve===We&&Ne.push(Oe),Ne},[])).sort(Se)}catch{return ti(this,ei)}var fe=0,ve=me?function(Ne){return 0<W(Ne,be[fe][1])}:function(Ne){return 0<=W(Ne,be[fe][1])},_e=he?function(Ne){return 0<X(Ne,be[fe][0])}:function(Ne){return 0<=X(Ne,be[fe][0])},ge=ve,Ae=new this.Collection(this,function(){return Po(be[0][0],be[be.length-1][1],!he,!me)});return Ae._ondirectionchange=function(Ne){de=Ne==="next"?(ge=ve,W):(ge=_e,X),be.sort(Se)},Ae._addAlgorithm(function(Ne,Oe,Ve){for(var We,rt=Ne.key;ge(rt);)if(++fe===be.length)return Oe(Ve),!1;return!ve(We=rt)&&!_e(We)||(O._cmp(rt,be[fe][1])===0||O._cmp(rt,be[fe][0])===0||Oe(function(){de===W?Ne.continue(be[fe][0]):Ne.continue(be[fe][1])}),!1)}),Ae},ar.prototype.startsWithAnyOf=function(){var S=Y.apply(J,arguments);return S.every(function(T){return typeof T=="string"})?S.length===0?Vl(this):this.inAnyRange(S.map(function(T){return[T,T+sa]})):ti(this,"startsWithAnyOf() only works with strings")},ar);function ar(){}function vi(S){return wt(function(T){return bi(T),S(T.target.error),!1})}function bi(S){S.stopPropagation&&S.stopPropagation(),S.preventDefault&&S.preventDefault()}var jl="storagemutated",Xa="x-storagemutated-1",lo=ca(null,jl),cs=(Do.prototype._lock=function(){return j(!st.global),++this._reculock,this._reculock!==1||st.global||(st.lockOwnerFor=this),this},Do.prototype._unlock=function(){if(j(!st.global),--this._reculock==0)for(st.global||(st.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var S=this._blockedFuncs.shift();try{is(S[1],S[0])}catch{}}return this},Do.prototype._locked=function(){return this._reculock&&st.lockOwnerFor!==this},Do.prototype.create=function(S){var T=this;if(!this.mode)return this;var O=this.db.idbdb,$=this.db._state.dbOpenError;if(j(!this.idbtrans),!S&&!O)switch($&&$.name){case"DatabaseClosedError":throw new Ie.DatabaseClosed($);case"MissingAPIError":throw new Ie.MissingAPI($.message,$);default:throw new Ie.OpenFailed($)}if(!this.active)throw new Ie.TransactionInactive;return j(this._completion._state===null),(S=this.idbtrans=S||(this.db.core||O).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=wt(function(W){bi(W),T._reject(S.error)}),S.onabort=wt(function(W){bi(W),T.active&&T._reject(new Ie.Abort(S.error)),T.active=!1,T.on("abort").fire(W)}),S.oncomplete=wt(function(){T.active=!1,T._resolve(),"mutatedParts"in S&&lo.storagemutated.fire(S.mutatedParts)}),this},Do.prototype._promise=function(S,T,O){var $=this;if(S==="readwrite"&&this.mode!=="readwrite")return vr(new Ie.ReadOnly("Transaction is readonly"));if(!this.active)return vr(new Ie.TransactionInactive);if(this._locked())return new tt(function(X,oe){$._blockedFuncs.push([function(){$._promise(S,T,O).then(X,oe)},st])});if(O)return Zo(function(){var X=new tt(function(oe,le){$._lock();var he=T(oe,le,$);he&&he.then&&he.then(oe,le)});return X.finally(function(){return $._unlock()}),X._lib=!0,X});var W=new tt(function(X,oe){var le=T(X,oe,$);le&&le.then&&le.then(X,oe)});return W._lib=!0,W},Do.prototype._root=function(){return this.parent?this.parent._root():this},Do.prototype.waitFor=function(S){var T,O=this._root(),$=tt.resolve(S);O._waitingFor?O._waitingFor=O._waitingFor.then(function(){return $}):(O._waitingFor=$,O._waitingQueue=[],T=O.idbtrans.objectStore(O.storeNames[0]),function X(){for(++O._spinCount;O._waitingQueue.length;)O._waitingQueue.shift()();O._waitingFor&&(T.get(-1/0).onsuccess=X)}());var W=O._waitingFor;return new tt(function(X,oe){$.then(function(le){return O._waitingQueue.push(wt(X.bind(null,le)))},function(le){return O._waitingQueue.push(wt(oe.bind(null,le)))}).finally(function(){O._waitingFor===W&&(O._waitingFor=null)})})},Do.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ie.Abort))},Do.prototype.table=function(S){var T=this._memoizedTables||(this._memoizedTables={});if(f(T,S))return T[S];var O=this.schema[S];if(!O)throw new Ie.NotFound("Table "+S+" not part of transaction");return O=new this.db.Table(S,O,this),O.core=this.db.core.table(S),T[S]=O},Do);function Do(){}function us(S,T,O,$,W,X,oe){return{name:S,keyPath:T,unique:O,multi:$,auto:W,compound:X,src:(O&&!oe?"&":"")+($?"*":"")+(W?"++":"")+Qa(T)}}function Qa(S){return typeof S=="string"?S:S?"["+[].join.call(S,"+")+"]":""}function Os(S,T,O){return{name:S,primKey:T,indexes:O,mappedClass:null,idxByName:($=function(W){return[W.name,W]},O.reduce(function(W,X,oe){return oe=$(X,oe),oe&&(W[oe[0]]=oe[1]),W},{}))};var $}var Za=function(S){try{return S.only([[]]),Za=function(){return[[]]},[[]]}catch{return Za=function(){return sa},sa}};function ds(S){return S==null?function(){}:typeof S=="string"?(T=S).split(".").length===1?function(O){return O[T]}:function(O){return F(O,T)}:function(O){return F(O,S)};var T}function Ps(S){return[].slice.call(S)}var Gf=0;function Nr(S){return S==null?":id":typeof S=="string"?S:"[".concat(S.join("+"),"]")}function Un(S,T,he){function $(ge){if(ge.type===3)return null;if(ge.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var fe=ge.lower,ve=ge.upper,_e=ge.lowerOpen,ge=ge.upperOpen;return fe===void 0?ve===void 0?null:T.upperBound(ve,!!ge):ve===void 0?T.lowerBound(fe,!!_e):T.bound(fe,ve,!!_e,!!ge)}function W(Se){var fe,ve=Se.name;return{name:ve,schema:Se,mutate:function(_e){var ge=_e.trans,Ae=_e.type,Ne=_e.keys,Oe=_e.values,Ve=_e.range;return new Promise(function(We,rt){We=wt(We);var qe=ge.objectStore(ve),Je=qe.keyPath==null,ot=Ae==="put"||Ae==="add";if(!ot&&Ae!=="delete"&&Ae!=="deleteRange")throw new Error("Invalid operation type: "+Ae);var Ke,lt=(Ne||Oe||{length:1}).length;if(Ne&&Oe&&Ne.length!==Oe.length)throw new Error("Given keys array must have same length as given values array.");if(lt===0)return We({numFailures:0,failures:{},results:[],lastResult:void 0});function _t(Lo){++ni,bi(Lo)}var It=[],Ht=[],ni=0;if(Ae==="deleteRange"){if(Ve.type===4)return We({numFailures:ni,failures:Ht,results:[],lastResult:void 0});Ve.type===3?It.push(Ke=qe.clear()):It.push(Ke=qe.delete($(Ve)))}else{var Je=ot?Je?[Oe,Ne]:[Oe,null]:[Ne,null],Dt=Je[0],to=Je[1];if(ot)for(var uo=0;uo<lt;++uo)It.push(Ke=to&&to[uo]!==void 0?qe[Ae](Dt[uo],to[uo]):qe[Ae](Dt[uo])),Ke.onerror=_t;else for(uo=0;uo<lt;++uo)It.push(Ke=qe[Ae](Dt[uo])),Ke.onerror=_t}function il(Lo){Lo=Lo.target.result,It.forEach(function(ba,Hl){return ba.error!=null&&(Ht[Hl]=ba.error)}),We({numFailures:ni,failures:Ht,results:Ae==="delete"?Ne:It.map(function(ba){return ba.result}),lastResult:Lo})}Ke.onerror=function(Lo){_t(Lo),il(Lo)},Ke.onsuccess=il})},getMany:function(_e){var ge=_e.trans,Ae=_e.keys;return new Promise(function(Ne,Oe){Ne=wt(Ne);for(var Ve,We=ge.objectStore(ve),rt=Ae.length,qe=new Array(rt),Je=0,ot=0,Ke=function(It){It=It.target,qe[It._pos]=It.result,++ot===Je&&Ne(qe)},lt=vi(Oe),_t=0;_t<rt;++_t)Ae[_t]!=null&&((Ve=We.get(Ae[_t]))._pos=_t,Ve.onsuccess=Ke,Ve.onerror=lt,++Je);Je===0&&Ne(qe)})},get:function(_e){var ge=_e.trans,Ae=_e.key;return new Promise(function(Ne,Oe){Ne=wt(Ne);var Ve=ge.objectStore(ve).get(Ae);Ve.onsuccess=function(We){return Ne(We.target.result)},Ve.onerror=vi(Oe)})},query:(fe=me,function(_e){return new Promise(function(ge,Ae){ge=wt(ge);var Ne,Oe,Ve,Je=_e.trans,We=_e.values,rt=_e.limit,Ke=_e.query,qe=rt===1/0?void 0:rt,ot=Ke.index,Ke=Ke.range,Je=Je.objectStore(ve),ot=ot.isPrimaryKey?Je:Je.index(ot.name),Ke=$(Ke);if(rt===0)return ge({result:[]});fe?((qe=We?ot.getAll(Ke,qe):ot.getAllKeys(Ke,qe)).onsuccess=function(lt){return ge({result:lt.target.result})},qe.onerror=vi(Ae)):(Ne=0,Oe=!We&&"openKeyCursor"in ot?ot.openKeyCursor(Ke):ot.openCursor(Ke),Ve=[],Oe.onsuccess=function(lt){var _t=Oe.result;return _t?(Ve.push(We?_t.value:_t.primaryKey),++Ne===rt?ge({result:Ve}):void _t.continue()):ge({result:Ve})},Oe.onerror=vi(Ae))})}),openCursor:function(_e){var ge=_e.trans,Ae=_e.values,Ne=_e.query,Oe=_e.reverse,Ve=_e.unique;return new Promise(function(We,rt){We=wt(We);var ot=Ne.index,qe=Ne.range,Je=ge.objectStore(ve),Je=ot.isPrimaryKey?Je:Je.index(ot.name),ot=Oe?Ve?"prevunique":"prev":Ve?"nextunique":"next",Ke=!Ae&&"openKeyCursor"in Je?Je.openKeyCursor($(qe),ot):Je.openCursor($(qe),ot);Ke.onerror=vi(rt),Ke.onsuccess=wt(function(lt){var _t,It,Ht,ni,Dt=Ke.result;Dt?(Dt.___id=++Gf,Dt.done=!1,_t=Dt.continue.bind(Dt),It=(It=Dt.continuePrimaryKey)&&It.bind(Dt),Ht=Dt.advance.bind(Dt),ni=function(){throw new Error("Cursor not stopped")},Dt.trans=ge,Dt.stop=Dt.continue=Dt.continuePrimaryKey=Dt.advance=function(){throw new Error("Cursor not started")},Dt.fail=wt(rt),Dt.next=function(){var to=this,uo=1;return this.start(function(){return uo--?to.continue():to.stop()}).then(function(){return to})},Dt.start=function(to){function uo(){if(Ke.result)try{to()}catch(Lo){Dt.fail(Lo)}else Dt.done=!0,Dt.start=function(){throw new Error("Cursor behind last entry")},Dt.stop()}var il=new Promise(function(Lo,ba){Lo=wt(Lo),Ke.onerror=vi(ba),Dt.fail=ba,Dt.stop=function(Hl){Dt.stop=Dt.continue=Dt.continuePrimaryKey=Dt.advance=ni,Lo(Hl)}});return Ke.onsuccess=wt(function(Lo){Ke.onsuccess=uo,uo()}),Dt.continue=_t,Dt.continuePrimaryKey=It,Dt.advance=Ht,uo(),il},We(Dt)):We(null)},rt)})},count:function(_e){var ge=_e.query,Ae=_e.trans,Ne=ge.index,Oe=ge.range;return new Promise(function(Ve,We){var rt=Ae.objectStore(ve),qe=Ne.isPrimaryKey?rt:rt.index(Ne.name),rt=$(Oe),qe=rt?qe.count(rt):qe.count();qe.onsuccess=wt(function(Je){return Ve(Je.target.result)}),qe.onerror=vi(We)})}}}var X,oe,le,be=(oe=he,le=Ps((X=S).objectStoreNames),{schema:{name:X.name,tables:le.map(function(Se){return oe.objectStore(Se)}).map(function(Se){var fe=Se.keyPath,ge=Se.autoIncrement,ve=a(fe),_e={},ge={name:Se.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:fe==null,compound:ve,keyPath:fe,autoIncrement:ge,unique:!0,extractKey:ds(fe)},indexes:Ps(Se.indexNames).map(function(Ae){return Se.index(Ae)}).map(function(Ve){var Ne=Ve.name,Oe=Ve.unique,We=Ve.multiEntry,Ve=Ve.keyPath,We={name:Ne,compound:a(Ve),keyPath:Ve,unique:Oe,multiEntry:We,extractKey:ds(Ve)};return _e[Nr(Ve)]=We}),getIndexByKeyPath:function(Ae){return _e[Nr(Ae)]}};return _e[":id"]=ge.primaryKey,fe!=null&&(_e[Nr(fe)]=ge.primaryKey),ge})},hasGetAll:0<le.length&&"getAll"in oe.objectStore(le[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),he=be.schema,me=be.hasGetAll,be=he.tables.map(W),de={};return be.forEach(function(Se){return de[Se.name]=Se}),{stack:"dbcore",transaction:S.transaction.bind(S),table:function(Se){if(!de[Se])throw new Error("Table '".concat(Se,"' not found"));return de[Se]},MIN_KEY:-1/0,MAX_KEY:Za(T),schema:he}}function qu(S,T,O,$){var W=O.IDBKeyRange;return O.indexedDB,{dbcore:($=Un(T,W,$),S.dbcore.reduce(function(X,oe){return oe=oe.create,r(r({},X),oe(X))},$))}}function fa(S,$){var O=$.db,$=qu(S._middlewares,O,S._deps,$);S.core=$.dbcore,S.tables.forEach(function(W){var X=W.name;S.core.schema.tables.some(function(oe){return oe.name===X})&&(W.core=S.core.table(X),S[X]instanceof S.Table&&(S[X].core=W.core))})}function Lc(S,T,O,$){O.forEach(function(W){var X=$[W];T.forEach(function(oe){var le=function he(me,be){return _(me,be)||(me=c(me))&&he(me,be)}(oe,W);(!le||"value"in le&&le.value===void 0)&&(oe===S.Transaction.prototype||oe instanceof S.Transaction?y(oe,W,{get:function(){return this.table(W)},set:function(he){g(this,W,{value:he,writable:!0,configurable:!0,enumerable:!0})}}):oe[W]=new S.Table(W,X))})})}function Bl(S,T){T.forEach(function(O){for(var $ in O)O[$]instanceof S.Table&&delete O[$]})}function Ku(S,T){return S._cfg.version-T._cfg.version}function ha(S,T,O,$){var W=S._dbSchema;O.objectStoreNames.contains("$meta")&&!W.$meta&&(W.$meta=Os("$meta",jc("")[0],[]),S._storeNames.push("$meta"));var X=S._createTransaction("readwrite",S._storeNames,W);X.create(O),X._completion.catch($);var oe=X._reject.bind(X),le=st.transless||st;Zo(function(){return st.trans=X,st.transless=le,T!==0?(fa(S,O),me=T,((he=X).storeNames.includes("$meta")?he.table("$meta").get("version").then(function(be){return be??me}):tt.resolve(me)).then(function(be){return Se=be,fe=X,ve=O,_e=[],be=(de=S)._versions,ge=de._dbSchema=Ja(0,de.idbdb,ve),(be=be.filter(function(Ae){return Ae._cfg.version>=Se})).length!==0?(be.forEach(function(Ae){_e.push(function(){var Ne=ge,Oe=Ae._cfg.dbschema;$l(de,Ne,ve),$l(de,Oe,ve),ge=de._dbSchema=Oe;var Ve=wi(Ne,Oe);Ve.add.forEach(function(ot){Wu(ve,ot[0],ot[1].primKey,ot[1].indexes)}),Ve.change.forEach(function(ot){if(ot.recreate)throw new Ie.Upgrade("Not yet support for changing primary key");var Ke=ve.objectStore(ot.name);ot.add.forEach(function(lt){return pa(Ke,lt)}),ot.change.forEach(function(lt){Ke.deleteIndex(lt.name),pa(Ke,lt)}),ot.del.forEach(function(lt){return Ke.deleteIndex(lt)})});var We=Ae._cfg.contentUpgrade;if(We&&Ae._cfg.version>Se){fa(de,ve),fe._memoizedTables={};var rt=R(Oe);Ve.del.forEach(function(ot){rt[ot]=Ne[ot]}),Bl(de,[de.Transaction.prototype]),Lc(de,[de.Transaction.prototype],s(rt),rt),fe.schema=rt;var qe,Je=se(We);return Je&&yi(),Ve=tt.follow(function(){var ot;(qe=We(fe))&&Je&&(ot=_o.bind(null,null),qe.then(ot,ot))}),qe&&typeof qe.then=="function"?tt.resolve(qe):Ve.then(function(){return qe})}}),_e.push(function(Ne){var Oe,Ve,We=Ae._cfg.dbschema;Oe=We,Ve=Ne,[].slice.call(Ve.db.objectStoreNames).forEach(function(rt){return Oe[rt]==null&&Ve.db.deleteObjectStore(rt)}),Bl(de,[de.Transaction.prototype]),Lc(de,[de.Transaction.prototype],de._storeNames,de._dbSchema),fe.schema=de._dbSchema}),_e.push(function(Ne){de.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(de.idbdb.version/10)===Ae._cfg.version?(de.idbdb.deleteObjectStore("$meta"),delete de._dbSchema.$meta,de._storeNames=de._storeNames.filter(function(Oe){return Oe!=="$meta"})):Ne.objectStore("$meta").put(Ae._cfg.version,"version"))})}),function Ae(){return _e.length?tt.resolve(_e.shift()(fe.idbtrans)).then(Ae):tt.resolve()}().then(function(){xp(ge,ve)})):tt.resolve();var de,Se,fe,ve,_e,ge}).catch(oe)):(s(W).forEach(function(be){Wu(O,be,W[be].primKey,W[be].indexes)}),fa(S,O),void tt.follow(function(){return S.on.populate.fire(X)}).catch(oe));var he,me})}function Vc(S,T){xp(S._dbSchema,T),T.db.version%10!=0||T.objectStoreNames.contains("$meta")||T.db.createObjectStore("$meta").add(Math.ceil(T.db.version/10-1),"version");var O=Ja(0,S.idbdb,T);$l(S,S._dbSchema,T);for(var $=0,W=wi(O,S._dbSchema).change;$<W.length;$++){var X=function(oe){if(oe.change.length||oe.recreate)return console.warn("Unable to patch indexes of table ".concat(oe.name," because it has changes on the type of index or primary key.")),{value:void 0};var le=T.objectStore(oe.name);oe.add.forEach(function(he){Wt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(oe.name,".").concat(he.src)),pa(le,he)})}(W[$]);if(typeof X=="object")return X.value}}function wi(S,T){var O,$={del:[],add:[],change:[]};for(O in S)T[O]||$.del.push(O);for(O in T){var W=S[O],X=T[O];if(W){var oe={name:O,def:X,recreate:!1,del:[],add:[],change:[]};if(""+(W.primKey.keyPath||"")!=""+(X.primKey.keyPath||"")||W.primKey.auto!==X.primKey.auto)oe.recreate=!0,$.change.push(oe);else{var le=W.idxByName,he=X.idxByName,me=void 0;for(me in le)he[me]||oe.del.push(me);for(me in he){var be=le[me],de=he[me];be?be.src!==de.src&&oe.change.push(de):oe.add.push(de)}(0<oe.del.length||0<oe.add.length||0<oe.change.length)&&$.change.push(oe)}}else $.add.push([O,X])}return $}function Wu(S,T,O,$){var W=S.db.createObjectStore(T,O.keyPath?{keyPath:O.keyPath,autoIncrement:O.auto}:{autoIncrement:O.auto});return $.forEach(function(X){return pa(W,X)}),W}function xp(S,T){s(S).forEach(function(O){T.db.objectStoreNames.contains(O)||(Wt&&console.debug("Dexie: Creating missing table",O),Wu(T,O,S[O].primKey,S[O].indexes))})}function pa(S,T){S.createIndex(T.name,T.keyPath,{unique:T.unique,multiEntry:T.multi})}function Ja(S,T,O){var $={};return M(T.objectStoreNames,0).forEach(function(W){for(var X=O.objectStore(W),oe=us(Qa(me=X.keyPath),me||"",!0,!1,!!X.autoIncrement,me&&typeof me!="string",!0),le=[],he=0;he<X.indexNames.length;++he){var be=X.index(X.indexNames[he]),me=be.keyPath,be=us(be.name,me,!!be.unique,!!be.multiEntry,!1,me&&typeof me!="string",!1);le.push(be)}$[W]=Os(W,oe,le)}),$}function $l(S,T,O){for(var $=O.db.objectStoreNames,W=0;W<$.length;++W){var X=$[W],oe=O.objectStore(X);S._hasGetAll="getAll"in oe;for(var le=0;le<oe.indexNames.length;++le){var he=oe.indexNames[le],me=oe.index(he).keyPath,be=typeof me=="string"?me:"["+M(me).join("+")+"]";!T[X]||(me=T[X].idxByName[be])&&(me.name=he,delete T[X].idxByName[be],T[X].idxByName[he]=me)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(S._hasGetAll=!1)}function jc(S){return S.split(",").map(function(T,O){var $=(T=T.trim()).replace(/([&*]|\+\+)/g,""),W=/^\[/.test($)?$.match(/^\[(.*)\]$/)[1].split("+"):$;return us($,W||null,/\&/.test(T),/\*/.test(T),/\+\+/.test(T),a(W),O===0)})}var Ep=(el.prototype._parseStoresSpec=function(S,T){s(S).forEach(function(O){if(S[O]!==null){var $=jc(S[O]),W=$.shift();if(W.unique=!0,W.multi)throw new Ie.Schema("Primary key cannot be multi-valued");$.forEach(function(X){if(X.auto)throw new Ie.Schema("Only primary key can be marked as autoIncrement (++)");if(!X.keyPath)throw new Ie.Schema("Index must have a name and cannot be an empty string")}),T[O]=Os(O,W,$)}})},el.prototype.stores=function(O){var T=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,O):O;var O=T._versions,$={},W={};return O.forEach(function(X){l($,X._cfg.storesSource),W=X._cfg.dbschema={},X._parseStoresSpec($,W)}),T._dbSchema=W,Bl(T,[T._allTables,T,T.Transaction.prototype]),Lc(T,[T._allTables,T,T.Transaction.prototype,this._cfg.tables],s(W),W),T._storeNames=s(W),this},el.prototype.upgrade=function(S){return this._cfg.contentUpgrade=Ft(this._cfg.contentUpgrade||Xe,S),this},el);function el(){}function qf(S,T){var O=S._dbNamesDB;return O||(O=S._dbNamesDB=new va(zi,{addons:[],indexedDB:S,IDBKeyRange:T})).version(1).stores({dbnames:"name"}),O.table("dbnames")}function Bc(S){return S&&typeof S.databases=="function"}function tl(S){return Zo(function(){return st.letThrough=!0,S()})}function Yu(S){return!("from"in S)}var Jr=function(S,T){if(!this){var O=new Jr;return S&&"d"in S&&l(O,S),O}l(this,arguments.length?{d:1,from:S,to:1<arguments.length?T:S}:{d:0})};function nl(S,T,O){var $=tn(T,O);if(!isNaN($)){if(0<$)throw RangeError();if(Yu(S))return l(S,{from:T,to:O,d:1});var W=S.l,$=S.r;if(tn(O,S.from)<0)return W?nl(W,T,O):S.l={from:T,to:O,d:1,l:null,r:null},Wf(S);if(0<tn(T,S.to))return $?nl($,T,O):S.r={from:T,to:O,d:1,l:null,r:null},Wf(S);tn(T,S.from)<0&&(S.from=T,S.l=null,S.d=$?$.d+1:1),0<tn(O,S.to)&&(S.to=O,S.r=null,S.d=S.l?S.l.d+1:1),O=!S.r,W&&!S.l&&Ds(S,W),$&&O&&Ds(S,$)}}function Ds(S,T){Yu(T)||function O($,he){var X=he.from,oe=he.to,le=he.l,he=he.r;nl($,X,oe),le&&O($,le),he&&O($,he)}(S,T)}function Kf(S,T){var O=rl(T),$=O.next();if($.done)return!1;for(var W=$.value,X=rl(S),oe=X.next(W.from),le=oe.value;!$.done&&!oe.done;){if(tn(le.from,W.to)<=0&&0<=tn(le.to,W.from))return!0;tn(W.from,le.from)<0?W=($=O.next(le.from)).value:le=(oe=X.next(W.from)).value}return!1}function rl(S){var T=Yu(S)?null:{s:0,n:S};return{next:function(O){for(var $=0<arguments.length;T;)switch(T.s){case 0:if(T.s=1,$)for(;T.n.l&&tn(O,T.n.from)<0;)T={up:T,n:T.n.l,s:1};else for(;T.n.l;)T={up:T,n:T.n.l,s:1};case 1:if(T.s=2,!$||tn(O,T.n.to)<=0)return{value:T.n,done:!1};case 2:if(T.n.r){T.s=3,T={up:T,n:T.n.r,s:0};continue}case 3:T=T.up}return{done:!0}}}}function Wf(S){var T,O,$=(((T=S.r)===null||T===void 0?void 0:T.d)||0)-(((O=S.l)===null||O===void 0?void 0:O.d)||0),W=1<$?"r":$<-1?"l":"";W&&(T=W=="r"?"l":"r",O=r({},S),$=S[W],S.from=$.from,S.to=$.to,S[W]=$[W],O[W]=$[T],(S[T]=O).d=Xu(O)),S.d=Xu(S)}function Xu(O){var T=O.r,O=O.l;return(T?O?Math.max(T.d,O.d):T.d:O?O.d:0)+1}function fs(S,T){return s(T).forEach(function(O){S[O]?Ds(S[O],T[O]):S[O]=function $(W){var X,oe,le={};for(X in W)f(W,X)&&(oe=W[X],le[X]=!oe||typeof oe!="object"||z.has(oe.constructor)?oe:$(oe));return le}(T[O])}),S}function Qu(S,T){return S.all||T.all||Object.keys(S).some(function(O){return T[O]&&Kf(T[O],S[O])})}p(Jr.prototype,((qi={add:function(S){return Ds(this,S),this},addKey:function(S){return nl(this,S,S),this},addKeys:function(S){var T=this;return S.forEach(function(O){return nl(T,O,O)}),this},hasKey:function(S){var T=rl(this).next(S).value;return T&&tn(T.from,S)<=0&&0<=tn(T.to,S)}})[V]=function(){return rl(this)},qi));var ma={},Zu={},Ju=!1;function ol(S){fs(Zu,S),Ju||(Ju=!0,setTimeout(function(){Ju=!1,xo(Zu,!(Zu={}))},0))}function xo(S,T){T===void 0&&(T=!1);var O=new Set;if(S.all)for(var $=0,W=Object.values(ma);$<W.length;$++)Yf(oe=W[$],S,O,T);else for(var X in S){var oe,le=/^idb\:\/\/(.*)\/(.*)\//.exec(X);le&&(X=le[1],le=le[2],(oe=ma["idb://".concat(X,"/").concat(le)])&&Yf(oe,S,O,T))}O.forEach(function(he){return he()})}function Yf(S,T,O,$){for(var W=[],X=0,oe=Object.entries(S.queries.query);X<oe.length;X++){for(var le=oe[X],he=le[0],me=[],be=0,de=le[1];be<de.length;be++){var Se=de[be];Qu(T,Se.obsSet)?Se.subscribers.forEach(function(ge){return O.add(ge)}):$&&me.push(Se)}$&&W.push([he,me])}if($)for(var fe=0,ve=W;fe<ve.length;fe++){var _e=ve[fe],he=_e[0],me=_e[1];S.queries.query[he]=me}}function kp(S){var T=S._state,O=S._deps.indexedDB;if(T.isBeingOpened||S.idbdb)return T.dbReadyPromise.then(function(){return T.dbOpenError?vr(T.dbOpenError):S});T.isBeingOpened=!0,T.dbOpenError=null,T.openComplete=!1;var $=T.openCanceller,W=Math.round(10*S.verno),X=!1;function oe(){if(T.openCanceller!==$)throw new Ie.DatabaseClosed("db.open() was cancelled")}function le(){return new tt(function(Se,fe){if(oe(),!O)throw new Ie.MissingAPI;var ve=S.name,_e=T.autoSchema||!W?O.open(ve):O.open(ve,W);if(!_e)throw new Ie.MissingAPI;_e.onerror=vi(fe),_e.onblocked=wt(S._fireOnBlocked),_e.onupgradeneeded=wt(function(ge){var Ae;be=_e.transaction,T.autoSchema&&!S._options.allowEmptyDB?(_e.onerror=bi,be.abort(),_e.result.close(),(Ae=O.deleteDatabase(ve)).onsuccess=Ae.onerror=wt(function(){fe(new Ie.NoSuchDatabase("Database ".concat(ve," doesnt exist")))})):(be.onerror=vi(fe),ge=ge.oldVersion>Math.pow(2,62)?0:ge.oldVersion,de=ge<1,S.idbdb=_e.result,X&&Vc(S,be),ha(S,ge/10,be,fe))},fe),_e.onsuccess=wt(function(){be=null;var ge,Ae,Ne,Oe,Ve,We=S.idbdb=_e.result,rt=M(We.objectStoreNames);if(0<rt.length)try{var qe=We.transaction((Oe=rt).length===1?Oe[0]:Oe,"readonly");if(T.autoSchema)Ae=We,Ne=qe,(ge=S).verno=Ae.version/10,Ne=ge._dbSchema=Ja(0,Ae,Ne),ge._storeNames=M(Ae.objectStoreNames,0),Lc(ge,[ge._allTables],s(Ne),Ne);else if($l(S,S._dbSchema,qe),((Ve=wi(Ja(0,(Ve=S).idbdb,qe),Ve._dbSchema)).add.length||Ve.change.some(function(Je){return Je.add.length||Je.change.length}))&&!X)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),We.close(),W=We.version+1,X=!0,Se(le());fa(S,qe)}catch{}Ui.push(S),We.onversionchange=wt(function(Je){T.vcFired=!0,S.on("versionchange").fire(Je)}),We.onclose=wt(function(Je){S.on("close").fire(Je)}),de&&(Ve=S._deps,qe=ve,We=Ve.indexedDB,Ve=Ve.IDBKeyRange,Bc(We)||qe===zi||qf(We,Ve).put({name:qe}).catch(Xe)),Se()},fe)}).catch(function(Se){switch(Se?.name){case"UnknownError":if(0<T.PR1398_maxLoop)return T.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),le();break;case"VersionError":if(0<W)return W=0,le()}return tt.reject(Se)})}var he,me=T.dbReadyResolve,be=null,de=!1;return tt.race([$,(typeof navigator>"u"?tt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Se){function fe(){return indexedDB.databases().finally(Se)}he=setInterval(fe,100),fe()}).finally(function(){return clearInterval(he)}):Promise.resolve()).then(le)]).then(function(){return oe(),T.onReadyBeingFired=[],tt.resolve(tl(function(){return S.on.ready.fire(S.vip)})).then(function Se(){if(0<T.onReadyBeingFired.length){var fe=T.onReadyBeingFired.reduce(Ft,Xe);return T.onReadyBeingFired=[],tt.resolve(tl(function(){return fe(S.vip)})).then(Se)}})}).finally(function(){T.openCanceller===$&&(T.onReadyBeingFired=null,T.isBeingOpened=!1)}).catch(function(Se){T.dbOpenError=Se;try{be&&be.abort()}catch{}return $===T.openCanceller&&S._close(),vr(Se)}).finally(function(){T.openComplete=!0,me()}).then(function(){var Se;return de&&(Se={},S.tables.forEach(function(fe){fe.schema.indexes.forEach(function(ve){ve.name&&(Se["idb://".concat(S.name,"/").concat(fe.name,"/").concat(ve.name)]=new Jr(-1/0,[[[]]]))}),Se["idb://".concat(S.name,"/").concat(fe.name,"/")]=Se["idb://".concat(S.name,"/").concat(fe.name,"/:dels")]=new Jr(-1/0,[[[]]])}),lo(jl).fire(Se),xo(Se,!0)),S})}function hs(S){function T(X){return S.next(X)}var O=W(T),$=W(function(X){return S.throw(X)});function W(X){return function(he){var le=X(he),he=le.value;return le.done?he:he&&typeof he.then=="function"?he.then(O,$):a(he)?Promise.all(he).then(O,$):O(he)}}return W(T)()}function C(S,T,O){for(var $=a(S)?S.slice():[S],W=0;W<O;++W)$.push(T);return $}var P={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(S){return r(r({},S),{table:function(T){var O=S.table(T),$=O.schema,W={},X=[];function oe(de,Se,fe){var ve=Nr(de),_e=W[ve]=W[ve]||[],ge=de==null?0:typeof de=="string"?1:de.length,Ae=0<Se,Ae=r(r({},fe),{name:Ae?"".concat(ve,"(virtual-from:").concat(fe.name,")"):fe.name,lowLevelIndex:fe,isVirtual:Ae,keyTail:Se,keyLength:ge,extractKey:ds(de),unique:!Ae&&fe.unique});return _e.push(Ae),Ae.isPrimaryKey||X.push(Ae),1<ge&&oe(ge===2?de[0]:de.slice(0,ge-1),Se+1,fe),_e.sort(function(Ne,Oe){return Ne.keyTail-Oe.keyTail}),Ae}T=oe($.primaryKey.keyPath,0,$.primaryKey),W[":id"]=[T];for(var le=0,he=$.indexes;le<he.length;le++){var me=he[le];oe(me.keyPath,0,me)}function be(de){var Se,fe=de.query.index;return fe.isVirtual?r(r({},de),{query:{index:fe.lowLevelIndex,range:(Se=de.query.range,fe=fe.keyTail,{type:Se.type===1?2:Se.type,lower:C(Se.lower,Se.lowerOpen?S.MAX_KEY:S.MIN_KEY,fe),lowerOpen:!0,upper:C(Se.upper,Se.upperOpen?S.MIN_KEY:S.MAX_KEY,fe),upperOpen:!0})}}):de}return r(r({},O),{schema:r(r({},$),{primaryKey:T,indexes:X,getIndexByKeyPath:function(de){return(de=W[Nr(de)])&&de[0]}}),count:function(de){return O.count(be(de))},query:function(de){return O.query(be(de))},openCursor:function(de){var Se=de.query.index,fe=Se.keyTail,ve=Se.isVirtual,_e=Se.keyLength;return ve?O.openCursor(be(de)).then(function(Ae){return Ae&&ge(Ae)}):O.openCursor(de);function ge(Ae){return Object.create(Ae,{continue:{value:function(Ne){Ne!=null?Ae.continue(C(Ne,de.reverse?S.MAX_KEY:S.MIN_KEY,fe)):de.unique?Ae.continue(Ae.key.slice(0,_e).concat(de.reverse?S.MIN_KEY:S.MAX_KEY,fe)):Ae.continue()}},continuePrimaryKey:{value:function(Ne,Oe){Ae.continuePrimaryKey(C(Ne,S.MAX_KEY,fe),Oe)}},primaryKey:{get:function(){return Ae.primaryKey}},key:{get:function(){var Ne=Ae.key;return _e===1?Ne[0]:Ne.slice(0,_e)}},value:{get:function(){return Ae.value}}})}}})}})}};function G(S,T,O,$){return O=O||{},$=$||"",s(S).forEach(function(W){var X,oe,le;f(T,W)?(X=S[W],oe=T[W],typeof X=="object"&&typeof oe=="object"&&X&&oe?(le=re(X))!==re(oe)?O[$+W]=T[W]:le==="Object"?G(X,oe,O,$+W+"."):X!==oe&&(O[$+W]=T[W]):X!==oe&&(O[$+W]=T[W])):O[$+W]=void 0}),s(T).forEach(function(W){f(S,W)||(O[$+W]=T[W])}),O}function ee(S,T){return T.type==="delete"?T.keys:T.keys||T.values.map(S.extractKey)}var xe={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(S){return r(r({},S),{table:function(T){var O=S.table(T),$=O.schema.primaryKey;return r(r({},O),{mutate:function(W){var X=st.trans,oe=X.table(T).hook,le=oe.deleting,he=oe.creating,me=oe.updating;switch(W.type){case"add":if(he.fire===Xe)break;return X._promise("readwrite",function(){return be(W)},!0);case"put":if(he.fire===Xe&&me.fire===Xe)break;return X._promise("readwrite",function(){return be(W)},!0);case"delete":if(le.fire===Xe)break;return X._promise("readwrite",function(){return be(W)},!0);case"deleteRange":if(le.fire===Xe)break;return X._promise("readwrite",function(){return function de(Se,fe,ve){return O.query({trans:Se,values:!1,query:{index:$,range:fe},limit:ve}).then(function(_e){var ge=_e.result;return be({type:"delete",keys:ge,trans:Se}).then(function(Ae){return 0<Ae.numFailures?Promise.reject(Ae.failures[0]):ge.length<ve?{failures:[],numFailures:0,lastResult:void 0}:de(Se,r(r({},fe),{lower:ge[ge.length-1],lowerOpen:!0}),ve)})})}(W.trans,W.range,1e4)},!0)}return O.mutate(W);function be(de){var Se,fe,ve,_e=st.trans,ge=de.keys||ee($,de);if(!ge)throw new Error("Keys missing");return(de=de.type==="add"||de.type==="put"?r(r({},de),{keys:ge}):r({},de)).type!=="delete"&&(de.values=o([],de.values)),de.keys&&(de.keys=o([],de.keys)),Se=O,ve=ge,((fe=de).type==="add"?Promise.resolve([]):Se.getMany({trans:fe.trans,keys:ve,cache:"immutable"})).then(function(Ae){var Ne=ge.map(function(Oe,Ve){var We,rt,qe,Je=Ae[Ve],ot={onerror:null,onsuccess:null};return de.type==="delete"?le.fire.call(ot,Oe,Je,_e):de.type==="add"||Je===void 0?(We=he.fire.call(ot,Oe,de.values[Ve],_e),Oe==null&&We!=null&&(de.keys[Ve]=Oe=We,$.outbound||D(de.values[Ve],$.keyPath,Oe))):(We=G(Je,de.values[Ve]),(rt=me.fire.call(ot,We,Oe,Je,_e))&&(qe=de.values[Ve],Object.keys(rt).forEach(function(Ke){f(qe,Ke)?qe[Ke]=rt[Ke]:D(qe,Ke,rt[Ke])}))),ot});return O.mutate(de).then(function(Oe){for(var Ve=Oe.failures,We=Oe.results,rt=Oe.numFailures,Oe=Oe.lastResult,qe=0;qe<ge.length;++qe){var Je=(We||ge)[qe],ot=Ne[qe];Je==null?ot.onerror&&ot.onerror(Ve[qe]):ot.onsuccess&&ot.onsuccess(de.type==="put"&&Ae[qe]?de.values[qe]:Je)}return{failures:Ve,results:We,numFailures:rt,lastResult:Oe}}).catch(function(Oe){return Ne.forEach(function(Ve){return Ve.onerror&&Ve.onerror(Oe)}),Promise.reject(Oe)})})}}})}})}};function Pe(S,T,O){try{if(!T||T.keys.length<S.length)return null;for(var $=[],W=0,X=0;W<T.keys.length&&X<S.length;++W)tn(T.keys[W],S[X])===0&&($.push(O?H(T.values[W]):T.values[W]),++X);return $.length===S.length?$:null}catch{return null}}var nt={stack:"dbcore",level:-1,create:function(S){return{table:function(T){var O=S.table(T);return r(r({},O),{getMany:function($){if(!$.cache)return O.getMany($);var W=Pe($.keys,$.trans._cache,$.cache==="clone");return W?tt.resolve(W):O.getMany($).then(function(X){return $.trans._cache={keys:$.keys,values:$.cache==="clone"?H(X):X},X})},mutate:function($){return $.type!=="add"&&($.trans._cache=null),O.mutate($)}})}}}};function wn(S,T){return S.trans.mode==="readonly"&&!!S.subscr&&!S.trans.explicit&&S.trans.db._options.cache!=="disabled"&&!T.schema.primaryKey.outbound}function Hr(S,T){switch(S){case"query":return T.values&&!T.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var kn={stack:"dbcore",level:0,name:"Observability",create:function(S){var T=S.schema.name,O=new Jr(S.MIN_KEY,S.MAX_KEY);return r(r({},S),{transaction:function($,W,X){if(st.subscr&&W!=="readonly")throw new Ie.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(st.querier));return S.transaction($,W,X)},table:function($){var W=S.table($),X=W.schema,oe=X.primaryKey,de=X.indexes,le=oe.extractKey,he=oe.outbound,me=oe.autoIncrement&&de.filter(function(fe){return fe.compound&&fe.keyPath.includes(oe.keyPath)}),be=r(r({},W),{mutate:function(fe){function ve(Ke){return Ke="idb://".concat(T,"/").concat($,"/").concat(Ke),Oe[Ke]||(Oe[Ke]=new Jr)}var _e,ge,Ae,Ne=fe.trans,Oe=fe.mutatedParts||(fe.mutatedParts={}),Ve=ve(""),We=ve(":dels"),rt=fe.type,ot=fe.type==="deleteRange"?[fe.range]:fe.type==="delete"?[fe.keys]:fe.values.length<50?[ee(oe,fe).filter(function(Ke){return Ke}),fe.values]:[],qe=ot[0],Je=ot[1],ot=fe.trans._cache;return a(qe)?(Ve.addKeys(qe),(ot=rt==="delete"||qe.length===Je.length?Pe(qe,ot):null)||We.addKeys(qe),(ot||Je)&&(_e=ve,ge=ot,Ae=Je,X.indexes.forEach(function(Ke){var lt=_e(Ke.name||"");function _t(Ht){return Ht!=null?Ke.extractKey(Ht):null}function It(Ht){return Ke.multiEntry&&a(Ht)?Ht.forEach(function(ni){return lt.addKey(ni)}):lt.addKey(Ht)}(ge||Ae).forEach(function(Ht,to){var Dt=ge&&_t(ge[to]),to=Ae&&_t(Ae[to]);tn(Dt,to)!==0&&(Dt!=null&&It(Dt),to!=null&&It(to))})}))):qe?(Je={from:(Je=qe.lower)!==null&&Je!==void 0?Je:S.MIN_KEY,to:(Je=qe.upper)!==null&&Je!==void 0?Je:S.MAX_KEY},We.add(Je),Ve.add(Je)):(Ve.add(O),We.add(O),X.indexes.forEach(function(Ke){return ve(Ke.name).add(O)})),W.mutate(fe).then(function(Ke){return!qe||fe.type!=="add"&&fe.type!=="put"||(Ve.addKeys(Ke.results),me&&me.forEach(function(lt){for(var _t=fe.values.map(function(Dt){return lt.extractKey(Dt)}),It=lt.keyPath.findIndex(function(Dt){return Dt===oe.keyPath}),Ht=0,ni=Ke.results.length;Ht<ni;++Ht)_t[Ht][It]=Ke.results[Ht];ve(lt.name).addKeys(_t)})),Ne.mutatedParts=fs(Ne.mutatedParts||{},Oe),Ke})}}),de=function(ve){var _e=ve.query,ve=_e.index,_e=_e.range;return[ve,new Jr((ve=_e.lower)!==null&&ve!==void 0?ve:S.MIN_KEY,(_e=_e.upper)!==null&&_e!==void 0?_e:S.MAX_KEY)]},Se={get:function(fe){return[oe,new Jr(fe.key)]},getMany:function(fe){return[oe,new Jr().addKeys(fe.keys)]},count:de,query:de,openCursor:de};return s(Se).forEach(function(fe){be[fe]=function(ve){var _e=st.subscr,ge=!!_e,Ae=wn(st,W)&&Hr(fe,ve)?ve.obsSet={}:_e;if(ge){var Ne=function(Je){return Je="idb://".concat(T,"/").concat($,"/").concat(Je),Ae[Je]||(Ae[Je]=new Jr)},Oe=Ne(""),Ve=Ne(":dels"),_e=Se[fe](ve),ge=_e[0],_e=_e[1];if((fe==="query"&&ge.isPrimaryKey&&!ve.values?Ve:Ne(ge.name||"")).add(_e),!ge.isPrimaryKey){if(fe!=="count"){var We=fe==="query"&&he&&ve.values&&W.query(r(r({},ve),{values:!1}));return W[fe].apply(this,arguments).then(function(Je){if(fe==="query"){if(he&&ve.values)return We.then(function(_t){return _t=_t.result,Oe.addKeys(_t),Je});var ot=ve.values?Je.result.map(le):Je.result;(ve.values?Oe:Ve).addKeys(ot)}else if(fe==="openCursor"){var Ke=Je,lt=ve.values;return Ke&&Object.create(Ke,{key:{get:function(){return Ve.addKey(Ke.primaryKey),Ke.key}},primaryKey:{get:function(){var _t=Ke.primaryKey;return Ve.addKey(_t),_t}},value:{get:function(){return lt&&Oe.addKey(Ke.primaryKey),Ke.value}}})}return Je})}Ve.add(O)}}return W[fe].apply(this,arguments)}}),be}})}};function eo(S,T,O){if(O.numFailures===0)return T;if(T.type==="deleteRange")return null;var $=T.keys?T.keys.length:"values"in T&&T.values?T.values.length:1;return O.numFailures===$?null:(T=r({},T),a(T.keys)&&(T.keys=T.keys.filter(function(W,X){return!(X in O.failures)})),"values"in T&&a(T.values)&&(T.values=T.values.filter(function(W,X){return!(X in O.failures)})),T)}function Lr(S,T){return O=S,(($=T).lower===void 0||($.lowerOpen?0<tn(O,$.lower):0<=tn(O,$.lower)))&&(S=S,(T=T).upper===void 0||(T.upperOpen?tn(S,T.upper)<0:tn(S,T.upper)<=0));var O,$}function ga(S,T,Se,$,W,X){if(!Se||Se.length===0)return S;var oe=T.query.index,le=oe.multiEntry,he=T.query.range,me=$.schema.primaryKey.extractKey,be=oe.extractKey,de=(oe.lowLevelIndex||oe).extractKey,Se=Se.reduce(function(fe,ve){var _e=fe,ge=[];if(ve.type==="add"||ve.type==="put")for(var Ae=new Jr,Ne=ve.values.length-1;0<=Ne;--Ne){var Oe,Ve=ve.values[Ne],We=me(Ve);Ae.hasKey(We)||(Oe=be(Ve),(le&&a(Oe)?Oe.some(function(Ke){return Lr(Ke,he)}):Lr(Oe,he))&&(Ae.addKey(We),ge.push(Ve)))}switch(ve.type){case"add":var rt=new Jr().addKeys(T.values?fe.map(function(lt){return me(lt)}):fe),_e=fe.concat(T.values?ge.filter(function(lt){return lt=me(lt),!rt.hasKey(lt)&&(rt.addKey(lt),!0)}):ge.map(function(lt){return me(lt)}).filter(function(lt){return!rt.hasKey(lt)&&(rt.addKey(lt),!0)}));break;case"put":var qe=new Jr().addKeys(ve.values.map(function(lt){return me(lt)}));_e=fe.filter(function(lt){return!qe.hasKey(T.values?me(lt):lt)}).concat(T.values?ge:ge.map(function(lt){return me(lt)}));break;case"delete":var Je=new Jr().addKeys(ve.keys);_e=fe.filter(function(lt){return!Je.hasKey(T.values?me(lt):lt)});break;case"deleteRange":var ot=ve.range;_e=fe.filter(function(lt){return!Lr(me(lt),ot)})}return _e},S);return Se===S?S:(Se.sort(function(fe,ve){return tn(de(fe),de(ve))||tn(me(fe),me(ve))}),T.limit&&T.limit<1/0&&(Se.length>T.limit?Se.length=T.limit:S.length===T.limit&&Se.length<T.limit&&(W.dirty=!0)),X?Object.freeze(Se):Se)}function co(S,T){return tn(S.lower,T.lower)===0&&tn(S.upper,T.upper)===0&&!!S.lowerOpen==!!T.lowerOpen&&!!S.upperOpen==!!T.upperOpen}function ya(S,T){return function(O,$,W,X){if(O===void 0)return $!==void 0?-1:0;if($===void 0)return 1;if(($=tn(O,$))===0){if(W&&X)return 0;if(W)return 1;if(X)return-1}return $}(S.lower,T.lower,S.lowerOpen,T.lowerOpen)<=0&&0<=function(O,$,W,X){if(O===void 0)return $!==void 0?1:0;if($===void 0)return-1;if(($=tn(O,$))===0){if(W&&X)return 0;if(W)return-1;if(X)return 1}return $}(S.upper,T.upper,S.upperOpen,T.upperOpen)}function Xf(S,T,O,$){S.subscribers.add(O),$.addEventListener("abort",function(){var W,X;S.subscribers.delete(O),S.subscribers.size===0&&(W=S,X=T,setTimeout(function(){W.subscribers.size===0&&Q(X,W)},3e3))})}var Tp={stack:"dbcore",level:0,name:"Cache",create:function(S){var T=S.schema.name;return r(r({},S),{transaction:function(O,$,W){var X,oe,le=S.transaction(O,$,W);return $==="readwrite"&&(oe=(X=new AbortController).signal,W=function(he){return function(){if(X.abort(),$==="readwrite"){for(var me=new Set,be=0,de=O;be<de.length;be++){var Se=de[be],fe=ma["idb://".concat(T,"/").concat(Se)];if(fe){var ve=S.table(Se),_e=fe.optimisticOps.filter(function(lt){return lt.trans===le});if(le._explicit&&he&&le.mutatedParts)for(var ge=0,Ae=Object.values(fe.queries.query);ge<Ae.length;ge++)for(var Ne=0,Oe=(rt=Ae[ge]).slice();Ne<Oe.length;Ne++)Qu((qe=Oe[Ne]).obsSet,le.mutatedParts)&&(Q(rt,qe),qe.subscribers.forEach(function(lt){return me.add(lt)}));else if(0<_e.length){fe.optimisticOps=fe.optimisticOps.filter(function(lt){return lt.trans!==le});for(var Ve=0,We=Object.values(fe.queries.query);Ve<We.length;Ve++)for(var rt,qe,Je,ot=0,Ke=(rt=We[Ve]).slice();ot<Ke.length;ot++)(qe=Ke[ot]).res!=null&&le.mutatedParts&&(he&&!qe.dirty?(Je=Object.isFrozen(qe.res),Je=ga(qe.res,qe.req,_e,ve,qe,Je),qe.dirty?(Q(rt,qe),qe.subscribers.forEach(function(lt){return me.add(lt)})):Je!==qe.res&&(qe.res=Je,qe.promise=tt.resolve({result:Je}))):(qe.dirty&&Q(rt,qe),qe.subscribers.forEach(function(lt){return me.add(lt)})))}}}me.forEach(function(lt){return lt()})}}},le.addEventListener("abort",W(!1),{signal:oe}),le.addEventListener("error",W(!1),{signal:oe}),le.addEventListener("complete",W(!0),{signal:oe})),le},table:function(O){var $=S.table(O),W=$.schema.primaryKey;return r(r({},$),{mutate:function(X){var oe=st.trans;if(W.outbound||oe.db._options.cache==="disabled"||oe.explicit||oe.idbtrans.mode!=="readwrite")return $.mutate(X);var le=ma["idb://".concat(T,"/").concat(O)];return le?(oe=$.mutate(X),X.type!=="add"&&X.type!=="put"||!(50<=X.values.length||ee(W,X).some(function(he){return he==null}))?(le.optimisticOps.push(X),X.mutatedParts&&ol(X.mutatedParts),oe.then(function(he){0<he.numFailures&&(Q(le.optimisticOps,X),(he=eo(0,X,he))&&le.optimisticOps.push(he),X.mutatedParts&&ol(X.mutatedParts))}),oe.catch(function(){Q(le.optimisticOps,X),X.mutatedParts&&ol(X.mutatedParts)})):oe.then(function(he){var me=eo(0,r(r({},X),{values:X.values.map(function(be,de){var Se;return he.failures[de]?be:(be=(Se=W.keyPath)!==null&&Se!==void 0&&Se.includes(".")?H(be):r({},be),D(be,W.keyPath,he.results[de]),be)})}),he);le.optimisticOps.push(me),queueMicrotask(function(){return X.mutatedParts&&ol(X.mutatedParts)})}),oe):$.mutate(X)},query:function(X){if(!wn(st,$)||!Hr("query",X))return $.query(X);var oe=((me=st.trans)===null||me===void 0?void 0:me.db._options.cache)==="immutable",de=st,le=de.requery,he=de.signal,me=function(ve,_e,ge,Ae){var Ne=ma["idb://".concat(ve,"/").concat(_e)];if(!Ne)return[];if(!(_e=Ne.queries[ge]))return[null,!1,Ne,null];var Oe=_e[(Ae.query?Ae.query.index.name:null)||""];if(!Oe)return[null,!1,Ne,null];switch(ge){case"query":var Ve=Oe.find(function(We){return We.req.limit===Ae.limit&&We.req.values===Ae.values&&co(We.req.query.range,Ae.query.range)});return Ve?[Ve,!0,Ne,Oe]:[Oe.find(function(We){return("limit"in We.req?We.req.limit:1/0)>=Ae.limit&&(!Ae.values||We.req.values)&&ya(We.req.query.range,Ae.query.range)}),!1,Ne,Oe];case"count":return Ve=Oe.find(function(We){return co(We.req.query.range,Ae.query.range)}),[Ve,!!Ve,Ne,Oe]}}(T,O,"query",X),be=me[0],de=me[1],Se=me[2],fe=me[3];return be&&de?be.obsSet=X.obsSet:(de=$.query(X).then(function(ve){var _e=ve.result;if(be&&(be.res=_e),oe){for(var ge=0,Ae=_e.length;ge<Ae;++ge)Object.freeze(_e[ge]);Object.freeze(_e)}else ve.result=H(_e);return ve}).catch(function(ve){return fe&&be&&Q(fe,be),Promise.reject(ve)}),be={obsSet:X.obsSet,promise:de,subscribers:new Set,type:"query",req:X,dirty:!1},fe?fe.push(be):(fe=[be],(Se=Se||(ma["idb://".concat(T,"/").concat(O)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[X.query.index.name||""]=fe)),Xf(be,fe,le,he),be.promise.then(function(ve){return{result:ga(ve.result,X,Se?.optimisticOps,$,be,oe)}})}})}})}};function Qf(S,T){return new Proxy(S,{get:function(O,$,W){return $==="db"?T:Reflect.get(O,$,W)}})}var va=(kr.prototype.version=function(S){if(isNaN(S)||S<.1)throw new Ie.Type("Given version is not a positive number");if(S=Math.round(10*S)/10,this.idbdb||this._state.isBeingOpened)throw new Ie.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,S);var T=this._versions,O=T.filter(function($){return $._cfg.version===S})[0];return O||(O=new this.Version(S),T.push(O),T.sort(Ku),O.stores({}),this._state.autoSchema=!1,O)},kr.prototype._whenReady=function(S){var T=this;return this.idbdb&&(this._state.openComplete||st.letThrough||this._vip)?S():new tt(function(O,$){if(T._state.openComplete)return $(new Ie.DatabaseClosed(T._state.dbOpenError));if(!T._state.isBeingOpened){if(!T._state.autoOpen)return void $(new Ie.DatabaseClosed);T.open().catch(Xe)}T._state.dbReadyPromise.then(O,$)}).then(S)},kr.prototype.use=function(S){var T=S.stack,O=S.create,$=S.level,W=S.name;return W&&this.unuse({stack:T,name:W}),S=this._middlewares[T]||(this._middlewares[T]=[]),S.push({stack:T,create:O,level:$??10,name:W}),S.sort(function(X,oe){return X.level-oe.level}),this},kr.prototype.unuse=function(S){var T=S.stack,O=S.name,$=S.create;return T&&this._middlewares[T]&&(this._middlewares[T]=this._middlewares[T].filter(function(W){return $?W.create!==$:!!O&&W.name!==O})),this},kr.prototype.open=function(){var S=this;return is(qn,function(){return kp(S)})},kr.prototype._close=function(){var S=this._state,T=Ui.indexOf(this);if(0<=T&&Ui.splice(T,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}S.isBeingOpened||(S.dbReadyPromise=new tt(function(O){S.dbReadyResolve=O}),S.openCanceller=new tt(function(O,$){S.cancelOpen=$}))},kr.prototype.close=function(O){var T=(O===void 0?{disableAutoOpen:!0}:O).disableAutoOpen,O=this._state;T?(O.isBeingOpened&&O.cancelOpen(new Ie.DatabaseClosed),this._close(),O.autoOpen=!1,O.dbOpenError=new Ie.DatabaseClosed):(this._close(),O.autoOpen=this._options.autoOpen||O.isBeingOpened,O.openComplete=!1,O.dbOpenError=null)},kr.prototype.delete=function(S){var T=this;S===void 0&&(S={disableAutoOpen:!0});var O=0<arguments.length&&typeof arguments[0]!="object",$=this._state;return new tt(function(W,X){function oe(){T.close(S);var le=T._deps.indexedDB.deleteDatabase(T.name);le.onsuccess=wt(function(){var he,me,be;he=T._deps,me=T.name,be=he.indexedDB,he=he.IDBKeyRange,Bc(be)||me===zi||qf(be,he).delete(me).catch(Xe),W()}),le.onerror=vi(X),le.onblocked=T._fireOnBlocked}if(O)throw new Ie.InvalidArgument("Invalid closeOptions argument to db.delete()");$.isBeingOpened?$.dbReadyPromise.then(oe):oe()})},kr.prototype.backendDB=function(){return this.idbdb},kr.prototype.isOpen=function(){return this.idbdb!==null},kr.prototype.hasBeenClosed=function(){var S=this._state.dbOpenError;return S&&S.name==="DatabaseClosed"},kr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},kr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(kr.prototype,"tables",{get:function(){var S=this;return s(this._allTables).map(function(T){return S._allTables[T]})},enumerable:!1,configurable:!0}),kr.prototype.transaction=function(){var S=(function(T,O,$){var W=arguments.length;if(W<2)throw new Ie.InvalidArgument("Too few arguments");for(var X=new Array(W-1);--W;)X[W-1]=arguments[W];return $=X.pop(),[T,L(X),$]}).apply(this,arguments);return this._transaction.apply(this,S)},kr.prototype._transaction=function(S,T,O){var $=this,W=st.trans;W&&W.db===this&&S.indexOf("!")===-1||(W=null);var X,oe,le=S.indexOf("?")!==-1;S=S.replace("!","").replace("?","");try{if(oe=T.map(function(me){if(me=me instanceof $.Table?me.name:me,typeof me!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return me}),S=="r"||S===Zr)X=Zr;else{if(S!="rw"&&S!=qa)throw new Ie.InvalidArgument("Invalid transaction mode: "+S);X=qa}if(W){if(W.mode===Zr&&X===qa){if(!le)throw new Ie.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");W=null}W&&oe.forEach(function(me){if(W&&W.storeNames.indexOf(me)===-1){if(!le)throw new Ie.SubTransaction("Table "+me+" not included in parent transaction.");W=null}}),le&&W&&!W.active&&(W=null)}}catch(me){return W?W._promise(null,function(be,de){de(me)}):vr(me)}var he=(function me(be,de,Se,fe,ve){return tt.resolve().then(function(){var _e=st.transless||st,ge=be._createTransaction(de,Se,be._dbSchema,fe);if(ge.explicit=!0,_e={trans:ge,transless:_e},fe)ge.idbtrans=fe.idbtrans;else try{ge.create(),ge.idbtrans._explicit=!0,be._state.PR1398_maxLoop=3}catch(Oe){return Oe.name===we.InvalidState&&be.isOpen()&&0<--be._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),be.close({disableAutoOpen:!1}),be.open().then(function(){return me(be,de,Se,null,ve)})):vr(Oe)}var Ae,Ne=se(ve);return Ne&&yi(),_e=tt.follow(function(){var Oe;(Ae=ve.call(ge,ge))&&(Ne?(Oe=_o.bind(null,null),Ae.then(Oe,Oe)):typeof Ae.next=="function"&&typeof Ae.throw=="function"&&(Ae=hs(Ae)))},_e),(Ae&&typeof Ae.then=="function"?tt.resolve(Ae).then(function(Oe){return ge.active?Oe:vr(new Ie.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):_e.then(function(){return Ae})).then(function(Oe){return fe&&ge._resolve(),ge._completion.then(function(){return Oe})}).catch(function(Oe){return ge._reject(Oe),vr(Oe)})})}).bind(null,this,X,oe,W,O);return W?W._promise(X,he,"lock"):st.trans?is(st.transless,function(){return $._whenReady(he)}):this._whenReady(he)},kr.prototype.table=function(S){if(!f(this._allTables,S))throw new Ie.InvalidTable("Table ".concat(S," does not exist"));return this._allTables[S]},kr);function kr(S,T){var O=this;this._middlewares={},this.verno=0;var $=kr.dependencies;this._options=T=r({addons:kr.addons,autoOpen:!0,indexedDB:$.indexedDB,IDBKeyRange:$.IDBKeyRange,cache:"cloned"},T),this._deps={indexedDB:T.indexedDB,IDBKeyRange:T.IDBKeyRange},$=T.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var W,X,oe,le,he,me={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Xe,dbReadyPromise:null,cancelOpen:Xe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:T.autoOpen};me.dbReadyPromise=new tt(function(de){me.dbReadyResolve=de}),me.openCanceller=new tt(function(de,Se){me.cancelOpen=Se}),this._state=me,this.name=S,this.on=ca(this,"populate","blocked","versionchange","close",{ready:[Ft,Xe]}),this.on.ready.subscribe=N(this.on.ready.subscribe,function(de){return function(Se,fe){kr.vip(function(){var ve,_e=O._state;_e.openComplete?(_e.dbOpenError||tt.resolve().then(Se),fe&&de(Se)):_e.onReadyBeingFired?(_e.onReadyBeingFired.push(Se),fe&&de(Se)):(de(Se),ve=O,fe||de(function ge(){ve.on.ready.unsubscribe(Se),ve.on.ready.unsubscribe(ge)}))})}}),this.Collection=(W=this,Wa(ls.prototype,function(Ae,ge){this.db=W;var fe=la,ve=null;if(ge)try{fe=ge()}catch(Ne){ve=Ne}var _e=Ae._ctx,ge=_e.table,Ae=ge.hook.reading.fire;this._ctx={table:ge,index:_e.index,isPrimKey:!_e.index||ge.schema.primKey.keyPath&&_e.index===ge.schema.primKey.name,range:fe,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ve,or:_e.or,valueMapper:Ae!==zt?Ae:null}})),this.Table=(X=this,Wa(zu.prototype,function(de,Se,fe){this.db=X,this._tx=fe,this.name=de,this.schema=Se,this.hook=X._allTables[de]?X._allTables[de].hook:ca(null,{creating:[Pn,Xe],reading:[un,zt],updating:[hn,Xe],deleting:[kt,Xe]})})),this.Transaction=(oe=this,Wa(cs.prototype,function(de,Se,fe,ve,_e){var ge=this;this.db=oe,this.mode=de,this.storeNames=Se,this.schema=fe,this.chromeTransactionDurability=ve,this.idbtrans=null,this.on=ca(this,"complete","error","abort"),this.parent=_e||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new tt(function(Ae,Ne){ge._resolve=Ae,ge._reject=Ne}),this._completion.then(function(){ge.active=!1,ge.on.complete.fire()},function(Ae){var Ne=ge.active;return ge.active=!1,ge.on.error.fire(Ae),ge.parent?ge.parent._reject(Ae):Ne&&ge.idbtrans&&ge.idbtrans.abort(),vr(Ae)})})),this.Version=(le=this,Wa(Ep.prototype,function(de){this.db=le,this._cfg={version:de,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(he=this,Wa(da.prototype,function(de,Se,fe){if(this.db=he,this._ctx={table:de,index:Se===":id"?null:Se,or:fe},this._cmp=this._ascending=tn,this._descending=function(ve,_e){return tn(_e,ve)},this._max=function(ve,_e){return 0<tn(ve,_e)?ve:_e},this._min=function(ve,_e){return tn(ve,_e)<0?ve:_e},this._IDBKeyRange=he._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ie.MissingAPI})),this.on("versionchange",function(de){0<de.newVersion?console.warn("Another connection wants to upgrade database '".concat(O.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(O.name,"'. Closing db now to resume the delete request.")),O.close({disableAutoOpen:!1})}),this.on("blocked",function(de){!de.newVersion||de.newVersion<de.oldVersion?console.warn("Dexie.delete('".concat(O.name,"') was blocked")):console.warn("Upgrade '".concat(O.name,"' blocked by other connection holding version ").concat(de.oldVersion/10))}),this._maxKey=Za(T.IDBKeyRange),this._createTransaction=function(de,Se,fe,ve){return new O.Transaction(de,Se,fe,O._options.chromeTransactionDurability,ve)},this._fireOnBlocked=function(de){O.on("blocked").fire(de),Ui.filter(function(Se){return Se.name===O.name&&Se!==O&&!Se._state.vcFired}).map(function(Se){return Se.on("versionchange").fire(de)})},this.use(nt),this.use(Tp),this.use(kn),this.use(P),this.use(xe);var be=new Proxy(this,{get:function(de,Se,fe){if(Se==="_vip")return!0;if(Se==="table")return function(_e){return Qf(O.table(_e),be)};var ve=Reflect.get(de,Se,fe);return ve instanceof zu?Qf(ve,be):Se==="tables"?ve.map(function(_e){return Qf(_e,be)}):Se==="_createTransaction"?function(){return Qf(ve.apply(this,arguments),be)}:ve}});this.vip=be,$.forEach(function(de){return de(O)})}var ed,qi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",I0=(Ap.prototype.subscribe=function(S,T,O){return this._subscribe(S&&typeof S!="function"?S:{next:S,error:T,complete:O})},Ap.prototype[qi]=function(){return this},Ap);function Ap(S){this._subscribe=S}try{ed={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{ed={indexedDB:null,IDBKeyRange:null}}function M0(S){var T,O=!1,$=new I0(function(W){var X=se(S),oe,le=!1,he={},me={},be={get closed(){return le},unsubscribe:function(){le||(le=!0,oe&&oe.abort(),de&&lo.storagemutated.unsubscribe(fe))}};W.start&&W.start(be);var de=!1,Se=function(){return Ms(ve)},fe=function(_e){fs(he,_e),Qu(me,he)&&Se()},ve=function(){var _e,ge,Ae;!le&&ed.indexedDB&&(he={},_e={},oe&&oe.abort(),oe=new AbortController,Ae=function(Ne){var Oe=sr();try{X&&yi();var Ve=Zo(S,Ne);return Ve=X?Ve.finally(_o):Ve}finally{Oe&&er()}}(ge={subscr:_e,signal:oe.signal,requery:Se,querier:S,trans:null}),Promise.resolve(Ae).then(function(Ne){O=!0,T=Ne,le||ge.signal.aborted||(he={},function(Oe){for(var Ve in Oe)if(f(Oe,Ve))return;return 1}(me=_e)||de||(lo(jl,fe),de=!0),Ms(function(){return!le&&W.next&&W.next(Ne)}))},function(Ne){O=!1,["DatabaseClosedError","AbortError"].includes(Ne?.name)||le||Ms(function(){le||W.error&&W.error(Ne)})}))};return setTimeout(Se,0),be});return $.hasValue=function(){return O},$.getValue=function(){return T},$}var $c=va;function iy(S){var T=Fl;try{Fl=!0,lo.storagemutated.fire(S),xo(S,!0)}finally{Fl=T}}p($c,r(r({},it),{delete:function(S){return new $c(S,{addons:[]}).delete()},exists:function(S){return new $c(S,{addons:[]}).open().then(function(T){return T.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(S){try{return T=$c.dependencies,O=T.indexedDB,T=T.IDBKeyRange,(Bc(O)?Promise.resolve(O.databases()).then(function($){return $.map(function(W){return W.name}).filter(function(W){return W!==zi})}):qf(O,T).toCollection().primaryKeys()).then(S)}catch{return vr(new Ie.MissingAPI)}var T,O},defineClass:function(){return function(S){l(this,S)}},ignoreTransaction:function(S){return st.trans?is(st.transless,S):S()},vip:tl,async:function(S){return function(){try{var T=hs(S.apply(this,arguments));return T&&typeof T.then=="function"?T:tt.resolve(T)}catch(O){return vr(O)}}},spawn:function(S,T,O){try{var $=hs(S.apply(O,T||[]));return $&&typeof $.then=="function"?$:tt.resolve($)}catch(W){return vr(W)}},currentTransaction:{get:function(){return st.trans||null}},waitFor:function(S,T){return T=tt.resolve(typeof S=="function"?$c.ignoreTransaction(S):S).timeout(T||6e4),st.trans?st.trans.waitFor(T):T},Promise:tt,debug:{get:function(){return Wt},set:function(S){En(S)}},derive:b,extend:l,props:p,override:N,Events:ca,on:lo,liveQuery:M0,extendObservabilitySet:fs,getByKeyPath:F,setByKeyPath:D,delByKeyPath:function(S,T){typeof T=="string"?D(S,T,void 0):"length"in T&&[].map.call(T,function(O){D(S,O,void 0)})},shallowClone:R,deepClone:H,getObjectDiff:G,cmp:tn,asap:B,minKey:-1/0,addons:[],connections:Ui,errnames:we,dependencies:ed,cache:ma,semVer:"4.0.11",version:"4.0.11".split(".").map(function(S){return parseInt(S)}).reduce(function(S,T,O){return S+T/Math.pow(10,2*O)})})),$c.maxKey=Za($c.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(lo(jl,function(S){Fl||(S=new CustomEvent(Xa,{detail:S}),Fl=!0,dispatchEvent(S),Fl=!1)}),addEventListener(Xa,function(S){S=S.detail,Fl||iy(S)}));var td,Fl=!1,Ci=function(){};return typeof BroadcastChannel<"u"&&((Ci=function(){(td=new BroadcastChannel(Xa)).onmessage=function(S){return S.data&&iy(S.data)}})(),typeof td.unref=="function"&&td.unref(),lo(jl,function(S){Fl||td.postMessage(S)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(S){if(!va.disableBfCache&&S.persisted){Wt&&console.debug("Dexie: handling persisted pagehide"),td?.close();for(var T=0,O=Ui;T<O.length;T++)O[T].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(S){!va.disableBfCache&&S.persisted&&(Wt&&console.debug("Dexie: handling persisted pageshow"),Ci(),iy({all:new Jr(-1/0,[[]])}))})),tt.rejectionMapper=function(S,T){return!S||S instanceof ie||S instanceof TypeError||S instanceof SyntaxError||!S.name||!Ge[S.name]?S:(T=new Ge[S.name](T||S.message,S),"stack"in S&&y(T,"stack",{get:function(){return this.inner.stack}}),T)},En(Wt),r(va,Object.freeze({__proto__:null,Dexie:va,liveQuery:M0,Entity:Pc,cmp:tn,PropModification:jn,replacePrefix:function(S,T){return new jn({replacePrefix:[S,T]})},add:function(S){return new jn({add:S})},remove:function(S){return new jn({remove:S})},default:va,RangeSet:Jr,mergeRanges:Ds,rangesOverlap:Kf}),{default:va}),va})}(Iw)),Iw.exports}var yse=gse();const z2=CM(yse),k5=Symbol.for("Dexie"),gC=globalThis[k5]||(globalThis[k5]=z2);if(z2.semVer!==gC.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${z2.semVer} and ${gC.semVer}`);const{liveQuery:vse,mergeRanges:g9e,rangesOverlap:y9e,RangeSet:v9e,cmp:b9e,Entity:w9e,PropModification:C9e,replacePrefix:S9e,add:_9e,remove:x9e}=gC;class bse extends gC{Items;ClassorBook;Icons;SyncedQueue;SyncMeta;constructor(){super("myDatabase"),this.version(1).stores({Items:"id, title,guess,content,renderRange,renderDate,classId, bookId, priority",ClassorBook:"id,classId,bookId",Icons:"value, url",SyncedQueue:"id, table, type, status",SyncMeta:"key"}),this.Items=this.table("Items"),this.ClassorBook=this.table("ClassorBook"),this.Icons=this.table("Icons"),this.SyncedQueue=this.table("SyncedQueue"),this.SyncMeta=this.table("SyncMeta")}}const Zn=new bse;function wse(t,e,n){var r,o;typeof t=="function"?(r=e||[],o=n):(r=[],o=e);var i=De.useRef({hasResult:!1,result:o,error:null}),s=De.useReducer(function(c){return c+1},0);s[0];var a=s[1],l=De.useMemo(function(){var c=typeof t=="function"?t():t;if(!c||typeof c.subscribe!="function")throw t===c?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!i.current.hasResult&&typeof window<"u"&&(typeof c.hasValue!="function"||c.hasValue()))if(typeof c.getValue=="function")i.current.result=c.getValue(),i.current.hasResult=!0;else{var d=c.subscribe(function(f){i.current.result=f,i.current.hasResult=!0});typeof d=="function"?d():d.unsubscribe()}return c},r);if(De.useDebugValue(i.current.result),De.useEffect(function(){var c=l.subscribe(function(d){var f=i.current;(f.error!==null||f.result!==d)&&(f.error=null,f.result=d,f.hasResult=!0,a())},function(d){var f=i.current;f.error!==d&&(f.error=d,a())});return typeof c=="function"?c:c.unsubscribe.bind(c)},r),i.current.error)throw i.current.error;return i.current.result}function U_(t,e,n){return wse(function(){return vse(t)},e||[],n)}const _l=I7(t=>({selectedFilter:"all",setSelectedFilter:e=>t({selectedFilter:e}),openCommandSearch:!1,setOpenCommandSearch:e=>t({openCommandSearch:e}),openQuiz:!1,setOpenQuiz:e=>t({openQuiz:e}),isReadingMode:!0,setIsReadingMode:e=>t({isReadingMode:e}),isRenderingMode:!0,setIsRenderingMode:e=>t({isRenderingMode:e}),openIcon:!1,setOpenIcon:e=>t({openIcon:e}),openSidebar:!1,setOpenSidebar:e=>t({openSidebar:e}),nanoPageId:"",setNanoPageId:e=>t({nanoPageId:e}),pageTitle:"",setPageTitle:e=>t({pageTitle:e}),pageGuess:"",setPageGuess:e=>t({pageGuess:e}),pageContent:"",setPageContent:e=>t({pageContent:e}),pageClass:"",setPageClass:e=>t({pageClass:e}),pageBook:"",setPageBook:e=>t({pageBook:e}),pagePriority:"",setPagePriority:e=>t({pagePriority:e}),SyncedQueue:async(e,n,r="add")=>{console.log("work"),await Zn.SyncedQueue.put({id:e,table:n,type:r,status:"pending"}),console.log("✅ Saved + synced:",e)},syncLoading:!1,setSyncLoading:e=>t({syncLoading:e}),renderRangeData:{0:{time:3600*1e3,label:"1h"},1:{time:10800*1e3,label:"3h"},2:{time:1440*60*1e3,label:"24h"},3:{time:4320*60*1e3,label:"3d"},4:{time:8640*60*1e3,label:"6d"},5:{time:720*60*60*1e3,label:"30d"},6:{time:2160*60*60*1e3,label:"3m"},7:{time:4320*60*60*1e3,label:"6m"},8:{time:360*24*60*60*1e3,label:"12m"}}}));function Cse(t,e){const n=e?e*30:0,{isRenderingMode:r}=_l();return U_(()=>t==="all"?Zn.Items.filter(i=>i.renderDate<=new Date().getTime()).offset(n).limit(30).toArray():r?Zn.Items.where("bookId").equals(t).filter(i=>i.renderDate<=new Date().getTime()).offset(n).limit(30).toArray():Zn.Items.where("bookId").equals(t).offset(n).limit(30).toArray(),[t,r,e])??[]}const Sse=()=>{};var T5={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M7=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let o=t.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},_se=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=t[n++];e[r++]=String.fromCharCode((o&31)<<6|i&63)}else if(o>239&&o<365){const i=t[n++],s=t[n++],a=t[n++],l=((o&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],s=t[n++];e[r++]=String.fromCharCode((o&15)<<12|(i&63)<<6|s&63)}}return e.join("")},N7={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<t.length;o+=3){const i=t[o],s=o+1<t.length,a=s?t[o+1]:0,l=o+2<t.length,c=l?t[o+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,s||(p=64)),r.push(n[d],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(M7(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_se(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<t.length;){const i=n[t.charAt(o++)],a=o<t.length?n[t.charAt(o)]:0;++o;const c=o<t.length?n[t.charAt(o)]:64;++o;const f=o<t.length?n[t.charAt(o)]:64;if(++o,i==null||a==null||c==null||f==null)throw new xse;const p=i<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const y=c<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xse extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ese=function(t){const e=M7(t);return N7.encodeByteArray(e,!0)},yC=function(t){return Ese(t).replace(/\./g,"")},O7=function(t){try{return N7.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kse(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tse=()=>kse().__FIREBASE_DEFAULTS__,Ase=()=>{if(typeof process>"u"||typeof T5>"u")return;const t=T5.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Rse=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&O7(t[1]);return e&&JSON.parse(e)},z_=()=>{try{return Sse()||Tse()||Ase()||Rse()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},P7=t=>z_()?.emulatorHosts?.[t],Ise=t=>{const e=P7(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},D7=()=>z_()?.config,L7=t=>z_()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mse{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function V7(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nse(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[yC(JSON.stringify(n)),yC(JSON.stringify(s)),""].join(".")}const mv={};function Ose(){const t={prod:[],emulator:[]};for(const e of Object.keys(mv))mv[e]?t.emulator.push(e):t.prod.push(e);return t}function Pse(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let A5=!1;function j7(t,e){if(typeof window>"u"||typeof document>"u"||!Ag(window.location.host)||mv[t]===e||mv[t]||A5)return;mv[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=Ose().prod.length>0;function s(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{A5=!0,s()},p}function d(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=Pse(r),g=n("text"),y=document.getElementById(g)||document.createElement("span"),b=n("learnmore"),_=document.getElementById(b)||document.createElement("a"),k=n("preprendIcon"),M=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const N=p.element;a(N),d(_,b);const j=c();l(M,k),N.append(M,y,_,j),document.body.appendChild(N)}i?(y.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dse(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ji())}function Lse(){const t=z_()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Vse(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jse(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Bse(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $se(){const t=ji();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Fse(){return!Lse()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hse(){try{return typeof indexedDB=="object"}catch{return!1}}function Use(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zse="FirebaseError";class kc extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=zse,Object.setPrototypeOf(this,kc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jb.prototype.create)}}class jb{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,i=this.errors[e],s=i?Gse(i,r):"Error",a=`${this.serviceName}: ${s} (${o}).`;return new kc(o,a,r)}}function Gse(t,e){return t.replace(qse,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const qse=/\{\$([^}]+)}/g;function Kse(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const i=t[o],s=e[o];if(R5(i)&&R5(s)){if(!Hh(i,s))return!1}else if(i!==s)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function R5(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wse(t,e){const n=new Yse(t,e);return n.subscribe.bind(n)}class Yse{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Xse(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=OT),o.error===void 0&&(o.error=OT),o.complete===void 0&&(o.complete=OT);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xse(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function OT(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(t){return t&&t._delegate?t._delegate:t}class lf{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qse{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Mse;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jse(e))try{this.getOrInitializeService({instanceIdentifier:ph})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:o});r.resolve(i)}catch{}}}}clearInstance(e=ph){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ph){return this.instances.has(e)}getOptions(e=ph){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&s.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const i=this.instances.get(r);return i&&e(i,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Zse(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ph){return this.component?this.component.multipleInstances?e:ph:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Zse(t){return t===ph?void 0:t}function Jse(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eae{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Qse(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Tn||(Tn={}));const tae={debug:Tn.DEBUG,verbose:Tn.VERBOSE,info:Tn.INFO,warn:Tn.WARN,error:Tn.ERROR,silent:Tn.SILENT},nae=Tn.INFO,rae={[Tn.DEBUG]:"log",[Tn.VERBOSE]:"log",[Tn.INFO]:"info",[Tn.WARN]:"warn",[Tn.ERROR]:"error"},oae=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),o=rae[e];if(o)console[o](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class G_{constructor(e){this.name=e,this._logLevel=nae,this._logHandler=oae,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Tn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tae[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Tn.DEBUG,...e),this._logHandler(this,Tn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Tn.VERBOSE,...e),this._logHandler(this,Tn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Tn.INFO,...e),this._logHandler(this,Tn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Tn.WARN,...e),this._logHandler(this,Tn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Tn.ERROR,...e),this._logHandler(this,Tn.ERROR,...e)}}const iae=(t,e)=>e.some(n=>t instanceof n);let I5,M5;function sae(){return I5||(I5=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aae(){return M5||(M5=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B7=new WeakMap,G2=new WeakMap,$7=new WeakMap,PT=new WeakMap,qM=new WeakMap;function lae(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{n(Yd(t.result)),o()},s=()=>{r(t.error),o()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&B7.set(n,t)}).catch(()=>{}),qM.set(e,t),e}function cae(t){if(G2.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{n(),o()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});G2.set(t,e)}let q2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return G2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$7.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yd(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uae(t){q2=t(q2)}function dae(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(DT(this),e,...n);return $7.set(r,e.sort?e.sort():[e]),Yd(r)}:aae().includes(t)?function(...e){return t.apply(DT(this),e),Yd(B7.get(this))}:function(...e){return Yd(t.apply(DT(this),e))}}function fae(t){return typeof t=="function"?dae(t):(t instanceof IDBTransaction&&cae(t),iae(t,sae())?new Proxy(t,q2):t)}function Yd(t){if(t instanceof IDBRequest)return lae(t);if(PT.has(t))return PT.get(t);const e=fae(t);return e!==t&&(PT.set(t,e),qM.set(e,t)),e}const DT=t=>qM.get(t);function hae(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const s=indexedDB.open(t,e),a=Yd(s);return r&&s.addEventListener("upgradeneeded",l=>{r(Yd(s.result),l.oldVersion,l.newVersion,Yd(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),o&&l.addEventListener("versionchange",c=>o(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const pae=["get","getKey","getAll","getAllKeys","count"],mae=["put","add","delete","clear"],LT=new Map;function N5(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(LT.get(e))return LT.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=mae.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||pae.includes(n)))return;const i=async function(s,...a){const l=this.transaction(s,o?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),o&&l.done]))[0]};return LT.set(e,i),i}uae(t=>({...t,get:(e,n,r)=>N5(e,n)||t.get(e,n,r),has:(e,n)=>!!N5(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gae{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(yae(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function yae(t){return t.getComponent()?.type==="VERSION"}const K2="@firebase/app",O5="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=new G_("@firebase/app"),vae="@firebase/app-compat",bae="@firebase/analytics-compat",wae="@firebase/analytics",Cae="@firebase/app-check-compat",Sae="@firebase/app-check",_ae="@firebase/auth",xae="@firebase/auth-compat",Eae="@firebase/database",kae="@firebase/data-connect",Tae="@firebase/database-compat",Aae="@firebase/functions",Rae="@firebase/functions-compat",Iae="@firebase/installations",Mae="@firebase/installations-compat",Nae="@firebase/messaging",Oae="@firebase/messaging-compat",Pae="@firebase/performance",Dae="@firebase/performance-compat",Lae="@firebase/remote-config",Vae="@firebase/remote-config-compat",jae="@firebase/storage",Bae="@firebase/storage-compat",$ae="@firebase/firestore",Fae="@firebase/ai",Hae="@firebase/firestore-compat",Uae="firebase",zae="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="[DEFAULT]",Gae={[K2]:"fire-core",[vae]:"fire-core-compat",[wae]:"fire-analytics",[bae]:"fire-analytics-compat",[Sae]:"fire-app-check",[Cae]:"fire-app-check-compat",[_ae]:"fire-auth",[xae]:"fire-auth-compat",[Eae]:"fire-rtdb",[kae]:"fire-data-connect",[Tae]:"fire-rtdb-compat",[Aae]:"fire-fn",[Rae]:"fire-fn-compat",[Iae]:"fire-iid",[Mae]:"fire-iid-compat",[Nae]:"fire-fcm",[Oae]:"fire-fcm-compat",[Pae]:"fire-perf",[Dae]:"fire-perf-compat",[Lae]:"fire-rc",[Vae]:"fire-rc-compat",[jae]:"fire-gcs",[Bae]:"fire-gcs-compat",[$ae]:"fire-fst",[Hae]:"fire-fst-compat",[Fae]:"fire-vertex","fire-js":"fire-js",[Uae]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new Map,qae=new Map,Y2=new Map;function P5(t,e){try{t.container.addComponent(e)}catch(n){Mu.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Uh(t){const e=t.name;if(Y2.has(e))return Mu.debug(`There were multiple attempts to register component ${e}.`),!1;Y2.set(e,t);for(const n of vC.values())P5(n,t);for(const n of qae.values())P5(n,t);return!0}function q_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ra(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kae={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xd=new jb("app","Firebase",Kae);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wae{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xd.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg=zae;function F7(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:W2,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Xd.create("bad-app-name",{appName:String(o)});if(n||(n=D7()),!n)throw Xd.create("no-options");const i=vC.get(o);if(i){if(Hh(n,i.options)&&Hh(r,i.config))return i;throw Xd.create("duplicate-app",{appName:o})}const s=new eae(o);for(const l of Y2.values())s.addComponent(l);const a=new Wae(n,r,s);return vC.set(o,a),a}function KM(t=W2){const e=vC.get(t);if(!e&&t===W2&&D7())return F7();if(!e)throw Xd.create("no-app",{appName:t});return e}function ac(t,e,n){let r=Gae[t]??t;n&&(r+=`-${n}`);const o=r.match(/\s|\//),i=e.match(/\s|\//);if(o||i){const s=[`Unable to register library "${r}" with version "${e}":`];o&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&i&&s.push("and"),i&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mu.warn(s.join(" "));return}Uh(new lf(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yae="firebase-heartbeat-database",Xae=1,$v="firebase-heartbeat-store";let VT=null;function H7(){return VT||(VT=hae(Yae,Xae,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($v)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xd.create("idb-open",{originalErrorMessage:t.message})})),VT}async function Qae(t){try{const n=(await H7()).transaction($v),r=await n.objectStore($v).get(U7(t));return await n.done,r}catch(e){if(e instanceof kc)Mu.warn(e.message);else{const n=Xd.create("idb-get",{originalErrorMessage:e?.message});Mu.warn(n.message)}}}async function D5(t,e){try{const r=(await H7()).transaction($v,"readwrite");await r.objectStore($v).put(e,U7(t)),await r.done}catch(n){if(n instanceof kc)Mu.warn(n.message);else{const r=Xd.create("idb-set",{originalErrorMessage:n?.message});Mu.warn(r.message)}}}function U7(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zae=1024,Jae=30;class ele{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nle(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=L5();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Jae){const o=rle(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Mu.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=L5(),{heartbeatsToSend:n,unsentEntries:r}=tle(this._heartbeatsCache.heartbeats),o=yC(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Mu.warn(e),""}}}function L5(){return new Date().toISOString().substring(0,10)}function tle(t,e=Zae){const n=[];let r=t.slice();for(const o of t){const i=n.find(s=>s.agent===o.agent);if(i){if(i.dates.push(o.date),V5(n)>e){i.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),V5(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class nle{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hse()?Use().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Qae(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return D5(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return D5(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function V5(t){return yC(JSON.stringify({version:2,heartbeats:t})).length}function rle(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ole(t){Uh(new lf("platform-logger",e=>new gae(e),"PRIVATE")),Uh(new lf("heartbeat",e=>new ele(e),"PRIVATE")),ac(K2,O5,t),ac(K2,O5,"esm2020"),ac("fire-js","")}ole("");var j5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Qd,z7;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,R){function I(){}I.prototype=R.prototype,D.D=R.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(L,z,q){for(var H=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)H[ne-2]=arguments[ne];return R.prototype[z].apply(L,H)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,R,I){I||(I=0);var L=Array(16);if(typeof R=="string")for(var z=0;16>z;++z)L[z]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(z=0;16>z;++z)L[z]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=D.g[0],I=D.g[1],z=D.g[2];var q=D.g[3],H=R+(q^I&(z^q))+L[0]+3614090360&4294967295;R=I+(H<<7&4294967295|H>>>25),H=q+(z^R&(I^z))+L[1]+3905402710&4294967295,q=R+(H<<12&4294967295|H>>>20),H=z+(I^q&(R^I))+L[2]+606105819&4294967295,z=q+(H<<17&4294967295|H>>>15),H=I+(R^z&(q^R))+L[3]+3250441966&4294967295,I=z+(H<<22&4294967295|H>>>10),H=R+(q^I&(z^q))+L[4]+4118548399&4294967295,R=I+(H<<7&4294967295|H>>>25),H=q+(z^R&(I^z))+L[5]+1200080426&4294967295,q=R+(H<<12&4294967295|H>>>20),H=z+(I^q&(R^I))+L[6]+2821735955&4294967295,z=q+(H<<17&4294967295|H>>>15),H=I+(R^z&(q^R))+L[7]+4249261313&4294967295,I=z+(H<<22&4294967295|H>>>10),H=R+(q^I&(z^q))+L[8]+1770035416&4294967295,R=I+(H<<7&4294967295|H>>>25),H=q+(z^R&(I^z))+L[9]+2336552879&4294967295,q=R+(H<<12&4294967295|H>>>20),H=z+(I^q&(R^I))+L[10]+4294925233&4294967295,z=q+(H<<17&4294967295|H>>>15),H=I+(R^z&(q^R))+L[11]+2304563134&4294967295,I=z+(H<<22&4294967295|H>>>10),H=R+(q^I&(z^q))+L[12]+1804603682&4294967295,R=I+(H<<7&4294967295|H>>>25),H=q+(z^R&(I^z))+L[13]+4254626195&4294967295,q=R+(H<<12&4294967295|H>>>20),H=z+(I^q&(R^I))+L[14]+2792965006&4294967295,z=q+(H<<17&4294967295|H>>>15),H=I+(R^z&(q^R))+L[15]+1236535329&4294967295,I=z+(H<<22&4294967295|H>>>10),H=R+(z^q&(I^z))+L[1]+4129170786&4294967295,R=I+(H<<5&4294967295|H>>>27),H=q+(I^z&(R^I))+L[6]+3225465664&4294967295,q=R+(H<<9&4294967295|H>>>23),H=z+(R^I&(q^R))+L[11]+643717713&4294967295,z=q+(H<<14&4294967295|H>>>18),H=I+(q^R&(z^q))+L[0]+3921069994&4294967295,I=z+(H<<20&4294967295|H>>>12),H=R+(z^q&(I^z))+L[5]+3593408605&4294967295,R=I+(H<<5&4294967295|H>>>27),H=q+(I^z&(R^I))+L[10]+38016083&4294967295,q=R+(H<<9&4294967295|H>>>23),H=z+(R^I&(q^R))+L[15]+3634488961&4294967295,z=q+(H<<14&4294967295|H>>>18),H=I+(q^R&(z^q))+L[4]+3889429448&4294967295,I=z+(H<<20&4294967295|H>>>12),H=R+(z^q&(I^z))+L[9]+568446438&4294967295,R=I+(H<<5&4294967295|H>>>27),H=q+(I^z&(R^I))+L[14]+3275163606&4294967295,q=R+(H<<9&4294967295|H>>>23),H=z+(R^I&(q^R))+L[3]+4107603335&4294967295,z=q+(H<<14&4294967295|H>>>18),H=I+(q^R&(z^q))+L[8]+1163531501&4294967295,I=z+(H<<20&4294967295|H>>>12),H=R+(z^q&(I^z))+L[13]+2850285829&4294967295,R=I+(H<<5&4294967295|H>>>27),H=q+(I^z&(R^I))+L[2]+4243563512&4294967295,q=R+(H<<9&4294967295|H>>>23),H=z+(R^I&(q^R))+L[7]+1735328473&4294967295,z=q+(H<<14&4294967295|H>>>18),H=I+(q^R&(z^q))+L[12]+2368359562&4294967295,I=z+(H<<20&4294967295|H>>>12),H=R+(I^z^q)+L[5]+4294588738&4294967295,R=I+(H<<4&4294967295|H>>>28),H=q+(R^I^z)+L[8]+2272392833&4294967295,q=R+(H<<11&4294967295|H>>>21),H=z+(q^R^I)+L[11]+1839030562&4294967295,z=q+(H<<16&4294967295|H>>>16),H=I+(z^q^R)+L[14]+4259657740&4294967295,I=z+(H<<23&4294967295|H>>>9),H=R+(I^z^q)+L[1]+2763975236&4294967295,R=I+(H<<4&4294967295|H>>>28),H=q+(R^I^z)+L[4]+1272893353&4294967295,q=R+(H<<11&4294967295|H>>>21),H=z+(q^R^I)+L[7]+4139469664&4294967295,z=q+(H<<16&4294967295|H>>>16),H=I+(z^q^R)+L[10]+3200236656&4294967295,I=z+(H<<23&4294967295|H>>>9),H=R+(I^z^q)+L[13]+681279174&4294967295,R=I+(H<<4&4294967295|H>>>28),H=q+(R^I^z)+L[0]+3936430074&4294967295,q=R+(H<<11&4294967295|H>>>21),H=z+(q^R^I)+L[3]+3572445317&4294967295,z=q+(H<<16&4294967295|H>>>16),H=I+(z^q^R)+L[6]+76029189&4294967295,I=z+(H<<23&4294967295|H>>>9),H=R+(I^z^q)+L[9]+3654602809&4294967295,R=I+(H<<4&4294967295|H>>>28),H=q+(R^I^z)+L[12]+3873151461&4294967295,q=R+(H<<11&4294967295|H>>>21),H=z+(q^R^I)+L[15]+530742520&4294967295,z=q+(H<<16&4294967295|H>>>16),H=I+(z^q^R)+L[2]+3299628645&4294967295,I=z+(H<<23&4294967295|H>>>9),H=R+(z^(I|~q))+L[0]+4096336452&4294967295,R=I+(H<<6&4294967295|H>>>26),H=q+(I^(R|~z))+L[7]+1126891415&4294967295,q=R+(H<<10&4294967295|H>>>22),H=z+(R^(q|~I))+L[14]+2878612391&4294967295,z=q+(H<<15&4294967295|H>>>17),H=I+(q^(z|~R))+L[5]+4237533241&4294967295,I=z+(H<<21&4294967295|H>>>11),H=R+(z^(I|~q))+L[12]+1700485571&4294967295,R=I+(H<<6&4294967295|H>>>26),H=q+(I^(R|~z))+L[3]+2399980690&4294967295,q=R+(H<<10&4294967295|H>>>22),H=z+(R^(q|~I))+L[10]+4293915773&4294967295,z=q+(H<<15&4294967295|H>>>17),H=I+(q^(z|~R))+L[1]+2240044497&4294967295,I=z+(H<<21&4294967295|H>>>11),H=R+(z^(I|~q))+L[8]+1873313359&4294967295,R=I+(H<<6&4294967295|H>>>26),H=q+(I^(R|~z))+L[15]+4264355552&4294967295,q=R+(H<<10&4294967295|H>>>22),H=z+(R^(q|~I))+L[6]+2734768916&4294967295,z=q+(H<<15&4294967295|H>>>17),H=I+(q^(z|~R))+L[13]+1309151649&4294967295,I=z+(H<<21&4294967295|H>>>11),H=R+(z^(I|~q))+L[4]+4149444226&4294967295,R=I+(H<<6&4294967295|H>>>26),H=q+(I^(R|~z))+L[11]+3174756917&4294967295,q=R+(H<<10&4294967295|H>>>22),H=z+(R^(q|~I))+L[2]+718787259&4294967295,z=q+(H<<15&4294967295|H>>>17),H=I+(q^(z|~R))+L[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(z+(H<<21&4294967295|H>>>11))&4294967295,D.g[2]=D.g[2]+z&4294967295,D.g[3]=D.g[3]+q&4294967295}r.prototype.u=function(D,R){R===void 0&&(R=D.length);for(var I=R-this.blockSize,L=this.B,z=this.h,q=0;q<R;){if(z==0)for(;q<=I;)o(this,D,q),q+=this.blockSize;if(typeof D=="string"){for(;q<R;)if(L[z++]=D.charCodeAt(q++),z==this.blockSize){o(this,L),z=0;break}}else for(;q<R;)if(L[z++]=D[q++],z==this.blockSize){o(this,L),z=0;break}}this.h=z,this.o+=R},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;var I=8*this.o;for(R=D.length-8;R<D.length;++R)D[R]=I&255,I/=256;for(this.u(D),D=Array(16),R=I=0;4>R;++R)for(var L=0;32>L;L+=8)D[I++]=this.g[R]>>>L&255;return D};function i(D,R){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=R(D)}function s(D,R){this.h=R;for(var I=[],L=!0,z=D.length-1;0<=z;z--){var q=D[z]|0;L&&q==R||(I[z]=q,L=!1)}this.g=I}var a={};function l(D){return-128<=D&&128>D?i(D,function(R){return new s([R|0],0>R?-1:0)}):new s([D|0],0>D?-1:0)}function c(D){if(isNaN(D)||!isFinite(D))return f;if(0>D)return _(c(-D));for(var R=[],I=1,L=0;D>=I;L++)R[L]=D/I|0,I*=4294967296;return new s(R,0)}function d(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return _(d(D.substring(1),R));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(R,8)),L=f,z=0;z<D.length;z+=8){var q=Math.min(8,D.length-z),H=parseInt(D.substring(z,z+q),R);8>q?(q=c(Math.pow(R,q)),L=L.j(q).add(c(H))):(L=L.j(I),L=L.add(c(H)))}return L}var f=l(0),p=l(1),g=l(16777216);t=s.prototype,t.m=function(){if(b(this))return-_(this).m();for(var D=0,R=1,I=0;I<this.g.length;I++){var L=this.i(I);D+=(0<=L?L:4294967296+L)*R,R*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(y(this))return"0";if(b(this))return"-"+_(this).toString(D);for(var R=c(Math.pow(D,6)),I=this,L="";;){var z=j(I,R).g;I=k(I,z.j(R));var q=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=z,y(I))return q+L;for(;6>q.length;)q="0"+q;L=q+L}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function y(D){if(D.h!=0)return!1;for(var R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function b(D){return D.h==-1}t.l=function(D){return D=k(this,D),b(D)?-1:y(D)?0:1};function _(D){for(var R=D.g.length,I=[],L=0;L<R;L++)I[L]=~D.g[L];return new s(I,~D.h).add(p)}t.abs=function(){return b(this)?_(this):this},t.add=function(D){for(var R=Math.max(this.g.length,D.g.length),I=[],L=0,z=0;z<=R;z++){var q=L+(this.i(z)&65535)+(D.i(z)&65535),H=(q>>>16)+(this.i(z)>>>16)+(D.i(z)>>>16);L=H>>>16,q&=65535,H&=65535,I[z]=H<<16|q}return new s(I,I[I.length-1]&-2147483648?-1:0)};function k(D,R){return D.add(_(R))}t.j=function(D){if(y(this)||y(D))return f;if(b(this))return b(D)?_(this).j(_(D)):_(_(this).j(D));if(b(D))return _(this.j(_(D)));if(0>this.l(g)&&0>D.l(g))return c(this.m()*D.m());for(var R=this.g.length+D.g.length,I=[],L=0;L<2*R;L++)I[L]=0;for(L=0;L<this.g.length;L++)for(var z=0;z<D.g.length;z++){var q=this.i(L)>>>16,H=this.i(L)&65535,ne=D.i(z)>>>16,re=D.i(z)&65535;I[2*L+2*z]+=H*re,M(I,2*L+2*z),I[2*L+2*z+1]+=q*re,M(I,2*L+2*z+1),I[2*L+2*z+1]+=H*ne,M(I,2*L+2*z+1),I[2*L+2*z+2]+=q*ne,M(I,2*L+2*z+2)}for(L=0;L<R;L++)I[L]=I[2*L+1]<<16|I[2*L];for(L=R;L<2*R;L++)I[L]=0;return new s(I,0)};function M(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function N(D,R){this.g=D,this.h=R}function j(D,R){if(y(R))throw Error("division by zero");if(y(D))return new N(f,f);if(b(D))return R=j(_(D),R),new N(_(R.g),_(R.h));if(b(R))return R=j(D,_(R)),new N(_(R.g),R.h);if(30<D.g.length){if(b(D)||b(R))throw Error("slowDivide_ only works with positive integers.");for(var I=p,L=R;0>=L.l(D);)I=B(I),L=B(L);var z=F(I,1),q=F(L,1);for(L=F(L,2),I=F(I,2);!y(L);){var H=q.add(L);0>=H.l(D)&&(z=z.add(I),q=H),L=F(L,1),I=F(I,1)}return R=k(D,z.j(R)),new N(z,R)}for(z=f;0<=D.l(R);){for(I=Math.max(1,Math.floor(D.m()/R.m())),L=Math.ceil(Math.log(I)/Math.LN2),L=48>=L?1:Math.pow(2,L-48),q=c(I),H=q.j(R);b(H)||0<H.l(D);)I-=L,q=c(I),H=q.j(R);y(q)&&(q=p),z=z.add(q),D=k(D,H)}return new N(z,D)}t.A=function(D){return j(this,D).h},t.and=function(D){for(var R=Math.max(this.g.length,D.g.length),I=[],L=0;L<R;L++)I[L]=this.i(L)&D.i(L);return new s(I,this.h&D.h)},t.or=function(D){for(var R=Math.max(this.g.length,D.g.length),I=[],L=0;L<R;L++)I[L]=this.i(L)|D.i(L);return new s(I,this.h|D.h)},t.xor=function(D){for(var R=Math.max(this.g.length,D.g.length),I=[],L=0;L<R;L++)I[L]=this.i(L)^D.i(L);return new s(I,this.h^D.h)};function B(D){for(var R=D.g.length+1,I=[],L=0;L<R;L++)I[L]=D.i(L)<<1|D.i(L-1)>>>31;return new s(I,D.h)}function F(D,R){var I=R>>5;R%=32;for(var L=D.g.length-I,z=[],q=0;q<L;q++)z[q]=0<R?D.i(q+I)>>>R|D.i(q+I+1)<<32-R:D.i(q+I);return new s(z,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,z7=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=d,Qd=s}).apply(typeof j5<"u"?j5:typeof self<"u"?self:typeof window<"u"?window:{});var L1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var G7,tv,q7,Mw,X2,K7,W7,Y7;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,P,G){return C==Array.prototype||C==Object.prototype||(C[P]=G.value),C};function n(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof L1=="object"&&L1];for(var P=0;P<C.length;++P){var G=C[P];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}var r=n(this);function o(C,P){if(P)e:{var G=r;C=C.split(".");for(var ee=0;ee<C.length-1;ee++){var xe=C[ee];if(!(xe in G))break e;G=G[xe]}C=C[C.length-1],ee=G[C],P=P(ee),P!=ee&&P!=null&&e(G,C,{configurable:!0,writable:!0,value:P})}}function i(C,P){C instanceof String&&(C+="");var G=0,ee=!1,xe={next:function(){if(!ee&&G<C.length){var Pe=G++;return{value:P(Pe,C[Pe]),done:!1}}return ee=!0,{done:!0,value:void 0}}};return xe[Symbol.iterator]=function(){return xe},xe}o("Array.prototype.values",function(C){return C||function(){return i(this,function(P,G){return G})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(C){var P=typeof C;return P=P!="object"?P:C?Array.isArray(C)?"array":P:"null",P=="array"||P=="object"&&typeof C.length=="number"}function c(C){var P=typeof C;return P=="object"&&C!=null||P=="function"}function d(C,P,G){return C.call.apply(C.bind,arguments)}function f(C,P,G){if(!C)throw Error();if(2<arguments.length){var ee=Array.prototype.slice.call(arguments,2);return function(){var xe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(xe,ee),C.apply(P,xe)}}return function(){return C.apply(P,arguments)}}function p(C,P,G){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,p.apply(null,arguments)}function g(C,P){var G=Array.prototype.slice.call(arguments,1);return function(){var ee=G.slice();return ee.push.apply(ee,arguments),C.apply(this,ee)}}function y(C,P){function G(){}G.prototype=P.prototype,C.aa=P.prototype,C.prototype=new G,C.prototype.constructor=C,C.Qb=function(ee,xe,Pe){for(var nt=Array(arguments.length-2),wn=2;wn<arguments.length;wn++)nt[wn-2]=arguments[wn];return P.prototype[xe].apply(ee,nt)}}function b(C){const P=C.length;if(0<P){const G=Array(P);for(let ee=0;ee<P;ee++)G[ee]=C[ee];return G}return[]}function _(C,P){for(let G=1;G<arguments.length;G++){const ee=arguments[G];if(l(ee)){const xe=C.length||0,Pe=ee.length||0;C.length=xe+Pe;for(let nt=0;nt<Pe;nt++)C[xe+nt]=ee[nt]}else C.push(ee)}}class k{constructor(P,G){this.i=P,this.j=G,this.h=0,this.g=null}get(){let P;return 0<this.h?(this.h--,P=this.g,this.g=P.next,P.next=null):P=this.i(),P}}function M(C){return/^[\s\xa0]*$/.test(C)}function N(){var C=a.navigator;return C&&(C=C.userAgent)?C:""}function j(C){return j[" "](C),C}j[" "]=function(){};var B=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function F(C,P,G){for(const ee in C)P.call(G,C[ee],ee,C)}function D(C,P){for(const G in C)P.call(void 0,C[G],G,C)}function R(C){const P={};for(const G in C)P[G]=C[G];return P}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(C,P){let G,ee;for(let xe=1;xe<arguments.length;xe++){ee=arguments[xe];for(G in ee)C[G]=ee[G];for(let Pe=0;Pe<I.length;Pe++)G=I[Pe],Object.prototype.hasOwnProperty.call(ee,G)&&(C[G]=ee[G])}}function z(C){var P=1;C=C.split(":");const G=[];for(;0<P&&C.length;)G.push(C.shift()),P--;return C.length&&G.push(C.join(":")),G}function q(C){a.setTimeout(()=>{throw C},0)}function H(){var C=J;let P=null;return C.g&&(P=C.g,C.g=C.g.next,C.g||(C.h=null),P.next=null),P}class ne{constructor(){this.h=this.g=null}add(P,G){const ee=re.get();ee.set(P,G),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var re=new k(()=>new V,C=>C.reset());class V{constructor(){this.next=this.g=this.h=null}set(P,G){this.h=P,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let U,Q=!1,J=new ne,Y=()=>{const C=a.Promise.resolve(void 0);U=()=>{C.then(se)}};var se=()=>{for(var C;C=H();){try{C.h.call(C.g)}catch(G){q(G)}var P=re;P.j(C),100>P.h&&(P.h++,C.next=P.g,P.g=C)}Q=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(C,P){this.type=C,this.g=this.target=P,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var C=!1,P=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const G=()=>{};a.addEventListener("test",G,P),a.removeEventListener("test",G,P)}catch{}return C}();function ae(C,P){if(ie.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var G=this.type=C.type,ee=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=P,P=C.relatedTarget){if(B){e:{try{j(P.nodeName);var xe=!0;break e}catch{}xe=!1}xe||(P=null)}}else G=="mouseover"?P=C.fromElement:G=="mouseout"&&(P=C.toElement);this.relatedTarget=P,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:ye[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&ae.aa.h.call(this)}}y(ae,ie);var ye={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),Be=0;function Ie(C,P,G,ee,xe){this.listener=C,this.proxy=null,this.src=P,this.type=G,this.capture=!!ee,this.ha=xe,this.key=++Be,this.da=this.fa=!1}function Ge(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function it(C){this.src=C,this.g={},this.h=0}it.prototype.add=function(C,P,G,ee,xe){var Pe=C.toString();C=this.g[Pe],C||(C=this.g[Pe]=[],this.h++);var nt=zt(C,P,ee,xe);return-1<nt?(P=C[nt],G||(P.fa=!1)):(P=new Ie(P,this.src,Pe,!!ee,xe),P.fa=G,C.push(P)),P};function Xe(C,P){var G=P.type;if(G in C.g){var ee=C.g[G],xe=Array.prototype.indexOf.call(ee,P,void 0),Pe;(Pe=0<=xe)&&Array.prototype.splice.call(ee,xe,1),Pe&&(Ge(P),C.g[G].length==0&&(delete C.g[G],C.h--))}}function zt(C,P,G,ee){for(var xe=0;xe<C.length;++xe){var Pe=C[xe];if(!Pe.da&&Pe.listener==P&&Pe.capture==!!G&&Pe.ha==ee)return xe}return-1}var un="closure_lm_"+(1e6*Math.random()|0),Pt={};function Pn(C,P,G,ee,xe){if(Array.isArray(P)){for(var Pe=0;Pe<P.length;Pe++)Pn(C,P[Pe],G,ee,xe);return null}return G=Dn(G),C&&C[we]?C.K(P,G,c(ee)?!!ee.capture:!1,xe):kt(C,P,G,!1,ee,xe)}function kt(C,P,G,ee,xe,Pe){if(!P)throw Error("Invalid event type");var nt=c(xe)?!!xe.capture:!!xe,wn=Jt(C);if(wn||(C[un]=wn=new it(C)),G=wn.add(P,G,ee,nt,Pe),G.proxy)return G;if(ee=hn(),G.proxy=ee,ee.src=C,ee.listener=G,C.addEventListener)ce||(xe=nt),xe===void 0&&(xe=!1),C.addEventListener(P.toString(),ee,xe);else if(C.attachEvent)C.attachEvent(Wt(P.toString()),ee);else if(C.addListener&&C.removeListener)C.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return G}function hn(){function C(G){return P.call(C.src,C.listener,G)}const P=En;return C}function sn(C,P,G,ee,xe){if(Array.isArray(P))for(var Pe=0;Pe<P.length;Pe++)sn(C,P[Pe],G,ee,xe);else ee=c(ee)?!!ee.capture:!!ee,G=Dn(G),C&&C[we]?(C=C.i,P=String(P).toString(),P in C.g&&(Pe=C.g[P],G=zt(Pe,G,ee,xe),-1<G&&(Ge(Pe[G]),Array.prototype.splice.call(Pe,G,1),Pe.length==0&&(delete C.g[P],C.h--)))):C&&(C=Jt(C))&&(P=C.g[P.toString()],C=-1,P&&(C=zt(P,G,ee,xe)),(G=-1<C?P[C]:null)&&Ft(G))}function Ft(C){if(typeof C!="number"&&C&&!C.da){var P=C.src;if(P&&P[we])Xe(P.i,C);else{var G=C.type,ee=C.proxy;P.removeEventListener?P.removeEventListener(G,ee,C.capture):P.detachEvent?P.detachEvent(Wt(G),ee):P.addListener&&P.removeListener&&P.removeListener(ee),(G=Jt(P))?(Xe(G,C),G.h==0&&(G.src=null,P[un]=null)):Ge(C)}}}function Wt(C){return C in Pt?Pt[C]:Pt[C]="on"+C}function En(C,P){if(C.da)C=!0;else{P=new ae(P,this);var G=C.listener,ee=C.ha||C.src;C.fa&&Ft(C),C=G.call(ee,P)}return C}function Jt(C){return C=C[un],C instanceof it?C:null}var pn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dn(C){return typeof C=="function"?C:(C[pn]||(C[pn]=function(P){return C.handleEvent(P)}),C[pn])}function Gt(){te.call(this),this.i=new it(this),this.M=this,this.F=null}y(Gt,te),Gt.prototype[we]=!0,Gt.prototype.removeEventListener=function(C,P,G,ee){sn(this,C,P,G,ee)};function qt(C,P){var G,ee=C.F;if(ee)for(G=[];ee;ee=ee.F)G.push(ee);if(C=C.M,ee=P.type||P,typeof P=="string")P=new ie(P,C);else if(P instanceof ie)P.target=P.target||C;else{var xe=P;P=new ie(ee,C),L(P,xe)}if(xe=!0,G)for(var Pe=G.length-1;0<=Pe;Pe--){var nt=P.g=G[Pe];xe=bn(nt,ee,!0,P)&&xe}if(nt=P.g=C,xe=bn(nt,ee,!0,P)&&xe,xe=bn(nt,ee,!1,P)&&xe,G)for(Pe=0;Pe<G.length;Pe++)nt=P.g=G[Pe],xe=bn(nt,ee,!1,P)&&xe}Gt.prototype.N=function(){if(Gt.aa.N.call(this),this.i){var C=this.i,P;for(P in C.g){for(var G=C.g[P],ee=0;ee<G.length;ee++)Ge(G[ee]);delete C.g[P],C.h--}}this.F=null},Gt.prototype.K=function(C,P,G,ee){return this.i.add(String(C),P,!1,G,ee)},Gt.prototype.L=function(C,P,G,ee){return this.i.add(String(C),P,!0,G,ee)};function bn(C,P,G,ee){if(P=C.i.g[String(P)],!P)return!0;P=P.concat();for(var xe=!0,Pe=0;Pe<P.length;++Pe){var nt=P[Pe];if(nt&&!nt.da&&nt.capture==G){var wn=nt.listener,Hr=nt.ha||nt.src;nt.fa&&Xe(C.i,nt),xe=wn.call(Hr,ee)!==!1&&xe}}return xe&&!ee.defaultPrevented}function Ln(C,P,G){if(typeof C=="function")G&&(C=p(C,G));else if(C&&typeof C.handleEvent=="function")C=p(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(P)?-1:a.setTimeout(C,P||0)}function Gn(C){C.g=Ln(()=>{C.g=null,C.i&&(C.i=!1,Gn(C))},C.l);const P=C.h;C.h=null,C.m.apply(null,P)}class Dr extends te{constructor(P,G){super(),this.m=P,this.l=G,this.h=null,this.i=!1,this.g=null}j(P){this.h=arguments,this.g?this.i=!0:Gn(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nn(C){te.call(this),this.h=C,this.g={}}y(Nn,te);var Ar=[];function Rr(C){F(C.g,function(P,G){this.g.hasOwnProperty(G)&&Ft(P)},C),C.g={}}Nn.prototype.N=function(){Nn.aa.N.call(this),Rr(this)},Nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qn=a.JSON.stringify,st=a.JSON.parse,Xo=class{stringify(C){return a.JSON.stringify(C,void 0)}parse(C){return a.JSON.parse(C,void 0)}};function Xr(){}Xr.prototype.h=null;function Fr(C){return C.h||(C.h=C.i())}function tt(){}var Qo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ir(){ie.call(this,"d")}y(Ir,ie);function Qr(){ie.call(this,"c")}y(Qr,ie);var yt={},Vn=null;function Wn(){return Vn=Vn||new Gt}yt.La="serverreachability";function Yn(C){ie.call(this,yt.La,C)}y(Yn,ie);function sr(C){const P=Wn();qt(P,new Yn(P))}yt.STAT_EVENT="statevent";function er(C,P){ie.call(this,yt.STAT_EVENT,C),this.stat=P}y(er,ie);function en(C){const P=Wn();qt(P,new er(P,C))}yt.Ma="timingevent";function tr(C,P){ie.call(this,yt.Ma,C),this.size=P}y(tr,ie);function wt(C,P){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){C()},P)}function Yt(){this.g=!0}Yt.prototype.xa=function(){this.g=!1};function Pl(C,P,G,ee,xe,Pe){C.info(function(){if(C.g)if(Pe)for(var nt="",wn=Pe.split("&"),Hr=0;Hr<wn.length;Hr++){var kn=wn[Hr].split("=");if(1<kn.length){var eo=kn[0];kn=kn[1];var Lr=eo.split("_");nt=2<=Lr.length&&Lr[1]=="type"?nt+(eo+"="+kn+"&"):nt+(eo+"=redacted&")}}else nt=null;else nt=Pe;return"XMLHTTP REQ ("+ee+") [attempt "+xe+"]: "+P+`
`+G+`
`+nt})}function gi(C,P,G,ee,xe,Pe,nt){C.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+xe+"]: "+P+`
`+G+`
`+Pe+" "+nt})}function rs(C,P,G,ee){C.info(function(){return"XMLHTTP TEXT ("+P+"): "+Oc(C,G)+(ee?" "+ee:"")})}function Nc(C,P){C.info(function(){return"TIMEOUT: "+P})}Yt.prototype.info=function(){};function Oc(C,P){if(!C.g)return P;if(!P)return null;try{var G=JSON.parse(P);if(G){for(C=0;C<G.length;C++)if(Array.isArray(G[C])){var ee=G[C];if(!(2>ee.length)){var xe=ee[1];if(Array.isArray(xe)&&!(1>xe.length)){var Pe=xe[0];if(Pe!="noop"&&Pe!="stop"&&Pe!="close")for(var nt=1;nt<xe.length;nt++)xe[nt]=""}}}}return qn(G)}catch{return P}}var Zo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_o;function Hi(){}y(Hi,Xr),Hi.prototype.g=function(){return new XMLHttpRequest},Hi.prototype.i=function(){return{}},_o=new Hi;function Jo(C,P,G,ee){this.j=C,this.i=P,this.l=G,this.R=ee||1,this.U=new Nn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}var Uu={},is={};function ss(C,P,G){C.L=1,C.v=Ll(Oo(P)),C.m=G,C.P=!0,Ms(C,null)}function Ms(C,P){C.F=Date.now(),ei(C),C.A=Oo(C.v);var G=C.A,ee=C.R;Array.isArray(ee)||(ee=[String(ee)]),vi(G.i,"t",ee),C.C=0,G=C.j.J,C.h=new Xn,C.g=Zu(C.j,G?P:null,!C.m),0<C.O&&(C.M=new Dr(p(C.Y,C,C.g),C.O)),P=C.U,G=C.g,ee=C.ca;var xe="readystatechange";Array.isArray(xe)||(xe&&(Ar[0]=xe.toString()),xe=Ar);for(var Pe=0;Pe<xe.length;Pe++){var nt=Pn(G,xe[Pe],ee||P.handleEvent,!1,P.h||P);if(!nt)break;P.g[nt.key]=nt}P=C.H?R(C.H):{},C.m?(C.u||(C.u="POST"),P["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,P)):(C.u="GET",C.g.ea(C.A,C.u,null,P)),sr(),Pl(C.i,C.u,C.A,C.l,C.R,C.m)}Jo.prototype.ca=function(C){C=C.target;const P=this.M;P&&wi(C)==3?P.j():this.Y(C)},Jo.prototype.Y=function(C){try{if(C==this.g)e:{const Lr=wi(this.g);var P=this.g.Ba();const ga=this.g.Z();if(!(3>Lr)&&(Lr!=3||this.g&&(this.h.h||this.g.oa()||Wu(this.g)))){this.J||Lr!=4||P==7||(P==8||0>=ga?sr(3):sr(2)),Ui(this);var G=this.g.Z();this.X=G;t:if(vr(this)){var ee=Wu(this.g);C="";var xe=ee.length,Pe=wi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zr(this),zi(this);var nt="";break t}this.h.i=new a.TextDecoder}for(P=0;P<xe;P++)this.h.h=!0,C+=this.h.i.decode(ee[P],{stream:!(Pe&&P==xe-1)});ee.length=0,this.h.g+=C,this.C=0,nt=this.h.g}else nt=this.g.oa();if(this.o=G==200,gi(this.i,this.u,this.A,this.l,this.R,Lr,G),this.o){if(this.T&&!this.K){t:{if(this.g){var wn,Hr=this.g;if((wn=Hr.g?Hr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(wn)){var kn=wn;break t}}kn=null}if(G=kn)rs(this.i,this.l,G,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qa(this,G);else{this.o=!1,this.s=3,en(12),Zr(this),zi(this);break e}}if(this.P){G=!0;let co;for(;!this.J&&this.C<nt.length;)if(co=sa(this,nt),co==is){Lr==4&&(this.s=4,en(14),G=!1),rs(this.i,this.l,null,"[Incomplete Response]");break}else if(co==Uu){this.s=4,en(15),rs(this.i,this.l,nt,"[Invalid Chunk]"),G=!1;break}else rs(this.i,this.l,co,null),qa(this,co);if(vr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lr!=4||nt.length!=0||this.h.h||(this.s=1,en(16),G=!1),this.o=this.o&&G,!G)rs(this.i,this.l,nt,"[Invalid Chunked Response]"),Zr(this),zi(this);else if(0<nt.length&&!this.W){this.W=!0;var eo=this.j;eo.g==this&&eo.ba&&!eo.M&&(eo.j.info("Great, no buffering proxy detected. Bytes received: "+nt.length),Ds(eo),eo.M=!0,en(11))}}else rs(this.i,this.l,nt,null),qa(this,nt);Lr==4&&Zr(this),this.o&&!this.J&&(Lr==4?Wf(this.j,this):(this.o=!1,ei(this)))}else xp(this.g),G==400&&0<nt.indexOf("Unknown SID")?(this.s=3,en(12)):(this.s=0,en(13)),Zr(this),zi(this)}}}catch{}finally{}};function vr(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function sa(C,P){var G=C.C,ee=P.indexOf(`
`,G);return ee==-1?is:(G=Number(P.substring(G,ee)),isNaN(G)?Uu:(ee+=1,ee+G>P.length?is:(P=P.slice(ee,ee+G),C.C=ee+G,P)))}Jo.prototype.cancel=function(){this.J=!0,Zr(this)};function ei(C){C.S=Date.now()+C.I,Ff(C,C.I)}function Ff(C,P){if(C.B!=null)throw Error("WatchDog timer not null");C.B=wt(p(C.ba,C),P)}function Ui(C){C.B&&(a.clearTimeout(C.B),C.B=null)}Jo.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(Nc(this.i,this.A),this.L!=2&&(sr(),en(17)),Zr(this),this.s=2,zi(this)):Ff(this,this.S-C)};function zi(C){C.j.G==0||C.J||Wf(C.j,C)}function Zr(C){Ui(C);var P=C.M;P&&typeof P.ma=="function"&&P.ma(),C.M=null,Rr(C.U),C.g&&(P=C.g,C.g=null,P.abort(),P.ma())}function qa(C,P){try{var G=C.j;if(G.G!=0&&(G.g==C||tn(G.h,C))){if(!C.K&&tn(G.h,C)&&G.G==3){try{var ee=G.Da.g.parse(P)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var xe=ee;if(xe[0]==0){e:if(!G.u){if(G.g)if(G.g.F+3e3<C.F)rl(G),jc(G);else break e;nl(G),en(18)}}else G.za=xe[1],0<G.za-G.T&&37500>xe[2]&&G.F&&G.v==0&&!G.C&&(G.C=wt(p(G.Za,G),6e3));if(1>=Pc(G.h)&&G.ca){try{G.ca()}catch{}G.ca=void 0}}else fs(G,11)}else if((C.K||G.g==C)&&rl(G),!M(P))for(xe=G.Da.g.parse(P),P=0;P<xe.length;P++){let kn=xe[P];if(G.T=kn[0],kn=kn[1],G.G==2)if(kn[0]=="c"){G.K=kn[1],G.ia=kn[2];const eo=kn[3];eo!=null&&(G.la=eo,G.j.info("VER="+G.la));const Lr=kn[4];Lr!=null&&(G.Aa=Lr,G.j.info("SVER="+G.Aa));const ga=kn[5];ga!=null&&typeof ga=="number"&&0<ga&&(ee=1.5*ga,G.L=ee,G.j.info("backChannelRequestTimeoutMs_="+ee)),ee=G;const co=C.g;if(co){const ya=co.g?co.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ya){var Pe=ee.h;Pe.g||ya.indexOf("spdy")==-1&&ya.indexOf("quic")==-1&&ya.indexOf("h2")==-1||(Pe.j=Pe.l,Pe.g=new Set,Pe.h&&(Dc(Pe,Pe.h),Pe.h=null))}if(ee.D){const Xf=co.g?co.g.getResponseHeader("X-HTTP-Session-Id"):null;Xf&&(ee.ya=Xf,jn(ee.I,ee.D,Xf))}}G.G=3,G.l&&G.l.ua(),G.ba&&(G.R=Date.now()-C.F,G.j.info("Handshake RTT: "+G.R+"ms")),ee=G;var nt=C;if(ee.qa=ma(ee,ee.J?ee.ia:null,ee.W),nt.K){No(ee.h,nt);var wn=nt,Hr=ee.L;Hr&&(wn.I=Hr),wn.B&&(Ui(wn),ei(wn)),ee.g=nt}else Jr(ee);0<G.i.length&&el(G)}else kn[0]!="stop"&&kn[0]!="close"||fs(G,7);else G.G==3&&(kn[0]=="stop"||kn[0]=="close"?kn[0]=="stop"?fs(G,7):$l(G):kn[0]!="noop"&&G.l&&G.l.ta(kn),G.v=0)}}sr(4)}catch{}}var aa=class{constructor(C,P){this.g=C,this.map=P}};function la(C){this.l=C||10,a.PerformanceNavigationTiming?(C=a.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ka(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function Pc(C){return C.h?1:C.g?C.g.size:0}function tn(C,P){return C.h?C.h==P:C.g?C.g.has(P):!1}function Dc(C,P){C.g?C.g.add(P):C.h=P}function No(C,P){C.h&&C.h==P?C.h=null:C.g&&C.g.has(P)&&C.g.delete(P)}la.prototype.cancel=function(){if(this.i=zu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function zu(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let P=C.i;for(const G of C.g.values())P=P.concat(G.D);return P}return b(C.i)}function nr(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(l(C)){for(var P=[],G=C.length,ee=0;ee<G;ee++)P.push(C[ee]);return P}P=[],G=0;for(ee in C)P[G++]=C[ee];return P}function ca(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(l(C)||typeof C=="string"){var P=[];C=C.length;for(var G=0;G<C;G++)P.push(G);return P}P=[],G=0;for(const ee in C)P[G++]=ee;return P}}}function Wa(C,P){if(C.forEach&&typeof C.forEach=="function")C.forEach(P,void 0);else if(l(C)||typeof C=="string")Array.prototype.forEach.call(C,P,void 0);else for(var G=ca(C),ee=nr(C),xe=ee.length,Pe=0;Pe<xe;Pe++)P.call(void 0,ee[Pe],G&&G[Pe],C)}var as=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hf(C,P){if(C){C=C.split("&");for(var G=0;G<C.length;G++){var ee=C[G].indexOf("="),xe=null;if(0<=ee){var Pe=C[G].substring(0,ee);xe=C[G].substring(ee+1)}else Pe=C[G];P(Pe,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}function Mr(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof Mr){this.h=C.h,Dl(this,C.j),this.o=C.o,this.g=C.g,Ns(this,C.s),this.l=C.l;var P=C.i,G=new Po;G.i=P.i,P.g&&(G.g=new Map(P.g),G.h=P.h),ua(this,G),this.m=C.m}else C&&(P=String(C).match(as))?(this.h=!1,Dl(this,P[1]||"",!0),this.o=ls(P[2]||""),this.g=ls(P[3]||"",!0),Ns(this,P[4]),this.l=ls(P[5]||"",!0),ua(this,P[6]||"",!0),this.m=ls(P[7]||"")):(this.h=!1,this.i=new Po(null,this.h))}Mr.prototype.toString=function(){var C=[],P=this.j;P&&C.push(an(P,Uf,!0),":");var G=this.g;return(G||P=="file")&&(C.push("//"),(P=this.o)&&C.push(an(P,Uf,!0),"@"),C.push(encodeURIComponent(String(G)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),G=this.s,G!=null&&C.push(":",String(G))),(G=this.l)&&(this.g&&G.charAt(0)!="/"&&C.push("/"),C.push(an(G,G.charAt(0)=="/"?ti:zf,!0))),(G=this.i.toString())&&C.push("?",G),(G=this.m)&&C.push("#",an(G,Ya)),C.join("")};function Oo(C){return new Mr(C)}function Dl(C,P,G){C.j=G?ls(P,!0):P,C.j&&(C.j=C.j.replace(/:$/,""))}function Ns(C,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);C.s=P}else C.s=null}function ua(C,P,G){P instanceof Po?(C.i=P,jl(C.i,C.h)):(G||(P=an(P,Vl)),C.i=new Po(P,C.h))}function jn(C,P,G){C.i.set(P,G)}function Ll(C){return jn(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function ls(C,P){return C?P?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function an(C,P,G){return typeof C=="string"?(C=encodeURI(C).replace(P,Gu),G&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function Gu(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var Uf=/[#\/\?@]/g,zf=/[#\?:]/g,ti=/[#\?]/g,Vl=/[#\?@]/g,Ya=/#/g;function Po(C,P){this.h=this.g=null,this.i=C||null,this.j=!!P}function Gi(C){C.g||(C.g=new Map,C.h=0,C.i&&Hf(C.i,function(P,G){C.add(decodeURIComponent(P.replace(/\+/g," ")),G)}))}t=Po.prototype,t.add=function(C,P){Gi(this),this.i=null,C=bi(this,C);var G=this.g.get(C);return G||this.g.set(C,G=[]),G.push(P),this.h+=1,this};function da(C,P){Gi(C),P=bi(C,P),C.g.has(P)&&(C.i=null,C.h-=C.g.get(P).length,C.g.delete(P))}function ar(C,P){return Gi(C),P=bi(C,P),C.g.has(P)}t.forEach=function(C,P){Gi(this),this.g.forEach(function(G,ee){G.forEach(function(xe){C.call(P,xe,ee,this)},this)},this)},t.na=function(){Gi(this);const C=Array.from(this.g.values()),P=Array.from(this.g.keys()),G=[];for(let ee=0;ee<P.length;ee++){const xe=C[ee];for(let Pe=0;Pe<xe.length;Pe++)G.push(P[ee])}return G},t.V=function(C){Gi(this);let P=[];if(typeof C=="string")ar(this,C)&&(P=P.concat(this.g.get(bi(this,C))));else{C=Array.from(this.g.values());for(let G=0;G<C.length;G++)P=P.concat(C[G])}return P},t.set=function(C,P){return Gi(this),this.i=null,C=bi(this,C),ar(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[P]),this.h+=1,this},t.get=function(C,P){return C?(C=this.V(C),0<C.length?String(C[0]):P):P};function vi(C,P,G){da(C,P),0<G.length&&(C.i=null,C.g.set(bi(C,P),b(G)),C.h+=G.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],P=Array.from(this.g.keys());for(var G=0;G<P.length;G++){var ee=P[G];const Pe=encodeURIComponent(String(ee)),nt=this.V(ee);for(ee=0;ee<nt.length;ee++){var xe=Pe;nt[ee]!==""&&(xe+="="+encodeURIComponent(String(nt[ee]))),C.push(xe)}}return this.i=C.join("&")};function bi(C,P){return P=String(P),C.j&&(P=P.toLowerCase()),P}function jl(C,P){P&&!C.j&&(Gi(C),C.i=null,C.g.forEach(function(G,ee){var xe=ee.toLowerCase();ee!=xe&&(da(this,ee),vi(this,xe,G))},C)),C.j=P}function Xa(C,P){const G=new Yt;if(a.Image){const ee=new Image;ee.onload=g(cs,G,"TestLoadImage: loaded",!0,P,ee),ee.onerror=g(cs,G,"TestLoadImage: error",!1,P,ee),ee.onabort=g(cs,G,"TestLoadImage: abort",!1,P,ee),ee.ontimeout=g(cs,G,"TestLoadImage: timeout",!1,P,ee),a.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=C}else P(!1)}function lo(C,P){const G=new Yt,ee=new AbortController,xe=setTimeout(()=>{ee.abort(),cs(G,"TestPingServer: timeout",!1,P)},1e4);fetch(C,{signal:ee.signal}).then(Pe=>{clearTimeout(xe),Pe.ok?cs(G,"TestPingServer: ok",!0,P):cs(G,"TestPingServer: server error",!1,P)}).catch(()=>{clearTimeout(xe),cs(G,"TestPingServer: error",!1,P)})}function cs(C,P,G,ee,xe){try{xe&&(xe.onload=null,xe.onerror=null,xe.onabort=null,xe.ontimeout=null),ee(G)}catch{}}function Do(){this.g=new Xo}function us(C,P,G){const ee=G||"";try{Wa(C,function(xe,Pe){let nt=xe;c(xe)&&(nt=qn(xe)),P.push(ee+Pe+"="+encodeURIComponent(nt))})}catch(xe){throw P.push(ee+"type="+encodeURIComponent("_badmap")),xe}}function Qa(C){this.l=C.Ub||null,this.j=C.eb||!1}y(Qa,Xr),Qa.prototype.g=function(){return new Os(this.l,this.j)},Qa.prototype.i=function(C){return function(){return C}}({});function Os(C,P){Gt.call(this),this.D=C,this.o=P,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Os,Gt),t=Os.prototype,t.open=function(C,P){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=P,this.readyState=1,Ps(this)},t.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const P={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(P.body=C),(this.D||a).fetch(new Request(this.A,P)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ds(this)),this.readyState=0},t.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,Ps(this)),this.g&&(this.readyState=3,Ps(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Za(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function Za(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}t.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var P=C.value?C.value:new Uint8Array(0);(P=this.v.decode(P,{stream:!C.done}))&&(this.response=this.responseText+=P)}C.done?ds(this):Ps(this),this.readyState==3&&Za(this)}},t.Ra=function(C){this.g&&(this.response=this.responseText=C,ds(this))},t.Qa=function(C){this.g&&(this.response=C,ds(this))},t.ga=function(){this.g&&ds(this)};function ds(C){C.readyState=4,C.l=null,C.j=null,C.v=null,Ps(C)}t.setRequestHeader=function(C,P){this.u.append(C,P)},t.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],P=this.h.entries();for(var G=P.next();!G.done;)G=G.value,C.push(G[0]+": "+G[1]),G=P.next();return C.join(`\r
`)};function Ps(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(Os.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function Gf(C){let P="";return F(C,function(G,ee){P+=ee,P+=":",P+=G,P+=`\r
`}),P}function Nr(C,P,G){e:{for(ee in G){var ee=!1;break e}ee=!0}ee||(G=Gf(G),typeof C=="string"?G!=null&&encodeURIComponent(String(G)):jn(C,P,G))}function Un(C){Gt.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Un,Gt);var qu=/^https?$/i,fa=["POST","PUT"];t=Un.prototype,t.Ha=function(C){this.J=C},t.ea=function(C,P,G,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);P=P?P.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_o.g(),this.v=this.o?Fr(this.o):Fr(_o),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(P,String(C),!0),this.B=!1}catch(Pe){Lc(this,Pe);return}if(C=G||"",G=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var xe in ee)G.set(xe,ee[xe]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const Pe of ee.keys())G.set(Pe,ee.get(Pe));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(G.keys()).find(Pe=>Pe.toLowerCase()=="content-type"),xe=a.FormData&&C instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fa,P,void 0))||ee||xe||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pe,nt]of G)this.g.setRequestHeader(Pe,nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vc(this),this.u=!0,this.g.send(C),this.u=!1}catch(Pe){Lc(this,Pe)}};function Lc(C,P){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=P,C.m=5,Bl(C),ha(C)}function Bl(C){C.A||(C.A=!0,qt(C,"complete"),qt(C,"error"))}t.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,qt(this,"complete"),qt(this,"abort"),ha(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ha(this,!0)),Un.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ku(this):this.bb())},t.bb=function(){Ku(this)};function Ku(C){if(C.h&&typeof s<"u"&&(!C.v[1]||wi(C)!=4||C.Z()!=2)){if(C.u&&wi(C)==4)Ln(C.Ea,0,C);else if(qt(C,"readystatechange"),wi(C)==4){C.h=!1;try{const nt=C.Z();e:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var P=!0;break e;default:P=!1}var G;if(!(G=P)){var ee;if(ee=nt===0){var xe=String(C.D).match(as)[1]||null;!xe&&a.self&&a.self.location&&(xe=a.self.location.protocol.slice(0,-1)),ee=!qu.test(xe?xe.toLowerCase():"")}G=ee}if(G)qt(C,"complete"),qt(C,"success");else{C.m=6;try{var Pe=2<wi(C)?C.g.statusText:""}catch{Pe=""}C.l=Pe+" ["+C.Z()+"]",Bl(C)}}finally{ha(C)}}}}function ha(C,P){if(C.g){Vc(C);const G=C.g,ee=C.v[0]?()=>{}:null;C.g=null,C.v=null,P||qt(C,"ready");try{G.onreadystatechange=ee}catch{}}}function Vc(C){C.I&&(a.clearTimeout(C.I),C.I=null)}t.isActive=function(){return!!this.g};function wi(C){return C.g?C.g.readyState:0}t.Z=function(){try{return 2<wi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(C){if(this.g){var P=this.g.responseText;return C&&P.indexOf(C)==0&&(P=P.substring(C.length)),st(P)}};function Wu(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function xp(C){const P={};C=(C.g&&2<=wi(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<C.length;ee++){if(M(C[ee]))continue;var G=z(C[ee]);const xe=G[0];if(G=G[1],typeof G!="string")continue;G=G.trim();const Pe=P[xe]||[];P[xe]=Pe,Pe.push(G)}D(P,function(ee){return ee.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pa(C,P,G){return G&&G.internalChannelParams&&G.internalChannelParams[C]||P}function Ja(C){this.Aa=0,this.i=[],this.j=new Yt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pa("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pa("baseRetryDelayMs",5e3,C),this.cb=pa("retryDelaySeedMs",1e4,C),this.Wa=pa("forwardChannelMaxRetries",2,C),this.wa=pa("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new la(C&&C.concurrentRequestLimit),this.Da=new Do,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ja.prototype,t.la=8,t.G=1,t.connect=function(C,P,G,ee){en(0),this.W=C,this.H=P||{},G&&ee!==void 0&&(this.H.OSID=G,this.H.OAID=ee),this.F=this.X,this.I=ma(this,null,this.W),el(this)};function $l(C){if(Ep(C),C.G==3){var P=C.U++,G=Oo(C.I);if(jn(G,"SID",C.K),jn(G,"RID",P),jn(G,"TYPE","terminate"),tl(C,G),P=new Jo(C,C.j,P),P.L=2,P.v=Ll(Oo(G)),G=!1,a.navigator&&a.navigator.sendBeacon)try{G=a.navigator.sendBeacon(P.v.toString(),"")}catch{}!G&&a.Image&&(new Image().src=P.v,G=!0),G||(P.g=Zu(P.j,null),P.g.ea(P.v)),P.F=Date.now(),ei(P)}Qu(C)}function jc(C){C.g&&(Ds(C),C.g.cancel(),C.g=null)}function Ep(C){jc(C),C.u&&(a.clearTimeout(C.u),C.u=null),rl(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&a.clearTimeout(C.s),C.s=null)}function el(C){if(!Ka(C.h)&&!C.s){C.s=!0;var P=C.Ga;U||Y(),Q||(U(),Q=!0),J.add(P,C),C.B=0}}function qf(C,P){return Pc(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=P.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=wt(p(C.Ga,C,P),Xu(C,C.B)),C.B++,!0)}t.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const xe=new Jo(this,this.j,C);let Pe=this.o;if(this.S&&(Pe?(Pe=R(Pe),L(Pe,this.S)):Pe=this.S),this.m!==null||this.O||(xe.H=Pe,Pe=null),this.P)e:{for(var P=0,G=0;G<this.i.length;G++){t:{var ee=this.i[G];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(P+=ee,4096<P){P=G;break e}if(P===4096||G===this.i.length-1){P=G+1;break e}}P=1e3}else P=1e3;P=Yu(this,xe,P),G=Oo(this.I),jn(G,"RID",C),jn(G,"CVER",22),this.D&&jn(G,"X-HTTP-Session-Id",this.D),tl(this,G),Pe&&(this.O?P="headers="+encodeURIComponent(String(Gf(Pe)))+"&"+P:this.m&&Nr(G,this.m,Pe)),Dc(this.h,xe),this.Ua&&jn(G,"TYPE","init"),this.P?(jn(G,"$req",P),jn(G,"SID","null"),xe.T=!0,ss(xe,G,null)):ss(xe,G,P),this.G=2}}else this.G==3&&(C?Bc(this,C):this.i.length==0||Ka(this.h)||Bc(this))};function Bc(C,P){var G;P?G=P.l:G=C.U++;const ee=Oo(C.I);jn(ee,"SID",C.K),jn(ee,"RID",G),jn(ee,"AID",C.T),tl(C,ee),C.m&&C.o&&Nr(ee,C.m,C.o),G=new Jo(C,C.j,G,C.B+1),C.m===null&&(G.H=C.o),P&&(C.i=P.D.concat(C.i)),P=Yu(C,G,1e3),G.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),Dc(C.h,G),ss(G,ee,P)}function tl(C,P){C.H&&F(C.H,function(G,ee){jn(P,ee,G)}),C.l&&Wa({},function(G,ee){jn(P,ee,G)})}function Yu(C,P,G){G=Math.min(C.i.length,G);var ee=C.l?p(C.l.Na,C.l,C):null;e:{var xe=C.i;let Pe=-1;for(;;){const nt=["count="+G];Pe==-1?0<G?(Pe=xe[0].g,nt.push("ofs="+Pe)):Pe=0:nt.push("ofs="+Pe);let wn=!0;for(let Hr=0;Hr<G;Hr++){let kn=xe[Hr].g;const eo=xe[Hr].map;if(kn-=Pe,0>kn)Pe=Math.max(0,xe[Hr].g-100),wn=!1;else try{us(eo,nt,"req"+kn+"_")}catch{ee&&ee(eo)}}if(wn){ee=nt.join("&");break e}}}return C=C.i.splice(0,G),P.D=C,ee}function Jr(C){if(!C.g&&!C.u){C.Y=1;var P=C.Fa;U||Y(),Q||(U(),Q=!0),J.add(P,C),C.v=0}}function nl(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=wt(p(C.Fa,C),Xu(C,C.v)),C.v++,!0)}t.Fa=function(){if(this.u=null,Kf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=wt(p(this.ab,this),C)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,en(10),jc(this),Kf(this))};function Ds(C){C.A!=null&&(a.clearTimeout(C.A),C.A=null)}function Kf(C){C.g=new Jo(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var P=Oo(C.qa);jn(P,"RID","rpc"),jn(P,"SID",C.K),jn(P,"AID",C.T),jn(P,"CI",C.F?"0":"1"),!C.F&&C.ja&&jn(P,"TO",C.ja),jn(P,"TYPE","xmlhttp"),tl(C,P),C.m&&C.o&&Nr(P,C.m,C.o),C.L&&(C.g.I=C.L);var G=C.g;C=C.ia,G.L=1,G.v=Ll(Oo(P)),G.m=null,G.P=!0,Ms(G,C)}t.Za=function(){this.C!=null&&(this.C=null,jc(this),nl(this),en(19))};function rl(C){C.C!=null&&(a.clearTimeout(C.C),C.C=null)}function Wf(C,P){var G=null;if(C.g==P){rl(C),Ds(C),C.g=null;var ee=2}else if(tn(C.h,P))G=P.D,No(C.h,P),ee=1;else return;if(C.G!=0){if(P.o)if(ee==1){G=P.m?P.m.length:0,P=Date.now()-P.F;var xe=C.B;ee=Wn(),qt(ee,new tr(ee,G)),el(C)}else Jr(C);else if(xe=P.s,xe==3||xe==0&&0<P.X||!(ee==1&&qf(C,P)||ee==2&&nl(C)))switch(G&&0<G.length&&(P=C.h,P.i=P.i.concat(G)),xe){case 1:fs(C,5);break;case 4:fs(C,10);break;case 3:fs(C,6);break;default:fs(C,2)}}}function Xu(C,P){let G=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(G*=2),G*P}function fs(C,P){if(C.j.info("Error code "+P),P==2){var G=p(C.fb,C),ee=C.Xa;const xe=!ee;ee=new Mr(ee||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Dl(ee,"https"),Ll(ee),xe?Xa(ee.toString(),G):lo(ee.toString(),G)}else en(2);C.G=0,C.l&&C.l.sa(P),Qu(C),Ep(C)}t.fb=function(C){C?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function Qu(C){if(C.G=0,C.ka=[],C.l){const P=zu(C.h);(P.length!=0||C.i.length!=0)&&(_(C.ka,P),_(C.ka,C.i),C.h.i.length=0,b(C.i),C.i.length=0),C.l.ra()}}function ma(C,P,G){var ee=G instanceof Mr?Oo(G):new Mr(G);if(ee.g!="")P&&(ee.g=P+"."+ee.g),Ns(ee,ee.s);else{var xe=a.location;ee=xe.protocol,P=P?P+"."+xe.hostname:xe.hostname,xe=+xe.port;var Pe=new Mr(null);ee&&Dl(Pe,ee),P&&(Pe.g=P),xe&&Ns(Pe,xe),G&&(Pe.l=G),ee=Pe}return G=C.D,P=C.ya,G&&P&&jn(ee,G,P),jn(ee,"VER",C.la),tl(C,ee),ee}function Zu(C,P,G){if(P&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return P=C.Ca&&!C.pa?new Un(new Qa({eb:G})):new Un(C.pa),P.Ha(C.J),P}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ju(){}t=Ju.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ol(){}ol.prototype.g=function(C,P){return new xo(C,P)};function xo(C,P){Gt.call(this),this.g=new Ja(P),this.l=C,this.h=P&&P.messageUrlParams||null,C=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(C?C["X-WebChannel-Content-Type"]=P.messageContentType:C={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.va&&(C?C["X-WebChannel-Client-Profile"]=P.va:C={"X-WebChannel-Client-Profile":P.va}),this.g.S=C,(C=P&&P.Sb)&&!M(C)&&(this.g.m=C),this.v=P&&P.supportsCrossDomainXhr||!1,this.u=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!M(P)&&(this.g.D=P,C=this.h,C!==null&&P in C&&(C=this.h,P in C&&delete C[P])),this.j=new hs(this)}y(xo,Gt),xo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xo.prototype.close=function(){$l(this.g)},xo.prototype.o=function(C){var P=this.g;if(typeof C=="string"){var G={};G.__data__=C,C=G}else this.u&&(G={},G.__data__=qn(C),C=G);P.i.push(new aa(P.Ya++,C)),P.G==3&&el(P)},xo.prototype.N=function(){this.g.l=null,delete this.j,$l(this.g),delete this.g,xo.aa.N.call(this)};function Yf(C){Ir.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var P=C.__sm__;if(P){e:{for(const G in P){C=G;break e}C=void 0}(this.i=C)&&(C=this.i,P=P!==null&&C in P?P[C]:void 0),this.data=P}else this.data=C}y(Yf,Ir);function kp(){Qr.call(this),this.status=1}y(kp,Qr);function hs(C){this.g=C}y(hs,Ju),hs.prototype.ua=function(){qt(this.g,"a")},hs.prototype.ta=function(C){qt(this.g,new Yf(C))},hs.prototype.sa=function(C){qt(this.g,new kp)},hs.prototype.ra=function(){qt(this.g,"b")},ol.prototype.createWebChannel=ol.prototype.g,xo.prototype.send=xo.prototype.o,xo.prototype.open=xo.prototype.m,xo.prototype.close=xo.prototype.close,Y7=function(){return new ol},W7=function(){return Wn()},K7=yt,X2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zo.NO_ERROR=0,Zo.TIMEOUT=8,Zo.HTTP_ERROR=6,Mw=Zo,yi.COMPLETE="complete",q7=yi,tt.EventType=Qo,Qo.OPEN="a",Qo.CLOSE="b",Qo.ERROR="c",Qo.MESSAGE="d",Gt.prototype.listen=Gt.prototype.K,tv=tt,Un.prototype.listenOnce=Un.prototype.L,Un.prototype.getLastError=Un.prototype.Ka,Un.prototype.getLastErrorCode=Un.prototype.Ba,Un.prototype.getStatus=Un.prototype.Z,Un.prototype.getResponseJson=Un.prototype.Oa,Un.prototype.getResponseText=Un.prototype.oa,Un.prototype.send=Un.prototype.ea,Un.prototype.setWithCredentials=Un.prototype.Ha,G7=Un}).apply(typeof L1<"u"?L1:typeof self<"u"?self:typeof window<"u"?window:{});const B5="@firebase/firestore",$5="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ii.UNAUTHENTICATED=new Ii(null),Ii.GOOGLE_CREDENTIALS=new Ii("google-credentials-uid"),Ii.FIRST_PARTY=new Ii("first-party-uid"),Ii.MOCK_USER=new Ii("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ig="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new G_("@firebase/firestore");function um(){return zh.logLevel}function ct(t,...e){if(zh.logLevel<=Tn.DEBUG){const n=e.map(WM);zh.debug(`Firestore (${Ig}): ${t}`,...n)}}function Nu(t,...e){if(zh.logLevel<=Tn.ERROR){const n=e.map(WM);zh.error(`Firestore (${Ig}): ${t}`,...n)}}function Xm(t,...e){if(zh.logLevel<=Tn.WARN){const n=e.map(WM);zh.warn(`Firestore (${Ig}): ${t}`,...n)}}function WM(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,X7(t,r,n)}function X7(t,e,n){let r=`FIRESTORE (${Ig}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Nu(r),new Error(r)}function Jn(t,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,t||X7(e,o,r)}function Kt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const He={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends kc{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ile{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ii.UNAUTHENTICATED))}shutdown(){}}class sle{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ale{constructor(e){this.t=e,this.currentUser=Ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Jn(this.o===void 0,42304);let r=this.i;const o=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new Zd;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zd,e.enqueueRetryable(()=>o(this.currentUser))};const s=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await o(this.currentUser)})},a=l=>{ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zd)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Jn(typeof r.accessToken=="string",31837,{l:r}),new Q7(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Jn(e===null||typeof e=="string",2055,{h:e}),new Ii(e)}}class lle{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ii.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cle{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new lle(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class F5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ule{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ra(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Jn(this.o===void 0,3512);const r=i=>{i.error!=null&&ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const s=i.token!==this.m;return this.m=i.token,ct("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const o=i=>{ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>o(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?o(i):ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new F5(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Jn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new F5(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dle(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=dle(40);for(let i=0;i<o.length;++i)r.length<20&&o[i]<n&&(r+=e.charAt(o[i]%62))}return r}}function An(t,e){return t<e?-1:t>e?1:0}function Q2(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const o=t.charAt(r),i=e.charAt(r);if(o!==i)return jT(o)===jT(i)?An(o,i):jT(o)?1:-1}return An(t.length,e.length)}const fle=55296,hle=57343;function jT(t){const e=t.charCodeAt(0);return e>=fle&&e<=hle}function Qm(t,e,n){return t.length===e.length&&t.every((r,o)=>n(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5="__name__";class ec{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ot(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ot(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ec.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ec?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const i=ec.compareSegments(e.get(o),n.get(o));if(i!==0)return i}return An(e.length,n.length)}static compareSegments(e,n){const r=ec.isNumericId(e),o=ec.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?ec.extractNumericId(e).compare(ec.extractNumericId(n)):Q2(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qd.fromString(e.substring(4,e.length-2))}}class Sr extends ec{construct(e,n,r){return new Sr(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ut(He.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new Sr(n)}static emptyPath(){return new Sr([])}}const ple=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fi extends ec{construct(e,n,r){return new fi(e,n,r)}static isValidIdentifier(e){return ple.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===H5}static keyField(){return new fi([H5])}static fromServerFormat(e){const n=[];let r="",o=0;const i=()=>{if(r.length===0)throw new ut(He.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;o<e.length;){const a=e[o];if(a==="\\"){if(o+1===e.length)throw new ut(He.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[o+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ut(He.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,o+=2}else a==="`"?(s=!s,o++):a!=="."||s?(r+=a,o++):(i(),o++)}if(i(),s)throw new ut(He.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fi(n)}static emptyPath(){return new fi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.path=e}static fromPath(e){return new xt(Sr.fromString(e))}static fromName(e){return new xt(Sr.fromString(e).popFirst(5))}static empty(){return new xt(Sr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Sr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xt(new Sr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z7(t,e,n){if(!n)throw new ut(He.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mle(t,e,n,r){if(e===!0&&r===!0)throw new ut(He.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function U5(t){if(!xt.isDocumentKey(t))throw new ut(He.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function z5(t){if(xt.isDocumentKey(t))throw new ut(He.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function J7(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function K_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ot(12329,{type:typeof t})}function Zm(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ut(He.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=K_(t);throw new ut(He.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(t,e){const n={typeString:t};return e&&(n.value=e),n}function $b(t,e){if(!J7(t))throw new ut(He.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(o&&typeof s!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(i!==void 0&&s!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new ut(He.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=-62135596800,q5=1e6;class ir{static now(){return ir.fromMillis(Date.now())}static fromDate(e){return ir.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*q5);return new ir(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ut(He.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ut(He.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<G5)throw new ut(He.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ut(He.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q5}_compareTo(e){return this.seconds===e.seconds?An(this.nanoseconds,e.nanoseconds):An(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ir._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($b(e,ir._jsonSchema))return new ir(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-G5;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ir._jsonSchemaVersion="firestore/timestamp/1.0",ir._jsonSchema={type:bo("string",ir._jsonSchemaVersion),seconds:bo("number"),nanoseconds:bo("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{static fromTimestamp(e){return new Ut(e)}static min(){return new Ut(new ir(0,0))}static max(){return new Ut(new ir(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=-1;function gle(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,o=Ut.fromTimestamp(r===1e9?new ir(n+1,0):new ir(n,r));return new cf(o,xt.empty(),e)}function yle(t){return new cf(t.readTime,t.key,Fv)}class cf{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new cf(Ut.min(),xt.empty(),Fv)}static max(){return new cf(Ut.max(),xt.empty(),Fv)}}function vle(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=xt.comparator(t.documentKey,e.documentKey),n!==0?n:An(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ble="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wle{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mg(t){if(t.code!==He.FAILED_PRECONDITION||t.message!==ble)throw t;ct("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ot(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ue((r,o)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,o)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ue?n:Ue.resolve(n)}catch(n){return Ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ue.reject(n)}static resolve(e){return new Ue((n,r)=>{n(e)})}static reject(e){return new Ue((n,r)=>{r(e)})}static waitFor(e){return new Ue((n,r)=>{let o=0,i=0,s=!1;e.forEach(a=>{++o,a.next(()=>{++i,s&&i===o&&n()},l=>r(l))}),s=!0,i===o&&n()})}static or(e){let n=Ue.resolve(!1);for(const r of e)n=n.next(o=>o?Ue.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,i)=>{r.push(n.call(this,o,i))}),this.waitFor(r)}static mapArray(e,n){return new Ue((r,o)=>{const i=e.length,s=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{s[c]=d,++a,a===i&&r(s)},d=>o(d))}})}static doWhile(e,n){return new Ue((r,o)=>{const i=()=>{e()===!0?n().next(()=>{i()},o):r()};i()})}}function Cle(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ng(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}W_.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=-1;function Y_(t){return t==null}function bC(t){return t===0&&1/t==-1/0}function Sle(t){return typeof t=="number"&&Number.isInteger(t)&&!bC(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF="";function _le(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=K5(e)),e=xle(t.get(n),e);return K5(e)}function xle(t,e){let n=e;const r=t.length;for(let o=0;o<r;o++){const i=t.charAt(o);switch(i){case"\0":n+="";break;case eF:n+="";break;default:n+=i}}return n}function K5(t){return t+eF+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function up(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n){this.comparator=e,this.root=n||ci.EMPTY}insert(e,n){return new $r(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new $r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new V1(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new V1(this.root,e,this.comparator,!1)}getReverseIterator(){return new V1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new V1(this.root,e,this.comparator,!0)}}class V1{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&o&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ci{constructor(e,n,r,o,i){this.key=e,this.value=n,this.color=r??ci.RED,this.left=o??ci.EMPTY,this.right=i??ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,i){return new ci(e??this.key,n??this.value,r??this.color,o??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const i=r(e,o.key);return o=i<0?o.copy(null,null,null,o.left.insert(e,n,r),null):i===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return ci.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ot(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ot(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ot(27949);return e+(this.isRed()?0:1)}}ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1;ci.EMPTY=new class{constructor(){this.size=0}get key(){throw Ot(57766)}get value(){throw Ot(16141)}get color(){throw Ot(16727)}get left(){throw Ot(29726)}get right(){throw Ot(36894)}copy(e,n,r,o,i){return this}insert(e,n,r){return new ci(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.comparator=e,this.data=new $r(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Y5(this.data.getIterator())}getIteratorFrom(e){return new Y5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,i=r.getNext().key;if(this.comparator(o,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Io(this.comparator);return n.data=e,n}}class Y5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.fields=e,e.sort(fi.comparator)}static empty(){return new pl([])}unionWith(e){let n=new Io(fi.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new pl(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qm(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new nF("Invalid base64 string: "+i):i}}(e);return new mi(n)}static fromUint8Array(e){const n=function(o){let i="";for(let s=0;s<o.length;++s)i+=String.fromCharCode(o[s]);return i}(e);return new mi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return An(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mi.EMPTY_BYTE_STRING=new mi("");const Ele=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uf(t){if(Jn(!!t,39018),typeof t=="string"){let e=0;const n=Ele.exec(t);if(Jn(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:io(t.seconds),nanos:io(t.nanos)}}function io(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function df(t){return typeof t=="string"?mi.fromBase64String(t):mi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF="server_timestamp",oF="__type__",iF="__previous_value__",sF="__local_write_time__";function QM(t){return(t?.mapValue?.fields||{})[oF]?.stringValue===rF}function X_(t){const e=t.mapValue.fields[iF];return QM(e)?X_(e):e}function Hv(t){const e=uf(t.mapValue.fields[sF].timestampValue);return new ir(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kle{constructor(e,n,r,o,i,s,a,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const wC="(default)";class Uv{constructor(e,n){this.projectId=e,this.database=n||wC}static empty(){return new Uv("","")}get isDefaultDatabase(){return this.database===wC}isEqual(e){return e instanceof Uv&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF="__type__",Tle="__max__",j1={mapValue:{}},lF="__vector__",CC="value";function ff(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?QM(t)?4:Rle(t)?9007199254740991:Ale(t)?10:11:Ot(28295,{value:t})}function vc(t,e){if(t===e)return!0;const n=ff(t);if(n!==ff(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Hv(t).isEqual(Hv(e));case 3:return function(o,i){if(typeof o.timestampValue=="string"&&typeof i.timestampValue=="string"&&o.timestampValue.length===i.timestampValue.length)return o.timestampValue===i.timestampValue;const s=uf(o.timestampValue),a=uf(i.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(o,i){return df(o.bytesValue).isEqual(df(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,i){return io(o.geoPointValue.latitude)===io(i.geoPointValue.latitude)&&io(o.geoPointValue.longitude)===io(i.geoPointValue.longitude)}(t,e);case 2:return function(o,i){if("integerValue"in o&&"integerValue"in i)return io(o.integerValue)===io(i.integerValue);if("doubleValue"in o&&"doubleValue"in i){const s=io(o.doubleValue),a=io(i.doubleValue);return s===a?bC(s)===bC(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Qm(t.arrayValue.values||[],e.arrayValue.values||[],vc);case 10:case 11:return function(o,i){const s=o.mapValue.fields||{},a=i.mapValue.fields||{};if(W5(s)!==W5(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!vc(s[l],a[l])))return!1;return!0}(t,e);default:return Ot(52216,{left:t})}}function zv(t,e){return(t.values||[]).find(n=>vc(n,e))!==void 0}function Jm(t,e){if(t===e)return 0;const n=ff(t),r=ff(e);if(n!==r)return An(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return An(t.booleanValue,e.booleanValue);case 2:return function(i,s){const a=io(i.integerValue||i.doubleValue),l=io(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return X5(t.timestampValue,e.timestampValue);case 4:return X5(Hv(t),Hv(e));case 5:return Q2(t.stringValue,e.stringValue);case 6:return function(i,s){const a=df(i),l=df(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const a=i.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=An(a[c],l[c]);if(d!==0)return d}return An(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const a=An(io(i.latitude),io(s.latitude));return a!==0?a:An(io(i.longitude),io(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Q5(t.arrayValue,e.arrayValue);case 10:return function(i,s){const a=i.fields||{},l=s.fields||{},c=a[CC]?.arrayValue,d=l[CC]?.arrayValue,f=An(c?.values?.length||0,d?.values?.length||0);return f!==0?f:Q5(c,d)}(t.mapValue,e.mapValue);case 11:return function(i,s){if(i===j1.mapValue&&s===j1.mapValue)return 0;if(i===j1.mapValue)return 1;if(s===j1.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=s.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const p=Q2(l[f],d[f]);if(p!==0)return p;const g=Jm(a[l[f]],c[d[f]]);if(g!==0)return g}return An(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Ot(23264,{he:n})}}function X5(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return An(t,e);const n=uf(t),r=uf(e),o=An(n.seconds,r.seconds);return o!==0?o:An(n.nanos,r.nanos)}function Q5(t,e){const n=t.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const i=Jm(n[o],r[o]);if(i)return i}return An(n.length,r.length)}function eg(t){return Z2(t)}function Z2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=uf(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return df(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return xt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",o=!0;for(const i of n.values||[])o?o=!1:r+=",",r+=Z2(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",i=!0;for(const s of r)i?i=!1:o+=",",o+=`${s}:${Z2(n.fields[s])}`;return o+"}"}(t.mapValue):Ot(61005,{value:t})}function Nw(t){switch(ff(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=X_(t);return e?16+Nw(e):16;case 5:return 2*t.stringValue.length;case 6:return df(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,i)=>o+Nw(i),0)}(t.arrayValue);case 10:case 11:return function(r){let o=0;return up(r.fields,(i,s)=>{o+=i.length+Nw(s)}),o}(t.mapValue);default:throw Ot(13486,{value:t})}}function Z5(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function J2(t){return!!t&&"integerValue"in t}function ZM(t){return!!t&&"arrayValue"in t}function J5(t){return!!t&&"nullValue"in t}function eV(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ow(t){return!!t&&"mapValue"in t}function Ale(t){return(t?.mapValue?.fields||{})[aF]?.stringValue===lF}function gv(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return up(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=gv(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gv(t.arrayValue.values[n]);return e}return{...t}}function Rle(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Tle}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e){this.value=e}static empty(){return new Ia({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ow(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gv(n)}setAll(e){let n=fi.emptyPath(),r={},o=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,o),r={},o=[],n=a.popLast()}s?r[a.lastSegment()]=gv(s):o.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,o)}delete(e){const n=this.field(e.popLast());Ow(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vc(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Ow(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){up(n,(o,i)=>e[o]=i);for(const o of r)delete e[o]}clone(){return new Ia(gv(this.value))}}function cF(t){const e=[];return up(t.fields,(n,r)=>{const o=new fi([n]);if(Ow(r)){const i=cF(r.mapValue).fields;if(i.length===0)e.push(o);else for(const s of i)e.push(o.child(s))}else e.push(o)}),new pl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n,r,o,i,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Ni(e,0,Ut.min(),Ut.min(),Ut.min(),Ia.empty(),0)}static newFoundDocument(e,n,r,o){return new Ni(e,1,n,Ut.min(),r,o,0)}static newNoDocument(e,n){return new Ni(e,2,n,Ut.min(),Ut.min(),Ia.empty(),0)}static newUnknownDocument(e,n){return new Ni(e,3,n,Ut.min(),Ut.min(),Ia.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ut.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ia.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ia.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ni&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ni(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,n){this.position=e,this.inclusive=n}}function tV(t,e,n){let r=0;for(let o=0;o<t.position.length;o++){const i=e[o],s=t.position[o];if(i.field.isKeyField()?r=xt.comparator(xt.fromName(s.referenceValue),n.key):r=Jm(s,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function nV(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vc(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n="asc"){this.field=e,this.dir=n}}function Ile(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{}class vo extends uF{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Nle(e,n,r):n==="array-contains"?new Dle(e,r):n==="in"?new Lle(e,r):n==="not-in"?new Vle(e,r):n==="array-contains-any"?new jle(e,r):new vo(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Ole(e,r):new Ple(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Jm(n,this.value)):n!==null&&ff(this.value)===ff(n)&&this.matchesComparison(Jm(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ot(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xl extends uF{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new xl(e,n)}matches(e){return dF(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dF(t){return t.op==="and"}function fF(t){return Mle(t)&&dF(t)}function Mle(t){for(const e of t.filters)if(e instanceof xl)return!1;return!0}function eR(t){if(t instanceof vo)return t.field.canonicalString()+t.op.toString()+eg(t.value);if(fF(t))return t.filters.map(e=>eR(e)).join(",");{const e=t.filters.map(n=>eR(n)).join(",");return`${t.op}(${e})`}}function hF(t,e){return t instanceof vo?function(r,o){return o instanceof vo&&r.op===o.op&&r.field.isEqual(o.field)&&vc(r.value,o.value)}(t,e):t instanceof xl?function(r,o){return o instanceof xl&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((i,s,a)=>i&&hF(s,o.filters[a]),!0):!1}(t,e):void Ot(19439)}function pF(t){return t instanceof vo?function(n){return`${n.field.canonicalString()} ${n.op} ${eg(n.value)}`}(t):t instanceof xl?function(n){return n.op.toString()+" {"+n.getFilters().map(pF).join(" ,")+"}"}(t):"Filter"}class Nle extends vo{constructor(e,n,r){super(e,n,r),this.key=xt.fromName(r.referenceValue)}matches(e){const n=xt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Ole extends vo{constructor(e,n){super(e,"in",n),this.keys=mF("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ple extends vo{constructor(e,n){super(e,"not-in",n),this.keys=mF("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mF(t,e){return(e.arrayValue?.values||[]).map(n=>xt.fromName(n.referenceValue))}class Dle extends vo{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ZM(n)&&zv(n.arrayValue,this.value)}}class Lle extends vo{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&zv(this.value.arrayValue,n)}}class Vle extends vo{constructor(e,n){super(e,"not-in",n)}matches(e){if(zv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zv(this.value.arrayValue,n)}}class jle extends vo{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ZM(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>zv(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ble{constructor(e,n=null,r=[],o=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function rV(t,e=null,n=[],r=[],o=null,i=null,s=null){return new Ble(t,e,n,r,o,i,s)}function JM(t){const e=Kt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>eR(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Y_(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>eg(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>eg(r)).join(",")),e.Te=n}return e.Te}function eN(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ile(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!hF(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nV(t.startAt,e.startAt)&&nV(t.endAt,e.endAt)}function tR(t){return xt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n=null,r=[],o=[],i=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $le(t,e,n,r,o,i,s,a){return new Fb(t,e,n,r,o,i,s,a)}function gF(t){return new Fb(t)}function oV(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yF(t){return t.collectionGroup!==null}function yv(t){const e=Kt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Io(fi.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new _C(i,r))}),n.has(fi.keyField().canonicalString())||e.Ie.push(new _C(fi.keyField(),r))}return e.Ie}function lc(t){const e=Kt(t);return e.Ee||(e.Ee=Fle(e,yv(t))),e.Ee}function Fle(t,e){if(t.limitType==="F")return rV(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{const i=o.dir==="desc"?"asc":"desc";return new _C(o.field,i)});const n=t.endAt?new SC(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new SC(t.startAt.position,t.startAt.inclusive):null;return rV(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function nR(t,e){const n=t.filters.concat([e]);return new Fb(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rR(t,e,n){return new Fb(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Q_(t,e){return eN(lc(t),lc(e))&&t.limitType===e.limitType}function vF(t){return`${JM(lc(t))}|lt:${t.limitType}`}function dm(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>pF(o)).join(", ")}]`),Y_(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>eg(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>eg(o)).join(",")),`Target(${r})`}(lc(t))}; limitType=${t.limitType})`}function Z_(t,e){return e.isFoundDocument()&&function(r,o){const i=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):xt.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,o){for(const i of yv(r))if(!i.field.isKeyField()&&o.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,o){for(const i of r.filters)if(!i.matches(o))return!1;return!0}(t,e)&&function(r,o){return!(r.startAt&&!function(s,a,l){const c=tV(s,a,l);return s.inclusive?c<=0:c<0}(r.startAt,yv(r),o)||r.endAt&&!function(s,a,l){const c=tV(s,a,l);return s.inclusive?c>=0:c>0}(r.endAt,yv(r),o))}(t,e)}function Hle(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bF(t){return(e,n)=>{let r=!1;for(const o of yv(t)){const i=Ule(o,e,n);if(i!==0)return i;r=r||o.field.isKeyField()}return 0}}function Ule(t,e,n){const r=t.field.isKeyField()?xt.comparator(e.key,n.key):function(i,s,a){const l=s.data.field(i),c=a.data.field(i);return l!==null&&c!==null?Jm(l,c):Ot(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ot(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,i]of r)if(this.equalsFn(o,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<o.length;i++)if(this.equalsFn(o[i][0],e))return void(o[i]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){up(this.inner,(n,r)=>{for(const[o,i]of r)e(o,i)})}isEmpty(){return tF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zle=new $r(xt.comparator);function Ou(){return zle}const wF=new $r(xt.comparator);function nv(...t){let e=wF;for(const n of t)e=e.insert(n.key,n);return e}function CF(t){let e=wF;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ch(){return vv()}function SF(){return vv()}function vv(){return new dp(t=>t.toString(),(t,e)=>t.isEqual(e))}const Gle=new $r(xt.comparator),qle=new Io(xt.comparator);function Mn(...t){let e=qle;for(const n of t)e=e.add(n);return e}const Kle=new Io(An);function Wle(){return Kle}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bC(e)?"-0":e}}function _F(t){return{integerValue:""+t}}function Yle(t,e){return Sle(e)?_F(e):tN(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(){this._=void 0}}function Xle(t,e,n){return t instanceof Gv?function(o,i){const s={fields:{[oF]:{stringValue:rF},[sF]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return i&&QM(i)&&(i=X_(i)),i&&(s.fields[iF]=i),{mapValue:s}}(n,e):t instanceof qv?EF(t,e):t instanceof Kv?kF(t,e):function(o,i){const s=xF(o,i),a=iV(s)+iV(o.Ae);return J2(s)&&J2(o.Ae)?_F(a):tN(o.serializer,a)}(t,e)}function Qle(t,e,n){return t instanceof qv?EF(t,e):t instanceof Kv?kF(t,e):n}function xF(t,e){return t instanceof xC?function(r){return J2(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Gv extends J_{}class qv extends J_{constructor(e){super(),this.elements=e}}function EF(t,e){const n=TF(e);for(const r of t.elements)n.some(o=>vc(o,r))||n.push(r);return{arrayValue:{values:n}}}class Kv extends J_{constructor(e){super(),this.elements=e}}function kF(t,e){let n=TF(e);for(const r of t.elements)n=n.filter(o=>!vc(o,r));return{arrayValue:{values:n}}}class xC extends J_{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function iV(t){return io(t.integerValue||t.doubleValue)}function TF(t){return ZM(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zle{constructor(e,n){this.field=e,this.transform=n}}function Jle(t,e){return t.field.isEqual(e.field)&&function(r,o){return r instanceof qv&&o instanceof qv||r instanceof Kv&&o instanceof Kv?Qm(r.elements,o.elements,vc):r instanceof xC&&o instanceof xC?vc(r.Ae,o.Ae):r instanceof Gv&&o instanceof Gv}(t.transform,e.transform)}class ece{constructor(e,n){this.version=e,this.transformResults=n}}class cc{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cc}static exists(e){return new cc(void 0,e)}static updateTime(e){return new cc(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pw(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ex{}function AF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nN(t.key,cc.none()):new Hb(t.key,t.data,cc.none());{const n=t.data,r=Ia.empty();let o=new Io(fi.comparator);for(let i of e.fields)if(!o.has(i)){let s=n.field(i);s===null&&i.length>1&&(i=i.popLast(),s=n.field(i)),s===null?r.delete(i):r.set(i,s),o=o.add(i)}return new fp(t.key,r,new pl(o.toArray()),cc.none())}}function tce(t,e,n){t instanceof Hb?function(o,i,s){const a=o.value.clone(),l=aV(o.fieldTransforms,i,s.transformResults);a.setAll(l),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof fp?function(o,i,s){if(!Pw(o.precondition,i))return void i.convertToUnknownDocument(s.version);const a=aV(o.fieldTransforms,i,s.transformResults),l=i.data;l.setAll(RF(o)),l.setAll(a),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(o,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function bv(t,e,n,r){return t instanceof Hb?function(i,s,a,l){if(!Pw(i.precondition,s))return a;const c=i.value.clone(),d=lV(i.fieldTransforms,l,s);return c.setAll(d),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof fp?function(i,s,a,l){if(!Pw(i.precondition,s))return a;const c=lV(i.fieldTransforms,l,s),d=s.data;return d.setAll(RF(i)),d.setAll(c),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,s,a){return Pw(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function nce(t,e){let n=null;for(const r of t.fieldTransforms){const o=e.data.field(r.field),i=xF(r.transform,o||null);i!=null&&(n===null&&(n=Ia.empty()),n.set(r.field,i))}return n||null}function sV(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Qm(r,o,(i,s)=>Jle(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Hb extends ex{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fp extends ex{constructor(e,n,r,o,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function RF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function aV(t,e,n){const r=new Map;Jn(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let o=0;o<n.length;o++){const i=t[o],s=i.transform,a=e.data.field(i.field);r.set(i.field,Qle(s,a,n[o]))}return r}function lV(t,e,n){const r=new Map;for(const o of t){const i=o.transform,s=n.data.field(o.field);r.set(o.field,Xle(i,s,e))}return r}class nN extends ex{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rce extends ex{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oce{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const i=this.mutations[o];i.key.isEqual(e.key)&&tce(i,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bv(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bv(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=SF();return this.mutations.forEach(o=>{const i=e.get(o.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=n.has(o.key)?null:a;const l=AF(s,a);l!==null&&r.set(o.key,l),s.isValidDocument()||s.convertToNoDocument(Ut.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Mn())}isEqual(e){return this.batchId===e.batchId&&Qm(this.mutations,e.mutations,(n,r)=>sV(n,r))&&Qm(this.baseMutations,e.baseMutations,(n,r)=>sV(n,r))}}class rN{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Jn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=function(){return Gle}();const i=e.mutations;for(let s=0;s<i.length;s++)o=o.insert(i[s].key,r[s].version);return new rN(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ice=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sce{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var po,$n;function ace(t){switch(t){case He.OK:return Ot(64938);case He.CANCELLED:case He.UNKNOWN:case He.DEADLINE_EXCEEDED:case He.RESOURCE_EXHAUSTED:case He.INTERNAL:case He.UNAVAILABLE:case He.UNAUTHENTICATED:return!1;case He.INVALID_ARGUMENT:case He.NOT_FOUND:case He.ALREADY_EXISTS:case He.PERMISSION_DENIED:case He.FAILED_PRECONDITION:case He.ABORTED:case He.OUT_OF_RANGE:case He.UNIMPLEMENTED:case He.DATA_LOSS:return!0;default:return Ot(15467,{code:t})}}function IF(t){if(t===void 0)return Nu("GRPC error has no .code"),He.UNKNOWN;switch(t){case po.OK:return He.OK;case po.CANCELLED:return He.CANCELLED;case po.UNKNOWN:return He.UNKNOWN;case po.DEADLINE_EXCEEDED:return He.DEADLINE_EXCEEDED;case po.RESOURCE_EXHAUSTED:return He.RESOURCE_EXHAUSTED;case po.INTERNAL:return He.INTERNAL;case po.UNAVAILABLE:return He.UNAVAILABLE;case po.UNAUTHENTICATED:return He.UNAUTHENTICATED;case po.INVALID_ARGUMENT:return He.INVALID_ARGUMENT;case po.NOT_FOUND:return He.NOT_FOUND;case po.ALREADY_EXISTS:return He.ALREADY_EXISTS;case po.PERMISSION_DENIED:return He.PERMISSION_DENIED;case po.FAILED_PRECONDITION:return He.FAILED_PRECONDITION;case po.ABORTED:return He.ABORTED;case po.OUT_OF_RANGE:return He.OUT_OF_RANGE;case po.UNIMPLEMENTED:return He.UNIMPLEMENTED;case po.DATA_LOSS:return He.DATA_LOSS;default:return Ot(39323,{code:t})}}($n=po||(po={}))[$n.OK=0]="OK",$n[$n.CANCELLED=1]="CANCELLED",$n[$n.UNKNOWN=2]="UNKNOWN",$n[$n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$n[$n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$n[$n.NOT_FOUND=5]="NOT_FOUND",$n[$n.ALREADY_EXISTS=6]="ALREADY_EXISTS",$n[$n.PERMISSION_DENIED=7]="PERMISSION_DENIED",$n[$n.UNAUTHENTICATED=16]="UNAUTHENTICATED",$n[$n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$n[$n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$n[$n.ABORTED=10]="ABORTED",$n[$n.OUT_OF_RANGE=11]="OUT_OF_RANGE",$n[$n.UNIMPLEMENTED=12]="UNIMPLEMENTED",$n[$n.INTERNAL=13]="INTERNAL",$n[$n.UNAVAILABLE=14]="UNAVAILABLE",$n[$n.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lce(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cce=new Qd([4294967295,4294967295],0);function cV(t){const e=lce().encode(t),n=new z7;return n.update(e),new Uint8Array(n.digest())}function uV(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Qd([n,r],0),new Qd([o,i],0)]}class oN{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new rv(`Invalid padding: ${n}`);if(r<0)throw new rv(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rv(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new rv(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Qd.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(Qd.fromNumber(r)));return o.compare(cce)===1&&(o=new Qd([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=cV(e),[r,o]=uV(n);for(let i=0;i<this.hashCount;i++){const s=this.ye(r,o,i);if(!this.we(s))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new oN(i,o,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;const n=cV(e),[r,o]=uV(n);for(let i=0;i<this.hashCount;i++){const s=this.ye(r,o,i);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class rv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n,r,o,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Ub.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new tx(Ut.min(),o,new $r(An),Ou(),Mn())}}class Ub{constructor(e,n,r,o,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ub(r,n,Mn(),Mn(),Mn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class MF{constructor(e,n){this.targetId=e,this.Ce=n}}class NF{constructor(e,n,r=mi.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class dV{constructor(){this.ve=0,this.Fe=fV(),this.Me=mi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Mn(),n=Mn(),r=Mn();return this.Fe.forEach((o,i)=>{switch(i){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Ot(38017,{changeType:i})}}),new Ub(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=fV()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Jn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uce{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ou(),this.Je=B1(),this.He=B1(),this.Ye=new $r(An)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ot(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,o)=>{this.rt(o)&&n(o)})}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const i=o.target;if(tR(i))if(r===0){const s=new xt(i.path);this.et(n,s,Ni.newNoDocument(s,Ut.min()))}else Jn(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const a=this.ut(e),l=a?this.ct(a,e,s):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:i=0}=n;let s,a;try{s=df(r).toUint8Array()}catch(l){if(l instanceof nF)return Xm("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new oN(s,o,i)}catch(l){return Xm(l instanceof rv?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach(i=>{const s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),o++)}),o}Tt(e){const n=new Map;this.ze.forEach((i,s)=>{const a=this.ot(s);if(a){if(i.current&&tR(a.target)){const l=new xt(a.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,Ni.newNoDocument(l,e))}i.Be&&(n.set(s,i.ke()),i.qe())}});let r=Mn();this.He.forEach((i,s)=>{let a=!0;s.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,s)=>s.setReadTime(e));const o=new tx(e,n,this.Ye,this.je,r);return this.je=Ou(),this.Je=B1(),this.He=B1(),this.Ye=new $r(An),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new dV,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Io(An),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Io(An),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ct("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dV),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function B1(){return new $r(xt.comparator)}function fV(){return new $r(xt.comparator)}const dce={asc:"ASCENDING",desc:"DESCENDING"},fce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hce={and:"AND",or:"OR"};class pce{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function oR(t,e){return t.useProto3Json||Y_(e)?e:{value:e}}function EC(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mce(t,e){return EC(t,e.toTimestamp())}function uc(t){return Jn(!!t,49232),Ut.fromTimestamp(function(n){const r=uf(n);return new ir(r.seconds,r.nanos)}(t))}function iN(t,e){return iR(t,e).canonicalString()}function iR(t,e){const n=function(o){return new Sr(["projects",o.projectId,"databases",o.database])}(t).child("documents");return e===void 0?n:n.child(e)}function PF(t){const e=Sr.fromString(t);return Jn(BF(e),10190,{key:e.toString()}),e}function sR(t,e){return iN(t.databaseId,e.path)}function BT(t,e){const n=PF(e);if(n.get(1)!==t.databaseId.projectId)throw new ut(He.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ut(He.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xt(LF(n))}function DF(t,e){return iN(t.databaseId,e)}function gce(t){const e=PF(t);return e.length===4?Sr.emptyPath():LF(e)}function aR(t){return new Sr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LF(t){return Jn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function hV(t,e,n){return{name:sR(t,e),fields:n.value.mapValue.fields}}function yce(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ot(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(Jn(d===void 0||typeof d=="string",58123),mi.fromBase64String(d||"")):(Jn(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),mi.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const d=c.code===void 0?He.UNKNOWN:IF(c.code);return new ut(d,c.message||"")}(s);n=new NF(r,o,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=BT(t,r.document.name),i=uc(r.document.updateTime),s=r.document.createTime?uc(r.document.createTime):Ut.min(),a=new Ia({mapValue:{fields:r.document.fields}}),l=Ni.newFoundDocument(o,i,s,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Dw(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=BT(t,r.document),i=r.readTime?uc(r.readTime):Ut.min(),s=Ni.newNoDocument(o,i),a=r.removedTargetIds||[];n=new Dw([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=BT(t,r.document),i=r.removedTargetIds||[];n=new Dw([],i,o,null)}else{if(!("filter"in e))return Ot(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:i}=r,s=new sce(o,i),a=r.targetId;n=new MF(a,s)}}return n}function vce(t,e){let n;if(e instanceof Hb)n={update:hV(t,e.key,e.value)};else if(e instanceof nN)n={delete:sR(t,e.key)};else if(e instanceof fp)n={update:hV(t,e.key,e.data),updateMask:Tce(e.fieldMask)};else{if(!(e instanceof rce))return Ot(16599,{Vt:e.type});n={verify:sR(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const a=s.transform;if(a instanceof Gv)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qv)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Kv)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof xC)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw Ot(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(o,i){return i.updateTime!==void 0?{updateTime:mce(o,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ot(27497)}(t,e.precondition)),n}function bce(t,e){return t&&t.length>0?(Jn(e!==void 0,14353),t.map(n=>function(o,i){let s=o.updateTime?uc(o.updateTime):uc(i);return s.isEqual(Ut.min())&&(s=uc(i)),new ece(s,o.transformResults||[])}(n,e))):[]}function wce(t,e){return{documents:[DF(t,e.path)]}}function Cce(t,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=DF(t,o);const i=function(c){if(c.length!==0)return jF(xl.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(c){if(c.length!==0)return c.map(d=>function(p){return{field:fm(p.field),direction:xce(p.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=oR(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:o}}function Sce(t){let e=gce(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Jn(r===1,65062);const d=n.from[0];d.allDescendants?o=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const p=VF(f);return p instanceof xl&&fF(p)?p.getFilters():[p]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(p=>function(y){return new _C(hm(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Y_(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,g=f.values||[];return new SC(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new SC(g,p)}(n.endAt)),$le(e,o,s,i,a,"F",l,c)}function _ce(t,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ot(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function VF(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hm(n.unaryFilter.field);return vo.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=hm(n.unaryFilter.field);return vo.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=hm(n.unaryFilter.field);return vo.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=hm(n.unaryFilter.field);return vo.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ot(61313);default:return Ot(60726)}}(t):t.fieldFilter!==void 0?function(n){return vo.create(hm(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ot(58110);default:return Ot(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xl.create(n.compositeFilter.filters.map(r=>VF(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ot(1026)}}(n.compositeFilter.op))}(t):Ot(30097,{filter:t})}function xce(t){return dce[t]}function Ece(t){return fce[t]}function kce(t){return hce[t]}function fm(t){return{fieldPath:t.canonicalString()}}function hm(t){return fi.fromServerFormat(t.fieldPath)}function jF(t){return t instanceof vo?function(n){if(n.op==="=="){if(eV(n.value))return{unaryFilter:{field:fm(n.field),op:"IS_NAN"}};if(J5(n.value))return{unaryFilter:{field:fm(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(eV(n.value))return{unaryFilter:{field:fm(n.field),op:"IS_NOT_NAN"}};if(J5(n.value))return{unaryFilter:{field:fm(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fm(n.field),op:Ece(n.op),value:n.value}}}(t):t instanceof xl?function(n){const r=n.getFilters().map(o=>jF(o));return r.length===1?r[0]:{compositeFilter:{op:kce(n.op),filters:r}}}(t):Ot(54877,{filter:t})}function Tce(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n,r,o,i=Ut.min(),s=Ut.min(),a=mi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Hd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hd(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ace{constructor(e){this.yt=e}}function Rce(t){const e=Sce({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rR(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ice{constructor(){this.Cn=new Mce}addToCollectionParentIndex(e,n){return this.Cn.add(n),Ue.resolve()}getCollectionParents(e,n){return Ue.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Ue.resolve()}deleteFieldIndex(e,n){return Ue.resolve()}deleteAllFieldIndexes(e){return Ue.resolve()}createTargetIndexes(e,n){return Ue.resolve()}getDocumentsMatchingTarget(e,n){return Ue.resolve(null)}getIndexType(e,n){return Ue.resolve(0)}getFieldIndexes(e,n){return Ue.resolve([])}getNextCollectionGroupToUpdate(e){return Ue.resolve(null)}getMinOffset(e,n){return Ue.resolve(cf.min())}getMinOffsetFromCollectionGroup(e,n){return Ue.resolve(cf.min())}updateCollectionGroup(e,n,r){return Ue.resolve()}updateIndexEntries(e,n){return Ue.resolve()}}class Mce{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Io(Sr.comparator),i=!o.has(r);return this.index[n]=o.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Io(Sr.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$F=41943040;class vs{static withCacheSize(e){return new vs(e,vs.DEFAULT_COLLECTION_PERCENTILE,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vs.DEFAULT_COLLECTION_PERCENTILE=10,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vs.DEFAULT=new vs($F,vs.DEFAULT_COLLECTION_PERCENTILE,vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vs.DISABLED=new vs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tg(0)}static cr(){return new tg(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV="LruGarbageCollector",Nce=1048576;function gV([t,e],[n,r]){const o=An(t,n);return o===0?An(e,r):o}class Oce{constructor(e){this.Ir=e,this.buffer=new Io(gV),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();gV(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Pce{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ct(mV,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ng(n)?ct(mV,"Ignoring IndexedDB error during garbage collection: ",n):await Mg(n)}await this.Vr(3e5)})}}class Dce{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Ue.resolve(W_.ce);const r=new Oce(n);return this.mr.forEachTarget(e,o=>r.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>r.Ar(o))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ct("LruGarbageCollector","Garbage collection skipped; disabled"),Ue.resolve(pV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pV):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,i,s,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),o=this.params.maximumSequenceNumbersToCollect):o=f,s=Date.now(),this.nthSequenceNumber(e,o))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),um()<=Tn.DEBUG&&ct("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${o} in `+(a-s)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),Ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:i,documentsRemoved:f})))}}function Lce(t,e){return new Dce(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vce{constructor(){this.changes=new dp(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ni.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ue.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jce{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bce{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(r!==null&&bv(r.mutation,o,pl.empty(),ir.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Mn()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Mn()){const o=Ch();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(i=>{let s=nv();return i.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Ch();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Mn()))}populateOverlays(e,n,r){const o=[];return r.forEach(i=>{n.has(i)||o.push(i)}),this.documentOverlayCache.getOverlays(e,o).next(i=>{i.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,o){let i=Ou();const s=vv(),a=function(){return vv()}();return n.forEach((l,c)=>{const d=r.get(c.key);o.has(c.key)&&(d===void 0||d.mutation instanceof fp)?i=i.insert(c.key,c):d!==void 0?(s.set(c.key,d.mutation.getFieldMask()),bv(d.mutation,c,d.mutation.getFieldMask(),ir.now())):s.set(c.key,pl.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>s.set(c,d)),n.forEach((c,d)=>a.set(c,new jce(d,s.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=vv();let o=new $r((s,a)=>s-a),i=Mn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||pl.empty();d=a.applyToLocalView(c,d),r.set(l,d);const f=(o.get(a.batchId)||Mn()).add(l);o=o.insert(a.batchId,f)})}).next(()=>{const s=[],a=o.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=SF();d.forEach(p=>{if(!i.has(p)){const g=AF(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Ue.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,o){return function(s){return xt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(i=>{const s=o-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-i.size):Ue.resolve(Ch());let a=Fv,l=i;return s.next(c=>Ue.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?Ue.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{l=l.insert(d,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Mn())).next(d=>({batchId:a,changes:CF(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new xt(n)).next(r=>{let o=nv();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const i=n.collectionGroup;let s=nv();return this.indexManager.getCollectionParents(e,i).next(a=>Ue.forEach(a,l=>{const c=function(f,p){return new Fb(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,o).next(d=>{d.forEach((f,p)=>{s=s.insert(f,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,o){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,o))).next(s=>{i.forEach((l,c)=>{const d=c.getKey();s.get(d)===null&&(s=s.insert(d,Ni.newInvalidDocument(d)))});let a=nv();return s.forEach((l,c)=>{const d=i.get(l);d!==void 0&&bv(d.mutation,c,pl.empty(),ir.now()),Z_(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ce{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Ue.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:uc(o.createTime)}}(n)),Ue.resolve()}getNamedQuery(e,n){return Ue.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(o){return{name:o.name,query:Rce(o.bundledQuery),readTime:uc(o.readTime)}}(n)),Ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fce{constructor(){this.overlays=new $r(xt.comparator),this.qr=new Map}getOverlay(e,n){return Ue.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ch();return Ue.forEach(n,o=>this.getOverlay(e,o).next(i=>{i!==null&&r.set(o,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,i)=>{this.St(e,n,i)}),Ue.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),Ue.resolve()}getOverlaysForCollection(e,n,r){const o=Ch(),i=n.length+1,s=new xt(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&o.set(l.getKey(),l)}return Ue.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let i=new $r((c,d)=>c-d);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Ch(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Ch(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=o)););return Ue.resolve(a)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const s=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ice(n,r));let i=this.qr.get(n);i===void 0&&(i=Mn(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hce{constructor(){this.sessionToken=mi.EMPTY_BYTE_STRING}getSessionToken(e){return Ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.Qr=new Io(Fo.$r),this.Ur=new Io(Fo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Fo(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Fo(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new xt(new Sr([])),r=new Fo(n,e),o=new Fo(n,e+1),i=[];return this.Ur.forEachInRange([r,o],s=>{this.Gr(s),i.push(s.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new xt(new Sr([])),r=new Fo(n,e),o=new Fo(n,e+1);let i=Mn();return this.Ur.forEachInRange([r,o],s=>{i=i.add(s.key)}),i}containsKey(e){const n=new Fo(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Fo{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return xt.comparator(e.key,n.key)||An(e.Yr,n.Yr)}static Kr(e,n){return An(e.Yr,n.Yr)||xt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uce{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Io(Fo.$r)}checkEmpty(e){return Ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new oce(i,n,r,o);this.mutationQueue.push(s);for(const a of o)this.Zr=this.Zr.add(new Fo(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ue.resolve(s)}lookupMutationBatch(e,n){return Ue.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),i=o<0?0:o;return Ue.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ue.resolve(this.mutationQueue.length===0?XM:this.tr-1)}getAllMutationBatches(e){return Ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Fo(n,0),o=new Fo(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,o],s=>{const a=this.Xr(s.Yr);i.push(a)}),Ue.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Io(An);return n.forEach(o=>{const i=new Fo(o,0),s=new Fo(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,s],a=>{r=r.add(a.Yr)})}),Ue.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let i=r;xt.isDocumentKey(i)||(i=i.child(""));const s=new Fo(new xt(i),0);let a=new Io(An);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===o&&(a=a.add(l.Yr)),!0)},s),Ue.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const o=this.Xr(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Jn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Ue.forEach(n.mutations,o=>{const i=new Fo(o.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Fo(n,0),o=this.Zr.firstAfterOrEqual(r);return Ue.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ue.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zce{constructor(e){this.ri=e,this.docs=function(){return new $r(xt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),i=o?o.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ue.resolve(r?r.document.mutableCopy():Ni.newInvalidDocument(n))}getEntries(e,n){let r=Ou();return n.forEach(o=>{const i=this.docs.get(o);r=r.insert(o,i?i.document.mutableCopy():Ni.newInvalidDocument(o))}),Ue.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let i=Ou();const s=n.path,a=new xt(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||vle(yle(d),r)<=0||(o.has(d.key)||Z_(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return Ue.resolve(i)}getAllFromCollectionGroup(e,n,r,o){Ot(9500)}ii(e,n){return Ue.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Gce(this)}getSize(e){return Ue.resolve(this.size)}}class Gce extends Vce{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)}),Ue.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qce{constructor(e){this.persistence=e,this.si=new dp(n=>JM(n),eN),this.lastRemoteSnapshotVersion=Ut.min(),this.highestTargetId=0,this.oi=0,this._i=new sN,this.targetCount=0,this.ai=tg.ur()}forEachTarget(e,n){return this.si.forEach((r,o)=>n(o)),Ue.resolve()}getLastRemoteSnapshotVersion(e){return Ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Ue.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new tg(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Ue.resolve()}updateTargetData(e,n){return this.Pr(n),Ue.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Ue.resolve()}removeTargets(e,n,r){let o=0;const i=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),o++)}),Ue.waitFor(i).next(()=>o)}getTargetCount(e){return Ue.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Ue.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Ue.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,i=[];return o&&n.forEach(s=>{i.push(o.markPotentiallyOrphaned(e,s))}),Ue.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Ue.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Ue.resolve(r)}containsKey(e,n){return Ue.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e,n){this.ui={},this.overlays={},this.ci=new W_(0),this.li=!1,this.li=!0,this.hi=new Hce,this.referenceDelegate=e(this),this.Pi=new qce(this),this.indexManager=new Ice,this.remoteDocumentCache=function(o){return new zce(o)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Ace(n),this.Ii=new $ce(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Fce,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Uce(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ct("MemoryPersistence","Starting transaction:",e);const o=new Kce(this.ci.next());return this.referenceDelegate.Ei(),r(o).next(i=>this.referenceDelegate.di(o).next(()=>i)).toPromise().then(i=>(o.raiseOnCommittedEvent(),i))}Ai(e,n){return Ue.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Kce extends wle{constructor(e){super(),this.currentSequenceNumber=e}}class aN{constructor(e){this.persistence=e,this.Ri=new sN,this.Vi=null}static mi(e){return new aN(e)}get fi(){if(this.Vi)return this.Vi;throw Ot(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Ue.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Ue.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Ue.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ue.forEach(this.fi,r=>{const o=xt.fromPath(r);return this.gi(e,o).next(i=>{i||n.removeEntry(o,Ut.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Ue.or([()=>Ue.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class kC{constructor(e,n){this.persistence=e,this.pi=new dp(r=>_le(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=Lce(this,n)}static mi(e,n){return new kC(e,n)}Ei(){}di(e){return Ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(o=>r+o))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return Ue.forEach(this.pi,(r,o)=>this.br(e,r,o).next(i=>i?Ue.resolve():n(o)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),i=o.newChangeBuffer();return o.ii(e,s=>this.br(e,s,n).next(a=>{a||(r++,i.removeEntry(s,Ut.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Ue.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Ue.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Ue.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Ue.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Nw(e.data.value)),n}br(e,n,r){return Ue.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return Ue.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=Mn(),o=Mn();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:o=o.add(i.doc.key)}return new lN(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wce{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yce{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Fse()?8:Cle(ji())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const i={result:null};return this.ys(e,n).next(s=>{i.result=s}).next(()=>{if(!i.result)return this.ws(e,n,o,r).next(s=>{i.result=s})}).next(()=>{if(i.result)return;const s=new Wce;return this.Ss(e,n,s).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,s,a.size)})}).next(()=>i.result)}bs(e,n,r,o){return r.documentReadCount<this.fs?(um()<=Tn.DEBUG&&ct("QueryEngine","SDK will not create cache indexes for query:",dm(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ue.resolve()):(um()<=Tn.DEBUG&&ct("QueryEngine","Query:",dm(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(um()<=Tn.DEBUG&&ct("QueryEngine","The SDK decides to create cache indexes for query:",dm(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lc(n))):Ue.resolve())}ys(e,n){if(oV(n))return Ue.resolve(null);let r=lc(n);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=rR(n,null,"F"),r=lc(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const s=Mn(...i);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,s,l.readTime)?this.ys(e,rR(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,o){return oV(n)||o.isEqual(Ut.min())?Ue.resolve(null):this.ps.getDocuments(e,r).next(i=>{const s=this.Ds(n,i);return this.Cs(n,s,r,o)?Ue.resolve(null):(um()<=Tn.DEBUG&&ct("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),dm(n)),this.vs(e,s,n,gle(o,Fv)).next(a=>a))})}Ds(e,n){let r=new Io(bF(e));return n.forEach((o,i)=>{Z_(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(o)>0)}Ss(e,n,r){return um()<=Tn.DEBUG&&ct("QueryEngine","Using full collection scan to execute query:",dm(n)),this.ps.getDocumentsMatchingQuery(e,n,cf.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next(i=>(n.forEach(s=>{i=i.insert(s.key,s)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="LocalStore",Xce=3e8;class Qce{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new $r(An),this.xs=new dp(i=>JM(i),eN),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bce(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Zce(t,e,n,r){return new Qce(t,e,n,r)}async function HF(t,e){const n=Kt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(i=>(o=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const s=[],a=[];let l=Mn();for(const c of o){s.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:s,addedBatchIds:a}))})})}function Jce(t,e){const n=Kt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const f=c.batch,p=f.keys();let g=Ue.resolve();return p.forEach(y=>{g=g.next(()=>d.getEntry(l,y)).next(b=>{const _=c.docVersions.get(y);Jn(_!==null,48541),b.version.compareTo(_)<0&&(f.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),d.addEntry(b)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Mn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,o))})}function UF(t){const e=Kt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function eue(t,e){const n=Kt(t),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const a=[];e.targetChanges.forEach((d,f)=>{const p=o.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,d.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(mi.EMPTY_BYTE_STRING,Ut.min()).withLastLimboFreeSnapshotVersion(Ut.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),o=o.insert(f,g),function(b,_,k){return b.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=Xce?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(p,g,d)&&a.push(n.Pi.updateTargetData(i,g))});let l=Ou(),c=Mn();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(tue(i,s,e.documentUpdates).next(d=>{l=d.ks,c=d.qs})),!r.isEqual(Ut.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return Ue.waitFor(a).next(()=>s.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.Ms=o,i))}function tue(t,e,n){let r=Mn(),o=Mn();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let s=Ou();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(o=o.add(a)),l.isNoDocument()&&l.version.isEqual(Ut.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):ct(cN,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:s,qs:o}})}function nue(t,e){const n=Kt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=XM),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rue(t,e){const n=Kt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.Pi.getTargetData(r,e).next(i=>i?(o=i,Ue.resolve(o)):n.Pi.allocateTargetId(r).next(s=>(o=new Hd(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function lR(t,e,n){const r=Kt(t),o=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,s=>r.persistence.referenceDelegate.removeTarget(s,o))}catch(s){if(!Ng(s))throw s;ct(cN,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function yV(t,e,n){const r=Kt(t);let o=Ut.min(),i=Mn();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,d){const f=Kt(l),p=f.xs.get(d);return p!==void 0?Ue.resolve(f.Ms.get(p)):f.Pi.getTargetData(c,d)}(r,s,lc(e)).next(a=>{if(a)return o=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?o:Ut.min(),n?i:Mn())).next(a=>(oue(r,Hle(e),a),{documents:a,Qs:i})))}function oue(t,e,n){let r=t.Os.get(e)||Ut.min();n.forEach((o,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class vV{constructor(){this.activeTargetIds=Wle()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iue{constructor(){this.Mo=new vV,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vV,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sue{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV="ConnectivityMonitor";class wV{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ct(bV,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ct(bV,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $1=null;function cR(){return $1===null?$1=function(){return 268435456+Math.round(2147483648*Math.random())}():$1++,"0x"+$1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="RestConnection",aue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lue{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===wC?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,i){const s=cR(),a=this.zo(e,n.toUriEncodedString());ct($T,`Sending RPC '${e}' ${s}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,o,i);const{host:c}=new URL(a),d=Ag(c);return this.Jo(e,a,l,r,d).then(f=>(ct($T,`Received RPC '${e}' ${s}: `,f),f),f=>{throw Xm($T,`RPC '${e}' ${s} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,o,i,s){return this.Go(e,n,r,o,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ig}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,i)=>e[i]=o),r&&r.headers.forEach((o,i)=>e[i]=o)}zo(e,n){const r=aue[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cue{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="WebChannelConnection";class uue extends lue{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,i){const s=cR();return new Promise((a,l)=>{const c=new G7;c.setWithCredentials(!0),c.listenOnce(q7.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Mw.NO_ERROR:const f=c.getResponseJson();ct(xi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case Mw.TIMEOUT:ct(xi,`RPC '${e}' ${s} timed out`),l(new ut(He.DEADLINE_EXCEEDED,"Request time out"));break;case Mw.HTTP_ERROR:const p=c.getStatus();if(ct(xi,`RPC '${e}' ${s} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g?.error;if(y&&y.status&&y.message){const b=function(k){const M=k.toLowerCase().replace(/_/g,"-");return Object.values(He).indexOf(M)>=0?M:He.UNKNOWN}(y.status);l(new ut(b,y.message))}else l(new ut(He.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ut(He.UNAVAILABLE,"Connection failed."));break;default:Ot(9055,{l_:e,streamId:s,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{ct(xi,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(o);ct(xi,`RPC '${e}' ${s} sending request:`,o),c.send(n,"POST",d,r,15)})}T_(e,n,r){const o=cR(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Y7(),a=W7(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");ct(xi,`Creating RPC '${e}' stream ${o}: ${d}`,l);const f=s.createWebChannel(d,l);this.I_(f);let p=!1,g=!1;const y=new cue({Yo:_=>{g?ct(xi,`Not sending because RPC '${e}' stream ${o} is closed:`,_):(p||(ct(xi,`Opening RPC '${e}' stream ${o} transport.`),f.open(),p=!0),ct(xi,`RPC '${e}' stream ${o} sending:`,_),f.send(_))},Zo:()=>f.close()}),b=(_,k,M)=>{_.listen(k,N=>{try{M(N)}catch(j){setTimeout(()=>{throw j},0)}})};return b(f,tv.EventType.OPEN,()=>{g||(ct(xi,`RPC '${e}' stream ${o} transport opened.`),y.o_())}),b(f,tv.EventType.CLOSE,()=>{g||(g=!0,ct(xi,`RPC '${e}' stream ${o} transport closed`),y.a_(),this.E_(f))}),b(f,tv.EventType.ERROR,_=>{g||(g=!0,Xm(xi,`RPC '${e}' stream ${o} transport errored. Name:`,_.name,"Message:",_.message),y.a_(new ut(He.UNAVAILABLE,"The operation could not be completed")))}),b(f,tv.EventType.MESSAGE,_=>{if(!g){const k=_.data[0];Jn(!!k,16349);const M=k,N=M?.error||M[0]?.error;if(N){ct(xi,`RPC '${e}' stream ${o} received error:`,N);const j=N.status;let B=function(R){const I=po[R];if(I!==void 0)return IF(I)}(j),F=N.message;B===void 0&&(B=He.INTERNAL,F="Unknown error status: "+j+" with message "+N.message),g=!0,y.a_(new ut(B,F)),f.close()}else ct(xi,`RPC '${e}' stream ${o} received:`,k),y.u_(k)}}),b(a,K7.STAT_EVENT,_=>{_.stat===X2.PROXY?ct(xi,`RPC '${e}' stream ${o} detected buffering proxy`):_.stat===X2.NOPROXY&&ct(xi,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{y.__()},0),y}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function FT(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t){return new pce(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{constructor(e,n,r=1e3,o=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&ct("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV="PersistentStream";class GF{constructor(e,n,r,o,i,s,a,l){this.Mi=e,this.S_=r,this.b_=o,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new zF(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===He.RESOURCE_EXHAUSTED?(Nu(n.toString()),Nu("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===He.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.D_===n&&this.G_(r,o)},r=>{e(()=>{const o=new ut(He.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{r(()=>this.z_(o))}),this.stream.onMessage(o=>{r(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ct(CV,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ct(CV,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class due extends GF{constructor(e,n,r,o,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,s),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=yce(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ut.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Ut.min():s.readTime?uc(s.readTime):Ut.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=aR(this.serializer),n.addTarget=function(i,s){let a;const l=s.target;if(a=tR(l)?{documents:wce(i,l)}:{query:Cce(i,l).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=OF(i,s.resumeToken);const c=oR(i,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(Ut.min())>0){a.readTime=EC(i,s.snapshotVersion.toTimestamp());const c=oR(i,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=_ce(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=aR(this.serializer),n.removeTarget=e,this.q_(n)}}class fue extends GF{constructor(e,n,r,o,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Jn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Jn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Jn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=bce(e.writeResults,e.commitTime),r=uc(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=aR(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>vce(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hue{}class pue extends hue{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ut(He.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Go(e,iR(n,r),o,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===He.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ut(He.UNKNOWN,i.toString())})}Ho(e,n,r,o,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,iR(n,r),o,s,a,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===He.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ut(He.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class mue{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Nu(n),this.aa=!1):ct("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="RemoteStore";class gue{constructor(e,n,r,o,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{hp(this)&&(ct(Gh,"Restarting streams for network reachability change."),await async function(l){const c=Kt(l);c.Ea.add(4),await zb(c),c.Ra.set("Unknown"),c.Ea.delete(4),await rx(c)}(this))})}),this.Ra=new mue(r,o)}}async function rx(t){if(hp(t))for(const e of t.da)await e(!0)}async function zb(t){for(const e of t.da)await e(!1)}function qF(t,e){const n=Kt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),hN(n)?fN(n):Og(n).O_()&&dN(n,e))}function uN(t,e){const n=Kt(t),r=Og(n);n.Ia.delete(e),r.O_()&&KF(n,e),n.Ia.size===0&&(r.O_()?r.L_():hp(n)&&n.Ra.set("Unknown"))}function dN(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ut.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Og(t).Y_(e)}function KF(t,e){t.Va.Ue(e),Og(t).Z_(e)}function fN(t){t.Va=new uce({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Og(t).start(),t.Ra.ua()}function hN(t){return hp(t)&&!Og(t).x_()&&t.Ia.size>0}function hp(t){return Kt(t).Ea.size===0}function WF(t){t.Va=void 0}async function yue(t){t.Ra.set("Online")}async function vue(t){t.Ia.forEach((e,n)=>{dN(t,e)})}async function bue(t,e){WF(t),hN(t)?(t.Ra.ha(e),fN(t)):t.Ra.set("Unknown")}async function wue(t,e,n){if(t.Ra.set("Online"),e instanceof NF&&e.state===2&&e.cause)try{await async function(o,i){const s=i.cause;for(const a of i.targetIds)o.Ia.has(a)&&(await o.remoteSyncer.rejectListen(a,s),o.Ia.delete(a),o.Va.removeTarget(a))}(t,e)}catch(r){ct(Gh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await TC(t,r)}else if(e instanceof Dw?t.Va.Ze(e):e instanceof MF?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ut.min()))try{const r=await UF(t.localStore);n.compareTo(r)>=0&&await function(i,s){const a=i.Va.Tt(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.Ia.get(c);d&&i.Ia.set(c,d.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{const d=i.Ia.get(l);if(!d)return;i.Ia.set(l,d.withResumeToken(mi.EMPTY_BYTE_STRING,d.snapshotVersion)),KF(i,l);const f=new Hd(d.target,l,c,d.sequenceNumber);dN(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ct(Gh,"Failed to raise snapshot:",r),await TC(t,r)}}async function TC(t,e,n){if(!Ng(e))throw e;t.Ea.add(1),await zb(t),t.Ra.set("Offline"),n||(n=()=>UF(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ct(Gh,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await rx(t)})}function YF(t,e){return e().catch(n=>TC(t,n,e))}async function ox(t){const e=Kt(t),n=hf(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:XM;for(;Cue(e);)try{const o=await nue(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,Sue(e,o)}catch(o){await TC(e,o)}XF(e)&&QF(e)}function Cue(t){return hp(t)&&t.Ta.length<10}function Sue(t,e){t.Ta.push(e);const n=hf(t);n.O_()&&n.X_&&n.ea(e.mutations)}function XF(t){return hp(t)&&!hf(t).x_()&&t.Ta.length>0}function QF(t){hf(t).start()}async function _ue(t){hf(t).ra()}async function xue(t){const e=hf(t);for(const n of t.Ta)e.ea(n.mutations)}async function Eue(t,e,n){const r=t.Ta.shift(),o=rN.from(r,e,n);await YF(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await ox(t)}async function kue(t,e){e&&hf(t).X_&&await async function(r,o){if(function(s){return ace(s)&&s!==He.ABORTED}(o.code)){const i=r.Ta.shift();hf(r).B_(),await YF(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,o)),await ox(r)}}(t,e),XF(t)&&QF(t)}async function SV(t,e){const n=Kt(t);n.asyncQueue.verifyOperationInProgress(),ct(Gh,"RemoteStore received new credentials");const r=hp(n);n.Ea.add(3),await zb(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await rx(n)}async function Tue(t,e){const n=Kt(t);e?(n.Ea.delete(2),await rx(n)):e||(n.Ea.add(2),await zb(n),n.Ra.set("Unknown"))}function Og(t){return t.ma||(t.ma=function(n,r,o){const i=Kt(n);return i.sa(),new due(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,o)}(t.datastore,t.asyncQueue,{Xo:yue.bind(null,t),t_:vue.bind(null,t),r_:bue.bind(null,t),H_:wue.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),hN(t)?fN(t):t.Ra.set("Unknown")):(await t.ma.stop(),WF(t))})),t.ma}function hf(t){return t.fa||(t.fa=function(n,r,o){const i=Kt(n);return i.sa(),new fue(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,o)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_ue.bind(null,t),r_:kue.bind(null,t),ta:xue.bind(null,t),na:Eue.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ox(t)):(await t.fa.stop(),t.Ta.length>0&&(ct(Gh,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n,r,o,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=i,this.deferred=new Zd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,i){const s=Date.now()+r,a=new pN(e,n,s,o,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ut(He.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mN(t,e){if(Nu("AsyncQueue",`${e}: ${t}`),Ng(t))return new ut(He.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{static emptySet(e){return new Im(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||xt.comparator(n.key,r.key):(n,r)=>xt.comparator(n.key,r.key),this.keyedMap=nv(),this.sortedSet=new $r(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Im)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,i=r.getNext().key;if(!o.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Im;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this.ga=new $r(xt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ot(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ng{constructor(e,n,r,o,i,s,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,o,i){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new ng(e,n,Im.emptySet(n),s,r,o,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Q_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aue{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Rue{constructor(){this.queries=xV(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Kt(n),i=o.queries;o.queries=xV(),i.forEach((s,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new ut(He.ABORTED,"Firestore shutting down"))}}function xV(){return new dp(t=>vF(t),Q_)}async function Iue(t,e){const n=Kt(t);let r=3;const o=e.query;let i=n.queries.get(o);i?!i.ba()&&e.Da()&&(r=2):(i=new Aue,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(o,!0);break;case 1:i.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(s){const a=mN(s,`Initialization of query '${dm(e.query)}' failed`);return void e.onError(a)}n.queries.set(o,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&gN(n)}async function Mue(t,e){const n=Kt(t),r=e.query;let o=3;const i=n.queries.get(r);if(i){const s=i.Sa.indexOf(e);s>=0&&(i.Sa.splice(s,1),i.Sa.length===0?o=e.Da()?0:1:!i.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Nue(t,e){const n=Kt(t);let r=!1;for(const o of e){const i=o.query,s=n.queries.get(i);if(s){for(const a of s.Sa)a.Fa(o)&&(r=!0);s.wa=o}}r&&gN(n)}function Oue(t,e,n){const r=Kt(t),o=r.queries.get(e);if(o)for(const i of o.Sa)i.onError(n);r.queries.delete(e)}function gN(t){t.Ca.forEach(e=>{e.next()})}var uR,EV;(EV=uR||(uR={})).Ma="default",EV.Cache="cache";class Pue{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new ng(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ng.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==uR.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e){this.key=e}}class JF{constructor(e){this.key=e}}class Due{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Mn(),this.mutatedKeys=Mn(),this.eu=bF(e),this.tu=new Im(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new _V,o=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,s=o,a=!1;const l=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,c=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((d,f)=>{const p=o.get(d),g=Z_(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;p&&g?p.data.isEqual(g.data)?y!==b&&(r.track({type:3,doc:g}),_=!0):this.su(p,g)||(r.track({type:2,doc:g}),_=!0,(l&&this.eu(g,l)>0||c&&this.eu(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),_=!0):p&&!g&&(r.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(g?(s=s.add(g),i=b?i.add(d):i.delete(d)):(s=s.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:s,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((d,f)=>function(g,y){const b=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ot(20277,{Rt:_})}};return b(g)-b(y)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(r),o=o??!1;const a=n&&!o?this._u():[],l=this.Xa.size===0&&this.current&&!o?1:0,c=l!==this.Za;return this.Za=l,s.length!==0||c?{snapshot:new ng(this.query,e.tu,i,s,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new _V,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Mn(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new JF(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new ZF(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Mn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ng.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const yN="SyncEngine";class Lue{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Vue{constructor(e){this.key=e,this.hu=!1}}class jue{constructor(e,n,r,o,i,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new dp(a=>vF(a),Q_),this.Iu=new Map,this.Eu=new Set,this.du=new $r(xt.comparator),this.Au=new Map,this.Ru=new sN,this.Vu={},this.mu=new Map,this.fu=tg.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Bue(t,e,n=!0){const r=iH(t);let o;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),o=i.view.lu()):o=await eH(r,e,n,!0),o}async function $ue(t,e){const n=iH(t);await eH(n,e,!0,!1)}async function eH(t,e,n,r){const o=await rue(t.localStore,lc(e)),i=o.targetId,s=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await Fue(t,e,i,s==="current",o.resumeToken)),t.isPrimaryClient&&n&&qF(t.remoteStore,o),a}async function Fue(t,e,n,r,o){t.pu=(f,p,g)=>async function(b,_,k,M){let N=_.view.ru(k);N.Cs&&(N=await yV(b.localStore,_.query,!1).then(({documents:D})=>_.view.ru(D,N)));const j=M&&M.targetChanges.get(_.targetId),B=M&&M.targetMismatches.get(_.targetId)!=null,F=_.view.applyChanges(N,b.isPrimaryClient,j,B);return TV(b,_.targetId,F.au),F.snapshot}(t,f,p,g);const i=await yV(t.localStore,e,!0),s=new Due(e,i.Qs),a=s.ru(i.documents),l=Ub.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",o),c=s.applyChanges(a,t.isPrimaryClient,l);TV(t,n,c.au);const d=new Lue(e,n,s);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function Hue(t,e,n){const r=Kt(t),o=r.Tu.get(e),i=r.Iu.get(o.targetId);if(i.length>1)return r.Iu.set(o.targetId,i.filter(s=>!Q_(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await lR(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&uN(r.remoteStore,o.targetId),dR(r,o.targetId)}).catch(Mg)):(dR(r,o.targetId),await lR(r.localStore,o.targetId,!0))}async function Uue(t,e){const n=Kt(t),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uN(n.remoteStore,r.targetId))}async function zue(t,e,n){const r=Que(t);try{const o=await function(s,a){const l=Kt(s),c=ir.now(),d=a.reduce((g,y)=>g.add(y.key),Mn());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=Ou(),b=Mn();return l.Ns.getEntries(g,d).next(_=>{y=_,y.forEach((k,M)=>{M.isValidDocument()||(b=b.add(k))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(_=>{f=_;const k=[];for(const M of a){const N=nce(M,f.get(M.key).overlayedDocument);N!=null&&k.push(new fp(M.key,N,cF(N.value.mapValue),cc.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,k,a)}).next(_=>{p=_;const k=_.applyToLocalDocumentSet(f,b);return l.documentOverlayCache.saveOverlays(g,_.batchId,k)})}).then(()=>({batchId:p.batchId,changes:CF(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(s,a,l){let c=s.Vu[s.currentUser.toKey()];c||(c=new $r(An)),c=c.insert(a,l),s.Vu[s.currentUser.toKey()]=c}(r,o.batchId,n),await Gb(r,o.changes),await ox(r.remoteStore)}catch(o){const i=mN(o,"Failed to persist write");n.reject(i)}}async function tH(t,e){const n=Kt(t);try{const r=await eue(n.localStore,e);e.targetChanges.forEach((o,i)=>{const s=n.Au.get(i);s&&(Jn(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?s.hu=!0:o.modifiedDocuments.size>0?Jn(s.hu,14607):o.removedDocuments.size>0&&(Jn(s.hu,42227),s.hu=!1))}),await Gb(n,r,e)}catch(r){await Mg(r)}}function kV(t,e,n){const r=Kt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach((i,s)=>{const a=s.view.va(e);a.snapshot&&o.push(a.snapshot)}),function(s,a){const l=Kt(s);l.onlineState=a;let c=!1;l.queries.forEach((d,f)=>{for(const p of f.Sa)p.va(a)&&(c=!0)}),c&&gN(l)}(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Gue(t,e,n){const r=Kt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),i=o&&o.key;if(i){let s=new $r(xt.comparator);s=s.insert(i,Ni.newNoDocument(i,Ut.min()));const a=Mn().add(i),l=new tx(Ut.min(),new Map,new $r(An),s,a);await tH(r,l),r.du=r.du.remove(i),r.Au.delete(e),vN(r)}else await lR(r.localStore,e,!1).then(()=>dR(r,e,n)).catch(Mg)}async function que(t,e){const n=Kt(t),r=e.batch.batchId;try{const o=await Jce(n.localStore,e);rH(n,r,null),nH(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gb(n,o)}catch(o){await Mg(o)}}async function Kue(t,e,n){const r=Kt(t);try{const o=await function(s,a){const l=Kt(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Jn(f!==null,37113),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);rH(r,e,n),nH(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gb(r,o)}catch(o){await Mg(o)}}function nH(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function rH(t,e,n){const r=Kt(t);let o=r.Vu[r.currentUser.toKey()];if(o){const i=o.get(e);i&&(n?i.reject(n):i.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function dR(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||oH(t,r)})}function oH(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(uN(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),vN(t))}function TV(t,e,n){for(const r of n)r instanceof ZF?(t.Ru.addReference(r.key,e),Wue(t,r)):r instanceof JF?(ct(yN,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||oH(t,r.key)):Ot(19791,{wu:r})}function Wue(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ct(yN,"New document in limbo: "+n),t.Eu.add(r),vN(t))}function vN(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new xt(Sr.fromString(e)),r=t.fu.next();t.Au.set(r,new Vue(n)),t.du=t.du.insert(n,r),qF(t.remoteStore,new Hd(lc(gF(n.path)),r,"TargetPurposeLimboResolution",W_.ce))}}async function Gb(t,e,n){const r=Kt(t),o=[],i=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{s.push(r.pu(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){o.push(c);const d=lN.As(l.targetId,c);i.push(d)}}))}),await Promise.all(s),r.Pu.H_(o),await async function(l,c){const d=Kt(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ue.forEach(c,p=>Ue.forEach(p.Es,g=>d.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>Ue.forEach(p.ds,g=>d.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Ng(f))throw f;ct(cN,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=d.Ms.get(p),y=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(y);d.Ms=d.Ms.insert(p,b)}}}(r.localStore,i))}async function Yue(t,e){const n=Kt(t);if(!n.currentUser.isEqual(e)){ct(yN,"User change. New user:",e.toKey());const r=await HF(n.localStore,e);n.currentUser=e,function(i,s){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new ut(He.CANCELLED,s))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gb(n,r.Ls)}}function Xue(t,e){const n=Kt(t),r=n.Au.get(e);if(r&&r.hu)return Mn().add(r.key);{let o=Mn();const i=n.Iu.get(e);if(!i)return o;for(const s of i){const a=n.Tu.get(s);o=o.unionWith(a.view.nu)}return o}}function iH(t){const e=Kt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xue.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gue.bind(null,e),e.Pu.H_=Nue.bind(null,e.eventManager),e.Pu.yu=Oue.bind(null,e.eventManager),e}function Que(t){const e=Kt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=que.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kue.bind(null,e),e}class AC{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nx(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Zce(this.persistence,new Yce,e.initialUser,this.serializer)}Cu(e){return new FF(aN.mi,this.serializer)}Du(e){return new iue}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}AC.provider={build:()=>new AC};class Zue extends AC{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Jn(this.persistence.referenceDelegate instanceof kC,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Pce(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?vs.withCacheSize(this.cacheSizeBytes):vs.DEFAULT;return new FF(r=>kC.mi(r,n),this.serializer)}}class fR{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>kV(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Yue.bind(null,this.syncEngine),await Tue(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Rue}()}createDatastore(e){const n=nx(e.databaseInfo.databaseId),r=function(i){return new uue(i)}(e.databaseInfo);return function(i,s,a,l){return new pue(i,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,o,i,s,a){return new gue(r,o,i,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>kV(this.syncEngine,n,0),function(){return wV.v()?new wV:new sue}())}createSyncEngine(e,n){return function(o,i,s,a,l,c,d){const f=new jue(o,i,s,a,l,c);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const r=Kt(n);ct(Gh,"RemoteStore shutting down."),r.Ea.add(5),await zb(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}fR.provider={build:()=>new fR};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jue{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Nu("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="FirestoreClient";class ede{constructor(e,n,r,o,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=Ii.UNAUTHENTICATED,this.clientId=YM.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async s=>{ct(pf,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ct(pf,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=mN(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function HT(t,e){t.asyncQueue.verifyOperationInProgress(),ct(pf,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async o=>{r.isEqual(o)||(await HF(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function AV(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tde(t);ct(pf,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>SV(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,o)=>SV(e.remoteStore,o)),t._onlineComponents=e}async function tde(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ct(pf,"Using user provided OfflineComponentProvider");try{await HT(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===He.FAILED_PRECONDITION||o.code===He.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Xm("Error using user provided cache. Falling back to memory cache: "+n),await HT(t,new AC)}}else ct(pf,"Using default OfflineComponentProvider"),await HT(t,new Zue(void 0));return t._offlineComponents}async function sH(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ct(pf,"Using user provided OnlineComponentProvider"),await AV(t,t._uninitializedComponentsProvider._online)):(ct(pf,"Using default OnlineComponentProvider"),await AV(t,new fR))),t._onlineComponents}function nde(t){return sH(t).then(e=>e.syncEngine)}async function rde(t){const e=await sH(t),n=e.eventManager;return n.onListen=Bue.bind(null,e.syncEngine),n.onUnlisten=Hue.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$ue.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Uue.bind(null,e.syncEngine),n}function ode(t,e,n={}){const r=new Zd;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,a,l,c){const d=new Jue({next:p=>{d.Nu(),s.enqueueAndForget(()=>Mue(i,f)),p.fromCache&&l.source==="server"?c.reject(new ut(He.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new Pue(a,d,{includeMetadataChanges:!0,qa:!0});return Iue(i,f)}(await rde(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aH(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lH="firestore.googleapis.com",IV=!0;class MV{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ut(He.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lH,this.ssl=IV}else this.host=e.host,this.ssl=e.ssl??IV;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$F;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Nce)throw new ut(He.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mle("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aH(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ut(He.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ut(He.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ut(He.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ix{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new MV({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ut(He.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ut(He.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new MV(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ile;switch(r.type){case"firstParty":return new cle(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ut(He.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=RV.get(n);r&&(ct("ComponentProvider","Removing Datastore"),RV.delete(n),r.terminate())}(this),Promise.resolve()}}function ide(t,e,n,r={}){t=Zm(t,ix);const o=Ag(e),i=t._getSettings(),s={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;o&&(V7(`https://${a}`),j7("Firestore",!0)),i.host!==lH&&i.host!==a&&Xm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:o,emulatorOptions:r};if(!Hh(l,s)&&(t._setSettings(l),r.mockUserToken)){let c,d;if(typeof r.mockUserToken=="string")c=r.mockUserToken,d=Ii.MOCK_USER;else{c=Nse(r.mockUserToken,t._app?.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ut(He.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Ii(f)}t._authCredentials=new sle(new Q7(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pg(this.firestore,e,this._query)}}class Ro{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ro(this.firestore,e,this._key)}toJSON(){return{type:Ro._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if($b(n,Ro._jsonSchema))return new Ro(e,r||null,new xt(Sr.fromString(n.referencePath)))}}Ro._jsonSchemaVersion="firestore/documentReference/1.0",Ro._jsonSchema={type:bo("string",Ro._jsonSchemaVersion),referencePath:bo("string")};class Jd extends Pg{constructor(e,n,r){super(e,n,gF(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ro(this.firestore,null,new xt(e))}withConverter(e){return new Jd(this.firestore,e,this._path)}}function F1(t,e,...n){if(t=As(t),Z7("collection","path",e),t instanceof ix){const r=Sr.fromString(e,...n);return z5(r),new Jd(t,null,r)}{if(!(t instanceof Ro||t instanceof Jd))throw new ut(He.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Sr.fromString(e,...n));return z5(r),new Jd(t.firestore,null,r)}}function NV(t,e,...n){if(t=As(t),arguments.length===1&&(e=YM.newId()),Z7("doc","path",e),t instanceof ix){const r=Sr.fromString(e,...n);return U5(r),new Ro(t,null,new xt(r))}{if(!(t instanceof Ro||t instanceof Jd))throw new ut(He.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Sr.fromString(e,...n));return U5(r),new Ro(t.firestore,t instanceof Jd?t.converter:null,new xt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV="AsyncQueue";class PV{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new zF(this,"async_queue_retry"),this._c=()=>{const r=FT();r&&ct(OV,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=FT();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=FT();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Zd;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ng(e))throw e;ct(OV,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Nu("INTERNAL UNHANDLED ERROR: ",DV(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=pN.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(o),o}uc(){this.nc&&Ot(47125,{Pc:DV(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function DV(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class sx extends ix{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new PV,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new PV(e),this._firestoreClient=void 0,await e}}}function sde(t,e){const n=typeof t=="object"?t:KM(),r=typeof t=="string"?t:wC,o=q_(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const i=Ise("firestore");i&&ide(o,...i)}return o}function cH(t){if(t._terminated)throw new ut(He.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ade(t),t._firestoreClient}function ade(t){const e=t._freezeSettings(),n=function(o,i,s,a){return new kle(o,i,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,aH(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ede(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const i=o?._online.build();return{_offline:o?._offline.build(i),_online:i}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ma(mi.fromBase64String(e))}catch(n){throw new ut(He.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ma(mi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ma._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($b(e,Ma._jsonSchema))return Ma.fromBase64String(e.bytes)}}Ma._jsonSchemaVersion="firestore/bytes/1.0",Ma._jsonSchema={type:bo("string",Ma._jsonSchemaVersion),bytes:bo("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ut(He.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ut(He.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ut(He.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return An(this._lat,e._lat)||An(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:dc._jsonSchemaVersion}}static fromJSON(e){if($b(e,dc._jsonSchema))return new dc(e.latitude,e.longitude)}}dc._jsonSchemaVersion="firestore/geoPoint/1.0",dc._jsonSchema={type:bo("string",dc._jsonSchemaVersion),latitude:bo("number"),longitude:bo("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==o[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:fc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($b(e,fc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new fc(e.vectorValues);throw new ut(He.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fc._jsonSchemaVersion="firestore/vectorValue/1.0",fc._jsonSchema={type:bo("string",fc._jsonSchemaVersion),vectorValues:bo("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lde=/^__.*__$/;class cde{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fp(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hb(e,this.data,n,this.fieldTransforms)}}function uH(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ot(40011,{Ac:t})}}class CN{constructor(e,n,r,o,i,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new CN({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return RC(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(uH(this.Ac)&&lde.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ude{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||nx(e)}Cc(e,n,r,o=!1){return new CN({Ac:e,methodName:n,Dc:r,path:fi.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dH(t){const e=t._freezeSettings(),n=nx(t._databaseId);return new ude(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dde(t,e,n,r,o,i={}){const s=t.Cc(i.merge||i.mergeFields?2:0,e,n,o);pH("Data must be an object, but it was:",s,r);const a=fH(r,s);let l,c;if(i.merge)l=new pl(s.fieldMask),c=s.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const p=hde(e,f,n);if(!s.contains(p))throw new ut(He.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);mde(d,p)||d.push(p)}l=new pl(d),c=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=s.fieldTransforms;return new cde(new Ia(a),l,c)}class SN extends wN{_toFieldTransform(e){return new Zle(e.path,new Gv)}isEqual(e){return e instanceof SN}}function fde(t,e,n,r=!1){return _N(n,t.Cc(r?4:3,e))}function _N(t,e){if(hH(t=As(t)))return pH("Unsupported field value:",e,t),fH(t,e);if(t instanceof wN)return function(r,o){if(!uH(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(o);i&&o.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,o){const i=[];let s=0;for(const a of r){let l=_N(a,o.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(t,e)}return function(r,o){if((r=As(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Yle(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ir.fromDate(r);return{timestampValue:EC(o.serializer,i)}}if(r instanceof ir){const i=new ir(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:EC(o.serializer,i)}}if(r instanceof dc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ma)return{bytesValue:OF(o.serializer,r._byteString)};if(r instanceof Ro){const i=o.databaseId,s=r.firestore._databaseId;if(!s.isEqual(i))throw o.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:iN(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof fc)return function(s,a){return{mapValue:{fields:{[aF]:{stringValue:lF},[CC]:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return tN(a.serializer,c)})}}}}}}(r,o);throw o.Sc(`Unsupported field value: ${K_(r)}`)}(t,e)}function fH(t,e){const n={};return tF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):up(t,(r,o)=>{const i=_N(o,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function hH(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ir||t instanceof dc||t instanceof Ma||t instanceof Ro||t instanceof wN||t instanceof fc)}function pH(t,e,n){if(!hH(n)||!J7(n)){const r=K_(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function hde(t,e,n){if((e=As(e))instanceof bN)return e._internalPath;if(typeof e=="string")return mH(t,e);throw RC("Field path arguments must be of type string or ",t,!1,void 0,n)}const pde=new RegExp("[~\\*/\\[\\]]");function mH(t,e,n){if(e.search(pde)>=0)throw RC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bN(...e.split("."))._internalPath}catch{throw RC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function RC(t,e,n,r,o){const i=r&&!r.isEmpty(),s=o!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||s)&&(l+=" (found",i&&(l+=` in field ${r}`),s&&(l+=` in document ${o}`),l+=")"),new ut(He.INVALID_ARGUMENT,a+t+l)}function mde(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(e,n,r,o,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ro(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gde(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xN("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gde extends gH{data(){return super.data()}}function xN(t,e){return typeof e=="string"?mH(t,e):e instanceof bN?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yde(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ut(He.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class EN{}class vde extends EN{}function H1(t,e,...n){let r=[];e instanceof EN&&r.push(e),r=r.concat(n),function(i){const s=i.filter(l=>l instanceof kN).length,a=i.filter(l=>l instanceof ax).length;if(s>1||s>0&&a>0)throw new ut(He.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)t=o._apply(t);return t}class ax extends vde{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ax(e,n,r)}_apply(e){const n=this._parse(e);return yH(e._query,n),new Pg(e.firestore,e.converter,nR(e._query,n))}_parse(e){const n=dH(e.firestore);return function(i,s,a,l,c,d,f){let p;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ut(He.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){VV(f,d);const y=[];for(const b of f)y.push(LV(l,i,b));p={arrayValue:{values:y}}}else p=LV(l,i,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||VV(f,d),p=fde(a,s,f,d==="in"||d==="not-in");return vo.create(c,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function U1(t,e,n){const r=e,o=xN("where",t);return ax._create(o,r,n)}class kN extends EN{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kN(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xl.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,i){let s=o;const a=i.getFlattenedFilters();for(const l of a)yH(s,l),s=nR(s,l)}(e._query,n),new Pg(e.firestore,e.converter,nR(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function LV(t,e,n){if(typeof(n=As(n))=="string"){if(n==="")throw new ut(He.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yF(e)&&n.indexOf("/")!==-1)throw new ut(He.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Sr.fromString(n));if(!xt.isDocumentKey(r))throw new ut(He.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Z5(t,new xt(r))}if(n instanceof Ro)return Z5(t,n._key);throw new ut(He.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${K_(n)}.`)}function VV(t,e){if(!Array.isArray(t)||t.length===0)throw new ut(He.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yH(t,e){const n=function(o,i){for(const s of o)for(const a of s.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ut(He.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ut(He.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class bde{convertValue(e,n="none"){switch(ff(e)){case 0:return null;case 1:return e.booleanValue;case 2:return io(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(df(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ot(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return up(e,(o,i)=>{r[o]=this.convertValue(i,n)}),r}convertVectorValue(e){const n=e.fields?.[CC].arrayValue?.values?.map(r=>io(r.doubleValue));return new fc(n)}convertGeoPoint(e){return new dc(io(e.latitude),io(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=X_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Hv(e));default:return null}}convertTimestamp(e){const n=uf(e);return new ir(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Sr.fromString(e);Jn(BF(r),9688,{name:e});const o=new Uv(r.get(1),r.get(3)),i=new xt(r.popFirst(5));return o.isEqual(n)||Nu(`Document ${i} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wde(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class z1{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mm extends gH{constructor(e,n,r,o,i,s){super(e,n,r,o,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(He.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Mm._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Mm._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mm._jsonSchema={type:bo("string",Mm._jsonSchemaVersion),bundleSource:bo("string","DocumentSnapshot"),bundleName:bo("string"),bundle:bo("string")};class Lw extends Mm{data(e={}){return super.data(e)}}class Nm{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new z1(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Lw(this._firestore,this._userDataWriter,r.key,r,new z1(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ut(He.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,i){if(o._snapshot.oldDocs.isEmpty()){let s=0;return o._snapshot.docChanges.map(a=>{const l=new Lw(o._firestore,o._userDataWriter,a.doc.key,a.doc,new z1(o._snapshot.mutatedKeys.has(a.doc.key),o._snapshot.fromCache),o.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Lw(o._firestore,o._userDataWriter,a.doc.key,a.doc,new z1(o._snapshot.mutatedKeys.has(a.doc.key),o._snapshot.fromCache),o.query.converter);let c=-1,d=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:Cde(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ut(He.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Nm._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=YM.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),o.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Cde(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ot(61501,{type:t})}}Nm._jsonSchemaVersion="firestore/querySnapshot/1.0",Nm._jsonSchema={type:bo("string",Nm._jsonSchemaVersion),bundleSource:bo("string","QuerySnapshot"),bundleName:bo("string"),bundle:bo("string")};class Sde extends bde{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ma(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ro(this.firestore,null,n)}}function G1(t){t=Zm(t,Pg);const e=Zm(t.firestore,sx),n=cH(e),r=new Sde(e);return yde(t._query),ode(n,t._query).then(o=>new Nm(e,r,t,o))}function jV(t,e,n){t=Zm(t,Ro);const r=Zm(t.firestore,sx),o=wde(t.converter,e);return vH(r,[dde(dH(r),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,cc.none())])}function _de(t){return vH(Zm(t.firestore,sx),[new nN(t._key,cc.none())])}function vH(t,e){return function(r,o){const i=new Zd;return r.asyncQueue.enqueueAndForget(async()=>zue(await nde(r),o,i)),i.promise}(cH(t),e)}function BV(){return new SN("serverTimestamp")}(function(e,n=!0){(function(o){Ig=o})(Rg),Uh(new lf("firestore",(r,{instanceIdentifier:o,options:i})=>{const s=r.getProvider("app").getImmediate(),a=new sx(new ale(r.getProvider("auth-internal")),new ule(s,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ut(He.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uv(c.options.projectId,d)}(s,o),s);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ac(B5,$5,e),ac(B5,$5,"esm2020")})();var xde="firebase",Ede="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ac(xde,Ede,"app");function bH(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kde=bH,wH=new jb("auth","Firebase",bH());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=new G_("@firebase/auth");function Tde(t,...e){IC.logLevel<=Tn.WARN&&IC.warn(`Auth (${Rg}): ${t}`,...e)}function Vw(t,...e){IC.logLevel<=Tn.ERROR&&IC.error(`Auth (${Rg}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(t,...e){throw AN(t,...e)}function vl(t,...e){return AN(t,...e)}function TN(t,e,n){const r={...kde(),[e]:n};return new jb("auth","Firebase",r).create(e,{appName:t.name})}function Nh(t){return TN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ade(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&bc(t,"argument-error"),TN(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function AN(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return wH.create(t,...e)}function Bt(t,e,...n){if(!t)throw AN(e,...n)}function pu(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vw(e),new Error(e)}function Pu(t,e){t||pu(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(){return typeof self<"u"&&self.location?.href||""}function Rde(){return $V()==="http:"||$V()==="https:"}function $V(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ide(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Rde()||jse()||"connection"in navigator)?navigator.onLine:!0}function Mde(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pu(n>e,"Short delay should be less than long delay!"),this.isMobile=Dse()||Bse()}get(){return Ide()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t,e){Pu(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CH{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nde={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ode=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Pde=new qb(3e4,6e4);function IN(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Dg(t,e,n,r,o={}){return SH(t,o,async()=>{let i={},s={};r&&(e==="GET"?s=r:i={body:JSON.stringify(r)});const a=Bb({key:t.config.apiKey,...s}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...i};return Vse()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Ag(t.emulatorConfig.host)&&(c.credentials="include"),CH.fetch()(await _H(t,t.config.apiHost,n,a),c)})}async function SH(t,e,n){t._canInitEmulator=!1;const r={...Nde,...e};try{const o=new Lde(t),i=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw q1(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const a=i.ok?s.errorMessage:s.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw q1(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw q1(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw q1(t,"user-disabled",s);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw TN(t,d,c);bc(t,d)}}catch(o){if(o instanceof kc)throw o;bc(t,"network-request-failed",{message:String(o)})}}async function Dde(t,e,n,r,o={}){const i=await Dg(t,e,n,r,o);return"mfaPendingCredential"in i&&bc(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function _H(t,e,n,r){const o=`${e}${n}?${r}`,i=t,s=i.config.emulator?RN(t.config,o):`${t.config.apiScheme}://${o}`;return Ode.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(s).toString():s}class Lde{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vl(this.auth,"network-request-failed")),Pde.get())})}}function q1(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=vl(t,e,r);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vde(t,e){return Dg(t,"POST","/v1/accounts:delete",e)}async function MC(t,e){return Dg(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jde(t,e=!1){const n=As(t),r=await n.getIdToken(e),o=MN(r);Bt(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const i=typeof o.firebase=="object"?o.firebase:void 0,s=i?.sign_in_provider;return{claims:o,token:r,authTime:wv(UT(o.auth_time)),issuedAtTime:wv(UT(o.iat)),expirationTime:wv(UT(o.exp)),signInProvider:s||null,signInSecondFactor:i?.sign_in_second_factor||null}}function UT(t){return Number(t)*1e3}function MN(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vw("JWT malformed, contained fewer than 3 sections"),null;try{const o=O7(n);return o?JSON.parse(o):(Vw("Failed to decode base64 JWT payload"),null)}catch(o){return Vw("Caught error parsing JWT payload as JSON",o?.toString()),null}}function FV(t){const e=MN(t);return Bt(e,"internal-error"),Bt(typeof e.exp<"u","internal-error"),Bt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wv(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kc&&Bde(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Bde({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $de{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wv(this.lastLoginAt),this.creationTime=wv(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(t){const e=t.auth,n=await t.getIdToken(),r=await Wv(t,MC(e,{idToken:n}));Bt(r?.users.length,e,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const i=o.providerUserInfo?.length?xH(o.providerUserInfo):[],s=Hde(t.providerData,i),a=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!s?.length,c=a?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new pR(o.createdAt,o.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function Fde(t){const e=As(t);await NC(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Hde(t,e){return[...t.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function xH(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ude(t,e){const n=await SH(t,{},async()=>{const r=Bb({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:i}=t.config,s=await _H(t,o,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ag(t.emulatorConfig.host)&&(l.credentials="include"),CH.fetch()(s,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function zde(t,e){return Dg(t,"POST","/v2/accounts:revokeToken",IN(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Bt(e.idToken,"internal-error"),Bt(typeof e.idToken<"u","internal-error"),Bt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FV(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Bt(e.length!==0,"internal-error");const n=FV(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Bt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:i}=await Ude(e,n);this.updateTokensAndExpiration(r,o,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:i}=n,s=new Om;return r&&(Bt(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),o&&(Bt(typeof o=="string","internal-error",{appName:e}),s.accessToken=o),i&&(Bt(typeof i=="number","internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Om,this.toJSON())}_performRefresh(){return pu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(t,e){Bt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ml{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new $de(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new pR(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Wv(this,this.stsTokenManager.getToken(this.auth,e));return Bt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jde(this,e)}reload(){return Fde(this)}_assign(e){this!==e&&(Bt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ml({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await NC(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ra(this.auth.app))return Promise.reject(Nh(this.auth));const e=await this.getIdToken();return await Wv(this,Vde(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,i=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:y,stsTokenManager:b}=n;Bt(f&&b,e,"internal-error");const _=Om.fromJSON(this.name,b);Bt(typeof f=="string",e,"internal-error"),xd(r,e.name),xd(o,e.name),Bt(typeof p=="boolean",e,"internal-error"),Bt(typeof g=="boolean",e,"internal-error"),xd(i,e.name),xd(s,e.name),xd(a,e.name),xd(l,e.name),xd(c,e.name),xd(d,e.name);const k=new ml({uid:f,auth:e,email:o,emailVerified:p,displayName:r,isAnonymous:g,photoURL:s,phoneNumber:i,tenantId:a,stsTokenManager:_,createdAt:c,lastLoginAt:d});return y&&Array.isArray(y)&&(k.providerData=y.map(M=>({...M}))),l&&(k._redirectEventId=l),k}static async _fromIdTokenResponse(e,n,r=!1){const o=new Om;o.updateFromServerResponse(n);const i=new ml({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await NC(i),i}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Bt(o.localId!==void 0,"internal-error");const i=o.providerUserInfo!==void 0?xH(o.providerUserInfo):[],s=!(o.email&&o.passwordHash)&&!i?.length,a=new Om;a.updateFromIdToken(r);const l=new ml({uid:o.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:i,metadata:new pR(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!i?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=new Map;function mu(t){Pu(t instanceof Function,"Expected a class definition");let e=HV.get(t);return e?(Pu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,HV.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}EH.type="NONE";const UV=EH;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t,e,n){return`firebase:${t}:${e}:${n}`}class Pm{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:i}=this.auth;this.fullUserKey=jw(this.userKey,o.apiKey,i),this.fullPersistenceKey=jw("persistence",o.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await MC(this.auth,{idToken:e}).catch(()=>{});return n?ml._fromGetAccountInfoResponse(this.auth,n,e):null}return ml._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Pm(mu(UV),e,r);const o=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=o[0]||mu(UV);const s=jw(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(s);if(d){let f;if(typeof d=="string"){const p=await MC(e,{idToken:d}).catch(()=>{});if(!p)break;f=await ml._fromGetAccountInfoResponse(e,p,d)}else f=ml._fromJSON(e,d);c!==i&&(a=f),i=c;break}}catch{}const l=o.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Pm(i,e,r):(i=l[0],a&&await i._set(s,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(s)}catch{}})),new Pm(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(RH(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kH(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(MH(e))return"Blackberry";if(NH(e))return"Webos";if(TH(e))return"Safari";if((e.includes("chrome/")||AH(e))&&!e.includes("edge/"))return"Chrome";if(IH(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function kH(t=ji()){return/firefox\//i.test(t)}function TH(t=ji()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AH(t=ji()){return/crios\//i.test(t)}function RH(t=ji()){return/iemobile/i.test(t)}function IH(t=ji()){return/android/i.test(t)}function MH(t=ji()){return/blackberry/i.test(t)}function NH(t=ji()){return/webos/i.test(t)}function NN(t=ji()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Gde(t=ji()){return NN(t)&&!!window.navigator?.standalone}function qde(){return $se()&&document.documentMode===10}function OH(t=ji()){return NN(t)||IH(t)||NH(t)||MH(t)||/windows phone/i.test(t)||RH(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PH(t,e=[]){let n;switch(t){case"Browser":n=zV(ji());break;case"Worker":n=`${zV(ji())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Rg}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kde{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((s,a)=>{try{const l=e(i);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wde(t,e={}){return Dg(t,"GET","/v2/passwordPolicy",IN(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yde=6;class Xde{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Yde,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qde{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GV(this),this.idTokenSubscription=new GV(this),this.beforeStateQueue=new Kde(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wH,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=mu(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Pm.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await MC(this,{idToken:e}),r=await ml._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ra(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===s)&&a?.user&&(r=a.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await NC(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Mde()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ra(this.app))return Promise.reject(Nh(this));const n=e?As(e):null;return n&&Bt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Bt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ra(this.app)?Promise.reject(Nh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ra(this.app)?Promise.reject(Nh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(mu(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Wde(this),n=new Xde(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new jb("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await zde(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&mu(e)||this._popupRedirectResolver;Bt(n,this,"argument-error"),this.redirectPersistenceManager=await Pm.create(this,[mu(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Bt(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,o);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PH(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Ra(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Tde(`Error while retrieving App Check token: ${e.error}`),e?.token}}function lx(t){return As(t)}class GV{constructor(e){this.auth=e,this.observer=null,this.addObserver=Wse(n=>this.observer=n)}get next(){return Bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ON={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Zde(t){ON=t}function Jde(t){return ON.loadJS(t)}function efe(){return ON.gapiScript}function tfe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nfe(t,e){const n=q_(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),i=n.getOptions();if(Hh(i,e??{}))return o;bc(o,"already-initialized")}return n.initialize({options:e})}function rfe(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(mu);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function ofe(t,e,n){const r=lx(t);Bt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,i=DH(e),{host:s,port:a}=ife(e),l=a===null?"":`:${a}`,c={url:`${i}//${s}${l}/`},d=Object.freeze({host:s,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Bt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Bt(Hh(c,r.config.emulator)&&Hh(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Ag(s)?(V7(`${i}//${s}${l}`),j7("Auth",!0)):sfe()}function DH(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ife(t){const e=DH(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const i=o[1];return{host:i,port:qV(r.substr(i.length+1))}}else{const[i,s]=r.split(":");return{host:i,port:qV(s)}}}function qV(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sfe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LH{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pu("not implemented")}_getIdTokenResponse(e){return pu("not implemented")}_linkToIdToken(e,n){return pu("not implemented")}_getReauthenticationResolver(e){return pu("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dm(t,e){return Dde(t,"POST","/v1/accounts:signInWithIdp",IN(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const afe="http://localhost";class qh extends LH{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bc("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...i}=n;if(!r||!o)return null;const s=new qh(r,o);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Dm(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Dm(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Dm(e,n)}buildRequest(){const e={requestUri:afe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bb(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb extends PN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends Kb{constructor(){super("facebook.com")}static credential(e){return qh._fromParams({providerId:Dd.PROVIDER_ID,signInMethod:Dd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dd.credentialFromTaggedObject(e)}static credentialFromError(e){return Dd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dd.credential(e.oauthAccessToken)}catch{return null}}}Dd.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends Kb{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qh._fromParams({providerId:du.PROVIDER_ID,signInMethod:du.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return du.credentialFromTaggedObject(e)}static credentialFromError(e){return du.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return du.credential(n,r)}catch{return null}}}du.GOOGLE_SIGN_IN_METHOD="google.com";du.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld extends Kb{constructor(){super("github.com")}static credential(e){return qh._fromParams({providerId:Ld.PROVIDER_ID,signInMethod:Ld.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ld.credentialFromTaggedObject(e)}static credentialFromError(e){return Ld.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ld.credential(e.oauthAccessToken)}catch{return null}}}Ld.GITHUB_SIGN_IN_METHOD="github.com";Ld.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends Kb{constructor(){super("twitter.com")}static credential(e,n){return qh._fromParams({providerId:Vd.PROVIDER_ID,signInMethod:Vd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vd.credentialFromTaggedObject(e)}static credentialFromError(e){return Vd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vd.credential(n,r)}catch{return null}}}Vd.TWITTER_SIGN_IN_METHOD="twitter.com";Vd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const i=await ml._fromIdTokenResponse(e,r,o),s=KV(r);return new rg({user:i,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=KV(r);return new rg({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function KV(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC extends kc{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,OC.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new OC(e,n,r,o)}}function VH(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?OC._fromErrorAndOperation(t,i,e,r):i})}async function lfe(t,e,n=!1){const r=await Wv(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return rg._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cfe(t,e,n=!1){const{auth:r}=t;if(Ra(r.app))return Promise.reject(Nh(r));const o="reauthenticate";try{const i=await Wv(t,VH(r,o,e,t),n);Bt(i.idToken,r,"internal-error");const s=MN(i.idToken);Bt(s,r,"internal-error");const{sub:a}=s;return Bt(t.uid===a,r,"user-mismatch"),rg._forOperation(t,o,i)}catch(i){throw i?.code==="auth/user-not-found"&&bc(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ufe(t,e,n=!1){if(Ra(t.app))return Promise.reject(Nh(t));const r="signIn",o=await VH(t,r,e),i=await rg._fromIdTokenResponse(t,r,o);return n||await t._updateCurrentUser(i.user),i}function dfe(t,e,n,r){return As(t).onIdTokenChanged(e,n,r)}function ffe(t,e,n){return As(t).beforeAuthStateChanged(e,n)}function hfe(t,e,n,r){return As(t).onAuthStateChanged(e,n,r)}const PC="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(PC,"1"),this.storage.removeItem(PC),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pfe=1e3,mfe=10;class BH extends jH{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OH(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},i=this.storage.getItem(r);qde()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,mfe):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},pfe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BH.type="LOCAL";const gfe=BH;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $H extends jH{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}$H.type="SESSION";const FH=$H;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yfe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new cx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:i}=n.data,s=this.handlersMap[o];if(!s?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const a=Array.from(s).map(async c=>c(n.origin,i)),l=await yfe(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vfe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let i,s;return new Promise((a,l)=>{const c=DN("",20);o.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:o,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(s),o.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[o.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(){return window}function bfe(t){hc().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HH(){return typeof hc().WorkerGlobalScope<"u"&&typeof hc().importScripts=="function"}async function wfe(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Cfe(){return navigator?.serviceWorker?.controller||null}function Sfe(){return HH()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UH="firebaseLocalStorageDb",_fe=1,DC="firebaseLocalStorage",zH="fbase_key";class Wb{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ux(t,e){return t.transaction([DC],e?"readwrite":"readonly").objectStore(DC)}function xfe(){const t=indexedDB.deleteDatabase(UH);return new Wb(t).toPromise()}function mR(){const t=indexedDB.open(UH,_fe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(DC,{keyPath:zH})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(DC)?e(r):(r.close(),await xfe(),e(await mR()))})})}async function WV(t,e,n){const r=ux(t,!0).put({[zH]:e,value:n});return new Wb(r).toPromise()}async function Efe(t,e){const n=ux(t,!1).get(e),r=await new Wb(n).toPromise();return r===void 0?null:r.value}function YV(t,e){const n=ux(t,!0).delete(e);return new Wb(n).toPromise()}const kfe=800,Tfe=3;class GH{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mR(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Tfe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HH()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cx._getInstance(Sfe()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await wfe(),!this.activeServiceWorker)return;this.sender=new vfe(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Cfe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mR();return await WV(e,PC,"1"),await YV(e,PC),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>WV(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Efe(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>YV(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const i=ux(o,!1).getAll();return new Wb(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:i}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(i)&&(this.notifyListeners(o,i),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kfe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GH.type="LOCAL";const Afe=GH;new qb(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qH(t,e){return e?mu(e):(Bt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN extends LH{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Dm(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Dm(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Dm(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Rfe(t){return ufe(t.auth,new LN(t),t.bypassAuthState)}function Ife(t){const{auth:e,user:n}=t;return Bt(n,e,"internal-error"),cfe(n,new LN(t),t.bypassAuthState)}async function Mfe(t){const{auth:e,user:n}=t;return Bt(n,e,"internal-error"),lfe(n,new LN(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH{constructor(e,n,r,o,i=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:i,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Rfe;case"linkViaPopup":case"linkViaRedirect":return Mfe;case"reauthViaPopup":case"reauthViaRedirect":return Ife;default:bc(this.auth,"internal-error")}}resolve(e){Pu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nfe=new qb(2e3,1e4);async function Ofe(t,e,n){if(Ra(t.app))return Promise.reject(vl(t,"operation-not-supported-in-this-environment"));const r=lx(t);Ade(t,e,PN);const o=qH(r,n);return new Sh(r,"signInViaPopup",e,o).executeNotNull()}class Sh extends KH{constructor(e,n,r,o,i){super(e,n,o,i),this.provider=r,this.authWindow=null,this.pollId=null,Sh.currentPopupAction&&Sh.currentPopupAction.cancel(),Sh.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Bt(e,this.auth,"internal-error"),e}async onExecution(){Pu(this.filter.length===1,"Popup operations only handle one event");const e=DN();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(vl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sh.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Nfe.get())};e()}}Sh.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pfe="pendingRedirect",Bw=new Map;class Dfe extends KH{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Bw.get(this.auth._key());if(!e){try{const r=await Lfe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Bw.set(this.auth._key(),e)}return this.bypassAuthState||Bw.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Lfe(t,e){const n=Bfe(e),r=jfe(t);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function Vfe(t,e){Bw.set(t._key(),e)}function jfe(t){return mu(t._redirectPersistence)}function Bfe(t){return jw(Pfe,t.config.apiKey,t.name)}async function $fe(t,e,n=!1){if(Ra(t.app))return Promise.reject(Nh(t));const r=lx(t),o=qH(r,e),s=await new Dfe(r,o,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ffe=600*1e3;class Hfe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ufe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!WH(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(vl(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ffe&&this.cachedEventUids.clear(),this.cachedEventUids.has(XV(e))}saveEventToCache(e){this.cachedEventUids.add(XV(e)),this.lastProcessedEventTime=Date.now()}}function XV(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function WH({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Ufe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WH(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zfe(t,e={}){return Dg(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gfe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qfe=/^https?/;async function Kfe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zfe(t);for(const n of e)try{if(Wfe(n))return}catch{}bc(t,"unauthorized-domain")}function Wfe(t){const e=hR(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!qfe.test(n))return!1;if(Gfe.test(t))return r===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yfe=new qb(3e4,6e4);function QV(){const t=hc().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Xfe(t){return new Promise((e,n)=>{function r(){QV(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QV(),n(vl(t,"network-request-failed"))},timeout:Yfe.get()})}if(hc().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(hc().gapi?.load)r();else{const o=tfe("iframefcb");return hc()[o]=()=>{gapi.load?r():n(vl(t,"network-request-failed"))},Jde(`${efe()}?onload=${o}`).catch(i=>n(i))}}).catch(e=>{throw $w=null,e})}let $w=null;function Qfe(t){return $w=$w||Xfe(t),$w}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zfe=new qb(5e3,15e3),Jfe="__/auth/iframe",ehe="emulator/auth/iframe",the={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nhe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rhe(t){const e=t.config;Bt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?RN(e,ehe):`https://${t.config.authDomain}/${Jfe}`,r={apiKey:e.apiKey,appName:t.name,v:Rg},o=nhe.get(t.config.apiHost);o&&(r.eid=o);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Bb(r).slice(1)}`}async function ohe(t){const e=await Qfe(t),n=hc().gapi;return Bt(n,t,"internal-error"),e.open({where:document.body,url:rhe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:the,dontclear:!0},r=>new Promise(async(o,i)=>{await r.restyle({setHideOnLeave:!1});const s=vl(t,"network-request-failed"),a=hc().setTimeout(()=>{i(s)},Zfe.get());function l(){hc().clearTimeout(a),o(r)}r.ping(l).then(l,()=>{i(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ihe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},she=500,ahe=600,lhe="_blank",che="http://localhost";class ZV{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uhe(t,e,n,r=she,o=ahe){const i=Math.max((window.screen.availHeight-o)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...ihe,width:r.toString(),height:o.toString(),top:i,left:s},c=ji().toLowerCase();n&&(a=AH(c)?lhe:n),kH(c)&&(e=e||che,l.scrollbars="yes");const d=Object.entries(l).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(Gde(c)&&a!=="_self")return dhe(e||"",a),new ZV(null);const f=window.open(e||"",a,d);Bt(f,t,"popup-blocked");try{f.focus()}catch{}return new ZV(f)}function dhe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fhe="__/auth/handler",hhe="emulator/auth/handler",phe=encodeURIComponent("fac");async function JV(t,e,n,r,o,i){Bt(t.config.authDomain,t,"auth-domain-config-required"),Bt(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Rg,eventId:o};if(e instanceof PN){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Kse(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))s[d]=f}if(e instanceof Kb){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${phe}=${encodeURIComponent(l)}`:"";return`${mhe(t)}?${Bb(a).slice(1)}${c}`}function mhe({config:t}){return t.emulator?RN(t,hhe):`https://${t.authDomain}/${fhe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="webStorageSupport";class ghe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FH,this._completeRedirectFn=$fe,this._overrideRedirectResult=Vfe}async _openPopup(e,n,r,o){Pu(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await JV(e,n,r,hR(),o);return uhe(e,i,DN())}async _openRedirect(e,n,r,o){await this._originValidation(e);const i=await JV(e,n,r,hR(),o);return bfe(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:i}=this.eventManagers[n];return o?Promise.resolve(o):(Pu(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ohe(e),r=new Hfe(e);return n.register("authEvent",o=>(Bt(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zT,{type:zT},o=>{const i=o?.[0]?.[zT];i!==void 0&&n(!!i),bc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Kfe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return OH()||TH()||NN()}}const yhe=ghe;var ej="@firebase/auth",tj="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vhe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bhe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function whe(t){Uh(new lf("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Bt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PH(t)},c=new Qde(r,o,i,l);return rfe(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Uh(new lf("auth-internal",e=>{const n=lx(e.getProvider("auth").getImmediate());return(r=>new vhe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ac(ej,tj,bhe(t)),ac(ej,tj,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Che=300,She=L7("authIdTokenMaxAge")||Che;let nj=null;const _he=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>She)return;const o=n?.token;nj!==o&&(nj=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function xhe(t=KM()){const e=q_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=nfe(t,{popupRedirectResolver:yhe,persistence:[Afe,gfe,FH]}),r=L7("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const s=_he(i.toString());ffe(n,s,()=>s(n.currentUser)),dfe(n,a=>s(a))}}const o=P7("auth");return o&&ofe(n,`http://${o}`),n}function Ehe(){return document.getElementsByTagName("head")?.[0]??document}Zde({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=o=>{const i=vl("internal-error");i.customData=o,n(i)},r.type="text/javascript",r.charset="UTF-8",Ehe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});whe("Browser");var rj="@firebase/ai",gR="2.0.0";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="AI",oj="us-central1",khe="https://firebasevertexai.googleapis.com",The="v1beta",ij=gR,Ahe="gl-js",Rhe=180*1e3;/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=["user","model","function","system"],YH={HARM_SEVERITY_UNSUPPORTED:"HARM_SEVERITY_UNSUPPORTED"},aj={SAFETY:"SAFETY",RECITATION:"RECITATION"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn={ERROR:"error",REQUEST_ERROR:"request-error",RESPONSE_ERROR:"response-error",FETCH_ERROR:"fetch-error",INVALID_CONTENT:"invalid-content",API_NOT_ENABLED:"api-not-enabled",INVALID_SCHEMA:"invalid-schema",NO_API_KEY:"no-api-key",NO_APP_ID:"no-app-id",NO_MODEL:"no-model",NO_PROJECT_ID:"no-project-id",PARSE_FAILED:"parse-failed",UNSUPPORTED:"unsupported"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp={STRING:"string",NUMBER:"number",INTEGER:"integer",BOOLEAN:"boolean",ARRAY:"array",OBJECT:"object"};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu={VERTEX_AI:"VERTEX_AI",GOOGLE_AI:"GOOGLE_AI"};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(e){this.backendType=e}}class Yb extends XH{constructor(){super(Vu.GOOGLE_AI)}}class dx extends XH{constructor(e=oj){super(Vu.VERTEX_AI),e?this.location=e:this.location=oj}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ihe{constructor(e,n,r,o){this.app=e,this.backend=n;const i=o?.getImmediate({optional:!0}),s=r?.getImmediate({optional:!0});this.auth=s||null,this.appCheck=i||null,n instanceof dx?this.location=n.location:this.location=""}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn extends kc{constructor(e,n,r){const o=og,i=`${o}/${e}`,s=`${o}: ${n} (${i})`;super(e,s),this.code=e,this.customErrorData=r,Error.captureStackTrace&&Error.captureStackTrace(this,yn),Object.setPrototypeOf(this,yn.prototype),this.toString=()=>s}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mhe(t){if(t instanceof Yb)return`${og}/googleai`;if(t instanceof dx)return`${og}/vertexai/${t.location}`;throw new yn(xn.ERROR,`Invalid backend: ${JSON.stringify(t.backendType)}`)}function Nhe(t){const e=t.split("/");if(e[0]!==og)throw new yn(xn.ERROR,`Invalid instance identifier, unknown prefix '${e[0]}'`);switch(e[1]){case"vertexai":const r=e[2];if(!r)throw new yn(xn.ERROR,`Invalid instance identifier, unknown location '${t}'`);return new dx(r);case"googleai":return new Yb;default:throw new yn(xn.ERROR,`Invalid instance identifier string: '${t}'`)}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n){if(e.app?.options?.apiKey)if(e.app?.options?.projectId)if(e.app?.options?.appId){if(this._apiSettings={apiKey:e.app.options.apiKey,project:e.app.options.projectId,appId:e.app.options.appId,automaticDataCollectionEnabled:e.app.automaticDataCollectionEnabled,location:e.location,backend:e.backend},Ra(e.app)&&e.app.settings.appCheckToken){const r=e.app.settings.appCheckToken;this._apiSettings.getAppCheckToken=()=>Promise.resolve({token:r})}else e.appCheck&&(this._apiSettings.getAppCheckToken=()=>e.appCheck.getToken());e.auth&&(this._apiSettings.getAuthToken=()=>e.auth.getToken()),this.model=Cv.normalizeModelName(n,this._apiSettings.backend.backendType)}else throw new yn(xn.NO_APP_ID,'The "appId" field is empty in the local Firebase config. Firebase AI requires this field to contain a valid app ID.');else throw new yn(xn.NO_PROJECT_ID,'The "projectId" field is empty in the local Firebase config. Firebase AI requires this field to contain a valid project ID.');else throw new yn(xn.NO_API_KEY,'The "apiKey" field is empty in the local Firebase config. Firebase AI requires this field to contain a valid API key.')}static normalizeModelName(e,n){return n===Vu.GOOGLE_AI?Cv.normalizeGoogleAIModelName(e):Cv.normalizeVertexAIModelName(e)}static normalizeGoogleAIModelName(e){return`models/${e}`}static normalizeVertexAIModelName(e){let n;return e.includes("/")?e.startsWith("models/")?n=`publishers/google/${e}`:n=e:n=`publishers/google/models/${e}`,n}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef=new G_("@firebase/vertexai");/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yv;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.PREDICT="predict"})(Yv||(Yv={}));class QH{constructor(e,n,r,o,i){this.model=e,this.task=n,this.apiSettings=r,this.stream=o,this.requestOptions=i}toString(){const e=new URL(this.baseUrl);return e.pathname=`/${this.apiVersion}/${this.modelPath}:${this.task}`,e.search=this.queryParams.toString(),e.toString()}get baseUrl(){return this.requestOptions?.baseUrl||khe}get apiVersion(){return The}get modelPath(){if(this.apiSettings.backend instanceof Yb)return`projects/${this.apiSettings.project}/${this.model}`;if(this.apiSettings.backend instanceof dx)return`projects/${this.apiSettings.project}/locations/${this.apiSettings.backend.location}/${this.model}`;throw new yn(xn.ERROR,`Invalid backend: ${JSON.stringify(this.apiSettings.backend)}`)}get queryParams(){const e=new URLSearchParams;return this.stream&&e.set("alt","sse"),e}}function Ohe(){const t=[];return t.push(`${Ahe}/${ij}`),t.push(`fire/${ij}`),t.join(" ")}async function Phe(t){const e=new Headers;if(e.append("Content-Type","application/json"),e.append("x-goog-api-client",Ohe()),e.append("x-goog-api-key",t.apiSettings.apiKey),t.apiSettings.automaticDataCollectionEnabled&&e.append("X-Firebase-Appid",t.apiSettings.appId),t.apiSettings.getAppCheckToken){const n=await t.apiSettings.getAppCheckToken();n&&(e.append("X-Firebase-AppCheck",n.token),n.error&&ef.warn(`Unable to obtain a valid App Check token: ${n.error.message}`))}if(t.apiSettings.getAuthToken){const n=await t.apiSettings.getAuthToken();n&&e.append("Authorization",`Firebase ${n.accessToken}`)}return e}async function Dhe(t,e,n,r,o,i){const s=new QH(t,e,n,r,i);return{url:s.toString(),fetchOptions:{method:"POST",headers:await Phe(s),body:o}}}async function VN(t,e,n,r,o,i){const s=new QH(t,e,n,r,i);let a,l;try{const c=await Dhe(t,e,n,r,o,i),d=i?.timeout!=null&&i.timeout>=0?i.timeout:Rhe,f=new AbortController;if(l=setTimeout(()=>f.abort(),d),c.fetchOptions.signal=f.signal,a=await fetch(c.url,c.fetchOptions),!a.ok){let p="",g;try{const y=await a.json();p=y.error.message,y.error.details&&(p+=` ${JSON.stringify(y.error.details)}`,g=y.error.details)}catch{}throw a.status===403&&g&&g.some(y=>y.reason==="SERVICE_DISABLED")&&g.some(y=>y.links?.[0]?.description.includes("Google developers console API activation"))?new yn(xn.API_NOT_ENABLED,`The Firebase AI SDK requires the Firebase AI API ('firebasevertexai.googleapis.com') to be enabled in your Firebase project. Enable this API by visiting the Firebase Console at https://console.firebase.google.com/project/${s.apiSettings.project}/genai/ and clicking "Get started". If you enabled this API recently, wait a few minutes for the action to propagate to our systems and then retry.`,{status:a.status,statusText:a.statusText,errorDetails:g}):new yn(xn.FETCH_ERROR,`Error fetching from ${s}: [${a.status} ${a.statusText}] ${p}`,{status:a.status,statusText:a.statusText,errorDetails:g})}}catch(c){let d=c;throw c.code!==xn.FETCH_ERROR&&c.code!==xn.API_NOT_ENABLED&&c instanceof Error&&(d=new yn(xn.ERROR,`Error fetching from ${s.toString()}: ${c.message}`),d.stack=c.stack),d}finally{l&&clearTimeout(l)}return a}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(t){return t.candidates&&!t.candidates[0].hasOwnProperty("index")&&(t.candidates[0].index=0),Lhe(t)}function Lhe(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&ef.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Fw(t.candidates[0]))throw new yn(xn.RESPONSE_ERROR,`Response error: ${Md(t)}. Response body stored in error.response`,{response:t});return Vhe(t)}else if(t.promptFeedback)throw new yn(xn.RESPONSE_ERROR,`Text not available. ${Md(t)}`,{response:t});return""},t.inlineDataParts=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&ef.warn(`This response had ${t.candidates.length} candidates. Returning data from the first candidate only. Access response.candidates directly to use the other candidates.`),Fw(t.candidates[0]))throw new yn(xn.RESPONSE_ERROR,`Response error: ${Md(t)}. Response body stored in error.response`,{response:t});return Bhe(t)}else if(t.promptFeedback)throw new yn(xn.RESPONSE_ERROR,`Data not available. ${Md(t)}`,{response:t})},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&ef.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Fw(t.candidates[0]))throw new yn(xn.RESPONSE_ERROR,`Response error: ${Md(t)}. Response body stored in error.response`,{response:t});return jhe(t)}else if(t.promptFeedback)throw new yn(xn.RESPONSE_ERROR,`Function call not available. ${Md(t)}`,{response:t})},t}function Vhe(t){const e=[];if(t.candidates?.[0].content?.parts)for(const n of t.candidates?.[0].content?.parts)n.text&&e.push(n.text);return e.length>0?e.join(""):""}function jhe(t){const e=[];if(t.candidates?.[0].content?.parts)for(const n of t.candidates?.[0].content?.parts)n.functionCall&&e.push(n.functionCall);if(e.length>0)return e}function Bhe(t){const e=[];if(t.candidates?.[0].content?.parts)for(const n of t.candidates?.[0].content?.parts)n.inlineData&&e.push(n);if(e.length>0)return e}const $he=[aj.RECITATION,aj.SAFETY];function Fw(t){return!!t.finishReason&&$he.some(e=>e===t.finishReason)}function Md(t){let e="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)e+="Response was blocked",t.promptFeedback?.blockReason&&(e+=` due to ${t.promptFeedback.blockReason}`),t.promptFeedback?.blockReasonMessage&&(e+=`: ${t.promptFeedback.blockReasonMessage}`);else if(t.candidates?.[0]){const n=t.candidates[0];Fw(n)&&(e+=`Candidate was blocked due to ${n.finishReason}`,n.finishMessage&&(e+=`: ${n.finishMessage}`))}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZH(t){if(t.safetySettings?.forEach(e=>{if(e.method)throw new yn(xn.UNSUPPORTED,"SafetySetting.method is not supported in the the Gemini Developer API. Please remove this property.")}),t.generationConfig?.topK){const e=Math.round(t.generationConfig.topK);e!==t.generationConfig.topK&&(ef.warn("topK in GenerationConfig has been rounded to the nearest integer to match the format for requests to the Gemini Developer API."),t.generationConfig.topK=e)}return t}function jN(t){return{candidates:t.candidates?Hhe(t.candidates):void 0,prompt:t.promptFeedback?Uhe(t.promptFeedback):void 0,usageMetadata:t.usageMetadata}}function Fhe(t,e){return{generateContentRequest:{model:e,...t}}}function Hhe(t){const e=[];let n;return e&&t.forEach(r=>{let o;if(r.citationMetadata&&(o={citations:r.citationMetadata.citationSources}),r.safetyRatings&&(n=r.safetyRatings.map(s=>({...s,severity:s.severity??YH.HARM_SEVERITY_UNSUPPORTED,probabilityScore:s.probabilityScore??0,severityScore:s.severityScore??0}))),r.content?.parts.some(s=>s?.videoMetadata))throw new yn(xn.UNSUPPORTED,"Part.videoMetadata is not supported in the Gemini Developer API. Please remove this property.");const i={index:r.index,content:r.content,finishReason:r.finishReason,finishMessage:r.finishMessage,safetyRatings:n,citationMetadata:o,groundingMetadata:r.groundingMetadata};e.push(i)}),e}function Uhe(t){const e=[];return t.safetyRatings.forEach(r=>{e.push({category:r.category,probability:r.probability,severity:r.severity??YH.HARM_SEVERITY_UNSUPPORTED,probabilityScore:r.probabilityScore??0,severityScore:r.severityScore??0,blocked:r.blocked})}),{blockReason:t.blockReason,safetyRatings:e,blockReasonMessage:t.blockReasonMessage}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function zhe(t,e){const n=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=Khe(n),[o,i]=r.tee();return{stream:qhe(o,e),response:Ghe(i,e)}}async function Ghe(t,e){const n=[],r=t.getReader();for(;;){const{done:o,value:i}=await r.read();if(o){let s=Whe(n);return e.backend.backendType===Vu.GOOGLE_AI&&(s=jN(s)),LC(s)}n.push(i)}}async function*qhe(t,e){const n=t.getReader();for(;;){const{value:r,done:o}=await n.read();if(o)break;let i;e.backend.backendType===Vu.GOOGLE_AI?i=LC(jN(r)):i=LC(r),yield i}}function Khe(t){const e=t.getReader();return new ReadableStream({start(r){let o="";return i();function i(){return e.read().then(({value:s,done:a})=>{if(a){if(o.trim()){r.error(new yn(xn.PARSE_FAILED,"Failed to parse stream"));return}r.close();return}o+=s;let l=o.match(lj),c;for(;l;){try{c=JSON.parse(l[1])}catch{r.error(new yn(xn.PARSE_FAILED,`Error parsing JSON response: "${l[1]}`));return}r.enqueue(c),o=o.substring(l[0].length),l=o.match(lj)}return i()})}}})}function Whe(t){const n={promptFeedback:t[t.length-1]?.promptFeedback};for(const r of t)if(r.candidates)for(const o of r.candidates){const i=o.index||0;if(n.candidates||(n.candidates=[]),n.candidates[i]||(n.candidates[i]={index:o.index}),n.candidates[i].citationMetadata=o.citationMetadata,n.candidates[i].finishReason=o.finishReason,n.candidates[i].finishMessage=o.finishMessage,n.candidates[i].safetyRatings=o.safetyRatings,n.candidates[i].groundingMetadata=o.groundingMetadata,o.content&&o.content.parts){n.candidates[i].content||(n.candidates[i].content={role:o.content.role||"user",parts:[]});const s={};for(const a of o.content.parts){if(a.text!==void 0){if(a.text==="")continue;s.text=a.text}if(a.functionCall&&(s.functionCall=a.functionCall),Object.keys(s).length===0)throw new yn(xn.INVALID_CONTENT,"Part should have at least one property, but there are none. This is likely caused by a malformed response from the backend.");n.candidates[i].content.parts.push(s)}}}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JH(t,e,n,r){t.backend.backendType===Vu.GOOGLE_AI&&(n=ZH(n));const o=await VN(e,Yv.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return zhe(o,t)}async function eU(t,e,n,r){t.backend.backendType===Vu.GOOGLE_AI&&(n=ZH(n));const o=await VN(e,Yv.GENERATE_CONTENT,t,!1,JSON.stringify(n),r),i=await Yhe(o,t);return{response:LC(i)}}async function Yhe(t,e){const n=await t.json();return e.backend.backendType===Vu.GOOGLE_AI?jN(n):n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function yR(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return Xhe(e)}function Xhe(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,o=!1;for(const i of t)"functionResponse"in i?(n.parts.push(i),o=!0):(e.parts.push(i),r=!0);if(r&&o)throw new yn(xn.INVALID_CONTENT,"Within a single message, FunctionResponse cannot be mixed with other type of Part in the request for sending chat message.");if(!r&&!o)throw new yn(xn.INVALID_CONTENT,"No Content is provided for sending chat message.");return r?e:n}function GT(t){let e;return t.contents?e=t:e={contents:[yR(t)]},t.systemInstruction&&(e.systemInstruction=tU(t.systemInstruction)),e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=["text","inlineData","functionCall","functionResponse"],Qhe={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall"],system:["text"]},uj={user:["model"],function:["model"],model:["user","function"],system:[]};function Zhe(t){let e=null;for(const n of t){const{role:r,parts:o}=n;if(!e&&r!=="user")throw new yn(xn.INVALID_CONTENT,`First Content should be with role 'user', got ${r}`);if(!sj.includes(r))throw new yn(xn.INVALID_CONTENT,`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(sj)}`);if(!Array.isArray(o))throw new yn(xn.INVALID_CONTENT,"Content should have 'parts' but property with an array of Parts");if(o.length===0)throw new yn(xn.INVALID_CONTENT,"Each Content should have at least one part");const i={text:0,inlineData:0,functionCall:0,functionResponse:0};for(const a of o)for(const l of cj)l in a&&(i[l]+=1);const s=Qhe[r];for(const a of cj)if(!s.includes(a)&&i[a]>0)throw new yn(xn.INVALID_CONTENT,`Content with role '${r}' can't contain '${a}' part`);if(e&&!uj[r].includes(e.role))throw new yn(xn.INVALID_CONTENT,`Content with role '${r}' can't follow '${e.role}'. Valid previous roles: ${JSON.stringify(uj)}`);e=n}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj="SILENT_ERROR";class Jhe{constructor(e,n,r,o){this.model=n,this.params=r,this.requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiSettings=e,r?.history&&(Zhe(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e){await this._sendPromise;const n=yR(e),r={safetySettings:this.params?.safetySettings,generationConfig:this.params?.generationConfig,tools:this.params?.tools,toolConfig:this.params?.toolConfig,systemInstruction:this.params?.systemInstruction,contents:[...this._history,n]};let o={};return this._sendPromise=this._sendPromise.then(()=>eU(this._apiSettings,this.model,r,this.requestOptions)).then(i=>{if(i.response.candidates&&i.response.candidates.length>0){this._history.push(n);const s={parts:i.response.candidates?.[0].content.parts||[],role:i.response.candidates?.[0].content.role||"model"};this._history.push(s)}else{const s=Md(i.response);s&&ef.warn(`sendMessage() was unsuccessful. ${s}. Inspect response object for details.`)}o=i}),await this._sendPromise,o}async sendMessageStream(e){await this._sendPromise;const n=yR(e),r={safetySettings:this.params?.safetySettings,generationConfig:this.params?.generationConfig,tools:this.params?.tools,toolConfig:this.params?.toolConfig,systemInstruction:this.params?.systemInstruction,contents:[...this._history,n]},o=JH(this._apiSettings,this.model,r,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>o).catch(i=>{throw new Error(dj)}).then(i=>i.response).then(i=>{if(i.candidates&&i.candidates.length>0){this._history.push(n);const s={...i.candidates[0].content};s.role||(s.role="model"),this._history.push(s)}else{const s=Md(i);s&&ef.warn(`sendMessageStream() was unsuccessful. ${s}. Inspect response object for details.`)}}).catch(i=>{i.message!==dj&&ef.error(i)}),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function epe(t,e,n,r){let o="";if(t.backend.backendType===Vu.GOOGLE_AI){const s=Fhe(n,e);o=JSON.stringify(s)}else o=JSON.stringify(n);return(await VN(e,Yv.COUNT_TOKENS,t,!1,o,r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tpe extends Cv{constructor(e,n,r){super(e,n.model),this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=tU(n.systemInstruction),this.requestOptions=r||{}}async generateContent(e){const n=GT(e);return eU(this._apiSettings,this.model,{generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,...n},this.requestOptions)}async generateContentStream(e){const n=GT(e);return JH(this._apiSettings,this.model,{generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,...n},this.requestOptions)}startChat(e){return new Jhe(this._apiSettings,this.model,{tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,generationConfig:this.generationConfig,safetySettings:this.safetySettings,...e},this.requestOptions)}async countTokens(e){const n=GT(e);return epe(this._apiSettings,this.model,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ri=class{constructor(e){if(!e.type&&!e.anyOf)throw new yn(xn.INVALID_SCHEMA,"A schema must have either a 'type' or an 'anyOf' array of sub-schemas.");for(const n in e)this[n]=e[n];this.type=e.type,this.format=e.hasOwnProperty("format")?e.format:void 0,this.nullable=e.hasOwnProperty("nullable")?!!e.nullable:!1}toJSON(){const e={type:this.type};for(const n in this)this.hasOwnProperty(n)&&this[n]!==void 0&&(n!=="required"||this.type===pp.OBJECT)&&(e[n]=this[n]);return e}static array(e){return new ipe(e,e.items)}static object(e){return new spe(e,e.properties,e.optionalProperties)}static string(e){return new fj(e)}static enumString(e){return new fj(e,e.enum)}static integer(e){return new npe(e)}static number(e){return new rpe(e)}static boolean(e){return new ope(e)}static anyOf(e){return new ape(e)}};class npe extends Ri{constructor(e){super({type:pp.INTEGER,...e})}}class rpe extends Ri{constructor(e){super({type:pp.NUMBER,...e})}}class ope extends Ri{constructor(e){super({type:pp.BOOLEAN,...e})}}class fj extends Ri{constructor(e,n){super({type:pp.STRING,...e}),this.enum=n}toJSON(){const e=super.toJSON();return this.enum&&(e.enum=this.enum),e}}class ipe extends Ri{constructor(e,n){super({type:pp.ARRAY,...e}),this.items=n}toJSON(){const e=super.toJSON();return e.items=this.items.toJSON(),e}}class spe extends Ri{constructor(e,n,r=[]){super({type:pp.OBJECT,...e}),this.properties=n,this.optionalProperties=r}toJSON(){const e=super.toJSON();e.properties={...this.properties};const n=[];if(this.optionalProperties){for(const r of this.optionalProperties)if(!this.properties.hasOwnProperty(r))throw new yn(xn.INVALID_SCHEMA,`Property "${r}" specified in "optionalProperties" does not exist.`)}for(const r in this.properties)this.properties.hasOwnProperty(r)&&(e.properties[r]=this.properties[r].toJSON(),this.optionalProperties.includes(r)||n.push(r));return n.length>0&&(e.required=n),delete e.optionalProperties,e}}class ape extends Ri{constructor(e){if(e.anyOf.length===0)throw new yn(xn.INVALID_SCHEMA,"The 'anyOf' array must not be empty.");super({...e,type:void 0}),this.anyOf=e.anyOf}toJSON(){const e=super.toJSON();return this.anyOf&&Array.isArray(this.anyOf)&&(e.anyOf=this.anyOf.map(n=>n.toJSON())),e}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lpe(t=KM(),e={backend:new Yb}){t=As(t);const n=q_(t,og),r=Mhe(e.backend);return n.getImmediate({identifier:r})}function cpe(t,e,n){if(!e.model)throw new yn(xn.NO_MODEL,"Must provide a model name. Example: getGenerativeModel({ model: 'my-model-name' })");return new tpe(t,e,n)}function upe(){Uh(new lf(og,(t,{instanceIdentifier:e})=>{if(!e)throw new yn(xn.ERROR,"AIService instance identifier is undefined.");const n=Nhe(e),r=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ihe(r,n,o,i)},"PUBLIC").setMultipleInstances(!0)),ac(rj,gR),ac(rj,gR,"esm2020")}upe();const dpe={apiKey:"AIzaSyC1HlXj7EkC7ojpJVNcBFbvNlJLZvbLvHc",authDomain:"bsp-notes.firebaseapp.com",projectId:"bsp-notes",storageBucket:"bsp-notes.firebasestorage.app",messagingSenderId:"835580107487",appId:"1:835580107487:web:aaf3a625addafc1b1b276a",measurementId:"G-62J6HHVTHZ"},BN=F7(dpe),hj=xhe(BN),Sm=sde(BN),fpe=new du,hpe=lpe(BN,{backend:new Yb});function ppe(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const mpe=t=>{switch(t){case"success":return vpe;case"info":return wpe;case"warning":return bpe;case"error":return Cpe;default:return null}},gpe=Array(12).fill(0),ype=({visible:t,className:e})=>De.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},De.createElement("div",{className:"sonner-spinner"},gpe.map((n,r)=>De.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),vpe=De.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},De.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),bpe=De.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},De.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),wpe=De.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},De.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Cpe=De.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},De.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Spe=De.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},De.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),De.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),_pe=()=>{const[t,e]=De.useState(document.hidden);return De.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let vR=1;class xpe{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...o}=e,i=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:vR++,s=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:r}),{...l,...e,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...o,dismissible:a,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const o=Promise.resolve(e instanceof Function?e():e);let i=r!==void 0,s;const a=o.then(async c=>{if(s=["resolve",c],De.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(kpe(c)&&!c.ok){i=!1;const f=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,p=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,y=typeof f=="object"&&!De.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:p,...y})}else if(c instanceof Error){i=!1;const f=typeof n.error=="function"?await n.error(c):n.error,p=typeof n.description=="function"?await n.description(c):n.description,y=typeof f=="object"&&!De.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:p,...y})}else if(n.success!==void 0){i=!1;const f=typeof n.success=="function"?await n.success(c):n.success,p=typeof n.description=="function"?await n.description(c):n.description,y=typeof f=="object"&&!De.isValidElement(f)?f:{message:f};this.create({id:r,type:"success",description:p,...y})}}).catch(async c=>{if(s=["reject",c],n.error!==void 0){i=!1;const d=typeof n.error=="function"?await n.error(c):n.error,f=typeof n.description=="function"?await n.description(c):n.description,g=typeof d=="object"&&!De.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:f,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((c,d)=>a.then(()=>s[0]==="reject"?d(s[1]):c(s[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,n)=>{const r=n?.id||vR++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ys=new xpe,Epe=(t,e)=>{const n=e?.id||vR++;return ys.addToast({title:t,...e,id:n}),n},kpe=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Tpe=Epe,Ape=()=>ys.toasts,Rpe=()=>ys.getActiveToasts(),Kr=Object.assign(Tpe,{success:ys.success,info:ys.info,warning:ys.warning,error:ys.error,custom:ys.custom,message:ys.message,promise:ys.promise,dismiss:ys.dismiss,loading:ys.loading},{getHistory:Ape,getToasts:Rpe});ppe("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function K1(t){return t.label!==void 0}const Ipe=3,Mpe="24px",Npe="16px",pj=4e3,Ope=356,Ppe=14,Dpe=45,Lpe=200;function Wl(...t){return t.filter(Boolean).join(" ")}function Vpe(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const jpe=t=>{var e,n,r,o,i,s,a,l,c;const{invert:d,toast:f,unstyled:p,interacting:g,setHeights:y,visibleToasts:b,heights:_,index:k,toasts:M,expanded:N,removeToast:j,defaultRichColors:B,closeButton:F,style:D,cancelButtonStyle:R,actionButtonStyle:I,className:L="",descriptionClassName:z="",duration:q,position:H,gap:ne,expandByDefault:re,classNames:V,icons:U,closeButtonAriaLabel:Q="Close toast"}=t,[J,Y]=De.useState(null),[se,te]=De.useState(null),[ie,ce]=De.useState(!1),[ae,ye]=De.useState(!1),[we,Be]=De.useState(!1),[Ie,Ge]=De.useState(!1),[it,Xe]=De.useState(!1),[zt,un]=De.useState(0),[Pt,Pn]=De.useState(0),kt=De.useRef(f.duration||q||pj),hn=De.useRef(null),sn=De.useRef(null),Ft=k===0,Wt=k+1<=b,En=f.type,Jt=f.dismissible!==!1,pn=f.className||"",Dn=f.descriptionClassName||"",Gt=De.useMemo(()=>_.findIndex(yt=>yt.toastId===f.id)||0,[_,f.id]),qt=De.useMemo(()=>{var yt;return(yt=f.closeButton)!=null?yt:F},[f.closeButton,F]),bn=De.useMemo(()=>f.duration||q||pj,[f.duration,q]),Ln=De.useRef(0),Gn=De.useRef(0),Dr=De.useRef(0),Nn=De.useRef(null),[Ar,Rr]=H.split("-"),qn=De.useMemo(()=>_.reduce((yt,Vn,Wn)=>Wn>=Gt?yt:yt+Vn.height,0),[_,Gt]),st=_pe(),Xo=f.invert||d,Xr=En==="loading";Gn.current=De.useMemo(()=>Gt*ne+qn,[Gt,qn]),De.useEffect(()=>{kt.current=bn},[bn]),De.useEffect(()=>{ce(!0)},[]),De.useEffect(()=>{const yt=sn.current;if(yt){const Vn=yt.getBoundingClientRect().height;return Pn(Vn),y(Wn=>[{toastId:f.id,height:Vn,position:f.position},...Wn]),()=>y(Wn=>Wn.filter(Yn=>Yn.toastId!==f.id))}},[y,f.id]),De.useLayoutEffect(()=>{if(!ie)return;const yt=sn.current,Vn=yt.style.height;yt.style.height="auto";const Wn=yt.getBoundingClientRect().height;yt.style.height=Vn,Pn(Wn),y(Yn=>Yn.find(er=>er.toastId===f.id)?Yn.map(er=>er.toastId===f.id?{...er,height:Wn}:er):[{toastId:f.id,height:Wn,position:f.position},...Yn])},[ie,f.title,f.description,y,f.id,f.jsx,f.action,f.cancel]);const Fr=De.useCallback(()=>{ye(!0),un(Gn.current),y(yt=>yt.filter(Vn=>Vn.toastId!==f.id)),setTimeout(()=>{j(f)},Lpe)},[f,j,y,Gn]);De.useEffect(()=>{if(f.promise&&En==="loading"||f.duration===1/0||f.type==="loading")return;let yt;return N||g||st?(()=>{if(Dr.current<Ln.current){const Yn=new Date().getTime()-Ln.current;kt.current=kt.current-Yn}Dr.current=new Date().getTime()})():(()=>{kt.current!==1/0&&(Ln.current=new Date().getTime(),yt=setTimeout(()=>{f.onAutoClose==null||f.onAutoClose.call(f,f),Fr()},kt.current))})(),()=>clearTimeout(yt)},[N,g,f,En,st,Fr]),De.useEffect(()=>{f.delete&&(Fr(),f.onDismiss==null||f.onDismiss.call(f,f))},[Fr,f.delete]);function tt(){var yt;if(U?.loading){var Vn;return De.createElement("div",{className:Wl(V?.loader,f==null||(Vn=f.classNames)==null?void 0:Vn.loader,"sonner-loader"),"data-visible":En==="loading"},U.loading)}return De.createElement(ype,{className:Wl(V?.loader,f==null||(yt=f.classNames)==null?void 0:yt.loader),visible:En==="loading"})}const Qo=f.icon||U?.[En]||mpe(En);var Ir,Qr;return De.createElement("li",{tabIndex:0,ref:sn,className:Wl(L,pn,V?.toast,f==null||(e=f.classNames)==null?void 0:e.toast,V?.default,V?.[En],f==null||(n=f.classNames)==null?void 0:n[En]),"data-sonner-toast":"","data-rich-colors":(Ir=f.richColors)!=null?Ir:B,"data-styled":!(f.jsx||f.unstyled||p),"data-mounted":ie,"data-promise":!!f.promise,"data-swiped":it,"data-removed":ae,"data-visible":Wt,"data-y-position":Ar,"data-x-position":Rr,"data-index":k,"data-front":Ft,"data-swiping":we,"data-dismissible":Jt,"data-type":En,"data-invert":Xo,"data-swipe-out":Ie,"data-swipe-direction":se,"data-expanded":!!(N||re&&ie),style:{"--index":k,"--toasts-before":k,"--z-index":M.length-k,"--offset":`${ae?zt:Gn.current}px`,"--initial-height":re?"auto":`${Pt}px`,...D,...f.style},onDragEnd:()=>{Be(!1),Y(null),Nn.current=null},onPointerDown:yt=>{yt.button!==2&&(Xr||!Jt||(hn.current=new Date,un(Gn.current),yt.target.setPointerCapture(yt.pointerId),yt.target.tagName!=="BUTTON"&&(Be(!0),Nn.current={x:yt.clientX,y:yt.clientY})))},onPointerUp:()=>{var yt,Vn,Wn;if(Ie||!Jt)return;Nn.current=null;const Yn=Number(((yt=sn.current)==null?void 0:yt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),sr=Number(((Vn=sn.current)==null?void 0:Vn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),er=new Date().getTime()-((Wn=hn.current)==null?void 0:Wn.getTime()),en=J==="x"?Yn:sr,tr=Math.abs(en)/er;if(Math.abs(en)>=Dpe||tr>.11){un(Gn.current),f.onDismiss==null||f.onDismiss.call(f,f),te(J==="x"?Yn>0?"right":"left":sr>0?"down":"up"),Fr(),Ge(!0);return}else{var wt,Yt;(wt=sn.current)==null||wt.style.setProperty("--swipe-amount-x","0px"),(Yt=sn.current)==null||Yt.style.setProperty("--swipe-amount-y","0px")}Xe(!1),Be(!1),Y(null)},onPointerMove:yt=>{var Vn,Wn,Yn;if(!Nn.current||!Jt||((Vn=window.getSelection())==null?void 0:Vn.toString().length)>0)return;const er=yt.clientY-Nn.current.y,en=yt.clientX-Nn.current.x;var tr;const wt=(tr=t.swipeDirections)!=null?tr:Vpe(H);!J&&(Math.abs(en)>1||Math.abs(er)>1)&&Y(Math.abs(en)>Math.abs(er)?"x":"y");let Yt={x:0,y:0};const Pl=gi=>1/(1.5+Math.abs(gi)/20);if(J==="y"){if(wt.includes("top")||wt.includes("bottom"))if(wt.includes("top")&&er<0||wt.includes("bottom")&&er>0)Yt.y=er;else{const gi=er*Pl(er);Yt.y=Math.abs(gi)<Math.abs(er)?gi:er}}else if(J==="x"&&(wt.includes("left")||wt.includes("right")))if(wt.includes("left")&&en<0||wt.includes("right")&&en>0)Yt.x=en;else{const gi=en*Pl(en);Yt.x=Math.abs(gi)<Math.abs(en)?gi:en}(Math.abs(Yt.x)>0||Math.abs(Yt.y)>0)&&Xe(!0),(Wn=sn.current)==null||Wn.style.setProperty("--swipe-amount-x",`${Yt.x}px`),(Yn=sn.current)==null||Yn.style.setProperty("--swipe-amount-y",`${Yt.y}px`)}},qt&&!f.jsx&&En!=="loading"?De.createElement("button",{"aria-label":Q,"data-disabled":Xr,"data-close-button":!0,onClick:Xr||!Jt?()=>{}:()=>{Fr(),f.onDismiss==null||f.onDismiss.call(f,f)},className:Wl(V?.closeButton,f==null||(r=f.classNames)==null?void 0:r.closeButton)},(Qr=U?.close)!=null?Qr:Spe):null,(En||f.icon||f.promise)&&f.icon!==null&&(U?.[En]!==null||f.icon)?De.createElement("div",{"data-icon":"",className:Wl(V?.icon,f==null||(o=f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||tt():null,f.type!=="loading"?Qo:null):null,De.createElement("div",{"data-content":"",className:Wl(V?.content,f==null||(i=f.classNames)==null?void 0:i.content)},De.createElement("div",{"data-title":"",className:Wl(V?.title,f==null||(s=f.classNames)==null?void 0:s.title)},f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title),f.description?De.createElement("div",{"data-description":"",className:Wl(z,Dn,V?.description,f==null||(a=f.classNames)==null?void 0:a.description)},typeof f.description=="function"?f.description():f.description):null),De.isValidElement(f.cancel)?f.cancel:f.cancel&&K1(f.cancel)?De.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||R,onClick:yt=>{K1(f.cancel)&&Jt&&(f.cancel.onClick==null||f.cancel.onClick.call(f.cancel,yt),Fr())},className:Wl(V?.cancelButton,f==null||(l=f.classNames)==null?void 0:l.cancelButton)},f.cancel.label):null,De.isValidElement(f.action)?f.action:f.action&&K1(f.action)?De.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||I,onClick:yt=>{K1(f.action)&&(f.action.onClick==null||f.action.onClick.call(f.action,yt),!yt.defaultPrevented&&Fr())},className:Wl(V?.actionButton,f==null||(c=f.classNames)==null?void 0:c.actionButton)},f.action.label):null)};function mj(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Bpe(t,e){const n={};return[t,e].forEach((r,o)=>{const i=o===1,s=i?"--mobile-offset":"--offset",a=i?Npe:Mpe;function l(c){["top","right","bottom","left"].forEach(d=>{n[`${s}-${d}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${s}-${c}`]=a:n[`${s}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}const $pe=De.forwardRef(function(e,n){const{invert:r,position:o="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:a,className:l,offset:c,mobileOffset:d,theme:f="light",richColors:p,duration:g,style:y,visibleToasts:b=Ipe,toastOptions:_,dir:k=mj(),gap:M=Ppe,icons:N,containerAriaLabel:j="Notifications"}=e,[B,F]=De.useState([]),D=De.useMemo(()=>Array.from(new Set([o].concat(B.filter(se=>se.position).map(se=>se.position)))),[B,o]),[R,I]=De.useState([]),[L,z]=De.useState(!1),[q,H]=De.useState(!1),[ne,re]=De.useState(f!=="system"?f:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),V=De.useRef(null),U=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),Q=De.useRef(null),J=De.useRef(!1),Y=De.useCallback(se=>{F(te=>{var ie;return(ie=te.find(ce=>ce.id===se.id))!=null&&ie.delete||ys.dismiss(se.id),te.filter(({id:ce})=>ce!==se.id)})},[]);return De.useEffect(()=>ys.subscribe(se=>{if(se.dismiss){requestAnimationFrame(()=>{F(te=>te.map(ie=>ie.id===se.id?{...ie,delete:!0}:ie))});return}setTimeout(()=>{E_.flushSync(()=>{F(te=>{const ie=te.findIndex(ce=>ce.id===se.id);return ie!==-1?[...te.slice(0,ie),{...te[ie],...se},...te.slice(ie+1)]:[se,...te]})})})}),[B]),De.useEffect(()=>{if(f!=="system"){re(f);return}if(f==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?re("dark"):re("light")),typeof window>"u")return;const se=window.matchMedia("(prefers-color-scheme: dark)");try{se.addEventListener("change",({matches:te})=>{re(te?"dark":"light")})}catch{se.addListener(({matches:ie})=>{try{re(ie?"dark":"light")}catch(ce){console.error(ce)}})}},[f]),De.useEffect(()=>{B.length<=1&&z(!1)},[B]),De.useEffect(()=>{const se=te=>{var ie;if(i.every(ye=>te[ye]||te.code===ye)){var ae;z(!0),(ae=V.current)==null||ae.focus()}te.code==="Escape"&&(document.activeElement===V.current||(ie=V.current)!=null&&ie.contains(document.activeElement))&&z(!1)};return document.addEventListener("keydown",se),()=>document.removeEventListener("keydown",se)},[i]),De.useEffect(()=>{if(V.current)return()=>{Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null,J.current=!1)}},[V.current]),De.createElement("section",{ref:n,"aria-label":`${j} ${U}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},D.map((se,te)=>{var ie;const[ce,ae]=se.split("-");return B.length?De.createElement("ol",{key:se,dir:k==="auto"?mj():k,tabIndex:-1,ref:V,className:l,"data-sonner-toaster":!0,"data-sonner-theme":ne,"data-y-position":ce,"data-x-position":ae,style:{"--front-toast-height":`${((ie=R[0])==null?void 0:ie.height)||0}px`,"--width":`${Ope}px`,"--gap":`${M}px`,...y,...Bpe(c,d)},onBlur:ye=>{J.current&&!ye.currentTarget.contains(ye.relatedTarget)&&(J.current=!1,Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null))},onFocus:ye=>{ye.target instanceof HTMLElement&&ye.target.dataset.dismissible==="false"||J.current||(J.current=!0,Q.current=ye.relatedTarget)},onMouseEnter:()=>z(!0),onMouseMove:()=>z(!0),onMouseLeave:()=>{q||z(!1)},onDragEnd:()=>z(!1),onPointerDown:ye=>{ye.target instanceof HTMLElement&&ye.target.dataset.dismissible==="false"||H(!0)},onPointerUp:()=>H(!1)},B.filter(ye=>!ye.position&&te===0||ye.position===se).map((ye,we)=>{var Be,Ie;return De.createElement(jpe,{key:ye.id,icons:N,index:we,toast:ye,defaultRichColors:p,duration:(Be=_?.duration)!=null?Be:g,className:_?.className,descriptionClassName:_?.descriptionClassName,invert:r,visibleToasts:b,closeButton:(Ie=_?.closeButton)!=null?Ie:a,interacting:q,position:se,style:_?.style,unstyled:_?.unstyled,classNames:_?.classNames,cancelButtonStyle:_?.cancelButtonStyle,actionButtonStyle:_?.actionButtonStyle,closeButtonAriaLabel:_?.closeButtonAriaLabel,removeToast:Y,toasts:B.filter(Ge=>Ge.position==ye.position),heights:R.filter(Ge=>Ge.position==ye.position),setHeights:I,expandByDefault:s,gap:M,expanded:L,swipeDirections:e.swipeDirections})})):null}))}),nU=t=>Zn[t];let qs=!1;async function Fpe(){const t=await Zn.SyncedQueue.toArray();let e=!1;for(const n of t){try{const r=NV(Sm,n.table,n.id);if(n.type==="add"||n.type==="update"){console.log(n.table);const i=await nU(n.table).get(n.id);i?(await jV(r,{...i,updatedAt:BV()}),e=!0,qs=!0):(qs=!1,Kr.success("table id not defined",{duration:1/0,description:"error to push doc in firestore"}))}else n.type==="delete"&&(await _de(r),await jV(NV(Sm,"DeletedItems",n.id),{id:n.id,table:n.table,updatedAt:BV()}),qs=!0,e=!0)}catch(r){qs=!1,Kr.error("error occured during dexie to firestore sync",{description:r,duration:1/0})}e&&await Zn.SyncedQueue.delete(n.id)}e&&Kr.success("synced to db")}async function Hpe(){const t=await Zn.SyncMeta.get("lastSyncedAt"),e=typeof t?.value=="string"?new Date(t?.value):new Date(0);if(e instanceof Date&&!isNaN(e.getTime())){try{const n=H1(F1(Sm,"Items"),U1("updatedAt",">",ir.fromDate(new Date(e))));let r=!1;const o=await G1(n);if(o.docs.length!==0){for(const i of o.docs){const s=i.data();await Zn.Items.put({id:i.id,title:s.title||"",guess:s.guess||"",content:s.content||"",renderDate:s.renderDate||Date.now(),renderRange:s.renderRange||0,classId:s.classId||"",bookId:s.bookId||"",priority:s.priority||"low"}),r=!0}r&&Kr.success("Items",{description:`${o.docs.length+1} Synced`}),qs=!0}}catch(n){qs=!1,console.error(n),Kr.error("Error Occured of Items Fetched")}try{const n=H1(F1(Sm,"DeletedItems"),U1("updatedAt",">",ir.fromDate(new Date(e))));let r=!1;const o=await G1(n);if(o.docs.length!==0){for(const i of o.docs){const s=i.data();await nU(s.table).delete(s.id),r=!0}r&&Kr.success("deletedItems",{description:`${o.docs.length+1} Synced`}),qs=!0}}catch(n){qs=!1,console.error(n),Kr.error("Error Occured Fetched Deleted Items")}try{const n=H1(F1(Sm,"ClassorBook"),U1("updatedAt",">",ir.fromDate(new Date(e))));let r=!1;const o=await G1(n);if(o.docs.length!==0){for(const i of o.docs){const s=i.data();await Zn.ClassorBook.put({id:s.id,classId:s.classId,bookId:s.bookId}),r=!0}r&&Kr.success("classorbook",{description:`${o.docs.length+1} Synced`}),qs=!0}}catch(n){qs=!1,console.error(n),Kr.error("Error occured classorbook fetched")}try{const n=H1(F1(Sm,"Icons"),U1("updatedAt",">",ir.fromDate(new Date(e))));let r=!1;const o=await G1(n);if(o.docs.length!==0){for(const i of o.docs){const s=i.data();await Zn.Icons.put({value:s.value,url:s.url}),r=!0}r&&Kr.success("Icons",{description:`${o.docs.length+1} Synced`}),qs=!0}}catch(n){qs=!1,console.error(n),Kr.error("Error Occured Icons Fetched")}}}const Upe=async()=>{await Zn.SyncMeta.get("lastSyncedAt")||await Zn.SyncMeta.put({key:"lastSyncedAt",value:new Date("2025-01-01").toISOString()})};let qT=!1;async function VC(t){if(!qT){qT=!0,t(!0);try{await Fpe(),await Hpe(),qs&&(console.log("work"),await Zn.SyncMeta.put({key:"lastSyncedAt",value:new Date().toISOString()})),setTimeout(()=>{t(!1),qT=!1},500)}catch(e){console.error("❌ Sync failed:",e),Kr.error("Sync error",{description:"Data not fully synced"})}}}function ig({keyName:t,onClick:e}){const[n,r]=E.useState(null);return E.useEffect(()=>{(async()=>{try{if(!t)return;const i=await Zn.Icons.where("value").equals(t).first(),s=await Zn.Icons.where("value").equals("placeholder").first();r(i?.url||s?.url||null)}catch(i){console.error("Error fetching icon:",i),r(null)}})()},[t]),n?w.jsx("img",{onClick:e,className:"h-7 aspect-square",src:n,alt:t}):null}function zpe(){const[t,e]=E.useState(null),{setOpenSidebar:n,setPageTitle:r,setPageGuess:o,setOpenCommandSearch:i,setNanoPageId:s,setPageContent:a,setPagePriority:l,setSelectedFilter:c,syncLoading:d,setSyncLoading:f,setOpenIcon:p}=_l(),g=U_(()=>Zn.ClassorBook.toArray(),[],[]),y=[{title:"Sync",icon:d?Gte:Vte,onclick:()=>{VC(f)}},{title:"Search",icon:i8,onclick:()=>{i(!0)},shortcutKey:"s"},{title:"Icons",icon:Fte,onclick:()=>{p(!0)}},{title:"All Items",icon:Kte,onclick:()=>{c("all")}},{title:"Add Item",icon:Bte,onclick:()=>{n(!0),r(""),o(""),a('[{type: "paragraph",content: [{type: "text",text: "",styles: {},},],},]'),l("low"),s(R7())},shortcutKey:"a"}],b=async()=>{try{await Ofe(hj,fpe)}catch(j){console.error("Google login failed:",j)}};E.useEffect(()=>{const j=hfe(hj,B=>{e(B),VC(f)});return()=>j()},[]);const[_,k]=E.useState({}),M=j=>{k(B=>({...B,[j]:!B[j]}))},N=Array.from(new Set(g?.map(j=>j.classId)));return w.jsxs(rse,{children:[w.jsx(sse,{children:w.jsxs(ase,{children:[w.jsx(C5,{children:"BSP Note 1.0.10"}),w.jsxs(lse,{children:[w.jsx(NT,{children:y.map(j=>w.jsx(S5,{children:w.jsx(use,{asChild:!0,children:w.jsxs("div",{onClick:j.onclick,"data-key":j?.shortcutKey,children:[d&&j.title==="Sync"?w.jsx(j.icon,{className:"animate-spin"}):w.jsx(j.icon,{}),w.jsx("span",{className:"select-none",children:j.title})]})})},j.title))}),w.jsx("hr",{className:"my-5"}),w.jsx(C5,{children:"Pages"}),w.jsx(NT,{className:"select-none",children:N?.map(j=>w.jsxs("div",{className:"mb-1",children:[w.jsxs("div",{onClick:()=>M(j),className:"flex items-center justify-between cursor-pointer px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-800",children:[w.jsxs("div",{className:"flex gap-2 items-center",children:[w.jsx(ig,{keyName:j}),w.jsx("span",{className:"font-bold",children:j})]}),w.jsx("span",{className:"text-sm tracking-wider",children:_[j]?w.jsx(Ste,{}):w.jsx(xte,{})})]}),_[j]&&w.jsx("div",{className:"ml-4 mt-1 pl-2",children:g.filter(B=>B.classId===j)?.map(B=>w.jsx("div",{onClick:()=>{c(B.bookId)},className:"cursor-pointer px-2 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-800",children:w.jsxs("div",{className:"flex gap-2 items-center",children:[w.jsx(ig,{keyName:B.bookId}),w.jsx("span",{className:"font-bold tracking-wide",children:B.bookId})]})},B.bookId))})]},j))})]})]})}),w.jsx(ise,{children:w.jsx(NT,{children:w.jsx(S5,{children:w.jsxs("div",{onClick:()=>b(),className:"flex gap-2 hover:bg-neutral-400/30 p-2 rounded-md",children:[w.jsx(ene,{}),t?"Process Done":"Login In"]})})})})]})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Ud(t,e){return typeof t=="function"?t(e):t}function Qs(t,e){return n=>{e.setState(r=>({...r,[t]:Ud(n,r[t])}))}}function fx(t){return t instanceof Function}function Gpe(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function qpe(t,e){const n=[],r=o=>{o.forEach(i=>{n.push(i);const s=e(i);s!=null&&s.length&&r(s)})};return r(t),n}function Vt(t,e,n){let r=[],o;return i=>{let s;n.key&&n.debug&&(s=Date.now());const a=t(i);if(!(a.length!==r.length||a.some((d,f)=>r[f]!==d)))return o;r=a;let c;if(n.key&&n.debug&&(c=Date.now()),o=e(...a),n==null||n.onChange==null||n.onChange(o),n.key&&n.debug&&n!=null&&n.debug()){const d=Math.round((Date.now()-s)*100)/100,f=Math.round((Date.now()-c)*100)/100,p=f/16,g=(y,b)=>{for(y=String(y);y.length<b;)y=" "+y;return y};console.info(`%c⏱ ${g(f,5)} /${g(d,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*p,120))}deg 100% 31%);`,n?.key)}return o}}function jt(t,e,n,r){return{debug:()=>{var o;return(o=t?.debugAll)!=null?o:t[e]},key:!1,onChange:r}}function Kpe(t,e,n,r){const o=()=>{var s;return(s=i.getValue())!=null?s:t.options.renderFallbackValue},i={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:o,getContext:Vt(()=>[t,n,e,i],(s,a,l,c)=>({table:s,column:a,row:l,cell:c,getValue:c.getValue,renderValue:c.renderValue}),jt(t.options,"debugCells"))};return t._features.forEach(s=>{s.createCell==null||s.createCell(i,n,e,t)},{}),i}function Wpe(t,e,n,r){var o,i;const a={...t._getDefaultColumnDef(),...e},l=a.accessorKey;let c=(o=(i=a.id)!=null?i:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?o:typeof a.header=="string"?a.header:void 0,d;if(a.accessorFn?d=a.accessorFn:l&&(l.includes(".")?d=p=>{let g=p;for(const b of l.split(".")){var y;g=(y=g)==null?void 0:y[b]}return g}:d=p=>p[a.accessorKey]),!c)throw new Error;let f={id:`${String(c)}`,accessorFn:d,parent:r,depth:n,columnDef:a,columns:[],getFlatColumns:Vt(()=>[!0],()=>{var p;return[f,...(p=f.columns)==null?void 0:p.flatMap(g=>g.getFlatColumns())]},jt(t.options,"debugColumns")),getLeafColumns:Vt(()=>[t._getOrderColumnsFn()],p=>{var g;if((g=f.columns)!=null&&g.length){let y=f.columns.flatMap(b=>b.getLeafColumns());return p(y)}return[f]},jt(t.options,"debugColumns"))};for(const p of t._features)p.createColumn==null||p.createColumn(f,t);return f}const Ei="debugHeaders";function gj(t,e,n){var r;let i={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const s=[],a=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(a),s.push(l)};return a(i),s},getContext:()=>({table:t,header:i,column:e})};return t._features.forEach(s=>{s.createHeader==null||s.createHeader(i,t)}),i}const Ype={createTable:t=>{t.getHeaderGroups=Vt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,o)=>{var i,s;const a=(i=r?.map(f=>n.find(p=>p.id===f)).filter(Boolean))!=null?i:[],l=(s=o?.map(f=>n.find(p=>p.id===f)).filter(Boolean))!=null?s:[],c=n.filter(f=>!(r!=null&&r.includes(f.id))&&!(o!=null&&o.includes(f.id)));return W1(e,[...a,...c,...l],t)},jt(t.options,Ei)),t.getCenterHeaderGroups=Vt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,o)=>(n=n.filter(i=>!(r!=null&&r.includes(i.id))&&!(o!=null&&o.includes(i.id))),W1(e,n,t,"center")),jt(t.options,Ei)),t.getLeftHeaderGroups=Vt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var o;const i=(o=r?.map(s=>n.find(a=>a.id===s)).filter(Boolean))!=null?o:[];return W1(e,i,t,"left")},jt(t.options,Ei)),t.getRightHeaderGroups=Vt(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var o;const i=(o=r?.map(s=>n.find(a=>a.id===s)).filter(Boolean))!=null?o:[];return W1(e,i,t,"right")},jt(t.options,Ei)),t.getFooterGroups=Vt(()=>[t.getHeaderGroups()],e=>[...e].reverse(),jt(t.options,Ei)),t.getLeftFooterGroups=Vt(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),jt(t.options,Ei)),t.getCenterFooterGroups=Vt(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),jt(t.options,Ei)),t.getRightFooterGroups=Vt(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),jt(t.options,Ei)),t.getFlatHeaders=Vt(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),jt(t.options,Ei)),t.getLeftFlatHeaders=Vt(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),jt(t.options,Ei)),t.getCenterFlatHeaders=Vt(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),jt(t.options,Ei)),t.getRightFlatHeaders=Vt(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),jt(t.options,Ei)),t.getCenterLeafHeaders=Vt(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),jt(t.options,Ei)),t.getLeftLeafHeaders=Vt(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),jt(t.options,Ei)),t.getRightLeafHeaders=Vt(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),jt(t.options,Ei)),t.getLeafHeaders=Vt(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var o,i,s,a,l,c;return[...(o=(i=e[0])==null?void 0:i.headers)!=null?o:[],...(s=(a=n[0])==null?void 0:a.headers)!=null?s:[],...(l=(c=r[0])==null?void 0:c.headers)!=null?l:[]].map(d=>d.getLeafHeaders()).flat()},jt(t.options,Ei))}};function W1(t,e,n,r){var o,i;let s=0;const a=function(p,g){g===void 0&&(g=1),s=Math.max(s,g),p.filter(y=>y.getIsVisible()).forEach(y=>{var b;(b=y.columns)!=null&&b.length&&a(y.columns,g+1)},0)};a(t);let l=[];const c=(p,g)=>{const y={depth:g,id:[r,`${g}`].filter(Boolean).join("_"),headers:[]},b=[];p.forEach(_=>{const k=[...b].reverse()[0],M=_.column.depth===y.depth;let N,j=!1;if(M&&_.column.parent?N=_.column.parent:(N=_.column,j=!0),k&&k?.column===N)k.subHeaders.push(_);else{const B=gj(n,N,{id:[r,g,N.id,_?.id].filter(Boolean).join("_"),isPlaceholder:j,placeholderId:j?`${b.filter(F=>F.column===N).length}`:void 0,depth:g,index:b.length});B.subHeaders.push(_),b.push(B)}y.headers.push(_),_.headerGroup=y}),l.push(y),g>0&&c(b,g-1)},d=e.map((p,g)=>gj(n,p,{depth:s,index:g}));c(d,s-1),l.reverse();const f=p=>p.filter(y=>y.column.getIsVisible()).map(y=>{let b=0,_=0,k=[0];y.subHeaders&&y.subHeaders.length?(k=[],f(y.subHeaders).forEach(N=>{let{colSpan:j,rowSpan:B}=N;b+=j,k.push(B)})):b=1;const M=Math.min(...k);return _=_+M,y.colSpan=b,y.rowSpan=_,{colSpan:b,rowSpan:_}});return f((o=(i=l[0])==null?void 0:i.headers)!=null?o:[]),l}const Xpe=(t,e,n,r,o,i,s)=>{let a={id:e,index:r,original:n,depth:o,parentId:s,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(a._valuesCache.hasOwnProperty(l))return a._valuesCache[l];const c=t.getColumn(l);if(c!=null&&c.accessorFn)return a._valuesCache[l]=c.accessorFn(a.original,r),a._valuesCache[l]},getUniqueValues:l=>{if(a._uniqueValuesCache.hasOwnProperty(l))return a._uniqueValuesCache[l];const c=t.getColumn(l);if(c!=null&&c.accessorFn)return c.columnDef.getUniqueValues?(a._uniqueValuesCache[l]=c.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[l]):(a._uniqueValuesCache[l]=[a.getValue(l)],a._uniqueValuesCache[l])},renderValue:l=>{var c;return(c=a.getValue(l))!=null?c:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>qpe(a.subRows,l=>l.subRows),getParentRow:()=>a.parentId?t.getRow(a.parentId,!0):void 0,getParentRows:()=>{let l=[],c=a;for(;;){const d=c.getParentRow();if(!d)break;l.push(d),c=d}return l.reverse()},getAllCells:Vt(()=>[t.getAllLeafColumns()],l=>l.map(c=>Kpe(t,a,c,c.id)),jt(t.options,"debugRows")),_getAllCellsByColumnId:Vt(()=>[a.getAllCells()],l=>l.reduce((c,d)=>(c[d.column.id]=d,c),{}),jt(t.options,"debugRows"))};for(let l=0;l<t._features.length;l++){const c=t._features[l];c==null||c.createRow==null||c.createRow(a,t)}return a},Qpe={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},rU=(t,e,n)=>{var r,o;const i=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((o=t.getValue(e))==null||(o=o.toString())==null||(o=o.toLowerCase())==null)&&o.includes(i))};rU.autoRemove=t=>bl(t);const oU=(t,e,n)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(n))};oU.autoRemove=t=>bl(t);const iU=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===n?.toLowerCase()};iU.autoRemove=t=>bl(t);const sU=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};sU.autoRemove=t=>bl(t);const aU=(t,e,n)=>!n.some(r=>{var o;return!((o=t.getValue(e))!=null&&o.includes(r))});aU.autoRemove=t=>bl(t)||!(t!=null&&t.length);const lU=(t,e,n)=>n.some(r=>{var o;return(o=t.getValue(e))==null?void 0:o.includes(r)});lU.autoRemove=t=>bl(t)||!(t!=null&&t.length);const cU=(t,e,n)=>t.getValue(e)===n;cU.autoRemove=t=>bl(t);const uU=(t,e,n)=>t.getValue(e)==n;uU.autoRemove=t=>bl(t);const $N=(t,e,n)=>{let[r,o]=n;const i=t.getValue(e);return i>=r&&i<=o};$N.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,o=typeof n!="number"?parseFloat(n):n,i=e===null||Number.isNaN(r)?-1/0:r,s=n===null||Number.isNaN(o)?1/0:o;if(i>s){const a=i;i=s,s=a}return[i,s]};$N.autoRemove=t=>bl(t)||bl(t[0])&&bl(t[1]);const cu={includesString:rU,includesStringSensitive:oU,equalsString:iU,arrIncludes:sU,arrIncludesAll:aU,arrIncludesSome:lU,equals:cU,weakEquals:uU,inNumberRange:$N};function bl(t){return t==null||t===""}const Zpe={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:Qs("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);return typeof r=="string"?cu.includesString:typeof r=="number"?cu.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?cu.equals:Array.isArray(r)?cu.arrIncludes:cu.weakEquals},t.getFilterFn=()=>{var n,r;return fx(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:cu[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,o;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((o=e.options.enableFilters)!=null?o:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(o=>o.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const o=t.getFilterFn(),i=r?.find(d=>d.id===t.id),s=Ud(n,i?i.value:void 0);if(yj(o,s,t)){var a;return(a=r?.filter(d=>d.id!==t.id))!=null?a:[]}const l={id:t.id,value:s};if(i){var c;return(c=r?.map(d=>d.id===t.id?l:d))!=null?c:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=o=>{var i;return(i=Ud(e,o))==null?void 0:i.filter(s=>{const a=n.find(l=>l.id===s.id);if(a){const l=a.getFilterFn();if(yj(l,s.value,a))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function yj(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const Jpe=(t,e,n)=>n.reduce((r,o)=>{const i=o.getValue(t);return r+(typeof i=="number"?i:0)},0),eme=(t,e,n)=>{let r;return n.forEach(o=>{const i=o.getValue(t);i!=null&&(r>i||r===void 0&&i>=i)&&(r=i)}),r},tme=(t,e,n)=>{let r;return n.forEach(o=>{const i=o.getValue(t);i!=null&&(r<i||r===void 0&&i>=i)&&(r=i)}),r},nme=(t,e,n)=>{let r,o;return n.forEach(i=>{const s=i.getValue(t);s!=null&&(r===void 0?s>=s&&(r=o=s):(r>s&&(r=s),o<s&&(o=s)))}),[r,o]},rme=(t,e)=>{let n=0,r=0;if(e.forEach(o=>{let i=o.getValue(t);i!=null&&(i=+i)>=i&&(++n,r+=i)}),n)return r/n},ome=(t,e)=>{if(!e.length)return;const n=e.map(i=>i.getValue(t));if(!Gpe(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),o=n.sort((i,s)=>i-s);return n.length%2!==0?o[r]:(o[r-1]+o[r])/2},ime=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),sme=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,ame=(t,e)=>e.length,KT={sum:Jpe,min:eme,max:tme,extent:nme,mean:rme,median:ome,unique:ime,uniqueCount:sme,count:ame},lme={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:Qs("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n?.getValue(t.id);if(typeof r=="number")return KT.sum;if(Object.prototype.toString.call(r)==="[object Date]")return KT.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return fx(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:KT[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var o;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((o=n.subRows)!=null&&o.length)}}};function cme(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(i=>!e.includes(i.id));return n==="remove"?r:[...e.map(i=>t.find(s=>s.id===i)).filter(Boolean),...r]}const ume={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:Qs("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=Vt(n=>[Sv(e,n)],n=>n.findIndex(r=>r.id===t.id),jt(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=Sv(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const o=Sv(e,n);return((r=o[o.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=Vt(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>o=>{let i=[];if(!(e!=null&&e.length))i=o;else{const s=[...e],a=[...o];for(;a.length&&s.length;){const l=s.shift(),c=a.findIndex(d=>d.id===l);c>-1&&i.push(a.splice(c,1)[0])}i=[...i,...a]}return cme(i,n,r)},jt(t.options,"debugTable"))}},WT=()=>({left:[],right:[]}),dme={getInitialState:t=>({columnPinning:WT(),...t}),getDefaultOptions:t=>({onColumnPinningChange:Qs("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(o=>o.id).filter(Boolean);e.setColumnPinning(o=>{var i,s;if(n==="right"){var a,l;return{left:((a=o?.left)!=null?a:[]).filter(f=>!(r!=null&&r.includes(f))),right:[...((l=o?.right)!=null?l:[]).filter(f=>!(r!=null&&r.includes(f))),...r]}}if(n==="left"){var c,d;return{left:[...((c=o?.left)!=null?c:[]).filter(f=>!(r!=null&&r.includes(f))),...r],right:((d=o?.right)!=null?d:[]).filter(f=>!(r!=null&&r.includes(f)))}}return{left:((i=o?.left)!=null?i:[]).filter(f=>!(r!=null&&r.includes(f))),right:((s=o?.right)!=null?s:[]).filter(f=>!(r!=null&&r.includes(f)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var o,i,s;return((o=r.columnDef.enablePinning)!=null?o:!0)&&((i=(s=e.options.enableColumnPinning)!=null?s:e.options.enablePinning)!=null?i:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(a=>a.id),{left:r,right:o}=e.getState().columnPinning,i=n.some(a=>r?.includes(a)),s=n.some(a=>o?.includes(a));return i?"left":s?"right":!1},t.getPinnedIndex=()=>{var n,r;const o=t.getIsPinned();return o?(n=(r=e.getState().columnPinning)==null||(r=r[o])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=Vt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,o)=>{const i=[...r??[],...o??[]];return n.filter(s=>!i.includes(s.column.id))},jt(e.options,"debugRows")),t.getLeftVisibleCells=Vt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(i=>n.find(s=>s.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),jt(e.options,"debugRows")),t.getRightVisibleCells=Vt(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(i=>n.find(s=>s.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),jt(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?WT():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:WT())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var o,i;return!!((o=r.left)!=null&&o.length||(i=r.right)!=null&&i.length)}return!!((n=r[e])!=null&&n.length)},t.getLeftLeafColumns=Vt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(o=>o.id===r)).filter(Boolean),jt(t.options,"debugColumns")),t.getRightLeafColumns=Vt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(o=>o.id===r)).filter(Boolean),jt(t.options,"debugColumns")),t.getCenterLeafColumns=Vt(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const o=[...n??[],...r??[]];return e.filter(i=>!o.includes(i.id))},jt(t.options,"debugColumns"))}};function fme(t){return t||(typeof document<"u"?document:null)}const Y1={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},YT=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),hme={getDefaultColumnDef:()=>Y1,getInitialState:t=>({columnSizing:{},columnSizingInfo:YT(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Qs("columnSizing",t),onColumnSizingInfoChange:Qs("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,o;const i=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:Y1.minSize,(r=i??t.columnDef.size)!=null?r:Y1.size),(o=t.columnDef.maxSize)!=null?o:Y1.maxSize)},t.getStart=Vt(n=>[n,Sv(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((o,i)=>o+i.getSize(),0),jt(e.options,"debugColumns")),t.getAfter=Vt(n=>[n,Sv(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((o,i)=>o+i.getSize(),0),jt(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...o}=n;return o})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=o=>{if(o.subHeaders.length)o.subHeaders.forEach(r);else{var i;n+=(i=o.column.getSize())!=null?i:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),o=r?.getCanResize();return i=>{if(!r||!o||(i.persist==null||i.persist(),XT(i)&&i.touches&&i.touches.length>1))return;const s=t.getSize(),a=t?t.getLeafHeaders().map(k=>[k.column.id,k.column.getSize()]):[[r.id,r.getSize()]],l=XT(i)?Math.round(i.touches[0].clientX):i.clientX,c={},d=(k,M)=>{typeof M=="number"&&(e.setColumnSizingInfo(N=>{var j,B;const F=e.options.columnResizeDirection==="rtl"?-1:1,D=(M-((j=N?.startOffset)!=null?j:0))*F,R=Math.max(D/((B=N?.startSize)!=null?B:0),-.999999);return N.columnSizingStart.forEach(I=>{let[L,z]=I;c[L]=Math.round(Math.max(z+z*R,0)*100)/100}),{...N,deltaOffset:D,deltaPercentage:R}}),(e.options.columnResizeMode==="onChange"||k==="end")&&e.setColumnSizing(N=>({...N,...c})))},f=k=>d("move",k),p=k=>{d("end",k),e.setColumnSizingInfo(M=>({...M,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},g=fme(n),y={moveHandler:k=>f(k.clientX),upHandler:k=>{g?.removeEventListener("mousemove",y.moveHandler),g?.removeEventListener("mouseup",y.upHandler),p(k.clientX)}},b={moveHandler:k=>(k.cancelable&&(k.preventDefault(),k.stopPropagation()),f(k.touches[0].clientX),!1),upHandler:k=>{var M;g?.removeEventListener("touchmove",b.moveHandler),g?.removeEventListener("touchend",b.upHandler),k.cancelable&&(k.preventDefault(),k.stopPropagation()),p((M=k.touches[0])==null?void 0:M.clientX)}},_=pme()?{passive:!1}:!1;XT(i)?(g?.addEventListener("touchmove",b.moveHandler,_),g?.addEventListener("touchend",b.upHandler,_)):(g?.addEventListener("mousemove",y.moveHandler,_),g?.addEventListener("mouseup",y.upHandler,_)),e.setColumnSizingInfo(k=>({...k,startOffset:l,startSize:s,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?YT():(n=t.initialState.columnSizingInfo)!=null?n:YT())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,o)=>r+o.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,o)=>r+o.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,o)=>r+o.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,o)=>r+o.getSize(),0))!=null?e:0}}};let X1=null;function pme(){if(typeof X1=="boolean")return X1;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return X1=t,X1}function XT(t){return t.type==="touchstart"}const mme={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:Qs("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const o=t.columns;return(n=o.length?o.some(i=>i.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=Vt(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),jt(e.options,"debugRows")),t.getVisibleCells=Vt(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,o)=>[...n,...r,...o],jt(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>Vt(()=>[r(),r().filter(o=>o.getIsVisible()).map(o=>o.id).join("_")],o=>o.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),jt(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((o,i)=>({...o,[i.id]:n||!(i.getCanHide!=null&&i.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function Sv(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const gme={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},yme={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:Qs("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,o,i;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((o=e.options.enableFilters)!=null?o:!0)&&((i=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?i:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>cu.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return fx(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:cu[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},vme={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:Qs("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,o;if(!e){t._queue(()=>{e=!0});return}if((r=(o=t.options.autoResetAll)!=null?o:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var o,i;t.setExpanded(r?{}:(o=(i=t.initialState)==null?void 0:i.expanded)!=null?o:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(o=>!o.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(i=>{const s=i.split(".");r=Math.max(r,s.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var o;const i=r===!0?!0:!!(r!=null&&r[t.id]);let s={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(a=>{s[a]=!0}):s=r,n=(o=n)!=null?o:!i,!i&&n)return{...s,[t.id]:!0};if(i&&!n){const{[t.id]:a,...l}=s;return l}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r?.[t.id])},t.getCanExpand=()=>{var n,r,o;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((o=t.subRows)!=null&&o.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},bR=0,wR=10,QT=()=>({pageIndex:bR,pageSize:wR}),bme={getInitialState:t=>({...t,pagination:{...QT(),...t?.pagination}}),getDefaultOptions:t=>({onPaginationChange:Qs("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,o;if(!e){t._queue(()=>{e=!0});return}if((r=(o=t.options.autoResetAll)!=null?o:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const o=i=>Ud(r,i);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(o)},t.resetPagination=r=>{var o;t.setPagination(r?QT():(o=t.initialState.pagination)!=null?o:QT())},t.setPageIndex=r=>{t.setPagination(o=>{let i=Ud(r,o.pageIndex);const s=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return i=Math.max(0,Math.min(i,s)),{...o,pageIndex:i}})},t.resetPageIndex=r=>{var o,i;t.setPageIndex(r?bR:(o=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?o:bR)},t.resetPageSize=r=>{var o,i;t.setPageSize(r?wR:(o=(i=t.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?o:wR)},t.setPageSize=r=>{t.setPagination(o=>{const i=Math.max(1,Ud(r,o.pageSize)),s=o.pageSize*o.pageIndex,a=Math.floor(s/i);return{...o,pageIndex:a,pageSize:i}})},t.setPageCount=r=>t.setPagination(o=>{var i;let s=Ud(r,(i=t.options.pageCount)!=null?i:-1);return typeof s=="number"&&(s=Math.max(-1,s)),{...o,pageCount:s}}),t.getPageOptions=Vt(()=>[t.getPageCount()],r=>{let o=[];return r&&r>0&&(o=[...new Array(r)].fill(null).map((i,s)=>s)),o},jt(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,o=t.getPageCount();return o===-1?!0:o===0?!1:r<o-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},ZT=()=>({top:[],bottom:[]}),wme={getInitialState:t=>({rowPinning:ZT(),...t}),getDefaultOptions:t=>({onRowPinningChange:Qs("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,o)=>{const i=r?t.getLeafRows().map(l=>{let{id:c}=l;return c}):[],s=o?t.getParentRows().map(l=>{let{id:c}=l;return c}):[],a=new Set([...s,t.id,...i]);e.setRowPinning(l=>{var c,d;if(n==="bottom"){var f,p;return{top:((f=l?.top)!=null?f:[]).filter(b=>!(a!=null&&a.has(b))),bottom:[...((p=l?.bottom)!=null?p:[]).filter(b=>!(a!=null&&a.has(b))),...Array.from(a)]}}if(n==="top"){var g,y;return{top:[...((g=l?.top)!=null?g:[]).filter(b=>!(a!=null&&a.has(b))),...Array.from(a)],bottom:((y=l?.bottom)!=null?y:[]).filter(b=>!(a!=null&&a.has(b)))}}return{top:((c=l?.top)!=null?c:[]).filter(b=>!(a!=null&&a.has(b))),bottom:((d=l?.bottom)!=null?d:[]).filter(b=>!(a!=null&&a.has(b)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:o}=e.options;return typeof r=="function"?r(t):(n=r??o)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:o}=e.getState().rowPinning,i=n.some(a=>r?.includes(a)),s=n.some(a=>o?.includes(a));return i?"top":s?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const o=t.getIsPinned();if(!o)return-1;const i=(n=o==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(s=>{let{id:a}=s;return a});return(r=i?.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?ZT():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:ZT())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var o,i;return!!((o=r.top)!=null&&o.length||(i=r.bottom)!=null&&i.length)}return!!((n=r[e])!=null&&n.length)},t._getPinnedRows=(e,n,r)=>{var o;return((o=t.options.keepPinnedRows)==null||o?(n??[]).map(s=>{const a=t.getRow(s,!0);return a.getIsAllParentsExpanded()?a:null}):(n??[]).map(s=>e.find(a=>a.id===s))).filter(Boolean).map(s=>({...s,position:r}))},t.getTopRows=Vt(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),jt(t.options,"debugRows")),t.getBottomRows=Vt(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),jt(t.options,"debugRows")),t.getCenterRows=Vt(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const o=new Set([...n??[],...r??[]]);return e.filter(i=>!o.has(i.id))},jt(t.options,"debugRows"))}},Cme={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:Qs("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},o=t.getPreGroupedRowModel().flatRows;return e?o.forEach(i=>{i.getCanSelect()&&(r[i.id]=!0)}):o.forEach(i=>{delete r[i.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),o={...n};return t.getRowModel().rows.forEach(i=>{CR(o,i.id,r,!0,t)}),o}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=Vt(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?JT(t,n):{rows:[],flatRows:[],rowsById:{}},jt(t.options,"debugTable")),t.getFilteredSelectedRowModel=Vt(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?JT(t,n):{rows:[],flatRows:[],rowsById:{}},jt(t.options,"debugTable")),t.getGroupedSelectedRowModel=Vt(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?JT(t,n):{rows:[],flatRows:[],rowsById:{}},jt(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=!!(e.length&&Object.keys(n).length);return r&&e.some(o=>o.getCanSelect()&&!n[o.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(o=>o.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(o=>!n[o.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const o=t.getIsSelected();e.setRowSelection(i=>{var s;if(n=typeof n<"u"?n:!o,t.getCanSelect()&&o===n)return i;const a={...i};return CR(a,t.id,n,(s=r?.selectChildren)!=null?s:!0,e),a})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return FN(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return SR(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return SR(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var o;n&&t.toggleSelected((o=r.target)==null?void 0:o.checked)}}}},CR=(t,e,n,r,o)=>{var i;const s=o.getRow(e,!0);n?(s.getCanMultiSelect()||Object.keys(t).forEach(a=>delete t[a]),s.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(i=s.subRows)!=null&&i.length&&s.getCanSelectSubRows()&&s.subRows.forEach(a=>CR(t,a.id,n,r,o))};function JT(t,e){const n=t.getState().rowSelection,r=[],o={},i=function(s,a){return s.map(l=>{var c;const d=FN(l,n);if(d&&(r.push(l),o[l.id]=l),(c=l.subRows)!=null&&c.length&&(l={...l,subRows:i(l.subRows)}),d)return l}).filter(Boolean)};return{rows:i(e.rows),flatRows:r,rowsById:o}}function FN(t,e){var n;return(n=e[t.id])!=null?n:!1}function SR(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let o=!0,i=!1;return t.subRows.forEach(s=>{if(!(i&&!o)&&(s.getCanSelect()&&(FN(s,e)?i=!0:o=!1),s.subRows&&s.subRows.length)){const a=SR(s,e);a==="all"?i=!0:(a==="some"&&(i=!0),o=!1)}}),o?"all":i?"some":!1}const _R=/([0-9]+)/gm,Sme=(t,e,n)=>dU(mf(t.getValue(n)).toLowerCase(),mf(e.getValue(n)).toLowerCase()),_me=(t,e,n)=>dU(mf(t.getValue(n)),mf(e.getValue(n))),xme=(t,e,n)=>HN(mf(t.getValue(n)).toLowerCase(),mf(e.getValue(n)).toLowerCase()),Eme=(t,e,n)=>HN(mf(t.getValue(n)),mf(e.getValue(n))),kme=(t,e,n)=>{const r=t.getValue(n),o=e.getValue(n);return r>o?1:r<o?-1:0},Tme=(t,e,n)=>HN(t.getValue(n),e.getValue(n));function HN(t,e){return t===e?0:t>e?1:-1}function mf(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function dU(t,e){const n=t.split(_R).filter(Boolean),r=e.split(_R).filter(Boolean);for(;n.length&&r.length;){const o=n.shift(),i=r.shift(),s=parseInt(o,10),a=parseInt(i,10),l=[s,a].sort();if(isNaN(l[0])){if(o>i)return 1;if(i>o)return-1;continue}if(isNaN(l[1]))return isNaN(s)?-1:1;if(s>a)return 1;if(a>s)return-1}return n.length-r.length}const qy={alphanumeric:Sme,alphanumericCaseSensitive:_me,text:xme,textCaseSensitive:Eme,datetime:kme,basic:Tme},Ame={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:Qs("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const o of n){const i=o?.getValue(t.id);if(Object.prototype.toString.call(i)==="[object Date]")return qy.datetime;if(typeof i=="string"&&(r=!0,i.split(_R).length>1))return qy.alphanumeric}return r?qy.text:qy.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof n?.getValue(t.id)=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return fx(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:qy[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const o=t.getNextSortingOrder(),i=typeof n<"u"&&n!==null;e.setSorting(s=>{const a=s?.find(g=>g.id===t.id),l=s?.findIndex(g=>g.id===t.id);let c=[],d,f=i?n:o==="desc";if(s!=null&&s.length&&t.getCanMultiSort()&&r?a?d="toggle":d="add":s!=null&&s.length&&l!==s.length-1?d="replace":a?d="toggle":d="replace",d==="toggle"&&(i||o||(d="remove")),d==="add"){var p;c=[...s,{id:t.id,desc:f}],c.splice(0,c.length-((p=e.options.maxMultiSortColCount)!=null?p:Number.MAX_SAFE_INTEGER))}else d==="toggle"?c=s.map(g=>g.id===t.id?{...g,desc:f}:g):d==="remove"?c=s.filter(g=>g.id!==t.id):c=[{id:t.id,desc:f}];return c})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,o;const i=t.getFirstSortDir(),s=t.getIsSorted();return s?s!==i&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(o=e.options.enableMultiRemove)!=null)||o)?!1:s==="desc"?"asc":"desc":i},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(o=>o.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(o=>o.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},Rme=[Ype,mme,ume,dme,Qpe,Zpe,gme,yme,Ame,lme,vme,bme,wme,Cme,hme];function Ime(t){var e,n;const r=[...Rme,...(e=t._features)!=null?e:[]];let o={_features:r};const i=o._features.reduce((p,g)=>Object.assign(p,g.getDefaultOptions==null?void 0:g.getDefaultOptions(o)),{}),s=p=>o.options.mergeOptions?o.options.mergeOptions(i,p):{...i,...p};let l={...{},...(n=t.initialState)!=null?n:{}};o._features.forEach(p=>{var g;l=(g=p.getInitialState==null?void 0:p.getInitialState(l))!=null?g:l});const c=[];let d=!1;const f={_features:r,options:{...i,...t},initialState:l,_queue:p=>{c.push(p),d||(d=!0,Promise.resolve().then(()=>{for(;c.length;)c.shift()();d=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{o.setState(o.initialState)},setOptions:p=>{const g=Ud(p,o.options);o.options=s(g)},getState:()=>o.options.state,setState:p=>{o.options.onStateChange==null||o.options.onStateChange(p)},_getRowId:(p,g,y)=>{var b;return(b=o.options.getRowId==null?void 0:o.options.getRowId(p,g,y))!=null?b:`${y?[y.id,g].join("."):g}`},getCoreRowModel:()=>(o._getCoreRowModel||(o._getCoreRowModel=o.options.getCoreRowModel(o)),o._getCoreRowModel()),getRowModel:()=>o.getPaginationRowModel(),getRow:(p,g)=>{let y=(g?o.getPrePaginationRowModel():o.getRowModel()).rowsById[p];if(!y&&(y=o.getCoreRowModel().rowsById[p],!y))throw new Error;return y},_getDefaultColumnDef:Vt(()=>[o.options.defaultColumn],p=>{var g;return p=(g=p)!=null?g:{},{header:y=>{const b=y.header.column.columnDef;return b.accessorKey?b.accessorKey:b.accessorFn?b.id:null},cell:y=>{var b,_;return(b=(_=y.renderValue())==null||_.toString==null?void 0:_.toString())!=null?b:null},...o._features.reduce((y,b)=>Object.assign(y,b.getDefaultColumnDef==null?void 0:b.getDefaultColumnDef()),{}),...p}},jt(t,"debugColumns")),_getColumnDefs:()=>o.options.columns,getAllColumns:Vt(()=>[o._getColumnDefs()],p=>{const g=function(y,b,_){return _===void 0&&(_=0),y.map(k=>{const M=Wpe(o,k,_,b),N=k;return M.columns=N.columns?g(N.columns,M,_+1):[],M})};return g(p)},jt(t,"debugColumns")),getAllFlatColumns:Vt(()=>[o.getAllColumns()],p=>p.flatMap(g=>g.getFlatColumns()),jt(t,"debugColumns")),_getAllFlatColumnsById:Vt(()=>[o.getAllFlatColumns()],p=>p.reduce((g,y)=>(g[y.id]=y,g),{}),jt(t,"debugColumns")),getAllLeafColumns:Vt(()=>[o.getAllColumns(),o._getOrderColumnsFn()],(p,g)=>{let y=p.flatMap(b=>b.getLeafColumns());return g(y)},jt(t,"debugColumns")),getColumn:p=>o._getAllFlatColumnsById()[p]};Object.assign(o,f);for(let p=0;p<o._features.length;p++){const g=o._features[p];g==null||g.createTable==null||g.createTable(o)}return o}function Mme(){return t=>Vt(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(o,i,s){i===void 0&&(i=0);const a=[];for(let c=0;c<o.length;c++){const d=Xpe(t,t._getRowId(o[c],c,s),o[c],c,i,void 0,s?.id);if(n.flatRows.push(d),n.rowsById[d.id]=d,a.push(d),t.options.getSubRows){var l;d.originalSubRows=t.options.getSubRows(o[c],c),(l=d.originalSubRows)!=null&&l.length&&(d.subRows=r(d.originalSubRows,i+1,d))}}return a};return n.rows=r(e),n},jt(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function vj(t,e){return t?Nme(t)?E.createElement(t,e):t:null}function Nme(t){return Ome(t)||typeof t=="function"||Pme(t)}function Ome(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function Pme(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function Dme(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=E.useState(()=>({current:Ime(e)})),[r,o]=E.useState(()=>n.current.initialState);return n.current.setOptions(i=>({...i,...t,state:{...r,...t.state},onStateChange:s=>{o(s),t.onStateChange==null||t.onStateChange(s)}})),n.current}const Lme="modulepreload",Vme=function(t){return"/BSP-Note/"+t},bj={},et=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");o=l(n.map(c=>{if(c=Vme(c),c in bj)return;bj[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":Lme,d||(p.as="script"),p.crossOrigin="",p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),d)return new Promise((g,y)=>{p.addEventListener("load",g),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return o.then(s=>{for(const a of s||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function li(t){this.content=t}li.prototype={constructor:li,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return o==-1?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new li(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new li(n)},addToStart:function(t,e){return new li([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new li(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(i==-1?o.length:i,0,e,n),new li(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=li.from(t),t.size?new li(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=li.from(t),t.size?new li(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=li.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};li.from=function(t){if(t instanceof li)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new li(e)};function fU(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),i=e.child(r);if(o==i){n+=o.nodeSize;continue}if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){let s=fU(o.content,i.content,n+1);if(s!=null)return s}n+=o.nodeSize}}function hU(t,e,n,r){for(let o=t.childCount,i=e.childCount;;){if(o==0||i==0)return o==i?null:{a:n,b:r};let s=t.child(--o),a=e.child(--i),l=s.nodeSize;if(s==a){n-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let c=0,d=Math.min(s.text.length,a.text.length);for(;c<d&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let c=hU(s.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class Le{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,i){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,o+a,i||null,s)!==!1&&l.content.size){let d=a+1;l.nodesBetween(Math.max(0,e-d),Math.min(l.content.size,n-d),r,o+d)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let i="",s=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(s?s=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new Le(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let i=0,s=0;s<n;i++){let a=this.content[i],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),o+=a.nodeSize),s=l}return new Le(r,o)}cutByIndex(e,n){return e==n?Le.empty:e==0&&n==this.content.length?this:new Le(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new Le(o,i)}addToStart(e){return new Le([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Le(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return fU(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return hU(this,e,n,r)}findIndex(e){if(e==0)return Q1(0,e);if(e==this.size)return Q1(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=this.child(n),i=r+o.nodeSize;if(i>=e)return i==e?Q1(n+1,i):Q1(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Le.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Le(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Le.empty;let n,r=0;for(let o=0;o<e.length;o++){let i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(n||(n=e.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new Le(n||e,r)}static from(e){if(!e)return Le.empty;if(e instanceof Le)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Le([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Le.empty=new Le([],0);const eA={index:0,offset:0};function Q1(t,e){return eA.index=t,eA.offset=e,eA}function jC(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!jC(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!jC(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let gr=class xR{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let i=e[o];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,o));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&jC(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return xR.none;if(e instanceof xR)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};gr.none=[];class BC extends Error{}class Ze{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=mU(this.content,e+this.openStart,n);return r&&new Ze(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Ze(pU(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Ze.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ze(Le.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)o++;return new Ze(e,r,o)}}Ze.empty=new Ze(Le.empty,0,0);function pU(t,e,n){let{index:r,offset:o}=t.findIndex(e),i=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(o==e||i.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(pU(i.content,e-o-1,n-o-1)))}function mU(t,e,n,r){let{index:o,offset:i}=t.findIndex(e),s=t.maybeChild(o);if(i==e||s.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=mU(s.content,e-i-1,n);return a&&t.replaceChild(o,s.copy(a))}function jme(t,e,n){if(n.openStart>t.depth)throw new BC("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new BC("Inconsistent open depths");return gU(t,e,n,0)}function gU(t,e,n,r){let o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let s=gU(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return Ph(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=Bme(n,t);return Ph(i,vU(t,s,a,e,r))}else return Ph(i,$C(t,e,r))}function yU(t,e){if(!e.type.compatibleContent(t.type))throw new BC("Cannot join "+e.type.name+" onto "+t.type.name)}function ER(t,e,n){let r=t.node(n);return yU(r,e.node(n)),r}function Oh(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function _v(t,e,n,r){let o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(Oh(t.nodeAfter,r),i++));for(let a=i;a<s;a++)Oh(o.child(a),r);e&&e.depth==n&&e.textOffset&&Oh(e.nodeBefore,r)}function Ph(t,e){return t.type.checkContent(e),t.copy(e)}function vU(t,e,n,r,o){let i=t.depth>o&&ER(t,e,o+1),s=r.depth>o&&ER(n,r,o+1),a=[];return _v(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(yU(i,s),Oh(Ph(i,vU(t,e,n,r,o+1)),a)):(i&&Oh(Ph(i,$C(t,e,o+1)),a),_v(e,n,o,a),s&&Oh(Ph(s,$C(n,r,o+1)),a)),_v(r,null,o,a),new Le(a)}function $C(t,e,n){let r=[];if(_v(null,t,n,r),t.depth>n){let o=ER(t,e,n+1);Oh(Ph(o,$C(t,e,n+1)),r)}return _v(e,null,n,r),new Le(r)}function Bme(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)o=e.node(i).copy(Le.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class Xv{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)o+=r.child(i).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return gr.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let i=r.marks;for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new FC(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,i=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(i),c=i-l;if(r.push(s,a,o+l),!c||(s=s.child(a),s.isText))break;i=c-1,o+=l+1}return new Xv(n,r,i)}static resolveCached(e,n){let r=wj.get(e);if(r)for(let i=0;i<r.elts.length;i++){let s=r.elts[i];if(s.pos==n)return s}else wj.set(e,r=new $me);let o=r.elts[r.i]=Xv.resolve(e,n);return r.i=(r.i+1)%Fme,o}}class $me{constructor(){this.elts=[],this.i=0}}const Fme=12,wj=new WeakMap;class FC{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Hme=Object.create(null);let Cu=class kR{constructor(e,n,r,o=gr.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||Le.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&jC(this.attrs,n||e.defaultAttrs||Hme)&&gr.sameSet(this.marks,r||gr.none)}copy(e=null){return e==this.content?this:new kR(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new kR(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Ze.empty;let o=this.resolve(e),i=this.resolve(n),s=r?0:o.sharedDepth(n),a=o.start(s),c=o.node(s).content.cut(o.pos-a,i.pos-a);return new Ze(c,o.depth-s,i.depth-s)}replace(e,n,r){return jme(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return Xv.resolveCached(this,e)}resolveNoCache(e){return Xv.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),bU(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Le.empty,o=0,i=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,o,i),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=o;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=gr.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!gr.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=Le.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,o,r);return i.type.checkAttrs(i.attrs),i}};Cu.prototype.text=void 0;class HC extends Cu{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):bU(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new HC(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new HC(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function bU(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Kh{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new Ume(e,n);if(r.next==null)return Kh.empty;let o=wU(r);r.next&&r.err("Unexpected trailing text");let i=Xme(Yme(o));return Qme(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let i=n;o&&i<r;i++)o=o.matchType(e.child(i).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function i(s,a){let l=s.matchFragment(e,r);if(l&&(!n||l.validEnd))return Le.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:d,next:f}=s.next[c];if(!(d.isText||d.hasRequiredAttrs())&&o.indexOf(f)==-1){o.push(f);let p=i(f,a.concat(d));if(p)return p}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),i=o.match;if(i.matchType(e)){let s=[];for(let a=o;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<i.next.length;s++){let{type:a,next:l}=i.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let i=o+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)i+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return i}).join(`
`)}}Kh.empty=new Kh(!0);class Ume{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function wU(t){let e=[];do e.push(zme(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function zme(t){let e=[];do e.push(Gme(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Gme(t){let e=Wme(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=qme(t,e);else break;return e}function Cj(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function qme(t,e){let n=Cj(t),r=n;return t.eat(",")&&(t.next!="}"?r=Cj(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Kme(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let i in n){let s=n[i];s.isInGroup(e)&&o.push(s)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function Wme(t){if(t.eat("(")){let e=wU(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Kme(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Yme(t){let e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function o(s,a){s.forEach(l=>l.to=a)}function i(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=i(s.exprs[l],a);if(l==s.exprs.length-1)return c;o(c,a=n())}else if(s.type=="star"){let l=n();return r(a,l),o(i(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=n();return o(i(s.expr,a),l),o(i(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(i(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let d=n();o(i(s.expr,l),d),l=d}if(s.max==-1)o(i(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let d=n();r(l,d),o(i(s.expr,l),d),l=d}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function CU(t,e){return e-t}function Sj(t,e){let n=[];return r(e),n.sort(CU);function r(o){let i=t[o];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(o);for(let s=0;s<i.length;s++){let{term:a,to:l}=i[s];!a&&n.indexOf(l)==-1&&r(l)}}}function Xme(t){let e=Object.create(null);return n(Sj(t,0));function n(r){let o=[];r.forEach(s=>{t[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let d=0;d<o.length;d++)o[d][0]==a&&(c=o[d][1]);Sj(t,l).forEach(d=>{c||o.push([a,c=[]]),c.indexOf(d)==-1&&c.push(d)})})});let i=e[r.join(",")]=new Kh(r.indexOf(t.length-1)>-1);for(let s=0;s<o.length;s++){let a=o[s][1].sort(CU);i.next.push({type:o[s][0],next:e[a.join(",")]||n(a)})}return i}}function Qme(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],i=!o.validEnd,s=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];s.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function SU(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function _U(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let i=t[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function xU(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let i=t[o];i.validate&&i.validate(e[o])}}function EU(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new Jme(t,r,e[r]);return n}let _j=class kU{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=EU(e,r.attrs),this.defaultAttrs=SU(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Kh.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:_U(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Cu(this,this.computeAttrs(e),Le.from(n),gr.setFrom(r))}createChecked(e=null,n,r){return n=Le.from(n),this.checkContent(n),new Cu(this,this.computeAttrs(e),n,gr.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Le.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let o=this.contentMatch.matchFragment(n),i=o&&o.fillBefore(Le.empty,!0);return i?new Cu(this,e,n.append(i),gr.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){xU(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:gr.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,s)=>r[i]=new kU(i,n,s));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Zme(t,e,n){let r=n.split("|");return o=>{let i=o===null?"null":typeof o;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class Jme{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Zme(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class hx{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=EU(e,o.attrs),this.excluded=null;let i=SU(this.attrs);this.instance=i?new gr(this,i):null}create(e=null){return!e&&this.instance?this.instance:new gr(this,_U(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((i,s)=>r[i]=new hx(i,o++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){xU(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}let TU=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=li.from(e.nodes),n.marks=li.from(e.marks||{}),this.nodes=_j.compile(this.spec.nodes,this),this.marks=hx.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],s=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[s]||(r[s]=Kh.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?xj(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let o in this.marks){let i=this.marks[o],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:xj(this,s.split(" "))}this.nodeFromJSON=o=>Cu.fromJSON(this,o),this.markFromJSON=o=>gr.fromJSON(this,o),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof _j){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new HC(r,r.defaultAttrs,e,gr.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}};function xj(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(let a in t.marks){let l=t.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function ege(t){return t.tag!=null}function tge(t){return t.style!=null}let Su=class TR{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(ege(o))this.tags.push(o);else if(tge(o)){let i=/[^=]*/.exec(o.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let i=e.nodes[o.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new kj(this,n,!1);return r.addAll(e,gr.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new kj(this,n,!0);return r.addAll(e,gr.none,n.from,n.to),Ze.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let i=this.tags[o];if(oge(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let s=i.getAttrs(e);if(s===!1)continue;i.attrs=s||void 0}return i}}}matchStyle(e,n,r,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let s=this.styles[i],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function r(o){let i=o.priority==null?50:o.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<i)break}n.splice(s,0,o)}for(let o in e.marks){let i=e.marks[o].spec.parseDOM;i&&i.forEach(s=>{r(s=Tj(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in e.nodes){let i=e.nodes[o].spec.parseDOM;i&&i.forEach(s=>{r(s=Tj(s)),s.node||s.ignore||s.mark||(s.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new TR(e,TR.schemaRules(e)))}};const AU={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},nge={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},RU={ol:!0,ul:!0},Qv=1,AR=2,xv=4;function Ej(t,e,n){return e!=null?(e?Qv:0)|(e==="full"?AR:0):t&&t.whitespace=="pre"?Qv|AR:n&~xv}class Z1{constructor(e,n,r,o,i,s){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=gr.none,this.match=i||(s&xv?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Le.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Qv)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-o[0].length))}}let n=Le.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Le.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!AU.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class kj{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,i,s=Ej(null,n.preserveWhitespace,0)|(r?xv:0);o?i=new Z1(o.type,o.attrs,gr.none,!0,n.topMatch||o.type.contentMatch,s):r?i=new Z1(null,null,gr.none,!0,null,s):i=new Z1(e.schema.topNodeType,null,gr.none,!0,null,s),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,i=o.options&AR?"full":this.localPreserveWS||(o.options&Qv)>0;if(i==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=o.content[o.content.length-1],a=e.previousSibling;(!s||a&&a.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;RU.hasOwnProperty(s)&&this.parser.normalizeLists&&rge(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:nge.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,d=this.needsBlock;if(AU.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let f=l&&l.skip?n:this.readStyles(e,n);f&&this.addAll(e,f),c&&this.sync(i),this.needsBlock=d}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let i=this.parser.matchedStyles[o],s=r.getPropertyValue(i);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(i,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,o){let i,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(s,n.attrs||null,r,n.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,n,r,o){let i=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];s!=a;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s,n);this.findAtPoint(e,i)}findPlace(e,n,r){let o,i;for(let s=this.open,a=0;s>=0;s--){let l=this.nodes[s],c=l.findWrapping(e);if(c&&(!o||o.length>c.length+a)&&(o=c,i=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!o)return null;this.sync(i);for(let s=0;s<o.length;s++)n=this.enterInner(o[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let o=this.findPlace(e,n,r);if(o){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=gr.none;for(let a of o.concat(e.marks))(i.type?i.type.allowsMarkType(a.type):Aj(a.type,e.type))&&(s=a.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,n,r,o){let i=this.findPlace(e.create(n),r,!1);return i&&(i=this.enterInner(e,n,r,!0,o)),i}enterInner(e,n,r,o=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=Ej(e,i,s.options);s.options&xv&&s.content.length==0&&(a|=xv);let l=gr.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):Aj(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Z1(e,n,l,o,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Qv)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=i;l--)if(s(a-1,l))return!0;return!1}else{let d=l>0||l==0&&o?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!d||d.name!=c&&!d.isInGroup(c))return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function rge(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&RU.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function oge(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Tj(t){let e={};for(let n in t)e[n]=t[n];return e}function Aj(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let i=[],s=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:d}=a.edge(l);if(c==e||i.indexOf(d)<0&&s(d))return!0}};if(s(o.contentMatch))return!0}}class ju{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=tA(n).createDocumentFragment());let o=r,i=[];return e.forEach(s=>{if(i.length||s.marks.length){let a=0,l=0;for(;a<i.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)o=i.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],d=this.serializeMark(c,s.isInline,n);d&&(i.push([c,o]),o.appendChild(d.dom),o=d.contentDOM||d.dom)}}o.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=Hw(tA(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let i=this.serializeMark(e.marks[o],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&Hw(tA(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return Hw(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ju(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Rj(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Rj(e.marks)}}function Rj(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function tA(t){return t.document||window.document}const Ij=new WeakMap;function ige(t){let e=Ij.get(t);return e===void 0&&Ij.set(t,e=sge(t)),e}function sge(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function Hw(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],i;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=ige(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=o.indexOf(" ");s>0&&(n=o.slice(0,s),o=o.slice(s+1));let a,l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],d=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){d=2;for(let f in c)if(c[f]!=null){let p=f.indexOf(" ");p>0?l.setAttributeNS(f.slice(0,p),f.slice(p+1),c[f]):f=="style"&&l.style?l.style.cssText=c[f]:l.setAttribute(f,c[f])}}for(let f=d;f<e.length;f++){let p=e[f];if(p===0){if(f<e.length-1||f>d)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:g,contentDOM:y}=Hw(t,p,n,r);if(l.appendChild(g),y){if(a)throw new RangeError("Multiple content holes");a=y}}}return{dom:l,contentDOM:a}}const IU=65535,MU=Math.pow(2,16);function age(t,e){return t+e*MU}function Mj(t){return t&IU}function lge(t){return(t-(t&IU))/MU}const NU=1,OU=2,Uw=4,PU=8;class RR{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&PU)>0}get deletedBefore(){return(this.delInfo&(NU|Uw))>0}get deletedAfter(){return(this.delInfo&(OU|Uw))>0}get deletedAcross(){return(this.delInfo&Uw)>0}}class Ks{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Ks.empty)return Ks.empty}recover(e){let n=0,r=Mj(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+lge(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+i],d=this.ranges[a+s],f=l+c;if(e<=f){let p=c?e==l?-1:e==f?1:n:n,g=l+o+(p<0?0:d);if(r)return g;let y=e==(n<0?l:f)?null:age(a/3,e-l),b=e==l?OU:e==f?NU:Uw;return(n<0?e!=l:e!=f)&&(b|=PU),new RR(g,b,y)}o+=d-c}return r?e+o:new RR(e+o,0,null)}touches(e,n){let r=0,o=Mj(n),i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+i],d=l+c;if(e<=d&&a==o*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],a=s-(this.inverted?i:0),l=s+(this.inverted?0:i),c=this.ranges[o+n],d=this.ranges[o+r];e(a,a+c,l,l+d),i+=d-c}}invert(){return new Ks(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Ks.empty:new Ks(e<0?[0,-e,0]:[0,0,e])}}Ks.empty=new Ks([]);class sg{constructor(e,n,r=0,o=e?e.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new sg(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let o=e.getMirror(n);this.appendMap(e._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new sg;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let i=this.from;i<this.to;i++){let s=this._maps[i],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this._maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new RR(e,o,null)}}const nA=Object.create(null);class $i{getMap(){return Ks.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=nA[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in nA)throw new RangeError("Duplicate use of step JSON ID "+e);return nA[e]=n,n.prototype.jsonID=e,n}}class wo{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new wo(e,null)}static fail(e){return new wo(null,e)}static fromReplace(e,n,r,o){try{return wo.ok(e.replace(n,r,o))}catch(i){if(i instanceof BC)return wo.fail(i.message);throw i}}}function UN(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let i=t.child(o);i.content.size&&(i=i.copy(UN(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return Le.fromArray(r)}class zd extends $i{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new Ze(UN(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),n.openStart,n.openEnd);return wo.fromReplace(e,this.from,this.to,i)}invert(){return new rc(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new zd(n.pos,r.pos,this.mark)}merge(e){return e instanceof zd&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new zd(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new zd(n.from,n.to,e.markFromJSON(n.mark))}}$i.jsonID("addMark",zd);class rc extends $i{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Ze(UN(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return wo.fromReplace(e,this.from,this.to,r)}invert(){return new zd(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new rc(n.pos,r.pos,this.mark)}merge(e){return e instanceof rc&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new rc(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new rc(n.from,n.to,e.markFromJSON(n.mark))}}$i.jsonID("removeMark",rc);class Gd extends $i{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return wo.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return wo.fromReplace(e,this.pos,this.pos+1,new Ze(Le.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new Gd(this.pos,n.marks[o]);return new Gd(this.pos,this.mark)}}return new Wh(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Gd(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Gd(n.pos,e.markFromJSON(n.mark))}}$i.jsonID("addNodeMark",Gd);class Wh extends $i{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return wo.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return wo.fromReplace(e,this.pos,this.pos+1,new Ze(Le.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Gd(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Wh(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Wh(n.pos,e.markFromJSON(n.mark))}}$i.jsonID("removeNodeMark",Wh);class go extends $i{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&IR(e,this.from,this.to)?wo.fail("Structure replace would overwrite content"):wo.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ks([this.from,this.to-this.from,this.slice.size])}invert(e){return new go(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new go(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof go)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Ze.empty:new Ze(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new go(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Ze.empty:new Ze(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new go(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new go(n.from,n.to,Ze.fromJSON(e,n.slice),!!n.structure)}}$i.jsonID("replace",go);class ao extends $i{constructor(e,n,r,o,i,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=a}apply(e){if(this.structure&&(IR(e,this.from,this.gapFrom)||IR(e,this.gapTo,this.to)))return wo.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return wo.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?wo.fromReplace(e,this.from,this.to,r):wo.fail("Content does not fit in gap")}getMap(){return new Ks([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new ao(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new ao(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ao(n.from,n.to,n.gapFrom,n.gapTo,Ze.fromJSON(e,n.slice),n.insert,!!n.structure)}}$i.jsonID("replaceAround",ao);function IR(t,e,n){let r=t.resolve(e),o=n-e,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function cge(t,e,n,r){let o=[],i=[],s,a;t.doc.nodesBetween(e,n,(l,c,d)=>{if(!l.isInline)return;let f=l.marks;if(!r.isInSet(f)&&d.type.allowsMarkType(r.type)){let p=Math.max(c,e),g=Math.min(c+l.nodeSize,n),y=r.addToSet(f);for(let b=0;b<f.length;b++)f[b].isInSet(y)||(s&&s.to==p&&s.mark.eq(f[b])?s.to=g:o.push(s=new rc(p,g,f[b])));a&&a.to==p?a.to=g:i.push(a=new zd(p,g,r))}}),o.forEach(l=>t.step(l)),i.forEach(l=>t.step(l))}function uge(t,e,n,r){let o=[],i=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;i++;let l=null;if(r instanceof hx){let c=s.marks,d;for(;d=r.isInSet(c);)(l||(l=[])).push(d),c=d.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,n);for(let d=0;d<l.length;d++){let f=l[d],p;for(let g=0;g<o.length;g++){let y=o[g];y.step==i-1&&f.eq(o[g].style)&&(p=y)}p?(p.to=c,p.step=i):o.push({style:f,from:Math.max(a,e),to:c,step:i})}}}),o.forEach(s=>t.step(new rc(s.from,s.to,s.style)))}function zN(t,e,n,r=n.contentMatch,o=!0){let i=t.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<i.childCount;l++){let c=i.child(l),d=a+c.nodeSize,f=r.matchType(c.type);if(!f)s.push(new go(a,d,Ze.empty));else{r=f;for(let p=0;p<c.marks.length;p++)n.allowsMarkType(c.marks[p].type)||t.step(new rc(a,d,c.marks[p]));if(o&&c.isText&&n.whitespace!="pre"){let p,g=/\r?\n|\r/g,y;for(;p=g.exec(c.text);)y||(y=new Ze(Le.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new go(a+p.index,a+p.index+p[0].length,y))}}a=d}if(!r.validEnd){let l=r.fillBefore(Le.empty,!0);t.replace(a,a,new Ze(l,0,0))}for(let l=s.length-1;l>=0;l--)t.step(s[l])}function dge(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Lg(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),i=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(i,s,n))return r;if(r==0||o.type.spec.isolating||!dge(o,i,s))break}return null}function fge(t,e,n){let{$from:r,$to:o,depth:i}=e,s=r.before(i+1),a=o.after(i+1),l=s,c=a,d=Le.empty,f=0;for(let y=i,b=!1;y>n;y--)b||r.index(y)>0?(b=!0,d=Le.from(r.node(y).copy(d)),f++):l--;let p=Le.empty,g=0;for(let y=i,b=!1;y>n;y--)b||o.after(y+1)<o.end(y)?(b=!0,p=Le.from(o.node(y).copy(p)),g++):c++;t.step(new ao(l,c,s,a,new Ze(d.append(p),f,g),d.size-f,!0))}function DU(t,e,n=null,r=t){let o=hge(t,e),i=o&&pge(r,e);return i?o.map(Nj).concat({type:e,attrs:n}).concat(i.map(Nj)):null}function Nj(t){return{type:t,attrs:null}}function hge(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}function pge(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function mge(t,e,n){let r=Le.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Le.from(n[s].type.create(n[s].attrs,r))}let o=e.start,i=e.end;t.step(new ao(o,i,o,i,new Ze(r,0,0),n.length,!0))}function gge(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{let l=typeof o=="function"?o(s):o;if(s.isTextblock&&!s.hasMarkup(r,l)&&yge(t.doc,t.mapping.slice(i).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let g=r.whitespace=="pre",y=!!r.contentMatch.matchType(r.schema.linebreakReplacement);g&&!y?c=!1:!g&&y&&(c=!0)}c===!1&&VU(t,s,a,i),zN(t,t.mapping.slice(i).map(a,1),r,void 0,c===null);let d=t.mapping.slice(i),f=d.map(a,1),p=d.map(a+s.nodeSize,1);return t.step(new ao(f,p,f+1,p-1,new Ze(Le.from(r.create(l,null,s.marks)),0,0),1,!0)),c===!0&&LU(t,s,a,i),!1}})}function LU(t,e,n,r){e.forEach((o,i)=>{if(o.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(o.text);){let l=t.mapping.slice(r).map(n+1+i+s.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function VU(t,e,n,r){e.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+i);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function yge(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function vge(t,e,n,r,o){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new ao(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new Ze(Le.from(s),0,0),1,!0))}function _u(t,e,n=1,r){let o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,d=n-2;c>i;c--,d--){let f=o.node(c),p=o.index(c);if(f.type.spec.isolating)return!1;let g=f.content.cutByIndex(p,f.childCount),y=r&&r[d+1];y&&(g=g.replaceChild(0,y.type.create(y.attrs)));let b=r&&r[d]||f;if(!f.canReplace(p+1,f.childCount)||!b.type.validContent(g))return!1}let a=o.indexAfter(i),l=r&&r[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}function bge(t,e,n=1,r){let o=t.doc.resolve(e),i=Le.empty,s=Le.empty;for(let a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){i=Le.from(o.node(a).copy(i));let d=r&&r[c];s=Le.from(d?d.type.create(d.attrs,s):o.node(a).copy(s))}t.step(new go(e,e,new Ze(i.append(s),n,n),!0))}function mp(t,e){let n=t.resolve(e),r=n.index();return jU(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function wge(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let i=e.child(o),s=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function jU(t,e){return!!(t&&e&&!t.isLeaf&&wge(t,e))}function px(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let i,s,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&jU(i,s)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function Cge(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,i=t.doc.resolve(e-n),s=i.node().type;if(o&&s.inlineContent){let d=s.whitespace=="pre",f=!!s.contentMatch.matchType(o);d&&!f?r=!1:!d&&f&&(r=!0)}let a=t.steps.length;if(r===!1){let d=t.doc.resolve(e+n);VU(t,d.node(),d.before(),a)}s.inlineContent&&zN(t,e+n-1,s,i.node().contentMatchAt(i.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new go(c,l.map(e+n,-1),Ze.empty,!0)),r===!0){let d=t.doc.resolve(c);LU(t,d.node(),d.before(),t.steps.length)}return t}function Sge(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let i=r.indexAfter(o);if(r.node(o).canReplaceWith(i,i,n))return r.after(o+1);if(i<r.node(o).childCount)return null}return null}function BU(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),d=!1;if(i==1)d=c.canReplace(l,l,o);else{let f=c.contentMatchAt(l).findWrapping(o.firstChild.type);d=f&&c.canReplaceWith(l,l,f[0])}if(d)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function mx(t,e,n=e,r=Ze.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),i=t.resolve(n);return $U(o,i,r)?new go(e,n,r):new _ge(o,i,r).fit()}function $U(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class _ge{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Le.empty;for(let o=0;o<=e.depth;o++){let i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=Le.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let i=this.placed,s=r.depth,a=o.depth;for(;s&&a&&i.childCount==1;)i=i.firstChild.content,s--,a--;let l=new Ze(i,s,a);return e>-1?new ao(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new go(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(o=0),i.type.spec.isolating&&o<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,i=null;r?(i=rA(this.unplaced.content,r-1).firstChild,o=i.content):o=this.unplaced.content;let s=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],d,f=null;if(n==1&&(s?c.matchType(s.type)||(f=c.fillBefore(Le.from(s),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:f};if(n==2&&s&&(d=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:d};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=rA(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new Ze(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=rA(e,n);if(o.childCount<=1&&n>0){let i=e.size-n<=n+o.size;this.unplaced=new Ze(ov(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new Ze(ov(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let b=0;b<i.length;b++)this.openFrontierNode(i[b]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,d=[],{match:f,type:p}=this.frontier[n];if(o){for(let b=0;b<o.childCount;b++)d.push(o.child(b));f=f.matchFragment(o)}let g=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let b=a.child(c),_=f.matchType(b.type);if(!_)break;c++,(c>1||l==0||b.content.size)&&(f=_,d.push(FU(b.mark(p.allowedMarks(b.marks)),c==1?l:0,c==a.childCount?g:-1)))}let y=c==a.childCount;y||(g=-1),this.placed=iv(this.placed,n,Le.from(d)),this.frontier[n].match=f,y&&g<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let b=0,_=a;b<g;b++){let k=_.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),_=k.content}this.unplaced=y?e==0?Ze.empty:new Ze(ov(s.content,e-1,1),e-1,g<0?s.openEnd:e-1):new Ze(ov(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!oA(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=oA(e,n,o,r,i);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],d=oA(e,a,c,l,!0);if(!d||d.childCount)continue e}return{depth:n,fit:s,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=iv(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,i)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=iv(this.placed,this.depth,Le.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Le.empty,!0);n.childCount&&(this.placed=iv(this.placed,this.frontier.length,n))}}function ov(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ov(t.firstChild.content,e-1,n)))}function iv(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(iv(t.lastChild.content,e-1,n)))}function rA(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function FU(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,FU(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Le.empty,!0)))),t.copy(r)}function oA(t,e,n,r,o){let i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!xge(n,i.content,s)?a:null}function xge(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Ege(t){return t.spec.defining||t.spec.definingForContent}function kge(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),i=t.doc.resolve(n);if($U(o,i,r))return t.step(new go(e,n,r));let s=UU(o,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let p=o.depth,g=o.pos-1;p>0;p--,g--){let y=o.node(p).type.spec;if(y.defining||y.definingAsContext||y.isolating)break;s.indexOf(p)>-1?a=p:o.before(p)==g&&s.splice(1,0,-p)}let l=s.indexOf(a),c=[],d=r.openStart;for(let p=r.content,g=0;;g++){let y=p.firstChild;if(c.push(y),g==r.openStart)break;p=y.content}for(let p=d-1;p>=0;p--){let g=c[p],y=Ege(g.type);if(y&&!g.sameMarkup(o.node(Math.abs(a)-1)))d=p;else if(y||!g.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let g=(p+d+1)%(r.openStart+1),y=c[g];if(y)for(let b=0;b<s.length;b++){let _=s[(b+l)%s.length],k=!0;_<0&&(k=!1,_=-_);let M=o.node(_-1),N=o.index(_-1);if(M.canReplaceWith(N,N,y.type,y.marks))return t.replace(o.before(_),k?i.after(_):n,new Ze(HU(r.content,0,r.openStart,g),g,r.openEnd))}}let f=t.steps.length;for(let p=s.length-1;p>=0&&(t.replace(e,n,r),!(t.steps.length>f));p--){let g=s[p];g<0||(e=o.before(g),n=i.after(g))}}function HU(t,e,n,r,o){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(HU(i.content,e+1,n,r,i)))}if(e>r){let i=o.contentMatchAt(0),s=i.fillBefore(t).append(t);t=s.append(i.matchFragment(s).fillBefore(Le.empty,!0))}return t}function Tge(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=Sge(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new Ze(Le.from(r),0,0))}function Age(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),i=UU(r,o);for(let s=0;s<i.length;s++){let a=i[s],l=s==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s&&r.start(s-1)==o.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),o.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function UU(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(i==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==i-1)&&n.push(o)}return n}class Lm extends $i{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return wo.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return wo.fromReplace(e,this.pos,this.pos+1,new Ze(Le.from(o),0,n.isLeaf?0:1))}getMap(){return Ks.empty}invert(e){return new Lm(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Lm(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Lm(n.pos,n.attr,n.value)}}$i.jsonID("attr",Lm);class Zv extends $i{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return wo.ok(r)}getMap(){return Ks.empty}invert(e){return new Zv(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Zv(n.attr,n.value)}}$i.jsonID("docAttr",Zv);let ag=class extends Error{};ag=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ag.prototype=Object.create(Error.prototype);ag.prototype.constructor=ag;ag.prototype.name="TransformError";class GN{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new sg}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ag(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Ze.empty){let o=mx(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new Ze(Le.from(r),0,0))}delete(e,n){return this.replace(e,n,Ze.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return kge(this,e,n,r),this}replaceRangeWith(e,n,r){return Tge(this,e,n,r),this}deleteRange(e,n){return Age(this,e,n),this}lift(e,n){return fge(this,e,n),this}join(e,n=1){return Cge(this,e,n),this}wrap(e,n){return mge(this,e,n),this}setBlockType(e,n=e,r,o=null){return gge(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return vge(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new Lm(e,n,r)),this}setDocAttribute(e,n){return this.step(new Zv(e,n)),this}addNodeMark(e,n){return this.step(new Gd(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof gr)n.isInSet(r.marks)&&this.step(new Wh(e,n));else{let o=r.marks,i,s=[];for(;i=n.isInSet(o);)s.push(new Wh(e,i)),o=i.removeFromSet(o);for(let a=s.length-1;a>=0;a--)this.step(s[a])}return this}split(e,n=1,r){return bge(this,e,n,r),this}addMark(e,n,r){return cge(this,e,n,r),this}removeMark(e,n,r){return uge(this,e,n,r),this}clearIncompatible(e,n,r){return zN(this,e,n,r),this}}const iA=Object.create(null);class Tt{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new zU(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Ze.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let i=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],d=e.mapping.slice(i);e.replaceRange(d.map(l.pos),d.map(c.pos),a?Ze.empty:n),a==0&&Dj(e,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:a}=o[i],l=e.mapping.slice(r),c=l.map(s.pos),d=l.map(a.pos);i?e.deleteRange(c,d):(e.replaceRangeWith(c,d,n),Dj(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new ft(e):pm(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let i=e.depth-1;i>=0;i--){let s=n<0?pm(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):pm(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new xs(e.node(0))}static atStart(e){return pm(e,e,0,0,1)||new xs(e)}static atEnd(e){return pm(e,e,e.content.size,e.childCount,-1)||new xs(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=iA[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in iA)throw new RangeError("Duplicate use of selection JSON ID "+e);return iA[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ft.between(this.$anchor,this.$head).getBookmark()}}Tt.prototype.visible=!0;class zU{constructor(e,n){this.$from=e,this.$to=n}}let Oj=!1;function Pj(t){!Oj&&!t.parent.inlineContent&&(Oj=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class ft extends Tt{constructor(e,n=e){Pj(e),Pj(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Tt.near(r);let o=e.resolve(n.map(this.anchor));return new ft(o.parent.inlineContent?o:r,r)}replace(e,n=Ze.empty){if(super.replace(e,n),n==Ze.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof ft&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new gx(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new ft(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let i=Tt.findFrom(n,r,!0)||Tt.findFrom(n,-r,!0);if(i)n=i.$head;else return Tt.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(Tt.findFrom(e,-r,!0)||Tt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new ft(e,n)}}Tt.jsonID("text",ft);class gx{constructor(e,n){this.anchor=e,this.head=n}map(e){return new gx(e.map(this.anchor),e.map(this.head))}resolve(e){return ft.between(e.resolve(this.anchor),e.resolve(this.head))}}class vt extends Tt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),i=e.resolve(o);return r?Tt.near(i):new vt(i)}content(){return new Ze(Le.from(this.node),0,0)}eq(e){return e instanceof vt&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new qN(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new vt(e.resolve(n.anchor))}static create(e,n){return new vt(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}vt.prototype.visible=!1;Tt.jsonID("node",vt);class qN{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new gx(r,r):new qN(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&vt.isSelectable(r)?new vt(n):Tt.near(n)}}class xs extends Tt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Ze.empty){if(n==Ze.empty){e.delete(0,e.doc.content.size);let r=Tt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new xs(e)}map(e){return new xs(e)}eq(e){return e instanceof xs}getBookmark(){return Rge}}Tt.jsonID("all",xs);const Rge={map(){return this},resolve(t){return new xs(t)}};function pm(t,e,n,r,o,i=!1){if(e.inlineContent)return ft.create(t,n);for(let s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let a=e.child(s);if(a.isAtom){if(!i&&vt.isSelectable(a))return vt.create(t,n-(o<0?a.nodeSize:0))}else{let l=pm(t,a,n+o,o<0?a.childCount:0,o,i);if(l)return l}n+=a.nodeSize*o}return null}function Dj(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof go||o instanceof ao))return;let i=t.mapping.maps[r],s;i.forEach((a,l,c,d)=>{s==null&&(s=d)}),t.setSelection(Tt.near(t.doc.resolve(s),n))}const Lj=1,J1=2,Vj=4;let Ige=class extends GN{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Lj)&~J1,this.storedMarks=null,this}get selectionSet(){return(this.updated&Lj)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=J1,this}ensureMarks(e){return gr.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&J1)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~J1,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||gr.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let s=this.doc.resolve(n);i=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,i)),this.selection.empty||this.setSelection(Tt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Vj,this}get scrolledIntoView(){return(this.updated&Vj)>0}};function jj(t,e){return!e||!t?t:t.bind(e)}class sv{constructor(e,n,r){this.name=e,this.init=jj(n.init,r),this.apply=jj(n.apply,r)}}const Mge=[new sv("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new sv("selection",{init(t,e){return t.selection||Tt.atStart(e.doc)},apply(t){return t.selection}}),new sv("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new sv("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class sA{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Mge.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new sv(r.key,r.spec.state,r))})}}class _h{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=o?o[s].n:0,c=o?o[s].state:this,d=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(d&&r.filterTransaction(d,s)){if(d.setMeta("appendedTransaction",e),!o){o=[];for(let f=0;f<this.config.plugins.length;f++)o.push(f<s?{state:r,n:n.length}:{state:this,n:0})}n.push(d),r=r.applyInner(d),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new _h(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let i=r[o];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new Ige(this)}static create(e){let n=new sA(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new _h(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new sA(this.schema,e.plugins),r=n.fields,o=new _h(n);for(let i=0;i<r.length;i++){let s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],i=o.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new sA(e.schema,e.plugins),i=new _h(o);return o.fields.forEach(s=>{if(s.name=="doc")i.doc=Cu.fromJSON(e.schema,n.doc);else if(s.name=="selection")i.selection=Tt.fromJSON(i.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[s.name]=c.fromJSON.call(l,e,n[a],i);return}}i[s.name]=s.init(e,i)}}),i}}function GU(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=GU(o,e,{})),n[r]=o}return n}class cn{constructor(e){this.spec=e,this.props={},e.props&&GU(e.props,this,this.props),this.key=e.key?e.key.key:qU("plugin")}getState(e){return e[this.key]}}const aA=Object.create(null);function qU(t){return t in aA?t+"$"+ ++aA[t]:(aA[t]=0,t+"$")}class Hn{constructor(e="key"){this.key=qU(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const ui=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},lg=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let MR=null;const uu=function(t,e,n){let r=MR||(MR=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},Nge=function(){MR=null},Yh=function(t,e,n,r){return n&&(Bj(t,e,n,r,-1)||Bj(t,e,n,r,1))},Oge=/^(img|br|input|textarea|hr)$/i;function Bj(t,e,n,r,o){for(var i;;){if(t==n&&e==r)return!0;if(e==(o<0?0:Na(t))){let s=t.parentNode;if(!s||s.nodeType!=1||Xb(t)||Oge.test(t.nodeName)||t.contentEditable=="false")return!1;e=ui(t)+(o<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(o<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((i=s.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=o;else return!1;else t=s,e=o<0?Na(t):0}else return!1}}function Na(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Pge(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Na(t)}else if(t.parentNode&&!Xb(t))e=ui(t),t=t.parentNode;else return null}}function Dge(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Xb(t))e=ui(t)+1,t=t.parentNode;else return null}}function Lge(t,e,n){for(let r=e==0,o=e==Na(t);r||o;){if(t==n)return!0;let i=ui(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,o=o&&i==Na(t)}}function Xb(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const yx=function(t){return t.focusNode&&Yh(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function gh(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Vge(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function jge(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Na(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Na(r.startContainer),r.startOffset)}}}const wc=typeof navigator<"u"?navigator:null,$j=typeof document<"u"?document:null,Rf=wc&&wc.userAgent||"",NR=/Edge\/(\d+)/.exec(Rf),KU=/MSIE \d/.exec(Rf),OR=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Rf),Es=!!(KU||OR||NR),tf=KU?document.documentMode:OR?+OR[1]:NR?+NR[1]:0,El=!Es&&/gecko\/(\d+)/i.test(Rf);El&&+(/Firefox\/(\d+)/.exec(Rf)||[0,0])[1];const PR=!Es&&/Chrome\/(\d+)/.exec(Rf),Pi=!!PR,WU=PR?+PR[1]:0,Qi=!Es&&!!wc&&/Apple Computer/.test(wc.vendor),cg=Qi&&(/Mobile\/\w+/.test(Rf)||!!wc&&wc.maxTouchPoints>2),Aa=cg||(wc?/Mac/.test(wc.platform):!1),Bge=wc?/Win/.test(wc.platform):!1,gu=/Android \d/.test(Rf),Qb=!!$j&&"webkitFontSmoothing"in $j.documentElement.style,$ge=Qb?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Fge(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function tu(t,e){return typeof t=="number"?t:t[e]}function Hge(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Fj(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=lg(s);continue}let a=s,l=a==i.body,c=l?Fge(i):Hge(a),d=0,f=0;if(e.top<c.top+tu(r,"top")?f=-(c.top-e.top+tu(o,"top")):e.bottom>c.bottom-tu(r,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+tu(o,"top")-c.top:e.bottom-c.bottom+tu(o,"bottom")),e.left<c.left+tu(r,"left")?d=-(c.left-e.left+tu(o,"left")):e.right>c.right-tu(r,"right")&&(d=e.right-c.right+tu(o,"right")),d||f)if(l)i.defaultView.scrollBy(d,f);else{let g=a.scrollLeft,y=a.scrollTop;f&&(a.scrollTop+=f),d&&(a.scrollLeft+=d);let b=a.scrollLeft-g,_=a.scrollTop-y;e={left:e.left-b,top:e.top-_,right:e.right-b,bottom:e.bottom-_}}let p=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(p))break;s=p=="absolute"?s.offsetParent:lg(s)}}function Uge(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let i=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=t.root.elementFromPoint(i,s);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:YU(t.dom)}}function YU(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=lg(r));return e}function zge({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;XU(n,r==0?0:r-e)}function XU(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:i}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let nm=null;function Gge(t){if(t.setActive)return t.setActive();if(nm)return t.focus(nm);let e=YU(t);t.focus(nm==null?{get preventScroll(){return nm={preventScroll:!0},!0}}:void 0),nm||(nm=!1,XU(e,0))}function QU(t,e){let n,r=2e8,o,i=0,s=e.top,a=e.top,l,c;for(let d=t.firstChild,f=0;d;d=d.nextSibling,f++){let p;if(d.nodeType==1)p=d.getClientRects();else if(d.nodeType==3)p=uu(d).getClientRects();else continue;for(let g=0;g<p.length;g++){let y=p[g];if(y.top<=s&&y.bottom>=a){s=Math.max(y.bottom,s),a=Math.min(y.top,a);let b=y.left>e.left?y.left-e.left:y.right<e.left?e.left-y.right:0;if(b<r){n=d,r=b,o=b&&n.nodeType==3?{left:y.right<e.left?y.right:y.left,top:e.top}:e,d.nodeType==1&&b&&(i=f+(e.left>=(y.left+y.right)/2?1:0));continue}}else y.top>e.top&&!l&&y.left<=e.left&&y.right>=e.left&&(l=d,c={left:Math.max(y.left,Math.min(y.right,e.left)),top:y.top});!n&&(e.left>=y.right&&e.top>=y.top||e.left>=y.left&&e.top>=y.bottom)&&(i=f+1)}}return!n&&l&&(n=l,o=c,r=0),n&&n.nodeType==3?qge(n,o):!n||r&&n.nodeType==1?{node:t,offset:i}:QU(n,o)}function qge(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let i=Ad(r,1);if(i.top!=i.bottom&&KN(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function KN(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Kge(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Wge(t,e,n){let{node:r,offset:o}=QU(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();i=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,o,i)}function Yge(t,e,n,r){let o=-1;for(let i=e,s=!1;i!=t.dom;){let a=t.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!s&&l.left>r.left||l.top>r.top?o=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),s=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function ZU(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){let s=t.childNodes[i];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(KN(e,c))return ZU(s,e,c)}}if((i=(i+1)%r)==o)break}return t}function Xge(t,e){let n=t.dom.ownerDocument,r,o=0,i=jge(n,e.left,e.top);i&&({node:r,offset:o}=i);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=t.dom.getBoundingClientRect();if(!KN(e,c)||(s=ZU(t.dom,e,c),!s))return null}if(Qi)for(let c=s;r&&c;c=lg(c))c.draggable&&(r=void 0);if(s=Kge(s,e),r){if(El&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let d=r.childNodes[o],f;d.nodeName=="IMG"&&(f=d.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&o++}let c;Qb&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=Yge(t,r,o,e))}a==null&&(a=Wge(t,s,e));let l=t.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function Hj(t){return t.top<t.bottom||t.left<t.right}function Ad(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Hj(r))return r}return Array.prototype.find.call(n,Hj)||t.getBoundingClientRect()}const Qge=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function JU(t,e,n){let{node:r,offset:o,atom:i}=t.docView.domFromPos(e,n<0?-1:1),s=Qb||El;if(r.nodeType==3)if(s&&(Qge.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let l=Ad(uu(r,o,o),n);if(El&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=Ad(uu(r,o-1,o-1),-1);if(c.top==l.top){let d=Ad(uu(r,o,o+1),-1);if(d.top!=l.top)return Ky(d,d.left<c.left)}}return l}else{let l=o,c=o,d=n<0?1:-1;return n<0&&!o?(c++,d=-1):n>=0&&o==r.nodeValue.length?(l--,d=1):n<0?l--:c++,Ky(Ad(uu(r,l,c),d),d<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&o&&(n<0||o==Na(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return lA(l.getBoundingClientRect(),!1)}if(i==null&&o<Na(r)){let l=r.childNodes[o];if(l.nodeType==1)return lA(l.getBoundingClientRect(),!0)}return lA(r.getBoundingClientRect(),n>=0)}if(i==null&&o&&(n<0||o==Na(r))){let l=r.childNodes[o-1],c=l.nodeType==3?uu(l,Na(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ky(Ad(c,1),!1)}if(i==null&&o<Na(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?uu(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return Ky(Ad(c,-1),!0)}return Ky(Ad(r.nodeType==3?uu(r):r,-n),n>=0)}function Ky(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function lA(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function ez(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function Zge(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return ez(t,e,()=>{let{node:i}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let s=JU(t,o.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=uu(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let d=l[c];if(d.bottom>d.top+1&&(n=="up"?s.top-d.top>(d.bottom-s.top)*2:d.bottom-s.bottom>(s.bottom-d.top)*2))return!1}}return!0})}const Jge=/[\u0590-\u08ac]/;function eye(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=t.domSelection();return a?!Jge.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:s:ez(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:d,anchorOffset:f}=t.domSelectionRange(),p=a.caretBidiLevel;a.modify("move",n,"character");let g=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:y,focusOffset:b}=t.domSelectionRange(),_=y&&!g.contains(y.nodeType==1?y:y.parentNode)||l==y&&c==b;try{a.collapse(d,f),l&&(l!=d||c!=f)&&a.extend&&a.extend(l,c)}catch{}return p!=null&&(a.caretBidiLevel=p),_}):r.pos==r.start()||r.pos==r.end()}let Uj=null,zj=null,Gj=!1;function tye(t,e,n){return Uj==e&&zj==n?Gj:(Uj=e,zj=n,Gj=n=="up"||n=="down"?Zge(t,e,n):eye(t,e,n))}const ja=0,qj=1,xh=2,Cc=3;class Zb{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=ja,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,s;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(s)+s.size:this.posAtStart}else{let i,s;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>ui(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!1;break}if(i.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!0;break}if(i.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let i=this.getDesc(o),s;if(i&&(!n||i.node))if(r&&(s=i.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],i=r+o.size;if(r==e&&i!=r){for(;!o.border&&o.children.length;)for(let s=0;s<o.children.length;s++){let a=o.children[s];if(a.size){o=a;break}}return o}if(e<i)return o.descAt(e-r-o.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let i=0;r<this.children.length;r++){let s=this.children[r],a=i+s.size;if(a>e||s instanceof nz){o=e-i;break}i=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof tz&&i.side>=0;r--);if(n<=0){let i,s=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,s=!1);return i&&n&&s&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?ui(i.dom)+1:0}}else{let i,s=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,s=!1);return i&&s&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?ui(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(o==-1&&e<=c){let d=s+l.border;if(e>=d&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,d);e=s;for(let f=a;f>0;f--){let p=this.children[f-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){o=ui(p.dom)+1;break}e-=p.size}o==-1&&(o=0)}if(o>-1&&(c>n||a==this.children.length-1)){n=c;for(let d=a+1;d<this.children.length;d++){let f=this.children[d];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){i=ui(f.dom);break}n+=f.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let i=Math.min(e,n),s=Math.max(e,n);for(let g=0,y=0;g<this.children.length;g++){let b=this.children[g],_=y+b.size;if(i>y&&s<_)return b.setSelection(e-y-b.border,n-y-b.border,r,o);y=_}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),d=r.domSelectionRange(),f=!1;if((El||Qi)&&e==n){let{node:g,offset:y}=a;if(g.nodeType==3){if(f=!!(y&&g.nodeValue[y-1]==`
`),f&&y==g.nodeValue.length)for(let b=g,_;b;b=b.parentNode){if(_=b.nextSibling){_.nodeName=="BR"&&(a=l={node:_.parentNode,offset:ui(_)+1});break}let k=b.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{let b=g.childNodes[y-1];f=b&&(b.nodeName=="BR"||b.contentEditable=="false")}}if(El&&d.focusNode&&d.focusNode!=l.node&&d.focusNode.nodeType==1){let g=d.focusNode.childNodes[d.focusOffset];g&&g.contentEditable=="false"&&(o=!0)}if(!(o||f&&Qi)&&Yh(a.node,a.offset,d.anchorNode,d.anchorOffset)&&Yh(l.node,l.offset,d.focusNode,d.focusOffset))return;let p=!1;if((c.extend||e==n)&&!f){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),p=!0}catch{}}if(!p){if(e>n){let y=a;a=l,l=y}let g=document.createRange();g.setEnd(l.node,l.offset),g.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(g)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let i=this.children[o],s=r+i.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let a=r+i.border,l=s-i.border;if(e>=a&&n<=l){this.dirty=e==r||n==s?xh:qj,e==a&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Cc:i.markDirty(e-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?xh:Cc}r=s}this.dirty=xh}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?xh:qj;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class tz extends Zb{constructor(e,n,r,o){let i,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!i)return o;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==ja&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class nye extends Zb{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Xh extends Zb{constructor(e,n,r,o,i){super(e,[],r,o),this.mark=n,this.spec=i}static create(e,n,r,o){let i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return(!s||!s.dom)&&(s=ju.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Xh(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Cc||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Cc&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ja){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=ja}}slice(e,n,r){let o=Xh.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=LR(i,n,s,r)),e>0&&(i=LR(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class nf extends Zb{constructor(e,n,r,o,i,s,a,l,c){super(e,[],i,s),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,i,s){let a=i.nodeViews[n.type.name],l,c=a&&a(n,i,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,o),d=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!d)d=document.createTextNode(n.text);else if(d.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else d||({dom:d,contentDOM:f}=ju.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&d.nodeName!="BR"&&(d.hasAttribute("contenteditable")||(d.contentEditable="false"),n.type.spec.draggable&&(d.draggable=!0));let p=d;return d=iz(d,r,n),c?l=new rye(e,n,r,o,d,f||null,p,c,i,s+1):n.isText?new vx(e,n,r,o,d,p,i):new nf(e,n,r,o,d,f||null,p,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Le.empty)}return e}matchesNode(e,n,r){return this.dirty==ja&&e.eq(this.node)&&UC(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,i=e.composing?this.localCompositionInfo(e,n):null,s=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new iye(this,s&&s.node,e);lye(this.node,this.innerDeco,(c,d,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!f&&l.syncToMarks(d==this.node.childCount?gr.none:this.node.child(d).marks,r,e),l.placeWidget(c,e,o)},(c,d,f,p)=>{l.syncToMarks(c.marks,r,e);let g;l.findNodeMatch(c,d,f,p)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(g=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,d,f,g,e)||l.updateNextNode(c,d,f,e,p,o)||l.addNode(c,d,f,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==xh)&&(s&&this.protectLocalComposition(e,s),rz(this.contentDOM,this.children,e),cg&&cye(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof ft)||r<n||o>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let s=i.nodeValue,a=uye(this.node.content,s,r-n,o-n);return a<0?null:{node:i,pos:a,text:s}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new nye(this,i,n,o);e.input.compositionNodes.push(s),this.children=LR(this.children,r,r+o.length,e,s)}update(e,n,r,o){return this.dirty==Cc||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=ja}updateOuterDeco(e){if(UC(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=oz(this.dom,this.nodeDOM,DR(this.outerDeco,this.node,n),DR(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Kj(t,e,n,r,o){iz(r,e,t);let i=new nf(void 0,t,e,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class vx extends nf{constructor(e,n,r,o,i,s,a){super(e,n,r,o,i,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==Cc||this.dirty!=ja&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ja||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=ja,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),i=document.createTextNode(o.text);return new vx(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Cc)}get domAtom(){return!1}isText(e){return this.node.text==e}}class nz extends Zb{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ja&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class rye extends nf{constructor(e,n,r,o,i,s,a,l,c,d){super(e,n,r,o,i,s,a,c,d),this.spec=l}update(e,n,r,o){if(this.dirty==Cc)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function rz(t,e,n){let r=t.firstChild,o=!1;for(let i=0;i<e.length;i++){let s=e[i],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=Wj(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(s instanceof Xh){let l=r?r.previousSibling:t.lastChild;rz(s.contentDOM,s.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=Wj(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const Ev=function(t){t&&(this.nodeName=t)};Ev.prototype=Object.create(null);const Eh=[new Ev];function DR(t,e,n){if(t.length==0)return Eh;let r=n?Eh[0]:new Ev,o=[r];for(let i=0;i<t.length;i++){let s=t[i].type.attrs;if(s){s.nodeName&&o.push(r=new Ev(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&o.length==1&&o.push(r=new Ev(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function oz(t,e,n,r){if(n==Eh&&r==Eh)return e;let o=e;for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(i){let l;a&&a.nodeName==s.nodeName&&o!=t&&(l=o.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=Eh[0]),o=l}oye(o,a||Eh[0],s)}return o}function oye(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)o.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<o.length;i++)r.indexOf(o[i])==-1&&t.classList.add(o[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function iz(t,e,n){return oz(t,t,Eh,DR(e,n,t.nodeType!=1))}function UC(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Wj(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class iye{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=sye(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,i=this.stack.length>>1,s=Math.min(i,e.length);for(;o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=ja,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[i])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Xh.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(e,n,r,o){let i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))i=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,o,i){let s=this.top.children[o];return s.dirty==Cc&&s.dom==s.contentDOM&&(s.dirty=xh),s.update(e,n,r,i)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,i,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof nf){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let d=l.dom,f,p=this.isLocked(d)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Cc&&UC(n,l.outerDeco));if(!p&&l.update(e,n,r,o))return this.destroyBetween(this.index,a),l.dom!=d&&(this.changed=!0),this.index++,!0;if(!p&&(f=this.recreateWrapper(l,e,n,r,o,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=f,f.contentDOM&&(f.dirty=xh,f.updateChildren(o,s+1),f.dirty=ja),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,i,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!UC(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=nf.create(this.top,n,r,o,i,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,o,i){let s=nf.create(this.top,e,n,r,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let i=new tz(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Xh;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof vx)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Qi||Pi)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new nz(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function sye(t,e){let n=e,r=n.children.length,o=t.childCount,i=new Map,s=[];e:for(;o>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Xh)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}function aye(t,e){return t.type.side-e.type.side}function lye(t,e,n,r){let o=e.locals(t),i=0;if(o.length==0){for(let c=0;c<t.childCount;c++){let d=t.child(c);r(d,o,e.forChild(i,d),c),i+=d.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let d,f;for(;s<o.length&&o[s].to==i;){let _=o[s++];_.widget&&(d?(f||(f=[d])).push(_):d=_)}if(d)if(f){f.sort(aye);for(let _=0;_<f.length;_++)n(f[_],c,!!l)}else n(d,c,!!l);let p,g;if(l)g=-1,p=l,l=null;else if(c<t.childCount)g=c,p=t.child(c++);else break;for(let _=0;_<a.length;_++)a[_].to<=i&&a.splice(_--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)a.push(o[s++]);let y=i+p.nodeSize;if(p.isText){let _=y;s<o.length&&o[s].from<_&&(_=o[s].from);for(let k=0;k<a.length;k++)a[k].to<_&&(_=a[k].to);_<y&&(l=p.cut(_-i),p=p.cut(0,_-i),y=_,g=-1)}else for(;s<o.length&&o[s].to<y;)s++;let b=p.isInline&&!p.isLeaf?a.filter(_=>!_.inline):a.slice();r(p,b,e.forChild(i,p),g),i=y}}function cye(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function uye(t,e,n,r){for(let o=0,i=0;o<t.childCount&&i<=r;){let s=t.child(o++),a=i;if(i+=s.nodeSize,!s.isText)continue;let l=s.text;for(;o<t.childCount;){let c=t.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function LR(t,e,n,r,o){let i=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],c=a,d=a+=l.size;c>=n||d<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),o&&(i.push(o),o=void 0),d>n&&i.push(l.slice(n-c,l.size,r)))}return i}function WN(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),i=o&&o.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(yx(n)){for(l=s;o&&!o.node;)o=o.parent;let f=o.node;if(o&&f.isAtom&&vt.isSelectable(f)&&o.parent&&!(f.isInline&&Lge(n.focusNode,n.focusOffset,o.dom))){let p=o.posBefore;c=new vt(s==p?a:r.resolve(p))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let f=s,p=s;for(let g=0;g<n.rangeCount;g++){let y=n.getRangeAt(g);f=Math.min(f,t.docView.posFromDOM(y.startContainer,y.startOffset,1)),p=Math.max(p,t.docView.posFromDOM(y.endContainer,y.endOffset,-1))}if(f<0)return null;[l,s]=p==t.state.selection.anchor?[p,f]:[f,p],a=r.resolve(s)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let d=r.resolve(l);if(!c){let f=e=="pointer"||t.state.selection.head<a.pos&&!i?1:-1;c=YN(t,d,a,f)}return c}function sz(t){return t.editable?t.hasFocus():lz(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function xu(t,e=!1){let n=t.state.selection;if(az(t,n),!!sz(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Pi){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&Yh(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)fye(t);else{let{anchor:r,head:o}=n,i,s;Yj&&!(n instanceof ft)&&(n.$from.parent.inlineContent||(i=Xj(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=Xj(t,n.to))),t.docView.setSelection(r,o,t,e),Yj&&(i&&Qj(i),s&&Qj(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&dye(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Yj=Qi||Pi&&WU<63;function Xj(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(Qi&&o&&o.contentEditable=="false")return cA(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return cA(o);if(i)return cA(i)}}function cA(t){return t.contentEditable="true",Qi&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Qj(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function dye(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!sz(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function fye(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,ui(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&Es&&tf<=11&&(r.disabled=!0,r.disabled=!1)}function az(t,e){if(e instanceof vt){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Zj(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Zj(t)}function Zj(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function YN(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||ft.between(e,n,r)}function Jj(t){return t.editable&&!t.hasFocus()?!1:lz(t)}function lz(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function hye(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Yh(e.node,e.offset,n.anchorNode,n.anchorOffset)}function VR(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return i&&Tt.findFrom(i,e)}function Nd(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function e6(t,e,n){let r=t.state.selection;if(r instanceof ft)if(n.indexOf("s")>-1){let{$head:o}=r,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=t.state.doc.resolve(o.pos+i.nodeSize*(e<0?-1:1));return Nd(t,new ft(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=VR(t.state,e);return o&&o instanceof vt?Nd(t,o):!1}else if(!(Aa&&n.indexOf("m")>-1)){let o=r.$head,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let a=e<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?vt.isSelectable(i)?Nd(t,new vt(e<0?t.state.doc.resolve(o.pos-i.nodeSize):o)):Qb?Nd(t,new ft(t.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof vt&&r.node.isInline)return Nd(t,new ft(e>0?r.$to:r.$from));{let o=VR(t.state,e);return o?Nd(t,o):!1}}}function zC(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function kv(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function rm(t,e){return e<0?pye(t):mye(t)}function pye(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,i,s=!1;for(El&&n.nodeType==1&&r<zC(n)&&kv(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(kv(a,-1))o=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(cz(n))break;{let a=n.previousSibling;for(;a&&kv(a,-1);)o=n.parentNode,i=ui(a),a=a.previousSibling;if(a)n=a,r=zC(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?jR(t,n,r):o&&jR(t,o,i)}function mye(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=zC(n),i,s;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(kv(a,1))i=n,s=++r;else break}else{if(cz(n))break;{let a=n.nextSibling;for(;a&&kv(a,1);)i=a.parentNode,s=ui(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=zC(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}i&&jR(t,i,s)}function cz(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function gye(t,e){for(;t&&e==t.childNodes.length&&!Xb(t);)e=ui(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function yye(t,e){for(;t&&!e&&!Xb(t);)e=ui(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function jR(t,e,n){if(e.nodeType!=3){let i,s;(s=gye(e,n))?(e=s,n=0):(i=yye(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(yx(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&xu(t)},50)}function t6(t,e){let n=t.state.doc.resolve(e);if(!(Pi||Bge)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left<o.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function n6(t,e,n){let r=t.state.selection;if(r instanceof ft&&!r.empty||n.indexOf("s")>-1||Aa&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=VR(t.state,e);if(s&&s instanceof vt)return Nd(t,s)}if(!o.parent.inlineContent){let s=e<0?o:i,a=r instanceof xs?Tt.near(s,e):Tt.findFrom(s,e);return a?Nd(t,a):!1}return!1}function r6(t,e){if(!(t.state.selection instanceof ft))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let s=t.state.tr;return e<0?s.delete(n.pos-i.nodeSize,n.pos):s.delete(n.pos,n.pos+i.nodeSize),t.dispatch(s),!0}return!1}function o6(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function vye(t){if(!Qi||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;o6(t,r,"true"),setTimeout(()=>o6(t,r,"false"),20)}return!1}function bye(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function wye(t,e){let n=e.keyCode,r=bye(e);if(n==8||Aa&&n==72&&r=="c")return r6(t,-1)||rm(t,-1);if(n==46&&!e.shiftKey||Aa&&n==68&&r=="c")return r6(t,1)||rm(t,1);if(n==13||n==27)return!0;if(n==37||Aa&&n==66&&r=="c"){let o=n==37?t6(t,t.state.selection.from)=="ltr"?-1:1:-1;return e6(t,o,r)||rm(t,o)}else if(n==39||Aa&&n==70&&r=="c"){let o=n==39?t6(t,t.state.selection.from)=="ltr"?1:-1:1;return e6(t,o,r)||rm(t,o)}else{if(n==38||Aa&&n==80&&r=="c")return n6(t,-1,r)||rm(t,-1);if(n==40||Aa&&n==78&&r=="c")return vye(t)||n6(t,1,r)||rm(t,1);if(r==(Aa?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function XN(t,e){t.someProp("transformCopied",g=>{e=g(e,t)});let n=[],{content:r,openStart:o,openEnd:i}=e;for(;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;let g=r.firstChild;n.push(g.type.name,g.attrs!=g.type.defaultAttrs?g.attrs:null),r=g.content}let s=t.someProp("clipboardSerializer")||ju.fromSchema(t.state.schema),a=mz(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,d,f=0;for(;c&&c.nodeType==1&&(d=pz[c.nodeName.toLowerCase()]);){for(let g=d.length-1;g>=0;g--){let y=a.createElement(d[g]);for(;l.firstChild;)y.appendChild(l.firstChild);l.appendChild(y),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${i}${f?` -${f}`:""} ${JSON.stringify(n)}`);let p=t.someProp("clipboardTextSerializer",g=>g(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:p,slice:e}}function uz(t,e,n,r,o){let i=o.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=e&&(r||i||!n);if(l){if(t.someProp("transformPastedText",p=>{e=p(e,i||r,t)}),i)return e?new Ze(Le.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Ze.empty;let f=t.someProp("clipboardTextParser",p=>p(e,o,r,t));if(f)a=f;else{let p=o.marks(),{schema:g}=t.state,y=ju.fromSchema(g);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(b=>{let _=s.appendChild(document.createElement("p"));b&&_.appendChild(y.serializeNode(g.text(b,p)))})}}else t.someProp("transformPastedHTML",f=>{n=f(n,t)}),s=xye(n),Qb&&Eye(s);let c=s&&s.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let f=+d[3];f>0;f--){let p=s.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;s=p}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Su.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||d),context:o,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!Cye.test(p.parentNode.nodeName)?{ignore:!0}:null}})),d)a=kye(i6(a,+d[1],+d[2]),d[4]);else if(a=Ze.maxOpen(Sye(a.content,o),!0),a.openStart||a.openEnd){let f=0,p=0;for(let g=a.content.firstChild;f<a.openStart&&!g.type.spec.isolating;f++,g=g.firstChild);for(let g=a.content.lastChild;p<a.openEnd&&!g.type.spec.isolating;p++,g=g.lastChild);a=i6(a,f,p)}return t.someProp("transformPasted",f=>{a=f(a,t)}),a}const Cye=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Sye(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),i,s=[];if(t.forEach(a=>{if(!s)return;let l=o.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&i.length&&fz(l,i,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=hz(s[s.length-1],i.length));let d=dz(a,l);s.push(d),o=o.matchType(d.type),i=l}}),s)return Le.from(s)}return t}function dz(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Le.from(t));return t}function fz(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let i=fz(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(Le.from(dz(n,t,o+1))))}}function hz(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,hz(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Le.empty,!0);return t.copy(n.append(r))}function BR(t,e,n,r,o,i){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(i=0),o<r-1&&(a=BR(a,e,n,r,o+1,i)),o>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(Le.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function i6(t,e,n){return e<t.openStart&&(t=new Ze(BR(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Ze(BR(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const pz={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let s6=null;function mz(){return s6||(s6=document.implementation.createHTMLDocument("title"))}let uA=null;function _ye(t){let e=window.trustedTypes;return e?(uA||(uA=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),uA.createHTML(t)):t}function xye(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=mz().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&pz[r[1].toLowerCase()])&&(t=o.map(i=>"<"+i+">").join("")+t+o.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=_ye(t),o)for(let i=0;i<o.length;i++)n=n.querySelector(o[i])||n;return n}function Eye(t){let e=t.querySelectorAll(Pi?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function kye(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:i,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=Le.from(l.create(r[a+1],o)),i++,s++}return new Ze(o,i,s)}const Zi={},Ji={},Tye={touchstart:!0,touchmove:!0};class Aye{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Rye(t){for(let e in Zi){let n=Zi[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Mye(t,r)&&!QN(t,r)&&(t.editable||!(r.type in Ji))&&n(t,r)},Tye[e]?{passive:!0}:void 0)}Qi&&t.dom.addEventListener("input",()=>null),$R(t)}function qd(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Iye(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function $R(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>QN(t,r))})}function QN(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Mye(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Nye(t,e){!QN(t,e)&&Zi[e.type]&&(t.editable||!(e.type in Ji))&&Zi[e.type](t,e)}Ji.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!yz(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(gu&&Pi&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),cg&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,gh(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||wye(t,n)?n.preventDefault():qd(t,"key")};Ji.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ji.keypress=(t,e)=>{let n=e;if(yz(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Aa&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof ft)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode),i=()=>t.state.tr.insertText(o).scrollIntoView();!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o,i))&&t.dispatch(i()),n.preventDefault()}};function bx(t){return{left:t.clientX,top:t.clientY}}function Oye(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function ZN(t,e,n,r,o){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(t.someProp(e,a=>s>i.depth?a(t,n,i.nodeAfter,i.before(s),o,!0):a(t,n,i.node(s),i.before(s),o,!1)))return!0;return!1}function Vm(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Pye(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&vt.isSelectable(r)?(Vm(t,new vt(n)),!0):!1}function Dye(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof vt&&(r=n.node);let i=t.state.doc.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s);if(vt.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?o=i.before(n.$from.depth):o=i.before(s);break}}return o!=null?(Vm(t,vt.create(t.state.doc,o)),!0):!1}function Lye(t,e,n,r,o){return ZN(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(o?Dye(t,n):Pye(t,n))}function Vye(t,e,n,r){return ZN(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function jye(t,e,n,r){return ZN(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||Bye(t,n,r)}function Bye(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Vm(t,ft.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)Vm(t,ft.create(r,a+1,a+1+s.content.size));else if(vt.isSelectable(s))Vm(t,vt.create(r,a));else continue;return!0}}function JN(t){return GC(t)}const gz=Aa?"metaKey":"ctrlKey";Zi.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=JN(t),o=Date.now(),i="singleClick";o-t.input.lastClick.time<500&&Oye(n,t.input.lastClick)&&!n[gz]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i,button:n.button};let s=t.posAtCoords(bx(n));s&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new $ye(t,s,n,!!r)):(i=="doubleClick"?Vye:jye)(t,s.pos,s.inside,n)?n.preventDefault():qd(t,"pointer"))};class $ye{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[gz],this.allowDefault=r.shiftKey;let i,s;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),s=n.inside;else{let d=e.state.doc.resolve(n.pos);i=d.parent,s=d.depth?d.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof vt&&c.from<=s&&c.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&El&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),qd(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>xu(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(bx(e))),this.updateAllowDefault(e),this.allowDefault||!n?qd(this.view,"pointer"):Lye(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Qi&&this.mightDrag&&!this.mightDrag.node.isAtom||Pi&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Vm(this.view,Tt.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):qd(this.view,"pointer")}move(e){this.updateAllowDefault(e),qd(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Zi.touchstart=t=>{t.input.lastTouch=Date.now(),JN(t),qd(t,"pointer")};Zi.touchmove=t=>{t.input.lastTouch=Date.now(),qd(t,"pointer")};Zi.contextmenu=t=>JN(t);function yz(t,e){return t.composing?!0:Qi&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Fye=gu?5e3:-1;Ji.compositionstart=Ji.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof ft&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),GC(t,!0),t.markCursor=null;else if(GC(t,!e.selection.empty),El&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){let a=t.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else o=s,i=-1}}t.input.composing=!0}vz(t,Fye)};Ji.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,vz(t,20))};function vz(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>GC(t),e))}function bz(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Uye());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Hye(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Pge(e.focusNode,e.focusOffset),r=Dge(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function Uye(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function GC(t,e=!1){if(!(gu&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),bz(t),e||t.docView&&t.docView.dirty){let n=WN(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function zye(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Jv=Es&&tf<15||cg&&$ge<604;Zi.copy=Ji.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let i=Jv?null:n.clipboardData,s=r.content(),{dom:a,text:l}=XN(t,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):zye(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Gye(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function qye(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?eb(t,r.value,null,o,e):eb(t,r.textContent,r.innerHTML,o,e)},50)}function eb(t,e,n,r,o){let i=uz(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,o,i||Ze.empty)))return!0;if(!i)return!1;let s=Gye(i),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function wz(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ji.paste=(t,e)=>{let n=e;if(t.composing&&!gu)return;let r=Jv?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&eb(t,wz(r),r.getData("text/html"),o,n)?n.preventDefault():qye(t,n)};class Cz{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Kye=Aa?"altKey":"ctrlKey";function Sz(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[Kye]}Zi.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,i=o.empty?null:t.posAtCoords(bx(n)),s;if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof vt?o.to-1:o.to))){if(r&&r.mightDrag)s=vt.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=t.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=t.docView&&(s=vt.create(t.state.doc,f.posBefore))}}let a=(s||t.state.selection).content(),{dom:l,text:c,slice:d}=XN(t,a);(!n.dataTransfer.files.length||!Pi||WU>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Jv?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Jv||n.dataTransfer.setData("text/plain",c),t.dragging=new Cz(d,Sz(t,n),s)};Zi.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ji.dragover=Ji.dragenter=(t,e)=>e.preventDefault();Ji.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(bx(n));if(!o)return;let i=t.state.doc.resolve(o.pos),s=r&&r.slice;s?t.someProp("transformPasted",y=>{s=y(s,t)}):s=uz(t,wz(n.dataTransfer),Jv?null:n.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&Sz(t,n));if(t.someProp("handleDrop",y=>y(t,n,s||Ze.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?BU(t.state.doc,i.pos,s):i.pos;l==null&&(l=i.pos);let c=t.state.tr;if(a){let{node:y}=r;y?y.replace(c):c.deleteSelection()}let d=c.mapping.map(l),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,p=c.doc;if(f?c.replaceRangeWith(d,d,s.content.firstChild):c.replaceRange(d,d,s),c.doc.eq(p))return;let g=c.doc.resolve(d);if(f&&vt.isSelectable(s.content.firstChild)&&g.nodeAfter&&g.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new vt(g));else{let y=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((b,_,k,M)=>y=M),c.setSelection(YN(t,g,c.doc.resolve(y)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Zi.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&xu(t)},20))};Zi.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Zi.beforeinput=(t,e)=>{if(Pi&&gu&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,gh(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in Ji)Zi[t]=Ji[t];function tb(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class qC{constructor(e,n){this.toDOM=e,this.spec=n||Dh,this.side=this.spec.side||0}map(e,n,r,o){let{pos:i,deleted:s}=e.mapResult(n.from+o,this.side<0?-1:1);return s?null:new dr(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof qC&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&tb(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class rf{constructor(e,n){this.attrs=e,this.spec=n||Dh}map(e,n,r,o){let i=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new dr(i,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof rf&&tb(this.attrs,e.attrs)&&tb(this.spec,e.spec)}static is(e){return e.type instanceof rf}destroy(){}}class eO{constructor(e,n){this.attrs=e,this.spec=n||Dh}map(e,n,r,o){let i=e.mapResult(n.from+o,1);if(i.deleted)return null;let s=e.mapResult(n.to+o,-1);return s.deleted||s.pos<=i.pos?null:new dr(i.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),i;return o==n.from&&!(i=e.child(r)).isText&&o+i.nodeSize==n.to}eq(e){return this==e||e instanceof eO&&tb(this.attrs,e.attrs)&&tb(this.spec,e.spec)}destroy(){}}class dr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new dr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new dr(e,e,new qC(n,r))}static inline(e,n,r,o){return new dr(e,n,new rf(r,o))}static node(e,n,r,o){return new dr(e,n,new eO(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof rf}get widget(){return this.type instanceof qC}}const mm=[],Dh={};class In{constructor(e,n){this.local=e.length?e:mm,this.children=n.length?n:mm}static create(e,n){return n.length?KC(n,e,0,Dh):Ai}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,i){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,o+a,i)}}map(e,n,r){return this==Ai||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Dh)}mapInner(e,n,r,o,i){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(n,l)?(s||(s=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?Wye(this.children,s||[],e,n,r,o,i):s?new In(s.sort(Lh),mm):Ai}add(e,n){return n.length?this==Ai?In.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,i=0;e.forEach((a,l)=>{let c=l+r,d;if(d=xz(n,a,c)){for(o||(o=this.children.slice());i<o.length&&o[i]<l;)i+=3;o[i]==l?o[i+2]=o[i+2].addInner(a,d,c+1):o.splice(i,0,l,l+a.nodeSize,KC(d,a,c+1,Dh)),i+=3}});let s=_z(i?Ez(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new In(s.length?this.local.concat(s).sort(Lh):this.local,o||this.children)}remove(e){return e.length==0||this==Ai?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let i=0;i<r.length;i+=3){let s,a=r[i]+n,l=r[i+1]+n;for(let d=0,f;d<e.length;d++)(f=e[d])&&f.from>a&&f.to<l&&(e[d]=null,(s||(s=[])).push(f));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(s,a+1);c!=Ai?r[i+2]=c:(r.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<e.length;i++)if(s=e[i])for(let a=0;a<o.length;a++)o[a].eq(s,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new In(o,r):Ai}forChild(e,n){if(this==Ai)return this;if(n.isLeaf)return In.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,s=i+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof rf){let c=Math.max(i,l.from)-i,d=Math.min(s,l.to)-i;c<d&&(o||(o=[])).push(l.copy(c,d))}}if(o){let a=new In(o.sort(Lh),mm);return r?new jd([a,r]):a}return r||Ai}eq(e){if(this==e)return!0;if(!(e instanceof In)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return tO(this.localsInner(e))}localsInner(e){if(this==Ai)return mm;if(e.inlineContent||!this.local.some(rf.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof rf||n.push(this.local[r]);return n}forEachSet(e){e(this)}}In.empty=new In([],[]);In.removeOverlap=tO;const Ai=In.empty;class jd{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,Dh));return jd.from(r)}forChild(e,n){if(n.isLeaf)return In.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(e,n);i!=Ai&&(i instanceof jd?r=r.concat(i.members):r.push(i))}return jd.from(r)}eq(e){if(!(e instanceof jd)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let s=0;s<i.length;s++)n.push(i[s])}}return n?tO(r?n:n.sort(Lh)):mm}static from(e){switch(e.length){case 0:return Ai;case 1:return e[0];default:return new jd(e.every(n=>n instanceof In)?e:e.reduce((n,r)=>n.concat(r instanceof In?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function Wye(t,e,n,r,o,i,s){let a=t.slice();for(let c=0,d=i;c<n.maps.length;c++){let f=0;n.maps[c].forEach((p,g,y,b)=>{let _=b-y-(g-p);for(let k=0;k<a.length;k+=3){let M=a[k+1];if(M<0||p>M+d-f)continue;let N=a[k]+d-f;g>=N?a[k+1]=p<=N?-2:-1:p>=d&&_&&(a[k]+=_,a[k+1]+=_)}f+=_}),d=n.maps[c].map(d,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let d=n.map(t[c]+i),f=d-o;if(f<0||f>=r.content.size){l=!0;continue}let p=n.map(t[c+1]+i,-1),g=p-o,{index:y,offset:b}=r.content.findIndex(f),_=r.maybeChild(y);if(_&&b==f&&b+_.nodeSize==g){let k=a[c+2].mapInner(n,_,d+1,t[c]+i+1,s);k!=Ai?(a[c]=f,a[c+1]=g,a[c+2]=k):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=Yye(a,t,e,n,o,i,s),d=KC(c,r,0,s);e=d.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,p=0;f<d.children.length;f+=3){let g=d.children[f];for(;p<a.length&&a[p]<g;)p+=3;a.splice(p,0,d.children[f],d.children[f+1],d.children[f+2])}}return new In(e.sort(Lh),a)}function _z(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new dr(o.from+e,o.to+e,o.type))}return n}function Yye(t,e,n,r,o,i,s){function a(l,c){for(let d=0;d<l.local.length;d++){let f=l.local[d].map(r,o,c);f?n.push(f):s.onRemove&&s.onRemove(l.local[d].spec)}for(let d=0;d<l.children.length;d+=3)a(l.children[d+2],l.children[d]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+i+1);return n}function xz(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let i=0,s;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function Ez(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function KC(t,e,n,r){let o=[],i=!1;e.forEach((a,l)=>{let c=xz(t,a,l+n);if(c){i=!0;let d=KC(c,a,n+l+1,r);d!=Ai&&o.push(l,l+a.nodeSize,d)}});let s=_z(i?Ez(t):t,-n).sort(Lh);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new In(s,o):Ai}function Lh(t,e){return t.from-e.from||t.to-e.to}function tO(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let i=e[o];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),a6(e,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),a6(e,o,r.copy(i.from,r.to)));break}}}return e}function a6(t,e,n){for(;e<t.length&&Lh(n,t[e])>0;)e++;t.splice(e,0,n)}function dA(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Ai&&e.push(r)}),t.cursorWrapper&&e.push(In.create(t.state.doc,[t.cursorWrapper.deco])),jd.from(e)}const Xye={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Qye=Es&&tf<=11;class Zye{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Jye{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Zye,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);Es&&tf<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),Qye&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Xye)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Jj(this.view)){if(this.suppressingSelectionUpdates)return xu(this.view);if(Es&&tf<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Yh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=lg(i))n.add(i);for(let i=e.anchorNode;i;i=lg(i))if(n.has(i)){r=i;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Jj(e)&&!this.ignoreSelectionChange(r),i=-1,s=-1,a=!1,l=[];if(e.editable)for(let d=0;d<n.length;d++){let f=this.registerMutation(n[d],l);f&&(i=i<0?f.from:Math.min(f.from,i),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(a=!0))}if(El&&l.length){let d=l.filter(f=>f.nodeName=="BR");if(d.length==2){let[f,p]=d;f.parentNode&&f.parentNode.parentNode==p.parentNode?p.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let p of d){let g=p.parentNode;g&&g.nodeName=="LI"&&(!f||nve(e,f)!=g)&&p.remove()}}}let c=null;i<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&yx(r)&&(c=WN(e))&&c.eq(Tt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,xu(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||o)&&(i>-1&&(e.docView.markDirty(i,s),eve(e)),this.handleDOMChange(i,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||xu(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let d=0;d<e.addedNodes.length;d++){let f=e.addedNodes[d];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,i=e.nextSibling;if(Es&&tf<=11&&e.addedNodes.length)for(let d=0;d<e.addedNodes.length;d++){let{previousSibling:f,nextSibling:p}=e.addedNodes[d];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(o=f),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(i=p)}let s=o&&o.parentNode==e.target?ui(o)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=i&&i.parentNode==e.target?ui(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let l6=new WeakMap,c6=!1;function eve(t){if(!l6.has(t)&&(l6.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=El,c6)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),c6=!0}}function u6(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return Yh(s.node,s.offset,o,i)&&([n,r,o,i]=[o,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function tve(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return u6(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?u6(t,n):null}function nve(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function rve(t,e,n){let{node:r,fromOffset:o,toOffset:i,from:s,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,d=l.anchorNode;if(d&&t.dom.contains(d.nodeType==1?d:d.parentNode)&&(c=[{node:d,offset:l.anchorOffset}],yx(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Pi&&t.input.lastKeyCode===8)for(let _=i;_>o;_--){let k=r.childNodes[_-1],M=k.pmViewDesc;if(k.nodeName=="BR"&&!M){i=_;break}if(!M||M.size)break}let f=t.state.doc,p=t.someProp("domParser")||Su.fromSchema(t.state.schema),g=f.resolve(s),y=null,b=p.parse(r,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:o,to:i,preserveWhitespace:g.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:ove,context:g});if(c&&c[0].pos!=null){let _=c[0].pos,k=c[1]&&c[1].pos;k==null&&(k=_),y={anchor:_+s,head:k+s}}return{doc:b,sel:y,from:s,to:a}}function ove(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Qi&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Qi&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const ive=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function sve(t,e,n,r,o){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let R=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,I=WN(t,R);if(I&&!t.state.selection.eq(I)){if(Pi&&gu&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",z=>z(t,gh(13,"Enter"))))return;let L=t.state.tr.setSelection(I);R=="pointer"?L.setMeta("pointer",!0):R=="key"&&L.scrollIntoView(),i&&L.setMeta("composition",i),t.dispatch(L)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=rve(t,e,n),d=t.state.doc,f=d.slice(c.from,c.to),p,g;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(p=t.state.selection.to,g="end"):(p=t.state.selection.from,g="start"),t.input.lastKeyCode=null;let y=cve(f.content,c.doc.content,c.from,p,g);if(y&&t.input.domChangeCount++,(cg&&t.input.lastIOSEnter>Date.now()-225||gu)&&o.some(R=>R.nodeType==1&&!ive.test(R.nodeName))&&(!y||y.endA>=y.endB)&&t.someProp("handleKeyDown",R=>R(t,gh(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!y)if(r&&l instanceof ft&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))y={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let R=d6(t,t.state.doc,c.sel);if(R&&!R.eq(t.state.selection)){let I=t.state.tr.setSelection(R);i&&I.setMeta("composition",i),t.dispatch(I)}}return}t.state.selection.from<t.state.selection.to&&y.start==y.endB&&t.state.selection instanceof ft&&(y.start>t.state.selection.from&&y.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?y.start=t.state.selection.from:y.endA<t.state.selection.to&&y.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(y.endB+=t.state.selection.to-y.endA,y.endA=t.state.selection.to)),Es&&tf<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>c.from&&c.doc.textBetween(y.start-c.from-1,y.start-c.from+1)=="  "&&(y.start--,y.endA--,y.endB--);let b=c.doc.resolveNoCache(y.start-c.from),_=c.doc.resolveNoCache(y.endB-c.from),k=d.resolve(y.start),M=b.sameParent(_)&&b.parent.inlineContent&&k.end()>=y.endA,N;if((cg&&t.input.lastIOSEnter>Date.now()-225&&(!M||o.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!M&&b.pos<c.doc.content.size&&(!b.sameParent(_)||!b.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(b.pos,_.pos,"",""))&&(N=Tt.findFrom(c.doc.resolve(b.pos+1),1,!0))&&N.head>b.pos)&&t.someProp("handleKeyDown",R=>R(t,gh(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>y.start&&lve(d,y.start,y.endA,b,_)&&t.someProp("handleKeyDown",R=>R(t,gh(8,"Backspace")))){gu&&Pi&&t.domObserver.suppressSelectionUpdates();return}Pi&&y.endB==y.start&&(t.input.lastChromeDelete=Date.now()),gu&&!M&&b.start()!=_.start()&&_.parentOffset==0&&b.depth==_.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==y.endA&&(y.endB-=2,_=c.doc.resolveNoCache(y.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(R){return R(t,gh(13,"Enter"))})},20));let j=y.start,B=y.endA,F=R=>{let I=R||t.state.tr.replace(j,B,c.doc.slice(y.start-c.from,y.endB-c.from));if(c.sel){let L=d6(t,I.doc,c.sel);L&&!(Pi&&t.composing&&L.empty&&(y.start!=y.endB||t.input.lastChromeDelete<Date.now()-100)&&(L.head==j||L.head==I.mapping.map(B)-1)||Es&&L.empty&&L.head==j)&&I.setSelection(L)}return i&&I.setMeta("composition",i),I.scrollIntoView()},D;if(M){if(b.pos==_.pos){Es&&tf<=11&&b.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>xu(t),20));let R=F(t.state.tr.delete(j,B)),I=d.resolve(y.start).marksAcross(d.resolve(y.endA));I&&R.ensureMarks(I),t.dispatch(R)}else if(y.endA==y.endB&&(D=ave(b.parent.content.cut(b.parentOffset,_.parentOffset),k.parent.content.cut(k.parentOffset,y.endA-k.start())))){let R=F(t.state.tr);D.type=="add"?R.addMark(j,B,D.mark):R.removeMark(j,B,D.mark),t.dispatch(R)}else if(b.parent.child(b.index()).isText&&b.index()==_.index()-(_.textOffset?0:1)){let R=b.parent.textBetween(b.parentOffset,_.parentOffset),I=()=>F(t.state.tr.insertText(R,j,B));t.someProp("handleTextInput",L=>L(t,j,B,R,I))||t.dispatch(I())}}else t.dispatch(F())}function d6(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:YN(t,e.resolve(n.anchor),e.resolve(n.head))}function ave(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,i=r,s,a,l;for(let d=0;d<r.length;d++)o=r[d].removeFromSet(o);for(let d=0;d<n.length;d++)i=n[d].removeFromSet(i);if(o.length==1&&i.length==0)a=o[0],s="add",l=d=>d.mark(a.addToSet(d.marks));else if(o.length==0&&i.length==1)a=i[0],s="remove",l=d=>d.mark(a.removeFromSet(d.marks));else return null;let c=[];for(let d=0;d<e.childCount;d++)c.push(l(e.child(d)));if(Le.from(c).eq(t))return{mark:a,type:s}}function lve(t,e,n,r,o){if(n-e<=o.pos-r.pos||fA(r,!0,!1)<o.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&n==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=t.resolve(fA(i,!0,!0));return!s.parent.isTextblock||s.pos>n||fA(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function fA(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function cve(t,e,n,r,o){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let l=Math.max(0,i-Math.min(s,a));r-=s+l-i}if(s<i&&t.size<e.size){let l=r<=i&&r>=s?i-r:0;i-=l,i&&i<e.size&&f6(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-s),s=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<t.size&&f6(t.textBetween(i-1,i+1))&&(i+=l?1:-1),s=i+(s-a),a=i}return{start:i,endA:s,endB:a}}function f6(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class nO{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Aye,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(y6),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=m6(this),p6(this),this.nodeViews=g6(this),this.docView=Kj(this.state.doc,h6(this),dA(this),this.dom,this),this.domObserver=new Jye(this,(r,o,i,s)=>sve(this,r,o,i,s)),this.domObserver.start(),Rye(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&$R(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(y6),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(bz(this),s=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let g=g6(this);dve(g,this.nodeViews)&&(this.nodeViews=g,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&$R(this),this.editable=m6(this),p6(this);let l=dA(this),c=h6(this),d=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",f=i||!this.docView.matchesNode(e.doc,c,l);(f||!e.selection.eq(o.selection))&&(s=!0);let p=d=="preserve"&&s&&this.dom.style.overflowAnchor==null&&Uge(this);if(s){this.domObserver.stop();let g=f&&(Es||Pi)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&uve(o.selection,e.selection);if(f){let y=Pi?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Hye(this)),(i||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Kj(e.doc,c,l,this.dom,this)),y&&!this.trackWrites&&(g=!0)}g||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&hye(this))?xu(this,g):(az(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),d=="reset"?this.dom.scrollTop=0:d=="to selection"?this.scrollToSelection():p&&zge(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof vt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Fj(this,n.getBoundingClientRect(),e)}else Fj(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(o=i)}this.dragging=new Cz(e.slice,e.move,o<0?void 0:vt.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(o=n?n(a):a))return o}let i=this.state.plugins;if(i)for(let s=0;s<i.length;s++){let a=i[s].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(Es){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Gge(this.dom),xu(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Xge(this,e)}coordsAtPos(e,n=1){return JU(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return tye(this,n||this.state,e)}pasteHTML(e,n){return eb(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return eb(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return XN(this,e)}destroy(){this.docView&&(Iye(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],dA(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Nge())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Nye(this,e)}domSelectionRange(){let e=this.domSelection();return e?Qi&&this.root.nodeType===11&&Vge(this.dom.ownerDocument)==this.dom&&tve(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}nO.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function h6(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[dr.node(0,t.state.doc.content.size,e)]}function p6(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:dr.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function m6(t){return!t.someProp("editable",e=>e(t.state)===!1)}function uve(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function g6(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function dve(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function y6(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var gf={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},WC={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},fve=typeof navigator<"u"&&/Mac/.test(navigator.platform),hve=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var di=0;di<10;di++)gf[48+di]=gf[96+di]=String(di);for(var di=1;di<=24;di++)gf[di+111]="F"+di;for(var di=65;di<=90;di++)gf[di]=String.fromCharCode(di+32),WC[di]=String.fromCharCode(di);for(var hA in gf)WC.hasOwnProperty(hA)||(WC[hA]=gf[hA]);function pve(t){var e=fve&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||hve&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?WC:gf)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const mve=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),gve=typeof navigator<"u"&&/Win/.test(navigator.platform);function yve(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))mve?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function vve(t){let e=Object.create(null);for(let n in t)e[yve(n)]=t[n];return e}function pA(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function bve(t){return new cn({props:{handleKeyDown:rO(t)}})}function rO(t){let e=vve(t);return function(n,r){let o=pve(r),i,s=e[pA(o,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[pA(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(gve&&r.ctrlKey&&r.altKey)&&(i=gf[r.keyCode])&&i!=o){let a=e[pA(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const oO=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function kz(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Tz=(t,e,n)=>{let r=kz(t,n);if(!r)return!1;let o=iO(r);if(!o){let s=r.blockRange(),a=s&&Lg(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let i=o.nodeBefore;if(Lz(t,o,e,-1))return!0;if(r.parent.content.size==0&&(ug(i,"end")||vt.isSelectable(i)))for(let s=r.depth;;s--){let a=mx(t.doc,r.before(s),r.after(s),Ze.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(ug(i,"end")?Tt.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):vt.create(l.doc,o.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0):!1},wve=(t,e,n)=>{let r=kz(t,n);if(!r)return!1;let o=iO(r);return o?Az(t,o,e):!1},Cve=(t,e,n)=>{let r=Iz(t,n);if(!r)return!1;let o=sO(r);return o?Az(t,o,e):!1};function Az(t,e,n){let r=e.nodeBefore,o=r,i=e.pos-1;for(;!o.isTextblock;i--){if(o.type.spec.isolating)return!1;let d=o.lastChild;if(!d)return!1;o=d}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let d=a.firstChild;if(!d)return!1;a=d}let c=mx(t.doc,i,l,Ze.empty);if(!c||c.from!=i||c instanceof go&&c.slice.size>=l-i)return!1;if(n){let d=t.tr.step(c);d.setSelection(ft.create(d.doc,i)),n(d.scrollIntoView())}return!0}function ug(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Rz=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=iO(r)}let s=i&&i.nodeBefore;return!s||!vt.isSelectable(s)?!1:(e&&e(t.tr.setSelection(vt.create(t.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function iO(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Iz(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Mz=(t,e,n)=>{let r=Iz(t,n);if(!r)return!1;let o=sO(r);if(!o)return!1;let i=o.nodeAfter;if(Lz(t,o,e,1))return!0;if(r.parent.content.size==0&&(ug(i,"start")||vt.isSelectable(i))){let s=mx(t.doc,r.before(),r.after(),Ze.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(ug(i,"start")?Tt.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):vt.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0):!1},Nz=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=sO(r)}let s=i&&i.nodeAfter;return!s||!vt.isSelectable(s)?!1:(e&&e(t.tr.setSelection(vt.create(t.doc,i.pos)).scrollIntoView()),!0)};function sO(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Sve=(t,e)=>{let n=t.selection,r=n instanceof vt,o;if(r){if(n.node.isTextblock||!mp(t.doc,n.from))return!1;o=n.from}else if(o=px(t.doc,n.from,-1),o==null)return!1;if(e){let i=t.tr.join(o);r&&i.setSelection(vt.create(i.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},_ve=(t,e)=>{let n=t.selection,r;if(n instanceof vt){if(n.node.isTextblock||!mp(t.doc,n.to))return!1;r=n.to}else if(r=px(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},xve=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),i=o&&Lg(o);return i==null?!1:(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)},Oz=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function aO(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Eve=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=aO(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,s.createAndFill());l.setSelection(Tt.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Pz=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof xs||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=aO(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(s,i.createAndFill());a.setSelection(ft.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},Dz=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(_u(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Lg(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};function kve(t){return(e,n)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof vt&&e.selection.node.isBlock)return!r.parentOffset||!_u(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],s,a,l=!1,c=!1;for(let g=r.depth;;g--)if(r.node(g).isBlock){l=r.end(g)==r.pos+(r.depth-g),c=r.start(g)==r.pos-(r.depth-g),a=aO(r.node(g-1).contentMatchAt(r.indexAfter(g-1))),i.unshift(l&&a?{type:a}:null),s=g;break}else{if(g==1)return!1;i.unshift(null)}let d=e.tr;(e.selection instanceof ft||e.selection instanceof xs)&&d.deleteSelection();let f=d.mapping.map(r.pos),p=_u(d.doc,f,i.length,i);if(p||(i[0]=a?{type:a}:null,p=_u(d.doc,f,i.length,i)),!p)return!1;if(d.split(f,i.length,i),!l&&c&&r.node(s).type!=a){let g=d.mapping.map(r.before(s)),y=d.doc.resolve(g);a&&r.node(s-1).canReplaceWith(y.index(),y.index()+1,a)&&d.setNodeMarkup(d.mapping.map(r.before(s)),a)}return n&&n(d.scrollIntoView()),!0}}const Tve=kve(),Ave=(t,e)=>{let{$from:n,to:r}=t.selection,o,i=n.sharedDepth(r);return i==0?!1:(o=n.before(i),e&&e(t.tr.setSelection(vt.create(t.doc,o))),!0)};function Rve(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(o.isTextblock||mp(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Lz(t,e,n,r){let o=e.nodeBefore,i=e.nodeAfter,s,a,l=o.type.spec.isolating||i.type.spec.isolating;if(!l&&Rve(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(a=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&a.matchType(s[0]||i.type).validEnd){if(n){let g=e.pos+i.nodeSize,y=Le.empty;for(let k=s.length-1;k>=0;k--)y=Le.from(s[k].create(null,y));y=Le.from(o.copy(y));let b=t.tr.step(new ao(e.pos-1,g,e.pos,g,new Ze(y,1,0),s.length,!0)),_=b.doc.resolve(g+2*s.length);_.nodeAfter&&_.nodeAfter.type==o.type&&mp(b.doc,_.pos)&&b.join(_.pos),n(b.scrollIntoView())}return!0}let d=i.type.spec.isolating||r>0&&l?null:Tt.findFrom(e,1),f=d&&d.$from.blockRange(d.$to),p=f&&Lg(f);if(p!=null&&p>=e.depth)return n&&n(t.tr.lift(f,p).scrollIntoView()),!0;if(c&&ug(i,"start",!0)&&ug(o,"end")){let g=o,y=[];for(;y.push(g),!g.isTextblock;)g=g.lastChild;let b=i,_=1;for(;!b.isTextblock;b=b.firstChild)_++;if(g.canReplace(g.childCount,g.childCount,b.content)){if(n){let k=Le.empty;for(let N=y.length-1;N>=0;N--)k=Le.from(y[N].copy(k));let M=t.tr.step(new ao(e.pos-y.length,e.pos+i.nodeSize,e.pos+_,e.pos+i.nodeSize-_,new Ze(k,y.length,0),0,!0));n(M.scrollIntoView())}return!0}}return!1}function Vz(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return o.node(i).isTextblock?(n&&n(e.tr.setSelection(ft.create(e.doc,t<0?o.start(i):o.end(i)))),!0):!1}}const Ive=Vz(-1),Mve=Vz(1);function Nve(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=s&&DU(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function v6(t,e=null){return function(n,r){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(s,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)o=!0;else{let d=n.doc.resolve(c),f=d.index();o=d.parent.canReplaceWith(f,f+1,t)}})}if(!o)return!1;if(r){let i=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];i.setBlockType(a,l,t,e)}r(i.scrollIntoView())}return!0}}function lO(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}lO(oO,Tz,Rz);lO(oO,Mz,Nz);lO(Oz,Pz,Dz,Tve);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Ove(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i);if(!s)return!1;let a=r?n.tr:null;return Pve(a,s,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function Pve(t,e,n,r=null){let o=!1,i=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=s.resolve(e.start-2);i=new FC(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new FC(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let a=DU(i,n,r,e);return a?(t&&Dve(t,e,a,o,n),!0):!1}function Dve(t,e,n,r,o){let i=Le.empty;for(let d=n.length-1;d>=0;d--)i=Le.from(n[d].type.create(n[d].attrs,i));t.step(new ao(e.start-(r?2:0),e.end,e.start,e.end,new Ze(i,0,0),n.length,!0));let s=0;for(let d=0;d<n.length;d++)n[d].type==o&&(s=d+1);let a=n.length-s,l=e.start+n.length-(r?2:0),c=e.parent;for(let d=e.startIndex,f=e.endIndex,p=!0;d<f;d++,p=!1)!p&&_u(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(d).nodeSize;return t}function Lve(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,s=>s.childCount>0&&s.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?Vve(e,n,t,i):jve(e,n,i):!0:!1}}function Vve(t,e,n,r){let o=t.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new ao(i-1,s,i,s,new Ze(Le.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new FC(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const a=Lg(r);if(a==null)return!1;o.lift(r,a);let l=o.doc.resolve(o.mapping.map(i,-1)-1);return mp(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),e(o.scrollIntoView()),!0}function jve(t,e,n){let r=t.tr,o=n.parent;for(let g=n.end,y=n.endIndex-1,b=n.startIndex;y>b;y--)g-=o.child(y).nodeSize,r.delete(g-1,g+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==o.childCount,c=i.node(-1),d=i.index(-1);if(!c.canReplace(d+(a?0:1),d+1,s.content.append(l?Le.empty:Le.from(o))))return!1;let f=i.pos,p=f+s.nodeSize;return r.step(new ao(f-(a?1:0),p+(l?1:0),f+1,p-1,new Ze((a?Le.empty:Le.from(o.copy(Le.empty))).append(l?Le.empty:Le.from(o.copy(Le.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function Bve(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==t);if(!i)return!1;let s=i.startIndex;if(s==0)return!1;let a=i.parent,l=a.child(s-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,d=Le.from(c?t.create():null),f=new Ze(Le.from(t.create(null,Le.from(a.type.create(null,d)))),c?3:1,0),p=i.start,g=i.end;n(e.tr.step(new ao(p-(c?3:1),g,p,g,f,1,!0)).scrollIntoView())}return!0}}function wx(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}class Cx{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...d)=>{const f=l(...d)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(i),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a=[],l=!!e,c=e||i.tr,d=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),a.every(p=>p===!0)),f={...Object.fromEntries(Object.entries(r).map(([p,g])=>[p,(...b)=>{const _=this.buildProps(c,n),k=g(...b)(_);return a.push(k),f}])),run:d};return f}createCan(e){const{rawCommands:n,state:r}=this,o=!1,i=e||r.tr,s=this.buildProps(i,o);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...d)=>c(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a={tr:e,editor:o,view:s,state:wx({state:i,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...d)=>c(...d)(a)]))}};return a}}class $ve{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}once(e,n){const r=(...o)=>{this.off(e,r),n.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function gt(t,e,n){return t.config[e]===void 0&&t.parent?gt(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?gt(t.parent,e,n):null}):t.config[e]}function Sx(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function jz(t){const e=[],{nodeExtensions:n,markExtensions:r}=Sx(t),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:o},l=gt(s,"addGlobalAttributes",a);if(!l)return;l().forEach(d=>{d.types.forEach(f=>{Object.entries(d.attributes).forEach(([p,g])=>{e.push({type:f,name:p,attribute:{...i,...g}})})})})}),o.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=gt(s,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([d,f])=>{const p={...i,...f};typeof p?.default=="function"&&(p.default=p.default()),p?.isRequired&&p?.default===void 0&&delete p.default,e.push({type:s.name,name:d,attribute:p})})}),e}function qo(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Zs(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,i])=>{if(!r[o]){r[o]=i;return}if(o==="class"){const a=i?String(i).split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(d=>!l.includes(d));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=i?i.split(";").map(d=>d.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(d=>d.trim()).filter(Boolean):[],c=new Map;l.forEach(d=>{const[f,p]=d.split(":").map(g=>g.trim());c.set(f,p)}),a.forEach(d=>{const[f,p]=d.split(":").map(g=>g.trim());c.set(f,p)}),r[o]=Array.from(c.entries()).map(([d,f])=>`${d}: ${f}`).join("; ")}else r[o]=i}),r},{})}function YC(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Zs(n,r),{})}function Bz(t){return typeof t=="function"}function _n(t,e=void 0,...n){return Bz(t)?e?t.bind(e)(...n):t(...n):t}function Fve(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Hve(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function b6(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((i,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):Hve(n.getAttribute(s.name));return a==null?i:{...i,[s.name]:a}},{});return{...r,...o}}}}function w6(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Fve(n)?!1:n!=null))}function $z(t,e){var n;const r=jz(t),{nodeExtensions:o,markExtensions:i}=Sx(t),s=(n=o.find(c=>gt(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(c=>{const d=r.filter(k=>k.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},p=t.reduce((k,M)=>{const N=gt(M,"extendNodeSchema",f);return{...k,...N?N(c):{}}},{}),g=w6({...p,content:_n(gt(c,"content",f)),marks:_n(gt(c,"marks",f)),group:_n(gt(c,"group",f)),inline:_n(gt(c,"inline",f)),atom:_n(gt(c,"atom",f)),selectable:_n(gt(c,"selectable",f)),draggable:_n(gt(c,"draggable",f)),code:_n(gt(c,"code",f)),whitespace:_n(gt(c,"whitespace",f)),linebreakReplacement:_n(gt(c,"linebreakReplacement",f)),defining:_n(gt(c,"defining",f)),isolating:_n(gt(c,"isolating",f)),attrs:Object.fromEntries(d.map(k=>{var M;return[k.name,{default:(M=k?.attribute)===null||M===void 0?void 0:M.default}]}))}),y=_n(gt(c,"parseHTML",f));y&&(g.parseDOM=y.map(k=>b6(k,d)));const b=gt(c,"renderHTML",f);b&&(g.toDOM=k=>b({node:k,HTMLAttributes:YC(k,d)}));const _=gt(c,"renderText",f);return _&&(g.toText=_),[c.name,g]})),l=Object.fromEntries(i.map(c=>{const d=r.filter(_=>_.type===c.name),f={name:c.name,options:c.options,storage:c.storage,editor:e},p=t.reduce((_,k)=>{const M=gt(k,"extendMarkSchema",f);return{..._,...M?M(c):{}}},{}),g=w6({...p,inclusive:_n(gt(c,"inclusive",f)),excludes:_n(gt(c,"excludes",f)),group:_n(gt(c,"group",f)),spanning:_n(gt(c,"spanning",f)),code:_n(gt(c,"code",f)),attrs:Object.fromEntries(d.map(_=>{var k;return[_.name,{default:(k=_?.attribute)===null||k===void 0?void 0:k.default}]}))}),y=_n(gt(c,"parseHTML",f));y&&(g.parseDOM=y.map(_=>b6(_,d)));const b=gt(c,"renderHTML",f);return b&&(g.toDOM=_=>b({mark:_,HTMLAttributes:YC(_,d)})),[c.name,g]}));return new TU({topNode:s,nodes:a,marks:l})}function mA(t,e){return e.nodes[t]||e.marks[t]||null}function C6(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function cO(t,e){const n=ju.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const Uve=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,i,s,a)=>{var l,c;const d=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:i,parent:s,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?d:d.slice(0,Math.max(0,r-i))}),n};function uO(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class yf{constructor(e){this.find=e.find,this.handler=e.handler}}const zve=(t,e)=>{if(uO(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function ew(t){var e;const{editor:n,from:r,to:o,text:i,rules:s,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(p=>p.type.spec.code))return!1;let d=!1;const f=Uve(c)+i;return s.forEach(p=>{if(d)return;const g=zve(f,p.find);if(!g)return;const y=l.state.tr,b=wx({state:l.state,transaction:y}),_={from:r-(g[0].length-i.length),to:o},{commands:k,chain:M,can:N}=new Cx({editor:n,state:b});p.handler({state:b,range:_,match:g,commands:k,chain:M,can:N})===null||!y.steps.length||(y.setMeta(a,{transform:y,from:r,to:o,text:i}),l.dispatch(y),d=!0)}),d}function Gve(t){const{editor:e,rules:n}=t,r=new cn({state:{init(){return null},apply(o,i,s){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:d}=l;typeof d=="string"?d=d:d=cO(Le.from(d),s.schema);const{from:f}=l,p=f+d.length;ew({editor:e,from:f,to:p,text:d,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:i}},props:{handleTextInput(o,i,s,a){return ew({editor:e,from:i,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:i}=o.state.selection;i&&ew({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,i){if(i.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?ew({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function qve(t){return Object.prototype.toString.call(t).slice(8,-1)}function tw(t){return qve(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function _x(t,e){const n={...t};return tw(t)&&tw(e)&&Object.keys(e).forEach(r=>{tw(e[r])&&tw(t[r])?n[r]=_x(t[r],e[r]):n[r]=e[r]}),n}class Ko{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=_n(gt(this,"addOptions",{name:this.name}))),this.storage=_n(gt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ko(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>_x(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ko(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=_n(gt(n,"addOptions",{name:n.name})),n.storage=_n(gt(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!!!s.find(c=>c?.type.name===n.name))return!1;const l=s.find(c=>c?.type.name===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function Kve(t){return typeof t=="number"}class Wve{constructor(e){this.find=e.find,this.handler=e.handler}}const Yve=(t,e,n)=>{if(uO(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const i=[o.text];return i.index=o.index,i.input=t,i.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(o.replaceWith)),i}):[]};function Xve(t){const{editor:e,state:n,from:r,to:o,rule:i,pasteEvent:s,dropEvent:a}=t,{commands:l,chain:c,can:d}=new Cx({editor:e,state:n}),f=[];return n.doc.nodesBetween(r,o,(g,y)=>{if(!g.isTextblock||g.type.spec.code)return;const b=Math.max(r,y),_=Math.min(o,y+g.content.size),k=g.textBetween(b-y,_-y,void 0,"￼");Yve(k,i.find,s).forEach(N=>{if(N.index===void 0)return;const j=b+N.index+1,B=j+N[0].length,F={from:n.tr.mapping.map(j),to:n.tr.mapping.map(B)},D=i.handler({state:n,range:F,match:N,commands:l,chain:c,can:d,pasteEvent:s,dropEvent:a});f.push(D)})}),f.every(g=>g!==null)}let nw=null;const Qve=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function Zve(t){const{editor:e,rules:n}=t;let r=null,o=!1,i=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:d,from:f,to:p,rule:g,pasteEvt:y})=>{const b=d.tr,_=wx({state:d,transaction:b});if(!(!Xve({editor:e,state:_,from:Math.max(f-1,0),to:p.b-1,rule:g,pasteEvent:y,dropEvent:a})||!b.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,b}};return n.map(d=>new cn({view(f){const p=y=>{var b;r=!((b=f.dom.parentElement)===null||b===void 0)&&b.contains(y.target)?f.dom.parentElement:null,r&&(nw=e)},g=()=>{nw&&(nw=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",g),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",g)}}},props:{handleDOMEvents:{drop:(f,p)=>{if(i=r===f.dom.parentElement,a=p,!i){const g=nw;g?.isEditable&&setTimeout(()=>{const y=g.state.selection;y&&g.commands.deleteRange({from:y.from,to:y.to})},10)}return!1},paste:(f,p)=>{var g;const y=(g=p.clipboardData)===null||g===void 0?void 0:g.getData("text/html");return s=p,o=!!y?.includes("data-pm-slice"),!1}}},appendTransaction:(f,p,g)=>{const y=f[0],b=y.getMeta("uiEvent")==="paste"&&!o,_=y.getMeta("uiEvent")==="drop"&&!i,k=y.getMeta("applyPasteRules"),M=!!k;if(!b&&!_&&!M)return;if(M){let{text:B}=k;typeof B=="string"?B=B:B=cO(Le.from(B),g.schema);const{from:F}=k,D=F+B.length,R=Qve(B);return l({rule:d,state:g,from:F,to:{b:D},pasteEvt:R})}const N=p.doc.content.findDiffStart(g.doc.content),j=p.doc.content.findDiffEnd(g.doc.content);if(!(!Kve(N)||!j||N===j.b))return l({rule:d,state:g,from:N,to:j,pasteEvt:s})}}))}function Jve(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class kh{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=kh.resolve(e),this.schema=$z(this.extensions,n),this.setupExtensions()}static resolve(e){const n=kh.sort(kh.flatten(e)),r=Jve(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=gt(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((r,o)=>{const i=gt(r,"priority")||100,s=gt(o,"priority")||100;return i>s?-1:i<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:mA(n.name,this.schema)},o=gt(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=kh.sort([...this.extensions].reverse()),r=[],o=[],i=n.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:e,type:mA(s.name,this.schema)},l=[],c=gt(s,"addKeyboardShortcuts",a);let d={};if(s.type==="mark"&&gt(s,"exitable",a)&&(d.ArrowRight=()=>Ko.handleExit({editor:e,mark:s})),c){const b=Object.fromEntries(Object.entries(c()).map(([_,k])=>[_,()=>k({editor:e})]));d={...d,...b}}const f=bve(d);l.push(f);const p=gt(s,"addInputRules",a);C6(s,e.options.enableInputRules)&&p&&r.push(...p());const g=gt(s,"addPasteRules",a);C6(s,e.options.enablePasteRules)&&g&&o.push(...g());const y=gt(s,"addProseMirrorPlugins",a);if(y){const b=y();l.push(...b)}return l}).flat();return[Gve({editor:e,rules:r}),...Zve({editor:e,rules:o}),...i]}get attributes(){return jz(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Sx(this.extensions);return Object.fromEntries(n.filter(r=>!!gt(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:qo(r.name,this.schema)},s=gt(r,"addNodeView",i);if(!s)return[];const a=(l,c,d,f,p)=>{const g=YC(l,o);return s()({node:l,view:c,getPos:d,decorations:f,innerDecorations:p,editor:e,extension:r,HTMLAttributes:g})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:mA(e.name,this.schema)};e.type==="mark"&&(!((n=_n(gt(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const o=gt(e,"onBeforeCreate",r),i=gt(e,"onCreate",r),s=gt(e,"onUpdate",r),a=gt(e,"onSelectionUpdate",r),l=gt(e,"onTransaction",r),c=gt(e,"onFocus",r),d=gt(e,"onBlur",r),f=gt(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),i&&this.editor.on("create",i),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),d&&this.editor.on("blur",d),f&&this.editor.on("destroy",f)})}}class yr{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=_n(gt(this,"addOptions",{name:this.name}))),this.storage=_n(gt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new yr(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>_x(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new yr({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=_n(gt(n,"addOptions",{name:n.name})),n.storage=_n(gt(n,"addStorage",{name:n.name,options:n.options})),n}}function Fz(t,e,n){const{from:r,to:o}=e,{blockSeparator:i=`

`,textSerializers:s={}}=n||{};let a="";return t.nodesBetween(r,o,(l,c,d,f)=>{var p;l.isBlock&&c>r&&(a+=i);const g=s?.[l.type.name];if(g)return d&&(a+=g({node:l,pos:c,parent:d,index:f,range:e})),!1;l.isText&&(a+=(p=l?.text)===null||p===void 0?void 0:p.slice(Math.max(r,c)-c,o-c))}),a}function Hz(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const Uz=yr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new cn({key:new Hn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:i}=o,s=Math.min(...i.map(d=>d.$from.pos)),a=Math.max(...i.map(d=>d.$to.pos)),l=Hz(n);return Fz(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),ebe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),tbe=(t=!1)=>({commands:e})=>e.setContent("",t),nbe=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:i,$to:s})=>{t.doc.nodesBetween(i.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:d}=e,f=c.resolve(d.map(l)),p=c.resolve(d.map(l+a.nodeSize)),g=f.blockRange(p);if(!g)return;const y=Lg(g);if(a.type.isTextblock){const{defaultType:b}=f.parent.contentMatchAt(f.index());e.setNodeMarkup(g.start,b)}(y||y===0)&&e.lift(g,y)})}),!0},rbe=t=>e=>t(e),obe=()=>({state:t,dispatch:e})=>Pz(t,e),ibe=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,i=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,i.content),r.setSelection(new ft(r.doc.resolve(Math.max(s-1,0)))),!0},sbe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(e){const a=o.before(i),l=o.after(i);t.delete(a,l).scrollIntoView()}return!0}return!1},abe=t=>({tr:e,state:n,dispatch:r})=>{const o=qo(t,n.schema),i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o){if(r){const l=i.before(s),c=i.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},lbe=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},cbe=()=>({state:t,dispatch:e})=>oO(t,e),ube=()=>({commands:t})=>t.keyboardShortcut("Enter"),dbe=()=>({state:t,dispatch:e})=>Eve(t,e);function XC(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:uO(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function zz(t,e,n={}){return t.find(r=>r.type===e&&XC(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function S6(t,e,n={}){return!!zz(t,e,n)}function nb(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(d=>d.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(d=>d.type===e)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!zz([...o.node.marks],e,n)))return;let s=o.index,a=t.start()+o.offset,l=s+1,c=a+o.node.nodeSize;for(;s>0&&S6([...t.parent.child(s-1).marks],e,n);)s-=1,a-=t.parent.child(s).nodeSize;for(;l<t.parent.childCount&&S6([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function If(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const fbe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const i=If(t,r.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:d}=a;if(o){const f=nb(l,i,e);if(f&&f.from<=c&&f.to>=d){const p=ft.create(s,f.from,f.to);n.setSelection(p)}}return!0},hbe=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function xx(t){return t instanceof ft}function yu(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Gz(t,e=null){if(!e)return null;const n=Tt.atStart(t),r=Tt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,i=r.to;return e==="all"?ft.create(t,yu(0,o,i),yu(t.content.size,o,i)):ft.create(t,yu(e,o,i),yu(e,o,i))}function qz(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Ex(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const pbe=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:i})=>{e={scrollIntoView:!0,...e};const s=()=>{(Ex()||qz())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!xx(n.state.selection))return s(),!0;const a=Gz(o.doc,t)||n.state.selection,l=n.state.selection.eq(a);return i&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},mbe=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),gbe=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Kz=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Kz(r)}return t};function rw(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Kz(n)}function rb(t,e,n){if(t instanceof Cu||t instanceof Le)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Le.fromArray(t.map(a=>e.nodeFromJSON(a)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),rb("",e,n)}if(o){if(n.errorOnInvalidContent){let s=!1,a="";const l=new TU({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Su.fromSchema(l).parseSlice(rw(t),n.parseOptions):Su.fromSchema(l).parse(rw(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=Su.fromSchema(e);return n.slice?i.parseSlice(rw(t),n.parseOptions).content:i.parse(rw(t),n.parseOptions)}return rb("",e,n)}function Wz(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof go||o instanceof ao))return;const i=t.mapping.maps[r];let s=0;i.forEach((a,l,c,d)=>{s===0&&(s=d)}),t.setSelection(Tt.near(t.doc.resolve(s),n))}const ybe=t=>!("type"in t),vbe=(t,e,n)=>({tr:r,dispatch:o,editor:i})=>{var s;if(o){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=_=>{i.emit("contentError",{editor:i,error:_,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{rb(e,i.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(_){l(_)}try{a=rb(e,i.schema,{parseOptions:c,errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:i.options.enableContentCheck})}catch(_){return l(_),!1}let{from:d,to:f}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},p=!0,g=!0;if((ybe(a)?a:[a]).forEach(_=>{_.check(),p=p?_.isText&&_.marks.length===0:!1,g=g?_.isBlock:!1}),d===f&&g){const{parent:_}=r.doc.resolve(d);_.isTextblock&&!_.type.spec.code&&!_.childCount&&(d-=1,f+=1)}let b;if(p){if(Array.isArray(e))b=e.map(_=>_.text||"").join("");else if(e instanceof Le){let _="";e.forEach(k=>{k.text&&(_+=k.text)}),b=_}else typeof e=="object"&&e&&e.text?b=e.text:b=e;r.insertText(b,d,f)}else b=a,r.replaceWith(d,f,b);n.updateSelection&&Wz(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:d,text:b}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:d,text:b})}return!0},bbe=()=>({state:t,dispatch:e})=>Sve(t,e),wbe=()=>({state:t,dispatch:e})=>_ve(t,e),Cbe=()=>({state:t,dispatch:e})=>Tz(t,e),Sbe=()=>({state:t,dispatch:e})=>Mz(t,e),_be=()=>({state:t,dispatch:e,tr:n})=>{try{const r=px(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},xbe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=px(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Ebe=()=>({state:t,dispatch:e})=>wve(t,e),kbe=()=>({state:t,dispatch:e})=>Cve(t,e);function Yz(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Tbe(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))Ex()||Yz()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}const Abe=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const i=Tbe(t).split(/-(?!$)/),s=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l?.steps.forEach(c=>{const d=c.map(r.mapping);d&&o&&r.maybeStep(d)}),!0};function ob(t,e,n={}){const{from:r,to:o,empty:i}=t.selection,s=e?qo(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(f,p)=>{if(f.isText)return;const g=Math.max(r,p),y=Math.min(o,p+f.nodeSize);a.push({node:f,from:g,to:y})});const l=o-r,c=a.filter(f=>s?s.name===f.node.type.name:!0).filter(f=>XC(f.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((f,p)=>f+p.to-p.from,0)>=l}const Rbe=(t,e={})=>({state:n,dispatch:r})=>{const o=qo(t,n.schema);return ob(n,o,e)?xve(n,r):!1},Ibe=()=>({state:t,dispatch:e})=>Dz(t,e),Mbe=t=>({state:e,dispatch:n})=>{const r=qo(t,e.schema);return Lve(r)(e,n)},Nbe=()=>({state:t,dispatch:e})=>Oz(t,e);function kx(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function _6(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const Obe=(t,e)=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=kx(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(i=qo(t,r.schema)),a==="mark"&&(s=If(t,r.schema)),o&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,d)=>{i&&i===c.type&&n.setNodeMarkup(d,void 0,_6(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(f=>{s===f.type&&n.addMark(d,d+c.nodeSize,s.create(_6(f.attrs,e)))})})}),!0):!1},Pbe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),Dbe=()=>({tr:t,dispatch:e})=>{if(e){const n=new xs(t.doc);t.setSelection(n)}return!0},Lbe=()=>({state:t,dispatch:e})=>Rz(t,e),Vbe=()=>({state:t,dispatch:e})=>Nz(t,e),jbe=()=>({state:t,dispatch:e})=>Ave(t,e),Bbe=()=>({state:t,dispatch:e})=>Mve(t,e),$be=()=>({state:t,dispatch:e})=>Ive(t,e);function QC(t,e,n={},r={}){return rb(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const Fbe=(t,e=!1,n={},r={})=>({editor:o,tr:i,dispatch:s,commands:a})=>{var l,c;const{doc:d}=i;if(n.preserveWhitespace!=="full"){const f=QC(t,o.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return s&&i.replaceWith(0,d.content.size,f).setMeta("preventUpdate",!e),!0}return s&&i.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:d.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function Xz(t,e){const n=If(e,t.schema),{from:r,to:o,empty:i}=t.selection,s=[];i?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function dO(t,e){const n=new GN(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function Hbe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function x6(t,e){const n=[];return t.descendants((r,o)=>{e(r)&&n.push({node:r,pos:o})}),n}function Qz(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(o,i)=>{n(o)&&r.push({node:o,pos:i})}),r}function Ube(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Tx(t){return e=>Ube(e.$from,t)}function zbe(t,e){const n=kh.resolve(t);return $z(n,e)}function Gbe(t,e){const n={from:0,to:t.content.size};return Fz(t,n,e)}function qbe(t,e){const n=qo(e,t.schema),{from:r,to:o}=t.selection,i=[];t.doc.nodesBetween(r,o,a=>{i.push(a)});const s=i.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function Zz(t,e){const n=kx(typeof e=="string"?e:e.name,t.schema);return n==="node"?qbe(t,e):n==="mark"?Xz(t,e):{}}function Kbe(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function Wbe(t){const e=Kbe(t);return e.length===1?e:e.filter((n,r)=>!e.filter((i,s)=>s!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function Jz(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,i)=>{const s=[];if(o.ranges.length)o.forEach((a,l)=>{s.push({from:a,to:l})});else{const{from:a,to:l}=n[i];if(a===void 0||l===void 0)return;s.push({from:a,to:l})}s.forEach(({from:a,to:l})=>{const c=e.slice(i).map(a,-1),d=e.slice(i).map(l),f=e.invert().map(c,-1),p=e.invert().map(d);r.push({oldRange:{from:f,to:p},newRange:{from:c,to:d}})})}),Wbe(r)}function fO(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const i=n.resolve(t),s=nb(i,o.type);s&&r.push({mark:o,...s})}):n.nodesBetween(t,e,(o,i)=>{!o||o?.nodeSize===void 0||r.push(...o.marks.map(s=>({from:i,to:i+o.nodeSize,mark:s})))}),r}function zw(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(i=>i.type===e&&i.name===r);return o?o.attribute.keepOnSplit:!1}))}function FR(t,e,n={}){const{empty:r,ranges:o}=t.selection,i=e?If(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(f=>i?i.name===f.type.name:!0).find(f=>XC(f.attrs,n,{strict:!1}));let s=0;const a=[];if(o.forEach(({$from:f,$to:p})=>{const g=f.pos,y=p.pos;t.doc.nodesBetween(g,y,(b,_)=>{if(!b.isText&&!b.marks.length)return;const k=Math.max(g,_),M=Math.min(y,_+b.nodeSize),N=M-k;s+=N,a.push(...b.marks.map(j=>({mark:j,from:k,to:M})))})}),s===0)return!1;const l=a.filter(f=>i?i.name===f.mark.type.name:!0).filter(f=>XC(f.mark.attrs,n,{strict:!1})).reduce((f,p)=>f+p.to-p.from,0),c=a.filter(f=>i?f.mark.type!==i&&f.mark.type.excludes(i):!0).reduce((f,p)=>f+p.to-p.from,0);return(l>0?l+c:l)>=s}function Ybe(t,e,n={}){if(!e)return ob(t,null,n)||FR(t,null,n);const r=kx(e,t.schema);return r==="node"?ob(t,e,n):r==="mark"?FR(t,e,n):!1}function E6(t,e){const{nodeExtensions:n}=Sx(e),r=n.find(s=>s.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},i=_n(gt(r,"group",o));return typeof i!="string"?!1:i.split(" ").includes("list")}function hO(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(i=>{o!==!1&&(hO(i,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function HR(t){return t instanceof vt}function ZC(t,e,n){const o=t.state.doc.content.size,i=yu(e,0,o),s=yu(n,0,o),a=t.coordsAtPos(i),l=t.coordsAtPos(s,-1),c=Math.min(a.top,l.top),d=Math.max(a.bottom,l.bottom),f=Math.min(a.left,l.left),p=Math.max(a.right,l.right),g=p-f,y=d-c,k={top:c,bottom:d,left:f,right:p,width:g,height:y,x:f,y:c};return{...k,toJSON:()=>k}}function Xbe(t,e,n){var r;const{selection:o}=e;let i=null;if(xx(o)&&(i=o.$cursor),i){const a=(r=t.storedMarks)!==null&&r!==void 0?r:i.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:s}=o;return s.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(d,f,p)=>{if(c)return!1;if(d.isInline){const g=!p||p.type.allowsMarkType(n),y=!!n.isInSet(d.marks)||!d.marks.some(b=>b.type.excludes(n));c=g&&y}return!c}),c})}const Qbe=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:s,ranges:a}=i,l=If(t,r.schema);if(o)if(s){const c=Xz(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const d=c.$from.pos,f=c.$to.pos;r.doc.nodesBetween(d,f,(p,g)=>{const y=Math.max(g,d),b=Math.min(g+p.nodeSize,f);p.marks.find(k=>k.type===l)?p.marks.forEach(k=>{l===k.type&&n.addMark(y,b,l.create({...k.attrs,...e}))}):n.addMark(y,b,l.create(e))})});return Xbe(r,n,l)},Zbe=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),Jbe=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const i=qo(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),i.isTextblock?o().command(({commands:a})=>v6(i,{...s,...e})(n)?!0:a.clearNodes()).command(({state:a})=>v6(i,{...s,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},e0e=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=yu(t,0,r.content.size),i=vt.create(r,o);e.setSelection(i)}return!0},t0e=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:i}=typeof t=="number"?{from:t,to:t}:t,s=ft.atStart(r).from,a=ft.atEnd(r).to,l=yu(o,s,a),c=yu(i,s,a),d=ft.create(r,l,c);e.setSelection(d)}return!0},n0e=t=>({state:e,dispatch:n})=>{const r=qo(t,e.schema);return Bve(r)(e,n)};function k6(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e?.includes(o.type.name));t.tr.ensureMarks(r)}}const r0e=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:i,doc:s}=e,{$from:a,$to:l}=i,c=o.extensionManager.attributes,d=zw(c,a.node().type.name,a.node().attrs);if(i instanceof vt&&i.node.isBlock)return!a.parentOffset||!_u(s,a.pos)?!1:(r&&(t&&k6(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const f=l.parentOffset===l.parent.content.size,p=a.depth===0?void 0:Hbe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let g=f&&p?[{type:p,attrs:d}]:void 0,y=_u(e.doc,e.mapping.map(a.pos),1,g);if(!g&&!y&&_u(e.doc,e.mapping.map(a.pos),1,p?[{type:p}]:void 0)&&(y=!0,g=p?[{type:p,attrs:d}]:void 0),r){if(y&&(i instanceof ft&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,g),p&&!f&&!a.parentOffset&&a.parent.type!==p)){const b=e.mapping.map(a.before()),_=e.doc.resolve(b);a.node(-1).canReplaceWith(_.index(),_.index()+1,p)&&e.setNodeMarkup(e.mapping.map(a.before()),p)}t&&k6(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return y},o0e=(t,e={})=>({tr:n,state:r,dispatch:o,editor:i})=>{var s;const a=qo(t,r.schema),{$from:l,$to:c}=r.selection,d=r.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;const f=l.node(-1);if(f.type!==a)return!1;const p=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let k=Le.empty;const M=l.index(-1)?1:l.index(-2)?2:3;for(let R=l.depth-M;R>=l.depth-3;R-=1)k=Le.from(l.node(R).copy(k));const N=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,j={...zw(p,l.node().type.name,l.node().attrs),...e},B=((s=a.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(j))||void 0;k=k.append(Le.from(a.createAndFill(null,B)||void 0));const F=l.before(l.depth-(M-1));n.replace(F,l.after(-N),new Ze(k,4-M,0));let D=-1;n.doc.nodesBetween(F,n.doc.content.size,(R,I)=>{if(D>-1)return!1;R.isTextblock&&R.content.size===0&&(D=I+1)}),D>-1&&n.setSelection(ft.near(n.doc.resolve(D))),n.scrollIntoView()}return!0}const g=c.pos===l.end()?f.contentMatchAt(0).defaultType:null,y={...zw(p,f.type.name,f.attrs),...e},b={...zw(p,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const _=g?[{type:a,attrs:y},{type:g,attrs:b}]:[{type:a,attrs:y}];if(!_u(n.doc,l.pos,2))return!1;if(o){const{selection:k,storedMarks:M}=r,{splittableMarks:N}=i.extensionManager,j=M||k.$to.parentOffset&&k.$from.marks();if(n.split(l.pos,2,_).scrollIntoView(),!j||!o)return!0;const B=j.filter(F=>N.includes(F.type.name));n.ensureMarks(B)}return!0},gA=(t,e)=>{const n=Tx(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===o?.type&&mp(t.doc,n.pos)&&t.join(n.pos),!0},yA=(t,e)=>{const n=Tx(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===o?.type&&mp(t.doc,r)&&t.join(r),!0},i0e=(t,e,n,r={})=>({editor:o,tr:i,state:s,dispatch:a,chain:l,commands:c,can:d})=>{const{extensions:f,splittableMarks:p}=o.extensionManager,g=qo(t,s.schema),y=qo(e,s.schema),{selection:b,storedMarks:_}=s,{$from:k,$to:M}=b,N=k.blockRange(M),j=_||b.$to.parentOffset&&b.$from.marks();if(!N)return!1;const B=Tx(F=>E6(F.type.name,f))(b);if(N.depth>=1&&B&&N.depth-B.depth<=1){if(B.node.type===g)return c.liftListItem(y);if(E6(B.node.type.name,f)&&g.validContent(B.node.content)&&a)return l().command(()=>(i.setNodeMarkup(B.pos,g),!0)).command(()=>gA(i,g)).command(()=>yA(i,g)).run()}return!n||!j||!a?l().command(()=>d().wrapInList(g,r)?!0:c.clearNodes()).wrapInList(g,r).command(()=>gA(i,g)).command(()=>yA(i,g)).run():l().command(()=>{const F=d().wrapInList(g,r),D=j.filter(R=>p.includes(R.type.name));return i.ensureMarks(D),F?!0:c.clearNodes()}).wrapInList(g,r).command(()=>gA(i,g)).command(()=>yA(i,g)).run()},s0e=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=n,s=If(t,r.schema);return FR(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,e)},a0e=(t,e,n={})=>({state:r,commands:o})=>{const i=qo(t,r.schema),s=qo(e,r.schema),a=ob(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(s,l):o.setNode(i,{...l,...n})},l0e=(t,e={})=>({state:n,commands:r})=>{const o=qo(t,n.schema);return ob(n,o,e)?r.lift(o):r.wrapIn(o,e)},c0e=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let i;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){const s=t.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else s.delete(i.from,i.to)}return!0}}return!1},u0e=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},d0e=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,l=If(t,r.schema),{$from:c,empty:d,ranges:f}=a;if(!o)return!0;if(d&&s){let{from:p,to:g}=a;const y=(i=c.marks().find(_=>_.type===l))===null||i===void 0?void 0:i.attrs,b=nb(c,l,y);b&&(p=b.from,g=b.to),n.removeMark(p,g,l)}else f.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,l)});return n.removeStoredMark(l),!0},f0e=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=kx(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(i=qo(t,r.schema)),a==="mark"&&(s=If(t,r.schema)),o&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,d=l.$to.pos;let f,p,g,y;n.selection.empty?r.doc.nodesBetween(c,d,(b,_)=>{i&&i===b.type&&(g=Math.max(_,c),y=Math.min(_+b.nodeSize,d),f=_,p=b)}):r.doc.nodesBetween(c,d,(b,_)=>{_<c&&i&&i===b.type&&(g=Math.max(_,c),y=Math.min(_+b.nodeSize,d),f=_,p=b),_>=c&&_<=d&&(i&&i===b.type&&n.setNodeMarkup(_,void 0,{...b.attrs,...e}),s&&b.marks.length&&b.marks.forEach(k=>{if(s===k.type){const M=Math.max(_,c),N=Math.min(_+b.nodeSize,d);n.addMark(M,N,s.create({...k.attrs,...e}))}}))}),p&&(f!==void 0&&n.setNodeMarkup(f,void 0,{...p.attrs,...e}),s&&p.marks.length&&p.marks.forEach(b=>{s===b.type&&n.addMark(g,y,s.create({...b.attrs,...e}))}))}),!0):!1},h0e=(t,e={})=>({state:n,dispatch:r})=>{const o=qo(t,n.schema);return Nve(o,e)(n,r)},p0e=(t,e={})=>({state:n,dispatch:r})=>{const o=qo(t,n.schema);return Ove(o,e)(n,r)};var m0e=Object.freeze({__proto__:null,blur:ebe,clearContent:tbe,clearNodes:nbe,command:rbe,createParagraphNear:obe,cut:ibe,deleteCurrentNode:sbe,deleteNode:abe,deleteRange:lbe,deleteSelection:cbe,enter:ube,exitCode:dbe,extendMarkRange:fbe,first:hbe,focus:pbe,forEach:mbe,insertContent:gbe,insertContentAt:vbe,joinBackward:Cbe,joinDown:wbe,joinForward:Sbe,joinItemBackward:_be,joinItemForward:xbe,joinTextblockBackward:Ebe,joinTextblockForward:kbe,joinUp:bbe,keyboardShortcut:Abe,lift:Rbe,liftEmptyBlock:Ibe,liftListItem:Mbe,newlineInCode:Nbe,resetAttributes:Obe,scrollIntoView:Pbe,selectAll:Dbe,selectNodeBackward:Lbe,selectNodeForward:Vbe,selectParentNode:jbe,selectTextblockEnd:Bbe,selectTextblockStart:$be,setContent:Fbe,setMark:Qbe,setMeta:Zbe,setNode:Jbe,setNodeSelection:e0e,setTextSelection:t0e,sinkListItem:n0e,splitBlock:r0e,splitListItem:o0e,toggleList:i0e,toggleMark:s0e,toggleNode:a0e,toggleWrap:l0e,undoInputRule:c0e,unsetAllMarks:u0e,unsetMark:d0e,updateAttributes:f0e,wrapIn:h0e,wrapInList:p0e});const eG=yr.create({name:"commands",addCommands(){return{...m0e}}}),tG=yr.create({name:"drop",addProseMirrorPlugins(){return[new cn({key:new Hn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),nG=yr.create({name:"editable",addProseMirrorPlugins(){return[new cn({key:new Hn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),rG=new Hn("focusEvents"),oG=yr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new cn({key:rG,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),iG=yr.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:d,$anchor:f}=l,{pos:p,parent:g}=f,y=f.parent.isTextblock&&p>0?a.doc.resolve(p-1):f,b=y.parent.type.spec.isolating,_=f.pos-f.parentOffset,k=b&&y.parent.childCount===1?_===f.pos:Tt.atStart(c).from===p;return!d||!g.type.isTextblock||g.textContent.length||!k||k&&f.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Ex()||Yz()?i:o},addProseMirrorPlugins(){return[new cn({key:new Hn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(b=>b.getMeta("composition")))return;const r=t.some(b=>b.docChanged)&&!e.doc.eq(n.doc),o=t.some(b=>b.getMeta("preventClearDocument"));if(!r||o)return;const{empty:i,from:s,to:a}=e.selection,l=Tt.atStart(e.doc).from,c=Tt.atEnd(e.doc).to;if(i||!(s===l&&a===c)||!hO(n.doc))return;const p=n.tr,g=wx({state:n,transaction:p}),{commands:y}=new Cx({editor:this.editor,state:g});if(y.clearNodes(),!!p.steps.length)return p}})]}}),sG=yr.create({name:"paste",addProseMirrorPlugins(){return[new cn({key:new Hn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),aG=yr.create({name:"tabindex",addProseMirrorPlugins(){return[new cn({key:new Hn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Wy=Object.freeze({__proto__:null,ClipboardTextSerializer:Uz,Commands:eG,Drop:tG,Editable:nG,FocusEvents:oG,Keymap:iG,Paste:sG,Tabindex:aG,focusEventsPluginKey:rG});class yh{get name(){return this.node.type.name}constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new yh(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new yh(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new yh(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,s=this.pos+r+(i?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(s);if(!o&&a.depth<=this.depth)return;const l=new yh(a,this.editor,o,o?n:null);o&&(l.actualDepth=this.depth+1),e.push(new yh(a,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const i=o.node.attrs,s=Object.keys(n);for(let a=0;a<s.length;a+=1){const l=s[a];if(i[l]!==n[l])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const i=Object.keys(n);return this.children.forEach(s=>{r&&o.length>0||(s.node.type.name===e&&i.every(l=>n[l]===s.node.attrs[l])&&o.push(s),!(r&&o.length>0)&&(o=o.concat(s.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const g0e=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function y0e(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}class v0e extends $ve{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=y0e(g0e,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=Bz(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(a=>!a.key.startsWith(s))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,n;const o=[...this.options.enableCoreExtensions?[nG,Uz.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),eG,oG,iG,aG,tG,sG].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new kh(o,this)}createCommandManager(){this.commandManager=new Cx({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=QC(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=QC(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Gz(n,this.options.autofocus);this.view=new nO(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:_h.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),i=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Zz(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,o=typeof e=="string"?n:e;return Ybe(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return cO(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return Gbe(this.state.doc,{blockSeparator:n,textSerializers:{...Hz(this.schema),...r}})}get isEmpty(){return hO(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new yh(n,this)}get $doc(){return this.$pos(0)}}function dg(t){return new yf({find:t.find,handler:({state:e,range:n,match:r})=>{const o=_n(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:i}=e,s=r[r.length-1],a=r[0];if(s){const l=a.search(/\S/),c=n.from+a.indexOf(s),d=c+s.length;if(fO(n.from,n.to,e.doc).filter(g=>g.mark.type.excluded.find(b=>b===t.type&&b!==g.mark.type)).filter(g=>g.to>c).length)return null;d<n.to&&i.delete(d,n.to),c>n.from&&i.delete(n.from+l,c);const p=n.from+l+s.length;i.addMark(n.from+l,p,t.type.create(o||{})),i.removeStoredMark(t.type)}}})}let Tc=class UR{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=_n(gt(this,"addOptions",{name:this.name}))),this.storage=_n(gt(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new UR(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>_x(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new UR(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=_n(gt(n,"addOptions",{name:n.name})),n.storage=_n(gt(n,"addStorage",{name:n.name,options:n.options})),n}};class b0e{constructor(e,n,r){this.isDragging=!1,this.component=e,this.editor=n.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var n,r,o,i,s,a,l;const{view:c}=this.editor,d=e.target,f=d.nodeType===3?(n=d.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):d.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(d)||!f)return;let p=0,g=0;if(this.dom!==f){const M=this.dom.getBoundingClientRect(),N=f.getBoundingClientRect(),j=(o=e.offsetX)!==null&&o!==void 0?o:(i=e.nativeEvent)===null||i===void 0?void 0:i.offsetX,B=(s=e.offsetY)!==null&&s!==void 0?s:(a=e.nativeEvent)===null||a===void 0?void 0:a.offsetY;p=N.x-M.x+j,g=N.y-M.y+B}const y=this.dom.cloneNode(!0);(l=e.dataTransfer)===null||l===void 0||l.setDragImage(y,p,g);const b=this.getPos();if(typeof b!="number")return;const _=vt.create(c.state.doc,b),k=c.state.tr.setSelection(_);c.dispatch(k)}stopEvent(e){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const i=e.type.startsWith("drag"),s=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!s&&!i)return!0;const{isEditable:l}=this.editor,{isDragging:c}=this,d=!!this.node.type.spec.draggable,f=vt.isSelectable(this.node),p=e.type==="copy",g=e.type==="paste",y=e.type==="cut",b=e.type==="mousedown";if(!d&&f&&i&&e.target===this.dom&&e.preventDefault(),d&&i&&!c&&e.target===this.dom)return e.preventDefault(),!1;if(d&&l&&!c&&b){const _=r.closest("[data-drag-handle]");_&&(this.dom===_||this.dom.contains(_))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(c||s||p||g||y||b&&f)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(Ex()||qz())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return typeof r!="number"?!1:(n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const n=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:n})}}function Qh(t){return new Wve({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const i=_n(t.getAttributes,void 0,r,o);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const d=l.search(/\S/),f=n.from+l.indexOf(a),p=f+a.length;if(fO(n.from,n.to,e.doc).filter(y=>y.mark.type.excluded.find(_=>_===t.type&&_!==y.mark.type)).filter(y=>y.to>f).length)return null;p<n.to&&s.delete(p,n.to),f>n.from&&s.delete(n.from+d,f),c=n.from+d+a.length,s.addMark(n.from+d,c,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}var ow,w0e=new Uint8Array(16);function C0e(){if(!ow&&(ow=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ow))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ow(w0e)}const S0e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function _0e(t){return typeof t=="string"&&S0e.test(t)}var si=[];for(var vA=0;vA<256;++vA)si.push((vA+256).toString(16).substr(1));function x0e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(si[t[e+0]]+si[t[e+1]]+si[t[e+2]]+si[t[e+3]]+"-"+si[t[e+4]]+si[t[e+5]]+"-"+si[t[e+6]]+si[t[e+7]]+"-"+si[t[e+8]]+si[t[e+9]]+"-"+si[t[e+10]]+si[t[e+11]]+si[t[e+12]]+si[t[e+13]]+si[t[e+14]]+si[t[e+15]]).toLowerCase();if(!_0e(n))throw TypeError("Stringified UUID is invalid");return n}function lG(t,e,n){t=t||{};var r=t.random||(t.rng||C0e)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,x0e(r)}var E0e=class cG{constructor(e){this.cache=new Map(e)}get(e){return this.cache.get(e)}set(e,n,r){e<0||this.cache.set(e,[n,r])}replace(e,n,r,o){this.remove(e),this.set(n,r,o)}remove(e){this.cache.delete(e)}invalidate(e){const n=new cG(this.cache),r=e.mapping;return this.cache.forEach(([o,i],s)=>{if(s<0)return;const a=r.mapResult(s),l=e.doc.nodeAt(a.pos);if(a.deleted||!l?.eq(o))n.remove(s);else if(s!==a.pos){const c=i.map(d=>d.map(r,0,0)).filter(d=>d!=null);n.replace(s,a.pos,l,c)}}),n}};function k0e({parser:t,nodeTypes:e=["code_block","codeBlock"],languageExtractor:n=r=>r.attrs.language}){const r=new Hn("prosemirror-highlight");return new cn({key:r,state:{init(o,i){const s=new E0e,[a,l]=T6(i.doc,t,e,n,s);return{cache:s,decorations:a,promises:l}},apply:(o,i)=>{const s=i.cache.invalidate(o),a=!!o.getMeta("prosemirror-highlight-refresh");if(!o.docChanged&&!a){const d=i.decorations.map(o.mapping,o.doc),f=i.promises;return{cache:s,decorations:d,promises:f}}const[l,c]=T6(o.doc,t,e,n,s);return{cache:s,decorations:l,promises:c}}},view:o=>{const i=new Set,s=()=>{if(i.size>0)return;const l=o.state.tr.setMeta("prosemirror-highlight-refresh",!0);o.dispatch(l)},a=()=>{var l;const c=r.getState(o.state);for(const d of(l=c?.promises)!=null?l:[])i.add(d),d.then(()=>{i.delete(d),s()}).catch(()=>{i.delete(d)})};return a(),{update:()=>{a()}}},props:{decorations(o){var i;return(i=this.getState(o))==null?void 0:i.decorations}}})}function T6(t,e,n,r,o){const i=[],s=[];return t.descendants((a,l)=>{if(!a.type.isTextblock)return!0;if(n.includes(a.type.name)){const c=r(a),d=o.get(l);if(d){const[f,p]=d;i.push(...p)}else{const f=e({content:a.textContent,language:c||void 0,pos:l,size:a.nodeSize});f&&Array.isArray(f)?(o.set(l,a,f),i.push(...f)):f instanceof Promise&&(o.remove(l),s.push(f))}}return!1}),[In.create(t,i),s]}function T0e(t,e){return function({content:r,language:o,pos:i,size:s}){var a;const l=[],{tokens:c,fg:d,bg:f,rootStyle:p}=t.codeToTokens(r,{lang:o,theme:t.getLoadedThemes()[0]}),g=p||(d&&f?`--prosemirror-highlight:${d};--prosemirror-highlight-bg:${f}`:"");if(g){const b=dr.node(i,i+s,{style:g});l.push(b)}let y=i+1;for(const b of c){for(const _ of b){const k=y+_.content.length,M=dr.inline(y,k,{style:A0e((a=_.htmlStyle)!=null?a:`color: ${_.color}`),class:"shiki"});l.push(M),y=k}y+=1}return l}}function A0e(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const R0e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,I0e=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,M0e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,N0e=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,O0e=Ko.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Zs(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[dg({find:R0e,type:this.type}),dg({find:M0e,type:this.type})]},addPasteRules(){return[Qh({find:I0e,type:this.type}),Qh({find:N0e,type:this.type})]}}),P0e=/(^|[^`])`([^`]+)`(?!`)/,D0e=/(^|[^`])`([^`]+)`(?!`)/g,L0e=Ko.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Zs(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[dg({find:P0e,type:this.type})]},addPasteRules(){return[Qh({find:D0e,type:this.type})]}}),V0e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,j0e=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,B0e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,$0e=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,F0e=Ko.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Zs(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[dg({find:V0e,type:this.type}),dg({find:B0e,type:this.type})]},addPasteRules(){return[Qh({find:j0e,type:this.type}),Qh({find:$0e,type:this.type})]}}),H0e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,U0e=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,z0e=Ko.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Zs(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[dg({find:H0e,type:this.type})]},addPasteRules(){return[Qh({find:U0e,type:this.type})]}}),G0e=Ko.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Zs(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),q0e=Tc.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",Zs(this.options.HTMLAttributes,t),0]}}),K0e=Tc.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",Zs(this.options.HTMLAttributes,t),0]}});var zR,GR;if(typeof WeakMap<"u"){let t=new WeakMap;zR=e=>t.get(e),GR=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;zR=r=>{for(let o=0;o<t.length;o+=2)if(t[o]==r)return t[o+1]},GR=(r,o)=>(n==10&&(n=0),t[n++]=r,t[n++]=o)}var Pr=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,o=e/this.width|0;let i=r+1,s=o+1;for(let a=1;i<this.width&&this.map[e+a]==n;a++)i++;for(let a=1;s<this.height&&this.map[e+this.width*a]==n;a++)s++;return{left:r,top:o,right:i,bottom:s}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:o,top:i,bottom:s}=this.findCell(t);return e=="horiz"?(n<0?r==0:o==this.width)?null:this.map[i*this.width+(n<0?r-1:o)]:(n<0?i==0:s==this.height)?null:this.map[r+this.width*(n<0?i-1:s)]}rectBetween(t,e){const{left:n,right:r,top:o,bottom:i}=this.findCell(t),{left:s,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,s),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(i,c)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let o=t.left;o<t.right;o++){const i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,!(o==t.left&&o&&this.map[i-1]==s||r==t.top&&r&&this.map[i-this.width]==s)&&e.push(s))}return e}positionAt(t,e,n){for(let r=0,o=0;;r++){const i=o+n.child(r).nodeSize;if(r==t){let s=e+t*this.width;const a=(t+1)*this.width;for(;s<a&&this.map[s]<o;)s++;return s==a?i-1:this.map[s]}o=i}}static get(t){return zR(t)||GR(t,W0e(t))}};function W0e(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=Y0e(t),n=t.childCount,r=[];let o=0,i=null;const s=[];for(let c=0,d=e*n;c<d;c++)r[c]=0;for(let c=0,d=0;c<n;c++){const f=t.child(c);d++;for(let y=0;;y++){for(;o<r.length&&r[o]!=0;)o++;if(y==f.childCount)break;const b=f.child(y),{colspan:_,rowspan:k,colwidth:M}=b.attrs;for(let N=0;N<k;N++){if(N+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:d,n:k-N});break}const j=o+N*e;for(let B=0;B<_;B++){r[j+B]==0?r[j+B]=d:(i||(i=[])).push({type:"collision",row:c,pos:d,n:_-B});const F=M&&M[B];if(F){const D=(j+B)%e*2,R=s[D];R==null||R!=F&&s[D+1]==1?(s[D]=F,s[D+1]=1):R==F&&s[D+1]++}}}o+=_,d+=b.nodeSize}const p=(c+1)*e;let g=0;for(;o<p;)r[o++]==0&&g++;g&&(i||(i=[])).push({type:"missing",row:c,n:g}),d++}(e===0||n===0)&&(i||(i=[])).push({type:"zero_sized"});const a=new Pr(e,n,r,i);let l=!1;for(let c=0;!l&&c<s.length;c+=2)s[c]!=null&&s[c+1]<n&&(l=!0);return l&&X0e(a,s,t),a}function Y0e(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const o=t.child(r);let i=0;if(n)for(let s=0;s<r;s++){const a=t.child(s);for(let l=0;l<a.childCount;l++){const c=a.child(l);s+c.attrs.rowspan>r&&(i+=c.attrs.colspan)}}for(let s=0;s<o.childCount;s++){const a=o.child(s);i+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=i:e!=i&&(e=Math.max(e,i))}return e}function X0e(t,e,n){t.problems||(t.problems=[]);const r={};for(let o=0;o<t.map.length;o++){const i=t.map[o];if(r[i])continue;r[i]=!0;const s=n.nodeAt(i);if(!s)throw new RangeError(`No cell with offset ${i} found`);let a=null;const l=s.attrs;for(let c=0;c<l.colspan;c++){const d=(o+c)%t.width,f=e[d*2];f!=null&&(!l.colwidth||l.colwidth[c]!=f)&&((a||(a=Q0e(l)))[c]=f)}a&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}function Q0e(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function Bi(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}}return e}var Bd=new Hn("selectingCells");function Vg(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function Z0e(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Ac(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function pO(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Vg(e.$head)||J0e(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function J0e(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function qR(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function e1e(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function mO(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function uG(t,e,n){const r=t.node(-1),o=Pr.get(r),i=t.start(-1),s=o.nextCell(t.pos-i,e,n);return s==null?null:t.node(0).resolve(i+s)}function Zh(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function dG(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}function t1e(t,e,n){const r=Bi(e.type.schema).header_cell;for(let o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0}var fr=class au extends Tt{constructor(e,n=e){const r=e.node(-1),o=Pr.get(r),i=e.start(-1),s=o.rectBetween(e.pos-i,n.pos-i),a=e.node(0),l=o.cellsInRect(s).filter(d=>d!=n.pos-i);l.unshift(n.pos-i);const c=l.map(d=>{const f=r.nodeAt(d);if(!f)throw RangeError(`No cell with offset ${d} found`);const p=i+d+1;return new zU(a.resolve(p),a.resolve(p+f.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(qR(r)&&qR(o)&&mO(r,o)){const i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?au.rowSelection(r,o):i&&this.isColSelection()?au.colSelection(r,o):new au(r,o)}return ft.between(r,o)}content(){const e=this.$anchorCell.node(-1),n=Pr.get(e),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),i={},s=[];for(let l=o.top;l<o.bottom;l++){const c=[];for(let d=l*n.width+o.left,f=o.left;f<o.right;f++,d++){const p=n.map[d];if(i[p])continue;i[p]=!0;const g=n.findCell(p);let y=e.nodeAt(p);if(!y)throw RangeError(`No cell with offset ${p} found`);const b=o.left-g.left,_=g.right-o.right;if(b>0||_>0){let k=y.attrs;if(b>0&&(k=Zh(k,0,b)),_>0&&(k=Zh(k,k.colspan-_,_)),g.left<o.left){if(y=y.type.createAndFill(k),!y)throw RangeError(`Could not create cell with attrs ${JSON.stringify(k)}`)}else y=y.type.create(k,y.content)}if(g.top<o.top||g.bottom>o.bottom){const k={...y.attrs,rowspan:Math.min(g.bottom,o.bottom)-Math.max(g.top,o.top)};g.top<o.top?y=y.type.createAndFill(k):y=y.type.create(k,y.content)}c.push(y)}s.push(e.child(l).copy(Le.from(c)))}const a=this.isColSelection()&&this.isRowSelection()?e:s;return new Ze(Le.from(a),1,1)}replace(e,n=Ze.empty){const r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){const{$from:a,$to:l}=o[s],c=e.mapping.slice(r);e.replace(c.map(a.pos),c.map(l.pos),s?Ze.empty:n)}const i=Tt.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);i&&e.setSelection(i)}replaceWith(e,n){this.replace(e,new Ze(Le.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Pr.get(n),o=this.$anchorCell.start(-1),i=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let s=0;s<i.length;s++)e(n.nodeAt(i[s]),o+i[s])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),o=Pr.get(r),i=e.start(-1),s=o.findCell(e.pos-i),a=o.findCell(n.pos-i),l=e.node(0);return s.top<=a.top?(s.top>0&&(e=l.resolve(i+o.map[s.left])),a.bottom<o.height&&(n=l.resolve(i+o.map[o.width*(o.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(i+o.map[a.left])),s.bottom<o.height&&(e=l.resolve(i+o.map[o.width*(o.height-1)+s.right-1]))),new au(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Pr.get(e),r=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-r),i=n.colCount(this.$headCell.pos-r);if(Math.min(o,i)>0)return!1;const s=o+this.$anchorCell.nodeAfter.attrs.colspan,a=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,a)==n.width}eq(e){return e instanceof au&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),o=Pr.get(r),i=e.start(-1),s=o.findCell(e.pos-i),a=o.findCell(n.pos-i),l=e.node(0);return s.left<=a.left?(s.left>0&&(e=l.resolve(i+o.map[s.top*o.width])),a.right<o.width&&(n=l.resolve(i+o.map[o.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(i+o.map[a.top*o.width])),s.right<o.width&&(e=l.resolve(i+o.map[o.width*(s.top+1)-1]))),new au(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new au(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new au(e.resolve(n),e.resolve(r))}getBookmark(){return new n1e(this.$anchorCell.pos,this.$headCell.pos)}};fr.prototype.visible=!1;Tt.jsonID("cell",fr);var n1e=class fG{constructor(e,n){this.anchor=e,this.head=n}map(e){return new fG(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&mO(n,r)?new fr(n,r):Tt.near(r,1)}};function r1e(t){if(!(t.selection instanceof fr))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(dr.node(r,r+n.nodeSize,{class:"selectedCell"}))}),In.create(t.doc,e)}function o1e({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,n++);for(let i=e.depth;i>=0&&!(e.before(i+1)>e.start(i));i--,r--);return n==r&&/row|table/.test(t.node(o).type.spec.tableRole)}function i1e({$from:t,$to:e}){let n,r;for(let o=t.depth;o>0;o--){const i=t.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){n=i;break}}for(let o=e.depth;o>0;o--){const i=e.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){r=i;break}}return n!==r&&e.parentOffset===0}function s1e(t,e,n){const r=(e||t).selection,o=(e||t).doc;let i,s;if(r instanceof vt&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")i=fr.create(o,r.from);else if(s=="row"){const a=o.resolve(r.from+1);i=fr.rowSelection(a,a)}else if(!n){const a=Pr.get(r.node),l=r.from+1,c=l+a.map[a.width*a.height-1];i=fr.create(o,l+1,c)}}else r instanceof ft&&o1e(r)?i=ft.create(o,r.from):r instanceof ft&&i1e(r)&&(i=ft.create(o,r.$from.start(),r.$from.end()));return i&&(e||(e=t.tr)).setSelection(i),e}var a1e=new Hn("fix-tables");function hG(t,e,n,r){const o=t.childCount,i=e.childCount;e:for(let s=0,a=0;s<i;s++){const l=e.child(s);for(let c=a,d=Math.min(o,s+3);c<d;c++)if(t.child(c)==l){a=c+1,n+=l.nodeSize;continue e}r(l,n),a<o&&t.child(a).sameMarkup(l)?hG(t.child(a),l,n+1,r):l.nodesBetween(0,l.content.size,r,n+1),n+=l.nodeSize}}function l1e(t,e){let n;const r=(o,i)=>{o.type.spec.tableRole=="table"&&(n=c1e(t,o,i,n))};return e?e.doc!=t.doc&&hG(e.doc,t.doc,0,r):t.doc.descendants(r),n}function c1e(t,e,n,r){const o=Pr.get(e);if(!o.problems)return r;r||(r=t.tr);const i=[];for(let l=0;l<o.height;l++)i.push(0);for(let l=0;l<o.problems.length;l++){const c=o.problems[l];if(c.type=="collision"){const d=e.nodeAt(c.pos);if(!d)continue;const f=d.attrs;for(let p=0;p<f.rowspan;p++)i[c.row+p]+=c.n;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,Zh(f,f.colspan-c.n,c.n))}else if(c.type=="missing")i[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const d=e.nodeAt(c.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...d.attrs,rowspan:d.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const d=e.nodeAt(c.pos);if(!d)continue;r.setNodeMarkup(r.mapping.map(n+1+c.pos),null,{...d.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const d=r.mapping.map(n);r.delete(d,d+e.nodeSize)}}let s,a;for(let l=0;l<i.length;l++)i[l]&&(s==null&&(s=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const d=e.child(l),f=c+d.nodeSize,p=i[l];if(p>0){let g="cell";d.firstChild&&(g=d.firstChild.type.spec.tableRole);const y=[];for(let _=0;_<p;_++){const k=Bi(t.schema)[g].createAndFill();k&&y.push(k)}const b=(l==0||s==l-1)&&a==l?c+1:f-1;r.insert(r.mapping.map(b),y)}c=f}return r.setMeta(a1e,{fixTables:!0})}function Rc(t){const e=t.selection,n=pO(t),r=n.node(-1),o=n.start(-1),i=Pr.get(r);return{...e instanceof fr?i.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):i.findCell(n.pos-o),tableStart:o,map:i,table:r}}function pG(t,{map:e,tableStart:n,table:r},o){let i=o>0?-1:0;t1e(e,r,o+i)&&(i=o==0||o==e.width?null:0);for(let s=0;s<e.height;s++){const a=s*e.width+o;if(o>0&&o<e.width&&e.map[a-1]==e.map[a]){const l=e.map[a],c=r.nodeAt(l);t.setNodeMarkup(t.mapping.map(n+l),null,dG(c.attrs,o-e.colCount(l))),s+=c.attrs.rowspan-1}else{const l=i==null?Bi(r.type.schema).cell:r.nodeAt(e.map[a+i]).type,c=e.positionAt(s,o,r);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function u1e(t,e){if(!Ac(t))return!1;if(e){const n=Rc(t);e(pG(t.tr,n,n.left))}return!0}function d1e(t,e){if(!Ac(t))return!1;if(e){const n=Rc(t);e(pG(t.tr,n,n.right))}return!0}function f1e(t,{map:e,table:n,tableStart:r},o){const i=t.mapping.maps.length;for(let s=0;s<e.height;){const a=s*e.width+o,l=e.map[a],c=n.nodeAt(l),d=c.attrs;if(o>0&&e.map[a-1]==l||o<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(i).map(r+l),null,Zh(d,o-e.colCount(l)));else{const f=t.mapping.slice(i).map(r+l);t.delete(f,f+c.nodeSize)}s+=d.rowspan}}function h1e(t,e){if(!Ac(t))return!1;if(e){const n=Rc(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;f1e(r,n,o),o!=n.left;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=Pr.get(i)}e(r)}return!0}function p1e(t,e,n){var r;const o=Bi(e.type.schema).header_cell;for(let i=0;i<t.width;i++)if(((r=e.nodeAt(t.map[i+n*t.width]))==null?void 0:r.type)!=o)return!1;return!0}function mG(t,{map:e,tableStart:n,table:r},o){var i;let s=n;for(let c=0;c<o;c++)s+=r.child(c).nodeSize;const a=[];let l=o>0?-1:0;p1e(e,r,o+l)&&(l=o==0||o==e.height?null:0);for(let c=0,d=e.width*o;c<e.width;c++,d++)if(o>0&&o<e.height&&e.map[d]==e.map[d-e.width]){const f=e.map[d],p=r.nodeAt(f).attrs;t.setNodeMarkup(n+f,null,{...p,rowspan:p.rowspan+1}),c+=p.colspan-1}else{const f=l==null?Bi(r.type.schema).cell:(i=r.nodeAt(e.map[d+l*e.width]))==null?void 0:i.type,p=f?.createAndFill();p&&a.push(p)}return t.insert(s,Bi(r.type.schema).row.create(null,a)),t}function m1e(t,e){if(!Ac(t))return!1;if(e){const n=Rc(t);e(mG(t.tr,n,n.top))}return!0}function g1e(t,e){if(!Ac(t))return!1;if(e){const n=Rc(t);e(mG(t.tr,n,n.bottom))}return!0}function y1e(t,{map:e,table:n,tableStart:r},o){let i=0;for(let c=0;c<o;c++)i+=n.child(c).nodeSize;const s=i+n.child(o).nodeSize,a=t.mapping.maps.length;t.delete(i+r,s+r);const l=new Set;for(let c=0,d=o*e.width;c<e.width;c++,d++){const f=e.map[d];if(!l.has(f)){if(l.add(f),o>0&&f==e.map[d-e.width]){const p=n.nodeAt(f).attrs;t.setNodeMarkup(t.mapping.slice(a).map(f+r),null,{...p,rowspan:p.rowspan-1}),c+=p.colspan-1}else if(o<e.height&&f==e.map[d+e.width]){const p=n.nodeAt(f),g=p.attrs,y=p.type.create({...g,rowspan:p.attrs.rowspan-1},p.content),b=e.positionAt(o+1,c,n);t.insert(t.mapping.slice(a).map(r+b),y),c+=g.colspan-1}}}}function v1e(t,e){if(!Ac(t))return!1;if(e){const n=Rc(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;y1e(r,n,o),o!=n.top;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=Pr.get(n.table)}e(r)}return!0}function A6(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function b1e({width:t,height:e,map:n},r){let o=r.top*t+r.left,i=o,s=(r.bottom-1)*t+r.left,a=o+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[i]==n[i-1]||r.right<t&&n[a]==n[a+1])return!0;i+=t,a+=t}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[o]==n[o-t]||r.bottom<e&&n[s]==n[s+t])return!0;o++,s++}return!1}function w1e(t,e){const n=t.selection;if(!(n instanceof fr)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Rc(t),{map:o}=r;if(b1e(o,r))return!1;if(e){const i=t.tr,s={};let a=Le.empty,l,c;for(let d=r.top;d<r.bottom;d++)for(let f=r.left;f<r.right;f++){const p=o.map[d*o.width+f],g=r.table.nodeAt(p);if(!(s[p]||!g))if(s[p]=!0,l==null)l=p,c=g;else{A6(g)||(a=a.append(g.content));const y=i.mapping.map(p+r.tableStart);i.delete(y,y+g.nodeSize)}}if(l==null||c==null)return!0;if(i.setNodeMarkup(l+r.tableStart,null,{...dG(c.attrs,c.attrs.colspan,r.right-r.left-c.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const d=l+1+c.content.size,f=A6(c)?l+1:d;i.replaceWith(f+r.tableStart,d+r.tableStart,a)}i.setSelection(new fr(i.doc.resolve(l+r.tableStart))),e(i)}return!0}function C1e(t,e){const n=Bi(t.schema);return S1e(({node:r})=>n[r.type.spec.tableRole])(t,e)}function S1e(t){return(e,n)=>{var r;const o=e.selection;let i,s;if(o instanceof fr){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;i=o.$anchorCell.nodeAfter,s=o.$anchorCell.pos}else{if(i=Z0e(o.$from),!i)return!1;s=(r=Vg(o.$from))==null?void 0:r.pos}if(i==null||s==null||i.attrs.colspan==1&&i.attrs.rowspan==1)return!1;if(n){let a=i.attrs;const l=[],c=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const d=Rc(e),f=e.tr;for(let g=0;g<d.right-d.left;g++)l.push(c?{...a,colwidth:c&&c[g]?[c[g]]:null}:a);let p;for(let g=d.top;g<d.bottom;g++){let y=d.map.positionAt(g,d.left,d.table);g==d.top&&(y+=i.nodeSize);for(let b=d.left,_=0;b<d.right;b++,_++)b==d.left&&g==d.top||f.insert(p=f.mapping.map(y+d.tableStart,1),t({node:i,row:g,col:b}).createAndFill(l[_]))}f.setNodeMarkup(s,t({node:i,row:d.top,col:d.left}),l[0]),o instanceof fr&&f.setSelection(new fr(f.doc.resolve(o.$anchorCell.pos),p?f.doc.resolve(p):void 0)),n(f)}return!0}}function _1e(t){return function(e,n){if(!Ac(e))return!1;if(n){const r=Bi(e.schema),o=Rc(e),i=e.tr,s=o.map.cellsInRect(t=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:t=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=s.map(l=>o.table.nodeAt(l));for(let l=0;l<s.length;l++)a[l].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[l],r.cell,a[l].attrs);if(i.steps.length==0)for(let l=0;l<s.length;l++)i.setNodeMarkup(o.tableStart+s[l],r.header_cell,a[l].attrs);n(i)}return!0}}function R6(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let o=0;o<r.length;o++){const i=e.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function gO(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?_1e(t):function(n,r){if(!Ac(n))return!1;if(r){const o=Bi(n.schema),i=Rc(n),s=n.tr,a=R6("row",i,o),l=R6("column",i,o),d=(t==="column"?a:t==="row"?l:!1)?1:0,f=t=="column"?{left:0,top:d,right:1,bottom:i.map.height}:t=="row"?{left:d,top:0,right:i.map.width,bottom:1}:i,p=t=="column"?l?o.cell:o.header_cell:t=="row"?a?o.cell:o.header_cell:o.cell;i.map.cellsInRect(f).forEach(g=>{const y=g+i.tableStart,b=s.doc.nodeAt(y);b&&s.setNodeMarkup(y,p,b.attrs)}),r(s)}return!0}}gO("row",{useDeprecatedLogic:!0});gO("column",{useDeprecatedLogic:!0});gO("cell",{useDeprecatedLogic:!0});function x1e(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,o=t.before();r>=0;r--){const i=t.node(-1).child(r),s=i.lastChild;if(s)return o-1-s.nodeSize;o-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),o=t.after();r<n.childCount;r++){const i=n.child(r);if(i.childCount)return o+1;o+=i.nodeSize}}return null}function I6(t){return function(e,n){if(!Ac(e))return!1;const r=x1e(pO(e),t);if(r==null)return!1;if(n){const o=e.doc.resolve(r);n(e.tr.setSelection(ft.between(o,e1e(o))).scrollIntoView())}return!0}}function iw(t,e){const n=t.selection;if(!(n instanceof fr))return!1;if(e){const r=t.tr,o=Bi(t.schema).cell.createAndFill().content;n.forEachCell((i,s)=>{i.content.eq(o)||r.replace(r.mapping.map(s+1),r.mapping.map(s+i.nodeSize-1),new Ze(o,0,0))}),r.docChanged&&e(r)}return!0}function E1e(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const o=e.child(0),i=o.type.spec.tableRole,s=o.type.schema,a=[];if(i=="row")for(let l=0;l<e.childCount;l++){let c=e.child(l).content;const d=l?0:Math.max(0,n-1),f=l<e.childCount-1?0:Math.max(0,r-1);(d||f)&&(c=KR(Bi(s).row,new Ze(c,d,f)).content),a.push(c)}else if(i=="cell"||i=="header_cell")a.push(n||r?KR(Bi(s).row,new Ze(e,n,r)).content:e);else return null;return k1e(s,a)}function k1e(t,e){const n=[];for(let o=0;o<e.length;o++){const i=e[o];for(let s=i.childCount-1;s>=0;s--){const{rowspan:a,colspan:l}=i.child(s).attrs;for(let c=o;c<o+a;c++)n[c]=(n[c]||0)+l}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=e.length&&e.push(Le.empty),n[o]<r){const i=Bi(t).cell.createAndFill(),s=[];for(let a=n[o];a<r;a++)s.push(i);e[o]=e[o].append(Le.from(s))}return{height:e.length,width:r,rows:e}}function KR(t,e){const n=t.createAndFill();return new GN(n).replace(0,n.content.size,e).doc}function T1e({width:t,height:e,rows:n},r,o){if(t!=r){const i=[],s=[];for(let a=0;a<n.length;a++){const l=n[a],c=[];for(let d=i[a]||0,f=0;d<r;f++){let p=l.child(f%l.childCount);d+p.attrs.colspan>r&&(p=p.type.createChecked(Zh(p.attrs,p.attrs.colspan,d+p.attrs.colspan-r),p.content)),c.push(p),d+=p.attrs.colspan;for(let g=1;g<p.attrs.rowspan;g++)i[a+g]=(i[a+g]||0)+p.attrs.colspan}s.push(Le.from(c))}n=s,t=r}if(e!=o){const i=[];for(let s=0,a=0;s<o;s++,a++){const l=[],c=n[a%e];for(let d=0;d<c.childCount;d++){let f=c.child(d);s+f.attrs.rowspan>o&&(f=f.type.create({...f.attrs,rowspan:Math.max(1,o-f.attrs.rowspan)},f.content)),l.push(f)}i.push(Le.from(l))}n=i,e=o}return{width:t,height:e,rows:n}}function A1e(t,e,n,r,o,i,s){const a=t.doc.type.schema,l=Bi(a);let c,d;if(o>e.width)for(let f=0,p=0;f<e.height;f++){const g=n.child(f);p+=g.nodeSize;const y=[];let b;g.lastChild==null||g.lastChild.type==l.cell?b=c||(c=l.cell.createAndFill()):b=d||(d=l.header_cell.createAndFill());for(let _=e.width;_<o;_++)y.push(b);t.insert(t.mapping.slice(s).map(p-1+r),y)}if(i>e.height){const f=[];for(let y=0,b=(e.height-1)*e.width;y<Math.max(e.width,o);y++){const _=y>=e.width?!1:n.nodeAt(e.map[b+y]).type==l.header_cell;f.push(_?d||(d=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const p=l.row.create(null,Le.from(f)),g=[];for(let y=e.height;y<i;y++)g.push(p);t.insert(t.mapping.slice(s).map(r+n.nodeSize-2),g)}return!!(c||d)}function M6(t,e,n,r,o,i,s,a){if(s==0||s==e.height)return!1;let l=!1;for(let c=o;c<i;c++){const d=s*e.width+c,f=e.map[d];if(e.map[d-e.width]==f){l=!0;const p=n.nodeAt(f),{top:g,left:y}=e.findCell(f);t.setNodeMarkup(t.mapping.slice(a).map(f+r),null,{...p.attrs,rowspan:s-g}),t.insert(t.mapping.slice(a).map(e.positionAt(s,y,n)),p.type.createAndFill({...p.attrs,rowspan:g+p.attrs.rowspan-s})),c+=p.attrs.colspan-1}}return l}function N6(t,e,n,r,o,i,s,a){if(s==0||s==e.width)return!1;let l=!1;for(let c=o;c<i;c++){const d=c*e.width+s,f=e.map[d];if(e.map[d-1]==f){l=!0;const p=n.nodeAt(f),g=e.colCount(f),y=t.mapping.slice(a).map(f+r);t.setNodeMarkup(y,null,Zh(p.attrs,s-g,p.attrs.colspan-(s-g))),t.insert(y+p.nodeSize,p.type.createAndFill(Zh(p.attrs,0,s-g))),c+=p.attrs.rowspan-1}}return l}function O6(t,e,n,r,o){let i=n?t.doc.nodeAt(n-1):t.doc;if(!i)throw new Error("No table found");let s=Pr.get(i);const{top:a,left:l}=r,c=l+o.width,d=a+o.height,f=t.tr;let p=0;function g(){if(i=n?f.doc.nodeAt(n-1):f.doc,!i)throw new Error("No table found");s=Pr.get(i),p=f.mapping.maps.length}A1e(f,s,i,n,c,d,p)&&g(),M6(f,s,i,n,l,c,a,p)&&g(),M6(f,s,i,n,l,c,d,p)&&g(),N6(f,s,i,n,a,d,l,p)&&g(),N6(f,s,i,n,a,d,c,p)&&g();for(let y=a;y<d;y++){const b=s.positionAt(y,l,i),_=s.positionAt(y,c,i);f.replace(f.mapping.slice(p).map(b+n),f.mapping.slice(p).map(_+n),new Ze(o.rows[y-a],0,0))}g(),f.setSelection(new fr(f.doc.resolve(n+s.positionAt(a,l,i)),f.doc.resolve(n+s.positionAt(d-1,c-1,i)))),e(f)}var R1e=rO({ArrowLeft:sw("horiz",-1),ArrowRight:sw("horiz",1),ArrowUp:sw("vert",-1),ArrowDown:sw("vert",1),"Shift-ArrowLeft":aw("horiz",-1),"Shift-ArrowRight":aw("horiz",1),"Shift-ArrowUp":aw("vert",-1),"Shift-ArrowDown":aw("vert",1),Backspace:iw,"Mod-Backspace":iw,Delete:iw,"Mod-Delete":iw});function Gw(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function sw(t,e){return(n,r,o)=>{if(!o)return!1;const i=n.selection;if(i instanceof fr)return Gw(n,r,Tt.near(i.$headCell,e));if(t!="horiz"&&!i.empty)return!1;const s=gG(o,t,e);if(s==null)return!1;if(t=="horiz")return Gw(n,r,Tt.near(n.doc.resolve(i.head+e),e));{const a=n.doc.resolve(s),l=uG(a,t,e);let c;return l?c=Tt.near(l,1):e<0?c=Tt.near(n.doc.resolve(a.before(-1)),-1):c=Tt.near(n.doc.resolve(a.after(-1)),1),Gw(n,r,c)}}}function aw(t,e){return(n,r,o)=>{if(!o)return!1;const i=n.selection;let s;if(i instanceof fr)s=i;else{const l=gG(o,t,e);if(l==null)return!1;s=new fr(n.doc.resolve(l))}const a=uG(s.$headCell,t,e);return a?Gw(n,r,new fr(s.$anchorCell,a)):!1}}function I1e(t,e){const n=t.state.doc,r=Vg(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new fr(r))),!0):!1}function M1e(t,e,n){if(!Ac(t.state))return!1;let r=E1e(n);const o=t.state.selection;if(o instanceof fr){r||(r={width:1,height:1,rows:[Le.from(KR(Bi(t.state.schema).cell,n))]});const i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),a=Pr.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=T1e(r,a.right-a.left,a.bottom-a.top),O6(t.state,t.dispatch,s,a,r),!0}else if(r){const i=pO(t.state),s=i.start(-1);return O6(t.state,t.dispatch,s,Pr.get(i.node(-1)).findCell(i.pos-s),r),!0}else return!1}function N1e(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=P6(t,e.target);let o;if(e.shiftKey&&t.state.selection instanceof fr)i(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(o=Vg(t.state.selection.$anchor))!=null&&((n=bA(t,e))==null?void 0:n.pos)!=o.pos)i(o,e),e.preventDefault();else if(!r)return;function i(l,c){let d=bA(t,c);const f=Bd.getState(t.state)==null;if(!d||!mO(l,d))if(f)d=l;else return;const p=new fr(l,d);if(f||!t.state.selection.eq(p)){const g=t.state.tr.setSelection(p);f&&g.setMeta(Bd,l.pos),t.dispatch(g)}}function s(){t.root.removeEventListener("mouseup",s),t.root.removeEventListener("dragstart",s),t.root.removeEventListener("mousemove",a),Bd.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(Bd,-1))}function a(l){const c=l,d=Bd.getState(t.state);let f;if(d!=null)f=t.state.doc.resolve(d);else if(P6(t,c.target)!=r&&(f=bA(t,e),!f))return s();f&&i(f,c)}t.root.addEventListener("mouseup",s),t.root.addEventListener("dragstart",s),t.root.addEventListener("mousemove",a)}function gG(t,e,n){if(!(t.state.selection instanceof ft))return null;const{$head:r}=t.state.selection;for(let o=r.depth-1;o>=0;o--){const i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const a=r.before(o),l=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(l)?a:null}}return null}function P6(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function bA(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?Vg(t.state.doc.resolve(n.pos)):null}var yG=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),WR(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,WR(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function WR(t,e,n,r,o,i){var s;let a=0,l=!0,c=e.firstChild;const d=t.firstChild;if(d){for(let f=0,p=0;f<d.childCount;f++){const{colspan:g,colwidth:y}=d.child(f).attrs;for(let b=0;b<g;b++,p++){const _=o==p?i:y&&y[b],k=_?_+"px":"";if(a+=_||r,_||(l=!1),c)c.style.width!=k&&(c.style.width=k),c=c.nextSibling;else{const M=document.createElement("col");M.style.width=k,e.appendChild(M)}}}for(;c;){const f=c.nextSibling;(s=c.parentNode)==null||s.removeChild(c),c=f}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var Ws=new Hn("tableColumnResizing");function O1e({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=yG,lastColumnResizable:o=!0}={}){const i=new cn({key:Ws,state:{init(s,a){var l,c;const d=(c=(l=i.spec)==null?void 0:l.props)==null?void 0:c.nodeViews,f=Bi(a.schema).table.name;return r&&d&&(d[f]=(p,g)=>new r(p,n,g)),new P1e(-1,!1)},apply(s,a){return a.apply(s)}},props:{attributes:s=>{const a=Ws.getState(s);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(s,a)=>{D1e(s,a,t,o)},mouseleave:s=>{L1e(s)},mousedown:(s,a)=>{V1e(s,a,e,n)}},decorations:s=>{const a=Ws.getState(s);if(a&&a.activeHandle>-1)return H1e(s,a.activeHandle)},nodeViews:{}}});return i}var P1e=class qw{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(Ws);if(r&&r.setHandle!=null)return new qw(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new qw(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let o=e.mapping.map(n.activeHandle,-1);return qR(e.doc.resolve(o))||(o=-1),new qw(o,n.dragging)}return n}};function D1e(t,e,n,r){if(!t.editable)return;const o=Ws.getState(t.state);if(o&&!o.dragging){const i=B1e(e.target);let s=-1;if(i){const{left:a,right:l}=i.getBoundingClientRect();e.clientX-a<=n?s=D6(t,e,"left",n):l-e.clientX<=n&&(s=D6(t,e,"right",n))}if(s!=o.activeHandle){if(!r&&s!==-1){const a=t.state.doc.resolve(s),l=a.node(-1),c=Pr.get(l),d=a.start(-1);if(c.colCount(a.pos-d)+a.nodeAfter.attrs.colspan-1==c.width-1)return}vG(t,s)}}}function L1e(t){if(!t.editable)return;const e=Ws.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&vG(t,-1)}function V1e(t,e,n,r){var o;if(!t.editable)return!1;const i=(o=t.dom.ownerDocument.defaultView)!=null?o:window,s=Ws.getState(t.state);if(!s||s.activeHandle==-1||s.dragging)return!1;const a=t.state.doc.nodeAt(s.activeHandle),l=j1e(t,s.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(Ws,{setDragging:{startX:e.clientX,startWidth:l}}));function c(f){i.removeEventListener("mouseup",c),i.removeEventListener("mousemove",d);const p=Ws.getState(t.state);p?.dragging&&($1e(t,p.activeHandle,L6(p.dragging,f,n)),t.dispatch(t.state.tr.setMeta(Ws,{setDragging:null})))}function d(f){if(!f.which)return c(f);const p=Ws.getState(t.state);if(p&&p.dragging){const g=L6(p.dragging,f,n);V6(t,p.activeHandle,g,r)}}return V6(t,s.activeHandle,l,r),i.addEventListener("mouseup",c),i.addEventListener("mousemove",d),e.preventDefault(),!0}function j1e(t,e,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const i=t.domAtPos(e);let a=i.node.childNodes[i.offset].offsetWidth,l=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],l--);return a/l}function B1e(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function D6(t,e,n,r){const o=n=="right"?-r:r,i=t.posAtCoords({left:e.clientX+o,top:e.clientY});if(!i)return-1;const{pos:s}=i,a=Vg(t.state.doc.resolve(s));if(!a)return-1;if(n=="right")return a.pos;const l=Pr.get(a.node(-1)),c=a.start(-1),d=l.map.indexOf(a.pos-c);return d%l.width==0?-1:c+l.map[d-1]}function L6(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function vG(t,e){t.dispatch(t.state.tr.setMeta(Ws,{setHandle:e}))}function $1e(t,e,n){const r=t.state.doc.resolve(e),o=r.node(-1),i=Pr.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let c=0;c<i.height;c++){const d=c*i.width+a;if(c&&i.map[d]==i.map[d-i.width])continue;const f=i.map[d],p=o.nodeAt(f).attrs,g=p.colspan==1?0:a-i.colCount(f);if(p.colwidth&&p.colwidth[g]==n)continue;const y=p.colwidth?p.colwidth.slice():F1e(p.colspan);y[g]=n,l.setNodeMarkup(s+f,null,{...p,colwidth:y})}l.docChanged&&t.dispatch(l)}function V6(t,e,n,r){const o=t.state.doc.resolve(e),i=o.node(-1),s=o.start(-1),a=Pr.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1;let l=t.domAtPos(o.start(-1)).node;for(;l&&l.nodeName!="TABLE";)l=l.parentNode;l&&WR(i,l.firstChild,l,r,a,n)}function F1e(t){return Array(t).fill(0)}function H1e(t,e){var n;const r=[],o=t.doc.resolve(e),i=o.node(-1);if(!i)return In.empty;const s=Pr.get(i),a=o.start(-1),l=s.colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1;for(let c=0;c<s.height;c++){const d=l+c*s.width;if((l==s.width-1||s.map[d]!=s.map[d+1])&&(c==0||s.map[d]!=s.map[d-s.width])){const f=s.map[d],p=a+f+i.nodeAt(f).nodeSize-1,g=document.createElement("div");g.className="column-resize-handle",(n=Ws.getState(t))!=null&&n.dragging&&r.push(dr.node(a+f,a+f+i.nodeAt(f).nodeSize,{class:"column-resize-dragging"})),r.push(dr.widget(p,g))}}return In.create(t.doc,r)}function U1e({allowTableNodeSelection:t=!1}={}){return new cn({key:Bd,state:{init(){return null},apply(e,n){const r=e.getMeta(Bd);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:o,pos:i}=e.mapping.mapResult(n);return o?null:i}},props:{decorations:r1e,handleDOMEvents:{mousedown:N1e},createSelectionBetween(e){return Bd.getState(e.state)!=null?e.state.selection:null},handleTripleClick:I1e,handleKeyDown:R1e,handlePaste:M1e},appendTransaction(e,n,r){return s1e(r,l1e(r,n),t)}})}class Wr extends Tt{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Wr.valid(r)?new Wr(r):Tt.near(r)}content(){return Ze.empty}eq(e){return e instanceof Wr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Wr(e.resolve(n.pos))}getBookmark(){return new yO(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!z1e(e)||!G1e(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Wr.valid(e))return e;let o=e.pos,i=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){i=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;o+=n;let l=e.doc.resolve(o);if(Wr.valid(l))return l}for(;;){let s=n>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!vt.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=s,o+=n;let a=e.doc.resolve(o);if(Wr.valid(a))return a}return null}}}Wr.prototype.visible=!1;Wr.findFrom=Wr.findGapCursorFrom;Tt.jsonID("gapcursor",Wr);class yO{constructor(e){this.pos=e}map(e){return new yO(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Wr.valid(n)?new Wr(n):Tt.near(n)}}function z1e(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function G1e(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function q1e(){return new cn({props:{decorations:X1e,createSelectionBetween(t,e,n){return e.pos==n.pos&&Wr.valid(n)?new Wr(n):null},handleClick:W1e,handleKeyDown:K1e,handleDOMEvents:{beforeinput:Y1e}}})}const K1e=rO({ArrowLeft:lw("horiz",-1),ArrowRight:lw("horiz",1),ArrowUp:lw("vert",-1),ArrowDown:lw("vert",1)});function lw(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,i){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof ft){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Wr.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new Wr(c))),!0):!1}}function W1e(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Wr.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&vt.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Wr(r))),!0)}function Y1e(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Wr))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=Le.empty;for(let s=r.length-1;s>=0;s--)o=Le.from(r[s].createAndFill(null,o));let i=t.state.tr.replace(n.pos,n.pos,new Ze(o,0,0));return i.setSelection(ft.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function X1e(t){if(!(t.selection instanceof Wr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",In.create(t.doc,[dr.widget(t.selection.head,e,{key:"gapcursor"})])}const Q1e=yr.create({name:"gapCursor",addProseMirrorPlugins(){return[q1e()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=_n(gt(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}});var JC=200,zo=function(){};zo.prototype.append=function(e){return e.length?(e=zo.from(e),!this.length&&e||e.length<JC&&this.leafAppend(e)||this.length<JC&&e.leafPrepend(this)||this.appendInner(e)):this};zo.prototype.prepend=function(e){return e.length?zo.from(e).append(this):this};zo.prototype.appendInner=function(e){return new Z1e(this,e)};zo.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?zo.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};zo.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};zo.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};zo.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(i,s){return o.push(e(i,s))},n,r),o};zo.from=function(e){return e instanceof zo?e:e&&e.length?new bG(e):zo.empty};var bG=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new e(this.values.slice(o,i))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,i,s,a){for(var l=i;l<s;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,i,s,a){for(var l=i-1;l>=s;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=JC)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=JC)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(zo);zo.empty=new bG([]);var Z1e=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,i,s){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(i,a),s)===!1||i>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,i)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,i,s){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(i,a)-a,s+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(o,a),i,s)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(r,o):r>=i?this.right.slice(r-i,o-i):this.left.slice(r,i).append(this.right.slice(0,o-i))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(zo);const J1e=500;class dl{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,i;n&&(o=this.remapping(r,this.items.length),i=o.maps.length);let s=e.tr,a,l,c=[],d=[];return this.items.forEach((f,p)=>{if(!f.step){o||(o=this.remapping(r,p+1),i=o.maps.length),i--,d.push(f);return}if(o){d.push(new Ed(f.map));let g=f.step.map(o.slice(i)),y;g&&s.maybeStep(g).doc&&(y=s.mapping.maps[s.mapping.maps.length-1],c.push(new Ed(y,void 0,void 0,c.length+d.length))),i--,y&&o.appendMap(y,i)}else s.maybeStep(f.step);if(f.selection)return a=o?f.selection.map(o.slice(i)):f.selection,l=new dl(this.items.slice(0,r).append(d.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,r,o){let i=[],s=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let d=0;d<e.steps.length;d++){let f=e.steps[d].invert(e.docs[d]),p=new Ed(e.mapping.maps[d],f,n),g;(g=l&&l.merge(p))&&(p=g,d?i.pop():a=a.slice(0,a.length-1)),i.push(p),n&&(s++,n=void 0),o||(l=p)}let c=s-r.depth;return c>twe&&(a=ewe(a,c),s-=c),new dl(a.append(i),s)}remapping(e,n){let r=new sg;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new dl(this.items.append(e.map(n=>new Ed(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),i=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(p=>{p.selection&&a--},o);let l=n;this.items.forEach(p=>{let g=i.getMirror(--l);if(g==null)return;s=Math.min(s,g);let y=i.maps[g];if(p.step){let b=e.steps[g].invert(e.docs[g]),_=p.selection&&p.selection.map(i.slice(l+1,g));_&&a++,r.push(new Ed(y,b,_))}else r.push(new Ed(y))},o);let c=[];for(let p=n;p<s;p++)c.push(new Ed(i.maps[p]));let d=this.items.slice(0,o).append(c).append(r),f=new dl(d,a);return f.emptyItemCount()>J1e&&(f=f.compress(this.items.length-r.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],i=0;return this.items.forEach((s,a)=>{if(a>=e)o.push(s),s.selection&&i++;else if(s.step){let l=s.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let d=s.selection&&s.selection.map(n.slice(r));d&&i++;let f=new Ed(c.invert(),l,d),p,g=o.length-1;(p=o.length&&o[g].merge(f))?o[g]=p:o.push(f)}}else s.map&&r--},this.items.length,0),new dl(zo.from(o.reverse()),i)}}dl.empty=new dl(zo.empty,0);function ewe(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}let Ed=class wG{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new wG(n.getMap().invert(),n,this.selection)}}};class Od{constructor(e,n,r,o,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i}}const twe=20;function nwe(t,e,n,r){let o=n.getMeta(Vh),i;if(o)return o.historyState;n.getMeta(iwe)&&(t=new Od(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(Vh))return s.getMeta(Vh).redo?new Od(t.done.addTransform(n,void 0,r,Kw(e)),t.undone,j6(n.mapping.maps),t.prevTime,t.prevComposition):new Od(t.done,t.undone.addTransform(n,void 0,r,Kw(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!rwe(n,t.prevRanges)),c=s?wA(t.prevRanges,n.mapping):j6(n.mapping.maps);return new Od(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,Kw(e)),dl.empty,c,n.time,a??t.prevComposition)}else return(i=n.getMeta("rebased"))?new Od(t.done.rebased(n,i),t.undone.rebased(n,i),wA(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Od(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),wA(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function rwe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&o>=e[i]&&(n=!0)}),n}function j6(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,i,s)=>e.push(i,s));return e}function wA(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function owe(t,e,n){let r=Kw(e),o=Vh.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let s=i.selection.resolve(i.transform.doc),a=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),o,r),l=new Od(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(s).setMeta(Vh,{redo:n,historyState:l})}let CA=!1,B6=null;function Kw(t){let e=t.plugins;if(B6!=e){CA=!1,B6=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){CA=!0;break}}return CA}const Vh=new Hn("history"),iwe=new Hn("closeHistory");function swe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new cn({key:Vh,state:{init(){return new Od(dl.empty,dl.empty,null,0,-1)},apply(e,n,r){return nwe(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?vO:r=="historyRedo"?bO:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function CG(t,e){return(n,r)=>{let o=Vh.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let i=owe(o,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const vO=CG(!1,!0),bO=CG(!0,!0),awe=yr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>vO(t,e),redo:()=>({state:t,dispatch:e})=>bO(t,e)}},addProseMirrorPlugins(){return[swe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),lwe="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",cwe="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",fg=(t,e)=>{for(const n in e)t[n]=e[n];return t},YR="numeric",XR="ascii",QR="alpha",Tv="asciinumeric",av="alphanumeric",ZR="domain",SG="emoji",uwe="scheme",dwe="slashscheme",SA="whitespace";function fwe(t,e){return t in e||(e[t]=[]),e[t]}function Th(t,e,n){e[YR]&&(e[Tv]=!0,e[av]=!0),e[XR]&&(e[Tv]=!0,e[QR]=!0),e[Tv]&&(e[av]=!0),e[QR]&&(e[av]=!0),e[av]&&(e[ZR]=!0),e[SG]&&(e[ZR]=!0);for(const r in e){const o=fwe(r,n);o.indexOf(t)<0&&o.push(t)}}function hwe(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function ws(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}ws.groups={};ws.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],i=e.jr[r][1];if(i&&o.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr(t,e,n,r){r=r||ws.groups;let o;return e&&e.j?o=e:(o=new ws(e),n&&r&&Th(e,n,r)),this.jr.push([t,o]),o},ts(t,e,n,r){let o=this;const i=t.length;if(!i)return o;for(let s=0;s<i-1;s++)o=o.tt(t[s]);return o.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||ws.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const i=e;let s,a=o.go(t);if(a?(s=new ws,fg(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new ws,i){if(r)if(s.t&&typeof s.t=="string"){const l=fg(hwe(s.t,r),n);Th(i,l,r)}else n&&Th(i,n,r);s.t=i}return o.j[t]=s,s}};const ln=(t,e,n,r,o)=>t.ta(e,n,r,o),Gr=(t,e,n,r,o)=>t.tr(e,n,r,o),$6=(t,e,n,r,o)=>t.ts(e,n,r,o),Ye=(t,e,n,r,o)=>t.tt(e,n,r,o),lu="WORD",JR="UWORD",_G="ASCIINUMERICAL",xG="ALPHANUMERICAL",ib="LOCALHOST",eI="TLD",tI="UTLD",Ww="SCHEME",gm="SLASH_SCHEME",wO="NUM",nI="WS",CO="NL",Av="OPENBRACE",Rv="CLOSEBRACE",eS="OPENBRACKET",tS="CLOSEBRACKET",nS="OPENPAREN",rS="CLOSEPAREN",oS="OPENANGLEBRACKET",iS="CLOSEANGLEBRACKET",sS="FULLWIDTHLEFTPAREN",aS="FULLWIDTHRIGHTPAREN",lS="LEFTCORNERBRACKET",cS="RIGHTCORNERBRACKET",uS="LEFTWHITECORNERBRACKET",dS="RIGHTWHITECORNERBRACKET",fS="FULLWIDTHLESSTHAN",hS="FULLWIDTHGREATERTHAN",pS="AMPERSAND",mS="APOSTROPHE",gS="ASTERISK",Pd="AT",yS="BACKSLASH",vS="BACKTICK",bS="CARET",$d="COLON",SO="COMMA",wS="DOLLAR",Ql="DOT",CS="EQUALS",_O="EXCLAMATION",Ta="HYPHEN",Iv="PERCENT",SS="PIPE",_S="PLUS",xS="POUND",Mv="QUERY",xO="QUOTE",EG="FULLWIDTHMIDDLEDOT",EO="SEMI",Zl="SLASH",Nv="TILDE",ES="UNDERSCORE",kG="EMOJI",kS="SYM";var TG=Object.freeze({__proto__:null,ALPHANUMERICAL:xG,AMPERSAND:pS,APOSTROPHE:mS,ASCIINUMERICAL:_G,ASTERISK:gS,AT:Pd,BACKSLASH:yS,BACKTICK:vS,CARET:bS,CLOSEANGLEBRACKET:iS,CLOSEBRACE:Rv,CLOSEBRACKET:tS,CLOSEPAREN:rS,COLON:$d,COMMA:SO,DOLLAR:wS,DOT:Ql,EMOJI:kG,EQUALS:CS,EXCLAMATION:_O,FULLWIDTHGREATERTHAN:hS,FULLWIDTHLEFTPAREN:sS,FULLWIDTHLESSTHAN:fS,FULLWIDTHMIDDLEDOT:EG,FULLWIDTHRIGHTPAREN:aS,HYPHEN:Ta,LEFTCORNERBRACKET:lS,LEFTWHITECORNERBRACKET:uS,LOCALHOST:ib,NL:CO,NUM:wO,OPENANGLEBRACKET:oS,OPENBRACE:Av,OPENBRACKET:eS,OPENPAREN:nS,PERCENT:Iv,PIPE:SS,PLUS:_S,POUND:xS,QUERY:Mv,QUOTE:xO,RIGHTCORNERBRACKET:cS,RIGHTWHITECORNERBRACKET:dS,SCHEME:Ww,SEMI:EO,SLASH:Zl,SLASH_SCHEME:gm,SYM:kS,TILDE:Nv,TLD:eI,UNDERSCORE:ES,UTLD:tI,UWORD:JR,WORD:lu,WS:nI});const nu=/[a-z]/,Yy=new RegExp("\\p{L}","u"),_A=new RegExp("\\p{Emoji}","u"),ru=/\d/,xA=/\s/,F6="\r",EA=`
`,pwe="️",mwe="‍",kA="￼";let cw=null,uw=null;function gwe(t=[]){const e={};ws.groups=e;const n=new ws;cw==null&&(cw=H6(lwe)),uw==null&&(uw=H6(cwe)),Ye(n,"'",mS),Ye(n,"{",Av),Ye(n,"}",Rv),Ye(n,"[",eS),Ye(n,"]",tS),Ye(n,"(",nS),Ye(n,")",rS),Ye(n,"<",oS),Ye(n,">",iS),Ye(n,"（",sS),Ye(n,"）",aS),Ye(n,"「",lS),Ye(n,"」",cS),Ye(n,"『",uS),Ye(n,"』",dS),Ye(n,"＜",fS),Ye(n,"＞",hS),Ye(n,"&",pS),Ye(n,"*",gS),Ye(n,"@",Pd),Ye(n,"`",vS),Ye(n,"^",bS),Ye(n,":",$d),Ye(n,",",SO),Ye(n,"$",wS),Ye(n,".",Ql),Ye(n,"=",CS),Ye(n,"!",_O),Ye(n,"-",Ta),Ye(n,"%",Iv),Ye(n,"|",SS),Ye(n,"+",_S),Ye(n,"#",xS),Ye(n,"?",Mv),Ye(n,'"',xO),Ye(n,"/",Zl),Ye(n,";",EO),Ye(n,"~",Nv),Ye(n,"_",ES),Ye(n,"\\",yS),Ye(n,"・",EG);const r=Gr(n,ru,wO,{[YR]:!0});Gr(r,ru,r);const o=Gr(r,nu,_G,{[Tv]:!0}),i=Gr(r,Yy,xG,{[av]:!0}),s=Gr(n,nu,lu,{[XR]:!0});Gr(s,ru,o),Gr(s,nu,s),Gr(o,ru,o),Gr(o,nu,o);const a=Gr(n,Yy,JR,{[QR]:!0});Gr(a,nu),Gr(a,ru,i),Gr(a,Yy,a),Gr(i,ru,i),Gr(i,nu),Gr(i,Yy,i);const l=Ye(n,EA,CO,{[SA]:!0}),c=Ye(n,F6,nI,{[SA]:!0}),d=Gr(n,xA,nI,{[SA]:!0});Ye(n,kA,d),Ye(c,EA,l),Ye(c,kA,d),Gr(c,xA,d),Ye(d,F6),Ye(d,EA),Gr(d,xA,d),Ye(d,kA,d);const f=Gr(n,_A,kG,{[SG]:!0});Ye(f,"#"),Gr(f,_A,f),Ye(f,pwe,f);const p=Ye(f,mwe);Ye(p,"#"),Gr(p,_A,f);const g=[[nu,s],[ru,o]],y=[[nu,null],[Yy,a],[ru,i]];for(let b=0;b<cw.length;b++)kd(n,cw[b],eI,lu,g);for(let b=0;b<uw.length;b++)kd(n,uw[b],tI,JR,y);Th(eI,{tld:!0,ascii:!0},e),Th(tI,{utld:!0,alpha:!0},e),kd(n,"file",Ww,lu,g),kd(n,"mailto",Ww,lu,g),kd(n,"http",gm,lu,g),kd(n,"https",gm,lu,g),kd(n,"ftp",gm,lu,g),kd(n,"ftps",gm,lu,g),Th(Ww,{scheme:!0,ascii:!0},e),Th(gm,{slashscheme:!0,ascii:!0},e),t=t.sort((b,_)=>b[0]>_[0]?1:-1);for(let b=0;b<t.length;b++){const _=t[b][0],M=t[b][1]?{[uwe]:!0}:{[dwe]:!0};_.indexOf("-")>=0?M[ZR]=!0:nu.test(_)?ru.test(_)?M[Tv]=!0:M[XR]=!0:M[YR]=!0,$6(n,_,_,M)}return $6(n,"localhost",ib,{ascii:!0}),n.jd=new ws(kS),{start:n,tokens:fg({groups:e},TG)}}function AG(t,e){const n=ywe(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,o=[];let i=0,s=0;for(;s<r;){let a=t,l=null,c=0,d=null,f=-1,p=-1;for(;s<r&&(l=a.go(n[s]));)a=l,a.accepts()?(f=0,p=0,d=a):f>=0&&(f+=n[s].length,p++),c+=n[s].length,i+=n[s].length,s++;i-=f,s-=p,c-=f,o.push({t:d.t,v:e.slice(i-c,i),s:i-c,e:i})}return o}function ywe(t){const e=[],n=t.length;let r=0;for(;r<n;){let o=t.charCodeAt(r),i,s=o<55296||o>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function kd(t,e,n,r,o){let i;const s=e.length;for(let a=0;a<s-1;a++){const l=e[a];t.j[l]?i=t.j[l]:(i=new ws(r),i.jr=o.slice(),t.j[l]=i),t=i}return i=new ws(n),i.jr=o.slice(),t.j[e[s-1]]=i,i}function H6(t){const e=[],n=[];let r=0,o="0123456789";for(;r<t.length;){let i=0;for(;o.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let s=parseInt(t.substring(r,r+i),10);s>0;s--)n.pop();r+=i}else n.push(t[r]),r++}return e}const sb={defaultProtocol:"http",events:null,format:U6,formatHref:U6,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function kO(t,e=null){let n=fg({},sb);t&&(n=fg(n,t instanceof kO?t.o:t));const r=n.ignoreTags,o=[];for(let i=0;i<r.length;i++)o.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}kO.prototype={o:sb,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let o=this.o[t];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:sb[t],typeof o=="function"&&r&&(o=o(e,n))):typeof o=="function"&&r&&(o=o(e,n.t,n)),o)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function U6(t){return t}function RG(t,e){this.t="token",this.v=t,this.tk=e}RG.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=sb.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),i=this.toFormattedString(t),s={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),d=t.getObj("attributes",n,e),f=t.getObj("events",n,e);return s.href=r,a&&(s.class=a),l&&(s.target=l),c&&(s.rel=c),d&&fg(s,d),{tagName:o,attributes:s,content:i,eventListeners:f}}};function Ax(t,e){class n extends RG{constructor(o,i){super(o,i),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const z6=Ax("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),G6=Ax("text"),vwe=Ax("nl"),dw=Ax("url",{isLink:!0,toHref(t=sb.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==ib&&t[1].t===$d}}),Ea=t=>new ws(t);function bwe({groups:t}){const e=t.domain.concat([pS,gS,Pd,yS,vS,bS,wS,CS,Ta,wO,Iv,SS,_S,xS,Zl,kS,Nv,ES]),n=[mS,$d,SO,Ql,_O,Iv,Mv,xO,EO,oS,iS,Av,Rv,tS,eS,nS,rS,sS,aS,lS,cS,uS,dS,fS,hS],r=[pS,mS,gS,yS,vS,bS,wS,CS,Ta,Av,Rv,Iv,SS,_S,xS,Mv,Zl,kS,Nv,ES],o=Ea(),i=Ye(o,Nv);ln(i,r,i),ln(i,t.domain,i);const s=Ea(),a=Ea(),l=Ea();ln(o,t.domain,s),ln(o,t.scheme,a),ln(o,t.slashscheme,l),ln(s,r,i),ln(s,t.domain,s);const c=Ye(s,Pd);Ye(i,Pd,c),Ye(a,Pd,c),Ye(l,Pd,c);const d=Ye(i,Ql);ln(d,r,i),ln(d,t.domain,i);const f=Ea();ln(c,t.domain,f),ln(f,t.domain,f);const p=Ye(f,Ql);ln(p,t.domain,f);const g=Ea(z6);ln(p,t.tld,g),ln(p,t.utld,g),Ye(c,ib,g);const y=Ye(f,Ta);Ye(y,Ta,y),ln(y,t.domain,f),ln(g,t.domain,f),Ye(g,Ql,p),Ye(g,Ta,y);const b=Ye(g,$d);ln(b,t.numeric,z6);const _=Ye(s,Ta),k=Ye(s,Ql);Ye(_,Ta,_),ln(_,t.domain,s),ln(k,r,i),ln(k,t.domain,s);const M=Ea(dw);ln(k,t.tld,M),ln(k,t.utld,M),ln(M,t.domain,s),ln(M,r,i),Ye(M,Ql,k),Ye(M,Ta,_),Ye(M,Pd,c);const N=Ye(M,$d),j=Ea(dw);ln(N,t.numeric,j);const B=Ea(dw),F=Ea();ln(B,e,B),ln(B,n,F),ln(F,e,B),ln(F,n,F),Ye(M,Zl,B),Ye(j,Zl,B);const D=Ye(a,$d),R=Ye(l,$d),I=Ye(R,Zl),L=Ye(I,Zl);ln(a,t.domain,s),Ye(a,Ql,k),Ye(a,Ta,_),ln(l,t.domain,s),Ye(l,Ql,k),Ye(l,Ta,_),ln(D,t.domain,B),Ye(D,Zl,B),Ye(D,Mv,B),ln(L,t.domain,B),ln(L,e,B),Ye(L,Zl,B);const z=[[Av,Rv],[eS,tS],[nS,rS],[oS,iS],[sS,aS],[lS,cS],[uS,dS],[fS,hS]];for(let q=0;q<z.length;q++){const[H,ne]=z[q],re=Ye(B,H);Ye(F,H,re),Ye(re,ne,B);const V=Ea(dw);ln(re,e,V);const U=Ea();ln(re,n),ln(V,e,V),ln(V,n,U),ln(U,e,V),ln(U,n,U),Ye(V,ne,B),Ye(U,ne,B)}return Ye(o,ib,M),Ye(o,CO,vwe),{start:o,tokens:TG}}function wwe(t,e,n){let r=n.length,o=0,i=[],s=[];for(;o<r;){let a=t,l=null,c=null,d=0,f=null,p=-1;for(;o<r&&!(l=a.go(n[o].t));)s.push(n[o++]);for(;o<r&&(c=l||a.go(n[o].t));)l=null,a=c,a.accepts()?(p=0,f=a):p>=0&&p++,o++,d++;if(p<0)o-=d,o<r&&(s.push(n[o]),o++);else{s.length>0&&(i.push(TA(G6,e,s)),s=[]),o-=p,d-=p;const g=f.t,y=n.slice(o-d,o);i.push(TA(g,e,y))}}return s.length>0&&i.push(TA(G6,e,s)),i}function TA(t,e,n){const r=n[0].s,o=n[n.length-1].e,i=e.slice(r,o);return new t(i,n)}const Cwe=typeof console<"u"&&console&&console.warn||(()=>{}),Swe="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Tr={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function _we(){return ws.groups={},Tr.scanner=null,Tr.parser=null,Tr.tokenQueue=[],Tr.pluginQueue=[],Tr.customSchemes=[],Tr.initialized=!1,Tr}function q6(t,e=!1){if(Tr.initialized&&Cwe(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Swe}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Tr.customSchemes.push([t,e])}function xwe(){Tr.scanner=gwe(Tr.customSchemes);for(let t=0;t<Tr.tokenQueue.length;t++)Tr.tokenQueue[t][1]({scanner:Tr.scanner});Tr.parser=bwe(Tr.scanner.tokens);for(let t=0;t<Tr.pluginQueue.length;t++)Tr.pluginQueue[t][1]({scanner:Tr.scanner,parser:Tr.parser});return Tr.initialized=!0,Tr}function TO(t){return Tr.initialized||xwe(),wwe(Tr.parser.start,t,AG(Tr.scanner.start,t))}TO.scan=AG;function IG(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new kO(n),o=TO(t),i=[];for(let s=0;s<o.length;s++){const a=o[s];a.isLink&&(!e||a.t===e)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}const AO="[\0-   ᠎ -\u2029 　]",Ewe=new RegExp(AO),kwe=new RegExp(`${AO}$`),Twe=new RegExp(AO,"g");function Awe(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function Rwe(t){return new cn({key:new Hn("autolink"),appendTransaction:(e,n,r)=>{const o=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),i=e.some(c=>c.getMeta("preventAutolink"));if(!o||i)return;const{tr:s}=r,a=dO(n.doc,[...e]);if(Jz(a).forEach(({newRange:c})=>{const d=Qz(r.doc,c,g=>g.isTextblock);let f,p;if(d.length>1)f=d[0],p=r.doc.textBetween(f.pos,f.pos+f.node.nodeSize,void 0," ");else if(d.length){const g=r.doc.textBetween(c.from,c.to," "," ");if(!kwe.test(g))return;f=d[0],p=r.doc.textBetween(f.pos,c.to,void 0," ")}if(f&&p){const g=p.split(Ewe).filter(Boolean);if(g.length<=0)return!1;const y=g[g.length-1],b=f.pos+p.lastIndexOf(y);if(!y)return!1;const _=TO(y).map(k=>k.toObject(t.defaultProtocol));if(!Awe(_))return!1;_.filter(k=>k.isLink).map(k=>({...k,from:b+k.start+1,to:b+k.end+1})).filter(k=>r.schema.marks.code?!r.doc.rangeHasMark(k.from,k.to,r.schema.marks.code):!0).filter(k=>t.validate(k.value)).filter(k=>t.shouldAutoLink(k.value)).forEach(k=>{fO(k.from,k.to,r.doc).some(M=>M.mark.type===t.type)||s.addMark(k.from,k.to,t.type.create({href:k.href}))})}}),!!s.steps.length)return s}})}function Iwe(t){return new cn({key:new Hn("handleClickLink"),props:{handleClick:(e,n,r)=>{var o,i;if(r.button!==0||!e.editable)return!1;let s=r.target;const a=[];for(;s.nodeName!=="DIV";)a.push(s),s=s.parentNode;if(!a.find(p=>p.nodeName==="A"))return!1;const l=Zz(e.state,t.type.name),c=r.target,d=(o=c?.href)!==null&&o!==void 0?o:l.href,f=(i=c?.target)!==null&&i!==void 0?i:l.target;return c&&d?(window.open(d,f),!0):!1}}})}function Mwe(t){return new cn({key:new Hn("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:o}=e,{selection:i}=o,{empty:s}=i;if(s)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=IG(a,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:t.editor.commands.setMark(t.type,{href:l.href})}}})}function fh(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!t||t.replace(Twe,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Nwe=Ko.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){q6(t);return}q6(t.scheme,t.optionalSlashes)})},onDestroy(){_we()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!fh(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!fh(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!fh(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Zs(this.options.HTMLAttributes,t),0]:["a",Zs(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!fh(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!fh(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Qh({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,o=IG(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:s=>!!fh(s,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(Rwe({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!fh(o,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(Iwe({type:this.type})),this.options.linkOnPaste&&t.push(Mwe({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),Owe=Tc.create({name:"text",group:"inline"}),Ba=()=>new Map,rI=t=>{const e=Ba();return t.forEach((n,r)=>{e.set(r,n)}),e},Ic=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},Pwe=(t,e)=>{const n=[];for(const[r,o]of t)n.push(e(o,r));return n},Dwe=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},Jh=()=>new Set,AA=t=>t[t.length-1],Lwe=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},vf=Array.from,Vwe=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},oI=Array.isArray;class MG{constructor(){this._observers=Ba()}on(e,n){return Ic(this._observers,e,Jh).add(n),n}once(e,n){const r=(...o)=>{this.off(e,r),n(...o)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return vf((this._observers.get(e)||Ba()).values()).forEach(r=>r(...n))}destroy(){this._observers=Ba()}}const Du=Math.floor,Yw=Math.abs,Eu=(t,e)=>t<e?t:e,kl=(t,e)=>t>e?t:e,NG=t=>t!==0?t<0:1/t<0,K6=1,W6=2,RA=4,IA=8,ab=32,ku=64,Xi=128,jwe=1<<29,Rx=31,iI=63,jh=127,Bwe=2147483647,OG=Number.MAX_SAFE_INTEGER,$we=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&Du(t)===t),Fwe=String.fromCharCode,Hwe=t=>t.toLowerCase(),Uwe=/^\s*/g,zwe=t=>t.replace(Uwe,""),Gwe=/([A-Z])/g,Y6=(t,e)=>zwe(t.replace(Gwe,n=>`${e}${Hwe(n)}`)),qwe=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=e.codePointAt(o);return r},lb=typeof TextEncoder<"u"?new TextEncoder:null,Kwe=t=>lb.encode(t),Wwe=lb?Kwe:qwe;let Ov=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Ov&&Ov.decode(new Uint8Array).length===1&&(Ov=null);class Jb{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const e0=()=>new Jb,Ywe=t=>{const e=e0();return t(e),gl(e)},Xwe=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},gl=t=>{const e=new Uint8Array(Xwe(t));let n=0;for(let r=0;r<t.bufs.length;r++){const o=t.bufs[r];e.set(o,n),n+=o.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},Qwe=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(kl(n,e)*2),t.cpos=0)},$o=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},sI=$o,Rn=(t,e)=>{for(;e>jh;)$o(t,Xi|jh&e),e=Du(e/128);$o(t,jh&e)},RO=(t,e)=>{const n=NG(e);for(n&&(e=-e),$o(t,(e>iI?Xi:0)|(n?ku:0)|iI&e),e=Du(e/64);e>0;)$o(t,(e>jh?Xi:0)|jh&e),e=Du(e/128)},aI=new Uint8Array(3e4),Zwe=aI.length/3,Jwe=(t,e)=>{if(e.length<Zwe){const n=lb.encodeInto(e,aI).written||0;Rn(t,n);for(let r=0;r<n;r++)$o(t,aI[r])}else Us(t,Wwe(e))},eCe=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;Rn(t,r);for(let o=0;o<r;o++)$o(t,n.codePointAt(o))},jm=lb&&lb.encodeInto?Jwe:eCe,Ix=(t,e)=>{const n=t.cbuf.length,r=t.cpos,o=Eu(n-r,e.length),i=e.length-o;t.cbuf.set(e.subarray(0,o),r),t.cpos+=o,i>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(kl(n*2,i)),t.cbuf.set(e.subarray(o)),t.cpos=i)},Us=(t,e)=>{Rn(t,e.byteLength),Ix(t,e)},IO=(t,e)=>{Qwe(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},tCe=(t,e)=>IO(t,4).setFloat32(0,e,!1),nCe=(t,e)=>IO(t,8).setFloat64(0,e,!1),rCe=(t,e)=>IO(t,8).setBigInt64(0,e,!1),X6=new DataView(new ArrayBuffer(4)),oCe=t=>(X6.setFloat32(0,t),X6.getFloat32(0)===t),hg=(t,e)=>{switch(typeof e){case"string":$o(t,119),jm(t,e);break;case"number":$we(e)&&Yw(e)<=Bwe?($o(t,125),RO(t,e)):oCe(e)?($o(t,124),tCe(t,e)):($o(t,123),nCe(t,e));break;case"bigint":$o(t,122),rCe(t,e);break;case"object":if(e===null)$o(t,126);else if(oI(e)){$o(t,117),Rn(t,e.length);for(let n=0;n<e.length;n++)hg(t,e[n])}else if(e instanceof Uint8Array)$o(t,116),Us(t,e);else{$o(t,118);const n=Object.keys(e);Rn(t,n.length);for(let r=0;r<n.length;r++){const o=n[r];jm(t,o),hg(t,e[o])}}break;case"boolean":$o(t,e?120:121);break;default:$o(t,127)}};class Q6 extends Jb{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Rn(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const Z6=t=>{t.count>0&&(RO(t.encoder,t.count===1?t.s:-t.s),t.count>1&&Rn(t.encoder,t.count-2))};class Xw{constructor(){this.encoder=new Jb,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Z6(this),this.count=1,this.s=e)}toUint8Array(){return Z6(this),gl(this.encoder)}}const J6=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);RO(t.encoder,e),t.count>1&&Rn(t.encoder,t.count-2)}};class MA{constructor(){this.encoder=new Jb,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(J6(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return J6(this),gl(this.encoder)}}class iCe{constructor(){this.sarr=[],this.s="",this.lensE=new Xw}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Jb;return this.sarr.push(this.s),this.s="",jm(e,this.sarr.join("")),Ix(e,this.lensE.toUint8Array()),gl(e)}}const bf=t=>new Error(t),wl=()=>{throw bf("Method unimplemented")},Js=()=>{throw bf("Unexpected case")},PG=bf("Unexpected end of array"),DG=bf("Integer out of Range");class Mx{constructor(e){this.arr=e,this.pos=0}}const jg=t=>new Mx(t),sCe=t=>t.pos!==t.arr.length,aCe=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},zs=t=>aCe(t,gn(t)),pg=t=>t.arr[t.pos++],gn=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const o=t.arr[t.pos++];if(e=e+(o&jh)*n,n*=128,o<Xi)return e;if(e>OG)throw DG}throw PG},MO=t=>{let e=t.arr[t.pos++],n=e&iI,r=64;const o=(e&ku)>0?-1:1;if((e&Xi)===0)return o*n;const i=t.arr.length;for(;t.pos<i;){if(e=t.arr[t.pos++],n=n+(e&jh)*r,r*=128,e<Xi)return o*n;if(n>OG)throw DG}throw PG},lCe=t=>{let e=gn(t);if(e===0)return"";{let n=String.fromCodePoint(pg(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(pg(t));else for(;e>0;){const r=e<1e4?e:1e4,o=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,o),e-=r}return decodeURIComponent(escape(n))}},cCe=t=>Ov.decode(zs(t)),Bm=Ov?cCe:lCe,NO=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},uCe=t=>NO(t,4).getFloat32(0,!1),dCe=t=>NO(t,8).getFloat64(0,!1),fCe=t=>NO(t,8).getBigInt64(0,!1),hCe=[t=>{},t=>null,MO,uCe,dCe,fCe,t=>!1,t=>!0,Bm,t=>{const e=gn(t),n={};for(let r=0;r<e;r++){const o=Bm(t);n[o]=cb(t)}return n},t=>{const e=gn(t),n=[];for(let r=0;r<e;r++)n.push(cb(t));return n},zs],cb=t=>hCe[127-pg(t)](t);class eB extends Mx{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),sCe(this)?this.count=gn(this)+1:this.count=-1),this.count--,this.s}}class Qw extends Mx{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=MO(this);const e=NG(this.s);this.count=1,e&&(this.s=-this.s,this.count=gn(this)+2)}return this.count--,this.s}}class NA extends Mx{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=MO(this),n=e&1;this.diff=Du(e/2),this.count=1,n&&(this.count=gn(this)+2)}return this.s+=this.diff,this.count--,this.s}}class pCe{constructor(e){this.decoder=new Qw(e),this.str=Bm(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const mCe=crypto.getRandomValues.bind(crypto),gCe=Math.random,LG=()=>mCe(new Uint32Array(1))[0],yCe=t=>t[Du(gCe()*t.length)],vCe="10000000-1000-4000-8000"+-1e11,bCe=()=>vCe.replace(/[018]/g,t=>(t^LG()&15>>t/4).toString(16)),wCe=Date.now,tB=t=>new Promise(t);Promise.all.bind(Promise);const nB=t=>t===void 0?null:t;class CCe{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let VG=new CCe,SCe=!0;try{typeof localStorage<"u"&&localStorage&&(VG=localStorage,SCe=!1)}catch{}const _Ce=VG,xCe=Object.assign,jG=Object.keys,ECe=(t,e)=>{for(const n in t)e(t[n],n)},rB=t=>jG(t).length,kCe=t=>{for(const e in t)return!1;return!0},BG=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},TCe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),ACe=(t,e)=>t===e||rB(t)===rB(e)&&BG(t,(n,r)=>(n!==void 0||TCe(e,r))&&e[r]===n),RCe=Object.freeze,$G=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&$G(t[e])}return RCe(t)},OO=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&OO(t,e,n+1)}},ICe=t=>t,MCe=(t,e)=>e.includes(t);var FG={};const mg=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",HG=typeof window<"u"&&typeof document<"u"&&!mg;let Yl;const NCe=()=>{if(Yl===void 0)if(mg){Yl=Ba();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&Yl.set(e,""),e=r):e!==null&&(Yl.set(e,r),e=null)}e!==null&&Yl.set(e,"")}else typeof location=="object"?(Yl=Ba(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");Yl.set(`--${Y6(e,"-")}`,n),Yl.set(`-${Y6(e,"-")}`,n)}})):Yl=Ba();return Yl},lI=t=>NCe().has(t),TS=t=>nB(mg?FG[t.toUpperCase().replaceAll("-","_")]:_Ce.getItem(t)),UG=t=>lI("--"+t)||TS(t)!==null;UG("production");const OCe=mg&&MCe(FG.FORCE_COLOR,["true","1","2"]),PCe=OCe||!lI("--no-colors")&&!UG("no-color")&&(!mg||process.stdout.isTTY)&&(!mg||lI("--color")||TS("COLORTERM")!==null||(TS("TERM")||"").includes("color")),DCe=t=>new Uint8Array(t),LCe=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=Fwe(t[n]);return btoa(e)},VCe=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),jCe=HG?LCe:VCe,BCe=t=>{const e=DCe(t.byteLength);return e.set(t),e},$Ce=t=>Ywe(e=>hg(e,t));class FCe{constructor(e,n){this.left=e,this.right=n}}const ou=(t,e)=>new FCe(t,e),HCe=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const UCe=t=>Pwe(t,(e,n)=>`${n}:${e};`).join(""),zCe=t=>class{constructor(n){this._=n}destroy(){t(this._)}},GCe=zCe(clearTimeout),PO=(t,e)=>new GCe(setTimeout(e,t)),Bu=Symbol,zG=Bu(),GG=Bu(),qCe=Bu(),KCe=Bu(),WCe=Bu(),qG=Bu(),YCe=Bu(),DO=Bu(),XCe=Bu(),QCe=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const o=t[r];if(o===void 0)break;if(o.constructor===String||o.constructor===Number)e.push(o);else if(o.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const o=t[r];o instanceof Symbol||n.push(o)}return n},ZCe={[zG]:ou("font-weight","bold"),[GG]:ou("font-weight","normal"),[qCe]:ou("color","blue"),[WCe]:ou("color","green"),[KCe]:ou("color","grey"),[qG]:ou("color","red"),[YCe]:ou("color","purple"),[DO]:ou("color","orange"),[XCe]:ou("color","black")},JCe=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[],r=Ba();let o=[],i=0;for(;i<t.length;i++){const s=t[i],a=ZCe[s];if(a!==void 0)r.set(a.left,a.right);else{if(s===void 0)break;if(s.constructor===String||s.constructor===Number){const l=UCe(r);i>0||l.length>0?(e.push("%c"+s),n.push(l)):e.push(s)}else break}}for(i>0&&(o=n,o.unshift(e.join("")));i<t.length;i++){const s=t[i];s instanceof Symbol||o.push(s)}return o},KG=PCe?JCe:QCe,eSe=(...t)=>{console.log(...KG(t)),YG.forEach(e=>e.print(t))},WG=(...t)=>{console.warn(...KG(t)),t.unshift(DO),YG.forEach(e=>e.print(t))},YG=Jh(),XG=t=>({[Symbol.iterator](){return this},next:t}),tSe=(t,e)=>XG(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),OA=(t,e)=>XG(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class LO{constructor(e,n){this.clock=e,this.len=n}}class Bg{constructor(){this.clients=new Map}}const wf=(t,e,n)=>e.clients.forEach((r,o)=>{const i=t.doc.store.clients.get(o);if(i!=null){const s=i[i.length-1],a=s.id.clock+s.length;for(let l=0,c=r[l];l<r.length&&c.clock<a;c=r[++l])uq(t,i,c.clock,c.len,n)}}),nSe=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const o=Du((n+r)/2),i=t[o],s=i.clock;if(s<=e){if(e<s+i.len)return o;n=o+1}else r=o-1}return null},$g=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&nSe(n,e.clock)!==null},VO=t=>{t.clients.forEach(e=>{e.sort((o,i)=>o.clock-i.clock);let n,r;for(n=1,r=1;n<e.length;n++){const o=e[r-1],i=e[n];o.clock+o.len>=i.clock?o.len=kl(o.len,i.clock+i.len-o.clock):(r<n&&(e[r]=i),r++)}e.length=r})},cI=t=>{const e=new Bg;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,o)=>{if(!e.clients.has(o)){const i=r.slice();for(let s=n+1;s<t.length;s++)Lwe(i,t[s].clients.get(o)||[]);e.clients.set(o,i)}});return VO(e),e},ub=(t,e,n,r)=>{Ic(t.clients,e,()=>[]).push(new LO(n,r))},QG=()=>new Bg,ZG=t=>{const e=QG();return t.clients.forEach((n,r)=>{const o=[];for(let i=0;i<n.length;i++){const s=n[i];if(s.deleted){const a=s.id.clock;let l=s.length;if(i+1<n.length)for(let c=n[i+1];i+1<n.length&&c.deleted;c=n[++i+1])l+=c.length;o.push(new LO(a,l))}}o.length>0&&e.clients.set(r,o)}),e},Fg=(t,e)=>{Rn(t.restEncoder,e.clients.size),vf(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),Rn(t.restEncoder,n);const o=r.length;Rn(t.restEncoder,o);for(let i=0;i<o;i++){const s=r[i];t.writeDsClock(s.clock),t.writeDsLen(s.len)}})},jO=t=>{const e=new Bg,n=gn(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const o=gn(t.restDecoder),i=gn(t.restDecoder);if(i>0){const s=Ic(e.clients,o,()=>[]);for(let a=0;a<i;a++)s.push(new LO(t.readDsClock(),t.readDsLen()))}}return e},oB=(t,e,n)=>{const r=new Bg,o=gn(t.restDecoder);for(let i=0;i<o;i++){t.resetDsCurVal();const s=gn(t.restDecoder),a=gn(t.restDecoder),l=n.clients.get(s)||[],c=so(n,s);for(let d=0;d<a;d++){const f=t.readDsClock(),p=f+t.readDsLen();if(f<c){c<p&&ub(r,s,c,p-c);let g=Ua(l,f),y=l[g];for(!y.deleted&&y.id.clock<f&&(l.splice(g+1,0,PS(e,y,f-y.id.clock)),g++);g<l.length&&(y=l[g++],y.id.clock<p);)y.deleted||(p<y.id.clock+y.length&&l.splice(g,0,PS(e,y,p-y.id.clock)),y.delete(e))}else ub(r,s,f,p-f)}}if(r.clients.size>0){const i=new ep;return Rn(i.restEncoder,0),Fg(i,r),i.toUint8Array()}return null},JG=LG;class Mf extends MG{constructor({guid:e=bCe(),collectionid:n=null,gc:r=!0,gcFilter:o=()=>!0,meta:i=null,autoLoad:s=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=o,this.clientID=JG(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new lq,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=s,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=tB(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})});const l=()=>tB(c=>{const d=f=>{(f===void 0||f===!0)&&(this.off("sync",d),c())};this.on("sync",d)});this.on("sync",c=>{c===!1&&this.isSynced&&(this.whenSynced=l()),this.isSynced=c===void 0||c===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=l()}load(){const e=this._item;e!==null&&!this.shouldLoad&&mr(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(vf(this.subdocs).map(e=>e.guid))}transact(e,n=null){return mr(this,e,n)}get(e,n=Go){const r=Ic(this.share,e,()=>{const i=new n;return i._integrate(this,null),i}),o=r.constructor;if(n!==Go&&o!==n)if(o===Go){const i=new n;i._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=i}),i._start=r._start;for(let s=i._start;s!==null;s=s.right)s.parent=i;return i._length=r._length,this.share.set(e,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,Hm)}getText(e=""){return this.get(e,Cf)}getMap(e=""){return this.get(e,yg)}getXmlElement(e=""){return this.get(e,Yi)}getXmlFragment(e=""){return this.get(e,tp)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,vf(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Mf({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,mr(e.parent.doc,r=>{const o=n.doc;e.deleted||r.subdocsAdded.add(o),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class eq{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return gn(this.restDecoder)}readDsLen(){return gn(this.restDecoder)}}class tq extends eq{readLeftID(){return Qt(gn(this.restDecoder),gn(this.restDecoder))}readRightID(){return Qt(gn(this.restDecoder),gn(this.restDecoder))}readClient(){return gn(this.restDecoder)}readInfo(){return pg(this.restDecoder)}readString(){return Bm(this.restDecoder)}readParentInfo(){return gn(this.restDecoder)===1}readTypeRef(){return gn(this.restDecoder)}readLen(){return gn(this.restDecoder)}readAny(){return cb(this.restDecoder)}readBuf(){return BCe(zs(this.restDecoder))}readJSON(){return JSON.parse(Bm(this.restDecoder))}readKey(){return Bm(this.restDecoder)}}class rSe{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=gn(this.restDecoder),this.dsCurrVal}readDsLen(){const e=gn(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class gg extends rSe{constructor(e){super(e),this.keys=[],gn(e),this.keyClockDecoder=new NA(zs(e)),this.clientDecoder=new Qw(zs(e)),this.leftClockDecoder=new NA(zs(e)),this.rightClockDecoder=new NA(zs(e)),this.infoDecoder=new eB(zs(e),pg),this.stringDecoder=new pCe(zs(e)),this.parentInfoDecoder=new eB(zs(e),pg),this.typeRefDecoder=new Qw(zs(e)),this.lenDecoder=new Qw(zs(e))}readLeftID(){return new $m(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new $m(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return cb(this.restDecoder)}readBuf(){return zs(this.restDecoder)}readJSON(){return cb(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class nq{constructor(){this.restEncoder=e0()}toUint8Array(){return gl(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Rn(this.restEncoder,e)}writeDsLen(e){Rn(this.restEncoder,e)}}class t0 extends nq{writeLeftID(e){Rn(this.restEncoder,e.client),Rn(this.restEncoder,e.clock)}writeRightID(e){Rn(this.restEncoder,e.client),Rn(this.restEncoder,e.clock)}writeClient(e){Rn(this.restEncoder,e)}writeInfo(e){sI(this.restEncoder,e)}writeString(e){jm(this.restEncoder,e)}writeParentInfo(e){Rn(this.restEncoder,e?1:0)}writeTypeRef(e){Rn(this.restEncoder,e)}writeLen(e){Rn(this.restEncoder,e)}writeAny(e){hg(this.restEncoder,e)}writeBuf(e){Us(this.restEncoder,e)}writeJSON(e){jm(this.restEncoder,JSON.stringify(e))}writeKey(e){jm(this.restEncoder,e)}}class rq{constructor(){this.restEncoder=e0(),this.dsCurrVal=0}toUint8Array(){return gl(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,Rn(this.restEncoder,n)}writeDsLen(e){e===0&&Js(),Rn(this.restEncoder,e-1),this.dsCurrVal+=e}}class ep extends rq{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new MA,this.clientEncoder=new Xw,this.leftClockEncoder=new MA,this.rightClockEncoder=new MA,this.infoEncoder=new Q6(sI),this.stringEncoder=new iCe,this.parentInfoEncoder=new Q6(sI),this.typeRefEncoder=new Xw,this.lenEncoder=new Xw}toUint8Array(){const e=e0();return Rn(e,0),Us(e,this.keyClockEncoder.toUint8Array()),Us(e,this.clientEncoder.toUint8Array()),Us(e,this.leftClockEncoder.toUint8Array()),Us(e,this.rightClockEncoder.toUint8Array()),Us(e,gl(this.infoEncoder)),Us(e,this.stringEncoder.toUint8Array()),Us(e,gl(this.parentInfoEncoder)),Us(e,this.typeRefEncoder.toUint8Array()),Us(e,this.lenEncoder.toUint8Array()),Ix(e,gl(this.restEncoder)),gl(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){hg(this.restEncoder,e)}writeBuf(e){Us(this.restEncoder,e)}writeJSON(e){hg(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const oSe=(t,e,n,r)=>{r=kl(r,e[0].id.clock);const o=Ua(e,r);Rn(t.restEncoder,e.length-o),t.writeClient(n),Rn(t.restEncoder,r);const i=e[o];i.write(t,r-i.id.clock);for(let s=o+1;s<e.length;s++)e[s].write(t,0)},BO=(t,e,n)=>{const r=new Map;n.forEach((o,i)=>{so(e,i)>o&&r.set(i,o)}),n0(e).forEach((o,i)=>{n.has(i)||r.set(i,0)}),Rn(t.restEncoder,r.size),vf(r.entries()).sort((o,i)=>i[0]-o[0]).forEach(([o,i])=>{oSe(t,e.clients.get(o),o,i)})},iSe=(t,e)=>{const n=Ba(),r=gn(t.restDecoder);for(let o=0;o<r;o++){const i=gn(t.restDecoder),s=new Array(i),a=t.readClient();let l=gn(t.restDecoder);n.set(a,{i:0,refs:s});for(let c=0;c<i;c++){const d=t.readInfo();switch(Rx&d){case 0:{const f=t.readLen();s[c]=new Oa(Qt(a,l),f),l+=f;break}case 10:{const f=gn(t.restDecoder);s[c]=new Pa(Qt(a,l),f),l+=f;break}default:{const f=(d&(ku|Xi))===0,p=new xr(Qt(a,l),null,(d&Xi)===Xi?t.readLeftID():null,null,(d&ku)===ku?t.readRightID():null,f?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,f&&(d&ab)===ab?t.readString():null,Nq(t,d));s[c]=p,l+=p.length}}}}return n},sSe=(t,e,n)=>{const r=[];let o=vf(n.keys()).sort((g,y)=>g-y);if(o.length===0)return null;const i=()=>{if(o.length===0)return null;let g=n.get(o[o.length-1]);for(;g.refs.length===g.i;)if(o.pop(),o.length>0)g=n.get(o[o.length-1]);else return null;return g};let s=i();if(s===null)return null;const a=new lq,l=new Map,c=(g,y)=>{const b=l.get(g);(b==null||b>y)&&l.set(g,y)};let d=s.refs[s.i++];const f=new Map,p=()=>{for(const g of r){const y=g.id.client,b=n.get(y);b?(b.i--,a.clients.set(y,b.refs.slice(b.i)),n.delete(y),b.i=0,b.refs=[]):a.clients.set(y,[g]),o=o.filter(_=>_!==y)}r.length=0};for(;;){if(d.constructor!==Pa){const y=Ic(f,d.id.client,()=>so(e,d.id.client))-d.id.clock;if(y<0)r.push(d),c(d.id.client,d.id.clock-1),p();else{const b=d.getMissing(t,e);if(b!==null){r.push(d);const _=n.get(b)||{refs:[],i:0};if(_.refs.length===_.i)c(b,so(e,b)),p();else{d=_.refs[_.i++];continue}}else(y===0||y<d.length)&&(d.integrate(t,y),f.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(s!==null&&s.i<s.refs.length)d=s.refs[s.i++];else{if(s=i(),s===null)break;d=s.refs[s.i++]}}if(a.clients.size>0){const g=new ep;return BO(g,a,new Map),Rn(g.restEncoder,0),{missing:l,update:g.toUint8Array()}}return null},aSe=(t,e)=>BO(t,e.doc.store,e.beforeState),lSe=(t,e,n,r=new gg(t))=>mr(e,o=>{o.local=!1;let i=!1;const s=o.doc,a=s.store,l=iSe(r,s),c=sSe(o,a,l),d=a.pendingStructs;if(d){for(const[p,g]of d.missing)if(g<so(a,p)){i=!0;break}if(c){for(const[p,g]of c.missing){const y=d.missing.get(p);(y==null||y>g)&&d.missing.set(p,g)}d.update=RS([d.update,c.update])}}else a.pendingStructs=c;const f=oB(r,o,a);if(a.pendingDs){const p=new gg(jg(a.pendingDs));gn(p.restDecoder);const g=oB(p,o,a);f&&g?a.pendingDs=RS([f,g]):a.pendingDs=f||g}else a.pendingDs=f;if(i){const p=a.pendingStructs.update;a.pendingStructs=null,AS(o.doc,p)}},n,!1),AS=(t,e,n,r=gg)=>{const o=jg(e);lSe(o,t,n,new r(o))},iB=(t,e,n)=>AS(t,e,n,tq),cSe=(t,e,n=new Map)=>{BO(t,e.store,n),Fg(t,ZG(e.store))},uSe=(t,e=new Uint8Array([0]),n=new ep)=>{const r=oq(e);cSe(n,t,r);const o=[n.toUint8Array()];if(t.store.pendingDs&&o.push(t.store.pendingDs),t.store.pendingStructs&&o.push(RSe(t.store.pendingStructs.update,e)),o.length>1){if(n.constructor===t0)return TSe(o.map((i,s)=>s===0?i:MSe(i)));if(n.constructor===ep)return RS(o)}return o[0]},sB=(t,e)=>uSe(t,e,new t0),dSe=t=>{const e=new Map,n=gn(t.restDecoder);for(let r=0;r<n;r++){const o=gn(t.restDecoder),i=gn(t.restDecoder);e.set(o,i)}return e},oq=t=>dSe(new eq(jg(t))),iq=(t,e)=>(Rn(t.restEncoder,e.size),vf(e.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{Rn(t.restEncoder,n),Rn(t.restEncoder,r)}),t),fSe=(t,e)=>iq(t,n0(e.store)),hSe=(t,e=new rq)=>(t instanceof Map?iq(e,t):fSe(e,t),e.toUint8Array()),pSe=t=>hSe(t,new nq);class mSe{constructor(){this.l=[]}}const aB=()=>new mSe,lB=(t,e)=>t.l.push(e),cB=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(o=>e!==o),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},sq=(t,e,n)=>OO(t.l,[e,n]);class $m{constructor(e,n){this.client=e,this.clock=n}}const _m=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,Qt=(t,e)=>new $m(t,e),db=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw Js()},fb=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};class hb{constructor(e,n,r,o=0){this.type=e,this.tname=n,this.item=r,this.assoc=o}}const Pv=t=>new hb(t.type==null?null:Qt(t.type.client,t.type.clock),t.tname??null,t.item==null?null:Qt(t.item.client,t.item.clock),t.assoc==null?0:t.assoc);class gSe{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}}const ySe=(t,e,n=0)=>new gSe(t,e,n),fw=(t,e,n)=>{let r=null,o=null;return t._item===null?o=db(t):r=Qt(t._item.id.client,t._item.id.clock),new hb(r,o,e,n)},PA=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return fw(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return fw(t,Qt(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return fw(t,r.lastId,n);r=r.right}return fw(t,null,n)},vSe=(t,e)=>{const n=Fm(t,e),r=e.clock-n.id.clock;return{item:n,diff:r}},bSe=(t,e,n=!0)=>{const r=e.store,o=t.item,i=t.type,s=t.tname,a=t.assoc;let l=null,c=0;if(o!==null){if(so(r,o.client)<=o.clock)return null;const d=n?hI(r,o):vSe(r,o),f=d.item;if(!(f instanceof xr))return null;if(l=f.parent,l._item===null||!l._item.deleted){c=f.deleted||!f.countable?0:d.diff+(a>=0?0:1);let p=f.left;for(;p!==null;)!p.deleted&&p.countable&&(c+=p.length),p=p.left}}else{if(s!==null)l=e.get(s);else if(i!==null){if(so(r,i.client)<=i.clock)return null;const{item:d}=n?hI(r,i):{item:Fm(r,i)};if(d instanceof xr&&d.content instanceof Nl)l=d.content.type;else return null}else throw Js();a>=0?c=l._length:c=0}return ySe(l,c,t.assoc)},uB=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&_m(t.item,e.item)&&_m(t.type,e.type)&&t.assoc===e.assoc;class $O{constructor(e,n){this.ds=e,this.sv=n}}const aq=(t,e)=>new $O(t,e),DA=t=>aq(ZG(t.store),n0(t.store)),vh=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!$g(e.ds,t.id),uI=(t,e)=>{const n=Ic(t.meta,uI,Jh),r=t.doc.store;n.has(e)||(e.sv.forEach((o,i)=>{o<so(r,i)&&Ss(t,Qt(i,o))}),wf(t,e.ds,o=>{}),n.add(e))};class lq{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const n0=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const o=n[n.length-1];e.set(r,o.id.clock+o.length)}),e},so=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},cq=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw Js()}n.push(e)},Ua=(t,e)=>{let n=0,r=t.length-1,o=t[r],i=o.id.clock;if(i===e)return r;let s=Du(e/(i+o.length-1)*r);for(;n<=r;){if(o=t[s],i=o.id.clock,i<=e){if(e<i+o.length)return s;n=s+1}else r=s-1;s=Du((n+r)/2)}throw Js()},wSe=(t,e)=>{const n=t.clients.get(e.client);return n[Ua(n,e.clock)]},Fm=wSe,dI=(t,e,n)=>{const r=Ua(e,n),o=e[r];return o.id.clock<n&&o instanceof xr?(e.splice(r+1,0,PS(t,o,n-o.id.clock)),r+1):r},Ss=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[dI(t,n,e.clock)]},dB=(t,e,n)=>{const r=e.clients.get(n.client),o=Ua(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==Oa&&r.splice(o+1,0,PS(t,i,n.clock-i.id.clock+1)),i},CSe=(t,e,n)=>{const r=t.clients.get(e.id.client);r[Ua(r,e.id.clock)]=n},uq=(t,e,n,r,o)=>{if(r===0)return;const i=n+r;let s=dI(t,e,n),a;do a=e[s++],i<a.id.clock+a.length&&dI(t,e,i),o(a);while(s<e.length&&e[s].id.clock<i)};class SSe{constructor(e,n,r){this.doc=e,this.deleteSet=new Bg,this.beforeState=n0(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const fB=(t,e)=>e.deleteSet.clients.size===0&&!Dwe(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(VO(e.deleteSet),aSe(t,e),Fg(t,e.deleteSet),!0),hB=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&Ic(t.changed,e,Jh).add(n)},Zw=(t,e)=>{let n=t[e],r=t[e-1],o=e;for(;o>0;n=r,r=t[--o-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof xr&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const i=e-o;return i&&t.splice(e+1-i,i),i},_Se=(t,e,n)=>{for(const[r,o]of t.clients.entries()){const i=e.clients.get(r);for(let s=o.length-1;s>=0;s--){const a=o[s],l=a.clock+a.len;for(let c=Ua(i,a.clock),d=i[c];c<i.length&&d.id.clock<l;d=i[++c]){const f=i[c];if(a.clock+a.len<=f.id.clock)break;f instanceof xr&&f.deleted&&!f.keep&&n(f)&&f.gc(e,!1)}}}},xSe=(t,e)=>{t.clients.forEach((n,r)=>{const o=e.clients.get(r);for(let i=n.length-1;i>=0;i--){const s=n[i],a=Eu(o.length-1,1+Ua(o,s.clock+s.len-1));for(let l=a,c=o[l];l>0&&c.id.clock>=s.clock;c=o[l])l-=1+Zw(o,l)}})},dq=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,o=r.store,i=n.deleteSet,s=n._mergeStructs;try{VO(i),n.afterState=n0(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((l,c)=>a.push(()=>{(c._item===null||!c._item.deleted)&&c._callObserver(n,l)})),a.push(()=>{n.changedParentTypes.forEach((l,c)=>{c._dEH.l.length>0&&(c._item===null||!c._item.deleted)&&(l=l.filter(d=>d.target._item===null||!d.target._item.deleted),l.forEach(d=>{d.currentTarget=c,d._path=null}),l.sort((d,f)=>d.path.length-f.path.length),sq(c._dEH,l,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),OO(a,[]),n._needFormattingCleanup&&GSe(n)}finally{r.gc&&_Se(i,o,r.gcFilter),xSe(i,o),n.afterState.forEach((d,f)=>{const p=n.beforeState.get(f)||0;if(p!==d){const g=o.clients.get(f),y=kl(Ua(g,p),1);for(let b=g.length-1;b>=y;)b-=1+Zw(g,b)}});for(let d=s.length-1;d>=0;d--){const{client:f,clock:p}=s[d].id,g=o.clients.get(f),y=Ua(g,p);y+1<g.length&&Zw(g,y+1)>1||y>0&&Zw(g,y)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(eSe(DO,zG,"[yjs] ",GG,qG,"Changed the client-id because another client seems to be using it."),r.clientID=JG()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const d=new t0;fB(d,n)&&r.emit("update",[d.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const d=new ep;fB(d,n)&&r.emit("updateV2",[d.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:l,subdocsRemoved:c}=n;(a.size>0||c.size>0||l.size>0)&&(a.forEach(d=>{d.clientID=r.clientID,d.collectionid==null&&(d.collectionid=r.collectionid),r.subdocs.add(d)}),c.forEach(d=>r.subdocs.delete(d)),r.emit("subdocs",[{loaded:l,added:a,removed:c},r,n]),c.forEach(d=>d.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):dq(t,e+1)}}},mr=(t,e,n=null,r=!0)=>{const o=t._transactionCleanups;let i=!1,s=null;t._transaction===null&&(i=!0,t._transaction=new SSe(t,n,r),o.push(t._transaction),o.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{s=e(t._transaction)}finally{if(i){const a=t._transaction===o[0];t._transaction=null,a&&dq(o,0)}}return s};class ESe{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}}const pB=(t,e,n)=>{wf(t,n.deletions,r=>{r instanceof xr&&e.scope.some(o=>o===t.doc||fb(o,r))&&WO(r,!1)})},mB=(t,e,n)=>{let r=null;const o=t.doc,i=t.scope;mr(o,a=>{for(;e.length>0&&t.currStackItem===null;){const l=o.store,c=e.pop(),d=new Set,f=[];let p=!1;wf(a,c.insertions,g=>{if(g instanceof xr){if(g.redone!==null){let{item:y,diff:b}=hI(l,g.id);b>0&&(y=Ss(a,Qt(y.id.client,y.id.clock+b))),g=y}!g.deleted&&i.some(y=>y===a.doc||fb(y,g))&&f.push(g)}}),wf(a,c.deletions,g=>{g instanceof xr&&i.some(y=>y===a.doc||fb(y,g))&&!$g(c.insertions,g.id)&&d.add(g)}),d.forEach(g=>{p=Mq(a,g,d,c.insertions,t.ignoreRemoteMapChanges,t)!==null||p});for(let g=f.length-1;g>=0;g--){const y=f[g];t.deleteFilter(y)&&(y.delete(a),p=!0)}t.currStackItem=p?c:null}a.changed.forEach((l,c)=>{l.has(null)&&c._searchMarker&&(c._searchMarker.length=0)}),r=a},t);const s=t.currStackItem;if(s!=null){const a=r.changedParentTypes;t.emit("stack-item-popped",[{stackItem:s,type:n,changedParentTypes:a,origin:t},t]),t.currStackItem=null}return s};class fq extends MG{constructor(e,{captureTimeout:n=500,captureTransaction:r=l=>!0,deleteFilter:o=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:s=!1,doc:a=oI(e)?e[0].doc:e instanceof Mf?e:e.doc}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=o,i.add(this),this.trackedOrigins=i,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=s,this.captureTimeout=n,this.afterTransactionHandler=l=>{if(!this.captureTransaction(l)||!this.scope.some(_=>l.changedParentTypes.has(_)||_===this.doc)||!this.trackedOrigins.has(l.origin)&&(!l.origin||!this.trackedOrigins.has(l.origin.constructor)))return;const c=this.undoing,d=this.redoing,f=c?this.redoStack:this.undoStack;c?this.stopCapturing():d||this.clear(!1,!0);const p=new Bg;l.afterState.forEach((_,k)=>{const M=l.beforeState.get(k)||0,N=_-M;N>0&&ub(p,k,M,N)});const g=wCe();let y=!1;if(this.lastChange>0&&g-this.lastChange<this.captureTimeout&&f.length>0&&!c&&!d){const _=f[f.length-1];_.deletions=cI([_.deletions,l.deleteSet]),_.insertions=cI([_.insertions,p])}else f.push(new ESe(l.deleteSet,p)),y=!0;!c&&!d&&(this.lastChange=g),wf(l,l.deleteSet,_=>{_ instanceof xr&&this.scope.some(k=>k===l.doc||fb(k,_))&&WO(_,!0)});const b=[{stackItem:f[f.length-1],origin:l.origin,type:c?"redo":"undo",changedParentTypes:l.changedParentTypes},this];y?this.emit("stack-item-added",b):this.emit("stack-item-updated",b)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const n=new Set(this.scope);e=oI(e)?e:[e],e.forEach(r=>{n.has(r)||(n.add(r),(r instanceof Go?r.doc!==this.doc:r!==this.doc)&&WG("[yjs#509] Not same Y.Doc"),this.scope.push(r))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(o=>pB(r,this,o)),this.undoStack=[]),n&&(this.redoStack.forEach(o=>pB(r,this,o)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=mB(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=mB(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*kSe(t){const e=gn(t.restDecoder);for(let n=0;n<e;n++){const r=gn(t.restDecoder),o=t.readClient();let i=gn(t.restDecoder);for(let s=0;s<r;s++){const a=t.readInfo();if(a===10){const l=gn(t.restDecoder);yield new Pa(Qt(o,i),l),i+=l}else if((Rx&a)!==0){const l=(a&(ku|Xi))===0,c=new xr(Qt(o,i),null,(a&Xi)===Xi?t.readLeftID():null,null,(a&ku)===ku?t.readRightID():null,l?t.readParentInfo()?t.readString():t.readLeftID():null,l&&(a&ab)===ab?t.readString():null,Nq(t,a));yield c,i+=c.length}else{const l=t.readLen();yield new Oa(Qt(o,i),l),i+=l}}}}class FO{constructor(e,n){this.gen=kSe(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Pa);return this.curr}}class HO{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const TSe=t=>RS(t,tq,t0),ASe=(t,e)=>{if(t.constructor===Oa){const{client:n,clock:r}=t.id;return new Oa(Qt(n,r+e),t.length-e)}else if(t.constructor===Pa){const{client:n,clock:r}=t.id;return new Pa(Qt(n,r+e),t.length-e)}else{const n=t,{client:r,clock:o}=n.id;return new xr(Qt(r,o+e),null,Qt(r,o+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},RS=(t,e=gg,n=ep)=>{if(t.length===1)return t[0];const r=t.map(d=>new e(jg(d)));let o=r.map(d=>new FO(d,!0)),i=null;const s=new n,a=new HO(s);for(;o=o.filter(p=>p.curr!==null),o.sort((p,g)=>{if(p.curr.id.client===g.curr.id.client){const y=p.curr.id.clock-g.curr.id.clock;return y===0?p.curr.constructor===g.curr.constructor?0:p.curr.constructor===Pa?1:-1:y}else return g.curr.id.client-p.curr.id.client}),o.length!==0;){const d=o[0],f=d.curr.id.client;if(i!==null){let p=d.curr,g=!1;for(;p!==null&&p.id.clock+p.length<=i.struct.id.clock+i.struct.length&&p.id.client>=i.struct.id.client;)p=d.next(),g=!0;if(p===null||p.id.client!==f||g&&p.id.clock>i.struct.id.clock+i.struct.length)continue;if(f!==i.struct.id.client)Fd(a,i.struct,i.offset),i={struct:p,offset:0},d.next();else if(i.struct.id.clock+i.struct.length<p.id.clock)if(i.struct.constructor===Pa)i.struct.length=p.id.clock+p.length-i.struct.id.clock;else{Fd(a,i.struct,i.offset);const y=p.id.clock-i.struct.id.clock-i.struct.length;i={struct:new Pa(Qt(f,i.struct.id.clock+i.struct.length),y),offset:0}}else{const y=i.struct.id.clock+i.struct.length-p.id.clock;y>0&&(i.struct.constructor===Pa?i.struct.length-=y:p=ASe(p,y)),i.struct.mergeWith(p)||(Fd(a,i.struct,i.offset),i={struct:p,offset:0},d.next())}}else i={struct:d.curr,offset:0},d.next();for(let p=d.curr;p!==null&&p.id.client===f&&p.id.clock===i.struct.id.clock+i.struct.length&&p.constructor!==Pa;p=d.next())Fd(a,i.struct,i.offset),i={struct:p,offset:0}}i!==null&&(Fd(a,i.struct,i.offset),i=null),UO(a);const l=r.map(d=>jO(d)),c=cI(l);return Fg(s,c),s.toUint8Array()},RSe=(t,e,n=gg,r=ep)=>{const o=oq(e),i=new r,s=new HO(i),a=new n(jg(t)),l=new FO(a,!1);for(;l.curr;){const d=l.curr,f=d.id.client,p=o.get(f)||0;if(l.curr.constructor===Pa){l.next();continue}if(d.id.clock+d.length>p)for(Fd(s,d,kl(p-d.id.clock,0)),l.next();l.curr&&l.curr.id.client===f;)Fd(s,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===f&&l.curr.id.clock+l.curr.length<=p;)l.next()}UO(s);const c=jO(a);return Fg(i,c),i.toUint8Array()},hq=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:gl(t.encoder.restEncoder)}),t.encoder.restEncoder=e0(),t.written=0)},Fd=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&hq(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),Rn(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},UO=t=>{hq(t);const e=t.encoder.restEncoder;Rn(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];Rn(e,r.written),Ix(e,r.restEncoder)}},ISe=(t,e,n,r)=>{const o=new n(jg(t)),i=new FO(o,!1),s=new r,a=new HO(s);for(let c=i.curr;c!==null;c=i.next())Fd(a,e(c),0);UO(a);const l=jO(o);return Fg(s,l),s.toUint8Array()},MSe=t=>ISe(t,ICe,gg,t0),gB="You must not compute changes after the event-handler fired.";class Nx{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=NSe(this.currentTarget,this.target))}deletes(e){return $g(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw bf(gB);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(o=>{if(o!==null){const i=n._map.get(o);let s,a;if(this.adds(i)){let l=i.left;for(;l!==null&&this.adds(l);)l=l.left;if(this.deletes(i))if(l!==null&&this.deletes(l))s="delete",a=AA(l.content.getContent());else return;else l!==null&&this.deletes(l)?(s="update",a=AA(l.content.getContent())):(s="add",a=void 0)}else if(this.deletes(i))s="delete",a=AA(i.content.getContent());else return;e.set(o,{action:s,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw bf(gB);const n=this.target,r=Jh(),o=Jh(),i=[];if(e={added:r,deleted:o,delta:i,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const l=()=>{a&&i.push(a)};for(let c=n._start;c!==null;c=c.right)c.deleted?this.deletes(c)&&!this.adds(c)&&((a===null||a.delete===void 0)&&(l(),a={delete:0}),a.delete+=c.length,o.add(c)):this.adds(c)?((a===null||a.insert===void 0)&&(l(),a={insert:[]}),a.insert=a.insert.concat(c.content.getContent()),r.add(c)):((a===null||a.retain===void 0)&&(l(),a={retain:0}),a.retain+=c.length);a!==null&&a.retain===void 0&&l()}this._changes=e}return e}}const NSe=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,o=e._item.parent._start;for(;o!==e._item&&o!==null;)!o.deleted&&o.countable&&(r+=o.length),o=o.right;n.unshift(r)}e=e._item.parent}return n},Di=()=>{WG("Invalid access: Add Yjs type to a document before reading data.")},pq=80;let zO=0;class OSe{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=zO++}}const PSe=t=>{t.timestamp=zO++},mq=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=zO++},DSe=(t,e,n)=>{if(t.length>=pq){const r=t.reduce((o,i)=>o.timestamp<i.timestamp?o:i);return mq(r,e,n),r}else{const r=new OSe(e,n);return t.push(r),r}},Ox=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((i,s)=>Yw(e-i.index)<Yw(e-s.index)?i:s);let r=t._start,o=0;for(n!==null&&(r=n.p,o=n.index,PSe(n));r.right!==null&&o<e;){if(!r.deleted&&r.countable){if(e<o+r.length)break;o+=r.length}r=r.right}for(;r.left!==null&&o>e;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return n!==null&&Yw(n.index-o)<r.parent.length/pq?(mq(n,r,o),n):DSe(t._searchMarker,r,o)},pb=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const o=t[r];if(n>0){let i=o.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(o.index-=i.length);if(i===null||i.marker===!0){t.splice(r,1);continue}o.p=i,i.marker=!0}(e<o.index||n>0&&e===o.index)&&(o.index=kl(e,o.index+n))}},Px=(t,e,n)=>{const r=t,o=e.changedParentTypes;for(;Ic(o,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;sq(r._eH,n,e)};class Go{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=aB(),this._dEH=aB(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw wl()}clone(){throw wl()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){lB(this._eH,e)}observeDeep(e){lB(this._dEH,e)}unobserve(e){cB(this._eH,e)}unobserveDeep(e){cB(this._dEH,e)}toJSON(){}}const gq=(t,e,n)=>{t.doc??Di(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const o=[];let i=t._start;for(;i!==null&&r>0;){if(i.countable&&!i.deleted){const s=i.content.getContent();if(s.length<=e)e-=s.length;else{for(let a=e;a<s.length&&r>0;a++)o.push(s[a]),r--;e=0}}i=i.right}return o},yq=t=>{t.doc??Di();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let o=0;o<r.length;o++)e.push(r[o])}n=n.right}return e},vq=(t,e)=>{const n=[];let r=t._start;for(;r!==null;){if(r.countable&&vh(r,e)){const o=r.content.getContent();for(let i=0;i<o.length;i++)n.push(o[i])}r=r.right}return n},mb=(t,e)=>{let n=0,r=t._start;for(t.doc??Di();r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let i=0;i<o.length;i++)e(o[i],n++,t)}r=r.right}},bq=(t,e)=>{const n=[];return mb(t,(r,o)=>{n.push(e(r,o,t))}),n},LSe=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const o=n[r++];return n.length<=r&&(n=null),{done:!1,value:o}}}},wq=(t,e)=>{t.doc??Di();const n=Ox(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},IS=(t,e,n,r)=>{let o=n;const i=t.doc,s=i.clientID,a=i.store,l=n===null?e._start:n.right;let c=[];const d=()=>{c.length>0&&(o=new xr(Qt(s,so(a,s)),o,o&&o.lastId,l,l&&l.id,e,null,new np(c)),o.integrate(t,0),c=[])};r.forEach(f=>{if(f===null)c.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:c.push(f);break;default:switch(d(),f.constructor){case Uint8Array:case ArrayBuffer:o=new xr(Qt(s,so(a,s)),o,o&&o.lastId,l,l&&l.id,e,null,new r0(new Uint8Array(f))),o.integrate(t,0);break;case Mf:o=new xr(Qt(s,so(a,s)),o,o&&o.lastId,l,l&&l.id,e,null,new o0(f)),o.integrate(t,0);break;default:if(f instanceof Go)o=new xr(Qt(s,so(a,s)),o,o&&o.lastId,l,l&&l.id,e,null,new Nl(f)),o.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},Cq=()=>bf("Length exceeded!"),Sq=(t,e,n,r)=>{if(n>e._length)throw Cq();if(n===0)return e._searchMarker&&pb(e._searchMarker,n,r.length),IS(t,e,null,r);const o=n,i=Ox(e,n);let s=e._start;for(i!==null&&(s=i.p,n-=i.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&Ss(t,Qt(s.id.client,s.id.clock+n));break}n-=s.length}return e._searchMarker&&pb(e._searchMarker,o,r.length),IS(t,e,s,r)},VSe=(t,e,n)=>{let o=(e._searchMarker||[]).reduce((i,s)=>s.index>i.index?s:i,{index:0,p:e._start}).p;if(o)for(;o.right;)o=o.right;return IS(t,e,o,n)},_q=(t,e,n,r)=>{if(r===0)return;const o=n,i=r,s=Ox(e,n);let a=e._start;for(s!==null&&(a=s.p,n-=s.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&Ss(t,Qt(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&Ss(t,Qt(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw Cq();e._searchMarker&&pb(e._searchMarker,o,-i+r)},MS=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},GO=(t,e,n,r)=>{const o=e._map.get(n)||null,i=t.doc,s=i.clientID;let a;if(r==null)a=new np([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new np([r]);break;case Uint8Array:a=new r0(r);break;case Mf:a=new o0(r);break;default:if(r instanceof Go)a=new Nl(r);else throw new Error("Unexpected content type")}new xr(Qt(s,so(i.store,s)),o,o&&o.lastId,null,null,e,n,a).integrate(t,0)},qO=(t,e)=>{t.doc??Di();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},xq=t=>{const e={};return t.doc??Di(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},Eq=(t,e)=>{t.doc??Di();const n=t._map.get(e);return n!==void 0&&!n.deleted},jSe=(t,e)=>{const n={};return t._map.forEach((r,o)=>{let i=r;for(;i!==null&&(!e.sv.has(i.id.client)||i.id.clock>=(e.sv.get(i.id.client)||0));)i=i.left;i!==null&&vh(i,e)&&(n[o]=i.content.getContent()[i.length-1])}),n},hw=t=>(t.doc??Di(),tSe(t._map.entries(),e=>!e[1].deleted));class BSe extends Nx{}class Hm extends Go{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new Hm;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Hm}clone(){const e=new Hm;return e.insert(0,this.toArray().map(n=>n instanceof Go?n.clone():n)),e}get length(){return this.doc??Di(),this._length}_callObserver(e,n){super._callObserver(e,n),Px(this,e,new BSe(this,e))}insert(e,n){this.doc!==null?mr(this.doc,r=>{Sq(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?mr(this.doc,n=>{VSe(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?mr(this.doc,r=>{_q(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return wq(this,e)}toArray(){return yq(this)}slice(e=0,n=this.length){return gq(this,e,n)}toJSON(){return this.map(e=>e instanceof Go?e.toJSON():e)}map(e){return bq(this,e)}forEach(e){mb(this,e)}[Symbol.iterator](){return LSe(this)}_write(e){e.writeTypeRef(u_e)}}const $Se=t=>new Hm;class FSe extends Nx{constructor(e,n,r){super(e,n),this.keysChanged=r}}class yg extends Go{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,o)=>{this.set(o,r)}),this._prelimContent=null}_copy(){return new yg}clone(){const e=new yg;return this.forEach((n,r)=>{e.set(r,n instanceof Go?n.clone():n)}),e}_callObserver(e,n){Px(this,e,new FSe(this,e,n))}toJSON(){this.doc??Di();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const o=n.content.getContent()[n.length-1];e[r]=o instanceof Go?o.toJSON():o}}),e}get size(){return[...hw(this)].length}keys(){return OA(hw(this),e=>e[0])}values(){return OA(hw(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return OA(hw(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??Di(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?mr(this.doc,n=>{MS(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?mr(this.doc,r=>{GO(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return qO(this,e)}has(e){return Eq(this,e)}clear(){this.doc!==null?mr(this.doc,e=>{this.forEach(function(n,r,o){MS(e,o,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(d_e)}}const HSe=t=>new yg,Kd=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&ACe(t,e);class fI{constructor(e,n,r,o){this.left=e,this.right=n,this.index=r,this.currentAttributes=o}forward(){switch(this.right===null&&Js(),this.right.content.constructor){case Co:this.right.deleted||Hg(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const yB=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case Co:e.right.deleted||Hg(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Ss(t,Qt(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},pw=(t,e,n,r)=>{const o=new Map,i=r?Ox(e,n):null;if(i){const s=new fI(i.p.left,i.p,i.index,o);return yB(t,s,n-i.index)}else{const s=new fI(null,e._start,0,o);return yB(t,s,n)}},kq=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===Co&&Kd(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=t.doc,i=o.clientID;r.forEach((s,a)=>{const l=n.left,c=n.right,d=new xr(Qt(i,so(o.store,i)),l,l&&l.lastId,c,c&&c.id,e,null,new Co(a,s));d.integrate(t,0),n.right=d,n.forward()})},Hg=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},Tq=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===Co&&Kd(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},Aq=(t,e,n,r)=>{const o=t.doc,i=o.clientID,s=new Map;for(const a in r){const l=r[a],c=n.currentAttributes.get(a)??null;if(!Kd(c,l)){s.set(a,c);const{left:d,right:f}=n;n.right=new xr(Qt(i,so(o.store,i)),d,d&&d.lastId,f,f&&f.id,e,null,new Co(a,l)),n.right.integrate(t,0),n.forward()}}return s},LA=(t,e,n,r,o)=>{n.currentAttributes.forEach((p,g)=>{o[g]===void 0&&(o[g]=null)});const i=t.doc,s=i.clientID;Tq(n,o);const a=Aq(t,e,n,o),l=r.constructor===String?new Tl(r):r instanceof Go?new Nl(r):new gp(r);let{left:c,right:d,index:f}=n;e._searchMarker&&pb(e._searchMarker,n.index,l.getLength()),d=new xr(Qt(s,so(i.store,s)),c,c&&c.lastId,d,d&&d.id,e,null,l),d.integrate(t,0),n.right=d,n.index=f,n.forward(),kq(t,e,n,a)},vB=(t,e,n,r,o)=>{const i=t.doc,s=i.clientID;Tq(n,o);const a=Aq(t,e,n,o);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===Co));){if(!n.right.deleted)switch(n.right.content.constructor){case Co:{const{key:l,value:c}=n.right.content,d=o[l];if(d!==void 0){if(Kd(d,c))a.delete(l);else{if(r===0)break e;a.set(l,c)}n.right.delete(t)}else n.currentAttributes.set(l,c);break}default:r<n.right.length&&Ss(t,Qt(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let l="";for(;r>0;r--)l+=`
`;n.right=new xr(Qt(s,so(i.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Tl(l)),n.right.integrate(t,0),n.forward()}kq(t,e,n,a)},Rq=(t,e,n,r,o)=>{let i=e;const s=Ba();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===Co){const c=i.content;s.set(c.key,c)}i=i.right}let a=0,l=!1;for(;e!==i;){if(n===e&&(l=!0),!e.deleted){const c=e.content;switch(c.constructor){case Co:{const{key:d,value:f}=c,p=r.get(d)??null;(s.get(d)!==c||p===f)&&(e.delete(t),a++,!l&&(o.get(d)??null)===f&&p!==f&&(p===null?o.delete(d):o.set(d,p))),!l&&!e.deleted&&Hg(o,c);break}}}e=e.right}return a},USe=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Co){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},zSe=t=>{let e=0;return mr(t.doc,n=>{let r=t._start,o=t._start,i=Ba();const s=rI(i);for(;o;){if(o.deleted===!1)switch(o.content.constructor){case Co:Hg(s,o.content);break;default:e+=Rq(n,r,o,i,s),i=rI(s),r=o;break}o=o.right}}),e},GSe=t=>{const e=new Set,n=t.doc;for(const[r,o]of t.afterState.entries()){const i=t.beforeState.get(r)||0;o!==i&&uq(t,n.store.clients.get(r),i,o,s=>{!s.deleted&&s.content.constructor===Co&&s.constructor!==Oa&&e.add(s.parent)})}mr(n,r=>{wf(t,t.deleteSet,o=>{if(o instanceof Oa||!o.parent._hasFormatting||e.has(o.parent))return;const i=o.parent;o.content.constructor===Co?e.add(i):USe(r,o)});for(const o of e)zSe(o)})},bB=(t,e,n)=>{const r=n,o=rI(e.currentAttributes),i=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Nl:case gp:case Tl:n<e.right.length&&Ss(t,Qt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}i&&Rq(t,i,e.right,o,e.currentAttributes);const s=(e.left||e.right).parent;return s._searchMarker&&pb(s._searchMarker,e.index,-r+n),e};class qSe extends Nx{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(o=>{o===null?this.childListChanged=!0:this.keysChanged.add(o)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];mr(e,r=>{const o=new Map,i=new Map;let s=this.target._start,a=null;const l={};let c="",d=0,f=0;const p=()=>{if(a!==null){let g=null;switch(a){case"delete":f>0&&(g={delete:f}),f=0;break;case"insert":(typeof c=="object"||c.length>0)&&(g={insert:c},o.size>0&&(g.attributes={},o.forEach((y,b)=>{y!==null&&(g.attributes[b]=y)}))),c="";break;case"retain":d>0&&(g={retain:d},kCe(l)||(g.attributes=xCe({},l))),d=0;break}g&&n.push(g),a=null}};for(;s!==null;){switch(s.content.constructor){case Nl:case gp:this.adds(s)?this.deletes(s)||(p(),a="insert",c=s.content.getContent()[0],p()):this.deletes(s)?(a!=="delete"&&(p(),a="delete"),f+=1):s.deleted||(a!=="retain"&&(p(),a="retain"),d+=1);break;case Tl:this.adds(s)?this.deletes(s)||(a!=="insert"&&(p(),a="insert"),c+=s.content.str):this.deletes(s)?(a!=="delete"&&(p(),a="delete"),f+=s.length):s.deleted||(a!=="retain"&&(p(),a="retain"),d+=s.length);break;case Co:{const{key:g,value:y}=s.content;if(this.adds(s)){if(!this.deletes(s)){const b=o.get(g)??null;Kd(b,y)?y!==null&&s.delete(r):(a==="retain"&&p(),Kd(y,i.get(g)??null)?delete l[g]:l[g]=y)}}else if(this.deletes(s)){i.set(g,y);const b=o.get(g)??null;Kd(b,y)||(a==="retain"&&p(),l[g]=b)}else if(!s.deleted){i.set(g,y);const b=l[g];b!==void 0&&(Kd(b,y)?b!==null&&s.delete(r):(a==="retain"&&p(),y===null?delete l[g]:l[g]=y))}s.deleted||(a==="insert"&&p(),Hg(o,s.content));break}}s=s.right}for(p();n.length>0;){const g=n[n.length-1];if(g.retain!==void 0&&g.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class Cf extends Go{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Di(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new Cf}clone(){const e=new Cf;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new qSe(this,e,n);Px(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??Di();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Tl&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?mr(this.doc,r=>{const o=new fI(null,this._start,0,new Map);for(let i=0;i<e.length;i++){const s=e[i];if(s.insert!==void 0){const a=!n&&typeof s.insert=="string"&&i===e.length-1&&o.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof a!="string"||a.length>0)&&LA(r,this,o,a,s.attributes||{})}else s.retain!==void 0?vB(r,this,o,s.retain,s.attributes||{}):s.delete!==void 0&&bB(r,o,s.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??Di();const o=[],i=new Map,s=this.doc;let a="",l=this._start;function c(){if(a.length>0){const f={};let p=!1;i.forEach((y,b)=>{p=!0,f[b]=y});const g={insert:a};p&&(g.attributes=f),o.push(g),a=""}}const d=()=>{for(;l!==null;){if(vh(l,e)||n!==void 0&&vh(l,n))switch(l.content.constructor){case Tl:{const f=i.get("ychange");e!==void 0&&!vh(l,e)?(f===void 0||f.user!==l.id.client||f.type!=="removed")&&(c(),i.set("ychange",r?r("removed",l.id):{type:"removed"})):n!==void 0&&!vh(l,n)?(f===void 0||f.user!==l.id.client||f.type!=="added")&&(c(),i.set("ychange",r?r("added",l.id):{type:"added"})):f!==void 0&&(c(),i.delete("ychange")),a+=l.content.str;break}case Nl:case gp:{c();const f={insert:l.content.getContent()[0]};if(i.size>0){const p={};f.attributes=p,i.forEach((g,y)=>{p[y]=g})}o.push(f);break}case Co:vh(l,e)&&(c(),Hg(i,l.content));break}l=l.right}c()};return e||n?mr(s,f=>{e&&uI(f,e),n&&uI(f,n),d()},"cleanup"):d(),o}insert(e,n,r){if(n.length<=0)return;const o=this.doc;o!==null?mr(o,i=>{const s=pw(i,this,e,!r);r||(r={},s.currentAttributes.forEach((a,l)=>{r[l]=a})),LA(i,this,s,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const o=this.doc;o!==null?mr(o,i=>{const s=pw(i,this,e,!r);LA(i,this,s,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?mr(r,o=>{bB(o,pw(o,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const o=this.doc;o!==null?mr(o,i=>{const s=pw(i,this,e,!1);s.right!==null&&vB(i,this,s,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?mr(this.doc,n=>{MS(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?mr(this.doc,r=>{GO(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return qO(this,e)}getAttributes(){return xq(this)}_write(e){e.writeTypeRef(f_e)}}const KSe=t=>new Cf;class VA{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??Di()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Yi||n.constructor===tp)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class tp extends Go{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new tp}clone(){const e=new tp;return e.insert(0,this.toArray().map(n=>n instanceof Go?n.clone():n)),e}get length(){return this.doc??Di(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new VA(this,e)}querySelector(e){e=e.toUpperCase();const r=new VA(this,o=>o.nodeName&&o.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),vf(new VA(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){Px(this,e,new XSe(this,n,e))}toString(){return bq(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const o=e.createDocumentFragment();return r!==void 0&&r._createAssociation(o,this),mb(this,i=>{o.insertBefore(i.toDOM(e,n,r),null)}),o}insert(e,n){this.doc!==null?mr(this.doc,r=>{Sq(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)mr(this.doc,r=>{const o=e&&e instanceof Go?e._item:e;IS(r,this,o,n)});else{const r=this._prelimContent,o=e===null?0:r.findIndex(i=>i===e)+1;if(o===0&&e!==null)throw bf("Reference item not found");r.splice(o,0,...n)}}delete(e,n=1){this.doc!==null?mr(this.doc,r=>{_q(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return yq(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return wq(this,e)}slice(e=0,n=this.length){return gq(this,e,n)}forEach(e){mb(this,e)}_write(e){e.writeTypeRef(p_e)}}const WSe=t=>new tp;class Yi extends tp{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,o)=>{this.setAttribute(o,r)}),this._prelimAttrs=null}_copy(){return new Yi(this.nodeName)}clone(){const e=new Yi(this.nodeName),n=this.getAttributes();return ECe(n,(r,o)=>{typeof r=="string"&&e.setAttribute(o,r)}),e.insert(0,this.toArray().map(r=>r instanceof Go?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const a in e)r.push(a);r.sort();const o=r.length;for(let a=0;a<o;a++){const l=r[a];n.push(l+'="'+e[l]+'"')}const i=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${i}${s}>${super.toString()}</${i}>`}removeAttribute(e){this.doc!==null?mr(this.doc,n=>{MS(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?mr(this.doc,r=>{GO(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return qO(this,e)}hasAttribute(e){return Eq(this,e)}getAttributes(e){return e?jSe(this,e):xq(this)}toDOM(e=document,n={},r){const o=e.createElement(this.nodeName),i=this.getAttributes();for(const s in i){const a=i[s];typeof a=="string"&&o.setAttribute(s,a)}return mb(this,s=>{o.appendChild(s.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(o,this),o}_write(e){e.writeTypeRef(h_e),e.writeKey(this.nodeName)}}const YSe=t=>new Yi(t.readKey());class XSe extends Nx{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(o=>{o===null?this.childListChanged=!0:this.attributesChanged.add(o)})}}class NS extends yg{constructor(e){super(),this.hookName=e}_copy(){return new NS(this.hookName)}clone(){const e=new NS(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const o=n[this.hookName];let i;return o!==void 0?i=o.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(m_e),e.writeKey(this.hookName)}}const QSe=t=>new NS(t.readKey());class Ys extends Cf{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Ys}clone(){const e=new Ys;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const o=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(o,this),o}toString(){return this.toDelta().map(e=>{const n=[];for(const o in e.attributes){const i=[];for(const s in e.attributes[o])i.push({key:s,value:e.attributes[o][s]});i.sort((s,a)=>s.key<a.key?-1:1),n.push({nodeName:o,attrs:i})}n.sort((o,i)=>o.nodeName<i.nodeName?-1:1);let r="";for(let o=0;o<n.length;o++){const i=n[o];r+=`<${i.nodeName}`;for(let s=0;s<i.attrs.length;s++){const a=i.attrs[s];r+=` ${a.key}="${a.value}"`}r+=">"}r+=e.insert;for(let o=n.length-1;o>=0;o--)r+=`</${n[o].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(g_e)}}const ZSe=t=>new Ys;class KO{constructor(e,n){this.id=e,this.length=n}get deleted(){throw wl()}mergeWith(e){return!1}write(e,n,r){throw wl()}integrate(e,n){throw wl()}}const JSe=0;class Oa extends KO{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),cq(e.doc.store,this)}write(e,n){e.writeInfo(JSe),e.writeLen(this.length-n)}getMissing(e,n){return null}}class r0{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new r0(this.content)}splice(e){throw wl()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const e_e=t=>new r0(t.readBuf());class gb{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new gb(this.len)}splice(e){const n=new gb(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){ub(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const t_e=t=>new gb(t.readLen()),Iq=(t,e)=>new Mf({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class o0{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new o0(Iq(this.doc.guid,this.opts))}splice(e){throw wl()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const n_e=t=>new o0(Iq(t.readString(),t.readAny()));class gp{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new gp(this.embed)}splice(e){throw wl()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const r_e=t=>new gp(t.readJSON());class Co{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Co(this.key,this.value)}splice(e){throw wl()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const o_e=t=>new Co(t.readKey(),t.readJSON());class OS{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new OS(this.arr)}splice(e){const n=new OS(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];e.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const i_e=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const o=t.readString();o==="undefined"?n.push(void 0):n.push(JSON.parse(o))}return new OS(n)},s_e=TS("node_env")==="development";class np{constructor(e){this.arr=e,s_e&&$G(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new np(this.arr)}splice(e){const n=new np(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];e.writeAny(i)}}getRef(){return 8}}const a_e=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new np(n)};class Tl{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Tl(this.str)}splice(e){const n=new Tl(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"�",n.str="�"+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const l_e=t=>new Tl(t.readString()),c_e=[$Se,HSe,KSe,YSe,WSe,QSe,ZSe],u_e=0,d_e=1,f_e=2,h_e=3,p_e=4,m_e=5,g_e=6;class Nl{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Nl(this.type._copy())}splice(e){throw wl()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const y_e=t=>new Nl(c_e[t.readTypeRef()](t)),hI=(t,e)=>{let n=e,r=0,o;do r>0&&(n=Qt(n.client,n.clock+r)),o=Fm(t,n),r=n.clock-o.id.clock,n=o.redone;while(n!==null&&o instanceof xr);return{item:o,diff:r}},WO=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},PS=(t,e,n)=>{const{client:r,clock:o}=e.id,i=new xr(Qt(r,o+n),e,Qt(r,o+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&i.markDeleted(),e.keep&&(i.keep=!0),e.redone!==null&&(i.redone=Qt(e.redone.client,e.redone.clock+n)),e.right=i,i.right!==null&&(i.right.left=i),t._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),e.length=n,i},wB=(t,e)=>Vwe(t,n=>$g(n.deletions,e)),Mq=(t,e,n,r,o,i)=>{const s=t.doc,a=s.store,l=s.clientID,c=e.redone;if(c!==null)return Ss(t,c);let d=e.parent._item,f=null,p;if(d!==null&&d.deleted===!0){if(d.redone===null&&(!n.has(d)||Mq(t,d,n,r,o,i)===null))return null;for(;d.redone!==null;)d=Ss(t,d.redone)}const g=d===null?e.parent:d.content.type;if(e.parentSub===null){for(f=e.left,p=e;f!==null;){let k=f;for(;k!==null&&k.parent._item!==d;)k=k.redone===null?null:Ss(t,k.redone);if(k!==null&&k.parent._item===d){f=k;break}f=f.left}for(;p!==null;){let k=p;for(;k!==null&&k.parent._item!==d;)k=k.redone===null?null:Ss(t,k.redone);if(k!==null&&k.parent._item===d){p=k;break}p=p.right}}else if(p=null,e.right&&!o){for(f=e;f!==null&&f.right!==null&&(f.right.redone||$g(r,f.right.id)||wB(i.undoStack,f.right.id)||wB(i.redoStack,f.right.id));)for(f=f.right;f.redone;)f=Ss(t,f.redone);if(f&&f.right!==null)return null}else f=g._map.get(e.parentSub)||null;const y=so(a,l),b=Qt(l,y),_=new xr(b,f,f&&f.lastId,p,p&&p.id,g,e.parentSub,e.content.copy());return e.redone=b,WO(_,!0),_.integrate(t,0),_};let xr=class pI extends KO{constructor(e,n,r,o,i,s,a,l){super(e,l.getLength()),this.origin=r,this.left=n,this.right=o,this.rightOrigin=i,this.parent=s,this.parentSub=a,this.redone=null,this.content=l,this.info=this.content.isCountable()?W6:0}set marker(e){(this.info&IA)>0!==e&&(this.info^=IA)}get marker(){return(this.info&IA)>0}get keep(){return(this.info&K6)>0}set keep(e){this.keep!==e&&(this.info^=K6)}get countable(){return(this.info&W6)>0}get deleted(){return(this.info&RA)>0}set deleted(e){this.deleted!==e&&(this.info^=RA)}markDeleted(){this.info|=RA}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=so(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=so(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===$m&&this.id.client!==this.parent.client&&this.parent.clock>=so(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=dB(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Ss(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Oa||this.right&&this.right.constructor===Oa)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===pI?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===pI&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===$m){const r=Fm(n,this.parent);r.constructor===Oa?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=dB(e,e.doc.store,Qt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,o;if(r!==null)o=r.right;else if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start;const i=new Set,s=new Set;for(;o!==null&&o!==this.right;){if(s.add(o),i.add(o),_m(this.origin,o.origin)){if(o.id.client<this.id.client)r=o,i.clear();else if(_m(this.rightOrigin,o.rightOrigin))break}else if(o.origin!==null&&s.has(Fm(e.doc.store,o.origin)))i.has(Fm(e.doc.store,o.origin))||(r=o,i.clear());else break;o=o.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),cq(e.doc.store,this),this.content.integrate(e,this),hB(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Oa(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:Qt(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&_m(e.origin,this.lastId)&&this.right===e&&_m(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),ub(e.deleteSet,this.id.client,this.id.clock,this.length),hB(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw Js();this.content.gc(e),n?CSe(e,this,new Oa(this.id,this.length)):this.content=new gb(this.length)}write(e,n){const r=n>0?Qt(this.id.client,this.id.clock+n-1):this.origin,o=this.rightOrigin,i=this.parentSub,s=this.content.getRef()&Rx|(r===null?0:Xi)|(o===null?0:ku)|(i===null?0:ab);if(e.writeInfo(s),r!==null&&e.writeLeftID(r),o!==null&&e.writeRightID(o),r===null&&o===null){const a=this.parent;if(a._item!==void 0){const l=a._item;if(l===null){const c=db(a);e.writeParentInfo(!0),e.writeString(c)}else e.writeParentInfo(!1),e.writeLeftID(l.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===$m?(e.writeParentInfo(!1),e.writeLeftID(a)):Js();i!==null&&e.writeString(i)}this.content.write(e,n)}};const Nq=(t,e)=>v_e[e&Rx](t),v_e=[()=>{Js()},t_e,i_e,e_e,l_e,r_e,o_e,y_e,a_e,n_e,()=>{Js()}],b_e=10;class Pa extends KO{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){Js()}write(e,n){e.writeInfo(b_e),Rn(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const Oq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Pq="__ $YJS$ __";Oq[Pq]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Oq[Pq]=!0;const w_e=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},C_e=/[\uD800-\uDBFF]/,S_e=/[\uDC00-\uDFFF]/,__e=(t,e)=>{let n=0,r=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;for(n>0&&C_e.test(t[n-1])&&n--;r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1];)r++;return r>0&&S_e.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},x_e=__e,Qn=new Hn("y-sync"),La=new Hn("y-undo"),lv=new Hn("yjs-cursor"),pc=(t,e)=>t>>>e|t<<32-e,E_e=t=>pc(t,2)^pc(t,13)^pc(t,22),k_e=t=>pc(t,6)^pc(t,11)^pc(t,25),T_e=t=>pc(t,7)^pc(t,18)^t>>>3,A_e=t=>pc(t,17)^pc(t,19)^t>>>10,R_e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),I_e=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class M_e{constructor(){const e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(I_e),this._W=new Uint32Array(e,64,64)}_updateHash(){const e=this._H,n=this._W;for(let f=16;f<64;f++)n[f]=A_e(n[f-2])+n[f-7]+T_e(n[f-15])+n[f-16];let r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],l=e[5],c=e[6],d=e[7];for(let f=0,p,g;f<64;f++)p=d+k_e(a)+(a&l^~a&c)+R_e[f]+n[f]>>>0,g=E_e(r)+(r&o^r&i^o&i)>>>0,d=c,c=l,l=a,a=s+p>>>0,s=i,i=o,o=r,r=p+g>>>0;e[0]+=r,e[1]+=o,e[2]+=i,e[3]+=s,e[4]+=a,e[5]+=l,e[6]+=c,e[7]+=d}digest(e){let n=0;for(;n+56<=e.length;){let s=0;for(;s<16&&n+3<e.length;s++)this._W[s]=e[n++]<<24|e[n++]<<16|e[n++]<<8|e[n++];if(n%64!==0){for(this._W.fill(0,s,16);n<e.length;)this._W[s]|=e[n]<<(3-n%4)*8,n++;this._W[s]|=Xi<<(3-n%4)*8}this._updateHash()}const r=n%64!==0;this._W.fill(0,0,16);let o=0;for(;n<e.length;o++)for(let s=3;s>=0&&n<e.length;s--)this._W[o]|=e[n++]<<s*8;r||(this._W[o-(n%4===0?0:1)]|=Xi<<(3-n%4)*8),this._W[14]=e.byteLength/jwe,this._W[15]=e.byteLength*8,this._updateHash();const i=new Uint8Array(32);for(let s=0;s<this._H.length;s++)for(let a=0;a<4;a++)i[s*4+a]=this._H[s]>>>(3-a)*8;return i}}const N_e=t=>new M_e().digest(t),O_e=t=>{for(let n=6;n<t.length;n++)t[n%6]=t[n%6]^t[n];return t.slice(0,6)},P_e=t=>jCe(O_e(N_e($Ce(t)))),DS=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!$g(e.ds,t.id),D_e=[{light:"#ecd44433",dark:"#ecd444"}],L_e=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const r=Jh();t.forEach(o=>r.add(o)),e=e.filter(o=>!r.has(o))}t.set(n,yCe(e))}return t.get(n)},V_e=(t,{colors:e=D_e,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:o=()=>{},mapping:i}={})=>{let s=!1;const a=new B_e(t,i),l=new cn({props:{editable:c=>{const d=Qn.getState(c);return d.snapshot==null&&d.prevSnapshot==null}},key:Qn,state:{init:(c,d)=>({type:t,doc:t.doc,binding:a,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:n,permanentUserData:r}),apply:(c,d)=>{const f=c.getMeta(Qn);if(f!==void 0){d=Object.assign({},d);for(const p in f)d[p]=f[p]}return d.addToHistory=c.getMeta("addToHistory")!==!1,d.isChangeOrigin=f!==void 0&&!!f.isChangeOrigin,d.isUndoRedoOperation=f!==void 0&&!!f.isChangeOrigin&&!!f.isUndoRedoOperation,a.prosemirrorView!==null&&f!==void 0&&(f.snapshot!=null||f.prevSnapshot!=null)&&PO(0,()=>{a.prosemirrorView!=null&&(f.restore==null?a._renderSnapshot(f.snapshot,f.prevSnapshot,d):(a._renderSnapshot(f.snapshot,f.snapshot,d),delete d.restore,delete d.snapshot,delete d.prevSnapshot,a.mux(()=>{a._prosemirrorChanged(a.prosemirrorView.state.doc)})))}),d}},view:c=>(a.initView(c),i==null&&a._forceRerender(),o(),{update:()=>{const d=l.getState(c.state);if(d.snapshot==null&&d.prevSnapshot==null&&(s||c.state.doc.content.findDiffStart(c.state.doc.type.createAndFill().content)!==null)){if(s=!0,d.addToHistory===!1&&!d.isChangeOrigin){const f=La.getState(c.state),p=f&&f.undoManager;p&&p.stopCapturing()}a.mux(()=>{d.doc.transact(f=>{f.meta.set("addToHistory",d.addToHistory),a._prosemirrorChanged(c.state.doc)},Qn)})}},destroy:()=>{a.destroy()}})});return l},j_e=(t,e,n)=>{if(e!==null&&e.anchor!==null&&e.head!==null)if(e.type==="all")t.setSelection(new xs(t.doc));else if(e.type==="node"){const r=Bh(n.doc,n.type,e.anchor,n.mapping);t.setSelection(vt.create(t.doc,r))}else{const r=Bh(n.doc,n.type,e.anchor,n.mapping),o=Bh(n.doc,n.type,e.head,n.mapping);if(r!==null&&o!==null){const i=ft.between(t.doc.resolve(r),t.doc.resolve(o));t.setSelection(i)}}},LS=(t,e)=>({type:e.selection.jsonID,anchor:vb(e.selection.anchor,t.type,t.mapping),head:vb(e.selection.head,t.type,t.mapping)});class B_e{constructor(e,n=new Map){this.type=e,this.prosemirrorView=null,this.mux=w_e(),this.mapping=n,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=LS(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(HG&&this._domSelectionInView===null&&(PO(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection();if(e==null||e.anchorNode==null)return!1;const n=this.prosemirrorView._root.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const o=n.getBoundingClientRect(),i=HCe.documentElement;return o.bottom>=0&&o.right>=0&&o.left<=(window.innerWidth||i.clientWidth||0)&&o.top<=(window.innerHeight||i.clientHeight||0)}renderSnapshot(e,n){n||(n=aq(QG(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(Qn,{snapshot:e,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(r=>Jw(r,this.prosemirrorView.state.schema,this)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ze(Le.from(e),0,0));n.setMeta(Qn,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(o=>Jw(o,this.prosemirrorView.state.schema,this)).filter(o=>o!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ze(Le.from(n),0,0));if(e){const o=Eu(kl(e.anchor,0),r.doc.content.size),i=Eu(kl(e.head,0),r.doc.content.size);r.setSelection(ft.create(r.doc,o,i))}this.prosemirrorView.dispatch(r.setMeta(Qn,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,n,r){let o=this.doc,i=this.type;if(e||(e=DA(this.doc)),e instanceof Uint8Array||n instanceof Uint8Array)if((!(e instanceof Uint8Array)||!(n instanceof Uint8Array))&&Js(),o=new Mf({gc:!1}),AS(o,n),n=DA(o),AS(o,e),e=DA(o),i._item===null){const s=Array.from(this.doc.share.keys()).find(a=>this.doc.share.get(a)===this.type);i=o.getXmlFragment(s)}else{const s=o.store.clients.get(i._item.id.client)??[],a=Ua(s,i._item.id.clock);i=s[a].content.type}this.mapping.clear(),this.mux(()=>{o.transact(s=>{const a=r.permanentUserData;a&&a.dss.forEach(f=>{wf(s,f,p=>{})});const l=(f,p)=>{const g=f==="added"?a.getUserByClientId(p.client):a.getUserByDeletedId(p);return{user:g,type:f,color:L_e(r.colorMapping,r.colors,g)}},c=vq(i,new $O(n.ds,e.sv)).map(f=>!f._item.deleted||DS(f._item,e)||DS(f._item,n)?Jw(f,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,n,l):null).filter(f=>f!==null),d=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ze(Le.from(c),0,0));this.prosemirrorView.dispatch(d.setMeta(Qn,{isChangeOrigin:!0}))},Qn)})}_typeChanged(e,n){if(this.prosemirrorView==null)return;const r=Qn.getState(this.prosemirrorView.state);if(e.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const o=(a,l)=>this.mapping.delete(l);wf(n,n.deleteSet,a=>{if(a.constructor===xr){const l=a.content.type;l&&this.mapping.delete(l)}}),n.changed.forEach(o),n.changedParentTypes.forEach(o);const i=this.type.toArray().map(a=>Dq(a,this.prosemirrorView.state.schema,this)).filter(a=>a!==null);let s=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new Ze(Le.from(i),0,0));j_e(s,this.beforeTransactionSelection,this),s=s.setMeta(Qn,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof fq}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&s.scrollIntoView(),this.prosemirrorView.dispatch(s)})}_prosemirrorChanged(e){this.doc.transact(()=>{gI(this.doc,this.type,e,this),this.beforeTransactionSelection=LS(this,this.prosemirrorView.state)},Qn)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const Dq=(t,e,n,r,o,i)=>{const s=n.mapping.get(t);if(s===void 0){if(t instanceof Yi)return Jw(t,e,n,r,o,i);throw wl()}return s},Jw=(t,e,n,r,o,i)=>{const s=[],a=l=>{if(l instanceof Yi){const c=Dq(l,e,n,r,o,i);c!==null&&s.push(c)}else{const c=l._item.right?.content?.type;c instanceof Cf&&!c._item.deleted&&c._item.id.client===c.doc.clientID&&(l.applyDelta([{retain:l.length},...c.toDelta()]),c.doc.transact(f=>{c._item.delete(f)}));const d=$_e(l,e,n,r,o,i);d!==null&&d.forEach(f=>{f!==null&&s.push(f)})}};r===void 0||o===void 0?t.toArray().forEach(a):vq(t,new $O(o.ds,r.sv)).forEach(a);try{const l=t.getAttributes(r);r!==void 0&&(DS(t._item,r)?DS(t._item,o)||(l.ychange=i?i("added",t._item.id):{type:"added"}):l.ychange=i?i("removed",t._item.id):{type:"removed"});const c=e.node(t.nodeName,l,s);return n.mapping.set(t,c),c}catch{return t.doc.transact(c=>{t._item.delete(c)},Qn),n.mapping.delete(t),null}},$_e=(t,e,n,r,o,i)=>{const s=[],a=t.toDelta(r,o,i);try{for(let l=0;l<a.length;l++){const c=a[l];s.push(e.text(c.insert,q_e(c.attributes,e)))}}catch{return t.doc.transact(c=>{t._item.delete(c)},Qn),null}return s},F_e=(t,e)=>{const n=new Ys,r=t.map(o=>({insert:o.text,attributes:jq(o.marks,e)}));return n.applyDelta(r),e.mapping.set(n,t),n},H_e=(t,e)=>{const n=new Yi(t.type.name);for(const r in t.attrs){const o=t.attrs[r];o!==null&&r!=="ychange"&&n.setAttribute(r,o)}return n.insert(0,Dx(t).map(r=>mI(r,e))),e.mapping.set(n,t),n},mI=(t,e)=>t instanceof Array?F_e(t,e):H_e(t,e),CB=t=>typeof t=="object"&&t!==null,YO=(t,e)=>{const n=Object.keys(t).filter(o=>t[o]!==null);let r=n.length===(e==null?0:Object.keys(e).filter(o=>e[o]!==null).length);for(let o=0;o<n.length&&r;o++){const i=n[o],s=t[i],a=e[i];r=i==="ychange"||s===a||CB(s)&&CB(a)&&YO(s,a)}return r},Dx=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const o=e[r];if(o.isText){const i=[];for(let s=e[r];r<e.length&&s.isText;s=e[++r])i.push(s);r--,n.push(i)}else n.push(o)}return n},Lq=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((r,o)=>r.insert===e[o].text&&jG(r.attributes||{}).length===e[o].marks.length&&BG(r.attributes,(i,s)=>{const a=Vq(s),l=e[o].marks;return YO(i,l.find(c=>c.type.name===a)?.attrs)}))},yb=(t,e)=>{if(t instanceof Yi&&!(e instanceof Array)&&yI(t,e)){const n=Dx(e);return t._length===n.length&&YO(t.getAttributes(),e.attrs)&&t.toArray().every((r,o)=>yb(r,n[o]))}return t instanceof Ys&&e instanceof Array&&Lq(t,e)},VS=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((n,r)=>e[r]===n),SB=(t,e,n)=>{const r=t.toArray(),o=Dx(e),i=o.length,s=r.length,a=Eu(s,i);let l=0,c=0,d=!1;for(;l<a;l++){const f=r[l],p=o[l];if(VS(n.mapping.get(f),p))d=!0;else if(!yb(f,p))break}for(;l+c<a;c++){const f=r[s-c-1],p=o[i-c-1];if(VS(n.mapping.get(f),p))d=!0;else if(!yb(f,p))break}return{equalityFactor:l+c,foundMappedChild:d}},U_e=t=>{let e="",n=t._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof Tl?e+=n.content.str:n.content instanceof Co&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},z_e=(t,e,n)=>{n.mapping.set(t,e);const{nAttrs:r,str:o}=U_e(t),i=e.map(c=>({insert:c.text,attributes:Object.assign({},r,jq(c.marks,n))})),{insert:s,remove:a,index:l}=x_e(o,i.map(c=>c.insert).join(""));t.delete(l,a),t.insert(l,s),t.applyDelta(i.map(c=>({retain:c.insert.length,attributes:c.attributes})))},G_e=/(.*)(--[a-zA-Z0-9+/=]{8})$/,Vq=t=>G_e.exec(t)?.[1]??t,q_e=(t,e)=>{const n=[];for(const r in t)n.push(e.mark(Vq(r),t[r]));return n},jq=(t,e)=>{const n={};return t.forEach(r=>{if(r.type.name!=="ychange"){const o=Ic(e.isOMark,r.type,()=>!r.type.excludes(r.type));n[o?`${r.type.name}--${P_e(r.toJSON())}`:r.type.name]=r.attrs}}),n},gI=(t,e,n,r)=>{if(e instanceof Yi&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(e,n),e instanceof Yi){const f=e.getAttributes(),p=n.attrs;for(const g in p)p[g]!==null?f[g]!==p[g]&&g!=="ychange"&&e.setAttribute(g,p[g]):e.removeAttribute(g);for(const g in f)p[g]===void 0&&e.removeAttribute(g)}const o=Dx(n),i=o.length,s=e.toArray(),a=s.length,l=Eu(i,a);let c=0,d=0;for(;c<l;c++){const f=s[c],p=o[c];if(!VS(r.mapping.get(f),p))if(yb(f,p))r.mapping.set(f,p);else break}for(;d+c<l;d++){const f=s[a-d-1],p=o[i-d-1];if(!VS(r.mapping.get(f),p))if(yb(f,p))r.mapping.set(f,p);else break}t.transact(()=>{for(;a-c-d>0&&i-c-d>0;){const p=s[c],g=o[c],y=s[a-d-1],b=o[i-d-1];if(p instanceof Ys&&g instanceof Array)Lq(p,g)||z_e(p,g,r),c+=1;else{let _=p instanceof Yi&&yI(p,g),k=y instanceof Yi&&yI(y,b);if(_&&k){const M=SB(p,g,r),N=SB(y,b,r);M.foundMappedChild&&!N.foundMappedChild?k=!1:!M.foundMappedChild&&N.foundMappedChild||M.equalityFactor<N.equalityFactor?_=!1:k=!1}_?(gI(t,p,g,r),c+=1):k?(gI(t,y,b,r),d+=1):(r.mapping.delete(e.get(c)),e.delete(c,1),e.insert(c,[mI(g,r)]),c+=1)}}const f=a-c-d;if(a===1&&i===0&&s[0]instanceof Ys?(r.mapping.delete(s[0]),s[0].delete(0,s[0].length)):f>0&&(e.slice(c,c+f).forEach(p=>r.mapping.delete(p)),e.delete(c,f)),c+d<i){const p=[];for(let g=c;g<i-d;g++)p.push(mI(o[g],r));e.insert(c,p)}},Qn)},yI=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name;let Dv=null;const K_e=()=>{const t=Dv;Dv=null,t.forEach((e,n)=>{const r=n.state.tr,o=Qn.getState(n.state);o&&o.binding&&!o.binding.isDestroyed&&(e.forEach((i,s)=>{r.setMeta(s,i)}),n.dispatch(r))})},W_e=(t,e,n)=>{Dv||(Dv=new Map,PO(0,K_e)),Ic(Dv,t,Ba).set(e,n)},vb=(t,e,n)=>{if(t===0)return PA(e,0,e.length===0?-1:0);let r=e._first===null?null:e._first.content.type;for(;r!==null&&e!==r;){if(r instanceof Ys){if(r._length>=t)return PA(r,t,e.length===0?-1:0);if(t-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,t--;while(r!==e&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==e&&(r=r._item===null?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&t<o)r=r._first.content.type,t--;else{if(t===1&&r._length===0&&o>1)return new hb(r._item===null?null:r._item.id,r._item===null?db(r):null,null);if(t-=o,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(t===0)return r=r._item===null?r:r._item.parent,new hb(r._item===null?null:r._item.id,r._item===null?db(r):null,null);do r=r._item.parent,t--;while(r!==e&&r._item.next===null);r!==e&&(r=r._item.next.content.type)}}}if(r===null)throw Js();if(t===0&&r.constructor!==Ys&&r!==e)return Y_e(r._item.parent,r._item)}return PA(e,e._length,e.length===0?-1:0)},Y_e=(t,e)=>{let n=null,r=null;return t._item===null?r=db(t):n=Qt(t._item.id.client,t._item.id.clock),new hb(n,r,e.id)},Bh=(t,e,n,r)=>{const o=bSe(n,t);if(o===null||o.type!==e&&!fb(e,o.type._item))return null;let i=o.type,s=0;if(i.constructor===Ys)s=o.index;else if(i._item===null||!i._item.deleted){let a=i._first,l=0;for(;l<i._length&&l<o.index&&a!==null;){if(!a.deleted){const c=a.content.type;l++,c instanceof Ys?s+=c._length:s+=r.get(c).nodeSize}a=a.right}s+=1}for(;i!==e&&i._item!==null;){const a=i._item.parent;if(a._item===null||!a._item.deleted){s+=1;let l=a._first;for(;l!==null;){const c=l.content.type;if(c===i)break;l.deleted||(c instanceof Ys?s+=c._length:s+=r.get(c).nodeSize),l=l.right}}i=a}return s-1},X_e=(t,e,n)=>t!==e,Q_e=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null);const r=document.createTextNode("⁠"),o=document.createTextNode("⁠");return e.insertBefore(r,null),e.insertBefore(n,null),e.insertBefore(o,null),e},Bq=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),Z_e=/^#[0-9a-fA-F]{6}$/,_B=(t,e,n,r,o)=>{const i=Qn.getState(t),s=i.doc,a=[];return i.snapshot!=null||i.prevSnapshot!=null||i.binding.mapping.size===0?In.create(t.doc,[]):(e.getStates().forEach((l,c)=>{if(n(s.clientID,c,l)&&l.cursor!=null){const d=l.user||{};d.color==null?d.color="#ffa500":Z_e.test(d.color)||console.warn("A user uses an unsupported color format",d),d.name==null&&(d.name=`User: ${c}`);let f=Bh(s,i.type,Pv(l.cursor.anchor),i.binding.mapping),p=Bh(s,i.type,Pv(l.cursor.head),i.binding.mapping);if(f!==null&&p!==null){const g=kl(t.doc.content.size-1,0);f=Eu(f,g),p=Eu(p,g),a.push(dr.widget(p,()=>r(d,c),{key:c+"",side:10}));const y=Eu(f,p),b=kl(f,p);a.push(dr.inline(y,b,o(d,c),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),In.create(t.doc,a))},J_e=(t,{awarenessStateFilter:e=X_e,cursorBuilder:n=Q_e,selectionBuilder:r=Bq,getSelection:o=s=>s.selection}={},i="cursor")=>new cn({key:lv,state:{init(s,a){return _B(a,t,e,n,r)},apply(s,a,l,c){const d=Qn.getState(c),f=s.getMeta(lv);return d&&d.isChangeOrigin||f&&f.awarenessUpdated?_B(c,t,e,n,r):a.map(s.mapping,s.doc)}},props:{decorations:s=>lv.getState(s)},view:s=>{const a=()=>{s.docView&&W_e(s,lv,{awarenessUpdated:!0})},l=()=>{const c=Qn.getState(s.state),d=t.getLocalState()||{};if(s.hasFocus()){const f=o(s.state),p=vb(f.anchor,c.type,c.binding.mapping),g=vb(f.head,c.type,c.binding.mapping);(d.cursor==null||!uB(Pv(d.cursor.anchor),p)||!uB(Pv(d.cursor.head),g))&&t.setLocalStateField(i,{anchor:p,head:g})}else d.cursor!=null&&Bh(c.doc,c.type,Pv(d.cursor.anchor),c.binding.mapping)!==null&&t.setLocalStateField(i,null)};return t.on("change",a),s.dom.addEventListener("focusin",l),s.dom.addEventListener("focusout",l),{update:l,destroy:()=>{s.dom.removeEventListener("focusin",l),s.dom.removeEventListener("focusout",l),t.off("change",a),t.setLocalStateField(i,null)}}}}),exe=t=>La.getState(t)?.undoManager?.undo()!=null,txe=t=>La.getState(t)?.undoManager?.redo()!=null,nxe=(t,e)=>e==null?La.getState(t)?.undoManager?.canUndo():exe(t),rxe=(t,e)=>e==null?La.getState(t)?.undoManager?.canRedo():txe(t),oxe=new Set(["paragraph"]),ixe=(t,e)=>!(t instanceof xr)||!(t.content instanceof Nl)||!(t.content.type instanceof Cf||t.content.type instanceof Yi&&e.has(t.content.type.nodeName))||t.content.type._length===0,sxe=({protectedNodes:t=oxe,trackedOrigins:e=[],undoManager:n=null}={})=>new cn({key:La,state:{init:(r,o)=>{const i=Qn.getState(o),s=n||new fq(i.type,{trackedOrigins:new Set([Qn].concat(e)),deleteFilter:a=>ixe(a,t),captureTransaction:a=>a.meta.get("addToHistory")!==!1});return{undoManager:s,prevSel:null,hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}},apply:(r,o,i,s)=>{const a=Qn.getState(s).binding,l=o.undoManager,c=l.undoStack.length>0,d=l.redoStack.length>0;return a?{undoManager:l,prevSel:LS(a,i),hasUndoOps:c,hasRedoOps:d}:c!==o.hasUndoOps||d!==o.hasRedoOps?Object.assign({},o,{hasUndoOps:l.undoStack.length>0,hasRedoOps:l.redoStack.length>0}):o}},view:r=>{const o=Qn.getState(r.state),i=La.getState(r.state).undoManager;return i.on("stack-item-added",({stackItem:s})=>{const a=o.binding;a&&s.meta.set(a,La.getState(r.state).prevSel)}),i.on("stack-item-popped",({stackItem:s})=>{const a=o.binding;a&&(a.beforeTransactionSelection=s.meta.get(a)||a.beforeTransactionSelection)}),{destroy:()=>{i.destroy()}}}});function axe(t={}){return new cn({view(e){return new lxe(e,t)}})}class lxe{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let i=s=>{this[o](s)};return e.dom.addEventListener(o,i),{name:o,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,o=this.editorView.dom,i=o.getBoundingClientRect(),s=i.width/o.offsetWidth,a=i.height/o.offsetHeight;if(n){let f=e.nodeBefore,p=e.nodeAfter;if(f||p){let g=this.editorView.nodeDOM(this.cursorPos-(f?f.nodeSize:0));if(g){let y=g.getBoundingClientRect(),b=f?y.bottom:y.top;f&&p&&(b=(b+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let _=this.width/2*a;r={left:y.left,right:y.right,top:b-_,bottom:b+_}}}}if(!r){let f=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*s;r={left:f.left-p,right:f.left+p,top:f.top,bottom:f.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,d;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,d=-pageYOffset;else{let f=l.getBoundingClientRect(),p=f.width/l.offsetWidth,g=f.height/l.offsetHeight;c=f.left-l.scrollLeft*p,d=f.top-l.scrollTop*g}this.element.style.left=(r.left-c)/s+"px",this.element.style.top=(r.top-d)/a+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!i){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=BU(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const cxe={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},heading_4:{title:"Heading 4",subtext:"Minor subsection heading",aliases:["h4","heading4","subheading4"],group:"Subheadings"},heading_5:{title:"Heading 5",subtext:"Small subsection heading",aliases:["h5","heading5","subheading5"],group:"Subheadings"},heading_6:{title:"Heading 6",subtext:"Lowest-level heading",aliases:["h6","heading6","subheading6"],group:"Subheadings"},toggle_heading:{title:"Toggle Heading 1",subtext:"Toggleable top-level heading",aliases:["h","heading1","h1","collapsable"],group:"Subheadings"},toggle_heading_2:{title:"Toggle Heading 2",subtext:"Toggleable key section heading",aliases:["h2","heading2","subheading","collapsable"],group:"Subheadings"},toggle_heading_3:{title:"Toggle Heading 3",subtext:"Toggleable subsection and group heading",aliases:["h3","heading3","subheading","collapsable"],group:"Subheadings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},toggle_list:{title:"Toggle List",subtext:"List with hideable sub-items",aliases:["li","list","toggleList","toggle list","collapsable list"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",toggleListItem:"Toggle",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{edited:"edited",save_button_text:"Save",cancel_button_text:"Cancel",actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:t=>`${t} more replies`}},generic:{ctrl_shortcut:"Ctrl"}};var uxe=Object.defineProperty,dxe=(t,e,n)=>e in t?uxe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ee=(t,e,n)=>dxe(t,typeof e!="symbol"?e+"":e,n);function fxe(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function hxe(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return fxe(e)}const Lx=yr.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const t=window.__TEST_OPTIONS;return t.mockID===void 0?t.mockID=0:t.mockID++,t.mockID.toString()}return lG()},filterTransaction:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:t=>t.getAttribute(`data-${this.options.attributeName}`),renderHTML:t=>{const e={[`data-${this.options.attributeName}`]:t[this.options.attributeName]};return this.options.setIdAttribute?{...e,id:t[this.options.attributeName]}:e}}}}]},addProseMirrorPlugins(){let t=null,e=!1;return[new cn({key:new Hn("uniqueID"),appendTransaction:(n,r,o)=>{const i=n.some(g=>g.docChanged)&&!r.doc.eq(o.doc),s=this.options.filterTransaction&&n.some(g=>{let y,b;return!(!((b=(y=this.options).filterTransaction)===null||b===void 0)&&b.call(y,g))});if(!i||s)return;const{tr:a}=o,{types:l,attributeName:c,generateID:d}=this.options,f=dO(r.doc,n),{mapping:p}=f;if(Jz(f).forEach(({newRange:g})=>{const y=Qz(o.doc,g,k=>l.includes(k.type.name)),b=y.map(({node:k})=>k.attrs[c]).filter(k=>k!==null),_=hxe(b);y.forEach(({node:k,pos:M})=>{let N;const j=(N=a.doc.nodeAt(M))===null||N===void 0?void 0:N.attrs[c];if(j===null){const F=r.doc.type.createAndFill().content;if(r.doc.content.findDiffStart(F)===null){const D=JSON.parse(JSON.stringify(o.doc.toJSON()));if(D.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(D.content)===JSON.stringify(F.toJSON())){a.setNodeMarkup(M,void 0,{...k.attrs,[c]:"initialBlockId"});return}}a.setNodeMarkup(M,void 0,{...k.attrs,[c]:d()});return}const{deleted:B}=p.invert().mapResult(M);B&&_.includes(j)&&a.setNodeMarkup(M,void 0,{...k.attrs,[c]:d()})})}),!!a.steps.length)return a},view(n){const r=o=>{let i;t=!((i=n.dom.parentElement)===null||i===void 0)&&i.contains(o.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{let o;return t!==n.dom.parentElement||((o=r.dataTransfer)===null||o===void 0?void 0:o.effectAllowed)==="copy"?e=!0:e=!1,t=null,!1},paste:()=>(e=!0,!1)},transformPasted:n=>{if(!e)return n;const{types:r,attributeName:o}=this.options,i=s=>{const a=[];return s.forEach(l=>{if(l.isText){a.push(l);return}if(!r.includes(l.type.name)){a.push(l.copy(i(l.content)));return}const c=l.type.create({...l.attrs,[o]:null},i(l.content),l.marks);a.push(c)}),Le.from(a)};return e=!1,new Ze(i(n.content),n.openStart,n.openEnd)}}})]}});function xB(t){return t.type==="link"}function $q(t){return typeof t!="string"&&t.type==="link"}function rp(t){return typeof t!="string"&&t.type==="text"}function Sf(t){var e,n,r,o,i;return _f(t)?{...t}:bb(t)?{type:"tableCell",content:[].concat(t.content),props:{backgroundColor:((e=t.props)==null?void 0:e.backgroundColor)??"default",textColor:((n=t.props)==null?void 0:n.textColor)??"default",textAlignment:((r=t.props)==null?void 0:r.textAlignment)??"left",colspan:((o=t.props)==null?void 0:o.colspan)??1,rowspan:((i=t.props)==null?void 0:i.rowspan)??1}}:{type:"tableCell",content:[].concat(t),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function bb(t){return t!=null&&typeof t!="string"&&!Array.isArray(t)&&t.type==="tableCell"}function _f(t){return bb(t)&&t.props!==void 0&&t.content!==void 0}function op(t){return _f(t)?t.props.colspan??1:1}function wb(t){return _f(t)?t.props.rowspan??1:1}let Sc=class extends Error{constructor(e){super(`Unreachable case: ${e}`)}};function on(t,e=!0){const{"data-test":n,...r}=t;if(Object.keys(r).length>0&&e)throw new Error("Object must be empty "+JSON.stringify(t))}const pxe=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function Gs(t,e="Ctrl"){return pxe()?t.replace("Mod","⌘"):t.replace("Mod",e)}function Er(...t){return[...new Set(t.filter(e=>e).join(" ").split(" "))].join(" ")}const vI=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function ea(t,e,n,r){const o=document.createElement("div");o.className=Er("bn-block-content",n.class),o.setAttribute("data-content-type",t);for(const[s,a]of Object.entries(n))s!=="class"&&o.setAttribute(s,a);const i=document.createElement(e);i.className=Er("bn-inline-content",r.class);for(const[s,a]of Object.entries(r))s!=="class"&&i.setAttribute(s,a);return o.appendChild(i),{dom:o,contentDOM:i}}const EB=(t,e)=>{let n=yp(t,e.pmSchema);n.type.name==="blockContainer"&&(n=n.firstChild);const r=e.pmSchema.nodes[n.type.name].spec.toDOM;if(r===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const o=r(n);if(typeof o!="object"||!("dom"in o))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return o},Br={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},XO=["backgroundColor","textColor"];function jS(t){return"data-"+t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function kB(t){const e=t.split("/");return!e.length||e[e.length-1]===""?t:e[e.length-1]}function i0(t){const e={};return Object.entries(t).filter(([n,r])=>!XO.includes(n)).forEach(([n,r])=>{e[n]={default:r.default,keepOnSplit:!0,parseHTML:o=>{const i=o.getAttribute(jS(n));if(i===null)return null;if(r.default===void 0&&r.type==="boolean"||r.default!==void 0&&typeof r.default=="boolean")return i==="true"?!0:i==="false"?!1:null;if(r.default===void 0&&r.type==="number"||r.default!==void 0&&typeof r.default=="number"){const s=parseFloat(i);return!Number.isNaN(s)&&Number.isFinite(s)?s:null}return i},renderHTML:o=>o[n]!==r.default?{[jS(n)]:o[n]}:{}}}),e}function Vx(t,e,n,r){if(typeof t=="boolean")throw new Error("Cannot find node position as getPos is a boolean, not a function.");const o=t(),i=n.state.doc.resolve(o).node().attrs.id;if(!i)throw new Error("Block doesn't have id");const s=e.getBlock(i);if(s.type!==r)throw new Error("Block type does not match");return s}function cv(t,e,n,r,o=!1,i){const s=document.createElement("div");if(i!==void 0)for(const[a,l]of Object.entries(i))a!=="class"&&s.setAttribute(a,l);s.className=Er("bn-block-content",i?.class||""),s.setAttribute("data-content-type",e);for(const[a,l]of Object.entries(n)){const c=r[a].default;!XO.includes(a)&&l!==c&&s.setAttribute(jS(a),l)}return o&&s.setAttribute("data-file-block",""),s.appendChild(t.dom),t.contentDOM!==void 0&&(t.contentDOM.className=Er("bn-inline-content",t.contentDOM.className)),{...t,dom:s}}function es(t){return Tc.create(t)}function QO(t,e){return{config:t,implementation:e}}function za(t,e,n){return QO({type:t.name,content:t.config.content==="inline*"?"inline":t.config.content==="tableRow+"?"table":"none",propSchema:e},{node:t,requiredExtensions:n,toInternalHTML:EB,toExternalHTML:EB})}function Fq(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function Hq(t,e){t.stopEvent=n=>(n.type==="mousedown"&&setTimeout(()=>{e.view.dom.blur()},10),!0)}function Uq(t,e){const n=[{tag:"[data-content-type="+t.type+"]",contentElement:".bn-inline-content"}];return e&&n.push({tag:"*",getAttrs(r){if(typeof r=="string")return!1;const o=e?.(r);return o===void 0?!1:o}}),n}function Ug(t,e){const n=es({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return i0(t.propSchema)},parseHTML(){return Uq(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return cv({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return({getPos:r})=>{var o;const i=this.options.editor,s=Vx(r,i,this.editor,t.type),a=((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},l=e.render(s,i),c=cv(l,s.type,s.props,t.propSchema,t.isFileBlock,a);return t.isSelectable===!1&&Hq(c,this.editor),c}}});if(n.name!==t.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return QO(t,{node:n,toInternalHTML:(r,o)=>{var i;const s=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{},a=e.render(r,o);return cv(a,r.type,r.props,t.propSchema,t.isFileBlock,s)},toExternalHTML:(r,o)=>{var i,s;const a=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{};let l=(s=e.toExternalHTML)==null?void 0:s.call(e,r,o);return l===void 0&&(l=e.render(r,o)),cv(l,r.type,r.props,t.propSchema,a)}})}function Lu(t,e){const n=t.resolve(e);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};let r=n.depth,o=n.node(r);for(;r>0;){if(o.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:o};r--,o=n.node(r)}const i=[];t.descendants((a,l)=>{a.type.isInGroup("bnBlock")&&i.push(l)}),console.warn(`Position ${e} is not within a blockContainer node.`);const s=t.resolve(i.find(a=>a>=e)||i[i.length-1]);return{posBeforeNode:s.pos,node:s.nodeAfter}}function ZO(t,e){if(!t.type.isInGroup("bnBlock"))throw new Error(`Attempted to get bnBlock node at position but found node of different type ${t.type.name}`);const n=t,r=e,o=r+n.nodeSize,i={node:n,beforePos:r,afterPos:o};if(n.type.name==="blockContainer"){let s,a;if(n.forEach((l,c)=>{if(l.type.spec.group==="blockContent"){const d=l,f=r+c+1,p=f+l.nodeSize;s={node:d,beforePos:f,afterPos:p}}else if(l.type.name==="blockGroup"){const d=l,f=r+c+1,p=f+l.nodeSize;a={node:d,beforePos:f,afterPos:p}}}),!s)throw new Error(`blockContainer node does not contain a blockContent node in its children: ${n}`);return{isBlockContainer:!0,bnBlock:i,blockContent:s,childContainer:a,blockNoteType:s.node.type.name}}else{if(!i.node.type.isInGroup("childContainer"))throw new Error(`bnBlock node is not in the childContainer group: ${i.node}`);return{isBlockContainer:!1,bnBlock:i,childContainer:i,blockNoteType:i.node.type.name}}}function xf(t){return ZO(t.node,t.posBeforeNode)}function s0(t){if(!t.nodeAfter)throw new Error(`Attempted to get blockContainer node at position ${t.pos} but a node at this position does not exist`);return ZO(t.nodeAfter,t.pos)}function pr(t){const e=Lu(t.doc,t.selection.anchor);return xf(e)}function jx(t){const e=Lu(t.doc,t.selection.anchor);return xf(e)}function Yo(t){return"doc"in t?t.doc.type.schema:t.type.schema}function zq(t){return t.cached.blockNoteEditor}function a0(t){return zq(t).schema}function JO(t){return a0(t).blockSchema}function eP(t){return a0(t).inlineContentSchema}function zg(t){return a0(t).styleSchema}function tP(t){return zq(t).blockCache}function Gq(t,e,n){var r,o;const i={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},s=[];t.content.forEach((a,l,c)=>{const d={cells:[]};c===0&&a.content.forEach(f=>{let p=f.attrs.colwidth;p==null&&(p=new Array(f.attrs.colspan??1).fill(void 0)),i.columnWidths.push(...p)}),d.cells=a.content.content.map((f,p)=>(s[c]||(s[c]=[]),s[c][p]=f.type.name==="tableHeader",{type:"tableCell",content:f.content.content.map(g=>Bx(g,e,n)).reduce((g,y)=>{if(!g.length)return y;const b=g[g.length-1],_=y[0];return _&&rp(b)&&rp(_)&&JSON.stringify(b.styles)===JSON.stringify(_.styles)?(b.text+=`
`+_.text,g.push(...y.slice(1)),g):(g.push(...y),g)},[]),props:{colspan:f.attrs.colspan,rowspan:f.attrs.rowspan,backgroundColor:f.attrs.backgroundColor,textColor:f.attrs.textColor,textAlignment:f.attrs.textAlignment}})),i.rows.push(d)});for(let a=0;a<s.length;a++)(r=s[a])!=null&&r.every(l=>l)&&(i.headerRows=(i.headerRows??0)+1);for(let a=0;a<((o=s[0])==null?void 0:o.length);a++)s!=null&&s.every(l=>l[a])&&(i.headerCols=(i.headerCols??0)+1);return i}function Bx(t,e,n){const r=[];let o;return t.content.forEach(i=>{if(i.type.name==="hardBreak"){if(o)if(rp(o))o.text+=`
`;else if(xB(o))o.content[o.content.length-1].text+=`
`;else throw new Error("unexpected");else o={type:"text",text:`
`,styles:{}};return}if(i.type.name!=="link"&&i.type.name!=="text"){if(!e[i.type.name]){console.warn("unrecognized inline content type",i.type.name);return}o&&(r.push(o),o=void 0),r.push(mxe(i,e,n));return}const s={};let a;for(const l of i.marks)if(l.type.name==="link")a=l;else{const c=n[l.type.name];if(!c){if(l.type.spec.blocknoteIgnore)continue;throw new Error(`style ${l.type.name} not found in styleSchema`)}if(c.propSchema==="boolean")s[c.type]=!0;else if(c.propSchema==="string")s[c.type]=l.attrs.stringValue;else throw new Sc(c.propSchema)}o?rp(o)?a?(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:s}]}):JSON.stringify(o.styles)===JSON.stringify(s)?o.text+=i.textContent:(r.push(o),o={type:"text",text:i.textContent,styles:s}):xB(o)&&(a?o.href===a.attrs.href?JSON.stringify(o.content[o.content.length-1].styles)===JSON.stringify(s)?o.content[o.content.length-1].text+=i.textContent:o.content.push({type:"text",text:i.textContent,styles:s}):(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:s}]}):(r.push(o),o={type:"text",text:i.textContent,styles:s})):a?o={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:s}]}:o={type:"text",text:i.textContent,styles:s}}),o&&r.push(o),r}function mxe(t,e,n){if(t.type.name==="text"||t.type.name==="link")throw new Error("unexpected");const r={},o=e[t.type.name];for(const[s,a]of Object.entries(t.attrs)){if(!o)throw Error("ic node is of an unrecognized type: "+t.type.name);const l=o.propSchema;s in l&&(r[s]=a)}let i;return o.content==="styled"?i=Bx(t,e,n):i=void 0,{type:t.type.name,props:r,content:i}}function jr(t,e,n=JO(e),r=eP(e),o=zg(e),i=tP(e)){var s;if(!t.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+t.type.name);const a=i?.get(t);if(a)return a;const l=ZO(t,0);let c=l.bnBlock.node.attrs.id;c===null&&(c=Lx.options.generateID());const d=n[l.blockNoteType];if(!d)throw Error("Block is of an unrecognized type: "+l.blockNoteType);const f={};for(const[_,k]of Object.entries({...t.attrs,...l.isBlockContainer?l.blockContent.node.attrs:{}})){const M=d.propSchema;_ in M&&!(M[_].default===void 0&&k===void 0)&&(f[_]=k)}const p=n[l.blockNoteType],g=[];(s=l.childContainer)==null||s.node.forEach(_=>{g.push(jr(_,e,n,r,o,i))});let y;if(p.content==="inline"){if(!l.isBlockContainer)throw new Error("impossible");y=Bx(l.blockContent.node,r,o)}else if(p.content==="table"){if(!l.isBlockContainer)throw new Error("impossible");y=Gq(l.blockContent.node,r,o)}else if(p.content==="none")y=void 0;else throw new Sc(p.content);const b={id:c,type:p.type,props:f,content:y,children:g};return i?.set(t,b),b}function gxe(t,e,n=JO(e),r=eP(e),o=zg(e),i=tP(e)){const s=[];return t.firstChild.descendants(a=>(s.push(jr(a,e,n,r,o,i)),!1)),s}function yxe(t,e,n=JO(e),r=eP(e),o=zg(e),i=tP(e)){function s(a,l,c){if(a.type.name!=="blockGroup")throw new Error("unexpected");const d=[];let f,p;return a.forEach((g,y,b)=>{if(g.type.name!=="blockContainer")throw new Error("unexpected");if(g.childCount===0)return;if(g.childCount===0||g.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+g.childCount);const _=b===0,k=b===a.childCount-1;if(g.firstChild.type.name==="blockGroup"){if(!_)throw new Error("unexpected");const B=s(g.firstChild,Math.max(0,l-1),k?Math.max(0,c-1):0);f=B.blockCutAtStart,k&&(p=B.blockCutAtEnd),d.push(...B.blocks);return}const M=jr(g,e,n,r,o,i),N=g.childCount>1?g.child(1):void 0;let j=[];if(N){const B=s(N,0,k?Math.max(0,c-1):0);j=B.blocks,k&&(p=B.blockCutAtEnd)}k&&!N&&c>1&&(p=M.id),_&&l>1&&(f=M.id),d.push({...M,children:j})}),{blocks:d,blockCutAtStart:f,blockCutAtEnd:p}}if(t.content.childCount===0)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(t.content.childCount!==1)throw new Error("slice must be a single block, did you forget includeParents=true?");return s(t.content.firstChild,Math.max(t.openStart-1,0),Math.max(t.openEnd-1,0))}function qq(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function vxe(t){return t==="boolean"?{}:{stringValue:{default:void 0,keepOnSplit:!0,parseHTML:e=>e.getAttribute("data-value"),renderHTML:e=>e.stringValue!==void 0?{"data-value":e.stringValue}:{}}}}function bxe(t,e,n,r){return t.dom.setAttribute("data-style-type",e),r==="string"&&t.dom.setAttribute("data-value",n),t.contentDOM!==void 0&&t.contentDOM.setAttribute("data-editable",""),t}function Kq(t,e){return{config:t,implementation:e}}function bh(t,e){return Kq({type:t.name,propSchema:e},{mark:t})}function Wq(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function wxe(t){return[{tag:`[data-style-type="${t.type}"]`,contentElement:e=>{const n=e;return n.matches("[data-editable]")?n:n.querySelector("[data-editable]")||n}}]}function Nf(t){const{height:e,width:n}=nP(t),r=new Array(e).fill(!1).map(()=>new Array(n).fill(null)),o=(i,s)=>{for(let a=i;a<e;a++)for(let l=s;l<n;l++)if(!r[a][l])return{row:a,col:l};throw new Error("Unable to create occupancy grid for table, no more available cells")};for(let i=0;i<t.content.rows.length;i++)for(let s=0;s<t.content.rows[i].cells.length;s++){const a=Sf(t.content.rows[i].cells[s]),l=wb(a),c=op(a),{row:d,col:f}=o(i,s);for(let p=d;p<d+l;p++)for(let g=f;g<f+c;g++){if(r[p][g])throw new Error(`Unable to create occupancy grid for table, cell at ${p},${g} is already occupied`);r[p][g]={row:i,col:s,rowspan:l,colspan:c,cell:a}}}return r}function Cb(t){const e=new Set;return t.map(n=>({cells:n.map(r=>e.has(r.row+":"+r.col)?!1:(e.add(r.row+":"+r.col),r.cell)).filter(r=>r!==!1)}))}function ip(t,e,n=Nf(e)){for(let r=0;r<n.length;r++)for(let o=0;o<n[r].length;o++){const i=n[r][o];if(i.row===t.row&&i.col===t.col)return{row:r,col:o,cell:i.cell}}throw new Error(`Unable to resolve relative table cell indices for table, cell at ${t.row},${t.col} is not occupied`)}function nP(t){const e=t.content.rows.length;let n=0;return t.content.rows.forEach(r=>{let o=0;r.cells.forEach(i=>{o+=op(i)}),n=Math.max(n,o)}),{height:e,width:n}}function Yq(t,e,n=Nf(e)){var r;const o=(r=n[t.row])==null?void 0:r[t.col];if(o)return{row:o.row,col:o.col,cell:o.cell}}function bI(t,e){var n;const r=Nf(t);if(e<0||e>=r.length)return[];let o=0;for(let s=0;s<e;s++){const a=(n=r[o])==null?void 0:n[0];if(!a)return[];o+=a.rowspan}const i=new Array(r[0].length).fill(!1).map((s,a)=>Yq({row:o,col:a},t,r)).filter(s=>s!==void 0);return i.filter((s,a)=>i.findIndex(l=>l.row===s.row&&l.col===s.col)===a)}function wI(t,e){var n;const r=Nf(t);if(e<0||e>=r[0].length)return[];let o=0;for(let s=0;s<e;s++){const a=(n=r[0])==null?void 0:n[o];if(!a)return[];o+=a.colspan}const i=new Array(r.length).fill(!1).map((s,a)=>Yq({row:a,col:o},t,r)).filter(s=>s!==void 0);return i.filter((s,a)=>i.findIndex(l=>l.row===s.row&&l.col===s.col)===a)}function Cxe(t,e,n,r=Nf(t)){const{col:o}=ip({row:0,col:e},t,r),{col:i}=ip({row:0,col:n},t,r);return r.forEach(s=>{const[a]=s.splice(o,1);s.splice(i,0,a)}),Cb(r)}function Sxe(t,e,n,r=Nf(t)){const{row:o}=ip({row:e,col:0},t,r),{row:i}=ip({row:n,col:0},t,r),[s]=r.splice(o,1);return r.splice(i,0,s),Cb(r)}function CI(t){return t?bb(t)?CI(t.content):typeof t=="string"?t.length===0:Array.isArray(t)?t.every(e=>typeof e=="string"?e.length===0:rp(e)?e.text.length===0:$q(e)?typeof e.content=="string"?e.content.length===0:e.content.every(n=>n.text.length===0):!1):!1:!0}function _xe(t,e,n=Nf(t)){if(e==="columns"){let i=0;for(let s=n[0].length-1;s>=0&&n.every(a=>CI(a[s].cell)&&a[s].colspan===1);s--)i++;for(let s=n.length-1;s>=0;s--){const a=Math.max(n[s].length-i,1);n[s]=n[s].slice(0,a)}return Cb(n)}let r=0;for(let i=n.length-1;i>=0&&n[i].every(s=>CI(s.cell)&&s.rowspan===1);i--)r++;const o=Math.min(r,n.length-1);return n.splice(n.length-o,o),Cb(n)}function xxe(t,e,n,r=Nf(t)){const{width:o,height:i}=nP(t);if(e==="columns")r.forEach((s,a)=>{if(n>=0)for(let l=0;l<n;l++)s.push({row:a,col:Math.max(...s.map(c=>c.col))+1,rowspan:1,colspan:1,cell:Sf("")});else s.splice(o+n,-1*n)});else if(n>0)for(let s=0;s<n;s++){const a=new Array(o).fill(null).map((l,c)=>({row:i+s,col:c,rowspan:1,colspan:1,cell:Sf("")}));r.push(a)}else n<0&&r.splice(i+n,-1*n);return Cb(r)}function Xq(t,e,n){const r=bI(t,n);if(!r.some(s=>wb(s.cell)>1))return!0;let o=n,i=n;return r.forEach(s=>{const a=wb(s.cell);o=Math.max(o,s.row+a-1),i=Math.min(i,s.row)}),e<n?n===o:n===i}function Qq(t,e,n){const r=wI(t,n);if(!r.some(s=>op(s.cell)>1))return!0;let o=n,i=n;return r.forEach(s=>{const a=op(s.cell);o=Math.max(o,s.col+a-1),i=Math.min(i,s.col)}),e<n?n===o:n===i}function Exe(t,e,n){const r=ip(t,n),o=ip(e,n);return r.col===o.col}function TB(t,e,n,r){const o=[];for(const[i,s]of Object.entries(t.styles||{})){const a=n[i];if(!a)throw new Error(`style ${i} not found in styleSchema`);if(a.propSchema==="boolean")s&&o.push(e.mark(i));else if(a.propSchema==="string")s&&o.push(e.mark(i,{stringValue:s}));else throw new Sc(a.propSchema)}return!r||!e.nodes[r].spec.code?t.text.split(/(\n)/g).filter(i=>i.length>0).map(i=>i===`
`?e.nodes.hardBreak.createChecked():e.text(i,o)):t.text.length>0?[e.text(t.text,o)]:[]}function kxe(t,e,n){const r=e.marks.link.create({href:t.href});return SI(t.content,e,n).map(o=>{if(o.type.name==="text")return o.mark([...o.marks,r]);if(o.type.name==="hardBreak")return o;throw new Error("unexpected node type")})}function SI(t,e,n,r){const o=[];if(typeof t=="string")return o.push(...TB({text:t,styles:{}},e,n,r)),o;for(const i of t)o.push(...TB(i,e,n,r));return o}function Al(t,e,n,r=zg(e)){const o=[];for(const i of t)typeof i=="string"?o.push(...SI(i,e,r,n)):$q(i)?o.push(...kxe(i,e,r)):rp(i)?o.push(...SI([i],e,r,n)):o.push(Zq(i,e,r));return o}function $x(t,e,n=zg(e)){const r=[],o=new Array(t.headerRows??0).fill(!0),i=new Array(t.headerCols??0).fill(!0),s=t.columnWidths??[];for(let a=0;a<t.rows.length;a++){const l=t.rows[a],c=[],d=o[a];for(let p=0;p<l.cells.length;p++){const g=l.cells[p],y=i[p],b=void 0;let _=null;const k=ip({row:a,col:p},{content:t});let M=s[k.col]?[s[k.col]]:null;if(g)if(typeof g=="string")_=e.text(g);else if(bb(g)){g.content&&(_=Al(g.content,e,"tableParagraph",n));const j=op(g);j>1&&(M=new Array(j).fill(!1).map((B,F)=>s[k.col+F]??void 0))}else _=Al(g,e,"tableParagraph",n);const N=e.nodes[y||d?"tableHeader":"tableCell"].createChecked({...bb(g)?g.props:{},colwidth:M},e.nodes.tableParagraph.createChecked(b,_));c.push(N)}const f=e.nodes.tableRow.createChecked({},c);r.push(f)}return r}function Zq(t,e,n){let r,o=t.type;if(o===void 0&&(o="paragraph"),!e.nodes[o])throw new Error(`node type ${o} not found in schema`);if(!t.content)r=e.nodes[o].createChecked(t.props);else if(typeof t.content=="string"){const i=Al([t.content],e,o,n);r=e.nodes[o].createChecked(t.props,i)}else if(Array.isArray(t.content)){const i=Al(t.content,e,o,n);r=e.nodes[o].createChecked(t.props,i)}else if(t.content.type==="tableContent"){const i=$x(t.content,e,n);r=e.nodes[o].createChecked(t.props,i)}else throw new Sc(t.content.type);return r}function yp(t,e,n=zg(e)){let r=t.id;r===void 0&&(r=Lx.options.generateID());const o=[];if(t.children)for(const i of t.children)o.push(yp(i,e,n));if(!t.type||e.nodes[t.type].isInGroup("blockContent")){const i=Zq(t,e,n),s=o.length>0?e.nodes.blockGroup.createChecked({},o):void 0;return e.nodes.blockContainer.createChecked({id:r,...t.props},s?[i,s]:i)}else{if(e.nodes[t.type].isInGroup("bnBlock"))return e.nodes[t.type].createChecked({id:r,...t.props},o);throw new Error(`block type ${t.type} doesn't match blockContent or bnBlock group`)}}function Txe(t,e){if(e===0)return;const n=t.resolve(e);for(let r=n.depth;r>0;r--){const o=n.node(r);if(rP(o))return o.attrs.id}}function ta(t,e){let n,r;if(e.firstChild.descendants((o,i)=>n?!1:!rP(o)||o.attrs.id!==t?!0:(n=o,r=i+1,!1)),!(n===void 0||r===void 0))return{node:n,posBeforeNode:r}}function rP(t){return t.type.isInGroup("bnBlock")}function Axe(t,e){return t.id!==e.id||t.type!==e.type||JSON.stringify(t.props)!==JSON.stringify(e.props)||JSON.stringify(t.content)!==JSON.stringify(e.content)}function Rxe(t){return t.getMeta("paste")?{type:"paste"}:t.getMeta("uiEvent")==="drop"?{type:"drop"}:t.getMeta("history$")?{type:t.getMeta("history$").redo?"redo":"undo"}:t.getMeta("y-sync$")?t.getMeta("y-sync$").isUndoRedoOperation?{type:"undo-redo"}:{type:"yjs-remote"}:{type:"local"}}function AB(t){const e={},n=Yo(t);return t.descendants((r,o)=>{if(rP(r)){const i=Txe(t,o);e[r.attrs.id]={block:jr(r,n),parentId:i}}return!0}),e}function Jq(t,e=[]){const n=Rxe(t),r=dO(t.before,[t,...e]),o=AB(r.before),i=AB(r.doc),s=[];return Object.keys(i).filter(a=>!(a in o)).forEach(a=>{s.push({type:"insert",block:i[a].block,source:n,prevBlock:void 0})}),Object.keys(o).filter(a=>!(a in i)).forEach(a=>{s.push({type:"delete",block:o[a].block,source:n,prevBlock:void 0})}),Object.keys(i).filter(a=>a in o).forEach(a=>{var l,c;const d=o[a],f=i[a];d.parentId!==f.parentId?s.push({type:"move",block:f.block,prevBlock:d.block,source:n,prevParent:d.parentId?(l=o[d.parentId])==null?void 0:l.block:void 0,currentParent:f.parentId?(c=i[f.parentId])==null?void 0:c.block:void 0}):Axe(d.block,f.block)&&s.push({type:"update",block:f.block,prevBlock:d.block,source:n})}),s}function Ixe(t,e,n,r="before"){const o=typeof n=="string"?n:n.id,i=Yo(t),s=e.map(c=>yp(c,i)),a=ta(o,t.doc);if(!a)throw new Error(`Block with ID ${o} not found`);let l=a.posBeforeNode;return r==="after"&&(l+=a.node.nodeSize),t.step(new go(l,l,new Ze(Le.from(s),0,0))),s.map(c=>jr(c,i))}function RB(t,e,n){const r=Yo(t),o=n.map(c=>yp(c,r)),i=new Set(e.map(c=>typeof c=="string"?c:c.id)),s=[],a=typeof e[0]=="string"?e[0]:e[0].id;let l=0;if(t.doc.descendants((c,d)=>{if(i.size===0)return!1;if(!c.type.isInGroup("bnBlock")||!i.has(c.attrs.id))return!0;if(s.push(jr(c,r)),i.delete(c.attrs.id),n.length>0&&c.attrs.id===a){const y=t.doc.nodeSize;t.insert(d,o);const b=t.doc.nodeSize;l+=y-b}const f=t.doc.nodeSize,p=t.doc.resolve(d-l);p.node().type.name==="blockGroup"&&p.node(p.depth-1).type.name!=="doc"&&p.node().childCount===1?t.delete(p.before(),p.after()):t.delete(d-l,d-l+c.nodeSize);const g=t.doc.nodeSize;return l+=f-g,!1}),i.size>0){const c=[...i].join(`
`);throw Error("Blocks with the following IDs could not be found in the editor: "+c)}return{insertedBlocks:o.map(c=>jr(c,r)),removedBlocks:s}}const Uo=(t,e)=>({tr:n,dispatch:r})=>(r&&eK(n,t,e),!0);function eK(t,e,n,r,o){const i=s0(t.doc.resolve(e)),s=Yo(t),a=s.nodes[i.blockNoteType],l=s.nodes[n.type||i.blockNoteType],c=l.isInGroup("bnBlock")?l:s.nodes.blockContainer;if(i.isBlockContainer&&l.isInGroup("blockContent"))IB(n,t,i),Mxe(n,t,a,l,i);else if(!i.isBlockContainer&&l.isInGroup("bnBlock"))IB(n,t,i);else{const d=jr(i.bnBlock.node,s);t.replaceWith(i.bnBlock.beforePos,i.bnBlock.afterPos,yp({children:d.children,...n},s));return}t.setNodeMarkup(i.bnBlock.beforePos,c,{...i.bnBlock.node.attrs,...n.props})}function Mxe(t,e,n,r,o,i,s){const a=Yo(e);let l="keep";if(t.content)if(typeof t.content=="string")l=Al([t.content],a,r.name);else if(Array.isArray(t.content))l=Al(t.content,a,r.name);else if(t.content.type==="tableContent")l=$x(t.content,a);else throw new Sc(t.content.type);else n.spec.content===""||r.spec.content!==n.spec.content&&(l=[]);l==="keep"?e.setNodeMarkup(o.blockContent.beforePos,r,{...o.blockContent.node.attrs,...t.props}):e.replaceWith(o.blockContent.beforePos,o.blockContent.afterPos,r.createChecked({...o.blockContent.node.attrs,...t.props},l))}function IB(t,e,n){const r=Yo(e);if(t.children!==void 0&&t.children.length>0){const o=t.children.map(i=>yp(i,r));if(n.childContainer)e.step(new go(n.childContainer.beforePos+1,n.childContainer.afterPos-1,new Ze(Le.from(o),0,0)));else{if(!n.isBlockContainer)throw new Error("impossible");e.insert(n.blockContent.afterPos,r.nodes.blockGroup.createChecked({},o))}}}function Nxe(t,e,n,r,o){const i=typeof e=="string"?e:e.id,s=ta(i,t.doc);if(!s)throw new Error(`Block with ID ${i} not found`);eK(t,s.posBeforeNode,n);const a=t.doc.resolve(s.posBeforeNode+1).node(),l=Yo(t);return jr(a,l)}function tK(t){const e=Array.from(t.classList).filter(n=>!n.startsWith("bn-"))||[];e.length>0?t.className=e.join(" "):t.removeAttribute("class")}function nK(t,e,n,r){let o;if(e)if(typeof e=="string")o=Al([e],t.pmSchema);else if(Array.isArray(e))o=Al(e,t.pmSchema);else if(e.type==="tableContent")o=$x(e,t.pmSchema);else throw new Sc(e.type);else throw new Error("blockContent is required");const i=n.serializeFragment(Le.from(o),r);return i.nodeType===1&&tK(i),i}function Oxe(t,e,n,r,o,i,s){var a,l,c,d,f,p,g,y;const b=s?.document??document,_=e.pmSchema.nodes.blockContainer;let k=n.props;if(!n.props){k={};for(const[D,R]of Object.entries(e.schema.blockSchema[n.type].propSchema))R.default!==void 0&&(k[D]=R.default)}const M=(l=(a=_.spec)==null?void 0:a.toDOM)==null?void 0:l.call(a,_.create({id:n.id,...k})),N=Array.from(M.dom.attributes),j=e.blockImplementations[n.type].implementation.toExternalHTML({...n,props:k},e),B=b.createDocumentFragment();if(j.dom.classList.contains("bn-block-content")){const D=[...N,...Array.from(j.dom.attributes)].filter(R=>R.name.startsWith("data")&&R.name!=="data-content-type"&&R.name!=="data-file-block"&&R.name!=="data-node-view-wrapper"&&R.name!=="data-node-type"&&R.name!=="data-id"&&R.name!=="data-index"&&R.name!=="data-editable");for(const R of D)j.dom.firstChild.setAttribute(R.name,R.value);tK(j.dom.firstChild),B.append(...Array.from(j.dom.childNodes))}else B.append(j.dom);if(j.contentDOM&&n.content){const D=nK(e,n.content,r,s);j.contentDOM.appendChild(D)}let F;if(o.has(n.type)?F="OL":i.has(n.type)&&(F="UL"),F){if(((c=t.lastChild)==null?void 0:c.nodeName)!==F){const R=b.createElement(F);F==="OL"&&k!=null&&k.start&&k?.start!==1&&R.setAttribute("start",k.start+""),t.append(R)}const D=b.createElement("li");D.append(B),t.lastChild.appendChild(D)}else t.append(B);if(n.children&&n.children.length>0){const D=b.createDocumentFragment();if(rK(D,e,n.children,r,o,i,s),((d=t.lastChild)==null?void 0:d.nodeName)==="UL"||((f=t.lastChild)==null?void 0:f.nodeName)==="OL")for(;((p=D.firstChild)==null?void 0:p.nodeName)==="UL"||((g=D.firstChild)==null?void 0:g.nodeName)==="OL";)t.lastChild.lastChild.appendChild(D.firstChild);e.pmSchema.nodes[n.type].isInGroup("blockContent")?t.append(D):(y=j.contentDOM)==null||y.append(D)}}const rK=(t,e,n,r,o,i,s)=>{for(const a of n)Oxe(t,e,a,r,o,i,s)},Pxe=(t,e,n,r,o,i)=>{const s=(i?.document??document).createDocumentFragment();return rK(s,t,e,n,r,o,i),s},Fx=(t,e)=>{const n=ju.fromSchema(t);return{exportBlocks:(r,o)=>{const i=Pxe(e,r,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),o),s=document.createElement("div");return s.append(i),s.innerHTML},exportInlineContent:(r,o)=>{const i=nK(e,r,n,o),s=document.createElement("div");return s.append(i.cloneNode(!0)),s.innerHTML}}};function Dxe(t,e,n,r,o){let i;if(e)if(typeof e=="string")i=Al([e],t.pmSchema,r);else if(Array.isArray(e))i=Al(e,t.pmSchema,r);else if(e.type==="tableContent")i=$x(e,t.pmSchema);else throw new Sc(e.type);else throw new Error("blockContent is required");return n.serializeFragment(Le.from(i),o)}function Lxe(t,e,n,r,o){var i,s,a,l,c;const d=t.pmSchema.nodes.blockContainer;let f=e.props;if(!e.props){f={};for(const[y,b]of Object.entries(t.schema.blockSchema[e.type].propSchema))b.default!==void 0&&(f[y]=b.default)}const p=t.blockImplementations[e.type].implementation.toInternalHTML({...e,props:f},t);if(e.type==="numberedListItem"&&p.dom.setAttribute("data-index",r.toString()),p.contentDOM&&e.content){const y=Dxe(t,e.content,n,e.type,o);p.contentDOM.appendChild(y)}if(t.pmSchema.nodes[e.type].isInGroup("bnBlock")){if(e.children&&e.children.length>0){const y=oK(t,e.children,n,o);(i=p.contentDOM)==null||i.append(y)}return p.dom}const g=(a=(s=d.spec)==null?void 0:s.toDOM)==null?void 0:a.call(s,d.create({id:e.id,...f}));return(l=g.contentDOM)==null||l.appendChild(p.dom),e.children&&e.children.length>0&&((c=g.contentDOM)==null||c.appendChild(iK(t,e.children,n,o))),g.dom}function oK(t,e,n,r){const o=(r?.document??document).createDocumentFragment();let i=0;for(const s of e){s.type==="numberedListItem"?i++:i=0;const a=Lxe(t,s,n,i,r);o.appendChild(a)}return o}const iK=(t,e,n,r)=>{var o;const i=t.pmSchema.nodes.blockGroup,s=i.spec.toDOM(i.create({})),a=oK(t,e,n,r);return(o=s.contentDOM)==null||o.appendChild(a),s.dom},Vxe=(t,e)=>{const n=ju.fromSchema(t);return{serializeBlocks:(r,o)=>iK(e,r,n,o).outerHTML}},Hx=(t,e)=>{const n=t.querySelector(e);if(!n)return;const r=t.querySelector("figcaption"),o=r?.textContent??void 0;return{targetElement:n,caption:o}},jxe=(t,e,n,r)=>{const o=document.createElement("div");o.className="bn-add-file-button";const i=document.createElement("div");i.className="bn-add-file-button-icon",r?i.appendChild(r):i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',o.appendChild(i);const s=document.createElement("p");s.className="bn-add-file-button-text",s.innerHTML=n||e.dictionary.file_blocks.file.add_button_text,o.appendChild(s);const a=c=>{c.preventDefault()},l=()=>{e.transact(c=>c.setMeta(e.filePanel.plugins[0],{block:t}))};return o.addEventListener("mousedown",a,!0),o.addEventListener("click",l,!0),{dom:o,destroy:()=>{o.removeEventListener("mousedown",a,!0),o.removeEventListener("click",l,!0)}}},Bxe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',$xe=t=>{const e=document.createElement("div");e.className="bn-file-name-with-icon";const n=document.createElement("div");n.className="bn-file-icon",n.innerHTML=Bxe,e.appendChild(n);const r=document.createElement("p");return r.className="bn-file-name",r.textContent=t.props.name,e.appendChild(r),{dom:e}},oP=(t,e,n,r,o)=>{const i=document.createElement("div");if(i.className="bn-file-block-content-wrapper",t.props.url===""){const a=jxe(t,e,r,o);i.appendChild(a.dom);const l=e.onUploadStart(c=>{if(c===t.id){i.removeChild(a.dom);const d=document.createElement("div");d.className="bn-file-loading-preview",d.textContent="Loading...",i.appendChild(d)}});return{dom:i,destroy:()=>{l(),a.destroy()}}}const s={dom:i};if(t.props.showPreview===!1||!n){const a=$xe(t);i.appendChild(a.dom),s.destroy=()=>{var l;(l=a.destroy)==null||l.call(a)}}else i.appendChild(n.dom);if(t.props.caption){const a=document.createElement("p");a.className="bn-file-caption",a.textContent=t.props.caption,i.appendChild(a)}return s},iP=(t,e)=>{const n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},Ux=(t,e)=>{const n=document.createElement("div"),r=document.createElement("p");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},MB=t=>({url:t.src||void 0}),Fxe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>',Hxe={backgroundColor:Br.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},sK={type:"audio",propSchema:Hxe,content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},Uxe=(t,e)=>{const n=document.createElement("div");n.innerHTML=Fxe;const r=document.createElement("audio");return r.className="bn-audio",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(o=>{r.src=o}):r.src=t.props.url,r.controls=!0,r.contentEditable="false",r.draggable=!1,oP(t,e,{dom:r},e.dictionary.file_blocks.audio.add_button_text,n.firstElementChild)},aK=t=>{if(t.tagName==="AUDIO")return t.closest("figure")?void 0:MB(t);if(t.tagName==="FIGURE"){const e=Hx(t,"audio");if(!e)return;const{targetElement:n,caption:r}=e;return{...MB(n),caption:r}}},zxe=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add audio",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("audio"),e.src=t.props.url):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?iP(e,t.props.caption):Ux(e,t.props.caption):{dom:e}},Gxe=Ug(sK,{render:Uxe,parse:aK,toExternalHTML:zxe}),NB=Symbol.for("blocknote.shikiParser"),jA=Symbol.for("blocknote.shikiHighlighterPromise"),qxe={language:{default:"text"}},Kxe=es({name:"codeBlock",content:"inline*",group:"blockContent",marks:"insertion deletion modification",code:!0,defining:!0,addOptions(){return{defaultLanguage:"text",indentLineWithTab:!0,supportedLanguages:{}}},addAttributes(){const t=this.options;return{language:{default:t.editor.settings.codeBlock.defaultLanguage,parseHTML:e=>{let n=e,r=null;n?.tagName==="DIV"&&n?.dataset.contentType==="codeBlock"&&(n=n.children[0]),n?.tagName==="PRE"&&(n=n?.children[0]);const o=n?.getAttribute("data-language");if(o)r=o.toLowerCase();else{const i=[...n?.className.split(" ")||[]].filter(s=>s.startsWith("language-")).map(s=>s.replace("language-",""));i.length>0&&(r=i[0].toLowerCase())}return r?BA(t.editor.settings.codeBlock,r)??r:null},renderHTML:e=>e.language?{class:`language-${e.language}`,"data-language":e.language}:{}}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:t}){var e,n;const r=document.createElement("pre"),{dom:o,contentDOM:i}=ea(this.name,"code",((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},{...((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{},...t});return o.removeChild(i),o.appendChild(r),r.appendChild(i),{dom:o,contentDOM:i}},addNodeView(){const t=this.options;return({editor:e,node:n,getPos:r,HTMLAttributes:o})=>{var i,s;const a=document.createElement("pre"),l=document.createElement("select"),c=document.createElement("div"),{dom:d,contentDOM:f}=ea(this.name,"code",{...((i=this.options.domAttributes)==null?void 0:i.blockContent)||{},...o},((s=this.options.domAttributes)==null?void 0:s.inlineContent)||{}),p=g=>{const y=g.target.value;e.commands.command(({tr:b})=>(b.setNodeAttribute(r(),"language",y),!0))};return Object.entries(t.editor.settings.codeBlock.supportedLanguages).forEach(([g,{name:y}])=>{const b=document.createElement("option");b.value=g,b.text=y,l.appendChild(b)}),c.contentEditable="false",l.value=n.attrs.language||t.editor.settings.codeBlock.defaultLanguage,d.removeChild(f),d.appendChild(c),d.appendChild(a),a.appendChild(f),c.appendChild(l),l.addEventListener("change",p),{dom:d,contentDOM:f,update:g=>g.type===this.type,destroy:()=>{l.removeEventListener("change",p)}}}},addProseMirrorPlugins(){const t=this.options,e=globalThis;let n,r;return[k0e({parser:o=>{if(!t.editor.settings.codeBlock.createHighlighter)return[];if(!n)return e[jA]=e[jA]||t.editor.settings.codeBlock.createHighlighter(),e[jA].then(s=>{n=s});const i=BA(t.editor.settings.codeBlock,o.language);return!i||i==="text"||i==="none"||i==="plaintext"||i==="txt"?[]:n.getLoadedLanguages().includes(i)?(r||(r=e[NB]||T0e(n),e[NB]=r),r(o)):n.loadLanguage(i)},languageExtractor:o=>o.attrs.language,nodeTypes:[this.name]})]},addInputRules(){const t=this.options;return[new yf({find:/^```(.*?)\s$/,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),i=r[1].trim(),s={language:BA(t.editor.settings.codeBlock,i)??i};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),this.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,this.type,s).setSelection(ft.create(e.tr.doc,n.from))}})]},addKeyboardShortcuts(){return{Delete:({editor:t})=>{const{selection:e}=t.state,{$from:n}=e;if(t.isActive(this.name)&&!n.parent.textContent&&xx(e)){const r=n.pos-n.parentOffset-2;return t.chain().setNodeSelection(r).deleteSelection().run(),!0}return!1},Tab:({editor:t})=>this.options.indentLineWithTab&&t.isActive(this.name)?(t.commands.insertContent("  "),!0):!1,Enter:({editor:t})=>{const{$from:e}=t.state.selection;if(!t.isActive(this.name))return!1;const n=e.parentOffset===e.parent.nodeSize-2,r=e.parent.textContent.endsWith(`

`);return!n||!r?(t.commands.insertContent(`
`),!0):t.chain().command(({tr:o})=>(o.delete(e.pos-2,e.pos),!0)).exitCode().run()},"Shift-Enter":({editor:t})=>{const{$from:e}=t.state.selection;return t.isActive(this.name)?(t.chain().insertContentAt(e.pos-e.parentOffset+e.parent.nodeSize,{type:"paragraph"}).run(),!0):!1}}}}),Wxe=za(Kxe,qxe);function BA(t,e){var n;return(n=Object.entries(t.supportedLanguages).find(([r,{aliases:o}])=>o?.includes(e)||r===e))==null?void 0:n[0]}const Yxe=Ko.create({name:"backgroundColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-background-color"),renderHTML:t=>({"data-background-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-background-color")?{stringValue:t.getAttribute("data-background-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),Xxe=bh(Yxe,"string"),Qxe=Ko.create({name:"textColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-text-color"),renderHTML:t=>({"data-text-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-text-color")?{stringValue:t.getAttribute("data-text-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),Zxe=bh(Qxe,"string"),OB=t=>({url:t.src||void 0}),Jxe={backgroundColor:Br.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},lK={type:"file",propSchema:Jxe,content:"none",isFileBlock:!0},eEe=(t,e)=>oP(t,e),cK=t=>{if(t.tagName==="EMBED")return t.closest("figure")?void 0:OB(t);if(t.tagName==="FIGURE"){const e=Hx(t,"embed");if(!e)return;const{targetElement:n,caption:r}=e;return{...OB(n),caption:r}}},tEe=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add file",{dom:n}}const e=document.createElement("a");return e.href=t.props.url,e.textContent=t.props.name||t.props.url,t.props.caption?Ux(e,t.props.caption):{dom:e}},nEe=Ug(lK,{render:eEe,parse:cK,toExternalHTML:tEe}),rEe={set:(t,e)=>window.localStorage.setItem(`toggle-${t.id}`,e?"true":"false"),get:t=>window.localStorage.getItem(`toggle-${t.id}`)==="true"},uK=(t,e,n,r=rEe)=>{if("isToggleable"in t.props&&!t.props.isToggleable)return{dom:n};const o=document.createElement("div"),i=document.createElement("div");i.className="bn-toggle-wrapper";const s=document.createElement("button");s.className="bn-toggle-button",s.type="button",s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="CURRENTCOLOR"><path d="M320-200v-560l440 280-440 280Z"/></svg>';const a=y=>y.preventDefault();s.addEventListener("mousedown",a);const l=()=>{var y;i.getAttribute("data-show-children")==="true"?(i.setAttribute("data-show-children","false"),r.set(e.getBlock(t),!1),o.contains(c)&&o.removeChild(c)):(i.setAttribute("data-show-children","true"),r.set(e.getBlock(t),!0),((y=e.getBlock(t))==null?void 0:y.children.length)===0&&!o.contains(c)&&o.appendChild(c))};s.addEventListener("click",l),i.appendChild(s),i.appendChild(n);const c=document.createElement("button");c.className="bn-toggle-add-block-button",c.type="button",c.textContent="Empty toggle. Click to add a block.";const d=y=>y.preventDefault();c.addEventListener("mousedown",d);const f=()=>{e.transact(()=>{const y=e.updateBlock(t,{children:[{}]});e.setTextCursorPosition(y.children[0].id,"end"),e.focus()})};c.addEventListener("click",f),o.appendChild(i);let p=t.children.length;const g=e.onChange(()=>{var y;const b=((y=e.getBlock(t))==null?void 0:y.children.length)??0;b>p?(i.getAttribute("data-show-children")==="false"&&(i.setAttribute("data-show-children","true"),r.set(e.getBlock(t),!0)),o.contains(c)&&o.removeChild(c)):b===0&&b<p&&(i.getAttribute("data-show-children")==="true"&&(i.setAttribute("data-show-children","false"),r.set(e.getBlock(t),!1)),o.contains(c)&&o.removeChild(c)),p=b});return r.get(t)?(i.setAttribute("data-show-children","true"),t.children.length===0&&o.appendChild(c)):i.setAttribute("data-show-children","false"),{dom:o,ignoreMutation:y=>y instanceof MutationRecord&&(y.type==="attributes"&&y.target===i&&y.attributeName==="data-show-children"||y.type==="childList"&&(y.addedNodes[0]===c||y.removedNodes[0]===c)),destroy:()=>{s.removeEventListener("mousedown",a),s.removeEventListener("click",l),c.removeEventListener("mousedown",d),c.removeEventListener("click",f),g?.()}}},oEe=[1,2,3,4,5,6],dK={...Br,level:{default:1,values:oEe},isToggleable:{default:!1}},iEe=es({name:"heading",content:"inline*",group:"blockContent",addAttributes(){return i0(dK)},addInputRules(){return[...this.options.editor.settings.heading.levels.map(t=>new yf({find:new RegExp(`^(#{${t}})\\s$`),handler:({state:e,chain:n,range:r})=>{const o=pr(e);!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||n().command(Uo(o.bnBlock.beforePos,{type:"heading",props:{level:t}})).deleteRange({from:r.from,to:r.to}).run()}}))]},addKeyboardShortcuts(){const t=this.options.editor;return Object.fromEntries(t.settings.heading.levels.map(e=>[`Mod-Alt-${e}`,()=>{const n=pr(this.editor.state);return!n.isBlockContainer||n.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Uo(n.bnBlock.beforePos,{type:"heading",props:{level:e}}))}]))},parseHTML(){const t=this.options.editor;return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},...t.settings.heading.levels.map(e=>({tag:`h${e}`,attrs:{level:e},node:"heading"}))]},renderHTML({node:t,HTMLAttributes:e}){var n,r;return ea(this.name,`h${t.attrs.level}`,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{})},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n})=>{var r,o;const{dom:i,contentDOM:s}=ea(this.name,`h${t.attrs.level}`,{...((r=this.options.domAttributes)==null?void 0:r.blockContent)||{},...e},((o=this.options.domAttributes)==null?void 0:o.inlineContent)||{});i.removeChild(s);const a=this.options.editor,l=Vx(n,a,this.editor,this.name),c=uK(l,a,s);return i.appendChild(c.dom),{dom:i,contentDOM:s,ignoreMutation:c.ignoreMutation,destroy:c.destroy}}}}),sEe=za(iEe,dK),sP=(t,e,n,r,o,i)=>{const{dom:s,destroy:a}=oP(t,e,n,o,i),l=s;t.props.url&&t.props.showPreview&&(t.props.previewWidth?l.style.width=`${t.props.previewWidth}px`:l.style.width="fit-content");const c=document.createElement("div");c.className="bn-resize-handle",c.style.left="4px";const d=document.createElement("div");d.className="bn-resize-handle",d.style.right="4px";let f,p=t.props.previewWidth;const g=N=>{var j,B;if(!f){!e.isEditable&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d));return}let F;t.props.textAlignment==="center"?f.handleUsed==="left"?F=f.initialWidth+(f.initialClientX-N.clientX)*2:F=f.initialWidth+(N.clientX-f.initialClientX)*2:f.handleUsed==="left"?F=f.initialWidth+f.initialClientX-N.clientX:F=f.initialWidth+N.clientX-f.initialClientX,p=Math.min(Math.max(F,64),((B=(j=e.domElement)==null?void 0:j.firstElementChild)==null?void 0:B.clientWidth)||Number.MAX_VALUE),l.style.width=`${p}px`},y=N=>{(!N.target||!l.contains(N.target)||!e.isEditable)&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d)),f&&(f=void 0,e.updateBlock(t,{props:{previewWidth:p}}))},b=()=>{e.isEditable&&(r.appendChild(c),r.appendChild(d))},_=N=>{N.relatedTarget===c||N.relatedTarget===d||f||e.isEditable&&r.contains(c)&&r.contains(d)&&(r.removeChild(c),r.removeChild(d))},k=N=>{N.preventDefault(),f={handleUsed:"left",initialWidth:l.clientWidth,initialClientX:N.clientX}},M=N=>{N.preventDefault(),f={handleUsed:"right",initialWidth:l.clientWidth,initialClientX:N.clientX}};return window.addEventListener("mousemove",g),window.addEventListener("mouseup",y),l.addEventListener("mouseenter",b),l.addEventListener("mouseleave",_),c.addEventListener("mousedown",k),d.addEventListener("mousedown",M),{dom:l,destroy:()=>{a?.(),window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",y),l.removeEventListener("mouseenter",b),l.removeEventListener("mouseleave",_),c.removeEventListener("mousedown",k),d.removeEventListener("mousedown",M)}}},PB=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},aEe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>',lEe={textAlignment:Br.textAlignment,backgroundColor:Br.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},fK={type:"image",propSchema:lEe,content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},cEe=(t,e)=>{const n=document.createElement("div");n.innerHTML=aEe;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("img");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(i=>{o.src=i}):o.src=t.props.url,o.alt=t.props.name||t.props.caption||"BlockNote image",o.contentEditable="false",o.draggable=!1,r.appendChild(o),sP(t,e,{dom:r},r,e.dictionary.file_blocks.image.add_button_text,n.firstElementChild)},hK=t=>{if(t.tagName==="IMG")return t.closest("figure")?void 0:PB(t);if(t.tagName==="FIGURE"){const e=Hx(t,"img");if(!e)return;const{targetElement:n,caption:r}=e;return{...PB(n),caption:r}}},uEe=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add image",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("img"),e.src=t.props.url,e.alt=t.props.name||t.props.caption||"BlockNote image",t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?iP(e,t.props.caption):Ux(e,t.props.caption):{dom:e}},dEe=Ug(fK,{render:cEe,parse:hK,toExternalHTML:uEe}),pK=(t,e,n)=>({state:r,dispatch:o})=>{const i=Lu(r.doc,t),s=xf(i);if(!s.isBlockContainer)throw new Error(`BlockContainer expected when calling splitBlock, position ${t}`);const a=[{type:s.bnBlock.node.type,attrs:n?{...s.bnBlock.node.attrs,id:void 0}:{}},{type:e?s.blockContent.node.type:r.schema.nodes.paragraph,attrs:n?{...s.blockContent.node.attrs}:{}}];return o&&r.tr.split(t,2,a),!0},zx=t=>{const{blockInfo:e,selectionEmpty:n}=t.transact(i=>({blockInfo:jx(i),selectionEmpty:i.selection.anchor===i.selection.head}));if(!e.isBlockContainer)return!1;const{bnBlock:r,blockContent:o}=e;return!(o.node.type.name==="toggleListItem"||o.node.type.name==="bulletListItem"||o.node.type.name==="numberedListItem"||o.node.type.name==="checkListItem")||!n?!1:t._tiptapEditor.commands.first(({state:i,chain:s,commands:a})=>[()=>a.command(()=>o.node.childCount===0?a.command(Uo(r.beforePos,{type:"paragraph",props:{}})):!1),()=>a.command(()=>o.node.childCount>0?(s().deleteSelection().command(pK(i.selection.from,!0)).run(),!0):!1)])},fEe={...Br},hEe=es({name:"toggleListItem",content:"inline*",group:"blockContent",priority:90,addKeyboardShortcuts(){return{Enter:()=>zx(this.options.editor),"Mod-Shift-6":()=>{const t=pr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Uo(t.bnBlock.beforePos,{type:"toggleListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"}]},renderHTML({HTMLAttributes:t}){var e,n;return ea(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({HTMLAttributes:t,getPos:e})=>{var n,r;const{dom:o,contentDOM:i}=ea(this.name,"p",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...t},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{}),s=this.options.editor,a=Vx(e,s,this.editor,this.name),l=uK(a,s,i);return o.appendChild(l.dom),{dom:o,contentDOM:i,ignoreMutation:l.ignoreMutation,destroy:l.destroy}}}}),pEe=za(hEe,fEe);function aP(t,e,n){var r,o,i;const s=Su.fromSchema(e),a=t,l=document.createElement("div");l.setAttribute("data-node-type","blockGroup");for(const g of Array.from(a.childNodes))l.appendChild(g.cloneNode(!0));let c=s.parse(l,{topNode:e.nodes.blockGroup.create()});((o=(r=c.firstChild)==null?void 0:r.firstChild)==null?void 0:o.type.name)==="checkListItem"&&(c=c.copy(c.content.cut(c.firstChild.firstChild.nodeSize+2)));const d=(i=c.firstChild)==null?void 0:i.firstChild;if(!(d!=null&&d.isTextblock))return Le.from(c);const f=e.nodes[n].create({},d.content),p=c.content.cut(d.nodeSize+2);if(p.size>0){const g=c.copy(p);return f.content.addToEnd(g)}return f.content}const mEe={...Br},gEe=es({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules(){return[new yf({find:new RegExp("^[-+*]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=pr(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||r.blockNoteType==="heading"||e().command(Uo(r.bnBlock.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>zx(this.options.editor),"Mod-Shift-8":()=>{const t=pr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Uo(t.bnBlock.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;return n===null?!1:n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"?{}:!1},getContent:(t,e)=>aP(t,e,this.name),node:"bulletListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return ea(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),yEe=za(gEe,mEe),mK={...Br,checked:{default:!1}},vEe=es({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes(){return i0(mK)},addInputRules(){return[new yf({find:new RegExp("\\[\\s*\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=pr(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Uo(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:n.from,to:n.to})}}),new yf({find:new RegExp("\\[[Xx]\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=pr(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Uo(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>zx(this.options.editor),"Mod-Shift-9":()=>{const t=pr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Uo(t.bnBlock.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"input",getAttrs:t=>typeof t=="string"||t.closest("[data-content-type]")||t.closest("li")?!1:t.type==="checkbox"?{checked:t.checked}:!1,node:"checkListItem"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;if(n===null)return!1;if(n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"){const r=t.querySelector("input[type=checkbox]")||null;return r===null?!1:{checked:r.checked}}return!1},getContent:(t,e)=>aP(t,e,this.name),node:"checkListItem"}]},renderHTML({node:t,HTMLAttributes:e}){var n,r;const o=document.createElement("input");o.type="checkbox",o.checked=t.attrs.checked,t.attrs.checked&&o.setAttribute("checked","");const{dom:i,contentDOM:s}=ea(this.name,"p",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{});return i.insertBefore(o,s),{dom:i,contentDOM:s}},addNodeView(){return({node:t,getPos:e,editor:n,HTMLAttributes:r})=>{var o,i;const s=document.createElement("div"),a=document.createElement("div");a.contentEditable="false";const l=document.createElement("input");l.type="checkbox",l.checked=t.attrs.checked,t.attrs.checked&&l.setAttribute("checked","");const c=()=>{if(!n.isEditable){l.checked=!l.checked;return}if(typeof e!="boolean"){const p=Lu(n.state.doc,e());if(p.node.type.name!=="blockContainer")throw new Error(`Expected blockContainer node, got ${p.node.type.name}`);this.editor.commands.command(Uo(p.posBeforeNode,{type:"checkListItem",props:{checked:l.checked}}))}};l.addEventListener("change",c);const{dom:d,contentDOM:f}=ea(this.name,"p",{...((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},...r},((i=this.options.domAttributes)==null?void 0:i.inlineContent)||{});if(typeof e!="boolean"){const p="label-"+this.editor.state.doc.resolve(e()).node().attrs.id;l.setAttribute("aria-labelledby",p),f.id=p}return d.removeChild(f),d.appendChild(s),s.appendChild(a),s.appendChild(f),a.appendChild(l),{dom:d,contentDOM:f,destroy:()=>{l.removeEventListener("change",c)}}}}}),bEe=za(vEe,mK),wEe=new Hn("numbered-list-indexing"),CEe=()=>new cn({key:wEe,appendTransaction:(t,e,n)=>{const r=n.tr;r.setMeta("numberedListIndexing",!0);let o=!1;return n.doc.descendants((i,s)=>{var a;if(i.type.name==="blockContainer"&&i.firstChild.type.name==="numberedListItem"){let l=`${i.firstChild.attrs.start||1}`;const c=xf({posBeforeNode:s,node:i});if(!c.isBlockContainer)throw new Error("impossible");const d=r.doc.resolve(c.bnBlock.beforePos).nodeBefore;if(d){const y=xf({posBeforeNode:c.bnBlock.beforePos-d.nodeSize,node:d});if(y.blockNoteType==="numberedListItem"){if(!y.isBlockContainer)throw new Error("impossible");const b=y.blockContent.node.attrs.index;l=(parseInt(b)+1).toString()}}const f=c.blockContent.node,p=f.attrs.index,g=((a=d?.firstChild)==null?void 0:a.type.name)!=="numberedListItem";if(p!==l||f.attrs.start&&!g){o=!0;const{start:y,...b}=f.attrs;r.setNodeMarkup(c.blockContent.beforePos,void 0,{...b,index:l,...typeof y=="number"&&g&&{start:y}})}}}),o?r:null}}),gK={...Br,start:{default:void 0,type:"number"}},SEe=es({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes(){return{...i0(gK),index:{default:null,parseHTML:t=>t.getAttribute("data-index"),renderHTML:t=>({"data-index":t.index})}}},addInputRules(){return[new yf({find:new RegExp("^(\\d+)\\.\\s$"),handler:({state:t,chain:e,range:n,match:r})=>{const o=pr(t);if(!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||o.blockNoteType==="numberedListItem"||o.blockNoteType==="heading")return;const i=parseInt(r[1]);e().command(Uo(o.bnBlock.beforePos,{type:"numberedListItem",props:i===1&&{}||{start:i}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>zx(this.options.editor),"Mod-Shift-7":()=>{const t=pr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Uo(t.bnBlock.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins(){return[CEe()]},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;if(n===null)return!1;if(n.tagName==="OL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="OL"){const r=parseInt(n.getAttribute("start")||"1")||1;return t.previousSibling||r===1?{}:{start:r}}return!1},getContent:(t,e)=>aP(t,e,this.name),priority:300,node:"numberedListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return ea(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),_Ee=za(SEe,gK),xEe={...Br},EEe=es({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts(){return{"Mod-Alt-0":()=>{const t=pr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Uo(t.bnBlock.beforePos,{type:"paragraph",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"p",getAttrs:t=>{var e;return typeof t=="string"||!((e=t.textContent)!=null&&e.trim())?!1:{}},node:"paragraph"}]},renderHTML({HTMLAttributes:t}){var e,n;return ea(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),kEe=za(EEe,xEe),TEe={...Br},AEe=es({name:"quote",content:"inline*",group:"blockContent",addInputRules(){return[new yf({find:new RegExp("^>\\s$"),handler:({state:t,chain:e,range:n})=>{const r=pr(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Uo(r.bnBlock.beforePos,{type:"quote",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{"Mod-Alt-q":()=>{const t=pr(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Uo(t.bnBlock.beforePos,{type:"quote"}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"blockquote",node:"quote"}]},renderHTML({HTMLAttributes:t}){var e,n;return ea(this.name,"blockquote",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),REe=za(AEe,TEe),IEe=35,lP=120,MEe=31,NEe=yr.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[O1e({cellMinWidth:IEe,defaultCellMinWidth:lP,View:null}),U1e()],addKeyboardShortcuts(){return{Enter:()=>this.editor.state.selection.empty&&this.editor.state.selection.$head.parent.type.name==="tableParagraph"?(this.editor.commands.insertContent({type:"hardBreak"}),!0):!1,Backspace:()=>{const t=this.editor.state.selection,e=t.empty,n=t.$head.parentOffset===0,r=t.$head.node().type.name==="tableParagraph";return e&&n&&r},Tab:()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>I6(1)(t,e,n)),"Shift-Tab":()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>I6(-1)(t,e,n))}},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:_n(gt(t,"tableRole",e))}}}),OEe={textColor:Br.textColor},PEe=es({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:t}){var e,n;return ea(this.name,"table",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({node:t,HTMLAttributes:e})=>{var n;class r extends yG{constructor(i,s,a){super(i,s),this.node=i,this.cellMinWidth=s,this.blockContentHTMLAttributes=a;const l=document.createElement("div");l.className=Er("bn-block-content",a.class),l.setAttribute("data-content-type","table");for(const[p,g]of Object.entries(a))p!=="class"&&l.setAttribute(p,g);const c=this.dom,d=document.createElement("div");d.className="tableWrapper-inner",d.appendChild(c.firstChild),c.appendChild(d),l.appendChild(c);const f=document.createElement("div");f.className="table-widgets-container",f.style.position="relative",c.appendChild(f),this.dom=l}ignoreMutation(i){return!i.target.closest(".tableWrapper-inner")||super.ignoreMutation(i)}}return new r(t,lP,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e})}}}),DEe=es({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML(){return[{tag:"p",getAttrs:t=>{if(typeof t=="string"||!t.textContent||!t.closest("[data-content-type]"))return!1;const e=t.parentElement;return e===null?!1:e.tagName==="TD"||e.tagName==="TH"?{}:!1},node:"tableParagraph"}]},renderHTML({HTMLAttributes:t}){return["p",t,0]}}),LEe=Tc.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",Zs(this.options.HTMLAttributes,t),0]}});function DB(t,e){const n=Su.fromSchema(e).parse(t,{topNode:e.nodes.blockGroup.create()}),r=[];return n.content.descendants(o=>{if(o.isInline)return r.push(o),!1}),Le.fromArray(r)}const VEe=za(PEe,OEe,[NEe,DEe,K0e.extend({content:"tableContent+",parseHTML(){return[{tag:"th",getContent:(t,e)=>DB(t,e)}]}}),q0e.extend({content:"tableContent+",parseHTML(){return[{tag:"td",getContent:(t,e)=>DB(t,e)}]}}),LEe]),LB=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},jEe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>',BEe={textAlignment:Br.textAlignment,backgroundColor:Br.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},yK={type:"video",propSchema:BEe,content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},$Ee=(t,e)=>{const n=document.createElement("div");n.innerHTML=jEe;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("video");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(i=>{o.src=i}):o.src=t.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,o.width=t.props.previewWidth,r.appendChild(o),sP(t,e,{dom:r},r,e.dictionary.file_blocks.video.add_button_text,n.firstElementChild)},vK=t=>{if(t.tagName==="VIDEO")return t.closest("figure")?void 0:LB(t);if(t.tagName==="FIGURE"){const e=Hx(t,"video");if(!e)return;const{targetElement:n,caption:r}=e;return{...LB(n),caption:r}}},FEe=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add video",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("video"),e.src=t.props.url,t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?iP(e,t.props.caption):Ux(e,t.props.caption):{dom:e}},HEe=Ug(yK,{render:$Ee,parse:vK,toExternalHTML:FEe}),Gx={paragraph:kEe,heading:sEe,quote:REe,codeBlock:Wxe,toggleListItem:pEe,bulletListItem:yEe,numberedListItem:_Ee,checkListItem:bEe,table:VEe,file:nEe,image:dEe,video:HEe,audio:Gxe},UEe=Fq(Gx),qx={bold:bh(O0e,"boolean"),italic:bh(F0e,"boolean"),underline:bh(G0e,"boolean"),strike:bh(z0e,"boolean"),code:bh(L0e,"boolean"),textColor:Zxe,backgroundColor:Xxe};Wq(qx);const bK={text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}},zEe=qq(bK);function Ti(t,e){return t in e.schema.blockSchema&&e.schema.blockSchema[t]===UEe[t]}function GEe(t,e){return t in e.schema.inlineContentSchema&&e.schema.inlineContentSchema[t]===zEe[t]}function qEe(t,e,n){return e.type===t&&e.type in n.schema.blockSchema&&Ti(e.type,n)}function l0(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock||!1}function KEe(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock&&"showPreview"in e.schema.blockSchema[t.type].propSchema||!1}function c0(t,e){return e.schema.blockSchema[t.type].isFileBlock&&!t.props.url}function xm(t,e,n){return e in n.schema.blockSchema&&t in n.schema.blockSchema[e].propSchema&&n.schema.blockSchema[e].propSchema[t]===Br[t]}function _I(t,e,n){return xm(t,e.type,n)}function xI(t){return t instanceof fr}function WEe(t){let e=t.getTextCursorPosition().block,n=t.schema.blockSchema[e.type].content;for(;n==="none";){if(e=t.getTextCursorPosition().nextBlock,e===void 0)return;n=t.schema.blockSchema[e.type].content,t.setTextCursorPosition(e,"end")}}function qr(t,e){const n=t.getTextCursorPosition().block;if(n.content===void 0)throw new Error("Slash Menu open in a block that doesn't contain content.");let r;return Array.isArray(n.content)&&(n.content.length===1&&rp(n.content[0])&&n.content[0].type==="text"&&n.content[0].text==="/"||n.content.length===0)?(r=t.updateBlock(n,e),t.setTextCursorPosition(r)):(r=t.insertBlocks([e],n,"after")[0],t.setTextCursorPosition(t.getTextCursorPosition().nextBlock)),WEe(t),r}function YEe(t){const e=[];return Ti("heading",t)&&e.push({onItemClick:()=>{qr(t,{type:"heading",props:{level:1}})},badge:Gs("Mod-Alt-1"),key:"heading",...t.dictionary.slash_menu.heading},{onItemClick:()=>{qr(t,{type:"heading",props:{level:2}})},badge:Gs("Mod-Alt-2"),key:"heading_2",...t.dictionary.slash_menu.heading_2},{onItemClick:()=>{qr(t,{type:"heading",props:{level:3}})},badge:Gs("Mod-Alt-3"),key:"heading_3",...t.dictionary.slash_menu.heading_3}),Ti("quote",t)&&e.push({onItemClick:()=>{qr(t,{type:"quote"})},key:"quote",...t.dictionary.slash_menu.quote}),Ti("toggleListItem",t)&&e.push({onItemClick:()=>{qr(t,{type:"toggleListItem"})},badge:Gs("Mod-Shift-6"),key:"toggle_list",...t.dictionary.slash_menu.toggle_list}),Ti("numberedListItem",t)&&e.push({onItemClick:()=>{qr(t,{type:"numberedListItem"})},badge:Gs("Mod-Shift-7"),key:"numbered_list",...t.dictionary.slash_menu.numbered_list}),Ti("bulletListItem",t)&&e.push({onItemClick:()=>{qr(t,{type:"bulletListItem"})},badge:Gs("Mod-Shift-8"),key:"bullet_list",...t.dictionary.slash_menu.bullet_list}),Ti("checkListItem",t)&&e.push({onItemClick:()=>{qr(t,{type:"checkListItem"})},badge:Gs("Mod-Shift-9"),key:"check_list",...t.dictionary.slash_menu.check_list}),Ti("paragraph",t)&&e.push({onItemClick:()=>{qr(t,{type:"paragraph"})},badge:Gs("Mod-Alt-0"),key:"paragraph",...t.dictionary.slash_menu.paragraph}),Ti("codeBlock",t)&&e.push({onItemClick:()=>{qr(t,{type:"codeBlock"})},badge:Gs("Mod-Alt-c"),key:"code_block",...t.dictionary.slash_menu.code_block}),Ti("table",t)&&e.push({onItemClick:()=>{qr(t,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...t.dictionary.slash_menu.table}),Ti("image",t)&&e.push({onItemClick:()=>{const n=qr(t,{type:"image"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"image",...t.dictionary.slash_menu.image}),Ti("video",t)&&e.push({onItemClick:()=>{const n=qr(t,{type:"video"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"video",...t.dictionary.slash_menu.video}),Ti("audio",t)&&e.push({onItemClick:()=>{const n=qr(t,{type:"audio"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"audio",...t.dictionary.slash_menu.audio}),Ti("file",t)&&e.push({onItemClick:()=>{const n=qr(t,{type:"file"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"file",...t.dictionary.slash_menu.file}),Ti("heading",t)&&(e.push({onItemClick:()=>{qr(t,{type:"heading",props:{level:1,isToggleable:!0}})},key:"toggle_heading",...t.dictionary.slash_menu.toggle_heading},{onItemClick:()=>{qr(t,{type:"heading",props:{level:2,isToggleable:!0}})},key:"toggle_heading_2",...t.dictionary.slash_menu.toggle_heading_2},{onItemClick:()=>{qr(t,{type:"heading",props:{level:3,isToggleable:!0}})},key:"toggle_heading_3",...t.dictionary.slash_menu.toggle_heading_3}),t.settings.heading.levels.filter(n=>n>3).forEach(n=>{e.push({onItemClick:()=>{qr(t,{type:"heading",props:{level:n}})},key:`heading_${n}`,...t.dictionary.slash_menu[`heading_${n}`]})})),e.push({onItemClick:()=>{t.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...t.dictionary.slash_menu.emoji}),e}function wK(t,e){return t.filter(({title:n,aliases:r})=>n.toLowerCase().includes(e.toLowerCase())||r&&r.filter(o=>o.toLowerCase().includes(e.toLowerCase())).length!==0)}function $A(t){return t&&Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}let Kx=class CK{constructor(e){Ee(this,"blockSpecs"),Ee(this,"inlineContentSpecs"),Ee(this,"styleSpecs"),Ee(this,"blockSchema"),Ee(this,"inlineContentSchema"),Ee(this,"styleSchema"),Ee(this,"BlockNoteEditor","only for types"),Ee(this,"Block","only for types"),Ee(this,"PartialBlock","only for types"),this.blockSpecs=$A(e?.blockSpecs)||Gx,this.inlineContentSpecs=$A(e?.inlineContentSpecs)||bK,this.styleSpecs=$A(e?.styleSpecs)||qx,this.blockSchema=Fq(this.blockSpecs),this.inlineContentSchema=qq(this.inlineContentSpecs),this.styleSchema=Wq(this.styleSpecs)}static create(e){return new CK(e)}};const XEe={type:"pageBreak",propSchema:{},content:"none",isFileBlock:!1,isSelectable:!1},QEe=()=>{const t=document.createElement("div");return t.className="bn-page-break",t.setAttribute("data-page-break",""),{dom:t}},ZEe=t=>{if(t.tagName==="DIV"&&t.hasAttribute("data-page-break"))return{type:"pageBreak"}},JEe=()=>{const t=document.createElement("div");return t.setAttribute("data-page-break",""),{dom:t}},eke=Ug(XEe,{render:QEe,parse:ZEe,toExternalHTML:JEe});Kx.create({blockSpecs:{pageBreak:eke}});function tke(t){return t.transact(e=>{const n=Lu(e.doc,e.selection.anchor);if(e.selection instanceof fr)return{type:"cell",anchorBlockId:n.node.attrs.id,anchorCellOffset:e.selection.$anchorCell.pos-n.posBeforeNode,headCellOffset:e.selection.$headCell.pos-n.posBeforeNode};if(e.selection instanceof vt)return{type:"node",anchorBlockId:n.node.attrs.id};{const r=Lu(e.doc,e.selection.head);return{type:"text",anchorBlockId:n.node.attrs.id,headBlockId:r.node.attrs.id,anchorOffset:e.selection.anchor-n.posBeforeNode,headOffset:e.selection.head-r.posBeforeNode}}})}function nke(t,e){var n,r;const o=(n=ta(e.anchorBlockId,t.doc))==null?void 0:n.posBeforeNode;if(o===void 0)throw new Error(`Could not find block with ID ${e.anchorBlockId} to update selection`);let i;if(e.type==="cell")i=fr.create(t.doc,o+e.anchorCellOffset,o+e.headCellOffset);else if(e.type==="node")i=vt.create(t.doc,o+1);else{const s=(r=ta(e.headBlockId,t.doc))==null?void 0:r.posBeforeNode;if(s===void 0)throw new Error(`Could not find block with ID ${e.headBlockId} to update selection`);i=ft.create(t.doc,o+e.anchorOffset,s+e.headOffset)}t.setSelection(i)}function EI(t){return t.map(e=>e.type==="columnList"?e.children.map(n=>EI(n.children)).flat():{...e,children:EI(e.children)}).flat()}function SK(t,e,n){t.transact(r=>{var o;const i=((o=t.getSelection())==null?void 0:o.blocks)||[t.getTextCursorPosition().block],s=tke(t);t.removeBlocks(i),t.insertBlocks(EI(i),e,n),nke(r,s)})}function _K(t){return!t||t.type!=="columnList"}function xK(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[e.children.length-1],o="after"):(r=e,o="before"):n&&(r=n,o="before"),!r||!o)return;const i=t.getParentBlock(r);return _K(i)?{referenceBlock:r,placement:o}:xK(t,o==="after"?r:t.getPrevBlock(r),i)}function EK(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[0],o="before"):(r=e,o="after"):n&&(r=n,o="after"),!r||!o)return;const i=t.getParentBlock(r);return _K(i)?{referenceBlock:r,placement:o}:EK(t,o==="before"?r:t.getNextBlock(r),i)}function rke(t){t.transact(()=>{const e=t.getSelection(),n=e?.blocks[0]||t.getTextCursorPosition().block,r=xK(t,t.getPrevBlock(n),t.getParentBlock(n));r&&SK(t,r.referenceBlock,r.placement)})}function oke(t){t.transact(()=>{const e=t.getSelection(),n=e?.blocks[e?.blocks.length-1]||t.getTextCursorPosition().block,r=EK(t,t.getNextBlock(n),t.getParentBlock(n));r&&SK(t,r.referenceBlock,r.placement)})}function ike(t,e,n){const{$from:r,$to:o}=t.selection,i=r.blockRange(o,g=>g.childCount>0&&(g.type.name==="blockGroup"||g.type.name==="column"));if(!i)return!1;const s=i.startIndex;if(s===0)return!1;const a=i.parent.child(s-1);if(a.type!==e)return!1;const l=a.lastChild&&a.lastChild.type===n,c=Le.from(l?e.create():null),d=new Ze(Le.from(e.create(null,Le.from(n.create(null,c)))),l?3:1,0),f=i.start,p=i.end;return t.step(new ao(f-(l?3:1),p,f,p,d,1,!0)).scrollIntoView(),!0}function kK(t){return t.transact(e=>ike(e,t.pmSchema.nodes.blockContainer,t.pmSchema.nodes.blockGroup))}function ske(t){t._tiptapEditor.commands.liftListItem("blockContainer")}function ake(t){return t.transact(e=>{const{bnBlock:n}=jx(e);return e.doc.resolve(n.beforePos).nodeBefore!==null})}function lke(t){return t.transact(e=>{const{bnBlock:n}=jx(e);return e.doc.resolve(n.beforePos).depth>1})}function cke(t,e){const n=typeof e=="string"?e:e.id,r=Yo(t),o=ta(n,t);if(o)return jr(o.node,r)}function uke(t,e){const n=typeof e=="string"?e:e.id,r=ta(n,t),o=Yo(t);if(!r)return;const i=t.resolve(r.posBeforeNode).nodeBefore;if(i)return jr(i,o)}function dke(t,e){const n=typeof e=="string"?e:e.id,r=ta(n,t),o=Yo(t);if(!r)return;const i=t.resolve(r.posBeforeNode+r.node.nodeSize).nodeAfter;if(i)return jr(i,o)}function fke(t,e){const n=typeof e=="string"?e:e.id,r=Yo(t),o=ta(n,t);if(!o)return;const i=t.resolve(o.posBeforeNode),s=i.node(),a=i.node(-1),l=a.type.name!=="doc"?s.type.name==="blockGroup"?a:s:void 0;if(l)return jr(l,r)}function hke(t,e,n,r={updateSelection:!0}){let{from:o,to:i}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},s=!0,a=!0,l="";if(n.forEach(c=>{c.check(),s&&c.isText&&c.marks.length===0?l+=c.text:s=!1,a=a?c.isBlock:!1}),o===i&&a){const{parent:c}=t.doc.resolve(o);c.isTextblock&&!c.type.spec.code&&!c.childCount&&(o-=1,i+=1)}return s?t.insertText(l,o,i):t.replaceWith(o,i,n),r.updateSelection&&Wz(t,t.steps.length-1,-1),!0}function pke(t){const e=Yo(t);if(t.selection.empty||"node"in t.selection)return;const n=t.doc.resolve(Lu(t.doc,t.selection.from).posBeforeNode),r=t.doc.resolve(Lu(t.doc,t.selection.to).posBeforeNode),o=(c,d)=>{const f=n.posAtIndex(c,d),p=t.doc.resolve(f).nodeAfter;if(!p)throw new Error(`Error getting selection - node not found at position ${f}`);return jr(p,e)},i=[],s=n.sharedDepth(r.pos),a=n.index(s),l=r.index(s);if(n.depth>s){i.push(jr(n.nodeAfter,e));for(let c=n.depth;c>s;c--)if(n.node(c).type.isInGroup("childContainer")){const d=n.index(c)+1,f=n.node(c).childCount;for(let p=d;p<f;p++)i.push(o(p,c))}}else i.push(o(a,s));for(let c=a+1;c<=l;c++)i.push(o(c,s));if(i.length===0)throw new Error(`Error getting selection - selection doesn't span any blocks (${t.selection})`);return{blocks:i}}function mke(t,e,n){const r=typeof e=="string"?e:e.id,o=typeof n=="string"?n:n.id,i=Yo(t),s=a0(i);if(r===o)throw new Error(`Attempting to set selection with the same anchor and head blocks (id ${r})`);const a=ta(r,t.doc);if(!a)throw new Error(`Block with ID ${r} not found`);const l=ta(o,t.doc);if(!l)throw new Error(`Block with ID ${o} not found`);const c=xf(a),d=xf(l),f=s.blockSchema[c.blockNoteType],p=s.blockSchema[d.blockNoteType];if(!c.isBlockContainer||f.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${r})`);if(!d.isBlockContainer||p.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${o})`);let g,y;if(f.content==="table"){const b=Pr.get(c.blockContent.node);g=c.blockContent.beforePos+b.positionAt(0,0,c.blockContent.node)+1+2}else g=c.blockContent.beforePos+1;if(p.content==="table"){const b=Pr.get(d.blockContent.node),_=d.blockContent.beforePos+b.positionAt(b.height-1,b.width-1,d.blockContent.node)+1,k=t.doc.resolve(_).nodeAfter.nodeSize;y=_+k-2}else y=d.blockContent.afterPos-1;t.setSelection(ft.create(t.doc,g,y))}function gke(t){const e=Yo(t);let n=t.selection.$from,r=t.selection.$to;for(;r.parentOffset>=r.parent.nodeSize-2&&r.depth>0;)r=t.doc.resolve(r.pos+1);for(;r.parentOffset===0&&r.depth>0;)r=t.doc.resolve(r.pos-1);for(;n.parentOffset===0&&n.depth>0;)n=t.doc.resolve(n.pos-1);for(;n.parentOffset>=n.parent.nodeSize-2&&n.depth>0;)n=t.doc.resolve(n.pos+1);const o=yxe(t.doc.slice(n.pos,r.pos,!0),e);return{_meta:{startPos:n.pos,endPos:r.pos},...o}}function yke(t){const{bnBlock:e}=jx(t),n=Yo(t.doc),r=t.doc.resolve(e.beforePos),o=r.nodeBefore,i=t.doc.resolve(e.afterPos).nodeAfter;let s;return r.depth>1&&(s=r.node(),s.type.isInGroup("bnBlock")||(s=r.node(r.depth-1))),{block:jr(e.node,n),prevBlock:o===null?void 0:jr(o,n),nextBlock:i===null?void 0:jr(i,n),parentBlock:s===void 0?void 0:jr(s,n)}}function TK(t,e,n="start"){const r=typeof e=="string"?e:e.id,o=Yo(t.doc),i=a0(o),s=ta(r,t.doc);if(!s)throw new Error(`Block with ID ${r} not found`);const a=xf(s),l=i.blockSchema[a.blockNoteType].content;if(a.isBlockContainer){const c=a.blockContent;if(l==="none"){t.setSelection(vt.create(t.doc,c.beforePos));return}if(l==="inline")n==="start"?t.setSelection(ft.create(t.doc,c.beforePos+1)):t.setSelection(ft.create(t.doc,c.afterPos-1));else if(l==="table")n==="start"?t.setSelection(ft.create(t.doc,c.beforePos+4)):t.setSelection(ft.create(t.doc,c.afterPos-4));else throw new Sc(l)}else{const c=n==="start"?a.childContainer.node.firstChild:a.childContainer.node.lastChild;TK(t,c.attrs.id,n)}}let Em;async function cP(){if(Em)return Em;const t=await Promise.all([et(()=>import("./index-DtSaFv5-.js"),__vite__mapDeps([0,1,2,3,4])),et(()=>import("./index-C_L-DuGf.js"),[]),et(()=>import("./index-Bi9pQyAn.js"),__vite__mapDeps([5,1,2])),et(()=>import("./index-BETa0OU2.js"),__vite__mapDeps([6,4])),et(()=>import("./index-CxCem7FE.js"),__vite__mapDeps([7,8,9,10,11,12,13])),et(()=>import("./index-D1Tv6cKP.js"),__vite__mapDeps([14,15,16,17,3,10,18,12,13,11])),et(()=>import("./index-Bk8jjY8w.js"),__vite__mapDeps([19,18,17,16,12,10,13,11,20])),et(()=>import("./index-BxE2facF.js"),__vite__mapDeps([21,20,15,16,17,2,13])),et(()=>import("./index-DoJwJBw7.js"),__vite__mapDeps([22,8,16,12,10])),et(()=>import("./index-BHfU2CIP.js"),__vite__mapDeps([23,9,10]))]);return Em={rehypeParse:t[0],rehypeStringify:t[1],unified:t[2],hastUtilFromDom:t[3],rehypeRemark:t[4],remarkGfm:t[5],remarkStringify:t[6],remarkParse:t[7],remarkRehype:t[8],rehypeFormat:t[9]},Em}function vke(){const t=e=>{let n=e.children.length;for(let r=0;r<n;r++){const o=e.children[r];if(o.type==="element"&&(t(o),o.tagName==="u"))if(o.children.length>0){e.children.splice(r,1,...o.children);const i=o.children.length-1;n+=i,r+=i}else e.children.splice(r,1),n--,r--}};return t}function bke(){const t=Em;if(!t)throw new Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");const e=n=>{var r;if(n.children&&"length"in n.children&&n.children.length)for(let o=n.children.length-1;o>=0;o--){const i=n.children[o],s=o+1<n.children.length?n.children[o+1]:void 0;i.type==="element"&&i.tagName==="input"&&((r=i.properties)==null?void 0:r.type)==="checkbox"&&s?.type==="element"&&s.tagName==="p"?(s.tagName="span",s.children.splice(0,0,t.hastUtilFromDom.fromDom(document.createTextNode(" ")))):e(i)}};return e}function uP(t){const e=Em;if(!e)throw new Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return e.unified.unified().use(e.rehypeParse.default,{fragment:!0}).use(vke).use(bke).use(e.rehypeRemark.default).use(e.remarkGfm.default).use(e.remarkStringify.default,{handlers:{text:n=>n.value}}).processSync(t).value}async function wke(t,e,n,r){await cP();const o=Fx(e,n).exportBlocks(t,r);return uP(o)}function Cke(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function Ske(t){return t.nodeType===3&&!/\S/.test(t.nodeValue||"")}function _ke(t){t.querySelectorAll("li > ul, li > ol").forEach(e=>{const n=Cke(e),r=e.parentElement,o=Array.from(r.childNodes).slice(n+1);e.remove(),o.forEach(i=>{i.remove()}),r.insertAdjacentElement("afterend",e),o.reverse().forEach(i=>{if(Ske(i))return;const s=document.createElement("li");s.append(i),e.insertAdjacentElement("afterend",s)}),r.childNodes.length===0&&r.remove()})}function xke(t){t.querySelectorAll("li + ul, li + ol").forEach(e=>{var n,r;const o=e.previousElementSibling,i=document.createElement("div");o.insertAdjacentElement("afterend",i),i.append(o);const s=document.createElement("div");for(s.setAttribute("data-node-type","blockGroup"),i.append(s);((n=i.nextElementSibling)==null?void 0:n.nodeName)==="UL"||((r=i.nextElementSibling)==null?void 0:r.nodeName)==="OL";)s.append(i.nextElementSibling)})}let VB=null;function Eke(){return VB||(VB=document.implementation.createHTMLDocument("title"))}function AK(t){if(typeof t=="string"){const e=Eke().createElement("div");e.innerHTML=t,t=e}return _ke(t),xke(t),t}async function RK(t,e){const n=AK(t),r=Su.fromSchema(e).parse(n,{topNode:e.nodes.blockGroup.create()}),o=[];for(let i=0;i<r.childCount;i++)o.push(jr(r.child(i),e));return o}function kke(t,e){const n=e.value?e.value:"",r={};e.lang&&(r["data-language"]=e.lang);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}async function IK(t){const e=await cP();return e.unified.unified().use(e.remarkParse.default).use(e.remarkGfm.default).use(e.remarkRehype.default,{handlers:{...e.remarkRehype.defaultHandlers,code:kke}}).use(e.rehypeStringify.default).processSync(t).value}async function Tke(t,e){const n=await IK(t);return RK(n,e)}const dP=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function Ake(t,e){if(!t.startsWith(".")||!e.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return t===e}function Rke(t,e){const n=t.split("/"),r=e.split("/");if(n.length!==2)throw new Error(`The string ${t} is not a valid MIME type.`);if(r.length!==2)throw new Error(`The string ${e} is not a valid MIME type.`);return n[1]==="*"||r[1]==="*"?n[0]===r[0]:(n[0]==="*"||r[0]==="*"||n[0]===r[0])&&n[1]===r[1]}function jB(t,e,n){let r;return Array.isArray(e.content)&&e.content.length===0?r=t.updateBlock(e,n).id:r=t.insertBlocks([n],e,"after")[0].id,r}async function MK(t,e){var n;if(!e.uploadFile){console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");return}const r="dataTransfer"in t?t.dataTransfer:t.clipboardData;if(r===null)return;let o=null;for(const a of dP)if(r.types.includes(a)){o=a;break}if(o!=="Files")return;const i=r.items;if(!i)return;t.preventDefault();const s=Object.values(e.schema.blockSchema).filter(a=>a.isFileBlock);for(let a=0;a<i.length;a++){let l="file";for(const d of s)for(const f of d.fileBlockAccept||[]){const p=f.startsWith("."),g=i[a].getAsFile();if(g&&(!p&&g.type&&Rke(i[a].type,f)||p&&Ake("."+g.name.split(".").pop(),f))){l=d.type;break}}const c=i[a].getAsFile();if(c){const d={type:l,props:{name:c.name}};let f;if(t.type==="paste"){const y=e.getTextCursorPosition().block;f=jB(e,y,d)}else if(t.type==="drop"){const y={left:t.clientX,top:t.clientY},b=(n=e.prosemirrorView)==null?void 0:n.posAtCoords(y);if(!b)return;f=e.transact(_=>{const k=Lu(_.doc,b.pos);return jB(e,e.getBlock(k.node.attrs.id),d)})}else return;const p=await e.uploadFile(c,f),g=typeof p=="string"?{props:{url:p}}:{...p};e.updateBlock(f,g)}}}const Ike=t=>yr.create({name:"dropFile",addProseMirrorPlugins(){return[new cn({props:{handleDOMEvents:{drop(e,n){if(!t.isEditable)return;let r=null;for(const o of dP)if(n.dataTransfer.types.includes(o)){r=o;break}return r===null?!0:r==="Files"?(MK(n,t),!0):!1}}}})]}}),Mke=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,Nke=/(_|__|\*|\*\*|~~|==|\+\+)(?!\s)(?:[^\s](?:.{0,62}[^\s])?|\S)(?=\1)/,Oke=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,Pke=/(?:\s|^)`(?!\s)(?:[^\s`](?:[^`]{0,46}[^\s`])?|[^\s`])`([^\w]|$)/,Dke=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,Lke=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,Vke=/\n{2} {0,3}-{2,48}\n{2}/,jke=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,Bke=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,$ke=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,Fke=/^\s*\|(.+\|)+\s*$/m,Hke=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,Uke=/^\s*\|(.+\|)+\s*$/m,zke=t=>Mke.test(t)||Nke.test(t)||Oke.test(t)||Pke.test(t)||Dke.test(t)||Lke.test(t)||Vke.test(t)||jke.test(t)||Bke.test(t)||$ke.test(t)||Fke.test(t)||Hke.test(t)||Uke.test(t);async function Gke(t,e){const{schema:n}=e.state;if(!t.clipboardData)return!1;const r=t.clipboardData.getData("text/plain");if(!r)return!1;if(!n.nodes.codeBlock)return e.pasteText(r),!0;const o=t.clipboardData.getData("vscode-editor-data"),i=o?JSON.parse(o):void 0,s=i?.mode;return s?(e.pasteHTML(`<pre><code class="language-${s}">${r.replace(/\r\n?/g,`
`)}</code></pre>`),!0):!1}function qke({event:t,editor:e,prioritizeMarkdownOverHTML:n,plainTextAsMarkdown:r}){var o;if(e.transact(a=>a.selection.$from.parent.type.spec.code&&a.selection.$to.parent.type.spec.code)){const a=(o=t.clipboardData)==null?void 0:o.getData("text/plain");if(a)return e.pasteText(a),!0}let i;for(const a of dP)if(t.clipboardData.types.includes(a)){i=a;break}if(!i)return!0;if(i==="vscode-editor-data")return Gke(t,e.prosemirrorView),!0;if(i==="Files")return MK(t,e),!0;const s=t.clipboardData.getData(i);if(i==="blocknote/html")return e.pasteHTML(s,!0),!0;if(i==="text/markdown")return e.pasteMarkdown(s),!0;if(n){const a=t.clipboardData.getData("text/plain");if(zke(a))return e.pasteMarkdown(a),!0}return i==="text/html"?(e.pasteHTML(s),!0):r?(e.pasteMarkdown(s),!0):(e.pasteText(s),!0)}const Kke=(t,e)=>yr.create({name:"pasteFromClipboard",addProseMirrorPlugins(){return[new cn({props:{handleDOMEvents:{paste(n,r){if(r.preventDefault(),!!t.isEditable)return e({event:r,editor:t,defaultPasteHandler:({prioritizeMarkdownOverHTML:o=!0,plainTextAsMarkdown:i=!0}={})=>qke({event:r,editor:t,prioritizeMarkdownOverHTML:o,plainTextAsMarkdown:i})})}}}})]}});function NK(t){const e=[];return t.descendants(n=>{var r,o;const i=Yo(n);return n.type.name==="blockContainer"&&((r=n.firstChild)==null?void 0:r.type.name)==="blockGroup"?!0:n.type.name==="columnList"&&n.childCount===1?((o=n.firstChild)==null||o.forEach(s=>{e.push(jr(s,i))}),!1):n.type.isInGroup("bnBlock")?(e.push(jr(n,i)),!1):!0}),e}function Wke(t,e,n){var r;let o=!1;const i=t.state.selection instanceof fr;if(!i){const l=t.state.doc.slice(t.state.selection.from,t.state.selection.to,!1).content,c=[];for(let d=0;d<l.childCount;d++)c.push(l.child(d));o=c.find(d=>d.type.isInGroup("bnBlock")||d.type.name==="blockGroup"||d.type.spec.group==="blockContent")===void 0,o&&(e=l)}let s;const a=Fx(t.state.schema,n);if(i){((r=e.firstChild)==null?void 0:r.type.name)==="table"&&(e=e.firstChild.content);const l=Gq(e,n.schema.inlineContentSchema,n.schema.styleSchema);s=`<table>${a.exportInlineContent(l,{})}</table>`}else if(o){const l=Bx(e,n.schema.inlineContentSchema,n.schema.styleSchema);s=a.exportInlineContent(l,{})}else{const l=NK(e);s=a.exportBlocks(l,{})}return s}function OK(t,e){"node"in t.state.selection&&t.state.selection.node.type.spec.group==="blockContent"&&e.transact(s=>s.setSelection(new vt(s.doc.resolve(t.state.selection.from-1))));const n=t.serializeForClipboard(t.state.selection.content()).dom.innerHTML,r=t.state.selection.content().content,o=Wke(t,r,e),i=uP(o);return{clipboardHTML:n,externalHTML:o,markdown:i}}const BB=()=>{const t=window.getSelection();if(!t||t.isCollapsed)return!0;let e=t.focusNode;for(;e;){if(e instanceof HTMLElement&&e.getAttribute("contenteditable")==="false")return!0;e=e.parentElement}return!1},$B=(t,e,n)=>{n.preventDefault(),n.clipboardData.clearData();const{clipboardHTML:r,externalHTML:o,markdown:i}=OK(e,t);n.clipboardData.setData("blocknote/html",r),n.clipboardData.setData("text/html",o),n.clipboardData.setData("text/plain",i)},Yke=t=>yr.create({name:"copyToClipboard",addProseMirrorPlugins(){return[new cn({props:{handleDOMEvents:{copy(e,n){return BB()||$B(t,e,n),!0},cut(e,n){return BB()||($B(t,e,n),e.editable&&e.dispatch(e.state.tr.deleteSelection())),!0},dragstart(e,n){if(!("node"in e.state.selection)||e.state.selection.node.type.spec.group!=="blockContent")return;t.transact(s=>s.setSelection(new vt(s.doc.resolve(e.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();const{clipboardHTML:r,externalHTML:o,markdown:i}=OK(e,t);return n.dataTransfer.setData("blocknote/html",r),n.dataTransfer.setData("text/html",o),n.dataTransfer.setData("text/plain",i),!0}}}})]}}),Xke=yr.create({name:"blockBackgroundColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{backgroundColor:{default:Br.backgroundColor.default,parseHTML:t=>t.hasAttribute("data-background-color")?t.getAttribute("data-background-color"):Br.backgroundColor.default,renderHTML:t=>t.backgroundColor===Br.backgroundColor.default?{}:{"data-background-color":t.backgroundColor}}}}]}});let fP=class{constructor(){Ee(this,"callbacks",{})}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),()=>this.off(e,n)}emit(e,...n){const r=this.callbacks[e];r&&r.forEach(o=>o.apply(this,n))}off(e,n){const r=this.callbacks[e];r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e])}removeAllListeners(){this.callbacks={}}},Wo=class extends fP{constructor(...e){super(),Ee(this,"plugins",[])}static key(){throw new Error("You must implement the key method in your extension")}addProsemirrorPlugin(e){this.plugins.push(e)}get priority(){}};class Qke extends Wo{constructor(){super(),Ee(this,"beforeChangeCallbacks",[]),this.addProsemirrorPlugin(new cn({filterTransaction:e=>{let n;return this.beforeChangeCallbacks.reduce((r,o)=>r===!1?r:o({getChanges(){return n||(n=Jq(e),n)},tr:e})!==!1,!0)}}))}static key(){return"blockChange"}subscribe(e){return this.beforeChangeCallbacks.push(e),()=>{this.beforeChangeCallbacks=this.beforeChangeCallbacks.filter(n=>n!==e)}}}const eC=class PK extends Wo{constructor(e){super(),Ee(this,"provider"),Ee(this,"recentlyUpdatedCursors"),Ee(this,"renderCursor",(n,r)=>{let o=this.recentlyUpdatedCursors.get(r);if(!o){const i=(this.collaboration.renderCursor??PK.defaultCursorRender)(n);this.collaboration.showCursorLabels!=="always"&&(i.addEventListener("mouseenter",()=>{const s=this.recentlyUpdatedCursors.get(r);s.element.setAttribute("data-active",""),s.hideTimeout&&(clearTimeout(s.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:s.element,hideTimeout:void 0}))}),i.addEventListener("mouseleave",()=>{const s=this.recentlyUpdatedCursors.get(r);this.recentlyUpdatedCursors.set(r,{element:s.element,hideTimeout:setTimeout(()=>{s.element.removeAttribute("data-active")},2e3)})})),o={element:i,hideTimeout:void 0},this.recentlyUpdatedCursors.set(r,o)}return o.element}),Ee(this,"updateUser",n=>{this.provider.awareness.setLocalStateField("user",n)}),this.collaboration=e,this.provider=e.provider,this.recentlyUpdatedCursors=new Map,this.provider.awareness.setLocalStateField("user",e.user),e.showCursorLabels!=="always"&&this.provider.awareness.on("change",({updated:n})=>{for(const r of n){const o=this.recentlyUpdatedCursors.get(r);o&&(o.element.setAttribute("data-active",""),o.hideTimeout&&clearTimeout(o.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:o.element,hideTimeout:setTimeout(()=>{o.element.removeAttribute("data-active")},2e3)}))}}),this.addProsemirrorPlugin(J_e(this.provider.awareness,{selectionBuilder:Bq,cursorBuilder:this.renderCursor}))}static key(){return"yCursorPlugin"}get priority(){return 999}static isDarkColor(e){const n=e.charAt(0)==="#"?e.substring(1,7):e,r=parseInt(n.substring(0,2),16),o=parseInt(n.substring(2,4),16),i=parseInt(n.substring(4,6),16),s=[r/255,o/255,i/255].map(a=>a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4));return .2126*s[0]+.7152*s[1]+.0722*s[2]<=.179}};Ee(eC,"defaultCursorRender",t=>{const e=document.createElement("span");e.classList.add("bn-collaboration-cursor__base");const n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style",`background-color: ${t.color}; color: ${eC.isDarkColor(t.color)?"white":"black"}`);const r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style",`background-color: ${t.color}; color: ${eC.isDarkColor(t.color)?"white":"black"}`),r.insertBefore(document.createTextNode(t.name),null),n.insertBefore(r,null),e.insertBefore(document.createTextNode("⁠"),null),e.insertBefore(n,null),e.insertBefore(document.createTextNode("⁠"),null),e});let DK=eC,kI=class extends Wo{static key(){return"ySyncPlugin"}constructor(e){super(),this.addProsemirrorPlugin(V_e(e))}get priority(){return 1001}},TI=class extends Wo{static key(){return"yUndoPlugin"}constructor({editor:e}){super(),this.addProsemirrorPlugin(sxe({trackedOrigins:[e]}))}get priority(){return 1e3}};const LK=Ko.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes(){return{orphan:{parseHTML:t=>!!t.getAttribute("data-orphan"),renderHTML:t=>t.orphan?{"data-orphan":"true"}:{},default:!1},threadId:{parseHTML:t=>t.getAttribute("data-bn-thread-id"),renderHTML:t=>({"data-bn-thread-id":t.threadId}),default:""}}},renderHTML({HTMLAttributes:t}){return["span",Zs(t,{class:"bn-thread-mark"})]},parseHTML(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema(t){return t.name==="comment"?{blocknoteIgnore:!0}:{}}});class Zke extends fP{constructor(e){super(),Ee(this,"userCache",new Map),Ee(this,"loadingUsers",new Set),this.resolveUsers=e}async loadUsers(e){const n=e.filter(r=>!this.userCache.has(r)&&!this.loadingUsers.has(r));if(n.length!==0){for(const r of n)this.loadingUsers.add(r);try{const r=await this.resolveUsers(n);for(const o of r)this.userCache.set(o.id,o);this.emit("update",this.userCache)}finally{for(const r of n)this.loadingUsers.delete(r)}}}getUser(e){return this.userCache.get(e)}subscribe(e){return this.on("update",e)}}const mw=new Hn("blocknote-comments"),Jke="SET_SELECTED_THREAD_ID";function eTe(t,e){const n=new Map;return t.descendants((r,o)=>{r.marks.forEach(i=>{if(i.type.name===e){const s=i.attrs.threadId;if(!s)return;const a=o,l=a+r.nodeSize,c=n.get(s)??{from:1/0,to:0};n.set(s,{from:Math.min(a,c.from),to:Math.max(l,c.to)})}})}),n}class tTe extends Wo{constructor(e,n,r){if(super(),Ee(this,"userStore"),Ee(this,"pendingComment",!1),Ee(this,"selectedThreadId"),Ee(this,"threadPositions",new Map),Ee(this,"updateMarksFromThreads",i=>{this.editor.transact(s=>{s.doc.descendants((a,l)=>{a.marks.forEach(c=>{if(c.type.name===this.markType){const d=c.type,f=c.attrs.threadId,p=i.get(f),g=!!(!p||p.resolved||p.deletedAt);if(g!==c.attrs.orphan){const y=Math.max(l,0),b=Math.min(l+a.nodeSize,s.doc.content.size-1,s.doc.content.size-1);s.removeMark(y,b,c),s.addMark(y,b,d.create({...c.attrs,orphan:g})),g&&this.selectedThreadId===f&&(this.selectedThreadId=void 0,this.emitStateUpdate())}}})})})}),this.editor=e,this.threadStore=n,this.markType=r,!e.resolveUsers)throw new Error("resolveUsers is required for comments");this.userStore=new Zke(e.resolveUsers),this.threadStore.subscribe(this.updateMarksFromThreads),e.onCreate(()=>{this.updateMarksFromThreads(this.threadStore.getThreads()),e.onSelectionChange(()=>{this.pendingComment&&(this.pendingComment=!1,this.emitStateUpdate())})});const o=this;this.addProsemirrorPlugin(new cn({key:mw,state:{init(){return{decorations:In.empty}},apply(i,s){const a=i.getMeta(mw);if(!i.docChanged&&!a)return s;const l=i.docChanged?eTe(i.doc,o.markType):o.threadPositions;(l.size>0||o.threadPositions.size>0)&&(o.threadPositions=l,o.emitStateUpdate());const c=[];if(o.selectedThreadId){const d=l.get(o.selectedThreadId);d&&c.push(dr.inline(d.from,d.to,{class:"bn-thread-mark-selected"}))}return{decorations:In.create(i.doc,c)}}},props:{decorations(i){var s;return((s=mw.getState(i))==null?void 0:s.decorations)??In.empty},handleClick:(i,s,a)=>{if(a.button!==0)return;const l=i.state.doc.nodeAt(s);if(!l){o.selectThread(void 0);return}const c=l.marks.find(f=>f.type.name===r&&f.attrs.orphan!==!0),d=c?.attrs.threadId;o.selectThread(d,!1)}}}))}static key(){return"comments"}emitStateUpdate(){this.emit("update",{selectedThreadId:this.selectedThreadId,pendingComment:this.pendingComment,threadPositions:this.threadPositions})}onUpdate(e){return this.on("update",e)}selectThread(e,n=!0){var r,o;if(this.selectedThreadId!==e&&(this.selectedThreadId=e,this.emitStateUpdate(),this.editor.transact(i=>i.setMeta(mw,{name:Jke})),e&&n)){const i=this.threadPositions.get(e);if(!i)return;(o=(r=this.editor.prosemirrorView)==null?void 0:r.domAtPos(i.from).node)==null||o.scrollIntoView({behavior:"smooth",block:"center"})}}startPendingComment(){this.pendingComment=!0,this.emitStateUpdate()}stopPendingComment(){this.pendingComment=!1,this.emitStateUpdate()}async createThread(e){const n=await this.threadStore.createThread(e);if(this.threadStore.addThreadToDocument){const r=this.editor.prosemirrorView,o=r.state.selection,i=Qn.getState(r.state),s={prosemirror:{head:o.head,anchor:o.anchor},yjs:i?LS(i.binding,r.state):void 0};await this.threadStore.addThreadToDocument({threadId:n.id,selection:s})}else this.editor._tiptapEditor.commands.setMark(this.markType,{orphan:!1,threadId:n.id})}}class nTe{constructor(e,n,r,o){Ee(this,"state"),Ee(this,"emitUpdate"),Ee(this,"mouseDownHandler",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),Ee(this,"dragstartHandler",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),Ee(this,"scrollHandler",()=>{var i;if((i=this.state)!=null&&i.show){const s=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${this.state.block.id}"]`);if(!s)return;this.state.referencePos=s.getBoundingClientRect(),this.emitUpdate()}}),Ee(this,"closeMenu",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pluginKey=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized file panel");o(this.state)},r.dom.addEventListener("mousedown",this.mouseDownHandler),r.dom.addEventListener("dragstart",this.dragstartHandler),r.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o;const i=this.pluginKey.getState(e.state),s=this.pluginKey.getState(n);if(!((r=this.state)!=null&&r.show)&&i!=null&&i.block&&this.editor.isEditable){const c=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${i.block.id}"]`);if(!c)return;this.state={show:!0,referencePos:c.getBoundingClientRect(),block:i.block},this.emitUpdate();return}const a=i?.block&&!(s!=null&&s.block),l=!(i!=null&&i.block)&&s?.block;a&&this.state&&!this.state.show&&(this.state.show=!0,this.emitUpdate()),l&&(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}const FA=new Hn("FilePanelPlugin");class rTe extends Wo{constructor(e){super(),Ee(this,"view"),Ee(this,"closeMenu",()=>{var n;return(n=this.view)==null?void 0:n.closeMenu()}),this.addProsemirrorPlugin(new cn({key:FA,view:n=>(this.view=new nTe(e,FA,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>{var o;return r.key==="Escape"&&this.shown?((o=this.view)==null||o.closeMenu(),!0):!1}},state:{init:()=>({block:void 0}),apply:(n,r)=>n.getMeta(FA)||(!n.getMeta(Qn)&&(n.selectionSet||n.docChanged)?{block:void 0}:r)}}))}static key(){return"filePanel"}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}class oTe{constructor(e,n,r){Ee(this,"state"),Ee(this,"emitUpdate"),Ee(this,"preventHide",!1),Ee(this,"preventShow",!1),Ee(this,"shouldShow",({view:o,state:i,from:s,to:a})=>{const{doc:l,selection:c}=i,{empty:d}=c,f=!l.textBetween(s,a).length&&xx(i.selection);if(c.$from.parent.type.spec.code||HR(c)&&c.node.type.spec.code||d||f)return!1;const p=document.activeElement;return!(!this.isElementWithinEditorWrapper(p)&&o.editable)}),Ee(this,"blurHandler",o=>{var i;if(this.preventHide){this.preventHide=!1;return}const s=this.pmView.dom.parentElement;o&&o.relatedTarget&&(s===o.relatedTarget||s.contains(o.relatedTarget)||o.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),Ee(this,"isElementWithinEditorWrapper",o=>{if(!o)return!1;const i=this.pmView.dom.parentElement;return i?i.contains(o):!1}),Ee(this,"viewMousedownHandler",o=>{(!this.isElementWithinEditorWrapper(o.target)||o.button===0)&&(this.preventShow=!0)}),Ee(this,"mouseupHandler",()=>{this.preventShow&&(this.preventShow=!1,setTimeout(()=>this.update(this.pmView)))}),Ee(this,"dragHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),Ee(this,"scrollHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.referencePos=this.getSelectionBoundingBox(),this.emitUpdate())}),Ee(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized formatting toolbar");r(this.state)},n.dom.addEventListener("mousedown",this.viewMousedownHandler),n.root.addEventListener("mouseup",this.mouseupHandler),n.dom.addEventListener("dragstart",this.dragHandler),n.dom.addEventListener("dragover",this.dragHandler),n.dom.addEventListener("blur",this.blurHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o,i;const{state:s,composing:a}=e,{doc:l,selection:c}=s,d=n&&n.doc.eq(l)&&n.selection.eq(c);if(a||d)return;const{ranges:f}=c,p=Math.min(...f.map(_=>_.$from.pos)),g=Math.max(...f.map(_=>_.$to.pos)),y=this.shouldShow({view:e,state:s,from:p,to:g}),b=typeof Range.prototype.getClientRects>"u";if(!this.preventShow&&(y||this.preventHide)&&!b){const _={show:!0,referencePos:this.getSelectionBoundingBox()};(_.show!==((r=this.state)==null?void 0:r.show)||_.referencePos.toJSON()!==((o=this.state)==null?void 0:o.referencePos.toJSON()))&&(this.state=_,this.emitUpdate());return}if((i=this.state)!=null&&i.show&&!this.preventHide&&(!y||this.preventShow||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("mouseup",this.mouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}getSelectionBoundingBox(){const{state:e}=this.pmView,{selection:n}=e,{ranges:r}=n,o=Math.min(...r.map(s=>s.$from.pos)),i=Math.max(...r.map(s=>s.$to.pos));if(HR(n)){const s=this.pmView.nodeDOM(o);if(s)return s.getBoundingClientRect()}return ZC(this.pmView,o,i)}}const iTe=new Hn("FormattingToolbarPlugin");class sTe extends Wo{constructor(e){super(),Ee(this,"view"),Ee(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new cn({key:iTe,view:n=>(this.view=new oTe(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"formattingToolbar"}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}const aTe=Tc.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Zs(this.options.HTMLAttributes,t)]},renderText(){return`
`}}),FB=(t,e)=>{const n=t.resolve(e);if(n.depth<=1)return;const r=n.posAtIndex(n.index(n.depth-1),n.depth-1);return s0(t.resolve(r))},tC=(t,e)=>{const n=t.resolve(e),r=n.index();if(r===0)return;const o=n.posAtIndex(r-1);return s0(t.resolve(o))},VK=(t,e)=>{for(;e.childContainer;){const n=e.childContainer.node,r=t.resolve(e.childContainer.beforePos+1).posAtIndex(n.childCount-1);e=s0(t.resolve(r))}return e},lTe=(t,e)=>t.isBlockContainer&&t.blockContent.node.type.spec.content==="inline*"&&t.blockContent.node.childCount>0&&e.isBlockContainer&&e.blockContent.node.type.spec.content==="inline*",cTe=(t,e,n,r)=>{if(!r.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but next block is not a block container`);if(r.childContainer){const o=t.doc.resolve(r.childContainer.beforePos+1),i=t.doc.resolve(r.childContainer.afterPos-1),s=o.blockRange(i);if(e){const a=t.doc.resolve(r.bnBlock.beforePos);t.tr.lift(s,a.depth)}}if(e){if(!n.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but previous block is not a block container`);e(t.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0},HB=t=>({state:e,dispatch:n})=>{const r=e.doc.resolve(t),o=s0(r),i=tC(e.doc,o.bnBlock.beforePos);if(!i)return!1;const s=VK(e.doc,i);return lTe(s,o)?cTe(e,n,s,o):!1},uTe=yr.create({priority:50,addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({chain:r,commands:o})=>[()=>o.deleteSelection(),()=>o.undoInputRule(),()=>o.command(({state:i})=>{const s=pr(i);if(!s.isBlockContainer)return!1;const a=i.selection.from===s.blockContent.beforePos+1,l=s.blockContent.node.type.name==="paragraph";return a&&!l?o.command(Uo(s.bnBlock.beforePos,{type:"paragraph",props:{}})):!1}),()=>o.command(({state:i})=>{const s=pr(i);if(!s.isBlockContainer)return!1;const{blockContent:a}=s;return i.selection.from===a.beforePos+1?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:i})=>{const s=pr(i);if(!s.isBlockContainer)return!1;const{bnBlock:a,blockContent:l}=s,c=i.selection.from===l.beforePos+1,d=i.selection.empty,f=a.beforePos;return c&&d?r().command(HB(f)).scrollIntoView().run():!1}),()=>o.command(({state:i,dispatch:s})=>{const a=pr(i);if(!a.isBlockContainer||i.selection.from!==a.blockContent.beforePos+1||tC(i.doc,a.bnBlock.beforePos))return!1;const l=FB(i.doc,a.bnBlock.beforePos);if(l?.blockNoteType!=="column")return!1;const c=l,d=FB(i.doc,c.bnBlock.beforePos);if(d?.blockNoteType!=="columnList")throw new Error("parent of column is not a column list");const f=c.childContainer.node.childCount===1,p=f&&d.childContainer.node.childCount===2,g=d.childContainer.node.firstChild===c.bnBlock.node;if(s){const y=i.doc.slice(a.bnBlock.beforePos,a.bnBlock.afterPos,!1);if(p)if(g){i.tr.step(new ao(d.bnBlock.beforePos,d.bnBlock.afterPos,c.bnBlock.afterPos+1,d.bnBlock.afterPos-2,y,y.size,!1));const b=i.tr.doc.resolve(c.bnBlock.beforePos);i.tr.setSelection(ft.between(b,b))}else{i.tr.step(new ao(d.bnBlock.beforePos,d.bnBlock.afterPos,d.bnBlock.beforePos+2,c.bnBlock.beforePos-1,y,0,!1));const b=i.tr.doc.resolve(i.tr.mapping.map(c.bnBlock.beforePos-1));i.tr.setSelection(ft.between(b,b))}else if(f)if(g){i.tr.delete(c.bnBlock.beforePos,c.bnBlock.afterPos),i.tr.insert(d.bnBlock.beforePos,y.content);const b=i.tr.doc.resolve(d.bnBlock.beforePos);i.tr.setSelection(ft.between(b,b))}else i.tr.delete(c.bnBlock.beforePos-1,c.bnBlock.beforePos+1);else{i.tr.delete(a.bnBlock.beforePos,a.bnBlock.afterPos),g?i.tr.insert(d.bnBlock.beforePos-1,y.content):i.tr.insert(c.bnBlock.beforePos-1,y.content);const b=i.tr.doc.resolve(c.bnBlock.beforePos-1);i.tr.setSelection(ft.between(b,b))}}return!0}),()=>o.command(({state:i})=>{const s=pr(i);if(!s.isBlockContainer)return!1;if(s.blockContent.node.childCount===0&&s.blockContent.node.type.spec.content==="inline*"){const a=tC(i.doc,s.bnBlock.beforePos);if(!a||!a.isBlockContainer)return!1;let l=r();if(a.blockContent.node.type.spec.content==="tableRow+"){const c=s.bnBlock.beforePos-1-1-1-1-1;l=l.setTextSelection(c)}else if(a.blockContent.node.type.spec.content===""){const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setNodeSelection(c)}else{const c=a.blockContent.afterPos-a.blockContent.node.nodeSize;l=l.setTextSelection(c)}return l.deleteRange({from:s.bnBlock.beforePos,to:s.bnBlock.afterPos}).scrollIntoView().run()}return!1}),()=>o.command(({state:i})=>{const s=pr(i);if(!s.isBlockContainer)throw new Error("todo");const a=i.selection.from===s.blockContent.beforePos+1,l=i.selection.empty,c=tC(i.doc,s.bnBlock.beforePos);if(c&&a&&l){const d=VK(i.doc,c);if(!d.isBlockContainer)throw new Error("todo");if(d.blockContent.node.type.spec.content===""||d.blockContent.node.type.spec.content==="inline*"&&d.blockContent.node.childCount===0)return r().cut({from:s.bnBlock.beforePos,to:s.bnBlock.afterPos},d.bnBlock.afterPos).deleteRange({from:d.bnBlock.beforePos,to:d.bnBlock.afterPos}).run()}return!1})]),e=()=>this.editor.commands.first(({commands:r})=>[()=>r.deleteSelection(),()=>r.command(({state:o})=>{const i=pr(o);if(!i.isBlockContainer)return!1;const{bnBlock:s,blockContent:a,childContainer:l}=i,{depth:c}=o.doc.resolve(s.beforePos),d=s.afterPos===o.doc.nodeSize-3,f=o.selection.from===a.afterPos-1,p=o.selection.empty;if(!d&&f&&p&&l===void 0){let g=c,y=s.afterPos+1,b=o.doc.resolve(y).depth;for(;b<g;)g=b,y+=2,b=o.doc.resolve(y).depth;return r.command(HB(y-1))}return!1})]),n=(r=!1)=>this.editor.commands.first(({commands:o,tr:i})=>[()=>o.command(({state:s})=>{const a=pr(s);if(!a.isBlockContainer)return!1;const{bnBlock:l,blockContent:c}=a,{depth:d}=s.doc.resolve(l.beforePos),f=s.selection.$anchor.parentOffset===0,p=s.selection.anchor===s.selection.head,g=c.node.childCount===0,y=d>1;return f&&p&&g&&y?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:s})=>{const a=pr(s),l=this.options.editor.schema.blockSchema[a.blockNoteType].hardBreakShortcut??"shift+enter";if(l==="none")return!1;if(l==="shift+enter"&&r||l==="enter"){const c=i.storedMarks||i.selection.$head.marks().filter(d=>this.editor.extensionManager.splittableMarks.includes(d.type.name));return i.insert(i.selection.head,i.doc.type.schema.nodes.hardBreak.create()).ensureMarks(c),!0}return!1}),()=>o.command(({state:s,dispatch:a})=>{const l=pr(s);if(!l.isBlockContainer)return!1;const{bnBlock:c,blockContent:d}=l,f=s.selection.$anchor.parentOffset===0,p=s.selection.anchor===s.selection.head,g=d.node.childCount===0;if(f&&p&&g){const y=c.afterPos,b=y+2;if(a){const _=s.schema.nodes.blockContainer.createAndFill();s.tr.insert(y,_).scrollIntoView(),s.tr.setSelection(new ft(s.doc.resolve(b)))}return!0}return!1}),()=>o.command(({state:s,chain:a})=>{const l=pr(s);if(!l.isBlockContainer)return!1;const{blockContent:c}=l,d=s.selection.$anchor.parentOffset===0;return c.node.childCount===0?!1:(a().deleteSelection().command(pK(s.selection.from,d,d)).run(),!0)})]);return{Backspace:t,Delete:e,Enter:()=>n(),"Shift-Enter":()=>n(!0),Tab:()=>{var r,o,i;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(i=this.options.editor.filePanel)!=null&&i.shown)?!1:kK(this.options.editor)},"Shift-Tab":()=>{var r,o,i;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(i=this.options.editor.filePanel)!=null&&i.shown)?!1:(this.editor.commands.liftListItem("blockContainer"),!0)},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0),"Mod-z":()=>this.options.editor.undo(),"Mod-y":()=>this.options.editor.redo(),"Shift-Mod-z":()=>this.options.editor.redo()}}});class dTe{constructor(e,n,r){Ee(this,"state"),Ee(this,"emitUpdate"),Ee(this,"menuUpdateTimer"),Ee(this,"startMenuUpdateTimer"),Ee(this,"stopMenuUpdateTimer"),Ee(this,"mouseHoveredLinkMark"),Ee(this,"mouseHoveredLinkMarkRange"),Ee(this,"keyboardHoveredLinkMark"),Ee(this,"keyboardHoveredLinkMarkRange"),Ee(this,"linkMark"),Ee(this,"linkMarkRange"),Ee(this,"mouseOverHandler",o=>{if(this.mouseHoveredLinkMark=void 0,this.mouseHoveredLinkMarkRange=void 0,this.stopMenuUpdateTimer(),o.target instanceof HTMLAnchorElement&&o.target.nodeName==="A"){const i=o.target,s=this.pmView.posAtDOM(i,0)+1,a=this.pmView.state.doc.resolve(s),l=a.marks();for(const c of l)if(c.type.name===this.pmView.state.schema.mark("link").type.name){this.mouseHoveredLinkMark=c,this.mouseHoveredLinkMarkRange=nb(a,c.type,c.attrs)||void 0;break}}return this.startMenuUpdateTimer(),!1}),Ee(this,"clickHandler",o=>{var i;const s=this.pmView.dom.parentElement;this.linkMark&&o&&o.target&&!(s===o.target||s.contains(o.target))&&(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),Ee(this,"scrollHandler",()=>{var o;this.linkMark!==void 0&&(o=this.state)!=null&&o.show&&(this.state.referencePos=ZC(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),this.emitUpdate())}),Ee(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized link toolbar");r(this.state)},this.startMenuUpdateTimer=()=>{this.menuUpdateTimer=setTimeout(()=>{this.update(this.pmView,void 0,!0)},250)},this.stopMenuUpdateTimer=()=>(this.menuUpdateTimer&&(clearTimeout(this.menuUpdateTimer),this.menuUpdateTimer=void 0),!1),this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}editLink(e,n){var r;this.editor.transact(o=>{const i=Yo(o);o.insertText(n,this.linkMarkRange.from,this.linkMarkRange.to),o.addMark(this.linkMarkRange.from,this.linkMarkRange.from+n.length,i.mark("link",{href:e}))}),this.pmView.focus(),(r=this.state)!=null&&r.show&&(this.state.show=!1,this.emitUpdate())}deleteLink(){var e;this.editor.transact(n=>n.removeMark(this.linkMarkRange.from,this.linkMarkRange.to,this.linkMark.type).setMeta("preventAutolink",!0)),this.pmView.focus(),(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate())}update(e,n,r=!1){var o;const{state:i}=e;if(n&&n.selection.from===i.selection.from&&n.selection.to===i.selection.to||!this.pmView.hasFocus())return;const s=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){const a=this.pmView.state.selection.$from.marks();for(const l of a)if(l.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=l,this.keyboardHoveredLinkMarkRange=nb(this.pmView.state.selection.$from,l.type,l.attrs)||void 0;break}}if(this.mouseHoveredLinkMark&&r&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable){this.state={show:!0,referencePos:ZC(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},this.emitUpdate();return}if((o=this.state)!=null&&o.show&&s&&(!this.linkMark||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}const fTe=new Hn("LinkToolbarPlugin");class hTe extends Wo{constructor(e){super(),Ee(this,"view"),Ee(this,"editLink",(n,r)=>{this.view.editLink(n,r)}),Ee(this,"deleteLink",()=>{this.view.deleteLink()}),Ee(this,"startHideTimer",()=>{this.view.startMenuUpdateTimer()}),Ee(this,"stopHideTimer",()=>{this.view.stopMenuUpdateTimer()}),Ee(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new cn({key:fTe,view:n=>(this.view=new dTe(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"linkToolbar"}onUpdate(e){return this.on("update",e)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}const jK=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],BK="https",pTe=new Hn("node-selection-keyboard");class mTe extends Wo{static key(){return"nodeSelectionKeyboard"}constructor(){super(),this.addProsemirrorPlugin(new cn({key:pTe,props:{handleKeyDown:(e,n)=>{if("node"in e.state.selection){if(n.ctrlKey||n.metaKey)return!1;if(n.key.length===1)return n.preventDefault(),!0;if(n.key==="Enter"&&!n.shiftKey&&!n.altKey&&!n.ctrlKey&&!n.metaKey){const r=e.state.tr;return e.dispatch(r.insert(e.state.tr.selection.$to.after(),e.state.schema.nodes.paragraph.createChecked()).setSelection(new ft(r.doc.resolve(e.state.tr.selection.$to.after()+1)))),!0}}return!1}}}))}}const gTe=new Hn("blocknote-placeholder");class yTe extends Wo{static key(){return"placeholder"}constructor(e,n){super(),this.addProsemirrorPlugin(new cn({key:gTe,view:r=>{var o,i;const s=`placeholder-selector-${lG()}`;r.dom.classList.add(s);const a=document.createElement("style"),l=e._tiptapEditor.options.injectNonce;l&&a.setAttribute("nonce",l),((o=e.prosemirrorView)==null?void 0:o.root)instanceof ShadowRoot?e.prosemirrorView.root.append(a):(i=e.prosemirrorView)==null||i.root.head.appendChild(a);const c=a.sheet,d=(f="")=>`.${s} .bn-block-content${f} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`;try{const{default:f,emptyDocument:p,...g}=n;for(const[_,k]of Object.entries(g)){const M=`[data-content-type="${_}"]`;c.insertRule(`${d(M)} { content: ${JSON.stringify(k)}; }`)}c.insertRule(`${d("[data-is-only-empty-block]")} { content: ${JSON.stringify(p)}; }`),c.insertRule(`${d("[data-is-empty-and-focused]")} { content: ${JSON.stringify(f)}; }`)}catch(f){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",f)}return{destroy:()=>{var f,p;((f=e.prosemirrorView)==null?void 0:f.root)instanceof ShadowRoot?e.prosemirrorView.root.removeChild(a):(p=e.prosemirrorView)==null||p.root.head.removeChild(a)}}},props:{decorations:r=>{const{doc:o,selection:i}=r;if(!e.isEditable||!i.empty||i.$from.parent.type.spec.code)return;const s=[];r.doc.content.size===6&&s.push(dr.node(2,4,{"data-is-only-empty-block":"true"}));const a=i.$anchor,l=a.parent;if(l.content.size===0){const c=a.before();s.push(dr.node(c,c+l.nodeSize,{"data-is-empty-and-focused":"true"}))}return In.create(o,s)}}}))}}const UB=new Hn("previous-blocks"),vTe={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"};class bTe extends Wo{static key(){return"previousBlockType"}constructor(){super();let e;this.addProsemirrorPlugin(new cn({key:UB,view(n){return{update:async(r,o)=>{var i;((i=this.key)==null?void 0:i.getState(r.state).updatedBlocks.size)>0&&(e=setTimeout(()=>{r.dispatch(r.state.tr.setMeta(UB,{clearUpdate:!0}))},0))},destroy:()=>{e&&clearTimeout(e)}}},state:{init(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply(n,r,o,i){if(r.currentTransactionOldBlockAttrs={},r.updatedBlocks.clear(),!n.docChanged||o.doc.eq(i.doc))return r;const s={},a=x6(o.doc,d=>d.attrs.id),l=new Map(a.map(d=>[d.node.attrs.id,d])),c=x6(i.doc,d=>d.attrs.id);for(const d of c){const f=l.get(d.node.attrs.id),p=f?.node.firstChild,g=d.node.firstChild;if(f&&p&&g){const y={index:g.attrs.index,level:g.attrs.level,type:g.type.name,depth:i.doc.resolve(d.pos).depth};let b={index:p.attrs.index,level:p.attrs.level,type:p.type.name,depth:o.doc.resolve(f.pos).depth};s[d.node.attrs.id]=b,n.getMeta("numberedListIndexing")&&(d.node.attrs.id in r.prevTransactionOldBlockAttrs&&(b=r.prevTransactionOldBlockAttrs[d.node.attrs.id]),y.type==="numberedListItem"&&(b.index=y.index)),r.currentTransactionOldBlockAttrs[d.node.attrs.id]=b,JSON.stringify(b)!==JSON.stringify(y)&&(b["depth-change"]=b.depth-y.depth,r.updatedBlocks.add(d.node.attrs.id))}}return r.prevTransactionOldBlockAttrs=s,r}},props:{decorations(n){const r=this.getState(n);if(r.updatedBlocks.size===0)return;const o=[];return n.doc.descendants((i,s)=>{if(!i.attrs.id||!r.updatedBlocks.has(i.attrs.id))return;const a=r.currentTransactionOldBlockAttrs[i.attrs.id],l={};for(const[d,f]of Object.entries(a))l["data-prev-"+vTe[d]]=f||"none";const c=dr.node(s,s+i.nodeSize,{...l});o.push(c)}),In.create(n.doc,o)}}}))}}const zB=new Hn("blocknote-show-selection");class wTe extends Wo{constructor(e){super(),Ee(this,"enabled",!1),this.editor=e,this.addProsemirrorPlugin(new cn({key:zB,props:{decorations:n=>{const{doc:r,selection:o}=n;if(!this.enabled)return In.empty;const i=dr.inline(o.from,o.to,{"data-show-selection":"true"});return In.create(r,[i])}}}))}static key(){return"showSelection"}setEnabled(e){this.enabled!==e&&(this.enabled=e,this.editor.transact(n=>n.setMeta(zB,{})))}getEnabled(){return this.enabled}}function $K(t,e){for(var n,r;t&&t.parentElement&&t.parentElement!==e.dom&&((n=t.getAttribute)==null?void 0:n.call(t,"data-node-type"))!=="blockContainer";)t=t.parentElement;if(((r=t.getAttribute)==null?void 0:r.call(t,"data-node-type"))==="blockContainer")return{node:t,id:t.getAttribute("data-id")}}let AI=class nC extends Tt{constructor(e,n){super(e,n),Ee(this,"nodes");const r=e.node();this.nodes=[],e.doc.nodesBetween(e.pos,n.pos,(o,i,s)=>{if(s!==null&&s.eq(r))return this.nodes.push(o),!1})}static create(e,n,r=n){return new nC(e.resolve(n),e.resolve(r))}content(){return new Ze(Le.from(this.nodes),0,0)}eq(e){if(!(e instanceof nC)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(let n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(e.nodes[n]))return!1;return!0}map(e,n){const r=n.mapResult(this.from),o=n.mapResult(this.to);return o.deleted?Tt.near(e.resolve(r.pos)):r.deleted?Tt.near(e.resolve(o.pos)):new nC(e.resolve(r.pos),e.resolve(o.pos))}toJSON(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}};Tt.jsonID("multiple-node",AI);let ul;function CTe(t,e){let n,r;const o=e.resolve(t.from).node().type.spec.group==="blockContent",i=e.resolve(t.to).node().type.spec.group==="blockContent",s=Math.min(t.$anchor.depth,t.$head.depth);if(o&&i){const a=t.$from.start(s-1),l=t.$to.end(s-1);n=e.resolve(a-1).pos,r=e.resolve(l+1).pos}else n=t.from,r=t.to;return{from:n,to:r}}function GB(t,e,n=e){e===n&&(n+=t.state.doc.resolve(e+1).node().nodeSize);const r=t.domAtPos(e).node.cloneNode(!0),o=t.domAtPos(e).node,i=(d,f)=>Array.prototype.indexOf.call(d.children,f),s=i(o,t.domAtPos(e+1).node.parentElement),a=i(o,t.domAtPos(n-1).node.parentElement);for(let d=o.childElementCount-1;d>=0;d--)(d>a||d<s)&&r.removeChild(r.children[d]);FK(t.root),ul=r;const l=ul.getElementsByTagName("iframe");for(let d=0;d<l.length;d++){const f=l[d],p=f.parentElement;p&&p.removeChild(f)}const c=t.dom.className.split(" ").filter(d=>d!=="ProseMirror"&&d!=="bn-root"&&d!=="bn-editor").join(" ");ul.className=ul.className+" bn-drag-preview "+c,t.root instanceof ShadowRoot?t.root.appendChild(ul):t.root.body.appendChild(ul)}function FK(t){ul!==void 0&&(t instanceof ShadowRoot?t.removeChild(ul):t.body.removeChild(ul),ul=void 0)}function STe(t,e,n){if(!t.dataTransfer)return;const r=n.prosemirrorView;if(!r)return;const o=ta(e.id,r.state.doc);if(!o)throw new Error(`Block with ID ${e.id} not found`);const i=o.posBeforeNode;if(i!=null){const s=r.state.selection,a=r.state.doc,{from:l,to:c}=CTe(s,a),d=l<=i&&i<c,f=s.$anchor.node()!==s.$head.node()||s instanceof AI;d&&f?(r.dispatch(r.state.tr.setSelection(AI.create(a,l,c))),GB(r,l,c)):(r.dispatch(r.state.tr.setSelection(vt.create(r.state.doc,i))),GB(r,i));const p=r.state.selection.content(),g=n.pmSchema,y=r.serializeForClipboard(p).dom.innerHTML,b=Fx(g,n),_=NK(p.content),k=b.exportBlocks(_,{}),M=uP(k);t.dataTransfer.clearData(),t.dataTransfer.setData("blocknote/html",y),t.dataTransfer.setData("text/html",k),t.dataTransfer.setData("text/plain",M),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(ul,0,0)}}const qB=250;function RI(t,e,n=!0){const r=t.root.elementsFromPoint(e.left,e.top);for(const o of r)if(t.dom.contains(o))return n&&o.closest("[data-node-type=columnList]")?RI(t,{left:e.left+50,top:e.top},!1):$K(o,t)}function _Te(t,e){if(!e.dom.firstChild)return;const n=e.dom.firstChild.getBoundingClientRect(),r={left:Math.min(Math.max(n.left+10,t.x),n.right-10),top:t.y},o=RI(e,r);if(!o)return;const i=o.node.getBoundingClientRect();return RI(e,{left:i.right-10,top:t.y},!1)}class xTe{constructor(e,n,r){Ee(this,"state"),Ee(this,"emitUpdate"),Ee(this,"mousePos"),Ee(this,"hoveredBlock"),Ee(this,"menuFrozen",!1),Ee(this,"isDragOrigin",!1),Ee(this,"updateState",o=>{this.state=o,this.emitUpdate(this.state)}),Ee(this,"updateStateFromMousePos",()=>{var o,i,s,a,l;if(this.menuFrozen||!this.mousePos)return;const c=this.findClosestEditorElement({clientX:this.mousePos.x,clientY:this.mousePos.y});if(c?.element!==this.pmView.dom||c.distance>qB){(o=this.state)!=null&&o.show&&(this.state.show=!1,this.updateState(this.state));return}const d=_Te(this.mousePos,this.pmView);if(!d||!this.editor.isEditable){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.updateState(this.state));return}if((s=this.state)!=null&&s.show&&(a=this.hoveredBlock)!=null&&a.hasAttribute("data-id")&&((l=this.hoveredBlock)==null?void 0:l.getAttribute("data-id"))===d.id)return;this.hoveredBlock=d.node;const f=d.node.firstChild;if(f&&this.editor.isEditable){const p=f.getBoundingClientRect(),g=d.node.closest("[data-node-type=column]");this.updateState({show:!0,referencePos:new DOMRect(g?g.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,p.y,p.width,p.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))})}}),Ee(this,"onDragStart",o=>{var i;const s=(i=o.dataTransfer)==null?void 0:i.getData("blocknote/html");if(!s||this.pmView.dragging)return;const a=document.createElement("div");a.innerHTML=s;const l=Su.fromSchema(this.pmView.state.schema).parse(a,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new Ze(l.content,0,0),move:!0}}),Ee(this,"findClosestEditorElement",o=>{const i=Array.from(this.pmView.root.querySelectorAll(".bn-editor"));if(i.length===0)return null;let s=i[0],a=Number.MAX_VALUE;return i.forEach(l=>{const c=l.querySelector(".bn-block-group").getBoundingClientRect(),d=o.clientX<c.left?c.left-o.clientX:o.clientX>c.right?o.clientX-c.right:0,f=o.clientY<c.top?c.top-o.clientY:o.clientY>c.bottom?o.clientY-c.bottom:0,p=Math.sqrt(Math.pow(d,2)+Math.pow(f,2));p<a&&(a=p,s=l)}),{element:s,distance:a}}),Ee(this,"onDragOver",o=>{if(o.synthetic)return;const i=this.getDragEventContext(o);if(!i||!i.isDropPoint){this.closeDropCursor();return}i.isDropPoint&&!i.isDropWithinEditorBounds&&this.dispatchSyntheticEvent(o)}),Ee(this,"closeDropCursor",()=>{const o=new Event("dragleave",{bubbles:!1});o.synthetic=!0,this.pmView.dom.dispatchEvent(o)}),Ee(this,"getDragEventContext",o=>{var i;const s=!((i=o.dataTransfer)!=null&&i.types.includes("blocknote/html"))&&!!this.pmView.dragging,a=!!this.isDragOrigin,l=s||a,c=this.findClosestEditorElement(o);if(!c||c.distance>qB)return;const d=c.element===this.pmView.dom,f=d&&c.distance===0;if(!(!d&&!l))return{isDropPoint:d,isDropWithinEditorBounds:f,isDragOrigin:l}}),Ee(this,"onDrop",o=>{if(o.synthetic)return;const i=this.getDragEventContext(o);if(!i){this.closeDropCursor();return}const{isDropPoint:s,isDropWithinEditorBounds:a,isDragOrigin:l}=i;if(a||this.dispatchSyntheticEvent(o),!(s&&l)){if(s){this.pmView.dispatch(this.pmView.state.tr.setSelection(ft.create(this.pmView.state.tr.doc,this.pmView.state.tr.selection.anchor)));return}else if(l){setTimeout(()=>this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),0);return}}}),Ee(this,"onDragEnd",o=>{o.synthetic||(this.pmView.dragging=null)}),Ee(this,"onKeyDown",o=>{var i;(i=this.state)!=null&&i.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),Ee(this,"onMouseMove",o=>{var i;if(this.menuFrozen)return;this.mousePos={x:o.clientX,y:o.clientY};const s=this.pmView.dom.getBoundingClientRect(),a=this.mousePos.x>s.left&&this.mousePos.x<s.right&&this.mousePos.y>s.top&&this.mousePos.y<s.bottom,l=this.pmView.dom.parentElement;if(a&&o&&o.target&&!(l===o.target||l.contains(o.target))){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate(this.state));return}this.updateStateFromMousePos()}),Ee(this,"onScroll",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.referencePos=this.hoveredBlock.getBoundingClientRect(),this.emitUpdate(this.state)),this.updateStateFromMousePos()}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");r(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),cP(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),n.root.addEventListener("scroll",this.onScroll,!0)}dispatchSyntheticEvent(e){const n=new Event(e.type,e),r=this.pmView.dom.firstChild.getBoundingClientRect();n.clientX=e.clientX,n.clientY=e.clientY,n.clientX=Math.min(Math.max(e.clientX,r.left),r.left+r.width),n.clientY=Math.min(Math.max(e.clientY,r.top),r.top+r.height),n.dataTransfer=e.dataTransfer,n.preventDefault=()=>e.preventDefault(),n.synthetic=!0,this.pmView.dom.dispatchEvent(n)}update(e,n){var r;!n.doc.eq(this.pmView.state.doc)&&(r=this.state)!=null&&r.show&&this.updateStateFromMousePos()}destroy(){var e;(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}}const ETe=new Hn("SideMenuPlugin");class kTe extends Wo{constructor(e){super(),Ee(this,"view"),Ee(this,"blockDragStart",(n,r)=>{this.view&&(this.view.isDragOrigin=!0),STe(n,r,this.editor)}),Ee(this,"blockDragEnd",()=>{this.editor.prosemirrorView&&FK(this.editor.prosemirrorView.root),this.view&&(this.view.isDragOrigin=!1)}),Ee(this,"freezeMenu",()=>{this.view.menuFrozen=!0,this.view.state.show=!0,this.view.emitUpdate(this.view.state)}),Ee(this,"unfreezeMenu",()=>{this.view.menuFrozen=!1,this.view.state.show=!1,this.view.emitUpdate(this.view.state)}),this.editor=e,this.addProsemirrorPlugin(new cn({key:ETe,view:n=>(this.view=new xTe(e,n,r=>{this.emit("update",r)}),this.view)}))}static key(){return"sideMenu"}onUpdate(e){return this.on("update",e)}}const gw=new Map;function TTe(t){if(gw.has(t))return gw.get(t);const e=new sg;return t._tiptapEditor.on("transaction",({transaction:n})=>{e.appendMapping(n.mapping)}),t._tiptapEditor.on("destroy",()=>{gw.delete(t)}),gw.set(t,e),e}function ATe(t,e,n="left"){const r=Qn.getState(t._tiptapEditor.state);if(!r){const i=TTe(t),s=i.maps.length;return()=>i.slice(s).map(e,n==="left"?-1:1)}const o=vb(e+(n==="right"?1:0),r.binding.type,r.binding.mapping);return()=>{const i=Qn.getState(t._tiptapEditor.state),s=Bh(i.doc,i.binding.type,o,i.binding.mapping);if(s===null)throw new Error("Position not found, cannot track positions");return s+(n==="right"?-1:0)}}const RTe=Tx(t=>t.type.name==="blockContainer");class ITe{constructor(e,n){Ee(this,"state"),Ee(this,"emitUpdate"),Ee(this,"rootEl"),Ee(this,"pluginState"),Ee(this,"handleScroll",()=>{var i,s;if((i=this.state)!=null&&i.show){const a=(s=this.rootEl)==null?void 0:s.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!a)return;this.state.referencePos=a.getBoundingClientRect(),this.emitUpdate(this.pluginState.triggerCharacter)}}),Ee(this,"closeMenu",()=>{this.editor.transact(i=>i.setMeta(Um,null))}),Ee(this,"clearQuery",()=>{this.pluginState!==void 0&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos()-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor.transact(i=>i.selection.from)}).run()});var r,o;this.editor=e,this.pluginState=void 0,this.emitUpdate=i=>{var s;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");n(i,{...this.state,ignoreQueryLength:(s=this.pluginState)==null?void 0:s.ignoreQueryLength})},this.rootEl=(r=this.editor.prosemirrorView)==null?void 0:r.root,(o=this.rootEl)==null||o.addEventListener("scroll",this.handleScroll,!0)}update(e,n){var r;const o=Um.getState(n),i=Um.getState(e.state),s=o===void 0&&i!==void 0,a=o!==void 0&&i===void 0;if(!s&&!(o!==void 0&&i!==void 0)&&!a)return;if(this.pluginState=a?o:i,a||!this.editor.isEditable){this.state&&(this.state.show=!1),this.emitUpdate(this.pluginState.triggerCharacter);return}const l=(r=this.rootEl)==null?void 0:r.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&l&&(this.state={show:!0,referencePos:l.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var e;(e=this.rootEl)==null||e.removeEventListener("scroll",this.handleScroll,!0)}}const Um=new Hn("SuggestionMenuPlugin");class MTe extends Wo{constructor(e){super(),Ee(this,"view"),Ee(this,"triggerCharacters",[]),Ee(this,"addTriggerCharacter",r=>{this.triggerCharacters.push(r)}),Ee(this,"removeTriggerCharacter",r=>{this.triggerCharacters=this.triggerCharacters.filter(o=>o!==r)}),Ee(this,"closeMenu",()=>this.view.closeMenu()),Ee(this,"clearQuery",()=>this.view.clearQuery());const n=this.triggerCharacters;this.addProsemirrorPlugin(new cn({key:Um,view:()=>(this.view=new ITe(e,(r,o)=>{this.emit(`update ${r}`,o)}),this.view),state:{init(){},apply:(r,o,i,s)=>{if(r.getMeta("orderedListIndexing")!==void 0||r.selection.$from.parent.type.spec.code)return o;const a=r.getMeta(Um);if(typeof a=="object"&&a!==null){o&&this.closeMenu();const c=ATe(e,s.selection.from-a.triggerCharacter.length);return{triggerCharacter:a.triggerCharacter,deleteTriggerCharacter:a.deleteTriggerCharacter!==!1,queryStartPos:()=>c()+a.triggerCharacter.length,query:"",decorationId:`id_${Math.floor(Math.random()*4294967295)}`,ignoreQueryLength:a?.ignoreQueryLength}}if(o===void 0)return o;if(s.selection.from!==s.selection.to||a===null||r.getMeta("focus")||r.getMeta("blur")||r.getMeta("pointer")||o.triggerCharacter!==void 0&&s.selection.from<o.queryStartPos()||!s.selection.$from.sameParent(s.doc.resolve(o.queryStartPos())))return;const l={...o};return l.query=s.doc.textBetween(o.queryStartPos(),s.selection.from),l}},props:{handleTextInput(r,o,i,s){if(o===i){const a=r.state.doc;for(const l of n){const c=l.length>1?a.textBetween(o-l.length,o)+s:s;if(l===c)return r.dispatch(r.state.tr.insertText(s)),r.dispatch(r.state.tr.setMeta(Um,{triggerCharacter:c}).scrollIntoView()),!0}}return!1},decorations(r){const o=this.getState(r);if(o===void 0)return null;if(!o.deleteTriggerCharacter){const i=RTe(r.selection);if(i)return In.create(r.doc,[dr.node(i.pos,i.pos+i.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}return In.create(r.doc,[dr.inline(o.queryStartPos()-o.triggerCharacter.length,o.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}}}))}static key(){return"suggestionMenu"}onUpdate(e,n){return this.triggerCharacters.includes(e)||this.addTriggerCharacter(e),this.on(`update ${e}`,n)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}const NTe=Ko.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="insertion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["ins",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"ins",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),OTe=Ko.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="deletion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["del",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"del",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),PTe=Ko.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema(t){return t.name!=="modification"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return[n?"span":"div",{"data-type":"modification","data-id":String(e.attrs.id),"data-mod-type":e.attrs.type,"data-mod-prev-val":JSON.stringify(e.attrs.previousValue),"data-mod-new-val":JSON.stringify(e.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal,newValue:e.dataset.modNewVal}:!1}},{tag:"div[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal}:!1}}]}}});let bs;function KB(t){bs||(bs=document.createElement("div"),bs.innerHTML="_",bs.style.opacity="0",bs.style.height="1px",bs.style.width="1px",t instanceof Document?t.body.appendChild(bs):t.appendChild(bs))}function DTe(t){bs&&(t instanceof Document?t.body.removeChild(bs):t.removeChild(bs),bs=void 0)}function yw(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function LTe(t){let e=t;for(;e&&e.nodeName!=="TD"&&e.nodeName!=="TH"&&!e.classList.contains("tableWrapper");){if(e.classList.contains("ProseMirror"))return;const n=e.parentNode;if(!n||!(n instanceof Element))return;e=n}return e.nodeName==="TD"||e.nodeName==="TH"?{type:"cell",domNode:e,tbodyNode:e.closest("tbody")}:{type:"wrapper",domNode:e,tbodyNode:e.querySelector("tbody")}}function VTe(t,e){const n=e.querySelectorAll(t);for(let r=0;r<n.length;r++)n[r].style.visibility="hidden"}class jTe{constructor(e,n,r){Ee(this,"state"),Ee(this,"emitUpdate"),Ee(this,"tableId"),Ee(this,"tablePos"),Ee(this,"tableElement"),Ee(this,"menuFrozen",!1),Ee(this,"mouseState","up"),Ee(this,"prevWasEditable",null),Ee(this,"viewMousedownHandler",()=>{this.mouseState="down"}),Ee(this,"mouseUpHandler",o=>{this.mouseState="up",this.mouseMoveHandler(o)}),Ee(this,"mouseMoveHandler",o=>{var i,s,a,l,c,d,f;if(this.menuFrozen||this.mouseState==="selecting"||!(o.target instanceof Element)||!this.pmView.dom.contains(o.target))return;const p=LTe(o.target);if(p?.type==="cell"&&this.mouseState==="down"&&!((i=this.state)!=null&&i.draggingState)){this.mouseState="selecting",(s=this.state)!=null&&s.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!p||!this.editor.isEditable){(a=this.state)!=null&&a.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!p.tbodyNode)return;const g=p.tbodyNode.getBoundingClientRect(),y=$K(p.domNode,this.pmView);if(!y)return;this.tableElement=y.node;let b;const _=this.editor.transact(N=>ta(y.id,N.doc));if(!_)throw new Error(`Block with ID ${y.id} not found`);const k=jr(_.node,this.editor.pmSchema,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema);if(qEe("table",k,this.editor)&&(this.tablePos=_.posBeforeNode+1,b=k),!b)return;this.tableId=y.id;const M=(l=p.domNode.closest(".tableWrapper"))==null?void 0:l.querySelector(".table-widgets-container");if(p?.type==="wrapper"){const N=o.clientY>=g.bottom-1&&o.clientY<g.bottom+20,j=o.clientX>=g.right-1&&o.clientX<g.right+20,B=o.clientX>g.right||o.clientY>g.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:N,showAddOrRemoveColumnsButton:j,referencePosTable:g,block:b,widgetContainer:M,colIndex:B||(c=this.state)==null?void 0:c.colIndex,rowIndex:B||(d=this.state)==null?void 0:d.rowIndex,referencePosCell:B||(f=this.state)==null?void 0:f.referencePosCell}}else{const N=yw(p.domNode),j=yw(p.domNode.parentElement),B=p.domNode.getBoundingClientRect();if(this.state!==void 0&&this.state.show&&this.tableId===y.id&&this.state.rowIndex===j&&this.state.colIndex===N)return;this.state={show:!0,showAddOrRemoveColumnsButton:N===b.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:j===b.content.rows.length-1,referencePosTable:g,block:b,draggingState:void 0,referencePosCell:B,colIndex:N,rowIndex:j,widgetContainer:M}}return this.emitUpdate(),!1}),Ee(this,"dragOverHandler",o=>{var i;if(((i=this.state)==null?void 0:i.draggingState)===void 0)return;o.preventDefault(),o.dataTransfer.dropEffect="move",VTe(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const s={left:Math.min(Math.max(o.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(o.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},a=this.pmView.root.elementsFromPoint(s.left,s.top).filter(b=>b.tagName==="TD"||b.tagName==="TH");if(a.length===0)return;const l=a[0];let c=!1;const d=yw(l.parentElement),f=yw(l),p=this.state.draggingState.draggedCellOrientation==="row"?this.state.rowIndex:this.state.colIndex,g=(this.state.draggingState.draggedCellOrientation==="row"?d:f)!==p;(this.state.rowIndex!==d||this.state.colIndex!==f)&&(this.state.rowIndex=d,this.state.colIndex=f,this.state.referencePosCell=l.getBoundingClientRect(),c=!0);const y=this.state.draggingState.draggedCellOrientation==="row"?s.top:s.left;this.state.draggingState.mousePos!==y&&(this.state.draggingState.mousePos=y,c=!0),c&&this.emitUpdate(),g&&this.editor.transact(b=>b.setMeta(uv,!0))}),Ee(this,"dropHandler",o=>{if(this.mouseState="up",this.state===void 0||this.state.draggingState===void 0)return!1;if(this.state.rowIndex===void 0||this.state.colIndex===void 0)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");o.preventDefault();const{draggingState:i,colIndex:s,rowIndex:a}=this.state,l=this.state.block.content.columnWidths;if(i.draggedCellOrientation==="row"){if(!Xq(this.state.block,i.originalIndex,a))return!1;const c=Sxe(this.state.block,i.originalIndex,a);this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,rows:c}})}else{if(!Qq(this.state.block,i.originalIndex,s))return!1;const c=Cxe(this.state.block,i.originalIndex,s),[d]=l.splice(i.originalIndex,1);l.splice(s,0,d),this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,columnWidths:l,rows:c}})}return this.editor.setTextCursorPosition(this.state.block.id),!0}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");r(this.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}update(){var e;if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||this.state.block.type!=="table"||!((e=this.tableElement)!=null&&e.isConnected)){this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate();return}const{height:n,width:r}=nP(this.state.block);this.state.rowIndex!==void 0&&this.state.colIndex!==void 0&&(this.state.rowIndex>=n&&(this.state.rowIndex=n-1),this.state.colIndex>=r&&(this.state.colIndex=r-1));const o=this.tableElement.querySelector("tbody");if(!o)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(this.state.rowIndex!==void 0&&this.state.colIndex!==void 0){const i=o.children[this.state.rowIndex].children[this.state.colIndex];i?this.state.referencePosCell=i.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=o.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}const uv=new Hn("TableHandlesPlugin");class BTe extends Wo{constructor(e){super(),Ee(this,"view"),Ee(this,"colDragStart",n=>{if(this.view.state===void 0||this.view.state.colIndex===void 0)throw new Error("Attempted to drag table column, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"col",originalIndex:this.view.state.colIndex,mousePos:n.clientX},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(uv,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.colIndex,newIndex:this.view.state.colIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");KB(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(bs,0,0),n.dataTransfer.effectAllowed="move"}),Ee(this,"rowDragStart",n=>{if(this.view.state===void 0||this.view.state.rowIndex===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"row",originalIndex:this.view.state.rowIndex,mousePos:n.clientY},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(uv,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.rowIndex,newIndex:this.view.state.rowIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");KB(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(bs,0,0),n.dataTransfer.effectAllowed="copyMove"}),Ee(this,"dragEnd",()=>{if(this.view.state===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState=void 0,this.view.emitUpdate(),this.editor.transact(n=>n.setMeta(uv,null)),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");DTe(this.editor.prosemirrorView.root)}),Ee(this,"freezeHandles",()=>{this.view.menuFrozen=!0}),Ee(this,"unfreezeHandles",()=>{this.view.menuFrozen=!1}),Ee(this,"getCellsAtRowHandle",(n,r)=>bI(n,r)),Ee(this,"getCellsAtColumnHandle",(n,r)=>wI(n,r)),Ee(this,"setCellSelection",(n,r,o=r)=>{const i=this.view;if(!i)throw new Error("Table handles view not initialized");const s=n.doc.resolve(i.tablePos+1),a=n.doc.resolve(s.posAtIndex(r.row)+1),l=n.doc.resolve(a.posAtIndex(r.col)),c=n.doc.resolve(s.posAtIndex(o.row)+1),d=n.doc.resolve(c.posAtIndex(o.col)),f=n.tr;return f.setSelection(new fr(l,d)),n.apply(f)}),Ee(this,"addRowOrColumn",(n,r)=>{this.editor.exec((o,i)=>{const s=this.setCellSelection(o,r.orientation==="row"?{row:n,col:0}:{row:0,col:n});return r.orientation==="row"?r.side==="above"?m1e(s,i):g1e(s,i):r.side==="left"?u1e(s,i):d1e(s,i)})}),Ee(this,"removeRowOrColumn",(n,r)=>r==="row"?this.editor.exec((o,i)=>{const s=this.setCellSelection(o,{row:n,col:0});return v1e(s,i)}):this.editor.exec((o,i)=>{const s=this.setCellSelection(o,{row:0,col:n});return h1e(s,i)})),Ee(this,"mergeCells",n=>this.editor.exec((r,o)=>{const i=n?this.setCellSelection(r,n.relativeStartCell,n.relativeEndCell):r;return w1e(i,o)})),Ee(this,"splitCell",n=>this.editor.exec((r,o)=>{const i=n?this.setCellSelection(r,n):r;return C1e(i,o)})),Ee(this,"getCellSelection",()=>this.editor.transact(n=>{const r=n.selection;let o=r.$from,i=r.$to;if(xI(r)){const{ranges:y}=r;y.forEach(b=>{o=b.$from.min(o??b.$from),i=b.$to.max(i??b.$to)})}else if(o=n.doc.resolve(r.$from.pos-r.$from.parentOffset-1),i=n.doc.resolve(r.$to.pos-r.$to.parentOffset-1),o.pos===0||i.pos===0)return;const s=n.doc.resolve(o.pos-o.parentOffset-1),a=n.doc.resolve(i.pos-i.parentOffset-1),l=n.doc.resolve(s.pos-s.parentOffset-1),c=o.index(s.depth),d=s.index(l.depth),f=i.index(a.depth),p=a.index(l.depth),g=[];for(let y=d;y<=p;y++)for(let b=c;b<=f;b++)g.push({row:y,col:b});return{from:{row:d,col:c},to:{row:p,col:f},cells:g}})),Ee(this,"getMergeDirection",n=>this.editor.transact(r=>{const o=xI(r.selection)?r.selection:void 0;if(!o||!n||o.ranges.length<=1)return;const i=this.getCellSelection();if(i)return Exe(i.from,i.to,n)?"vertical":"horizontal"})),Ee(this,"cropEmptyRowsOrColumns",(n,r)=>_xe(n,r)),Ee(this,"addRowsOrColumns",(n,r,o)=>xxe(n,r,o)),this.editor=e,this.addProsemirrorPlugin(new cn({key:uv,view:n=>(this.view=new jTe(e,n,r=>{this.emit("update",r)}),this.view),props:{decorations:n=>{if(this.view===void 0||this.view.state===void 0||this.view.state.draggingState===void 0||this.view.tablePos===void 0)return;const r=this.view.state.draggingState.draggedCellOrientation==="row"?this.view.state.rowIndex:this.view.state.colIndex;if(r===void 0)return;const o=[],{block:i,draggingState:s}=this.view.state,{originalIndex:a,draggedCellOrientation:l}=s;if(r===a||!i||l==="row"&&!Xq(i,a,r)||l==="col"&&!Qq(i,a,r))return In.create(n.doc,o);const c=n.doc.resolve(this.view.tablePos+1);return this.view.state.draggingState.draggedCellOrientation==="row"?bI(this.view.state.block,r).forEach(({row:d,col:f})=>{const p=n.doc.resolve(c.posAtIndex(d)+1),g=n.doc.resolve(p.posAtIndex(f)+1),y=g.node(),b=g.pos+(r>a?y.nodeSize-2:0);o.push(dr.widget(b,()=>{const _=document.createElement("div");return _.className="bn-table-drop-cursor",_.style.left="0",_.style.right="0",r>a?_.style.bottom="-2px":_.style.top="-3px",_.style.height="4px",_}))}):wI(this.view.state.block,r).forEach(({row:d,col:f})=>{const p=n.doc.resolve(c.posAtIndex(d)+1),g=n.doc.resolve(p.posAtIndex(f)+1),y=g.node(),b=g.pos+(r>a?y.nodeSize-2:0);o.push(dr.widget(b,()=>{const _=document.createElement("div");return _.className="bn-table-drop-cursor",_.style.top="0",_.style.bottom="0",r>a?_.style.right="-2px":_.style.left="-3px",_.style.width="4px",_}))}),In.create(n.doc,o)}}}))}static key(){return"tableHandles"}onUpdate(e){return this.on("update",e)}}const $Te=yr.create({name:"textAlignment",addGlobalAttributes(){return[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem","tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:t=>t.getAttribute("data-text-alignment"),renderHTML:t=>t.textAlignment==="left"?{}:{"data-text-alignment":t.textAlignment}}}}]}}),FTe=yr.create({name:"blockTextColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{textColor:{default:Br.textColor.default,parseHTML:t=>t.hasAttribute("data-text-color")?t.getAttribute("data-text-color"):Br.textColor.default,renderHTML:t=>t.textColor===Br.textColor.default?{}:{"data-text-color":t.textColor}}}}]}}),HTe=yr.create({name:"trailingNode",addProseMirrorPlugins(){const t=new Hn(this.name);return[new cn({key:t,appendTransaction:(e,n,r)=>{const{doc:o,tr:i,schema:s}=r,a=t.getState(r),l=o.content.size-2,c=s.nodes.blockContainer,d=s.nodes.paragraph;if(a)return i.insert(l,c.create(void 0,d.create()))},state:{init:(e,n)=>{},apply:(e,n)=>{if(!e.docChanged)return n;let r=e.doc.lastChild;if(!r||r.type.name!=="blockGroup")throw new Error("Expected blockGroup");if(r=r.lastChild,!r||r.type.name!=="blockContainer")return!0;const o=r.firstChild;if(!o)throw new Error("Expected blockContent");return r.nodeSize>4||o.type.spec.content!=="inline*"}}})]}}),UTe={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},zTe=Tc.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:t=>{if(typeof t=="string")return!1;const e={};for(const[n,r]of Object.entries(UTe))t.getAttribute(r)&&(e[n]=t.getAttribute(r));return e}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML({HTMLAttributes:t}){var e;const n=document.createElement("div");n.className="bn-block-outer",n.setAttribute("data-node-type","blockOuter");for(const[i,s]of Object.entries(t))i!=="class"&&n.setAttribute(i,s);const r={...((e=this.options.domAttributes)==null?void 0:e.block)||{},...t},o=document.createElement("div");o.className=Er("bn-block",r.class),o.setAttribute("data-node-type",this.name);for(const[i,s]of Object.entries(r))i!=="class"&&o.setAttribute(i,s);return n.appendChild(o),{dom:n,contentDOM:o}}}),GTe=Tc.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML(){return[{tag:"div",getAttrs:t=>typeof t=="string"?!1:t.getAttribute("data-node-type")==="blockGroup"?null:!1}]},renderHTML({HTMLAttributes:t}){var e;const n={...((e=this.options.domAttributes)==null?void 0:e.blockGroup)||{},...t},r=document.createElement("div");r.className=Er("bn-block-group",n.class),r.setAttribute("data-node-type","blockGroup");for(const[o,i]of Object.entries(n))o!=="class"&&r.setAttribute(o,i);return{dom:r,contentDOM:r}}}),qTe=Tc.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"});class KTe extends Wo{constructor({editor:e,collaboration:n}){super(e),Ee(this,"editor"),Ee(this,"collaboration"),Ee(this,"forkedState"),this.editor=e,this.collaboration=n}static key(){return"ForkYDocPlugin"}findTypeInOtherYdoc(e,n){const r=e.doc;if(e._item===null){const o=Array.from(r.share.keys()).find(i=>r.share.get(i)===e);if(o==null)throw new Error("type does not exist in other ydoc");return n.get(o,e.constructor)}else{const o=e._item,i=n.store.clients.get(o.id.client)??[],s=Ua(i,o.id.clock);return i[s].content.type}}get isForkedFromRemote(){return this.forkedState!==void 0}fork(){if(this.isForkedFromRemote)return;const e=this.collaboration.fragment;if(!e)throw new Error("No fragment to fork from");const n=new Mf;iB(n,sB(e.doc));const r=this.findTypeInOtherYdoc(e,n);this.forkedState={undoStack:La.getState(this.editor.prosemirrorState).undoManager.undoStack,originalFragment:e,forkedFragment:r},this.editor._tiptapEditor.unregisterPlugin([lv,La,Qn]),this.editor._tiptapEditor.registerPlugin(new kI(r).plugins[0]),this.editor._tiptapEditor.registerPlugin(new TI({editor:this.editor}).plugins[0]),this.emit("forked",!0)}merge({keepChanges:e}){if(!this.forkedState)return;this.editor._tiptapEditor.unregisterPlugin(Qn),this.editor._tiptapEditor.unregisterPlugin(La);const{originalFragment:n,forkedFragment:r,undoStack:o}=this.forkedState;if(this.editor.extensions.ySyncPlugin=new kI(n),this.editor.extensions.yCursorPlugin=new DK(this.collaboration),this.editor.extensions.yUndoPlugin=new TI({editor:this.editor}),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.ySyncPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yCursorPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yUndoPlugin.plugins[0]),La.getState(this.editor.prosemirrorState).undoManager.undoStack=o,e){const i=sB(r.doc,pSe(n.doc));iB(n.doc,i,this.editor)}this.forkedState=void 0,this.emit("forked",!1)}}const WTe=t=>{var e;const n={},r=YTe(t);for(const i of r)n[i.name]=i;t.collaboration&&(n.ySyncPlugin=new kI(t.collaboration.fragment),n.yUndoPlugin=new TI({editor:t.editor}),(e=t.collaboration.provider)!=null&&e.awareness&&(n.yCursorPlugin=new DK(t.collaboration)),n.forkYDocPlugin=new KTe({editor:t.editor,collaboration:t.collaboration})),n.formattingToolbar=new sTe(t.editor),n.linkToolbar=new hTe(t.editor),n.sideMenu=new kTe(t.editor),n.suggestionMenus=new MTe(t.editor),n.filePanel=new rTe(t.editor),n.placeholder=new yTe(t.editor,t.placeholders),(t.animations??!0)&&(n.animations=new bTe),t.tableHandles&&(n.tableHandles=new BTe(t.editor)),n.nodeSelectionKeyboard=new mTe,n.blockChange=new Qke,n.showSelection=new wTe(t.editor),t.comments&&(n.comments=new tTe(t.editor,t.comments.threadStore,LK.name));const o=t.disableExtensions||[];for(const i of o)delete n[i];return n};let WB=!1;const YTe=t=>{const e=[Wy.ClipboardTextSerializer,Wy.Commands,Wy.Editable,Wy.FocusEvents,Wy.Tabindex,Q1e,yr.create({name:"dropCursor",addProseMirrorPlugins:()=>[t.dropCursor({width:5,color:"#ddeeff",editor:t.editor})]}),Lx.configure({types:["blockContainer","columnList","column"],setIdAttribute:t.setIdAttribute}),aTe,Owe,NTe,OTe,PTe,Nwe.extend({inclusive:!1}).configure({defaultProtocol:BK,protocols:WB?[]:jK}),...Object.values(t.styleSpecs).map(n=>n.implementation.mark.configure({editor:t.editor})),FTe,Xke,$Te,yr.create({name:"OverrideEscape",addKeyboardShortcuts(){return{Escape:()=>t.editor.suggestionMenus.shown?!1:this.editor.commands.blur()}}}),qTe,zTe.configure({editor:t.editor,domAttributes:t.domAttributes}),uTe.configure({editor:t.editor,tabBehavior:t.tabBehavior}),GTe.configure({domAttributes:t.domAttributes}),...Object.values(t.inlineContentSpecs).filter(n=>n.config!=="link"&&n.config!=="text").map(n=>n.implementation.node.configure({editor:t.editor})),...Object.values(t.blockSpecs).flatMap(n=>[...(n.implementation.requiredExtensions||[]).map(r=>r.configure({editor:t.editor,domAttributes:t.domAttributes})),n.implementation.node.configure({editor:t.editor,domAttributes:t.domAttributes})]),Yke(t.editor),Kke(t.editor,t.pasteHandler||(n=>n.defaultPasteHandler())),Ike(t.editor),...t.trailingBlock===void 0||t.trailingBlock?[HTe]:[],...t.comments?[LK]:[]];return WB=!0,t.collaboration||e.push(awe),e};function XTe(t,e){const n=[];return t.forEach((r,o,i)=>{i!==e&&n.push(r)}),Le.from(n)}function QTe(t,e){const n=[];for(let r=0;r<t.childCount;r++)if(t.child(r).type.name==="tableRow")if(n.length>0&&n[n.length-1].type.name==="table"){const o=n[n.length-1],i=o.copy(o.content.addToEnd(t.child(r)));n[n.length-1]=i}else{const o=e.nodes.table.createChecked(void 0,t.child(r));n.push(o)}else n.push(t.child(r));return t=Le.from(n),t}function ZTe(t,e){let n=Le.from(t.content);if(n=QTe(n,e.state.schema),!JTe(n,e))return new Ze(n,t.openStart,t.openEnd);for(let r=0;r<n.childCount;r++)if(n.child(r).type.spec.group==="blockContent"){const o=[n.child(r)];if(r+1<n.childCount&&n.child(r+1).type.name==="blockGroup"){const s=n.child(r+1).child(0).child(0);(s.type.name==="bulletListItem"||s.type.name==="numberedListItem"||s.type.name==="checkListItem")&&(o.push(n.child(r+1)),n=XTe(n,r+1))}const i=e.state.schema.nodes.blockContainer.createChecked(void 0,o);n=n.replaceChild(r,i)}return new Ze(n,t.openStart,t.openEnd)}function JTe(t,e){var n,r;const o=t.childCount===1,i=((n=t.firstChild)==null?void 0:n.type.spec.content)==="inline*",s=((r=t.firstChild)==null?void 0:r.type.spec.content)==="tableRow+";if(o){if(i)return!1;if(s){const a=pr(e.state);if(a.isBlockContainer)return a.blockContent.node.type.spec.content!=="tableRow+"}}return!0}const II=class extends v0e{constructor(e,n){super({...e,content:void 0}),Ee(this,"_state"),Ee(this,"mount",(a,l,c)=>{l?(this.options.element=l,this.createViewAlternative(a,c)):(this.destroy(),this.isInitialized=!1)});const r=this.schema;let o;const i=r.nodes.doc.createAndFill;r.nodes.doc.createAndFill=(...a)=>{if(o)return o;const l=i.apply(r.nodes.doc,a),c=JSON.parse(JSON.stringify(l.toJSON()));return c.content[0].content[0].attrs.id="initialBlockId",o=Cu.fromJSON(r,c),o};let s;try{const a=e?.content.map(l=>yp(l,this.schema,n).toJSON());s=QC({type:"doc",content:[{type:"blockGroup",content:a}]},this.schema,this.options.parseOptions)}catch(a){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",a),new Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(e.content))}this._state=_h.create({doc:s,schema:this.schema})}get state(){return this.view&&(this._state=this.view.state),this._state}dispatch(e){if(!this.view){this._state=this.state.apply(e),this.emit("transaction",{editor:this,transaction:e});return}if(this.view.isDestroyed)return;if(this.isCapturingTransaction){this.dispatchTransaction(e);return}const{state:n,transactions:r}=this.state.applyTransaction(e),o=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),o&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&(this.emit("update",{editor:this,transaction:e}),this.emit("v3-update",{editor:this,transaction:e,appendedTransactions:r.slice(1)}))}forceEnablePlugins(){if(this.view)throw new Error("forcePluginsEnabled called after view has been initialized");this._state=this.state.reconfigure({plugins:this.extensionManager.plugins})}createViewAlternative(e,n){this.contentComponent=n;const r={};this.extensionManager.extensions.forEach(i=>{i.type==="mark"&&i.config.addMarkView&&(r[i.name]=i.config.addMarkView(e))}),this.view=new nO({mount:this.options.element},{...this.options.editorProps,dispatchTransaction:this.dispatch.bind(this),state:this.state,markViews:r,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.commands.focus(this.options.autofocus||this.options.element.getAttribute("data-bn-autofocus")==="true",{scrollIntoView:!1}),this.emit("create",{editor:this}),this.isInitialized=!0}};Ee(II,"create",(t,e)=>{var n,r;const o=(n=globalThis?.window)==null?void 0:n.setTimeout;typeof((r=globalThis?.window)==null?void 0:r.setTimeout)<"u"&&(globalThis.window.setTimeout=()=>0);try{return new II(t,e)}finally{o&&(globalThis.window.setTimeout=o)}});let HK=II;HK.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};const eAe={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};let UK=class zK extends fP{constructor(e){var n,r,o,i,s,a,l,c,d,f,p,g,y,b,_,k;super(),Ee(this,"pmSchema"),Ee(this,"extensions",{}),Ee(this,"headless",!1),Ee(this,"_tiptapEditor"),Ee(this,"elementRenderer",null),Ee(this,"blockCache",new WeakMap),Ee(this,"dictionary"),Ee(this,"schema"),Ee(this,"blockImplementations"),Ee(this,"inlineContentImplementations"),Ee(this,"styleImplementations"),Ee(this,"formattingToolbar"),Ee(this,"linkToolbar"),Ee(this,"sideMenu"),Ee(this,"suggestionMenus"),Ee(this,"filePanel"),Ee(this,"tableHandles"),Ee(this,"comments"),Ee(this,"showSelectionPlugin"),Ee(this,"forkYDocPlugin"),Ee(this,"uploadFile"),Ee(this,"onUploadStartCallbacks",[]),Ee(this,"onUploadEndCallbacks",[]),Ee(this,"resolveFileUrl"),Ee(this,"resolveUsers"),Ee(this,"settings"),Ee(this,"activeTransaction",null),Ee(this,"mount",(R,I)=>{this._tiptapEditor.mount(this,R,I)}),this.options=e;const M=e;if(M.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(M.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(M.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(M.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");this.dictionary=e.dictionary||cxe,this.settings={tables:{splitCells:((n=e?.tables)==null?void 0:n.splitCells)??!1,cellBackgroundColor:((r=e?.tables)==null?void 0:r.cellBackgroundColor)??!1,cellTextColor:((o=e?.tables)==null?void 0:o.cellTextColor)??!1,headers:((i=e?.tables)==null?void 0:i.headers)??!1},codeBlock:{indentLineWithTab:((s=e?.codeBlock)==null?void 0:s.indentLineWithTab)??!0,defaultLanguage:((a=e?.codeBlock)==null?void 0:a.defaultLanguage)??"text",supportedLanguages:((l=e?.codeBlock)==null?void 0:l.supportedLanguages)??{},createHighlighter:((c=e?.codeBlock)==null?void 0:c.createHighlighter)??void 0},heading:{levels:((d=e?.heading)==null?void 0:d.levels)??[1,2,3]}};const N={defaultStyles:!0,schema:e.schema||Kx.create(),_headless:!1,...e,placeholders:{...this.dictionary.placeholders,...e.placeholders}};if(N.comments&&!N.resolveUsers)throw new Error("resolveUsers is required when using comments");this.resolveUsers=N.resolveUsers,this.schema=N.schema,this.blockImplementations=N.schema.blockSpecs,this.inlineContentImplementations=N.schema.inlineContentSpecs,this.styleImplementations=N.schema.styleSpecs,this.extensions=WTe({editor:this,domAttributes:N.domAttributes||{},blockSpecs:this.schema.blockSpecs,styleSpecs:this.schema.styleSpecs,inlineContentSpecs:this.schema.inlineContentSpecs,collaboration:N.collaboration,trailingBlock:N.trailingBlock,disableExtensions:N.disableExtensions,setIdAttribute:N.setIdAttribute,animations:N.animations??!0,tableHandles:Ti("table",this),dropCursor:this.options.dropCursor??axe,placeholders:N.placeholders,tabBehavior:N.tabBehavior,comments:N.comments,pasteHandler:N.pasteHandler}),(((f=N._tiptapOptions)==null?void 0:f.extensions)||[]).forEach(R=>{this.extensions[R.name]=R});for(let R of N.extensions||[]){typeof R=="function"&&(R=R(this));const I=R.constructor.key();if(!I)throw new Error(`Extension ${R.constructor.name} does not have a key method`);if(this.extensions[I])throw new Error(`Extension ${R.constructor.name} already exists with key ${I}`);this.extensions[I]=R}if(Object.entries(N._extensions||{}).forEach(([R,I])=>{const L=typeof I=="function"?I(this):I;if(!("plugin"in L)){this.extensions[R]=L;return}this.extensions[R]=new class extends Wo{static key(){return R}constructor(){super(),this.addProsemirrorPlugin(L.plugin)}get priority(){return L.priority}}}),this.formattingToolbar=this.extensions.formattingToolbar,this.linkToolbar=this.extensions.linkToolbar,this.sideMenu=this.extensions.sideMenu,this.suggestionMenus=this.extensions.suggestionMenus,this.filePanel=this.extensions.filePanel,this.tableHandles=this.extensions.tableHandles,this.comments=this.extensions.comments,this.showSelectionPlugin=this.extensions.showSelection,this.forkYDocPlugin=this.extensions.forkYDocPlugin,N.uploadFile){const R=N.uploadFile;this.uploadFile=async(I,L)=>{this.onUploadStartCallbacks.forEach(z=>z.apply(this,[L]));try{return await R(I,L)}finally{this.onUploadEndCallbacks.forEach(z=>z.apply(this,[L]))}}}this.resolveFileUrl=N.resolveFileUrl,this.headless=N._headless;const j="ySyncPlugin"in this.extensions||"liveblocksExtension"in this.extensions;j&&N.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const B=N.initialContent||(j?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:Lx.options.generateID()}]);if(!Array.isArray(B)||B.length===0)throw new Error("initialContent must be a non-empty array of blocks, received: "+B);const F=[...Object.entries(this.extensions).map(([R,I])=>{if(I instanceof yr||I instanceof Tc||I instanceof Ko)return I;if(!(I instanceof Wo&&!I.plugins.length))return yr.create({name:R,priority:I.priority,addProseMirrorPlugins:()=>I.plugins})})].filter(R=>R!==void 0),D={...eAe,...N._tiptapOptions,content:B,extensions:F,editorProps:{...(p=N._tiptapOptions)==null?void 0:p.editorProps,attributes:{tabIndex:"0",...(y=(g=N._tiptapOptions)==null?void 0:g.editorProps)==null?void 0:y.attributes,...(b=N.domAttributes)==null?void 0:b.editor,class:Er("bn-editor",N.defaultStyles?"bn-default-styles":"",((k=(_=N.domAttributes)==null?void 0:_.editor)==null?void 0:k.class)||"")},transformPasted:ZTe}};this.headless?this.pmSchema=zbe(D.extensions):(this._tiptapEditor=HK.create(D,this.schema.styleSchema),this.pmSchema=this._tiptapEditor.schema),this.pmSchema.cached.blockNoteEditor=this,this.emit("create")}static create(e={}){return new zK(e)}exec(e){if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return e(n,o=>this._tiptapEditor.dispatch(o),r)}canExec(e){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return e(n,void 0,r)}transact(e){if(this.activeTransaction)return e(this.activeTransaction);try{this.activeTransaction=this._tiptapEditor.state.tr;const n=e(this.activeTransaction),r=this.activeTransaction;return this.activeTransaction=null,r&&(r.docChanged||r.selectionSet||r.scrolledIntoView||r.storedMarksSet||!r.isGeneric)&&this._tiptapEditor.dispatch(r),n}finally{this.activeTransaction=null}}extension(e,n=e.key()){const r=this.extensions[n];if(!r)throw new Error(`Extension ${n} not found`);return r}get prosemirrorState(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this._tiptapEditor.state}get prosemirrorView(){return this._tiptapEditor.view}get domElement(){var e;return(e=this.prosemirrorView)==null?void 0:e.dom}isFocused(){var e;return((e=this.prosemirrorView)==null?void 0:e.hasFocus())||!1}focus(){var e;(e=this.prosemirrorView)==null||e.focus()}onUploadStart(e){return this.onUploadStartCallbacks.push(e),()=>{const n=this.onUploadStartCallbacks.indexOf(e);n>-1&&this.onUploadStartCallbacks.splice(n,1)}}onUploadEnd(e){return this.onUploadEndCallbacks.push(e),()=>{const n=this.onUploadEndCallbacks.indexOf(e);n>-1&&this.onUploadEndCallbacks.splice(n,1)}}get topLevelBlocks(){return this.document}get document(){return this.transact(e=>gxe(e.doc,this.pmSchema))}getBlock(e){return this.transact(n=>cke(n.doc,e))}getPrevBlock(e){return this.transact(n=>uke(n.doc,e))}getNextBlock(e){return this.transact(n=>dke(n.doc,e))}getParentBlock(e){return this.transact(n=>fke(n.doc,e))}forEachBlock(e,n=!1){const r=this.document.slice();n&&r.reverse();function o(i){for(const s of i){if(e(s)===!1)return!1;const a=n?s.children.slice().reverse():s.children;if(!o(a))return!1}return!0}o(r)}onEditorContentChange(e){this._tiptapEditor.on("update",e)}onEditorSelectionChange(e){this._tiptapEditor.on("selectionUpdate",e)}getTextCursorPosition(){return this.transact(e=>yke(e))}setTextCursorPosition(e,n="start"){return this.transact(r=>TK(r,e,n))}getSelection(){return this.transact(e=>pke(e))}getSelectionCutBlocks(){return this.transact(e=>gke(e))}setSelection(e,n){return this.transact(r=>mke(r,e,n))}get isEditable(){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return!1}return this._tiptapEditor.isEditable===void 0?!0:this._tiptapEditor.isEditable}set isEditable(e){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return}this._tiptapEditor.options.editable!==e&&this._tiptapEditor.setEditable(e)}insertBlocks(e,n,r="before"){return this.transact(o=>Ixe(o,e,n,r))}updateBlock(e,n){return this.transact(r=>Nxe(r,e,n))}removeBlocks(e){return this.transact(n=>RB(n,e,[]).removedBlocks)}replaceBlocks(e,n){return this.transact(r=>RB(r,e,n))}undo(){return this.options.collaboration?this.exec(nxe):this.exec(vO)}redo(){return this.options.collaboration?this.exec(rxe):this.exec(bO)}insertInlineContent(e,{updateSelection:n=!1}={}){const r=Al(e,this.pmSchema);this.transact(o=>{hke(o,{from:o.selection.from,to:o.selection.to},r,{updateSelection:n})})}getActiveStyles(){return this.transact(e=>{const n={},r=e.selection.$to.marks();for(const o of r){const i=this.schema.styleSchema[o.type.name];if(!i){o.type.name!=="link"&&!o.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",o.type.name);continue}i.propSchema==="boolean"?n[i.type]=!0:n[i.type]=o.attrs.stringValue}return n})}addStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.setMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.setMark(n,{stringValue:r});else throw new Sc(o.propSchema)}}removeStyles(e){for(const n of Object.keys(e))this._tiptapEditor.commands.unsetMark(n)}toggleStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.toggleMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.toggleMark(n,{stringValue:r});else throw new Sc(o.propSchema)}}getSelectedText(){return this.transact(e=>e.doc.textBetween(e.selection.from,e.selection.to))}getSelectedLinkUrl(){return this._tiptapEditor.getAttributes("link").href}createLink(e,n){if(e==="")return;const r=this.pmSchema.mark("link",{href:e});this.transact(o=>{const{from:i,to:s}=o.selection;n?o.insertText(n,i,s).addMark(i,i+n.length,r):o.setSelection(ft.create(o.doc,s)).addMark(i,s,r)})}canNestBlock(){return ake(this)}nestBlock(){kK(this)}canUnnestBlock(){return lke(this)}unnestBlock(){ske(this)}moveBlocksUp(){return rke(this)}moveBlocksDown(){return oke(this)}async blocksToHTMLLossy(e=this.document){return Fx(this.pmSchema,this).exportBlocks(e,{})}async blocksToFullHTML(e){return Vxe(this.pmSchema,this).serializeBlocks(e,{})}async tryParseHTMLToBlocks(e){return RK(e,this.pmSchema)}async blocksToMarkdownLossy(e=this.document){return wke(e,this.pmSchema,this,{})}async tryParseMarkdownToBlocks(e){return Tke(e,this.pmSchema)}updateCollaborationUserInfo(e){if(!this.options.collaboration)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this.extensions.yCursorPlugin.updateUser(e)}beforeChange(e){return this.headless?()=>{}:this.extensions.blockChange.subscribe(n=>e(this,n))}onChange(e){if(this.headless)return;const n=({transaction:r,appendedTransactions:o})=>{e(this,{getChanges:()=>Jq(r,o)})};return this._tiptapEditor.on("v3-update",n),()=>{this._tiptapEditor.off("v3-update",n)}}onSelectionChange(e,n){if(this.headless)return;const r=o=>{o.transaction.getMeta(Qn)&&!n||e(this)};return this._tiptapEditor.on("selectionUpdate",r),()=>{this._tiptapEditor.off("selectionUpdate",r)}}onCreate(e){return this.on("create",e),()=>{this.off("create",e)}}getSelectionBoundingBox(){if(!this.prosemirrorView)return;const{selection:e}=this.prosemirrorState,{ranges:n}=e,r=Math.min(...n.map(i=>i.$from.pos)),o=Math.max(...n.map(i=>i.$to.pos));if(HR(e)){const i=this.prosemirrorView.nodeDOM(r);if(i)return i.getBoundingClientRect()}return ZC(this.prosemirrorView,r,o)}get isEmpty(){const e=this.document;return e.length===0||e.length===1&&e[0].type==="paragraph"&&e[0].content.length===0}openSuggestionMenu(e,n){this.prosemirrorView&&(this.focus(),this.transact(r=>{n!=null&&n.deleteTriggerCharacter&&r.insertText(e),r.scrollIntoView().setMeta(this.suggestionMenus.plugins[0],{triggerCharacter:e,deleteTriggerCharacter:n?.deleteTriggerCharacter||!1,ignoreQueryLength:n?.ignoreQueryLength||!1})}))}getForceSelectionVisible(){return this.showSelectionPlugin.getEnabled()}setForceSelectionVisible(e){this.showSelectionPlugin.setEnabled(e)}convertHtmlToBlockNoteHtml(e){return AK(e.trim()).innerHTML}pasteHTML(e,n=!1){var r;let o=e;n||(o=this.convertHtmlToBlockNoteHtml(e)),o&&((r=this.prosemirrorView)==null||r.pasteHTML(o))}pasteText(e){var n;return(n=this.prosemirrorView)==null?void 0:n.pasteText(e)}async pasteMarkdown(e){return this.pasteHTML(await IK(e))}},HA;async function tAe(){return HA||(HA=(async()=>{const[t,e]=await Promise.all([et(()=>import("./module-DrROFPns.js"),[]),et(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),HA)}async function nAe(t,e){if(!GEe("text",t))return[];const{emojiData:n,emojiMart:r}=await tAe();return(e.trim()===""?Object.values(n.emojis):await r.SearchIndex.search(e)).map(o=>({id:o.skins[0].native,onItemClick:()=>t.insertInlineContent(o.skins[0].native+" ")}))}function MI(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function vg(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&B2(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function GK(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function qK(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function rAe(t){return iAe()?!1:!YB()&&t.width===0&&t.height===0||YB()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function KK(){return/apple/i.test(navigator.vendor)}function YB(){const t=/android/i;return t.test(GK())||t.test(qK())}function oAe(){return GK().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function iAe(){return qK().includes("jsdom/")}function NI(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}function sAe(t){return"nativeEvent"in t}function aAe(t){return t.matches("html,body")}function Wd(t){return t?.ownerDocument||document}function UA(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function ym(t){return"composedPath"in t?t.composedPath()[0]:t.target}const lAe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function cAe(t){return Xs(t)&&t.matches(lAe)}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var uAe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],OI=uAe.join(","),WK=typeof Element>"u",Sb=WK?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,BS=!WK&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},$S=function t(e,n){var r;n===void 0&&(n=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=o===""||o==="true",s=i||n&&e&&t(e.parentNode);return s},dAe=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},fAe=function(e,n,r){if($S(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(OI));return n&&Sb.call(e,OI)&&o.unshift(e),o=o.filter(r),o},hAe=function t(e,n,r){for(var o=[],i=Array.from(e);i.length;){var s=i.shift();if(!$S(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),l=a.length?a:s.children,c=t(l,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:s,candidates:c})}else{var d=Sb.call(s,OI);d&&r.filter(s)&&(n||!e.includes(s))&&o.push(s);var f=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),p=!$S(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(f&&p){var g=t(f===!0?s.children:f.children,!0,r);r.flatten?o.push.apply(o,g):o.push({scopeParent:s,candidates:g})}else i.unshift.apply(i,s.children)}}return o},YK=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},XK=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||dAe(e))&&!YK(e)?0:e.tabIndex},pAe=function(e,n){var r=XK(e);return r<0&&n&&!YK(e)?0:r},mAe=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},QK=function(e){return e.tagName==="INPUT"},gAe=function(e){return QK(e)&&e.type==="hidden"},yAe=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},vAe=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},bAe=function(e){if(!e.name)return!0;var n=e.form||BS(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=vAe(o,e.form);return!i||i===e},wAe=function(e){return QK(e)&&e.type==="radio"},CAe=function(e){return wAe(e)&&!bAe(e)},SAe=function(e){var n,r=e&&BS(e),o=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var s,a,l;for(i=!!((s=o)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(o)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&o;){var c,d,f;r=BS(o),o=(c=r)===null||c===void 0?void 0:c.host,i=!!((d=o)!==null&&d!==void 0&&(f=d.ownerDocument)!==null&&f!==void 0&&f.contains(o))}}return i},XB=function(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},_Ae=function(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=Sb.call(e,"details>summary:first-of-type"),s=i?e.parentElement:e;if(Sb.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var a=e;e;){var l=e.parentElement,c=BS(e);if(l&&!l.shadowRoot&&o(l)===!0)return XB(e);e.assignedSlot?e=e.assignedSlot:!l&&c!==e.ownerDocument?e=c.host:e=l}e=a}if(SAe(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return XB(e);return!1},xAe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return Sb.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},EAe=function(e,n){return!(n.disabled||$S(n)||gAe(n)||_Ae(n,e)||yAe(n)||xAe(n))},QB=function(e,n){return!(CAe(n)||XK(n)<0||!EAe(e,n))},kAe=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},TAe=function t(e){var n=[],r=[];return e.forEach(function(o,i){var s=!!o.scopeParent,a=s?o.scopeParent:o,l=pAe(a,s),c=s?t(o.candidates):a;l===0?s?n.push.apply(n,c):n.push(a):r.push({documentOrder:i,tabIndex:l,item:o,isScope:s,content:c})}),r.sort(mAe).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(n)},ZK=function(e,n){n=n||{};var r;return n.getShadowRoot?r=hAe([e],n.includeContainer,{filter:QB.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:kAe}):r=fAe(e,n.includeContainer,QB.bind(null,n)),TAe(r)};const JK={..._M},AAe=JK.useInsertionEffect,RAe=AAe||(t=>t());function fu(t){const e=E.useRef(()=>{});return RAe(()=>{e.current=t}),E.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}var Li=typeof document<"u"?E.useLayoutEffect:E.useEffect;function PI(){return PI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PI.apply(this,arguments)}let ZB=!1,IAe=0;const JB=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+IAe++;function MAe(){const[t,e]=E.useState(()=>ZB?JB():void 0);return Li(()=>{t==null&&e(JB())},[]),E.useEffect(()=>{ZB=!0},[]),t}const NAe=JK.useId,hP=NAe||MAe;function OAe(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(o=>o!==n))||[])}}}const PAe=E.createContext(null),DAe=E.createContext(null),pP=()=>{var t;return((t=E.useContext(PAe))==null?void 0:t.id)||null},mP=()=>E.useContext(DAe);function u0(t){return"data-floating-ui-"+t}function Ah(t){const e=E.useRef(t);return Li(()=>{e.current=t}),e}const e$=u0("safe-polygon");function rC(t,e,n){return n&&!NI(n)?0:typeof t=="number"?t:t?.[e]}function LAe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,events:i,elements:s}=t,{enabled:a=!0,delay:l=0,handleClose:c=null,mouseOnly:d=!1,restMs:f=0,move:p=!0}=e,g=mP(),y=pP(),b=Ah(c),_=Ah(l),k=Ah(n),M=E.useRef(),N=E.useRef(-1),j=E.useRef(),B=E.useRef(-1),F=E.useRef(!0),D=E.useRef(!1),R=E.useRef(()=>{}),I=E.useRef(!1),L=E.useCallback(()=>{var U;const Q=(U=o.current.openEvent)==null?void 0:U.type;return Q?.includes("mouse")&&Q!=="mousedown"},[o]);E.useEffect(()=>{if(!a)return;function U(Q){let{open:J}=Q;J||(clearTimeout(N.current),clearTimeout(B.current),F.current=!0,I.current=!1)}return i.on("openchange",U),()=>{i.off("openchange",U)}},[a,i]),E.useEffect(()=>{if(!a||!b.current||!n)return;function U(J){L()&&r(!1,J,"hover")}const Q=Wd(s.floating).documentElement;return Q.addEventListener("mouseleave",U),()=>{Q.removeEventListener("mouseleave",U)}},[s.floating,n,r,a,b,L]);const z=E.useCallback(function(U,Q,J){Q===void 0&&(Q=!0),J===void 0&&(J="hover");const Y=rC(_.current,"close",M.current);Y&&!j.current?(clearTimeout(N.current),N.current=window.setTimeout(()=>r(!1,U,J),Y)):Q&&(clearTimeout(N.current),r(!1,U,J))},[_,r]),q=fu(()=>{R.current(),j.current=void 0}),H=fu(()=>{if(D.current){const U=Wd(s.floating).body;U.style.pointerEvents="",U.removeAttribute(e$),D.current=!1}}),ne=fu(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);E.useEffect(()=>{if(!a)return;function U(se){if(clearTimeout(N.current),F.current=!1,d&&!NI(M.current)||f>0&&!rC(_.current,"open"))return;const te=rC(_.current,"open",M.current);te?N.current=window.setTimeout(()=>{k.current||r(!0,se,"hover")},te):n||r(!0,se,"hover")}function Q(se){if(ne())return;R.current();const te=Wd(s.floating);if(clearTimeout(B.current),I.current=!1,b.current&&o.current.floatingContext){n||clearTimeout(N.current),j.current=b.current({...o.current.floatingContext,tree:g,x:se.clientX,y:se.clientY,onClose(){H(),q(),ne()||z(se,!0,"safe-polygon")}});const ce=j.current;te.addEventListener("mousemove",ce),R.current=()=>{te.removeEventListener("mousemove",ce)};return}(M.current==="touch"?!vg(s.floating,se.relatedTarget):!0)&&z(se)}function J(se){ne()||o.current.floatingContext&&(b.current==null||b.current({...o.current.floatingContext,tree:g,x:se.clientX,y:se.clientY,onClose(){H(),q(),ne()||z(se)}})(se))}if(Cr(s.domReference)){var Y;const se=s.domReference;return n&&se.addEventListener("mouseleave",J),(Y=s.floating)==null||Y.addEventListener("mouseleave",J),p&&se.addEventListener("mousemove",U,{once:!0}),se.addEventListener("mouseenter",U),se.addEventListener("mouseleave",Q),()=>{var te;n&&se.removeEventListener("mouseleave",J),(te=s.floating)==null||te.removeEventListener("mouseleave",J),p&&se.removeEventListener("mousemove",U),se.removeEventListener("mouseenter",U),se.removeEventListener("mouseleave",Q)}}},[s,a,t,d,f,p,z,q,H,r,n,k,g,_,b,o,ne]),Li(()=>{var U;if(a&&n&&(U=b.current)!=null&&U.__options.blockPointerEvents&&L()){D.current=!0;const J=s.floating;if(Cr(s.domReference)&&J){var Q;const Y=Wd(s.floating).body;Y.setAttribute(e$,"");const se=s.domReference,te=g==null||(Q=g.nodesRef.current.find(ie=>ie.id===y))==null||(Q=Q.context)==null?void 0:Q.elements.floating;return te&&(te.style.pointerEvents=""),Y.style.pointerEvents="none",se.style.pointerEvents="auto",J.style.pointerEvents="auto",()=>{Y.style.pointerEvents="",se.style.pointerEvents="",J.style.pointerEvents=""}}}},[a,n,y,s,g,b,L]),Li(()=>{n||(M.current=void 0,I.current=!1,q(),H())},[n,q,H]),E.useEffect(()=>()=>{q(),clearTimeout(N.current),clearTimeout(B.current),H()},[a,s.domReference,q,H]);const re=E.useMemo(()=>{function U(Q){M.current=Q.pointerType}return{onPointerDown:U,onPointerEnter:U,onMouseMove(Q){const{nativeEvent:J}=Q;function Y(){!F.current&&!k.current&&r(!0,J,"hover")}d&&!NI(M.current)||n||f===0||I.current&&Q.movementX**2+Q.movementY**2<2||(clearTimeout(B.current),M.current==="touch"?Y():(I.current=!0,B.current=window.setTimeout(Y,f)))}}},[d,r,n,k,f]),V=E.useMemo(()=>({onMouseEnter(){clearTimeout(N.current)},onMouseLeave(U){ne()||z(U.nativeEvent,!1)}}),[z,ne]);return E.useMemo(()=>a?{reference:re,floating:V}:{},[a,re,V])}const DI=()=>{},eW=E.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:DI,setState:DI,isInstantPhase:!1}),VAe=()=>E.useContext(eW);function jAe(t){const{children:e,delay:n,timeoutMs:r=0}=t,[o,i]=E.useReducer((l,c)=>({...l,...c}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),s=E.useRef(null),a=E.useCallback(l=>{i({currentId:l})},[]);return Li(()=>{o.currentId?s.current===null?s.current=o.currentId:o.isInstantPhase||i({isInstantPhase:!0}):(o.isInstantPhase&&i({isInstantPhase:!1}),s.current=null)},[o.currentId,o.isInstantPhase]),E.createElement(eW.Provider,{value:E.useMemo(()=>({...o,setState:i,setCurrentId:a}),[o,a])},e)}function BAe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,floatingId:o}=t,{id:i,enabled:s=!0}=e,a=i??o,l=VAe(),{currentId:c,setCurrentId:d,initialDelay:f,setState:p,timeoutMs:g}=l;return Li(()=>{s&&c&&(p({delay:{open:1,close:rC(f,"close")}}),c!==a&&r(!1))},[s,a,r,p,c,f]),Li(()=>{function y(){r(!1),p({delay:f,currentId:null})}if(s&&c&&!n&&c===a){if(g){const b=window.setTimeout(y,g);return()=>{clearTimeout(b)}}y()}},[s,n,p,c,a,r,f,g]),Li(()=>{s&&(d===DI||!n||d(a))},[s,n,d,a]),l}function zA(t,e){let n=t.filter(o=>{var i;return o.parentId===e&&((i=o.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(o=>{var i;return(i=r)==null?void 0:i.some(s=>{var a;return o.parentId===s.id&&((a=o.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const tW=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function nW(t,e){const n=ZK(t,tW());e==="prev"&&n.reverse();const r=n.indexOf(MI(Wd(t)));return n.slice(r+1)[0]}function $Ae(){return nW(document.body,"next")}function FAe(){return nW(document.body,"prev")}function GA(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!vg(n,r)}function HAe(t){ZK(t,tW()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function t$(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const rW={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let UAe;function n$(t){t.key==="Tab"&&(t.target,clearTimeout(UAe))}const r$=E.forwardRef(function(e,n){const[r,o]=E.useState();Li(()=>(KK()&&o("button"),document.addEventListener("keydown",n$),()=>{document.removeEventListener("keydown",n$)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[u0("focus-guard")]:"",style:rW};return E.createElement("span",PI({},e,i))}),oW=E.createContext(null),o$=u0("portal");function zAe(t){t===void 0&&(t={});const{id:e,root:n}=t,r=hP(),o=qAe(),[i,s]=E.useState(null),a=E.useRef(null);return Li(()=>()=>{i?.remove(),queueMicrotask(()=>{a.current=null})},[i]),Li(()=>{if(!r||a.current)return;const l=e?document.getElementById(e):null;if(!l)return;const c=document.createElement("div");c.id=r,c.setAttribute(o$,""),l.appendChild(c),a.current=c,s(c)},[e,r]),Li(()=>{if(n===null||!r||a.current)return;let l=n||o?.portalNode;l&&!Cr(l)&&(l=l.current),l=l||document.body;let c=null;e&&(c=document.createElement("div"),c.id=e,l.appendChild(c));const d=document.createElement("div");d.id=r,d.setAttribute(o$,""),l=c||l,l.appendChild(d),a.current=d,s(d)},[e,n,r,o]),i}function GAe(t){const{children:e,id:n,root:r,preserveTabOrder:o=!0}=t,i=zAe({id:n,root:r}),[s,a]=E.useState(null),l=E.useRef(null),c=E.useRef(null),d=E.useRef(null),f=E.useRef(null),p=s?.modal,g=s?.open,y=!!s&&!s.modal&&s.open&&o&&!!(r||i);return E.useEffect(()=>{if(!i||!o||p)return;function b(_){i&&GA(_)&&(_.type==="focusin"?t$:HAe)(i)}return i.addEventListener("focusin",b,!0),i.addEventListener("focusout",b,!0),()=>{i.removeEventListener("focusin",b,!0),i.removeEventListener("focusout",b,!0)}},[i,o,p]),E.useEffect(()=>{i&&(g||t$(i))},[g,i]),E.createElement(oW.Provider,{value:E.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:c,beforeInsideRef:d,afterInsideRef:f,portalNode:i,setFocusManagerState:a}),[o,i])},y&&i&&E.createElement(r$,{"data-type":"outside",ref:l,onFocus:b=>{if(GA(b,i)){var _;(_=d.current)==null||_.focus()}else{const k=FAe()||s?.refs.domReference.current;k?.focus()}}}),y&&i&&E.createElement("span",{"aria-owns":i.id,style:rW}),i&&Ts.createPortal(e,i),y&&i&&E.createElement(r$,{"data-type":"outside",ref:c,onFocus:b=>{if(GA(b,i)){var _;(_=f.current)==null||_.focus()}else{const k=$Ae()||s?.refs.domReference.current;k?.focus(),s?.closeOnFocusOut&&s?.onOpenChange(!1,b.nativeEvent,"focus-out")}}}))}const qAe=()=>E.useContext(oW),KAe="data-floating-ui-focusable",WAe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},YAe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},i$=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function iW(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=t,{enabled:s=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:d=!1,referencePressEvent:f="pointerdown",ancestorScroll:p=!1,bubbles:g,capture:y}=e,b=mP(),_=fu(typeof l=="function"?l:()=>!1),k=typeof l=="function"?_:l,M=E.useRef(!1),N=E.useRef(!1),{escapeKey:j,outsidePress:B}=i$(g),{escapeKey:F,outsidePress:D}=i$(y),R=E.useRef(!1),I=fu(re=>{var V;if(!n||!s||!a||re.key!=="Escape"||R.current)return;const U=(V=i.current.floatingContext)==null?void 0:V.nodeId,Q=b?zA(b.nodesRef.current,U):[];if(!j&&(re.stopPropagation(),Q.length>0)){let J=!0;if(Q.forEach(Y=>{var se;if((se=Y.context)!=null&&se.open&&!Y.context.dataRef.current.__escapeKeyBubbles){J=!1;return}}),!J)return}r(!1,sAe(re)?re.nativeEvent:re,"escape-key")}),L=fu(re=>{var V;const U=()=>{var Q;I(re),(Q=ym(re))==null||Q.removeEventListener("keydown",U)};(V=ym(re))==null||V.addEventListener("keydown",U)}),z=fu(re=>{var V;const U=M.current;M.current=!1;const Q=N.current;if(N.current=!1,c==="click"&&Q||U||typeof k=="function"&&!k(re))return;const J=ym(re),Y="["+u0("inert")+"]",se=Wd(o.floating).querySelectorAll(Y);let te=Cr(J)?J:null;for(;te&&!af(te);){const ye=Iu(te);if(af(ye)||!Cr(ye))break;te=ye}if(se.length&&Cr(J)&&!aAe(J)&&!vg(J,o.floating)&&Array.from(se).every(ye=>!vg(te,ye)))return;if(Xs(J)&&ne){const ye=J.clientWidth>0&&J.scrollWidth>J.clientWidth,we=J.clientHeight>0&&J.scrollHeight>J.clientHeight;let Be=we&&re.offsetX>J.clientWidth;if(we&&Fa(J).direction==="rtl"&&(Be=re.offsetX<=J.offsetWidth-J.clientWidth),Be||ye&&re.offsetY>J.clientHeight)return}const ie=(V=i.current.floatingContext)==null?void 0:V.nodeId,ce=b&&zA(b.nodesRef.current,ie).some(ye=>{var we;return UA(re,(we=ye.context)==null?void 0:we.elements.floating)});if(UA(re,o.floating)||UA(re,o.domReference)||ce)return;const ae=b?zA(b.nodesRef.current,ie):[];if(ae.length>0){let ye=!0;if(ae.forEach(we=>{var Be;if((Be=we.context)!=null&&Be.open&&!we.context.dataRef.current.__outsidePressBubbles){ye=!1;return}}),!ye)return}r(!1,re,"outside-press")}),q=fu(re=>{var V;const U=()=>{var Q;z(re),(Q=ym(re))==null||Q.removeEventListener(c,U)};(V=ym(re))==null||V.addEventListener(c,U)});E.useEffect(()=>{if(!n||!s)return;i.current.__escapeKeyBubbles=j,i.current.__outsidePressBubbles=B;let re=-1;function V(se){r(!1,se,"ancestor-scroll")}function U(){window.clearTimeout(re),R.current=!0}function Q(){re=window.setTimeout(()=>{R.current=!1},L_()?5:0)}const J=Wd(o.floating);a&&(J.addEventListener("keydown",F?L:I,F),J.addEventListener("compositionstart",U),J.addEventListener("compositionend",Q)),k&&J.addEventListener(c,D?q:z,D);let Y=[];return p&&(Cr(o.domReference)&&(Y=wu(o.domReference)),Cr(o.floating)&&(Y=Y.concat(wu(o.floating))),!Cr(o.reference)&&o.reference&&o.reference.contextElement&&(Y=Y.concat(wu(o.reference.contextElement)))),Y=Y.filter(se=>{var te;return se!==((te=J.defaultView)==null?void 0:te.visualViewport)}),Y.forEach(se=>{se.addEventListener("scroll",V,{passive:!0})}),()=>{a&&(J.removeEventListener("keydown",F?L:I,F),J.removeEventListener("compositionstart",U),J.removeEventListener("compositionend",Q)),k&&J.removeEventListener(c,D?q:z,D),Y.forEach(se=>{se.removeEventListener("scroll",V)}),window.clearTimeout(re)}},[i,o,a,k,c,n,r,p,s,j,B,I,F,L,z,D,q]),E.useEffect(()=>{M.current=!1},[k,c]);const H=E.useMemo(()=>({onKeyDown:I,[WAe[f]]:re=>{d&&r(!1,re.nativeEvent,"reference-press")}}),[I,r,d,f]),ne=E.useMemo(()=>({onKeyDown:I,onMouseDown(){N.current=!0},onMouseUp(){N.current=!0},[YAe[c]]:()=>{M.current=!0}}),[I,c]);return E.useMemo(()=>s?{reference:H,floating:ne}:{},[s,H,ne])}function XAe(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=hP(),i=E.useRef({}),[s]=E.useState(()=>OAe()),a=pP()!=null,[l,c]=E.useState(r.reference),d=fu((g,y,b)=>{i.current.openEvent=g?y:void 0,s.emit("openchange",{open:g,event:y,reason:b,nested:a}),n?.(g,y,b)}),f=E.useMemo(()=>({setPositionReference:c}),[]),p=E.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return E.useMemo(()=>({dataRef:i,open:e,onOpenChange:d,elements:p,events:s,floatingId:o,refs:f}),[e,d,p,s,o,f])}function Gg(t){t===void 0&&(t={});const{nodeId:e}=t,n=XAe({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[i,s]=E.useState(null),[a,l]=E.useState(null),d=o?.domReference||i,f=E.useRef(null),p=mP();Li(()=>{d&&(f.current=d)},[d]);const g=i7({...t,elements:{...o,...a&&{reference:a}}}),y=E.useCallback(N=>{const j=Cr(N)?{getBoundingClientRect:()=>N.getBoundingClientRect(),contextElement:N}:N;l(j),g.refs.setReference(j)},[g.refs]),b=E.useCallback(N=>{(Cr(N)||N===null)&&(f.current=N,s(N)),(Cr(g.refs.reference.current)||g.refs.reference.current===null||N!==null&&!Cr(N))&&g.refs.setReference(N)},[g.refs]),_=E.useMemo(()=>({...g.refs,setReference:b,setPositionReference:y,domReference:f}),[g.refs,b,y]),k=E.useMemo(()=>({...g.elements,domReference:d}),[g.elements,d]),M=E.useMemo(()=>({...g,...r,refs:_,elements:k,nodeId:e}),[g,_,k,e,r]);return Li(()=>{r.dataRef.current.floatingContext=M;const N=p?.nodesRef.current.find(j=>j.id===e);N&&(N.context=M)}),E.useMemo(()=>({...g,context:M,refs:_,elements:k}),[g,_,k,M])}function QAe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:o,dataRef:i,elements:s}=t,{enabled:a=!0,visibleOnly:l=!0}=e,c=E.useRef(!1),d=E.useRef(),f=E.useRef(!0);E.useEffect(()=>{if(!a)return;const g=_s(s.domReference);function y(){!n&&Xs(s.domReference)&&s.domReference===MI(Wd(s.domReference))&&(c.current=!0)}function b(){f.current=!0}return g.addEventListener("blur",y),g.addEventListener("keydown",b,!0),()=>{g.removeEventListener("blur",y),g.removeEventListener("keydown",b,!0)}},[s.domReference,n,a]),E.useEffect(()=>{if(!a)return;function g(y){let{reason:b}=y;(b==="reference-press"||b==="escape-key")&&(c.current=!0)}return o.on("openchange",g),()=>{o.off("openchange",g)}},[o,a]),E.useEffect(()=>()=>{clearTimeout(d.current)},[]);const p=E.useMemo(()=>({onPointerDown(g){rAe(g.nativeEvent)||(f.current=!1)},onMouseLeave(){c.current=!1},onFocus(g){if(c.current)return;const y=ym(g.nativeEvent);if(l&&Cr(y))try{if(KK()&&oAe())throw Error();if(!y.matches(":focus-visible"))return}catch{if(!f.current&&!cAe(y))return}r(!0,g.nativeEvent,"focus")},onBlur(g){c.current=!1;const y=g.relatedTarget,b=g.nativeEvent,_=Cr(y)&&y.hasAttribute(u0("focus-guard"))&&y.getAttribute("data-type")==="outside";d.current=window.setTimeout(()=>{var k;const M=MI(s.domReference?s.domReference.ownerDocument:document);!y&&M===s.domReference||vg((k=i.current.floatingContext)==null?void 0:k.refs.floating.current,M)||vg(s.domReference,M)||_||r(!1,b,"focus")})}}),[i,s.domReference,r,l]);return E.useMemo(()=>a?{reference:p}:{},[a,p])}const s$="active",a$="selected";function qA(t,e,n){const r=new Map,o=n==="item";let i=t;if(o&&t){const{[s$]:s,[a$]:a,...l}=t;i=l}return{...n==="floating"&&{tabIndex:-1,[KAe]:""},...i,...e.map(s=>{const a=s?s[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((s,a)=>(a&&Object.entries(a).forEach(l=>{let[c,d]=l;if(!(o&&[s$,a$].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof d=="function"){var f;(f=r.get(c))==null||f.push(d),s[c]=function(){for(var p,g=arguments.length,y=new Array(g),b=0;b<g;b++)y[b]=arguments[b];return(p=r.get(c))==null?void 0:p.map(_=>_(...y)).find(_=>_!==void 0)}}}else s[c]=d}),s),{})}}function sW(t){t===void 0&&(t=[]);const e=t.map(a=>a?.reference),n=t.map(a=>a?.floating),r=t.map(a=>a?.item),o=E.useCallback(a=>qA(a,t,"reference"),e),i=E.useCallback(a=>qA(a,t,"floating"),n),s=E.useCallback(a=>qA(a,t,"item"),r);return E.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:s}),[o,i,s])}const ZAe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function JAe(t,e){var n;e===void 0&&(e={});const{open:r,floatingId:o}=t,{enabled:i=!0,role:s="dialog"}=e,a=(n=ZAe.get(s))!=null?n:s,l=hP(),d=pP()!=null,f=E.useMemo(()=>a==="tooltip"||s==="label"?{["aria-"+(s==="label"?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?o:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&d&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[a,o,d,r,l,s]),p=E.useMemo(()=>{const y={id:o,...a&&{role:a}};return a==="tooltip"||s==="label"?y:{...y,...a==="menu"&&{"aria-labelledby":l}}},[a,o,l,s]),g=E.useCallback(y=>{let{active:b,selected:_}=y;const k={role:"option",...b&&{id:o+"-option"}};switch(s){case"select":return{...k,"aria-selected":b&&_};case"combobox":return{...k,...b&&{"aria-selected":!0}}}return{}},[o,s]);return E.useMemo(()=>i?{reference:f,floating:p,item:g}:{},[i,f,p,g])}const l$=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function om(t,e){return typeof t=="function"?t(e):t}function e2e(t,e){const[n,r]=E.useState(t);return t&&!n&&r(!0),E.useEffect(()=>{if(!t&&n){const o=setTimeout(()=>r(!1),e);return()=>clearTimeout(o)}},[t,n,e]),n}function t2e(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:o=250}=e,s=(typeof o=="number"?o:o.close)||0,[a,l]=E.useState("unmounted"),c=e2e(n,s);return!c&&a==="close"&&l("unmounted"),Li(()=>{if(r){if(n){l("initial");const d=requestAnimationFrame(()=>{l("open")});return()=>{cancelAnimationFrame(d)}}l("close")}},[n,r]),{isMounted:c,status:a}}function gP(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:o,common:i,duration:s=250}=e,a=t.placement,l=a.split("-")[0],c=E.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof s=="number",f=(d?s:s.open)||0,p=(d?s:s.close)||0,[g,y]=E.useState(()=>({...om(i,c),...om(n,c)})),{isMounted:b,status:_}=t2e(t,{duration:s}),k=Ah(n),M=Ah(r),N=Ah(o),j=Ah(i);return Li(()=>{const B=om(k.current,c),F=om(N.current,c),D=om(j.current,c),R=om(M.current,c)||Object.keys(B).reduce((I,L)=>(I[L]="",I),{});if(_==="initial"&&y(I=>({transitionProperty:I.transitionProperty,...D,...B})),_==="open"&&y({transitionProperty:Object.keys(R).map(l$).join(","),transitionDuration:f+"ms",...D,...R}),_==="close"){const I=F||B;y({transitionProperty:Object.keys(I).map(l$).join(","),transitionDuration:p+"ms",...D,...I})}},[p,N,k,M,j,f,_,c]),{isMounted:b,styles:g}}var aW={exports:{}},KA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c$;function n2e(){if(c$)return KA;c$=1;var t=De;function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,i=t.useLayoutEffect,s=t.useDebugValue;function a(f,p){var g=p(),y=r({inst:{value:g,getSnapshot:p}}),b=y[0].inst,_=y[1];return i(function(){b.value=g,b.getSnapshot=p,l(b)&&_({inst:b})},[f,g,p]),o(function(){return l(b)&&_({inst:b}),f(function(){l(b)&&_({inst:b})})},[f]),s(g),g}function l(f){var p=f.getSnapshot;f=f.value;try{var g=p();return!n(f,g)}catch{return!0}}function c(f,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return KA.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,KA}aW.exports=n2e();var lW=aW.exports;const r2e=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},o2e=({contentComponent:t})=>{const e=lW.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return De.createElement(De.Fragment,null,Object.values(e))};function i2e(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:E_.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}class s2e extends De.Component{constructor(e){var n;super(e),this.editorContentRef=De.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=i2e(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return De.createElement(De.Fragment,null,De.createElement("div",{ref:r2e(n,this.editorContentRef),...r}),e?.contentComponent&&De.createElement(o2e,{contentComponent:e.contentComponent}))}}const a2e=E.forwardRef((t,e)=>{const n=De.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return De.createElement(s2e,{key:n,innerRef:e,...t})});De.memo(a2e);var WA={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u$;function l2e(){if(u$)return WA;u$=1;var t=De,e=lW;function n(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,i=t.useRef,s=t.useEffect,a=t.useMemo,l=t.useDebugValue;return WA.useSyncExternalStoreWithSelector=function(c,d,f,p,g){var y=i(null);if(y.current===null){var b={hasValue:!1,value:null};y.current=b}else b=y.current;y=a(function(){function k(F){if(!M){if(M=!0,N=F,F=p(F),g!==void 0&&b.hasValue){var D=b.value;if(g(D,F))return j=D}return j=F}if(D=j,r(N,F))return D;var R=p(F);return g!==void 0&&g(D,R)?D:(N=F,j=R)}var M=!1,N,j,B=f===void 0?null:f;return[function(){return k(d())},B===null?void 0:function(){return k(B())}]},[d,f,p,g]);var _=o(c,y[0],y[1]);return s(function(){b.hasValue=!0,b.value=_},[_]),l(_),_},WA}l2e();const c2e=E.createContext({editor:null});c2e.Consumer;const cW=E.createContext({onDragStart:void 0}),uW=()=>E.useContext(cW),u2e=De.forwardRef((t,e)=>{const{onDragStart:n}=uW(),r=t.as||"div";return De.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function d$(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function f$(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.forward_ref)"||t.$$typeof.description==="react.forward_ref"))}function d2e(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.memo)"||t.$$typeof.description==="react.memo"))}function f2e(t){if(d$(t)||f$(t))return!0;if(d2e(t)){const e=t.type;if(e)return d$(e)||f$(e)}return!1}function h2e(){try{if(E.version)return parseInt(E.version.split(".")[0],10)>=19}catch{}return!1}class p2e{constructor(e,{editor:n,props:r={},as:o="div",className:i=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=n,this.props=r,this.element=document.createElement(o),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?Ts.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const n=this.component,r=this.props,o=this.editor,i=h2e(),s=f2e(n),a={...r};a.ref&&!(i||s)&&delete a.ref,!a.ref&&(i||s)&&(a.ref=l=>{this.ref=l}),this.reactElement=De.createElement(n,{...a}),(e=o?.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const n=this.editor;(e=n?.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(n=>{this.element.setAttribute(n,e[n])})}}class m2e extends b0e{constructor(e,n,r){if(super(e,n,r),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const o=this.dom.querySelector("[data-node-view-content]");if(!o)return;o.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(c={})=>this.updateAttributes(c),deleteNode:()=>this.deleteNode(),ref:E.createRef()};if(!this.component.displayName){const c=d=>d.charAt(0).toUpperCase()+d.substring(1);this.component.displayName=c(this.extension.name)}const o={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:c=>{c&&this.contentDOMElement&&c.firstChild!==this.contentDOMElement&&(c.hasAttribute("data-node-view-wrapper")&&c.removeAttribute("data-node-view-wrapper"),c.appendChild(this.contentDOMElement))}},i=this.component,s=E.memo(c=>De.createElement(cW.Provider,{value:o},E.createElement(i,c)));s.displayName="ReactNodeView";let a=this.node.isInline?"span":"div";this.options.as&&(a=this.options.as);const{className:l=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new p2e(s,{editor:this.editor,props:e,as:a,className:`node-${this.node.type.name} ${l}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:n}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,n,r){const o=i=>{this.renderer.updateProps(i),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const i=this.node,s=this.decorations,a=this.innerDecorations;return this.node=e,this.decorations=n,this.innerDecorations=r,this.options.update({oldNode:i,oldDecorations:s,newNode:e,newDecorations:n,oldInnerDecorations:a,innerDecorations:r,updateProps:()=>o({node:e,decorations:n,innerDecorations:r})})}return e===this.node&&this.decorations===n&&this.innerDecorations===r||(this.node=e,this.decorations=n,this.innerDecorations=r,o({node:e,decorations:n,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const n=this.editor.extensionManager.attributes,r=YC(this.node,n);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function g2e(t,e){return n=>n.editor.contentComponent?new m2e(t,n,e):{}}var y2e=Object.defineProperty,dW=t=>{throw TypeError(t)},v2e=(t,e,n)=>e in t?y2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wi=(t,e,n)=>v2e(t,typeof e!="symbol"?e+"":e,n),b2e=(t,e,n)=>e.has(t)||dW("Cannot "+n),w2e=(t,e,n)=>e.has(t)?dW("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),h$=(t,e,n)=>(b2e(t,e,"access private method"),n);const fW=E.createContext(void 0);function Mc(t){return E.useContext(fW)}function Et(t){const e=Mc();if(!(e!=null&&e.editor))throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return e.editor}function yP(t,e,n){const r=Mc();e||(e=r?.editor),E.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onSelectionChange(t,n)},[t,e,n])}function C2e(t,e){const n=Et();e=e||n;const[r,o]=E.useState(()=>{if(t)return e.getSelectionBoundingBox()}),i=E.useCallback(()=>{if(!t)return;const s=e.getSelectionBoundingBox();o(s)},[e,t]);return yP(i,e,!0),E.useEffect(()=>{o(t?e.getSelectionBoundingBox():void 0)},[t,e]),r}function S2e(t){return t.getBoundingClientRect!==void 0}function Of(t,e,n,r){const{refs:o,update:i,context:s,floatingStyles:a,isPositioned:l}=Gg({open:t,...r}),{isMounted:c,styles:d}=gP(s),f=typeof r?.canDismiss=="object"?r.canDismiss:{enabled:r?.canDismiss},p=iW(s,f),{getReferenceProps:g,getFloatingProps:y}=sW([p]);return E.useEffect(()=>{i()},[e,i]),E.useEffect(()=>{e!==null&&(e instanceof HTMLElement||S2e(e)?o.setReference(e):o.setReference({getBoundingClientRect:()=>e}))},[e,o]),E.useMemo(()=>({isMounted:c,ref:o.setFloating,setReference:o.setReference,style:{display:"flex",...d,...a,zIndex:n},getFloatingProps:y,getReferenceProps:g,isPositioned:l}),[l,a,c,o.setFloating,o.setReference,d,n,y,g])}function $u(t){const[e,n]=E.useState();return E.useEffect(()=>t(r=>{n({...r})}),[t]),e}const hW=E.createContext(void 0);function St(){return E.useContext(hW)}const vP=(t={},e=[])=>E.useMemo(()=>{const n=UK.create(t);return window&&(window.ProseMirror=n._tiptapEditor),n},e);function Zt(){return Mc().editor.dictionary}function bP(t,e){const n=Mc();e||(e=n?.editor),E.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onChange(t)},[t,e])}const wP=t=>{const[e,n]=E.useState(!1),[r,o]=E.useState(t.editor.isEmpty),i=St();bP(()=>{o(t.editor.isEmpty)},t.editor);const s=E.useCallback(()=>{n(!0)},[]),a=E.useCallback(()=>{n(!1)},[]);return E.useEffect(()=>{t.editable&&t.autoFocus&&t.editor.focus()},[t.autoFocus,t.editable,t.editor]),w.jsxs(w.Fragment,{children:[w.jsx(i.Comments.Editor,{autoFocus:t.autoFocus,className:"bn-comment-editor",editor:t.editor,onFocus:s,onBlur:a,editable:t.editable}),t.actions&&w.jsx("div",{className:"bn-comment-actions-wrapper",children:w.jsx(t.actions,{isFocused:e,isEmpty:r})})]})},_2e=za(es(Gx.paragraph.implementation.node.config),{}),{textColor:V9e,backgroundColor:j9e,...x2e}=qx,CP=Kx.create({blockSpecs:{paragraph:_2e},styleSpecs:x2e});function E2e(){const t=Et();if(!t.comments)throw new Error("Comments plugin not found");const e=t.comments,n=St(),r=Zt(),o=vP({trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.new_comment}},schema:CP});return w.jsx(n.Comments.Card,{className:"bn-thread",children:w.jsx(wP,{autoFocus:!0,editable:!0,editor:o,actions:({isEmpty:i})=>w.jsx(n.Generic.Toolbar.Root,{className:Er("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:w.jsx(n.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:i,onClick:async()=>{await e.createThread({initialComment:{body:o.document}}),e.stopPendingComment()},children:"Save"})})})})}const k2e=t=>{const e=Et();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=e.comments;E.useEffect(()=>{const d=n.onUpdate(f=>e.setForceSelectionVisible(f.pendingComment));return()=>d()},[n,e]);const r=$u(n.onUpdate.bind(n)),o=C2e(r?.pendingComment),{isMounted:i,ref:s,style:a,getFloatingProps:l}=Of(r?.pendingComment||!1,o||null,5e3,{placement:"bottom",middleware:[Ml(10),Tf(),Ha()],onOpenChange:d=>{d||(n.stopPendingComment(),e.focus())},...t.floatingOptions});if(!i||!r)return null;const c=t.floatingComposer||E2e;return w.jsx("div",{ref:s,style:a,...l(),children:w.jsx(c,{})})};var pW={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},p$=De.createContext&&De.createContext(pW),T2e=["attr","size","title"];function A2e(t,e){if(t==null)return{};var n=R2e(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function R2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function FS(){return FS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FS.apply(this,arguments)}function m$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function HS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m$(Object(n),!0).forEach(function(r){I2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function I2e(t,e,n){return e=M2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M2e(t){var e=N2e(t,"string");return typeof e=="symbol"?e:e+""}function N2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mW(t){return t&&t.map((e,n)=>De.createElement(e.tag,HS({key:n},e.attr),mW(e.child)))}function At(t){return e=>De.createElement(O2e,FS({attr:HS({},t.attr)},e),mW(t.child))}function O2e(t){var e=n=>{var{attr:r,size:o,title:i}=t,s=A2e(t,T2e),a=o||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),De.createElement("svg",FS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:HS(HS({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&De.createElement("title",null,i),t.children)};return p$!==void 0?De.createElement(p$.Consumer,null,n=>e(n)):e(pW)}function P2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(t)}function gW(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(t)}function D2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(t)}function L2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(t)}function SP(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(t)}function V2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(t)}function j2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(t)}function B2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(t)}function $2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(t)}function F2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(t)}function H2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(t)}function g$(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(t)}function US(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(t)}function zS(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(t)}function GS(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function yW(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM22 8V16H23.5V18H22V20H20V18H14.5V16.66L19.5 8H22ZM20 11.133L17.19 16H20V11.133Z"},child:[]}]})(t)}function vW(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8V10H17.6769L17.2126 12.6358C17.5435 12.5472 17.8912 12.5 18.25 12.5C20.4591 12.5 22.25 14.2909 22.25 16.5C22.25 18.7091 20.4591 20.5 18.25 20.5C16.4233 20.5 14.8827 19.2756 14.4039 17.6027L16.3271 17.0519C16.5667 17.8881 17.3369 18.5 18.25 18.5C19.3546 18.5 20.25 17.6046 20.25 16.5C20.25 15.3954 19.3546 14.5 18.25 14.5C17.6194 14.5 17.057 14.7918 16.6904 15.2478L14.8803 14.3439L16 8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function bW(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21.097 8L18.499 12.5C20.7091 12.5 22.5 14.2909 22.5 16.5C22.5 18.7091 20.7091 20.5 18.5 20.5C16.2909 20.5 14.5 18.7091 14.5 16.5C14.5 15.7636 14.699 15.0737 15.0461 14.4811L18.788 8H21.097ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 14.5C17.3954 14.5 16.5 15.3954 16.5 16.5C16.5 17.6046 17.3954 18.5 18.5 18.5C19.6046 18.5 20.5 17.6046 20.5 16.5C20.5 15.3954 19.6046 14.5 18.5 14.5Z"},child:[]}]})(t)}function U2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(t)}function z2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(t)}function y$(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(t)}function G2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(t)}function q2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(t)}function wW(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(t)}function CW(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(t)}function SW(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function _W(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function K2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(t)}function W2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(t)}function xW(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(t)}function Y2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(t)}function X2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(t)}function _P(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(t)}function Q2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(t)}function Z2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(t)}function EW(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(t)}function J2e(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(t)}function eRe(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(t)}function kW(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 18V20H2V18H22ZM2 3.5L10 8.5L2 13.5V3.5ZM22 11V13H12V11H22ZM22 4V6H12V4H22Z"},child:[]}]})(t)}function tRe(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(t)}function TW(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(t)}function nRe(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(t)}function rRe(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(t)}function oRe(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function iRe(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function sRe(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(t)}function aRe(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(t)}function lRe(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(t)}function cRe(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(t)}function v$(t){return At({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(t)}let YA;async function uRe(){return YA||(YA=(async()=>{const[t,e]=await Promise.all([et(()=>import("./module-DrROFPns.js"),[]),et(()=>import("./native-48B9X9Wg.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),YA)}function dRe(t){const e=E.useRef(null),n=E.useRef(null);return n.current&&n.current.update(t),E.useEffect(()=>((async()=>{const{emojiMart:r}=await uRe();n.current=new r.Picker({...t,ref:e})})(),()=>{n.current=null}),[]),De.createElement("div",{ref:e})}const b$=t=>{const[e,n]=E.useState(!1),r=St(),o=Mc();return w.jsxs(r.Generic.Popover.Root,{opened:e,children:[w.jsx(r.Generic.Popover.Trigger,{children:w.jsx("div",{onClick:i=>{i.preventDefault(),i.stopPropagation(),n(!e)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t.children})}),w.jsx(r.Generic.Popover.Content,{variant:"panel-popover",children:w.jsx(dRe,{perLine:7,onClickOutside:()=>n(!1),onEmojiSelect:i=>{t.onEmojiSelect(i),n(!1)},theme:o?.colorSchemePreference})})]})};function fRe(t,e){return xP(t,[e]).get(e)}function xP(t,e){const n=t.comments;if(!n)throw new Error("Comments plugin not found");const r=n.userStore,o=E.useCallback(()=>{const a=new Map;for(const l of e){const c=r.getUser(l);c&&a.set(l,c)}return a},[r,e]),i=E.useMemo(()=>({current:o()}),[o]),s=E.useCallback(a=>{const l=r.subscribe(c=>{i.current=o(),a()});return r.loadUsers(e),l},[r,o,e,i]);return E.useSyncExternalStore(s,()=>i.current)}const hRe=t=>{const e=St(),n=Zt(),r=Et();if(!r.comments)throw new Error("ReactionBadge must be used inside a BlockNote editor with comments enabled");const o=t.comment.reactions.find(l=>l.emoji===t.emoji);if(!o)throw new Error("Trying to render reaction badge for non-existing reaction");const[i,s]=E.useState([]),a=xP(r,i);return w.jsx(e.Generic.Badge.Root,{className:Er("bn-badge","bn-comment-reaction"),text:o.userIds.length.toString(),icon:o.emoji,isSelected:r.comments.threadStore.auth.canDeleteReaction(t.comment,o.emoji),onClick:()=>t.onReactionSelect(o.emoji),onMouseEnter:()=>s(o.userIds),mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:`${Array.from(a.values()).map(l=>l.username).join(`
`)}`},o.emoji)},pRe=({comment:t,thread:e,showResolveButton:n})=>{const r=Zt(),o=vP({initialContent:t.body,trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.edit_comment}},schema:CP},[t.body]),i=St(),[s,a]=E.useState(!1),l=Et();if(!l.comments)throw new Error("Comments plugin not found");const c=l.comments.threadStore,d=E.useCallback(()=>{a(!0)},[]),f=E.useCallback(()=>{o.replaceBlocks(o.document,t.body),a(!1)},[o,t.body]),p=E.useCallback(async R=>{await c.updateComment({commentId:t.id,comment:{body:o.document},threadId:e.id}),a(!1)},[t,e.id,o,c]),g=E.useCallback(async()=>{await c.deleteComment({commentId:t.id,threadId:e.id})},[t,e.id,c]),y=E.useCallback(async R=>{c.auth.canAddReaction(t,R)?await c.addReaction({threadId:e.id,commentId:t.id,emoji:R}):c.auth.canDeleteReaction(t,R)&&await c.deleteReaction({threadId:e.id,commentId:t.id,emoji:R})},[c,t,e.id]),b=E.useCallback(async()=>{await c.resolveThread({threadId:e.id})},[e.id,c]),_=E.useCallback(async()=>{await c.unresolveThread({threadId:e.id})},[e.id,c]),k=fRe(l,t.userId);if(!t.body)return null;let M;const N=c.auth.canAddReaction(t),j=c.auth.canDeleteComment(t),B=c.auth.canUpdateComment(t),F=n&&(e.resolved?c.auth.canUnresolveThread(e):c.auth.canResolveThread(e));s||(M=w.jsxs(i.Generic.Toolbar.Root,{className:Er("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[N&&w.jsx(b$,{onEmojiSelect:R=>y(R.native),children:w.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.add_reaction,variant:"compact",children:w.jsx(v$,{size:16})},"add-reaction")}),F&&(e.resolved?w.jsx(i.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:_,children:w.jsx(P2e,{size:16})},"reopen"):w.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.resolve,variant:"compact",onClick:b,children:w.jsx(rRe,{size:16})},"resolve")),(j||B)&&w.jsxs(i.Generic.Menu.Root,{position:"bottom-start",children:[w.jsx(i.Generic.Menu.Trigger,{children:w.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.more_actions,variant:"compact",children:w.jsx(lRe,{size:16})},"more-actions")}),w.jsxs(i.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[B&&w.jsx(i.Generic.Menu.Item,{icon:w.jsx(D2e,{}),onClick:d,children:r.comments.actions.edit_comment},"edit-comment"),j&&w.jsx(i.Generic.Menu.Item,{icon:w.jsx(iRe,{}),onClick:g,children:r.comments.actions.delete_comment},"delete-comment")]})]})]}));const D=t.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!t.body)throw new Error("soft deletes are not yet supported");return w.jsx(i.Comments.Comment,{authorInfo:k??"loading",timeString:D,edited:t.updatedAt.getTime()!==t.createdAt.getTime(),showActions:"hover",actions:M,className:"bn-thread-comment",children:w.jsx(wP,{autoFocus:s,editor:o,editable:s,actions:t.reactions.length>0||s?({isEmpty:R})=>w.jsxs(w.Fragment,{children:[t.reactions.length>0&&!s&&w.jsxs(i.Generic.Badge.Group,{className:Er("bn-badge-group","bn-comment-reactions"),children:[t.reactions.map(I=>w.jsx(hRe,{comment:t,emoji:I.emoji,onReactionSelect:y},I.emoji)),w.jsx(b$,{onEmojiSelect:I=>y(I.native),children:w.jsx(i.Generic.Badge.Root,{className:Er("bn-badge","bn-comment-add-reaction"),text:"+",icon:w.jsx(v$,{size:16}),mainTooltip:r.comments.actions.add_reaction})})]}),s&&w.jsxs(i.Generic.Toolbar.Root,{variant:"action-toolbar",className:Er("bn-action-toolbar","bn-comment-actions"),children:[w.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.save_button_text,variant:"compact",onClick:p,isDisabled:R,children:r.comments.save_button_text}),w.jsx(i.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:r.comments.cancel_button_text,variant:"compact",onClick:f,children:r.comments.cancel_button_text})]})]}):void 0})})},mRe=({thread:t,maxCommentsBeforeCollapse:e})=>{const n=St(),r=Zt(),o=Et(),i=xP(o,t.resolvedBy?[t.resolvedBy]:[]),s=t.comments.map((a,l)=>w.jsx(pRe,{thread:t,comment:a,showResolveButton:l===0},a.id));if(t.resolved&&t.resolvedUpdatedAt&&t.resolvedBy){if(!i.get(t.resolvedBy))throw new Error(`User ${t.resolvedBy} resolved thread ${t.id}, but their data could not be found.`);const a=t.comments.findLastIndex(l=>t.resolvedUpdatedAt.getTime()>l.createdAt.getTime())+1;s.splice(a,0,w.jsx(n.Comments.Comment,{className:"bn-thread-comment",authorInfo:t.resolvedBy&&i.get(t.resolvedBy)||"loading",timeString:t.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:w.jsx("div",{className:"bn-resolved-text",children:r.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return e&&s.length>e&&s.splice(1,s.length-2,w.jsx(n.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:r.comments.sidebar.more_replies(t.comments.length-2)},"expand-prompt")),s},AW=({thread:t,selected:e,referenceText:n,maxCommentsBeforeCollapse:r,onFocus:o,onBlur:i,tabIndex:s})=>{const a=St(),l=Zt(),c=Et().comments;if(!c)throw new Error("Comments plugin not found");const d=vP({trailingBlock:!1,dictionary:{...l,placeholders:{emptyDocument:l.placeholders.comment_reply}},schema:CP}),f=E.useCallback(async()=>{await c.threadStore.addComment({comment:{body:d.document},threadId:t.id}),d.removeBlocks(d.document)},[c,d,t.id]);return w.jsxs(a.Comments.Card,{className:"bn-thread",headerText:n,onFocus:o,onBlur:i,selected:e,tabIndex:s,children:[w.jsx(a.Comments.CardSection,{className:"bn-thread-comments",children:w.jsx(mRe,{thread:t,maxCommentsBeforeCollapse:e?void 0:r||5})}),e&&w.jsx(a.Comments.CardSection,{className:"bn-thread-composer",children:w.jsx(wP,{autoFocus:!1,editable:!0,editor:d,actions:({isEmpty:p})=>p?null:w.jsx(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:Er("bn-action-toolbar","bn-comment-actions"),children:w.jsx(a.Generic.Toolbar.Button,{mainTooltip:l.comments.save_button_text,variant:"compact",isDisabled:p,onClick:f,children:l.comments.save_button_text})})})})]})};function gRe(t){const e=t.comments;if(!e)throw new Error("Comments plugin not found");const n=e.threadStore,r=E.useRef(void 0);r.current||(r.current=n.getThreads());const o=E.useCallback(i=>n.subscribe(s=>{r.current=s,i()}),[n]);return E.useSyncExternalStore(o,()=>r.current)}const yRe=t=>{const e=Et();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=$u(e.comments.onUpdate.bind(e.comments)),{isMounted:r,ref:o,style:i,getFloatingProps:s,setReference:a}=Of(!!(n!=null&&n.selectedThreadId),null,5e3,{placement:"bottom",middleware:[Ml(10),Tf(),Ha()],onOpenChange:f=>{var p;f||((p=e.comments)==null||p.selectThread(void 0),e.focus())},...t.floatingOptions}),l=E.useCallback(()=>{var f;if(!(n!=null&&n.selectedThreadId))return;const p=(f=e.domElement)==null?void 0:f.querySelector(`[data-bn-thread-id="${n?.selectedThreadId}"]`);p&&a(p)},[a,e,n?.selectedThreadId]);E.useEffect(()=>{if(n!=null&&n.selectedThreadId)return e.onChange(()=>{l()})},[e,l,n?.selectedThreadId]),E.useLayoutEffect(l,[l]);const c=gRe(e);if(!r||!n||!n.selectedThreadId)return null;const d=t.floatingThread||AW;return w.jsx("div",{ref:o,style:i,...s(),children:w.jsx(d,{thread:c.get(n.selectedThreadId),selected:!0})})},vRe=t=>{const e=St(),n=Zt(),{block:r}=t,o=Et(),[i,s]=E.useState(""),a=E.useCallback(d=>{s(d.currentTarget.value)},[]),l=E.useCallback(d=>{d.key==="Enter"&&(d.preventDefault(),o.updateBlock(r,{props:{name:kB(i),url:i}}))},[o,r,i]),c=E.useCallback(()=>{o.updateBlock(r,{props:{name:kB(i),url:i}})},[o,r,i]);return w.jsxs(e.FilePanel.TabPanel,{className:"bn-tab-panel",children:[w.jsx(e.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:i,onChange:a,onKeyDown:l,"data-test":"embed-input"}),w.jsx(e.FilePanel.Button,{className:"bn-button",onClick:c,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[r.type]||n.file_panel.embed.embed_button.file})]})},bRe=t=>{var e;const n=St(),r=Zt(),{block:o,setLoading:i}=t,s=Et(),[a,l]=E.useState(!1);E.useEffect(()=>{a&&setTimeout(()=>{l(!1)},3e3)},[a]);const c=E.useCallback(p=>{if(p===null)return;async function g(y){if(i(!0),s.uploadFile!==void 0)try{let b=await s.uploadFile(y,o.id);typeof b=="string"&&(b={props:{name:y.name,url:b}}),s.updateBlock(o,b)}catch{l(!0)}finally{i(!1)}}g(p)},[o,s,i]),d=s.schema.blockSchema[o.type],f=d.isFileBlock&&(e=d.fileBlockAccept)!=null&&e.length?d.fileBlockAccept.join(","):"*/*";return w.jsxs(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[w.jsx(n.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:f,placeholder:r.file_panel.upload.file_placeholder[o.type]||r.file_panel.upload.file_placeholder.file,value:null,onChange:c}),a&&w.jsx("div",{className:"bn-error-text",children:r.file_panel.upload.upload_error})]})},RW=t=>{const e=St(),n=Zt(),r=Et(),[o,i]=E.useState(!1),s=t.tabs??[...r.uploadFile!==void 0?[{name:n.file_panel.upload.title,tabPanel:w.jsx(bRe,{block:t.block,setLoading:i})}]:[],{name:n.file_panel.embed.title,tabPanel:w.jsx(vRe,{block:t.block})}],[a,l]=E.useState(t.defaultOpenTab||s[0].name);return w.jsx(e.FilePanel.Root,{className:"bn-panel",defaultOpenTab:a,openTab:a,setOpenTab:l,tabs:s,loading:o})},wRe=t=>{const e=Et();if(!e.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");const n=$u(e.filePanel.onUpdate.bind(e.filePanel)),{isMounted:r,ref:o,style:i,getFloatingProps:s}=Of(n?.show||!1,n?.referencePos||null,5e3,{placement:"bottom",middleware:[Ml(10),Ha()],onOpenChange:f=>{f||(e.filePanel.closeMenu(),e.focus())},...t.floatingOptions});if(!r||!n)return null;const{show:a,referencePos:l,...c}=n,d=t.filePanel||RW;return w.jsx("div",{ref:o,style:i,...s(),children:w.jsx(d,{...c})})};function CRe(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Pf(t,e){bP(t,e),yP(t,e)}function EP(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function Rs(t){const e=Mc();if(t||(t=e?.editor),!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");const n=t,[r,o]=E.useState(()=>{var s;return((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block]}),i=E.useCallback(()=>{var s;return o(((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block])},[n]);return Pf(i,n),r}const SRe={bold:F2e,italic:G2e,underline:Q2e,strike:Y2e,code:L2e};function _Re(t,e){return t in e.schema.styleSchema&&e.schema.styleSchema[t].type===t&&e.schema.styleSchema[t].propSchema==="boolean"}const hu=t=>{const e=Zt(),n=St(),r=Et(),o=_Re(t.basicTextStyle,r),i=Rs(r),[s,a]=E.useState(t.basicTextStyle in r.getActiveStyles());Pf(()=>{o&&a(t.basicTextStyle in r.getActiveStyles())},r);const l=d=>{if(r.focus(),!!o){if(r.schema.styleSchema[d].propSchema!=="boolean")throw new Error("can only toggle boolean styles");r.toggleStyles({[d]:!0})}};if(!E.useMemo(()=>o?!!i.find(d=>d.content!==void 0):!1,[o,i])||!r.isEditable)return null;const c=SRe[t.basicTextStyle];return w.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":t.basicTextStyle,onClick:()=>l(t.basicTextStyle),isSelected:s,label:e.formatting_toolbar[t.basicTextStyle].tooltip,mainTooltip:e.formatting_toolbar[t.basicTextStyle].tooltip,secondaryTooltip:Gs(e.formatting_toolbar[t.basicTextStyle].secondary_tooltip,e.generic.ctrl_shortcut),icon:w.jsx(c,{})})},LI=t=>{const e=t.textColor||"default",n=t.backgroundColor||"default",r=t.size||16,o=E.useMemo(()=>({pointerEvents:"none",fontSize:(r*.75).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}),[r]);return w.jsx("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":e,style:o,children:"A"})},w$=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],Wx=t=>{const e=St(),n=Zt();return w.jsxs(w.Fragment,{children:[w.jsx(()=>t.text?w.jsxs(w.Fragment,{children:[w.jsx(e.Generic.Menu.Label,{children:n.color_picker.text_title}),w$.map(r=>w.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.text.setColor(r)},"data-test":"text-color-"+r,icon:w.jsx(LI,{textColor:r,size:t.iconSize}),checked:t.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r))]}):null,{}),w.jsx(()=>t.background?w.jsxs(w.Fragment,{children:[w.jsx(e.Generic.Menu.Label,{children:n.color_picker.background_title}),w$.map(r=>w.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.background.setColor(r)},"data-test":"background-color-"+r,icon:w.jsx(LI,{backgroundColor:r,size:t.iconSize}),checked:t.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r))]}):null,{})]})};function C$(t,e){return`${t}Color`in e.schema.styleSchema&&e.schema.styleSchema[`${t}Color`].type===`${t}Color`&&e.schema.styleSchema[`${t}Color`].propSchema==="string"}const IW=()=>{const t=St(),e=Zt(),n=Et(),r=C$("text",n),o=C$("background",n),i=Rs(n),[s,a]=E.useState(r&&n.getActiveStyles().textColor||"default"),[l,c]=E.useState(o&&n.getActiveStyles().backgroundColor||"default");Pf(()=>{r&&a(n.getActiveStyles().textColor||"default"),o&&c(n.getActiveStyles().backgroundColor||"default")},n);const d=E.useCallback(p=>{if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");p==="default"?n.removeStyles({textColor:p}):n.addStyles({textColor:p}),setTimeout(()=>{n.focus()})},[n,r]),f=E.useCallback(p=>{if(!o)throw Error("Tried to set background color, but style does not exist in editor schema.");p==="default"?n.removeStyles({backgroundColor:p}):n.addStyles({backgroundColor:p}),setTimeout(()=>{n.focus()})},[o,n]);return!E.useMemo(()=>{if(!r&&!o)return!1;for(const p of i)if(p.content!==void 0)return!0;return!1},[o,i,r])||!n.isEditable?null:w.jsxs(t.Generic.Menu.Root,{children:[w.jsx(t.Generic.Menu.Trigger,{children:w.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:e.formatting_toolbar.colors.tooltip,mainTooltip:e.formatting_toolbar.colors.tooltip,icon:w.jsx(LI,{textColor:s,backgroundColor:l,size:20})})}),w.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:w.jsx(Wx,{text:r?{color:s,setColor:d}:void 0,background:o?{color:l,setColor:f}:void 0})})]})},S$=t=>{for(const e of jK)if(t.startsWith(e))return t;return`${BK}://${t}`},MW=t=>{const e=St(),n=Zt(),{url:r,text:o,editLink:i,showTextField:s}=t,[a,l]=E.useState(r),[c,d]=E.useState(o);E.useEffect(()=>{l(r),d(o)},[o,r]);const f=E.useCallback(b=>{b.key==="Enter"&&(b.preventDefault(),i(S$(a),c))},[i,a,c]),p=E.useCallback(b=>l(b.currentTarget.value),[]),g=E.useCallback(b=>d(b.currentTarget.value),[]),y=E.useCallback(()=>i(S$(a),c),[i,a,c]);return w.jsxs(e.Generic.Form.Root,{children:[w.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:w.jsx(wW,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:a,onKeyDown:f,onChange:p,onSubmit:y}),s!==!1&&w.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:w.jsx(_P,{}),placeholder:n.link_toolbar.form.title_placeholder,value:c,onKeyDown:f,onChange:g,onSubmit:y})]})};function xRe(t){return"link"in t.schema.inlineContentSchema&&t.schema.inlineContentSchema.link==="link"}const NW=()=>{var t;const e=Et(),n=St(),r=Zt(),o=xRe(e),i=Rs(e),[s,a]=E.useState(!1),[l,c]=E.useState(e.getSelectedLinkUrl()||""),[d,f]=E.useState(e.getSelectedText());Pf(()=>{f(e.getSelectedText()||""),c(e.getSelectedLinkUrl()||"")},e),E.useEffect(()=>{var y;const b=_=>{(_.ctrlKey||_.metaKey)&&_.key==="k"&&(a(!0),_.preventDefault())};return(y=e.prosemirrorView)==null||y.dom.addEventListener("keydown",b),()=>{var _;(_=e.prosemirrorView)==null||_.dom.removeEventListener("keydown",b)}},[(t=e.prosemirrorView)==null?void 0:t.dom]);const p=E.useCallback(y=>{e.createLink(y),e.focus()},[e]),g=e.transact(y=>xI(y.selection));return!E.useMemo(()=>{if(!o)return!1;for(const y of i)if(y.content===void 0)return!1;return!g},[o,i,g])||!("link"in e.schema.inlineContentSchema)||!e.isEditable?null:w.jsxs(n.Generic.Popover.Root,{opened:s,children:[w.jsx(n.Generic.Popover.Trigger,{children:w.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:r.formatting_toolbar.link.tooltip,mainTooltip:r.formatting_toolbar.link.tooltip,secondaryTooltip:Gs(r.formatting_toolbar.link.secondary_tooltip,r.generic.ctrl_shortcut),icon:w.jsx(wW,{}),onClick:()=>a(!0)})}),w.jsx(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:w.jsx(MW,{url:l,text:d,editLink:p,showTextField:!1})})]})},OW=()=>{const t=Zt(),e=St(),n=Et(),[r,o]=E.useState(),i=Rs(n),s=E.useMemo(()=>{if(i.length!==1)return;const c=i[0];if(l0(c,n))return o(c.props.caption),c},[n,i]),a=E.useCallback(c=>{s&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(s,{props:{caption:r}}))},[r,n,s]),l=E.useCallback(c=>o(c.currentTarget.value),[]);return!s||c0(s,n)||!n.isEditable?null:w.jsxs(e.Generic.Popover.Root,{children:[w.jsx(e.Generic.Popover.Trigger,{children:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_caption.tooltip,mainTooltip:t.formatting_toolbar.file_caption.tooltip,icon:w.jsx(y$,{}),isSelected:s.props.caption!==""})}),w.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:w.jsx(e.Generic.Form.Root,{children:w.jsx(e.Generic.Form.TextInput,{name:"file-caption",icon:w.jsx(y$,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_caption.input_placeholder,onKeyDown:a,onChange:l})})})]})},ERe=()=>{const t=Zt(),e=St(),n=Et(),r=Rs(n),o=E.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(l0(s,n))return s},[n,r]),i=E.useCallback(()=>{n.focus(),n.removeBlocks([o])},[n,o]);return!o||c0(o,n)||!n.isEditable?null:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,mainTooltip:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,icon:w.jsx(oRe,{}),onClick:i})},kRe=()=>{const t=Zt(),e=St(),n=Et(),[r,o]=E.useState(),i=Rs(n),s=E.useMemo(()=>{if(i.length!==1)return;const c=i[0];if(l0(c,n))return o(c.props.name),c},[n,i]),a=E.useCallback(c=>{s&&c.key==="Enter"&&(c.preventDefault(),n.updateBlock(s,{props:{name:r}}))},[r,n,s]),l=E.useCallback(c=>o(c.currentTarget.value),[]);return!s||c0(s,n)||!n.isEditable?null:w.jsxs(e.Generic.Popover.Root,{children:[w.jsx(e.Generic.Popover.Trigger,{children:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_rename.tooltip[s.type]||t.formatting_toolbar.file_rename.tooltip.file,mainTooltip:t.formatting_toolbar.file_rename.tooltip[s.type]||t.formatting_toolbar.file_rename.tooltip.file,icon:w.jsx(g$,{})})}),w.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:w.jsx(e.Generic.Form.Root,{children:w.jsx(e.Generic.Form.TextInput,{name:"file-name",icon:w.jsx(g$,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_rename.input_placeholder[s.type]||t.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:a,onChange:l})})})]})},PW=()=>{const t=Zt(),e=St(),n=Et(),r=Rs(n),[o,i]=E.useState(!1);E.useEffect(()=>{i(!1)},[r]);const s=r.length===1?r[0]:void 0;return s===void 0||!l0(s,n)||!n.isEditable?null:w.jsxs(e.Generic.Popover.Root,{opened:o,position:"bottom",children:[w.jsx(e.Generic.Popover.Trigger,{children:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",onClick:()=>i(!o),isSelected:o,mainTooltip:t.formatting_toolbar.file_replace.tooltip[s.type]||t.formatting_toolbar.file_replace.tooltip.file,label:t.formatting_toolbar.file_replace.tooltip[s.type]||t.formatting_toolbar.file_replace.tooltip.file,icon:w.jsx(eRe,{})})}),w.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:w.jsx(RW,{block:s})})]})},DW=()=>{const t=Zt(),e=St(),n=Et(),r=Rs(n),[o,i]=E.useState(()=>n.canNestBlock());Pf(()=>{i(n.canNestBlock())},n);const s=E.useCallback(()=>{n.focus(),n.nestBlock()},[n]);return!E.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:w.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:s,isDisabled:!o,label:t.formatting_toolbar.nest.tooltip,mainTooltip:t.formatting_toolbar.nest.tooltip,secondaryTooltip:Gs(t.formatting_toolbar.nest.secondary_tooltip,t.generic.ctrl_shortcut),icon:w.jsx(z2e,{})})},LW=()=>{const t=Zt(),e=St(),n=Et(),r=Rs(n),[o,i]=E.useState(()=>n.canUnnestBlock());Pf(()=>{i(n.canUnnestBlock())},n);const s=E.useCallback(()=>{n.focus(),n.unnestBlock()},[n]);return!E.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:w.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:s,isDisabled:!o,label:t.formatting_toolbar.unnest.tooltip,mainTooltip:t.formatting_toolbar.unnest.tooltip,secondaryTooltip:Gs(t.formatting_toolbar.unnest.secondary_tooltip,t.generic.ctrl_shortcut),icon:w.jsx(U2e,{})})},TRe=t=>[{name:t.slash_menu.paragraph.title,type:"paragraph",icon:_P,isSelected:e=>e.type==="paragraph"},{name:t.slash_menu.heading.title,type:"heading",props:{level:1},icon:US,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===1},{name:t.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:zS,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===2},{name:t.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:GS,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===3},{name:t.slash_menu.heading_4.title,type:"heading",props:{level:4},icon:yW,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===4},{name:t.slash_menu.heading_5.title,type:"heading",props:{level:5},icon:vW,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===5},{name:t.slash_menu.heading_6.title,type:"heading",props:{level:6},icon:bW,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===6},{name:t.slash_menu.toggle_heading.title,type:"heading",props:{level:1,isToggleable:!0},icon:US,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===1&&"isToggleable"in e.props&&e.props.isToggleable},{name:t.slash_menu.toggle_heading_2.title,type:"heading",props:{level:2,isToggleable:!0},icon:zS,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===2&&"isToggleable"in e.props&&e.props.isToggleable},{name:t.slash_menu.toggle_heading_3.title,type:"heading",props:{level:3,isToggleable:!0},icon:GS,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===3&&"isToggleable"in e.props&&e.props.isToggleable},{name:t.slash_menu.quote.title,type:"quote",icon:xW,isSelected:e=>e.type==="quote"},{name:t.slash_menu.toggle_list.title,type:"toggleListItem",icon:kW,isSelected:e=>e.type==="toggleListItem"},{name:t.slash_menu.bullet_list.title,type:"bulletListItem",icon:_W,isSelected:e=>e.type==="bulletListItem"},{name:t.slash_menu.numbered_list.title,type:"numberedListItem",icon:SW,isSelected:e=>e.type==="numberedListItem"},{name:t.slash_menu.check_list.title,type:"checkListItem",icon:CW,isSelected:e=>e.type==="checkListItem"}],VW=t=>{const e=St(),n=Zt(),r=Et(),o=Rs(r),[i,s]=E.useState(r.getTextCursorPosition().block),a=E.useMemo(()=>(t.items||TRe(n)).filter(d=>d.type in r.schema.blockSchema),[r,n,t.items]),l=E.useMemo(()=>a.find(d=>d.type===i.type)!==void 0,[i.type,a]),c=E.useMemo(()=>{const d=f=>{r.focus(),r.transact(()=>{for(const p of o)r.updateBlock(p,{type:f.type,props:f.props})})};return a.map(f=>{const p=f.icon;return{text:f.name,icon:w.jsx(p,{size:16}),onClick:()=>d(f),isSelected:f.isSelected(i)}})},[i,a,r,o]);return Pf(()=>{s(r.getTextCursorPosition().block)},r),!l||!r.isEditable?null:w.jsx(e.FormattingToolbar.Select,{className:"bn-select",items:c})},ARe=()=>{const t=Zt(),e=St(),n=Et(),r=E.useCallback(()=>{var o;(o=n.comments)==null||o.startPendingComment(),n.formattingToolbar.closeMenu()},[n]);return n.comments?w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:w.jsx(gW,{}),onClick:r}):null},RRe=()=>{const t=Zt(),e=St(),n=Et(),r=E.useCallback(()=>{n._tiptapEditor.chain().focus().addPendingComment().run()},[n]);return!n._tiptapEditor.commands.addPendingComment||!n.isEditable?null:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:w.jsx(gW,{}),onClick:r})};function VI(t,e){try{const n=new URL(t,e);if(n.protocol!=="javascript:")return n.href}catch{}return"#"}const IRe=()=>{const t=Zt(),e=St(),n=Et(),r=Rs(n),o=E.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(l0(s,n))return s},[n,r]),i=E.useCallback(()=>{o&&o.props.url&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(o.props.url).then(s=>window.open(VI(s,window.location.href))):window.open(VI(o.props.url,window.location.href)))},[n,o]);return!o||c0(o,n)?null:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,mainTooltip:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,icon:w.jsx(sRe,{}),onClick:i})},MRe=()=>{const t=Zt(),e=St(),n=Et(),r=Rs(n),o=E.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(KEe(s,n))return s},[n,r]),i=E.useCallback(()=>{o&&n.updateBlock(o,{props:{showPreview:!o.props.showPreview}})},[n,o]);return!o||c0(o,n)||!n.isEditable?null:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:t.formatting_toolbar.file_preview_toggle.tooltip,icon:w.jsx(J2e,{}),isSelected:o.props.showPreview,onClick:i})},NRe=()=>{const t=Zt(),e=St(),n=Et(),r=Rs(n),o=E.useMemo(()=>{var s;if(r.length!==1)return;const a=r[0];if(a.type==="table")return(s=n.tableHandles)==null?void 0:s.getMergeDirection(a)},[n,r]),i=E.useCallback(()=>{var s;(s=n.tableHandles)==null||s.mergeCells()},[n]);return!n.isEditable||o===void 0||!n.settings.tables.splitCells?null:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:t.formatting_toolbar.table_cell_merge.tooltip,icon:o==="horizontal"?w.jsx(K2e,{}):w.jsx(W2e,{}),onClick:i})},ORe={left:B2e,center:V2e,right:$2e,justify:j2e},zm=t=>{const e=St(),n=Zt(),r=Et(),o=Rs(r),i=E.useMemo(()=>{var l;const c=o[0];if(_I("textAlignment",c,r))return c.props.textAlignment;if(c.type==="table"){const d=(l=r.tableHandles)==null?void 0:l.getCellSelection();if(!d)return;const f=d.cells.map(({row:g,col:y})=>Sf(c.content.rows[g].cells[y]).props.textAlignment),p=f[0];if(f.every(g=>g===p))return p}},[r,o]),s=E.useCallback(l=>{var c;r.focus();for(const d of o)if(xm("textAlignment",d.type,r))r.updateBlock(d,{props:{textAlignment:l}});else if(d.type==="table"){const f=(c=r.tableHandles)==null?void 0:c.getCellSelection();if(!f)continue;const p=d.content.rows.map(g=>({...g,cells:g.cells.map(y=>Sf(y))}));f.cells.forEach(({row:g,col:y})=>{p[g].cells[y].props.textAlignment=l}),r.updateBlock(d,{type:"table",content:{...d.content,type:"tableContent",rows:p}}),r.setTextCursorPosition(d)}},[r,o]);if(!E.useMemo(()=>!!o.find(l=>"textAlignment"in l.props||l.type==="table"&&l.children),[o])||!r.isEditable)return null;const a=ORe[t.textAlignment];return w.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${t.textAlignment.slice(0,1).toUpperCase()+t.textAlignment.slice(1)}`,onClick:()=>s(t.textAlignment),isSelected:i===t.textAlignment,label:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,mainTooltip:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,icon:w.jsx(a,{})})},jW=t=>[w.jsx(VW,{items:t},"blockTypeSelect"),w.jsx(NRe,{},"tableCellMergeButton"),w.jsx(OW,{},"fileCaptionButton"),w.jsx(PW,{},"replaceFileButton"),w.jsx(kRe,{},"fileRenameButton"),w.jsx(ERe,{},"fileDeleteButton"),w.jsx(IRe,{},"fileDownloadButton"),w.jsx(MRe,{},"filePreviewButton"),w.jsx(hu,{basicTextStyle:"bold"},"boldStyleButton"),w.jsx(hu,{basicTextStyle:"italic"},"italicStyleButton"),w.jsx(hu,{basicTextStyle:"underline"},"underlineStyleButton"),w.jsx(hu,{basicTextStyle:"strike"},"strikeStyleButton"),w.jsx(zm,{textAlignment:"left"},"textAlignLeftButton"),w.jsx(zm,{textAlignment:"center"},"textAlignCenterButton"),w.jsx(zm,{textAlignment:"right"},"textAlignRightButton"),w.jsx(IW,{},"colorStyleButton"),w.jsx(DW,{},"nestBlockButton"),w.jsx(LW,{},"unnestBlockButton"),w.jsx(NW,{},"createLinkButton"),w.jsx(ARe,{},"addCommentButton"),w.jsx(RRe,{},"addTiptapCommentButton")],kP=t=>{const e=St();return w.jsx(e.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:t.children||jW(t.blockTypeSelectItems)})},_$=t=>{switch(t){case"left":return"top-start";case"center":return"top";case"right":return"top-end";default:return"top-start"}},TP=t=>{const e=E.useRef(null),n=Et(),[r,o]=E.useState(()=>{const p=n.getTextCursorPosition().block;return"textAlignment"in p.props?_$(p.props.textAlignment):"top-start"});Pf(()=>{const p=n.getTextCursorPosition().block;"textAlignment"in p.props?o(_$(p.props.textAlignment)):o("top-start")},n);const i=$u(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),{isMounted:s,ref:a,style:l,getFloatingProps:c}=Of(i?.show||!1,i?.referencePos||null,3e3,{placement:r,middleware:[Ml(10),Tf(),Ha()],onOpenChange:(p,g)=>{p||(n.formattingToolbar.closeMenu(),n.focus())},canDismiss:{enabled:!0,escapeKey:!0,outsidePress:p=>{var g;const y=(g=n._tiptapEditor)==null?void 0:g.view;return!y||!p.target?!1:!CRe(p,y.dom.parentElement)}},...t.floatingOptions}),d=E.useMemo(()=>EP([e,a]),[e,a]);if(!s||!i)return null;if(!i.show&&e.current)return w.jsx("div",{ref:d,style:l,dangerouslySetInnerHTML:{__html:e.current.innerHTML}});const f=t.formattingToolbar||kP;return w.jsx("div",{ref:d,style:l,...c(),children:w.jsx(f,{})})},PRe=t=>{const e=St(),n=Zt();return w.jsx(e.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:t.deleteLink,icon:w.jsx(q2e,{})})},DRe=t=>{const e=St(),n=Zt();return w.jsxs(e.Generic.Popover.Root,{children:[w.jsx(e.Generic.Popover.Trigger,{children:w.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),w.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:w.jsx(MW,{...t})})]})},LRe=t=>{const e=St(),n=Zt();return w.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(VI(t.url,window.location.href),"_blank")},icon:w.jsx(aRe,{})})},VRe=t=>{const e=St();return t.children?w.jsx(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:t.children}):w.jsxs(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:t.stopHideTimer,onMouseLeave:t.startHideTimer,children:[w.jsx(DRe,{url:t.url,text:t.text,editLink:t.editLink}),w.jsx(LRe,{url:t.url}),w.jsx(PRe,{deleteLink:t.deleteLink})]})},jRe=t=>{const e=Et(),n={deleteLink:e.linkToolbar.deleteLink,editLink:e.linkToolbar.editLink,startHideTimer:e.linkToolbar.startHideTimer,stopHideTimer:e.linkToolbar.stopHideTimer},r=$u(e.linkToolbar.onUpdate.bind(e.linkToolbar)),{isMounted:o,ref:i,style:s,getFloatingProps:a}=Of(r?.show||!1,r?.referencePos||null,4e3,{placement:"top-start",middleware:[Ml(10),Ha()],onOpenChange:p=>{p||(e.linkToolbar.closeMenu(),e.focus())},...t.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...d}=r,f=t.linkToolbar||VRe;return w.jsx("div",{ref:i,style:s,...a(),children:w.jsx(f,{...d,...n})})};function BRe(t){return At({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(t)}const $Re=t=>{const e=St(),n=Zt(),r=Et(),o=E.useCallback(()=>{const i=t.block.content;if(i!==void 0&&Array.isArray(i)&&i.length===0)r.setTextCursorPosition(t.block),r.openSuggestionMenu("/");else{const s=r.insertBlocks([{type:"paragraph"}],t.block,"after")[0];r.setTextCursorPosition(s),r.openSuggestionMenu("/")}},[r,t.block]);return w.jsx(e.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:w.jsx(BRe,{size:24,onClick:o,"data-test":"dragHandleAdd"})})};function BW(t){return At({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function FRe(t){return At({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(t)}const HRe=t=>{const e=St(),n=Et();return!xm("textColor",t.block.type,n)&&!xm("backgroundColor",t.block.type,n)?null:w.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[w.jsx(e.Generic.Menu.Trigger,{sub:!0,children:w.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children})}),w.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:w.jsx(Wx,{iconSize:18,text:xm("textColor",t.block.type,n)&&_I("textColor",t.block,n)?{color:t.block.props.textColor,setColor:r=>n.updateBlock(t.block,{type:t.block.type,props:{textColor:r}})}:void 0,background:xm("backgroundColor",t.block.type,n)&&_I("backgroundColor",t.block,n)?{color:t.block.props.backgroundColor,setColor:r=>n.updateBlock(t.block,{props:{backgroundColor:r}})}:void 0})})]})},URe=t=>{const e=St(),n=Et();return w.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>n.removeBlocks([t.block]),children:t.children})},zRe=t=>{const e=St(),n=Et();if(t.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!t.block.content.headerRows;return w.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{const o=n.getBlock(t.block.id);o&&n.updateBlock(o,{...o,content:{...o.content,headerRows:r?void 0:1}})},children:t.children})},GRe=t=>{const e=St(),n=Et();if(t.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!t.block.content.headerCols;return w.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{n.updateBlock(t.block,{type:"table",content:{...t.block.content,type:"tableContent",headerCols:r?void 0:1}})},children:t.children})},qRe=t=>{const e=St(),n=Zt();return w.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||w.jsxs(w.Fragment,{children:[w.jsx(URe,{...t,children:n.drag_handle.delete_menuitem}),w.jsx(HRe,{...t,children:n.drag_handle.colors_menuitem}),w.jsx(zRe,{...t,children:n.drag_handle.header_row_menuitem}),w.jsx(GRe,{...t,children:n.drag_handle.header_column_menuitem})]})})},KRe=t=>{const e=St(),n=Zt(),r=t.dragHandleMenu||qRe;return w.jsxs(e.Generic.Menu.Root,{onOpenChange:o=>{o?t.freezeMenu():t.unfreezeMenu()},position:"left",children:[w.jsx(e.Generic.Menu.Trigger,{children:w.jsx(e.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:o=>t.blockDragStart(o,t.block),onDragEnd:t.blockDragEnd,className:"bn-button",icon:w.jsx(BW,{size:24,"data-test":"dragHandle"})})}),w.jsx(r,{block:t.block,children:t.children})]})},WRe=t=>{const e=St(),n=E.useMemo(()=>{const r={"data-block-type":t.block.type};return t.block.type==="heading"&&(r["data-level"]=t.block.props.level.toString()),t.editor.schema.blockSchema[t.block.type].isFileBlock&&(t.block.props.url?r["data-url"]="true":r["data-url"]="false"),r},[t.block,t.editor.schema.blockSchema]);return w.jsx(e.SideMenu.Root,{className:"bn-side-menu",...n,children:t.children||w.jsxs(w.Fragment,{children:[w.jsx($Re,{...t}),w.jsx(KRe,{...t})]})})},YRe=t=>{const e=Et(),n={blockDragStart:e.sideMenu.blockDragStart,blockDragEnd:e.sideMenu.blockDragEnd,freezeMenu:e.sideMenu.freezeMenu,unfreezeMenu:e.sideMenu.unfreezeMenu},r=$u(e.sideMenu.onUpdate.bind(e.sideMenu)),{isMounted:o,ref:i,style:s,getFloatingProps:a}=Of(r?.show||!1,r?.referencePos||null,1e3,{placement:"left-start",...t.floatingOptions});if(!o||!r)return null;const{show:l,referencePos:c,...d}=r,f=t.sideMenu||WRe;return w.jsx("div",{ref:i,style:s,...a(),children:w.jsx(f,{...d,...n,editor:e})})};async function XRe(t,e){return(await nAe(t,e)).map(({id:n,onItemClick:r})=>({id:n,onItemClick:r,icon:n}))}function QRe(t){const e=St(),n=Zt(),{items:r,loadingState:o,selectedIndex:i,onItemClick:s,columns:a}=t,l=o==="loading-initial"||o==="loading"?w.jsx(e.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:a}):null,c=E.useMemo(()=>{const d=[];for(let f=0;f<r.length;f++){const p=r[f];d.push(w.jsx(e.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:p,id:`bn-grid-suggestion-menu-item-${f}`,isSelected:f===i,onClick:()=>s?.(p)},p.id))}return d},[e,r,s,i]);return w.jsxs(e.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:a,className:"bn-grid-suggestion-menu",children:[l,c,c.length===0&&t.loadingState==="loaded"&&w.jsx(e.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:a,children:n.suggestion_menu.no_items_title})]})}function $W(t,e,n,r=3){const o=E.useRef(0);E.useEffect(()=>{e!==void 0&&(t.length>0?o.current=e.length:e.length-o.current>r&&n())},[n,r,t.length,e])}function FW(t,e){const[n,r]=E.useState([]),[o,i]=E.useState(!1),s=E.useRef(void 0),a=E.useRef(void 0);return E.useEffect(()=>{const l=t;s.current=t,i(!0),e(t).then(c=>{s.current===l&&(r(c),i(!1),a.current=l)})},[t,e]),{items:n||[],usedQuery:a.current,loadingState:a.current===void 0?"loading-initial":o?"loading":"loaded"}}function ZRe(t,e,n,r,o){const[i,s]=E.useState(0),a=r!==void 0&&r>1;return E.useEffect(()=>{var l;const c=d=>(d.key==="ArrowLeft"&&(d.preventDefault(),n.length&&s((i-1+n.length)%n.length)),d.key==="ArrowRight"&&(d.preventDefault(),n.length&&s((i+1+n.length)%n.length)),d.key==="ArrowUp"?(d.preventDefault(),n.length&&s((i-r+n.length)%n.length),!0):d.key==="ArrowDown"?(d.preventDefault(),n.length&&s((i+r)%n.length),!0):d.key==="Enter"&&!d.isComposing?(d.stopPropagation(),d.preventDefault(),n.length&&o?.(n[i]),!0):!1);return(l=t.domElement)==null||l.addEventListener("keydown",c,!0),()=>{var d;(d=t.domElement)==null||d.removeEventListener("keydown",c,!0)}},[t.domElement,n,i,o,r,a]),E.useEffect(()=>{s(0)},[e]),{selectedIndex:n.length===0?void 0:i}}function JRe(t){const e=Mc().setContentEditableProps,n=Et(),{getItems:r,gridSuggestionMenuComponent:o,query:i,clearQuery:s,closeMenu:a,onItemClick:l,columns:c}=t,d=E.useCallback(b=>{a(),s(),l?.(b)},[l,a,s]),{items:f,usedQuery:p,loadingState:g}=FW(i,r);$W(f,p,a);const{selectedIndex:y}=ZRe(n,i,f,c,d);return E.useEffect(()=>(e(b=>({...b,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(b=>({...b,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),E.useEffect(()=>(e(b=>({...b,"aria-activedescendant":y?"bn-suggestion-menu-item-"+y:void 0})),()=>{e(b=>({...b,"aria-activedescendant":void 0}))}),[e,y]),w.jsx(o,{items:f,onItemClick:d,loadingState:g,selectedIndex:y,columns:c})}function eIe(t){const e=Et(),{triggerCharacter:n,gridSuggestionMenuComponent:r,columns:o,minQueryLength:i,onItemClick:s,getItems:a,floatingOptions:l}=t,c=E.useMemo(()=>s||(M=>{M.onItemClick(e)}),[e,s]),d=E.useMemo(()=>a||(async M=>await XRe(e,M)),[e,a]),f={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},p=E.useCallback(M=>e.suggestionMenus.onUpdate(n,M),[e.suggestionMenus,n]),g=$u(p),{isMounted:y,ref:b,style:_,getFloatingProps:k}=Of(g?.show||!1,g?.referencePos||null,2e3,{placement:"bottom-start",middleware:[Ml(10),Ha(),Db({apply({availableHeight:M,elements:N}){Object.assign(N.floating.style,{maxHeight:`${M-10}px`})}})],onOpenChange(M){M||e.suggestionMenus.closeMenu()},...l});return!y||!g||!(g!=null&&g.ignoreQueryLength)&&i&&(g.query.startsWith(" ")||g.query.length<i)?null:w.jsx("div",{ref:b,style:_,...k(),children:w.jsx(JRe,{query:g.query,closeMenu:f.closeMenu,clearQuery:f.clearQuery,getItems:d,columns:o,gridSuggestionMenuComponent:r||QRe,onItemClick:c})})}function tIe(t){const e=St(),n=Zt(),{items:r,loadingState:o,selectedIndex:i,onItemClick:s}=t,a=o==="loading-initial"||o==="loading"?w.jsx(e.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,l=E.useMemo(()=>{let c;const d=[];for(let f=0;f<r.length;f++){const p=r[f];p.group!==c&&(c=p.group,d.push(w.jsx(e.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:c},c))),d.push(w.jsx(e.SuggestionMenu.Item,{className:Er("bn-suggestion-menu-item",p.size==="small"?"bn-suggestion-menu-item-small":""),item:p,id:`bn-suggestion-menu-item-${f}`,isSelected:f===i,onClick:()=>s?.(p)},p.title))}return d},[e,r,s,i]);return w.jsxs(e.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[l,l.length===0&&(t.loadingState==="loading"||t.loadingState==="loaded")&&w.jsx(e.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),a]})}function nIe(t,e){const[n,r]=E.useState(0);return{selectedIndex:n,setSelectedIndex:r,handler:o=>{if(o.key==="ArrowUp")return o.preventDefault(),t.length&&r((n-1+t.length)%t.length),!0;if(o.key==="ArrowDown")return o.preventDefault(),t.length&&r((n+1)%t.length),!0;const i=rIe(o)?o.nativeEvent.isComposing:o.isComposing;return o.key==="Enter"&&!i?(o.preventDefault(),o.stopPropagation(),t.length&&e?.(t[n]),!0):!1}}}function rIe(t){return t.nativeEvent!==void 0}function oIe(t,e,n,r,o){const{selectedIndex:i,setSelectedIndex:s,handler:a}=nIe(n,r);return E.useEffect(()=>{var l;return(l=t.domElement)==null||l.addEventListener("keydown",a,!0),()=>{var c;(c=t.domElement)==null||c.removeEventListener("keydown",a,!0)}},[t.domElement,n,i,r,o,a]),E.useEffect(()=>{s(0)},[e,s]),{selectedIndex:n.length===0?void 0:i}}function iIe(t){const e=Mc().setContentEditableProps,n=Et(),{getItems:r,suggestionMenuComponent:o,query:i,clearQuery:s,closeMenu:a,onItemClick:l}=t,c=E.useCallback(y=>{a(),s(),l?.(y)},[l,a,s]),{items:d,usedQuery:f,loadingState:p}=FW(i,r);$W(d,f,a);const{selectedIndex:g}=oIe(n,i,d,c);return E.useEffect(()=>(e(y=>({...y,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(y=>({...y,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),E.useEffect(()=>(e(y=>({...y,"aria-activedescendant":g?"bn-suggestion-menu-item-"+g:void 0})),()=>{e(y=>({...y,"aria-activedescendant":void 0}))}),[e,g]),w.jsx(o,{items:d,onItemClick:c,loadingState:p,selectedIndex:g})}const sIe={heading:US,heading_2:zS,heading_3:GS,heading_4:yW,heading_5:vW,heading_6:bW,toggle_heading:US,toggle_heading_2:zS,toggle_heading_3:GS,quote:xW,toggle_list:kW,numbered_list:SW,bullet_list:_W,check_list:CW,paragraph:_P,table:X2e,image:EW,video:Z2e,audio:TW,file:SP,emoji:cRe,code_block:H2e};function HW(t){return YEe(t).map(e=>{const n=sIe[e.key];return{...e,icon:w.jsx(n,{size:18})}})}function UW(t){const e=Et(),{triggerCharacter:n,suggestionMenuComponent:r,minQueryLength:o,onItemClick:i,getItems:s,floatingOptions:a}=t,l=E.useMemo(()=>i||(k=>{k.onItemClick(e)}),[e,i]),c=E.useMemo(()=>s||(async k=>wK(HW(e),k)),[e,s]),d={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},f=E.useCallback(k=>e.suggestionMenus.onUpdate(n,k),[e.suggestionMenus,n]),p=$u(f),{isMounted:g,ref:y,style:b,getFloatingProps:_}=Of(p?.show||!1,p?.referencePos||null,2e3,{placement:"bottom-start",middleware:[Ml(10),Ha({mainAxis:!0,crossAxis:!1}),Tf(),Db({apply({availableHeight:k,elements:M}){Object.assign(M.floating.style,{maxHeight:`${k-10}px`})}})],onOpenChange(k){k||e.suggestionMenus.closeMenu()},...a});return!g||!p||!(p!=null&&p.ignoreQueryLength)&&o&&(p.query.startsWith(" ")||p.query.length<o)?null:w.jsx("div",{ref:y,style:b,..._(),children:w.jsx(iIe,{query:p.query,closeMenu:d.closeMenu,clearQuery:d.clearQuery,getItems:c,suggestionMenuComponent:r||tIe,onItemClick:l})})}const aIe=(t,e=.3)=>{const n=Math.floor(t)+e,r=Math.ceil(t)-e;return t>=n&&t<=r?Math.round(t):t<n?Math.floor(t):Math.ceil(t)},lIe=t=>{const e=St(),n=E.useRef(!1),[r,o]=E.useState(),i=E.useCallback(a=>{t.onMouseDown(),o({originalContent:t.block.content,originalCroppedContent:{rows:t.editor.tableHandles.cropEmptyRowsOrColumns(t.block,t.orientation==="addOrRemoveColumns"?"columns":"rows")},startPos:t.orientation==="addOrRemoveColumns"?a.clientX:a.clientY}),n.current=!1,a.preventDefault()},[t]),s=E.useCallback(()=>{n.current||t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns(t.block,"columns",1):t.editor.tableHandles.addRowsOrColumns(t.block,"rows",1)}})},[t.block,t.orientation,t.editor]);return E.useEffect(()=>{const a=l=>{var c,d;if(!r)throw new Error("editingState is undefined");n.current=!0;const f=(t.orientation==="addOrRemoveColumns"?l.clientX:l.clientY)-r.startPos,p=t.orientation==="addOrRemoveColumns"?((c=r.originalCroppedContent.rows[0])==null?void 0:c.cells.length)??0:r.originalCroppedContent.rows.length,g=t.orientation==="addOrRemoveColumns"?((d=r.originalContent.rows[0])==null?void 0:d.cells.length)??0:r.originalContent.rows.length,y=t.orientation==="addOrRemoveColumns"?t.block.content.rows[0].cells.length:t.block.content.rows.length,b=g+aIe(f/(t.orientation==="addOrRemoveColumns"?lP:MEe),.3);b>=p&&b>0&&b!==y&&(t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"columns",b-p):t.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"rows",b-p)}}),t.block.content&&t.editor.setTextCursorPosition(t.block))};return r&&window.addEventListener("mousemove",a),()=>{window.removeEventListener("mousemove",a)}},[r,t.block,t.editor,t.orientation]),E.useEffect(()=>{const a=t.onMouseUp,l=()=>{o(void 0),a()};return r&&window.addEventListener("mouseup",l),()=>{window.removeEventListener("mouseup",l)}},[r,t.onMouseUp]),t.editor.isEditable?w.jsx(e.TableHandle.ExtendButton,{className:Er("bn-extend-button",t.orientation==="addOrRemoveColumns"?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",r!==null?"bn-extend-button-editing":""),onClick:s,onMouseDown:i,children:t.children||w.jsx(nRe,{size:18,"data-test":"extendButton"})}):null},x$=t=>{const e=St(),n=Zt(),r=Et().tableHandles;return r?w.jsx(e.Generic.Menu.Item,{onClick:()=>{r.addRowOrColumn(t.index,t.orientation==="row"?{orientation:"row",side:t.side}:{orientation:"column",side:t.side})},children:n.table_handle[`add_${t.side}_menuitem`]}):null},cIe=t=>{const e=St(),n=Zt(),r=Et().tableHandles;return r?w.jsx(e.Generic.Menu.Item,{onClick:()=>{r.removeRowOrColumn(t.index,t.orientation)},children:t.orientation==="row"?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem}):null},uIe=t=>{const e=St(),n=Zt(),r=Et(),o=r.tableHandles,i=E.useMemo(()=>!o||!t.block?[]:t.orientation==="row"?o.getCellsAtRowHandle(t.block,t.index):o.getCellsAtColumnHandle(t.block,t.index),[t.block,t.index,t.orientation,o]),s=(l,c)=>{const d=t.block.content.rows.map(f=>({...f,cells:f.cells.map(p=>Sf(p))}));i.forEach(({row:f,col:p})=>{c==="text"?d[f].cells[p].props.textColor=l:d[f].cells[p].props.backgroundColor=l}),r.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:d}}),r.setTextCursorPosition(t.block)};if(!i||!i[0]||!o||r.settings.tables.cellTextColor===!1&&r.settings.tables.cellBackgroundColor===!1)return null;const a=Sf(i[0].cell);return w.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[w.jsx(e.Generic.Menu.Trigger,{sub:!0,children:w.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||n.drag_handle.colors_menuitem})}),w.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:w.jsx(Wx,{iconSize:18,text:r.settings.tables.cellTextColor?{color:i.every(({cell:l})=>_f(l)&&l.props.textColor===a.props.textColor)?a.props.textColor:"default",setColor:l=>{s(l,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:i.every(({cell:l})=>_f(l)&&l.props.backgroundColor===a.props.backgroundColor)?a.props.backgroundColor:"default",setColor:l=>s(l,"background")}:void 0})})]})},dIe=t=>{const e=St(),n=Zt(),r=Et();if(!r.tableHandles||t.index!==0||t.orientation!=="row"||!r.settings.tables.headers)return null;const o=!!t.block.content.headerRows;return w.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const i=r.getBlock(t.block.id);i&&r.updateBlock(i,{...i,content:{...i.content,headerRows:o?void 0:1}})},children:n.drag_handle.header_row_menuitem})},fIe=t=>{const e=St(),n=Zt(),r=Et();if(!r.tableHandles||t.index!==0||t.orientation!=="column"||!r.settings.tables.headers)return null;const o=!!t.block.content.headerCols;return w.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const i=r.getBlock(t.block.id);i&&r.updateBlock(i,{...i,content:{...i.content,headerCols:o?void 0:1}})},children:n.drag_handle.header_column_menuitem})},hIe=t=>{const e=St();return w.jsx(e.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:t.children||w.jsxs(w.Fragment,{children:[w.jsx(cIe,{orientation:t.orientation,block:t.block,index:t.index}),w.jsx(x$,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"above":"left"}),w.jsx(x$,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"below":"right"}),w.jsx(dIe,{orientation:t.orientation,block:t.block,index:t.index}),w.jsx(fIe,{orientation:t.orientation,block:t.block,index:t.index}),w.jsx(uIe,{orientation:t.orientation,block:t.block,index:t.index})]})})},pIe=t=>{const e=St(),[n,r]=E.useState(!1),o=t.tableHandleMenu||hIe,i=E.useMemo(()=>{const s=t.editor.tableHandles;return!s||!t.block||t.block.type!=="table"?!1:t.orientation==="column"?s.getCellsAtColumnHandle(t.block,t.index).every(({cell:a})=>op(a)===1):s.getCellsAtRowHandle(t.block,t.index).every(({cell:a})=>wb(a)===1)},[t.block,t.editor.tableHandles,t.index,t.orientation]);return w.jsxs(e.Generic.Menu.Root,{onOpenChange:s=>{s?(t.freezeHandles(),t.hideOtherSide()):(t.unfreezeHandles(),t.showOtherSide(),t.editor.focus())},position:"right",children:[w.jsx(e.Generic.Menu.Trigger,{children:w.jsx(e.TableHandle.Root,{className:Er("bn-table-handle",n?"bn-table-handle-dragging":"",i?"":"bn-table-handle-not-draggable"),draggable:i,onDragStart:s=>{r(!0),t.dragStart(s)},onDragEnd:()=>{t.dragEnd(),r(!1)},style:t.orientation==="column"?{transform:"rotate(0.25turn)"}:void 0,children:t.children||w.jsx(BW,{size:24,"data-test":"tableHandle"})})}),Ts.createPortal(w.jsx(o,{orientation:t.orientation,block:t.block,index:t.index}),t.menuContainer)]})};function E$(t,e,n){const{refs:r,update:o,context:i,floatingStyles:s}=Gg({open:e,placement:t==="addOrRemoveColumns"?"right":"bottom",middleware:[Db({apply({rects:c,elements:d}){Object.assign(d.floating.style,t==="addOrRemoveColumns"?{height:`${c.reference.height}px`}:{width:`${c.reference.width}px`})}})]}),{isMounted:a,styles:l}=gP(i);return E.useEffect(()=>{o()},[n,o]),E.useEffect(()=>{n!==null&&r.setReference({getBoundingClientRect:()=>n})},[t,n,r]),E.useMemo(()=>({isMounted:a,ref:r.setFloating,style:{display:"flex",...l,...s}}),[s,a,r.setFloating,l])}function mIe(t,e,n){const r=E$("addOrRemoveRows",e,n),o=E$("addOrRemoveColumns",t,n);return E.useMemo(()=>({addOrRemoveRowsButton:r,addOrRemoveColumnsButton:o}),[o,r])}function gIe(t,e,n){return n&&n.draggedCellOrientation==="row"?new DOMRect(e.x,n.mousePos,e.width,0):new DOMRect(e.x,t.y,e.width,t.height)}function yIe(t,e,n){return n&&n.draggedCellOrientation==="col"?new DOMRect(n.mousePos,e.y,0,e.height):new DOMRect(t.x,e.y,t.width,e.height)}function vIe(t){return new DOMRect(t.x,t.y,t.width,0)}function XA(t,e,n,r,o){const{refs:i,update:s,context:a,floatingStyles:l}=Gg({open:e,placement:t==="row"?"left":t==="col"?"top":"bottom-end",middleware:[Ml(t==="row"?-10:t==="col"?-12:{mainAxis:1,crossAxis:-1})]}),{isMounted:c,styles:d}=gP(a);return E.useEffect(()=>{s()},[n,r,s]),E.useEffect(()=>{n===null||r===null||o&&t==="cell"||i.setReference({getBoundingClientRect:()=>(t==="row"?gIe:t==="col"?yIe:vIe)(n,r,o)})},[o,t,n,r,i]),E.useMemo(()=>({isMounted:c,ref:i.setFloating,style:{display:"flex",...d,...l}}),[l,c,i.setFloating,d])}function bIe(t,e,n,r){const o=XA("row",t,e,n,r),i=XA("col",t,e,n,r),s=XA("cell",t,e,n,r);return E.useMemo(()=>({rowHandle:o,colHandle:i,cellHandle:s}),[i,o,s])}const wIe=t=>{var e,n;const r=St(),o=Zt(),i=Et(),s=(l,c)=>{const d=t.block.content.rows.map(f=>({...f,cells:f.cells.map(p=>Sf(p))}));c==="text"?d[t.rowIndex].cells[t.colIndex].props.textColor=l:d[t.rowIndex].cells[t.colIndex].props.backgroundColor=l,i.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:d}}),i.setTextCursorPosition(t.block)},a=(n=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:n[t.colIndex];return!a||i.settings.tables.cellTextColor===!1&&i.settings.tables.cellBackgroundColor===!1?null:w.jsxs(r.Generic.Menu.Root,{position:"right",sub:!0,children:[w.jsx(r.Generic.Menu.Trigger,{sub:!0,children:w.jsx(r.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||o.drag_handle.colors_menuitem})}),w.jsx(r.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:w.jsx(Wx,{iconSize:18,text:i.settings.tables.cellTextColor?{color:_f(a)?a.props.textColor:"default",setColor:l=>s(l,"text")}:void 0,background:i.settings.tables.cellBackgroundColor?{color:_f(a)?a.props.backgroundColor:"default",setColor:l=>s(l,"background")}:void 0})})]})},CIe=t=>{var e,n;const r=St(),o=Zt(),i=Et(),s=(n=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:n[t.colIndex];return!s||!_f(s)||wb(s)===1&&op(s)===1||!i.settings.tables.splitCells?null:w.jsx(r.Generic.Menu.Item,{onClick:()=>{var a;(a=i.tableHandles)==null||a.splitCell({row:t.rowIndex,col:t.colIndex})},children:o.table_handle.split_cell_menuitem})},SIe=t=>{const e=St();return w.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||w.jsxs(w.Fragment,{children:[w.jsx(CIe,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),w.jsx(wIe,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex})]})})},_Ie=t=>{const e=St(),n=t.tableCellMenu||SIe;return!t.editor.settings.tables.splitCells&&!t.editor.settings.tables.cellBackgroundColor&&!t.editor.settings.tables.cellTextColor?null:w.jsxs(e.Generic.Menu.Root,{onOpenChange:r=>{r?t.freezeHandles():(t.unfreezeHandles(),t.editor.focus())},position:"right",children:[w.jsx(e.Generic.Menu.Trigger,{children:w.jsx(e.Generic.Menu.Button,{className:"bn-table-cell-handle",children:t.children||w.jsx(FRe,{size:12,"data-test":"tableCellHandle"})})}),Ts.createPortal(w.jsx(n,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),t.menuContainer)]})},xIe=t=>{var e,n;const r=Et(),[o,i]=E.useState(null);if(!r.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");const s={rowDragStart:r.tableHandles.rowDragStart,colDragStart:r.tableHandles.colDragStart,dragEnd:r.tableHandles.dragEnd,freezeHandles:r.tableHandles.freezeHandles,unfreezeHandles:r.tableHandles.unfreezeHandles},{freezeHandles:a,unfreezeHandles:l}=s,c=E.useCallback(()=>{a(),B(!0),N(!0)},[a]),d=E.useCallback(()=>{l(),B(!1),N(!1)},[l]),f=$u(r.tableHandles.onUpdate.bind(r.tableHandles)),p=E.useMemo(()=>{var I,L;return f!=null&&f.draggingState?{draggedCellOrientation:(I=f?.draggingState)==null?void 0:I.draggedCellOrientation,mousePos:(L=f?.draggingState)==null?void 0:L.mousePos}:void 0},[f?.draggingState,(e=f?.draggingState)==null?void 0:e.draggedCellOrientation,(n=f?.draggingState)==null?void 0:n.mousePos]),{rowHandle:g,colHandle:y,cellHandle:b}=bIe(f?.show||!1,f?.referencePosCell||null,f?.referencePosTable||null,p),{addOrRemoveColumnsButton:_,addOrRemoveRowsButton:k}=mIe(f?.showAddOrRemoveColumnsButton||!1,f?.showAddOrRemoveRowsButton||!1,f?.referencePosTable||null),[M,N]=E.useState(!1),[j,B]=E.useState(!1);if(!f)return null;const F=t.tableHandle||pIe,D=t.extendButton||lIe,R=t.tableCellHandle||_Ie;return w.jsxs(w.Fragment,{children:[w.jsx("div",{ref:i}),w.jsxs(GAe,{root:f.widgetContainer,children:[!M&&o&&g.isMounted&&f.rowIndex!==void 0&&w.jsx("div",{ref:g.ref,style:g.style,children:w.jsx(F,{editor:r,orientation:"row",showOtherSide:()=>B(!1),hideOtherSide:()=>B(!0),index:f.rowIndex,block:f.block,dragStart:s.rowDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:o})}),!j&&o&&y.isMounted&&f.colIndex!==void 0&&w.jsx("div",{ref:y.ref,style:y.style,children:w.jsx(F,{editor:r,orientation:"column",showOtherSide:()=>N(!1),hideOtherSide:()=>N(!0),index:f.colIndex,block:f.block,dragStart:s.colDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:o})}),o&&b.isMounted&&f.colIndex!==void 0&&f.rowIndex!==void 0&&w.jsx("div",{ref:b.ref,style:b.style,children:w.jsx(R,{editor:r,block:f.block,rowIndex:f.rowIndex,colIndex:f.colIndex,menuContainer:o,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles})}),w.jsx("div",{ref:k.ref,style:k.style,children:w.jsx(D,{editor:r,orientation:"addOrRemoveRows",block:f.block,onMouseDown:c,onMouseUp:d})}),w.jsx("div",{ref:_.ref,style:_.style,children:w.jsx(D,{editor:r,orientation:"addOrRemoveColumns",block:f.block,onMouseDown:c,onMouseUp:d})})]})]})};function EIe(t){const e=Et();if(!e)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return w.jsxs(w.Fragment,{children:[t.formattingToolbar!==!1&&w.jsx(TP,{}),t.linkToolbar!==!1&&w.jsx(jRe,{}),t.slashMenu!==!1&&w.jsx(UW,{triggerCharacter:"/"}),t.emojiPicker!==!1&&w.jsx(eIe,{triggerCharacter:":",columns:10,minQueryLength:2}),t.sideMenu!==!1&&w.jsx(YRe,{}),e.filePanel&&t.filePanel!==!1&&w.jsx(wRe,{}),e.tableHandles&&t.tableHandles!==!1&&w.jsx(xIe,{}),e.comments&&t.comments!==!1&&w.jsxs(w.Fragment,{children:[w.jsx(k2e,{}),w.jsx(yRe,{})]})]})}const zW=()=>{const t=E.useMemo(()=>{var s;return(s=window.matchMedia)==null?void 0:s.call(window,"(prefers-color-scheme: dark)")},[]),e=E.useMemo(()=>{var s;return(s=window.matchMedia)==null?void 0:s.call(window,"(prefers-color-scheme: light)")},[]),n=t?.matches,r=e?.matches,[o,i]=E.useState(n?"dark":r?"light":"no-preference");return E.useEffect(()=>{i(n?"dark":r?"light":"no-preference")},[n,r]),E.useEffect(()=>{if(typeof t?.addEventListener=="function"){const s=({matches:l})=>l&&i("dark"),a=({matches:l})=>l&&i("light");return t?.addEventListener("change",s),e?.addEventListener("change",a),()=>{t?.removeEventListener("change",s),e?.removeEventListener("change",a)}}else{const s=()=>i(t.matches?"dark":e.matches?"light":"no-preference");return t?.addEventListener("change",s),e?.addEventListener("change",s),()=>{t?.removeEventListener("change",s),e?.removeEventListener("change",s)}}},[t,e]),o},GW=E.createContext(void 0);function kIe(){return E.useContext(GW)}function TIe(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:Ts.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}const AIe=({contentComponent:t})=>{const e=E.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return w.jsx(w.Fragment,{children:Object.values(e)})},RIe=E.forwardRef((t,e)=>{const[n,r]=E.useState();return E.useImperativeHandle(e,()=>(o,i)=>{Ts.flushSync(()=>{r({node:o,container:i})}),r(void 0)},[]),w.jsx(w.Fragment,{children:n&&Ts.createPortal(n.node,n.container)})}),k$=()=>{};function IIe(t,e){const{editor:n,className:r,theme:o,children:i,editable:s,onSelectionChange:a,onChange:l,formattingToolbar:c,linkToolbar:d,slashMenu:f,emojiPicker:p,sideMenu:g,filePanel:y,tableHandles:b,comments:_,autoFocus:k,renderEditor:M=!n.headless,...N}=t,[j,B]=E.useState(),F=Mc(),D=zW(),R=F?.colorSchemePreference||D,I=o||(R==="dark"?"dark":"light");bP(l||k$,n),yP(a||k$,n),E.useEffect(()=>{n.isEditable=s!==!1},[s,n]);const L=E.useCallback(H=>{n.elementRenderer=H},[n]),z=E.useMemo(()=>({...F,editor:n,setContentEditableProps:B}),[F,n]),q=E.useMemo(()=>({editorProps:{autoFocus:k,contentEditableProps:j},defaultUIProps:{formattingToolbar:c,linkToolbar:d,slashMenu:f,emojiPicker:p,sideMenu:g,filePanel:y,tableHandles:b,comments:_}}),[k,j,c,d,f,p,g,y,b,_]);return w.jsx(fW.Provider,{value:z,children:w.jsxs(GW.Provider,{value:q,children:[w.jsx(RIe,{ref:L}),w.jsx(MIe,{className:r,renderEditor:M,editorColorScheme:I,ref:e,...N,children:i})]})})}const MIe=De.forwardRef(({className:t,renderEditor:e,editorColorScheme:n,children:r,...o},i)=>w.jsx("div",{className:Er("bn-container",n,t),"data-color-scheme":n,...o,ref:i,children:e?w.jsx(OIe,{children:r}):r})),NIe=De.forwardRef(IIe),OIe=t=>{const e=kIe(),n=Et(),r=E.useMemo(()=>TIe(),[]),o=E.useCallback(i=>{n.mount(i,r)},[n,r]);return w.jsxs(w.Fragment,{children:[w.jsx(AIe,{contentComponent:r}),w.jsx(PIe,{...e.editorProps,...t,mount:o}),w.jsx(EIe,{...e.defaultUIProps}),t.children]})},PIe=t=>{const{autoFocus:e,mount:n,contentEditableProps:r}=t;return w.jsx("div",{"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":e,ref:n,...r})};function jI(t,e){let n;const r=document.createElement("div");let o;if(e!=null&&e.elementRenderer)e.elementRenderer(t(l=>n=l||void 0),r);else{if(!(e!=null&&e.headless))throw new Error("elementRenderer not available, expected headless editor");o=Z9.createRoot(r),Ts.flushSync(()=>{o.render(t(l=>n=l||void 0))})}if(!r.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};n?.setAttribute("data-tmp-find","true");const i=r.cloneNode(!0),s=i.firstElementChild,a=i.querySelector("[data-tmp-find]");return a?.removeAttribute("data-tmp-find"),o?.unmount(),{dom:s,contentDOM:a||void 0}}function QA(t){var e;return w.jsx(u2e,{onDragOver:n=>n.preventDefault(),...Object.fromEntries(Object.entries(t.domAttributes||{}).filter(([n])=>n!=="class")),className:Er("bn-block-content",((e=t.domAttributes)==null?void 0:e.class)||""),"data-content-type":t.blockType,...Object.fromEntries(Object.entries(t.blockProps).filter(([n,r])=>{const o=t.propSchema[n];return!XO.includes(n)&&r!==o.default}).map(([n,r])=>[jS(n),r])),"data-file-block":t.isFileBlock===!0||void 0,children:t.children})}function Yx(t,e){const n=es({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return i0(t.propSchema)},parseHTML(){return Uq(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return cv({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return r=>{const o=g2e(i=>{var s;const a=this.options.editor,l=Vx(i.getPos,a,this.editor,t.type),c=((s=this.options.domAttributes)==null?void 0:s.blockContent)||{},d=uW().nodeViewContentRef;if(!d)throw new Error("nodeViewContentRef is not set");const f=e.render;return w.jsx(QA,{blockType:l.type,blockProps:l.props,propSchema:t.propSchema,isFileBlock:t.isFileBlock,domAttributes:c,children:w.jsx(f,{block:l,editor:a,contentRef:p=>{d(p),p&&(p.className=Er("bn-inline-content",p.className))}})})},{className:"bn-react-node-view-renderer"})(r);return t.isSelectable===!1&&Hq(o,this.editor),o}}});return QO(t,{node:n,toInternalHTML:(r,o)=>{var i;const s=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{},a=e.render;return jI(l=>w.jsx(QA,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:s,children:w.jsx(a,{block:r,editor:o,contentRef:c=>{l(c),c&&(c.className=Er("bn-inline-content",c.className))}})}),o)},toExternalHTML:(r,o)=>{var i;const s=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{},a=e.toExternalHTML||e.render;return jI(l=>w.jsx(QA,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:s,children:w.jsx(a,{block:r,editor:o,contentRef:c=>{l(c),c&&(c.className=Er("bn-inline-content",c.className))}})}),o)}})}function AP(t){const e=Et(),[n,r]=E.useState("loading"),[o,i]=E.useState();if(E.useEffect(()=>{let s=!0;return(async()=>{let a="";r("loading");try{a=e.resolveFileUrl?await e.resolveFileUrl(t):t}catch{r("error");return}s&&(r("loaded"),i(a))})(),()=>{s=!1}},[e,t]),n!=="loaded")return{loadingState:n};if(!o)throw new Error("Finished fetching file but did not get download URL.");return{loadingState:n,downloadUrl:o}}const RP=t=>w.jsxs("figure",{children:[t.children,w.jsx("figcaption",{children:t.caption})]});function DIe(t){const e=Et();E.useEffect(()=>e.onUploadEnd(t),[t,e])}function LIe(t){const e=Et();E.useEffect(()=>e.onUploadStart(t),[t,e])}function qW(t){const[e,n]=E.useState(!1);return LIe(r=>{r===t&&n(!0)}),DIe(r=>{r===t&&n(!1)}),e}const VIe=t=>{const e=Zt(),n=E.useCallback(o=>{o.preventDefault()},[]),r=E.useCallback(()=>{t.editor.transact(o=>o.setMeta(t.editor.filePanel.plugins[0],{block:t.block}))},[t.block,t.editor]);return w.jsxs("div",{className:"bn-add-file-button",onMouseDown:n,onClick:r,children:[w.jsx("div",{className:"bn-add-file-button-icon",children:t.buttonIcon||w.jsx(SP,{size:24})}),w.jsx("div",{className:"bn-add-file-button-text",children:t.buttonText||e.file_blocks.file.add_button_text})]})},jIe=t=>w.jsxs("div",{className:"bn-file-name-with-icon",contentEditable:!1,draggable:!1,children:[w.jsx("div",{className:"bn-file-icon",children:w.jsx(SP,{size:24})}),w.jsx("p",{className:"bn-file-name",children:t.block.props.name})]}),IP=t=>{const e=qW(t.block.id);return w.jsx("div",{className:"bn-file-block-content-wrapper",onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,style:t.style,children:e?w.jsx("div",{className:"bn-file-loading-preview",children:"Loading..."}):t.block.props.url===""?w.jsx(VIe,{...t}):w.jsxs(w.Fragment,{children:[t.block.props.showPreview===!1||!t.children?w.jsx(jIe,{...t}):t.children,t.block.props.caption&&w.jsx("p",{className:"bn-file-caption",children:t.block.props.caption})]})})},Xx=t=>w.jsxs("div",{children:[t.children,w.jsx("p",{children:t.caption})]}),BIe=t=>{const e=AP(t.block.props.url);return w.jsx("audio",{className:"bn-audio",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},$Ie=t=>{if(!t.block.props.url)return w.jsx("p",{children:"Add audio"});const e=t.block.props.showPreview?w.jsx("audio",{src:t.block.props.url}):w.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?w.jsx(RP,{caption:t.block.props.caption,children:e}):w.jsx(Xx,{caption:t.block.props.caption,children:e}):e},FIe=t=>w.jsx(IP,{...t,buttonText:t.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:w.jsx(TW,{size:24}),children:w.jsx(BIe,{...t})});Yx(sK,{render:FIe,parse:aK,toExternalHTML:$Ie});const HIe=t=>{if(!t.block.props.url)return w.jsx("p",{children:"Add file"});const e=w.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?w.jsx(Xx,{caption:t.block.props.caption,children:e}):e},UIe=t=>w.jsx(IP,{...t});Yx(lK,{render:UIe,parse:cK,toExternalHTML:HIe});const KW=t=>{const[e,n]=E.useState(void 0),[r,o]=E.useState(t.block.props.previewWidth),[i,s]=E.useState(!1),a=E.useRef(null);E.useEffect(()=>{const g=b=>{var _,k;let M;t.block.props.textAlignment==="center"?e.handleUsed==="left"?M=e.initialWidth+(e.initialClientX-b.clientX)*2:M=e.initialWidth+(b.clientX-e.initialClientX)*2:e.handleUsed==="left"?M=e.initialWidth+e.initialClientX-b.clientX:M=e.initialWidth+b.clientX-e.initialClientX,o(Math.min(Math.max(M,64),((k=(_=t.editor.domElement)==null?void 0:_.firstElementChild)==null?void 0:k.clientWidth)||Number.MAX_VALUE))},y=()=>{n(void 0),t.editor.updateBlock(t.block,{props:{previewWidth:r}})};return e&&(window.addEventListener("mousemove",g),window.addEventListener("mouseup",y)),()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",y)}},[t,e,r]);const l=E.useCallback(()=>{t.editor.isEditable&&s(!0)},[t.editor.isEditable]),c=E.useCallback(()=>{s(!1)},[]),d=E.useCallback(g=>{g.preventDefault(),n({handleUsed:"left",initialWidth:a.current.clientWidth,initialClientX:g.clientX})},[]),f=E.useCallback(g=>{g.preventDefault(),n({handleUsed:"right",initialWidth:a.current.clientWidth,initialClientX:g.clientX})},[]),p=qW(t.block.id);return w.jsx(IP,{...t,onMouseEnter:l,onMouseLeave:c,style:t.block.props.url&&!p&&t.block.props.showPreview?{width:r?`${r}px`:"fit-content"}:void 0,children:w.jsxs("div",{className:"bn-visual-media-wrapper",ref:a,children:[t.children,(i||e)&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"bn-resize-handle",style:{left:"4px"},onMouseDown:d}),w.jsx("div",{className:"bn-resize-handle",style:{right:"4px"},onMouseDown:f})]})]})})},zIe=t=>{const e=AP(t.block.props.url);return w.jsx("img",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,alt:t.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1})},GIe=t=>{if(!t.block.props.url)return w.jsx("p",{children:"Add image"});const e=t.block.props.showPreview?w.jsx("img",{src:t.block.props.url,alt:t.block.props.name||t.block.props.caption||"BlockNote image",width:t.block.props.previewWidth}):w.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?w.jsx(RP,{caption:t.block.props.caption,children:e}):w.jsx(Xx,{caption:t.block.props.caption,children:e}):e},qIe=t=>w.jsx(KW,{...t,buttonText:t.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:w.jsx(EW,{size:24}),children:w.jsx(zIe,{...t})});Yx(fK,{render:qIe,parse:hK,toExternalHTML:GIe});const KIe=t=>{const e=AP(t.block.props.url);return w.jsx("video",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},WIe=t=>{if(!t.block.props.url)return w.jsx("p",{children:"Add video"});const e=t.block.props.showPreview?w.jsx("video",{src:t.block.props.url}):w.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?w.jsx(RP,{caption:t.block.props.caption,children:e}):w.jsx(Xx,{caption:t.block.props.caption,children:e}):e},YIe=t=>w.jsx(KW,{...t,buttonText:t.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:w.jsx(tRe,{size:24}),children:w.jsx(KIe,{...t})});Yx(yK,{render:YIe,parse:vK,toExternalHTML:WIe});De.memo(({thread:t,selectedThreadId:e,editor:n,maxCommentsBeforeCollapse:r,referenceText:o})=>{const i=E.useCallback(a=>{var l;a.target.closest(".bn-action-toolbar")||(l=n.comments)==null||l.selectThread(t.id)},[n.comments,t.id]),s=E.useCallback(a=>{var l;if(!a.relatedTarget||a.relatedTarget.closest(".bn-action-toolbar"))return;const c=a.target instanceof Node?a.target:null,d=a.relatedTarget instanceof Node?a.relatedTarget.closest(".bn-thread"):null;(!c||!d||!d.contains(c))&&((l=n.comments)==null||l.selectThread(void 0))},[n.comments]);return w.jsx(AW,{thread:t,selected:t.id===e,referenceText:o,maxCommentsBeforeCollapse:r,onFocus:i,onBlur:s,tabIndex:0})});var oC,BI;class XIe{constructor({mark:e,view:n,inline:r,options:o,editor:i}){w2e(this,oC),Wi(this,"dom"),Wi(this,"contentDOM"),Wi(this,"mark"),Wi(this,"view"),Wi(this,"inline"),Wi(this,"options"),Wi(this,"editor"),Wi(this,"shouldIgnoreMutation",s=>!this.dom||!this.contentDOM?!0:s.type==="selection"?!1:this.contentDOM===s.target&&s.type==="attributes"?!0:!this.contentDOM.contains(s.target)),Wi(this,"ignoreMutation",s=>{if(!this.dom||!this.contentDOM)return!0;let a;const l=this.options.ignoreMutation;return l&&(a=l(s)),typeof a!="boolean"&&(a=this.shouldIgnoreMutation(s)),a}),this.mark=e,this.view=n,this.inline=r,this.options=o,this.editor=i,this.dom=this.createDOM(o.as),this.contentDOM=o.contentAs?this.createContentDOM(o.contentAs):void 0,this.dom.setAttribute("data-mark-view-root","true"),this.contentDOM&&(this.contentDOM.setAttribute("data-mark-view-content","true"),this.contentDOM.style.whiteSpace="inherit")}createDOM(e){return h$(this,oC,BI).call(this,e)}createContentDOM(e){return h$(this,oC,BI).call(this,e)}get component(){return this.options.component}destroy(){var e,n,r;(n=(e=this.options).destroy)==null||n.call(e),this.dom.remove(),(r=this.contentDOM)==null||r.remove()}}oC=new WeakSet,BI=function(t){const{inline:e,mark:n}=this;return t==null?document.createElement(e?"span":"div"):t instanceof HTMLElement?t:t instanceof Function?t(n):document.createElement(t)};class QIe extends XIe{constructor(){super(...arguments),Wi(this,"id",Math.floor(Math.random()*4294967295).toString()),Wi(this,"context",{contentRef:e=>{e&&this.contentDOM&&e.firstChild!==this.contentDOM&&e.appendChild(this.contentDOM)},view:this.view,mark:this.mark}),Wi(this,"updateContext",()=>{Object.assign(this.context,{mark:this.mark})}),Wi(this,"render",()=>{this.editor._tiptapEditor.contentComponent.setRenderer(this.id,this.renderer())}),Wi(this,"destroy",()=>{super.destroy(),this.editor._tiptapEditor.contentComponent.removeRenderer(this.id)}),Wi(this,"renderer",()=>{const e=this.component,n={};return this.mark.attrs.stringValue&&(n.value=this.mark.attrs.stringValue),{reactElement:w.jsx(e,{contentRef:this.context.contentRef,...n}),element:this.dom}})}}function ZIe(t,e){const n=Ko.create({name:t.type,addAttributes(){return vxe(t.propSchema)},parseHTML(){return wxe(t)},renderHTML({mark:r}){const o={};t.propSchema==="string"&&(o.value=r.attrs.stringValue);const i=e.render,s=jI(a=>w.jsx(i,{...o,contentRef:a}),this.options.editor);return bxe(s,t.type,r.attrs.stringValue,t.propSchema)}});return n.config.addMarkView=r=>(o,i)=>{const s=new QIe({editor:r,inline:!0,mark:o,options:{component:e.render,contentAs:"span"},view:i});return s.render(),s},Kq(t,{mark:n})}function WW(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=n.top<r.top,i=n.bottom>r.bottom;return o&&i?"both":o?"top":i?"bottom":"none"}function mc(t){return Object.keys(t)}function ZA(t){return t&&typeof t=="object"&&!Array.isArray(t)}function MP(t,e){const n={...t},r=e;return ZA(t)&&ZA(e)&&Object.keys(e).forEach(o=>{ZA(r[o])&&o in t?n[o]=MP(n[o],r[o]):n[o]=r[o]}),n}function JIe(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function eMe(t){return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:t.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim()}function tMe(t){const e=eMe(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function JA(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function YW(t,{shouldScale:e=!1}={}){function n(r){if(r===0||r==="0")return`0${t}`;if(typeof r=="number"){const o=`${r/16}${t}`;return e?JA(o):o}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(i=>n(i)).join(",");if(r.includes(" "))return r.split(" ").map(i=>n(i)).join(" ");if(r.includes(t))return e?JA(r):r;const o=r.replace("px","");if(!Number.isNaN(Number(o))){const i=`${Number(o)/16}${t}`;return e?JA(i):i}}return r}return n}const ze=YW("rem",{shouldScale:!0}),T$=YW("em");function Qx(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}function XW(t){if(typeof t=="number")return!0;if(typeof t=="string"){if(t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!=="")return!0;const e=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return t.trim().split(/\s+/).every(r=>e.test(r))}return!1}function d0(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==E.Fragment:!1}function Zx(t){const e=E.createContext(null);return[({children:o,value:i})=>w.jsx(e.Provider,{value:i,children:o}),()=>{const o=E.useContext(e);if(o===null)throw new Error(t);return o}]}function NP(t=null){const e=E.createContext(t);return[({children:o,value:i})=>w.jsx(e.Provider,{value:i,children:o}),()=>E.useContext(e)]}function A$(t,e){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(e);return`${t}-${n}`}}function qS(t,e){let n=t;for(;(n=n.parentElement)&&!n.matches(e););return n}function nMe(t,e,n){for(let r=t-1;r>=0;r-=1)if(!e[r].disabled)return r;if(n){for(let r=e.length-1;r>-1;r-=1)if(!e[r].disabled)return r}return t}function rMe(t,e,n){for(let r=t+1;r<e.length;r+=1)if(!e[r].disabled)return r;if(n){for(let r=0;r<e.length;r+=1)if(!e[r].disabled)return r}return t}function oMe(t,e,n){return qS(t,n)===qS(e,n)}function QW({parentSelector:t,siblingSelector:e,onKeyDown:n,loop:r=!0,activateOnFocus:o=!1,dir:i="rtl",orientation:s}){return a=>{n?.(a);const l=Array.from(qS(a.currentTarget,t)?.querySelectorAll(e)||[]).filter(y=>oMe(a.currentTarget,y,t)),c=l.findIndex(y=>a.currentTarget===y),d=rMe(c,l,r),f=nMe(c,l,r),p=i==="rtl"?f:d,g=i==="rtl"?d:f;switch(a.key){case"ArrowRight":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[p].focus(),o&&l[p].click());break}case"ArrowLeft":{s==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[g].focus(),o&&l[g].click());break}case"ArrowUp":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),o&&l[f].click());break}case"ArrowDown":{s==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),o&&l[d].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const y=l.length-1;!l[y].disabled&&l[y].focus();break}}}}const iMe={app:100,modal:200,popover:300,overlay:400,max:9999};function f0(t){return iMe[t]}const sMe=()=>{};function aMe(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||sMe:n=>{n.key==="Escape"&&(t(n),e.onTrigger?.())}}function _r(t,e="size",n=!0){if(t!==void 0)return XW(t)?n?ze(t):t:`var(--${e}-${t})`}function h0(t){return _r(t,"mantine-spacing")}function Fi(t){return t===void 0?"var(--mantine-radius-default)":_r(t,"mantine-radius")}function ks(t){return _r(t,"mantine-font-size")}function lMe(t){return _r(t,"mantine-line-height",!1)}function ZW(t){if(t)return _r(t,"mantine-shadow",!1)}function oc(t,e){return n=>{t?.(n),e?.(n)}}function cMe(t,e,n){return n?Array.from(qS(n,e)?.querySelectorAll(t)||[]).findIndex(r=>r===n):null}function uMe(){const[t,e]=E.useState(-1);return[t,{setHovered:e,resetHovered:()=>e(-1)}]}function dMe(t="mantine-"){return`${t}${Math.random().toString(36).slice(2,11)}`}const R$=["mousedown","touchstart"];function fMe(t,e,n){const r=E.useRef(null);return E.useEffect(()=>{const o=i=>{const{target:s}=i??{};if(Array.isArray(n)){const a=s?.hasAttribute("data-ignore-outside-clicks")||!document.body.contains(s)&&s.tagName!=="HTML";n.every(c=>!!c&&!i.composedPath().includes(c))&&!a&&t()}else r.current&&!r.current.contains(s)&&t()};return(e||R$).forEach(i=>document.addEventListener(i,o)),()=>{(e||R$).forEach(i=>document.removeEventListener(i,o))}},[r,t,n]),r}function hMe(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function pMe(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function mMe(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,o]=E.useState(n?e:pMe(t)),i=E.useRef(null);return E.useEffect(()=>{if("matchMedia"in window)return i.current=window.matchMedia(t),o(i.current.matches),hMe(i.current,s=>o(s.matches))},[t]),r}const Jx=typeof document<"u"?E.useLayoutEffect:E.useEffect;function Ef(t,e){const n=E.useRef(!1);E.useEffect(()=>()=>{n.current=!1},[]),E.useEffect(()=>{if(n.current)return t();n.current=!0},e)}function gMe({opened:t,shouldReturnFocus:e=!0}){const n=E.useRef(null),r=()=>{n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&n.current?.focus({preventScroll:!0})};return Ef(()=>{let o=-1;const i=s=>{s.key==="Tab"&&window.clearTimeout(o)};return document.addEventListener("keydown",i),t?n.current=document.activeElement:e&&(o=window.setTimeout(r,10)),()=>{window.clearTimeout(o),document.removeEventListener("keydown",i)}},[t,e]),r}const yMe=/input|select|textarea|button|object/,JW="a, input, select, textarea, button, object, [tabindex]";function vMe(t){return t.style.display==="none"}function bMe(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let n=t;for(;n&&!(n===document.body||n.nodeType===11);){if(vMe(n))return!1;n=n.parentNode}return!0}function eY(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function $I(t){const e=t.nodeName.toLowerCase(),n=!Number.isNaN(eY(t));return(yMe.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||n)&&bMe(t)}function tY(t){const e=eY(t);return(Number.isNaN(e)||e>=0)&&$I(t)}function wMe(t){return Array.from(t.querySelectorAll(JW)).filter(tY)}function CMe(t,e){const n=wMe(t);if(!n.length){e.preventDefault();return}const r=n[e.shiftKey?0:n.length-1],o=t.getRootNode();let i=r===o.activeElement||t===o.activeElement;const s=o.activeElement;if(s.tagName==="INPUT"&&s.getAttribute("type")==="radio"&&(i=n.filter(d=>d.getAttribute("type")==="radio"&&d.getAttribute("name")===s.getAttribute("name")).includes(r)),!i)return;e.preventDefault();const l=n[e.shiftKey?n.length-1:0];l&&l.focus()}function nY(t=!0){const e=E.useRef(null),n=o=>{let i=o.querySelector("[data-autofocus]");if(!i){const s=Array.from(o.querySelectorAll(JW));i=s.find(tY)||s.find($I)||null,!i&&$I(o)&&(i=o)}i&&i.focus({preventScroll:!0})},r=E.useCallback(o=>{t&&o!==null&&e.current!==o&&(o?(setTimeout(()=>{o.getRootNode()&&n(o)}),e.current=o):e.current=null)},[t]);return E.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>n(e.current));const o=i=>{i.key==="Tab"&&e.current&&CMe(e.current,i)};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[t]),r}const SMe=De.useId||(()=>{});function _Me(){const t=SMe();return t?`mantine-${t.replace(/:/g,"")}`:""}function p0(t){const e=_Me(),[n,r]=E.useState(e);return Jx(()=>{r(dMe())},[]),typeof t=="string"?t:typeof window>"u"?e:n}function KS(t,e){if(typeof t=="function")return t(e);typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function m0(...t){const e=new Map;return n=>{if(t.forEach(r=>{const o=KS(r,n);o&&e.set(r,o)}),e.size>0)return()=>{t.forEach(r=>{const o=e.get(r);o?o():KS(r,null)}),e.clear()}}}function Fu(...t){return E.useCallback(m0(...t),t)}function qg({value:t,defaultValue:e,finalValue:n,onChange:r=()=>{}}){const[o,i]=E.useState(e!==void 0?e:n),s=(a,...l)=>{i(a),r?.(a,...l)};return t!==void 0?[t,r,!0]:[o,s,!1]}function xMe(t,e){return mMe("(prefers-reduced-motion: reduce)",t,e)}function EMe(){const[t,e]=E.useState(!1),n=E.useRef(null),r=E.useCallback(()=>e(!0),[]),o=E.useCallback(()=>e(!1),[]);return E.useEffect(()=>{const i=n.current;if(i)return i.addEventListener("mouseenter",r),i.addEventListener("mouseleave",o),()=>{i?.removeEventListener("mouseenter",r),i?.removeEventListener("mouseleave",o)}},[n.current]),{ref:n,hovered:t}}function kMe(t){return t.currentTarget instanceof HTMLElement&&t.relatedTarget instanceof HTMLElement?t.currentTarget.contains(t.relatedTarget):!1}function rY({onBlur:t,onFocus:e}={}){const n=E.useRef(null),[r,o]=E.useState(!1),i=E.useRef(!1),s=c=>{o(c),i.current=c},a=c=>{i.current||(s(!0),e?.(c))},l=c=>{i.current&&!kMe(c)&&(s(!1),t?.(c))};return E.useEffect(()=>{const c=n.current;if(c)return c.addEventListener("focusin",a),c.addEventListener("focusout",l),()=>{c?.removeEventListener("focusin",a),c?.removeEventListener("focusout",l)}},[a,l]),{ref:n,focused:r}}function OP(t){const e=De.version;return typeof De.version!="string"||e.startsWith("18.")?t?.ref:t?.props?.ref}const TMe={};function AMe(t){const e={};return t.forEach(n=>{Object.entries(n).forEach(([r,o])=>{e[r]?e[r]=Rl(e[r],o):e[r]=o})}),e}function eE({theme:t,classNames:e,props:n,stylesCtx:r}){const i=(Array.isArray(e)?e:[e]).map(s=>typeof s=="function"?s(t,n,r):s||TMe);return AMe(i)}function WS({theme:t,styles:e,props:n,stylesCtx:r}){return(Array.isArray(e)?e:[e]).reduce((i,s)=>typeof s=="function"?{...i,...s(t,n,r)}:{...i,...s},{})}const oY=E.createContext(null);function Df(){const t=E.useContext(oY);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function RMe(){return Df().cssVariablesResolver}function IMe(){return Df().classNamesPrefix}function PP(){return Df().getStyleNonce}function MMe(){return Df().withStaticClasses}function NMe(){return Df().headless}function OMe(){return Df().stylesTransform?.sx}function PMe(){return Df().stylesTransform?.styles}function iY(){return Df().env||"default"}function DMe(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function LMe(t){let e=t.replace("#","");if(e.length===3){const s=e.split("");e=[s[0],s[0],s[1],s[1],s[2],s[2]].join("")}if(e.length===8){const s=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:s}}const n=parseInt(e,16),r=n>>16&255,o=n>>8&255,i=n&255;return{r,g:o,b:i,a:1}}function VMe(t){const[e,n,r,o]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:n,b:r,a:o===void 0?1:o}}function jMe(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=t.match(e);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),o=parseInt(n[2],10)/100,i=parseInt(n[3],10)/100,s=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*i-1))*o,l=r/60,c=a*(1-Math.abs(l%2-1)),d=i-a/2;let f,p,g;return l>=0&&l<1?(f=a,p=c,g=0):l>=1&&l<2?(f=c,p=a,g=0):l>=2&&l<3?(f=0,p=a,g=c):l>=3&&l<4?(f=0,p=c,g=a):l>=4&&l<5?(f=c,p=0,g=a):(f=a,p=0,g=c),{r:Math.round((f+d)*255),g:Math.round((p+d)*255),b:Math.round((g+d)*255),a:s||1}}function DP(t){return DMe(t)?LMe(t):t.startsWith("rgb")?VMe(t):t.startsWith("hsl")?jMe(t):{r:0,g:0,b:0,a:1}}function vw(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r:n,g:r,b:o,a:i}=DP(t),s=1-e,a=l=>Math.round(l*s);return`rgba(${a(n)}, ${a(r)}, ${a(o)}, ${i})`}function _b(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function e2(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function BMe(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function $Me(t){if(t.startsWith("oklch("))return(BMe(t)||0)/100;const{r:e,g:n,b:r}=DP(t),o=e/255,i=n/255,s=r/255,a=e2(o),l=e2(i),c=e2(s);return .2126*a+.7152*l+.0722*c}function Xy(t,e=.179){return t.startsWith("var(")?!1:$Me(t)>e}function Kg({color:t,theme:e,colorScheme:n}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:n==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Xy(n==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:n==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Xy(n==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Xy(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[r,o]=t.split("."),i=o?Number(o):void 0,s=r in e.colors;if(s){const a=i!==void 0?e.colors[r][i]:e.colors[r][_b(e,n||"light")];return{color:r,value:a,shade:i,isThemeColor:s,isLight:Xy(a,e.luminanceThreshold),variable:o?`--mantine-color-${r}-${i}`:`--mantine-color-${r}-filled`}}return{color:t,value:t,isThemeColor:s,isLight:Xy(t,e.luminanceThreshold),shade:i,variable:void 0}}function _c(t,e){const n=Kg({color:t||e.primaryColor,theme:e});return n.variable?`var(${n.variable})`:t}function FI(t,e){const n={from:t?.from||e.defaultGradient.from,to:t?.to||e.defaultGradient.to,deg:t?.deg??e.defaultGradient.deg??0},r=_c(n.from,e),o=_c(n.to,e);return`linear-gradient(${n.deg}deg, ${r} 0%, ${o} 100%)`}function Jl(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const i=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${i}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r:n,g:r,b:o}=DP(t);return`rgba(${n}, ${r}, ${o}, ${e})`}const im=Jl,FMe=({color:t,theme:e,variant:n,gradient:r,autoContrast:o})=>{const i=Kg({color:t,theme:e}),s=typeof o=="boolean"?o:e.autoContrast;if(n==="filled"){const a=s&&i.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return i.isThemeColor?i.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:a,border:`${ze(1)} solid transparent`}:{background:`var(--mantine-color-${i.color}-${i.shade})`,hover:`var(--mantine-color-${i.color}-${i.shade===9?8:i.shade+1})`,color:a,border:`${ze(1)} solid transparent`}:{background:t,hover:vw(t,.1),color:a,border:`${ze(1)} solid transparent`}}if(n==="light"){if(i.isThemeColor){if(i.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${ze(1)} solid transparent`};const a=e.colors[i.color][i.shade];return{background:Jl(a,.1),hover:Jl(a,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${ze(1)} solid transparent`}}return{background:Jl(t,.1),hover:Jl(t,.12),color:t,border:`${ze(1)} solid transparent`}}if(n==="outline")return i.isThemeColor?i.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${ze(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:Jl(e.colors[i.color][i.shade],.05),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${ze(1)} solid var(--mantine-color-${i.color}-${i.shade})`}:{background:"transparent",hover:Jl(t,.05),color:t,border:`${ze(1)} solid ${t}`};if(n==="subtle"){if(i.isThemeColor){if(i.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${ze(1)} solid transparent`};const a=e.colors[i.color][i.shade];return{background:"transparent",hover:Jl(a,.12),color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${ze(1)} solid transparent`}}return{background:"transparent",hover:Jl(t,.12),color:t,border:`${ze(1)} solid transparent`}}return n==="transparent"?i.isThemeColor?i.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${ze(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${i.color}-${Math.min(i.shade,6)})`,border:`${ze(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${ze(1)} solid transparent`}:n==="white"?i.isThemeColor?i.shade===void 0?{background:"var(--mantine-color-white)",hover:vw(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${ze(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:vw(e.white,.01),color:`var(--mantine-color-${i.color}-${i.shade})`,border:`${ze(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:vw(e.white,.01),color:t,border:`${ze(1)} solid transparent`}:n==="gradient"?{background:FI(r,e),hover:FI(r,e),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${ze(1)} solid var(--mantine-color-default-border)`}:{}},HMe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},I$="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",LP={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:HMe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:FMe,autoContrast:!1,luminanceThreshold:.3,fontFamily:I$,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:I$,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:ze(34),lineHeight:"1.3"},h2:{fontSize:ze(26),lineHeight:"1.35"},h3:{fontSize:ze(22),lineHeight:"1.4"},h4:{fontSize:ze(18),lineHeight:"1.45"},h5:{fontSize:ze(16),lineHeight:"1.5"},h6:{fontSize:ze(14),lineHeight:"1.5"}}},fontSizes:{xs:ze(12),sm:ze(14),md:ze(16),lg:ze(18),xl:ze(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:ze(2),sm:ze(4),md:ze(8),lg:ze(16),xl:ze(32)},spacing:{xs:ze(10),sm:ze(12),md:ze(16),lg:ze(20),xl:ze(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), 0 ${ze(1)} ${ze(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(10)} ${ze(15)} ${ze(-5)}, rgba(0, 0, 0, 0.04) 0 ${ze(7)} ${ze(7)} ${ze(-5)}`,md:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(20)} ${ze(25)} ${ze(-5)}, rgba(0, 0, 0, 0.04) 0 ${ze(10)} ${ze(10)} ${ze(-5)}`,lg:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(28)} ${ze(23)} ${ze(-7)}, rgba(0, 0, 0, 0.04) 0 ${ze(12)} ${ze(12)} ${ze(-7)}`,xl:`0 ${ze(1)} ${ze(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${ze(36)} ${ze(28)} ${ze(-7)}, rgba(0, 0, 0, 0.04) 0 ${ze(17)} ${ze(17)} ${ze(-7)}`},other:{},components:{}};function M$(t){return t==="auto"||t==="dark"||t==="light"}function UMe({key:t="mantine-color-scheme-value"}={}){let e;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(t);return M$(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(t,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{e=r=>{r.storageArea===window.localStorage&&r.key===t&&M$(r.newValue)&&n(r.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const zMe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",N$="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function t2(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function O$(t){if(!(t.primaryColor in t.colors))throw new Error(zMe);if(typeof t.primaryShade=="object"&&(!t2(t.primaryShade.dark)||!t2(t.primaryShade.light)))throw new Error(N$);if(typeof t.primaryShade=="number"&&!t2(t.primaryShade))throw new Error(N$)}function GMe(t,e){if(!e)return O$(t),t;const n=MP(t,e);return e.fontFamily&&!e.headings?.fontFamily&&(n.headings.fontFamily=e.fontFamily),O$(n),n}const VP=E.createContext(null),qMe=()=>E.useContext(VP)||LP;function ia(){const t=E.useContext(VP);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function sY({theme:t,children:e,inherit:n=!0}){const r=qMe(),o=E.useMemo(()=>GMe(n?r:LP,t),[t,r,n]);return w.jsx(VP.Provider,{value:o,children:e})}sY.displayName="@mantine/core/MantineThemeProvider";function KMe(){const t=ia(),e=PP(),n=mc(t.breakpoints).reduce((r,o)=>{const i=t.breakpoints[o].includes("px"),s=tMe(t.breakpoints[o]),a=i?`${s-.1}px`:T$(s-.1),l=i?`${s}px`:T$(s);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${o} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${o} {display: none !important;}}`},"");return w.jsx("style",{"data-mantine-styles":"classes",nonce:e?.(),dangerouslySetInnerHTML:{__html:n}})}function n2(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join("")}function Qy(t,e){return(Array.isArray(t)?t:[t]).reduce((r,o)=>`${o}{${r}}`,e)}function WMe(t,e){const n=n2(t.variables),r=n?Qy(e,n):"",o=n2(t.dark),i=n2(t.light),s=o?Qy(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,o):"",a=i?Qy(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,i):"";return`${r}${s}${a}`}function aY({color:t,theme:e,autoContrast:n}){return(typeof n=="boolean"?n:e.autoContrast)&&Kg({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function P$(t,e){return aY({color:t.colors[t.primaryColor][_b(t,e)],theme:t,autoContrast:null})}function bw({theme:t,color:e,colorScheme:n,name:r=e,withColorValues:o=!0}){if(!t.colors[e])return{};if(n==="light"){const a=_b(t,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:im(t.colors[e][a],.1),[`--mantine-color-${r}-light-hover`]:im(t.colors[e][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:im(t.colors[e][a],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...l}:l}const i=_b(t,"dark"),s={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${i})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${i===9?8:i+1})`,[`--mantine-color-${r}-light`]:im(t.colors[e][Math.max(0,i-2)],.15),[`--mantine-color-${r}-light-hover`]:im(t.colors[e][Math.max(0,i-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(i-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(i-4,0)})`,[`--mantine-color-${r}-outline-hover`]:im(t.colors[e][Math.max(i-4,0)],.05)};return o?{[`--mantine-color-${r}-0`]:t.colors[e][0],[`--mantine-color-${r}-1`]:t.colors[e][1],[`--mantine-color-${r}-2`]:t.colors[e][2],[`--mantine-color-${r}-3`]:t.colors[e][3],[`--mantine-color-${r}-4`]:t.colors[e][4],[`--mantine-color-${r}-5`]:t.colors[e][5],[`--mantine-color-${r}-6`]:t.colors[e][6],[`--mantine-color-${r}-7`]:t.colors[e][7],[`--mantine-color-${r}-8`]:t.colors[e][8],[`--mantine-color-${r}-9`]:t.colors[e][9],...s}:s}function YMe(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function sm(t,e,n){mc(e).forEach(r=>Object.assign(t,{[`--mantine-${n}-${r}`]:e[r]}))}const lY=t=>{const e=_b(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:ze(t.defaultRadius),r={variables:{"--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":P$(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":P$(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};sm(r.variables,t.breakpoints,"breakpoint"),sm(r.variables,t.spacing,"spacing"),sm(r.variables,t.fontSizes,"font-size"),sm(r.variables,t.lineHeights,"line-height"),sm(r.variables,t.shadows,"shadow"),sm(r.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((i,s)=>{r.variables[`--mantine-primary-color-${s}`]=`var(--mantine-color-${t.primaryColor}-${s})`}),mc(t.colors).forEach(i=>{const s=t.colors[i];if(YMe(s)){Object.assign(r.light,bw({theme:t,name:s.name,color:s.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,bw({theme:t,name:s.name,color:s.dark,colorScheme:"dark",withColorValues:!0}));return}s.forEach((a,l)=>{r.variables[`--mantine-color-${i}-${l}`]=a}),Object.assign(r.light,bw({theme:t,color:i,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,bw({theme:t,color:i,colorScheme:"dark",withColorValues:!1}))});const o=t.headings.sizes;return mc(o).forEach(i=>{r.variables[`--mantine-${i}-font-size`]=o[i].fontSize,r.variables[`--mantine-${i}-line-height`]=o[i].lineHeight,r.variables[`--mantine-${i}-font-weight`]=o[i].fontWeight||t.headings.fontWeight}),r};function XMe({theme:t,generator:e}){const n=lY(t),r=e?.(t);return r?MP(n,r):n}const r2=lY(LP);function QMe(t){const e={variables:{},light:{},dark:{}};return mc(t.variables).forEach(n=>{r2.variables[n]!==t.variables[n]&&(e.variables[n]=t.variables[n])}),mc(t.light).forEach(n=>{r2.light[n]!==t.light[n]&&(e.light[n]=t.light[n])}),mc(t.dark).forEach(n=>{r2.dark[n]!==t.dark[n]&&(e.dark[n]=t.dark[n])}),e}function ZMe(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function cY({cssVariablesSelector:t,deduplicateCssVariables:e}){const n=ia(),r=PP(),o=RMe(),i=XMe({theme:n,generator:o}),s=t===":root"&&e,a=s?QMe(i):i,l=WMe(a,t);return l?w.jsx("style",{"data-mantine-styles":!0,nonce:r?.(),dangerouslySetInnerHTML:{__html:`${l}${s?"":ZMe(t)}`}}):null}cY.displayName="@mantine/CssVariables";function JMe(){const t=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||t(...e)}}function am(t,e){const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,r=t!=="auto"?t:n?"dark":"light";e()?.setAttribute("data-mantine-color-scheme",r)}function eNe({manager:t,defaultColorScheme:e,getRootElement:n,forceColorScheme:r}){const o=E.useRef(null),[i,s]=E.useState(()=>t.get(e)),a=r||i,l=E.useCallback(d=>{r||(am(d,n),s(d),t.set(d))},[t.set,a,r]),c=E.useCallback(()=>{s(e),am(e,n),t.clear()},[t.clear,e]);return E.useEffect(()=>(t.subscribe(l),t.unsubscribe),[t.subscribe,t.unsubscribe]),Jx(()=>{am(t.get(e),n)},[]),E.useEffect(()=>{if(r)return am(r,n),()=>{};r===void 0&&am(i,n),typeof window<"u"&&"matchMedia"in window&&(o.current=window.matchMedia("(prefers-color-scheme: dark)"));const d=f=>{i==="auto"&&am(f.matches?"dark":"light",n)};return o.current?.addEventListener("change",d),()=>o.current?.removeEventListener("change",d)},[i,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:c}}function tNe({respectReducedMotion:t,getRootElement:e}){Jx(()=>{t&&e()?.setAttribute("data-respect-reduced-motion","true")},[t])}JMe();function uY({theme:t,children:e,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:o=!0,deduplicateCssVariables:i=!0,withCssVariables:s=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=UMe(),defaultColorScheme:d="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:p,forceColorScheme:g,stylesTransform:y,env:b}){const{colorScheme:_,setColorScheme:k,clearColorScheme:M}=eNe({defaultColorScheme:d,forceColorScheme:g,manager:c,getRootElement:f});return tNe({respectReducedMotion:t?.respectReducedMotion||!1,getRootElement:f}),w.jsx(oY.Provider,{value:{colorScheme:_,setColorScheme:k,clearColorScheme:M,getRootElement:f,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:p,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:y,env:b},children:w.jsxs(sY,{theme:t,children:[s&&w.jsx(cY,{cssVariablesSelector:a,deduplicateCssVariables:i}),o&&w.jsx(KMe,{}),e]})})}uY.displayName="@mantine/core/MantineProvider";function tE({classNames:t,styles:e,props:n,stylesCtx:r}){const o=ia();return{resolvedClassNames:eE({theme:o,classNames:t,props:n,stylesCtx:r||void 0}),resolvedStyles:WS({theme:o,styles:e,props:n,stylesCtx:r||void 0})}}const nNe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function rNe({theme:t,options:e,unstyled:n}){return Rl(e?.focusable&&!n&&(t.focusClassName||nNe[t.focusRing]),e?.active&&!n&&t.activeClassName)}function oNe({selector:t,stylesCtx:e,options:n,props:r,theme:o}){return eE({theme:o,classNames:n?.classNames,props:n?.props||r,stylesCtx:e})[t]}function D$({selector:t,stylesCtx:e,theme:n,classNames:r,props:o}){return eE({theme:n,classNames:r,props:o,stylesCtx:e})[t]}function iNe({rootSelector:t,selector:e,className:n}){return t===e?n:void 0}function sNe({selector:t,classes:e,unstyled:n}){return n?void 0:e[t]}function aNe({themeName:t,classNamesPrefix:e,selector:n,withStaticClass:r}){return r===!1?[]:t.map(o=>`${e}-${o}-${n}`)}function lNe({themeName:t,theme:e,selector:n,props:r,stylesCtx:o}){return t.map(i=>eE({theme:e,classNames:e.components[i]?.classNames,props:r,stylesCtx:o})?.[n])}function cNe({options:t,classes:e,selector:n,unstyled:r}){return t?.variant&&!r?e[`${n}--${t.variant}`]:void 0}function uNe({theme:t,options:e,themeName:n,selector:r,classNamesPrefix:o,classNames:i,classes:s,unstyled:a,className:l,rootSelector:c,props:d,stylesCtx:f,withStaticClasses:p,headless:g,transformedStyles:y}){return Rl(rNe({theme:t,options:e,unstyled:a||g}),lNe({theme:t,themeName:n,selector:r,props:d,stylesCtx:f}),cNe({options:e,classes:s,selector:r,unstyled:a}),D$({selector:r,stylesCtx:f,theme:t,classNames:i,props:d}),D$({selector:r,stylesCtx:f,theme:t,classNames:y,props:d}),oNe({selector:r,stylesCtx:f,options:e,props:d,theme:t}),iNe({rootSelector:c,selector:r,className:l}),sNe({selector:r,classes:s,unstyled:a||g}),p&&!g&&aNe({themeName:n,classNamesPrefix:o,selector:r,withStaticClass:e?.withStaticClass}),e?.className)}function dNe({theme:t,themeName:e,props:n,stylesCtx:r,selector:o}){return e.map(i=>WS({theme:t,styles:t.components[i]?.styles,props:n,stylesCtx:r})[o]).reduce((i,s)=>({...i,...s}),{})}function HI({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...HI({style:r,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function fNe(t){return t.reduce((e,n)=>(n&&Object.keys(n).forEach(r=>{e[r]={...e[r],...Qx(n[r])}}),e),{})}function hNe({vars:t,varsResolver:e,theme:n,props:r,stylesCtx:o,selector:i,themeName:s,headless:a}){return fNe([a?{}:e?.(n,r,o),...s.map(l=>n.components?.[l]?.vars?.(n,r,o)),t?.(n,r,o)])?.[i]}function pNe({theme:t,themeName:e,selector:n,options:r,props:o,stylesCtx:i,rootSelector:s,styles:a,style:l,vars:c,varsResolver:d,headless:f,withStylesTransform:p}){return{...!p&&dNe({theme:t,themeName:e,props:o,stylesCtx:i,selector:n}),...!p&&WS({theme:t,styles:a,props:o,stylesCtx:i})[n],...!p&&WS({theme:t,styles:r?.styles,props:r?.props||o,stylesCtx:i})[n],...hNe({theme:t,props:o,stylesCtx:i,vars:c,varsResolver:d,selector:n,themeName:e,headless:f}),...s===n?HI({style:l,theme:t}):null,...HI({style:r?.style,theme:t})}}function mNe({props:t,stylesCtx:e,themeName:n}){const r=ia(),o=PMe()?.();return{getTransformedStyles:s=>o?[...s.map(l=>o(l,{props:t,theme:r,ctx:e})),...n.map(l=>o(r.components[l]?.styles,{props:t,theme:r,ctx:e}))].filter(Boolean):[],withStylesTransform:!!o}}function On({name:t,classes:e,props:n,stylesCtx:r,className:o,style:i,rootSelector:s="root",unstyled:a,classNames:l,styles:c,vars:d,varsResolver:f}){const p=ia(),g=IMe(),y=MMe(),b=NMe(),_=(Array.isArray(t)?t:[t]).filter(N=>N),{withStylesTransform:k,getTransformedStyles:M}=mNe({props:n,stylesCtx:r,themeName:_});return(N,j)=>({className:uNe({theme:p,options:j,themeName:_,selector:N,classNamesPrefix:g,classNames:l,classes:e,unstyled:a,className:o,rootSelector:s,props:n,stylesCtx:r,withStaticClasses:y,headless:b,transformedStyles:M([j?.styles,c])}),style:pNe({theme:p,themeName:_,selector:N,options:j,props:n,stylesCtx:r,rootSelector:s,styles:c,style:i,vars:d,varsResolver:f,headless:b,withStylesTransform:k})})}function gNe(t,e){return typeof t=="boolean"?t:e.autoContrast}function bt(t,e,n){const r=ia(),o=r.components[t]?.defaultProps,i=typeof o=="function"?o(r):o;return{...e,...i,...Qx(n)}}function o2(t){return mc(t).reduce((e,n)=>t[n]!==void 0?`${e}${JIe(n)}:${t[n]};`:e,"").trim()}function yNe({selector:t,styles:e,media:n,container:r}){const o=e?o2(e):"",i=Array.isArray(n)?n.map(a=>`@media${a.query}{${t}{${o2(a.styles)}}}`):[],s=Array.isArray(r)?r.map(a=>`@container ${a.query}{${t}{${o2(a.styles)}}}`):[];return`${o?`${t}{${o}}`:""}${i.join("")}${s.join("")}`.trim()}function dY(t){const e=PP();return w.jsx("style",{"data-mantine-styles":"inline",nonce:e?.(),dangerouslySetInnerHTML:{__html:yNe(t)}})}function nE(t){const{m:e,mx:n,my:r,mt:o,mb:i,ml:s,mr:a,me:l,ms:c,p:d,px:f,py:p,pt:g,pb:y,pl:b,pr:_,pe:k,ps:M,bd:N,bg:j,c:B,opacity:F,ff:D,fz:R,fw:I,lts:L,ta:z,lh:q,fs:H,tt:ne,td:re,w:V,miw:U,maw:Q,h:J,mih:Y,mah:se,bgsz:te,bgp:ie,bgr:ce,bga:ae,pos:ye,top:we,left:Be,bottom:Ie,right:Ge,inset:it,display:Xe,flex:zt,hiddenFrom:un,visibleFrom:Pt,lightHidden:Pn,darkHidden:kt,sx:hn,...sn}=t;return{styleProps:Qx({m:e,mx:n,my:r,mt:o,mb:i,ml:s,mr:a,me:l,ms:c,p:d,px:f,py:p,pt:g,pb:y,pl:b,pr:_,pe:k,ps:M,bd:N,bg:j,c:B,opacity:F,ff:D,fz:R,fw:I,lts:L,ta:z,lh:q,fs:H,tt:ne,td:re,w:V,miw:U,maw:Q,h:J,mih:Y,mah:se,bgsz:te,bgp:ie,bgr:ce,bga:ae,pos:ye,top:we,left:Be,bottom:Ie,right:Ge,inset:it,display:Xe,flex:zt,hiddenFrom:un,visibleFrom:Pt,lightHidden:Pn,darkHidden:kt,sx:hn}),rest:sn}}const vNe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function jP(t,e){const n=Kg({color:t,theme:e});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function bNe(t,e){const n=Kg({color:t,theme:e});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:jP(t,e)}function wNe(t,e){if(typeof t=="number")return ze(t);if(typeof t=="string"){const[n,r,...o]=t.split(" ").filter(s=>s.trim()!=="");let i=`${ze(n)}`;return r&&(i+=` ${r}`),o.length>0&&(i+=` ${jP(o.join(" "),e)}`),i.trim()}return t}const L$={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function CNe(t){return typeof t=="string"&&t in L$?L$[t]:t}const SNe=["h1","h2","h3","h4","h5","h6"];function _Ne(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&SNe.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?ze(t):t}function xNe(t){return t}const ENe=["h1","h2","h3","h4","h5","h6"];function kNe(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&ENe.includes(t)?`var(--mantine-${t}-line-height)`:t}function TNe(t){return typeof t=="number"?ze(t):t}function ANe(t,e){if(typeof t=="number")return ze(t);if(typeof t=="string"){const n=t.replace("-","");if(!(n in e.spacing))return ze(t);const r=`--mantine-spacing-${n}`;return t.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return t}const i2={color:jP,textColor:bNe,fontSize:_Ne,spacing:ANe,identity:xNe,size:TNe,lineHeight:kNe,fontFamily:CNe,border:wNe};function V$(t){return t.replace("(min-width: ","").replace("em)","")}function RNe({media:t,...e}){const r=Object.keys(t).sort((o,i)=>Number(V$(o))-Number(V$(i))).map(o=>({query:o,styles:t[o]}));return{...e,media:r}}function INe(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function MNe(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function NNe(t){return typeof t=="object"&&t!==null?mc(t).filter(e=>e!=="base"):[]}function ONe(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function fY({styleProps:t,data:e,theme:n}){return RNe(mc(t).reduce((r,o)=>{if(o==="hiddenFrom"||o==="visibleFrom"||o==="sx")return r;const i=e[o],s=Array.isArray(i.property)?i.property:[i.property],a=MNe(t[o]);if(!INe(t[o]))return s.forEach(c=>{r.inlineStyles[c]=i2[i.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=NNe(t[o]);return s.forEach(c=>{a&&(r.styles[c]=i2[i.type](a,n)),l.forEach(d=>{const f=`(min-width: ${n.breakpoints[d]})`;r.media[f]={...r.media[f],[c]:i2[i.type](ONe(t[o],d),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function hY(){return`__m__-${E.useId().replace(/:/g,"")}`}function pY(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...pY(r,e)}),{}):typeof t=="function"?t(e):t??{}}function mY(t){return t.startsWith("data-")?t:`data-${t}`}function PNe(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r===void 0||r===""||r===!1||r===null||(e[mY(n)]=t[n]),e},{})}function gY(t){return t?typeof t=="string"?{[mY(t)]:!0}:Array.isArray(t)?[...t].reduce((e,n)=>({...e,...gY(n)}),{}):PNe(t):null}function UI(t,e){return Array.isArray(t)?[...t].reduce((n,r)=>({...n,...UI(r,e)}),{}):typeof t=="function"?t(e):t??{}}function DNe({theme:t,style:e,vars:n,styleProps:r}){const o=UI(e,t),i=UI(n,t);return{...o,...i,...r}}const yY=E.forwardRef(({component:t,style:e,__vars:n,className:r,variant:o,mod:i,size:s,hiddenFrom:a,visibleFrom:l,lightHidden:c,darkHidden:d,renderRoot:f,__size:p,...g},y)=>{const b=ia(),_=t||"div",{styleProps:k,rest:M}=nE(g),j=OMe()?.()?.(k.sx),B=hY(),F=fY({styleProps:k,theme:b,data:vNe}),D={ref:y,style:DNe({theme:b,style:e,vars:n,styleProps:F.inlineStyles}),className:Rl(r,j,{[B]:F.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":d,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":o,"data-size":XW(s)?void 0:s||void 0,size:p,...gY(i),...M};return w.jsxs(w.Fragment,{children:[F.hasResponsiveStyles&&w.jsx(dY,{selector:`.${B}`,styles:F.styles,media:F.media}),typeof f=="function"?f(D):w.jsx(_,{...D})]})});yY.displayName="@mantine/core/Box";const $t=yY;function vY(t){return t}function LNe(t){const e=t;return n=>{const r=E.forwardRef((o,i)=>w.jsx(e,{...n,...o,ref:i}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r}}function Fn(t){const e=E.forwardRef(t);return e.extend=vY,e.withProps=n=>{const r=E.forwardRef((o,i)=>w.jsx(e,{...n,...o,ref:i}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e}function ts(t){const e=E.forwardRef(t);return e.withProps=n=>{const r=E.forwardRef((o,i)=>w.jsx(e,{...n,...o,ref:i}));return r.extend=e.extend,r.displayName=`WithProps(${e.displayName})`,r},e.extend=vY,e}const VNe=E.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function g0(){return E.useContext(VNe)}var bY={root:"m_87cf2631"};const jNe={__staticSelector:"UnstyledButton"},vp=ts((t,e)=>{const n=bt("UnstyledButton",jNe,t),{className:r,component:o="button",__staticSelector:i,unstyled:s,classNames:a,styles:l,style:c,...d}=n,f=On({name:i,props:n,classes:bY,className:r,style:c,classNames:a,styles:l,unstyled:s});return w.jsx($t,{...f("root",{focusable:!0}),component:o,ref:e,type:o==="button"?"button":void 0,...d})});vp.classes=bY;vp.displayName="@mantine/core/UnstyledButton";var wY={root:"m_515a97f8"};const BNe={},BP=Fn((t,e)=>{const n=bt("VisuallyHidden",BNe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,...c}=n,d=On({name:"VisuallyHidden",classes:wY,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a});return w.jsx($t,{component:"span",ref:e,...d("root"),...c})});BP.classes=wY;BP.displayName="@mantine/core/VisuallyHidden";var CY={root:"m_1b7284a3"};const $Ne={},FNe=(t,{radius:e,shadow:n})=>({root:{"--paper-radius":e===void 0?void 0:Fi(e),"--paper-shadow":ZW(n)}}),$P=ts((t,e)=>{const n=bt("Paper",$Ne,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,withBorder:l,vars:c,radius:d,shadow:f,variant:p,mod:g,...y}=n,b=On({name:"Paper",props:n,classes:CY,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:c,varsResolver:FNe});return w.jsx($t,{ref:e,mod:[{"data-with-border":l},g],...b("root"),variant:p,...y})});$P.classes=CY;$P.displayName="@mantine/core/Paper";function SY(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[n,r]=e.split("-"),o=n==="right"?"left":"right";return r===void 0?o:`${o}-${r}`}return e}function j$(t,e,n,r){return t==="center"||r==="center"?{top:e}:t==="end"?{bottom:n}:t==="start"?{top:n}:{}}function B$(t,e,n,r,o){return t==="center"||r==="center"?{left:e}:t==="end"?{[o==="ltr"?"right":"left"]:n}:t==="start"?{[o==="ltr"?"left":"right"]:n}:{}}const HNe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function UNe({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,arrowX:i,arrowY:s,dir:a}){const[l,c="center"]=t.split("-"),d={width:e,height:e,transform:"rotate(45deg)",position:"absolute",[HNe[l]]:r},f=-e/2;return l==="left"?{...d,...j$(c,s,n,o),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:l==="right"?{...d,...j$(c,s,n,o),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:l==="top"?{...d,...B$(c,i,n,o,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:l==="bottom"?{...d,...B$(c,i,n,o,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const FP=E.forwardRef(({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,visible:i,arrowX:s,arrowY:a,style:l,...c},d)=>{const{dir:f}=g0();return i?w.jsx("div",{...c,ref:d,style:{...l,...UNe({position:t,arrowSize:e,arrowOffset:n,arrowRadius:r,arrowPosition:o,dir:f,arrowX:s,arrowY:a})}}):null});FP.displayName="@mantine/core/FloatingArrow";var _Y={root:"m_9814e45f"};const zNe={zIndex:f0("modal")},GNe=(t,{gradient:e,color:n,backgroundOpacity:r,blur:o,radius:i,zIndex:s})=>({root:{"--overlay-bg":e||(n!==void 0||r!==void 0)&&Jl(n||"#000",r??.6)||void 0,"--overlay-filter":o?`blur(${ze(o)})`:void 0,"--overlay-radius":i===void 0?void 0:Fi(i),"--overlay-z-index":s?.toString()}}),xb=ts((t,e)=>{const n=bt("Overlay",zNe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,fixed:c,center:d,children:f,radius:p,zIndex:g,gradient:y,blur:b,color:_,backgroundOpacity:k,mod:M,...N}=n,j=On({name:"Overlay",props:n,classes:_Y,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:GNe});return w.jsx($t,{ref:e,...j("root"),mod:[{center:d,fixed:c},M],...N,children:f})});xb.classes=_Y;xb.displayName="@mantine/core/Overlay";function s2(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}function qNe({target:t,reuseTargetNode:e,...n}){if(t)return typeof t=="string"?document.querySelector(t)||s2(n):t;if(e){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const o=s2(n);return o.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(o),o}return s2(n)}const KNe={},xY=Fn((t,e)=>{const{children:n,target:r,reuseTargetNode:o,...i}=bt("Portal",KNe,t),[s,a]=E.useState(!1),l=E.useRef(null);return Jx(()=>(a(!0),l.current=qNe({target:r,reuseTargetNode:o,...i}),KS(e,l.current),!r&&!o&&l.current&&document.body.appendChild(l.current),()=>{!r&&!o&&l.current&&document.body.removeChild(l.current)}),[r]),!s||!l.current?null:Ts.createPortal(w.jsx(w.Fragment,{children:n}),l.current)});xY.displayName="@mantine/core/Portal";const y0=Fn(({withinPortal:t=!0,children:e,...n},r)=>iY()==="test"||!t?w.jsx(w.Fragment,{children:e}):w.jsx(xY,{ref:r,...n,children:e}));y0.displayName="@mantine/core/OptionalPortal";const Zy=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${t==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),ww={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...Zy("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...Zy("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...Zy("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...Zy("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...Zy("top"),common:{transformOrigin:"top right"}}},$$={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function WNe({transition:t,state:e,duration:n,timingFunction:r}){const o={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof t=="string"?t in ww?{transitionProperty:ww[t].transitionProperty,...o,...ww[t].common,...ww[t][$$[e]]}:{}:{transitionProperty:t.transitionProperty,...o,...t.common,...t[$$[e]]}}function YNe({duration:t,exitDuration:e,timingFunction:n,mounted:r,onEnter:o,onExit:i,onEntered:s,onExited:a,enterDelay:l,exitDelay:c}){const d=ia(),f=xMe(),p=d.respectReducedMotion?f:!1,[g,y]=E.useState(p?0:t),[b,_]=E.useState(r?"entered":"exited"),k=E.useRef(-1),M=E.useRef(-1),N=E.useRef(-1);function j(){window.clearTimeout(k.current),window.clearTimeout(M.current),cancelAnimationFrame(N.current)}const B=D=>{j();const R=D?o:i,I=D?s:a,L=p?0:D?t:e;y(L),L===0?(typeof R=="function"&&R(),typeof I=="function"&&I(),_(D?"entered":"exited")):N.current=requestAnimationFrame(()=>{E_.flushSync(()=>{_(D?"pre-entering":"pre-exiting")}),N.current=requestAnimationFrame(()=>{typeof R=="function"&&R(),_(D?"entering":"exiting"),k.current=window.setTimeout(()=>{typeof I=="function"&&I(),_(D?"entered":"exited")},L)})})},F=D=>{if(j(),typeof(D?l:c)!="number"){B(D);return}M.current=window.setTimeout(()=>{B(D)},D?l:c)};return Ef(()=>{F(r)},[r]),E.useEffect(()=>()=>{j()},[]),{transitionDuration:g,transitionStatus:b,transitionTimingFunction:n||"ease"}}function bp({keepMounted:t,transition:e="fade",duration:n=250,exitDuration:r=n,mounted:o,children:i,timingFunction:s="ease",onExit:a,onEntered:l,onEnter:c,onExited:d,enterDelay:f,exitDelay:p}){const g=iY(),{transitionDuration:y,transitionStatus:b,transitionTimingFunction:_}=YNe({mounted:o,exitDuration:r,duration:n,timingFunction:s,onExit:a,onEntered:l,onEnter:c,onExited:d,enterDelay:f,exitDelay:p});return y===0||g==="test"?o?w.jsx(w.Fragment,{children:i({})}):t?i({display:"none"}):null:b==="exited"?t?i({display:"none"}):null:w.jsx(w.Fragment,{children:i(WNe({transition:e,duration:y,state:b,timingFunction:_}))})}bp.displayName="@mantine/core/Transition";const[XNe,EY]=Zx("Popover component was not found in the tree");function HP({children:t,active:e=!0,refProp:n="ref",innerRef:r}){const o=nY(e),i=Fu(o,r);return d0(t)?E.cloneElement(t,{[n]:i}):t}function kY(t){return w.jsx(BP,{tabIndex:-1,"data-autofocus":!0,...t})}HP.displayName="@mantine/core/FocusTrap";kY.displayName="@mantine/core/FocusTrapInitialFocus";HP.InitialFocus=kY;var TY={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const QNe={},rE=Fn((t,e)=>{const n=bt("PopoverDropdown",QNe,t),{className:r,style:o,vars:i,children:s,onKeyDownCapture:a,variant:l,classNames:c,styles:d,...f}=n,p=EY(),g=gMe({opened:p.opened,shouldReturnFocus:p.returnFocus}),y=p.withRoles?{"aria-labelledby":p.getTargetId(),id:p.getDropdownId(),role:"dialog",tabIndex:-1}:{},b=Fu(e,p.floating);return p.disabled?null:w.jsx(y0,{...p.portalProps,withinPortal:p.withinPortal,children:w.jsx(bp,{mounted:p.opened,...p.transitionProps,transition:p.transitionProps?.transition||"fade",duration:p.transitionProps?.duration??150,keepMounted:p.keepMounted,exitDuration:typeof p.transitionProps?.exitDuration=="number"?p.transitionProps.exitDuration:p.transitionProps?.duration,children:_=>w.jsx(HP,{active:p.trapFocus&&p.opened,innerRef:b,children:w.jsxs($t,{...y,...f,variant:l,onKeyDownCapture:aMe(()=>{p.onClose?.(),p.onDismiss?.()},{active:p.closeOnEscape,onTrigger:g,onKeyDown:a}),"data-position":p.placement,"data-fixed":p.floatingStrategy==="fixed"||void 0,...p.getStyles("dropdown",{className:r,props:n,classNames:c,styles:d,style:[{..._,zIndex:p.zIndex,top:p.y??0,left:p.x??0,width:p.width==="target"?void 0:ze(p.width)},p.resolvedStyles.dropdown,d?.dropdown,o]}),children:[s,w.jsx(FP,{ref:p.arrowRef,arrowX:p.arrowX,arrowY:p.arrowY,visible:p.withArrow,position:p.placement,arrowSize:p.arrowSize,arrowRadius:p.arrowRadius,arrowOffset:p.arrowOffset,arrowPosition:p.arrowPosition,...p.getStyles("arrow",{props:n,classNames:c,styles:d})})]})})})})});rE.classes=TY;rE.displayName="@mantine/core/PopoverDropdown";const ZNe={refProp:"ref",popupType:"dialog"},UP=Fn((t,e)=>{const{children:n,refProp:r,popupType:o,...i}=bt("PopoverTarget",ZNe,t);if(!d0(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=i,a=EY(),l=Fu(a.reference,OP(n),e),c=a.withRoles?{"aria-haspopup":o,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return E.cloneElement(n,{...s,...c,...a.targetProps,className:Rl(a.targetProps.className,s.className,n.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});UP.displayName="@mantine/core/PopoverTarget";function AY({opened:t,floating:e,position:n,positionDependencies:r}){const[o,i]=E.useState(0);E.useEffect(()=>{if(e.refs.reference.current&&e.refs.floating.current&&t)return r7(e.refs.reference.current,e.refs.floating.current,e.update)},[e.refs.reference.current,e.refs.floating.current,t,o,n]),Ef(()=>{e.update()},r),Ef(()=>{i(s=>s+1)},[t])}function JNe(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function eOe(t,e){const n=JNe(t.middlewares),r=[Ml(t.offset)];return n.shift&&r.push(Tf(typeof n.shift=="boolean"?{limiter:F2(),padding:5}:{limiter:F2(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?Ha():Ha(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?pv():pv(n.inline)),r.push(BM({element:t.arrowRef,padding:t.arrowOffset})),(n.size||t.width==="target")&&r.push(Db({...typeof n.size=="boolean"?{}:n.size,apply({rects:o,availableWidth:i,availableHeight:s,...a}){const c=e().refs.floating.current?.style??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:o,availableWidth:i,availableHeight:s,...a}):Object.assign(c,{maxWidth:`${i}px`,maxHeight:`${s}px`})),t.width==="target"&&Object.assign(c,{width:`${o.reference.width}px`})}})),r}function tOe(t){const[e,n]=qg({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),r=E.useRef(e),o=()=>{e&&!t.disabled&&n(!1)},i=()=>!t.disabled&&n(!e),s=Gg({strategy:t.strategy,placement:t.position,middleware:eOe(t,()=>s)});return AY({opened:e,position:t.position,positionDependencies:t.positionDependencies||[],floating:s}),Ef(()=>{t.onPositionChange?.(s.placement)},[s.placement]),Ef(()=>{e!==r.current&&(e?t.onOpen?.():t.onClose?.()),r.current=e},[e,t.onClose,t.onOpen]),{floating:s,controlled:typeof t.opened=="boolean",opened:e,onClose:o,onToggle:i}}const nOe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:f0("popover"),__staticSelector:"Popover",width:"max-content"},rOe=(t,{radius:e,shadow:n})=>({dropdown:{"--popover-radius":e===void 0?void 0:Fi(e),"--popover-shadow":ZW(n)}});function Lf(t){const e=bt("Popover",nOe,t),{children:n,position:r,offset:o,onPositionChange:i,positionDependencies:s,opened:a,transitionProps:l,onExitTransitionEnd:c,onEnterTransitionEnd:d,width:f,middlewares:p,withArrow:g,arrowSize:y,arrowOffset:b,arrowRadius:_,arrowPosition:k,unstyled:M,classNames:N,styles:j,closeOnClickOutside:B,withinPortal:F,portalProps:D,closeOnEscape:R,clickOutsideEvents:I,trapFocus:L,onClose:z,onDismiss:q,onOpen:H,onChange:ne,zIndex:re,radius:V,shadow:U,id:Q,defaultOpened:J,__staticSelector:Y,withRoles:se,disabled:te,returnFocus:ie,variant:ce,keepMounted:ae,vars:ye,floatingStrategy:we,withOverlay:Be,overlayProps:Ie,...Ge}=e,it=On({name:Y,props:e,classes:TY,classNames:N,styles:j,unstyled:M,rootSelector:"dropdown",vars:ye,varsResolver:rOe}),{resolvedStyles:Xe}=tE({classNames:N,styles:j,props:e}),zt=E.useRef(null),[un,Pt]=E.useState(null),[Pn,kt]=E.useState(null),{dir:hn}=g0(),sn=p0(Q),Ft=tOe({middlewares:p,width:f,position:SY(hn,r),offset:typeof o=="number"?o+(g?y/2:0):o,arrowRef:zt,arrowOffset:b,onPositionChange:i,positionDependencies:s,opened:a,defaultOpened:J,onChange:ne,onOpen:H,onClose:z,onDismiss:q,strategy:we,disabled:te});fMe(()=>{B&&(Ft.onClose(),q?.())},I,[un,Pn]);const Wt=E.useCallback(Dn=>{Pt(Dn),Ft.floating.refs.setReference(Dn)},[Ft.floating.refs.setReference]),En=E.useCallback(Dn=>{kt(Dn),Ft.floating.refs.setFloating(Dn)},[Ft.floating.refs.setFloating]),Jt=E.useCallback(()=>{l?.onExited?.(),c?.()},[l?.onExited,c]),pn=E.useCallback(()=>{l?.onEntered?.(),d?.()},[l?.onEntered,d]);return w.jsxs(XNe,{value:{returnFocus:ie,disabled:te,controlled:Ft.controlled,reference:Wt,floating:En,x:Ft.floating.x,y:Ft.floating.y,arrowX:Ft.floating?.middlewareData?.arrow?.x,arrowY:Ft.floating?.middlewareData?.arrow?.y,opened:Ft.opened,arrowRef:zt,transitionProps:{...l,onExited:Jt,onEntered:pn},width:f,withArrow:g,arrowSize:y,arrowOffset:b,arrowRadius:_,arrowPosition:k,placement:Ft.floating.placement,trapFocus:L,withinPortal:F,portalProps:D,zIndex:re,radius:V,shadow:U,closeOnEscape:R,onDismiss:q,onClose:Ft.onClose,onToggle:Ft.onToggle,getTargetId:()=>`${sn}-target`,getDropdownId:()=>`${sn}-dropdown`,withRoles:se,targetProps:Ge,__staticSelector:Y,classNames:N,styles:j,unstyled:M,variant:ce,keepMounted:ae,getStyles:it,resolvedStyles:Xe,floatingStrategy:we},children:[n,Be&&w.jsx(bp,{transition:"fade",mounted:Ft.opened,duration:l?.duration||250,exitDuration:l?.exitDuration||250,children:Dn=>w.jsx(y0,{withinPortal:F,children:w.jsx(xb,{...Ie,...it("overlay",{className:Ie?.className,style:[Dn,Ie?.style]})})})})]})}Lf.Target=UP;Lf.Dropdown=rE;Lf.displayName="@mantine/core/Popover";Lf.extend=t=>t;var yl={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const RY=E.forwardRef(({className:t,...e},n)=>w.jsxs($t,{component:"span",className:Rl(yl.barsLoader,t),...e,ref:n,children:[w.jsx("span",{className:yl.bar}),w.jsx("span",{className:yl.bar}),w.jsx("span",{className:yl.bar})]}));RY.displayName="@mantine/core/Bars";const IY=E.forwardRef(({className:t,...e},n)=>w.jsxs($t,{component:"span",className:Rl(yl.dotsLoader,t),...e,ref:n,children:[w.jsx("span",{className:yl.dot}),w.jsx("span",{className:yl.dot}),w.jsx("span",{className:yl.dot})]}));IY.displayName="@mantine/core/Dots";const MY=E.forwardRef(({className:t,...e},n)=>w.jsx($t,{component:"span",className:Rl(yl.ovalLoader,t),...e,ref:n}));MY.displayName="@mantine/core/Oval";const NY={bars:RY,oval:MY,dots:IY},oOe={loaders:NY,type:"oval"},iOe=(t,{size:e,color:n})=>({root:{"--loader-size":_r(e,"loader-size"),"--loader-color":n?_c(n,t):void 0}}),Vf=Fn((t,e)=>{const n=bt("Loader",oOe,t),{size:r,color:o,type:i,vars:s,className:a,style:l,classNames:c,styles:d,unstyled:f,loaders:p,variant:g,children:y,...b}=n,_=On({name:"Loader",props:n,classes:yl,className:a,style:l,classNames:c,styles:d,unstyled:f,vars:s,varsResolver:iOe});return y?w.jsx($t,{..._("root"),ref:e,...b,children:y}):w.jsx($t,{..._("root"),ref:e,component:p[i],variant:g,size:r,...b})});Vf.defaultLoaders=NY;Vf.classes=yl;Vf.displayName="@mantine/core/Loader";var Wg={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const F$={orientation:"horizontal"},sOe=(t,{borderWidth:e})=>({group:{"--ai-border-width":ze(e)}}),zP=Fn((t,e)=>{const n=bt("ActionIconGroup",F$,t),{className:r,style:o,classNames:i,styles:s,unstyled:a,orientation:l,vars:c,borderWidth:d,variant:f,mod:p,...g}=bt("ActionIconGroup",F$,t),y=On({name:"ActionIconGroup",props:n,classes:Wg,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:c,varsResolver:sOe,rootSelector:"group"});return w.jsx($t,{...y("group"),ref:e,variant:f,mod:[{"data-orientation":l},p],role:"group",...g})});zP.classes=Wg;zP.displayName="@mantine/core/ActionIconGroup";const H$={},aOe=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:i,size:s})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:i});return{groupSection:{"--section-height":_r(s,"section-height"),"--section-padding-x":_r(s,"section-padding-x"),"--section-fz":ks(s),"--section-radius":e===void 0?void 0:Fi(e),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},GP=Fn((t,e)=>{const n=bt("ActionIconGroupSection",H$,t),{className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,variant:c,gradient:d,radius:f,autoContrast:p,...g}=bt("ActionIconGroupSection",H$,t),y=On({name:"ActionIconGroupSection",props:n,classes:Wg,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,varsResolver:aOe,rootSelector:"groupSection"});return w.jsx($t,{...y("groupSection"),ref:e,variant:c,...g})});GP.classes=Wg;GP.displayName="@mantine/core/ActionIconGroupSection";const lOe={},cOe=(t,{size:e,radius:n,variant:r,gradient:o,color:i,autoContrast:s})=>{const a=t.variantColorResolver({color:i||t.primaryColor,theme:t,gradient:o,variant:r||"filled",autoContrast:s});return{root:{"--ai-size":_r(e,"ai-size"),"--ai-radius":n===void 0?void 0:Fi(n),"--ai-bg":i||r?a.background:void 0,"--ai-hover":i||r?a.hover:void 0,"--ai-hover-color":i||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":i||r?a.border:void 0}}},wp=ts((t,e)=>{const n=bt("ActionIcon",lOe,t),{className:r,unstyled:o,variant:i,classNames:s,styles:a,style:l,loading:c,loaderProps:d,size:f,color:p,radius:g,__staticSelector:y,gradient:b,vars:_,children:k,disabled:M,"data-disabled":N,autoContrast:j,mod:B,...F}=n,D=On({name:["ActionIcon",y],props:n,className:r,style:l,classes:Wg,classNames:s,styles:a,unstyled:o,vars:_,varsResolver:cOe});return w.jsxs(vp,{...D("root",{active:!M&&!c&&!N}),...F,unstyled:o,variant:i,size:f,disabled:M||c,ref:e,mod:[{loading:c,disabled:M||N},B],children:[w.jsx(bp,{mounted:!!c,transition:"slide-down",duration:150,children:R=>w.jsx($t,{component:"span",...D("loader",{style:R}),"aria-hidden":!0,children:w.jsx(Vf,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...d})})}),w.jsx($t,{component:"span",mod:{loading:c},...D("icon"),children:k})]})});wp.classes=Wg;wp.displayName="@mantine/core/ActionIcon";wp.Group=zP;wp.GroupSection=GP;const OY=E.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...n},r)=>w.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:r,...n,children:w.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));OY.displayName="@mantine/core/CloseIcon";var PY={root:"m_86a44da5","root--subtle":"m_220c80f2"};const uOe={variant:"subtle"},dOe=(t,{size:e,radius:n,iconSize:r})=>({root:{"--cb-size":_r(e,"cb-size"),"--cb-radius":n===void 0?void 0:Fi(n),"--cb-icon-size":ze(r)}}),oE=ts((t,e)=>{const n=bt("CloseButton",uOe,t),{iconSize:r,children:o,vars:i,radius:s,className:a,classNames:l,style:c,styles:d,unstyled:f,"data-disabled":p,disabled:g,variant:y,icon:b,mod:_,__staticSelector:k,...M}=n,N=On({name:k||"CloseButton",props:n,className:a,style:c,classes:PY,classNames:l,styles:d,unstyled:f,vars:i,varsResolver:dOe});return w.jsxs(vp,{ref:e,...M,unstyled:f,variant:y,disabled:g,mod:[{disabled:g||p},_],...N("root",{variant:y,active:!g&&!p}),children:[b||w.jsx(OY,{}),o]})});oE.classes=PY;oE.displayName="@mantine/core/CloseButton";function fOe(t){return E.Children.toArray(t).filter(Boolean)}var DY={root:"m_4081bf90"};const hOe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},pOe=(t,{grow:e,preventGrowOverflow:n,gap:r,align:o,justify:i,wrap:s},{childWidth:a})=>({root:{"--group-child-width":e&&n?a:void 0,"--group-gap":h0(r),"--group-align":o,"--group-justify":i,"--group-wrap":s}}),pi=Fn((t,e)=>{const n=bt("Group",hOe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,children:l,gap:c,align:d,justify:f,wrap:p,grow:g,preventGrowOverflow:y,vars:b,variant:_,__size:k,mod:M,...N}=n,j=fOe(l),B=j.length,F=h0(c??"md"),R={childWidth:`calc(${100/B}% - (${F} - ${F} / ${B}))`},I=On({name:"Group",props:n,stylesCtx:R,className:o,style:i,classes:DY,classNames:r,styles:s,unstyled:a,vars:b,varsResolver:pOe});return w.jsx($t,{...I("root"),ref:e,variant:_,mod:[{grow:g},M],size:k,...N,children:j})});pi.classes=DY;pi.displayName="@mantine/core/Group";const[mOe,gOe]=NP({size:"sm"}),yOe={},LY=Fn((t,e)=>{const n=bt("InputClearButton",yOe,t),{size:r,variant:o,vars:i,classNames:s,styles:a,...l}=n,c=gOe(),{resolvedClassNames:d,resolvedStyles:f}=tE({classNames:s,styles:a,props:n});return w.jsx(oE,{variant:o||"transparent",ref:e,size:r||c?.size||"sm",classNames:d,styles:f,__staticSelector:"InputClearButton",...l})});LY.displayName="@mantine/core/InputClearButton";const[vOe,iE]=NP({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Ga={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const U$={},bOe=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${ks(e)} - ${ze(2)})`}}),sE=Fn((t,e)=>{const n=bt("InputDescription",U$,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,size:c,__staticSelector:d,__inheritStyles:f=!0,variant:p,...g}=bt("InputDescription",U$,n),y=iE(),b=On({name:["InputWrapper",d],props:n,classes:Ga,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"description",vars:l,varsResolver:bOe}),_=f&&y?.getStyles||b;return w.jsx($t,{component:"p",ref:e,variant:p,size:c,..._("description",y?.getStyles?{className:o,style:i}:void 0),...g})});sE.classes=Ga;sE.displayName="@mantine/core/InputDescription";const wOe={},COe=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${ks(e)} - ${ze(2)})`}}),aE=Fn((t,e)=>{const n=bt("InputError",wOe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,size:c,__staticSelector:d,__inheritStyles:f=!0,variant:p,...g}=n,y=On({name:["InputWrapper",d],props:n,classes:Ga,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"error",vars:l,varsResolver:COe}),b=iE(),_=f&&b?.getStyles||y;return w.jsx($t,{component:"p",ref:e,variant:p,size:c,..._("error",b?.getStyles?{className:o,style:i}:void 0),...g})});aE.classes=Ga;aE.displayName="@mantine/core/InputError";const z$={labelElement:"label"},SOe=(t,{size:e})=>({label:{"--input-label-size":ks(e),"--input-asterisk-color":void 0}}),lE=Fn((t,e)=>{const n=bt("InputLabel",z$,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,labelElement:c,size:d,required:f,htmlFor:p,onMouseDown:g,children:y,__staticSelector:b,variant:_,mod:k,...M}=bt("InputLabel",z$,n),N=On({name:["InputWrapper",b],props:n,classes:Ga,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"label",vars:l,varsResolver:SOe}),j=iE(),B=j?.getStyles||N;return w.jsxs($t,{...B("label",j?.getStyles?{className:o,style:i}:void 0),component:c,variant:_,size:d,ref:e,htmlFor:c==="label"?p:void 0,mod:[{required:f},k],onMouseDown:F=>{g?.(F),!F.defaultPrevented&&F.detail>1&&F.preventDefault()},...M,children:[y,f&&w.jsx("span",{...B("required"),"aria-hidden":!0,children:" *"})]})});lE.classes=Ga;lE.displayName="@mantine/core/InputLabel";const G$={},qP=Fn((t,e)=>{const n=bt("InputPlaceholder",G$,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,__staticSelector:c,variant:d,error:f,mod:p,...g}=bt("InputPlaceholder",G$,n),y=On({name:["InputPlaceholder",c],props:n,classes:Ga,className:o,style:i,classNames:r,styles:s,unstyled:a,rootSelector:"placeholder"});return w.jsx($t,{...y("placeholder"),mod:[{error:!!f},p],component:"span",variant:d,ref:e,...g})});qP.classes=Ga;qP.displayName="@mantine/core/InputPlaceholder";function _Oe(t,{hasDescription:e,hasError:n}){const r=t.findIndex(l=>l==="input"),o=t.slice(0,r),i=t.slice(r+1),s=e&&o.includes("description")||n&&o.includes("error");return{offsetBottom:e&&i.includes("description")||n&&i.includes("error"),offsetTop:s}}const xOe={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},EOe=(t,{size:e})=>({label:{"--input-label-size":ks(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${ks(e)} - ${ze(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${ks(e)} - ${ze(2)})`}}),KP=Fn((t,e)=>{const n=bt("InputWrapper",xOe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,size:c,variant:d,__staticSelector:f,inputContainer:p,inputWrapperOrder:g,label:y,error:b,description:_,labelProps:k,descriptionProps:M,errorProps:N,labelElement:j,children:B,withAsterisk:F,id:D,required:R,__stylesApiProps:I,mod:L,...z}=n,q=On({name:["InputWrapper",f],props:I||n,classes:Ga,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:EOe}),H={size:c,variant:d,__staticSelector:f},ne=p0(D),re=typeof F=="boolean"?F:R,V=N?.id||`${ne}-error`,U=M?.id||`${ne}-description`,Q=ne,J=!!b&&typeof b!="boolean",Y=!!_,se=`${J?V:""} ${Y?U:""}`,te=se.trim().length>0?se.trim():void 0,ie=k?.id||`${ne}-label`,ce=y&&w.jsx(lE,{labelElement:j,id:ie,htmlFor:Q,required:re,...H,...k,children:y},"label"),ae=Y&&w.jsx(sE,{...M,...H,size:M?.size||H.size,id:M?.id||U,children:_},"description"),ye=w.jsx(E.Fragment,{children:p(B)},"input"),we=J&&E.createElement(aE,{...N,...H,size:N?.size||H.size,key:"error",id:N?.id||V},b),Be=g.map(Ie=>{switch(Ie){case"label":return ce;case"input":return ye;case"description":return ae;case"error":return we;default:return null}});return w.jsx(vOe,{value:{getStyles:q,describedBy:te,inputId:Q,labelId:ie,..._Oe(g,{hasDescription:Y,hasError:J})},children:w.jsx($t,{ref:e,variant:d,size:c,mod:[{error:!!b},L],...q("root"),...z,children:Be})})});KP.classes=Ga;KP.displayName="@mantine/core/InputWrapper";const kOe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},TOe=(t,e,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":_r(e.size,"input-height"),"--input-fz":ks(e.size),"--input-radius":e.radius===void 0?void 0:Fi(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?ze(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?ze(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?_r(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),na=ts((t,e)=>{const n=bt("Input",kOe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,required:l,__staticSelector:c,__stylesApiProps:d,size:f,wrapperProps:p,error:g,disabled:y,leftSection:b,leftSectionProps:_,leftSectionWidth:k,rightSection:M,rightSectionProps:N,rightSectionWidth:j,rightSectionPointerEvents:B,leftSectionPointerEvents:F,variant:D,vars:R,pointer:I,multiline:L,radius:z,id:q,withAria:H,withErrorStyles:ne,mod:re,inputSize:V,__clearSection:U,__clearable:Q,__defaultRightSection:J,...Y}=n,{styleProps:se,rest:te}=nE(Y),ie=iE(),ce={offsetBottom:ie?.offsetBottom,offsetTop:ie?.offsetTop},ae=On({name:["Input",c],props:d||n,classes:Ga,className:o,style:i,classNames:r,styles:s,unstyled:a,stylesCtx:ce,rootSelector:"wrapper",vars:R,varsResolver:TOe}),ye=H?{required:l,disabled:y,"aria-invalid":!!g,"aria-describedby":ie?.describedBy,id:ie?.inputId||q}:{},we=M||Q&&U||J;return w.jsx(mOe,{value:{size:f||"sm"},children:w.jsxs($t,{...ae("wrapper"),...se,...p,mod:[{error:!!g&&ne,pointer:I,disabled:y,multiline:L,"data-with-right-section":!!we,"data-with-left-section":!!b},re],variant:D,size:f,children:[b&&w.jsx("div",{..._,"data-position":"left",...ae("section",{className:_?.className,style:_?.style}),children:b}),w.jsx($t,{component:"input",...te,...ye,ref:e,required:l,mod:{disabled:y,error:!!g&&ne},variant:D,__size:V,...ae("input")}),we&&w.jsx("div",{...N,"data-position":"right",...ae("section",{className:N?.className,style:N?.style}),children:we})]})})});na.classes=Ga;na.Wrapper=KP;na.Label=lE;na.Error=aE;na.Description=sE;na.Placeholder=qP;na.ClearButton=LY;na.displayName="@mantine/core/Input";function AOe(t,e,n){const r=bt(t,e,n),{label:o,description:i,error:s,required:a,classNames:l,styles:c,className:d,unstyled:f,__staticSelector:p,__stylesApiProps:g,errorProps:y,labelProps:b,descriptionProps:_,wrapperProps:k,id:M,size:N,style:j,inputContainer:B,inputWrapperOrder:F,withAsterisk:D,variant:R,vars:I,mod:L,...z}=r,{styleProps:q,rest:H}=nE(z),ne={label:o,description:i,error:s,required:a,classNames:l,className:d,__staticSelector:p,__stylesApiProps:g||r,errorProps:y,labelProps:b,descriptionProps:_,unstyled:f,styles:c,size:N,style:j,inputContainer:B,inputWrapperOrder:F,withAsterisk:D,variant:R,id:M,mod:L,...k};return{...H,classNames:l,styles:c,unstyled:f,wrapperProps:{...ne,...q},inputProps:{required:a,classNames:l,styles:c,unstyled:f,size:N,__staticSelector:p,__stylesApiProps:g||r,error:s,variant:R,id:M}}}const ROe={__staticSelector:"InputBase",withAria:!0},Yg=ts((t,e)=>{const{inputProps:n,wrapperProps:r,...o}=AOe("InputBase",ROe,t);return w.jsx(na.Wrapper,{...r,children:w.jsx(na,{...n,...o,ref:e})})});Yg.classes={...na.classes,...na.Wrapper.classes};Yg.displayName="@mantine/core/InputBase";const IOe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var VY={root:"m_8bffd616"};const MOe={},WP=ts((t,e)=>{const n=bt("Flex",MOe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,gap:c,rowGap:d,columnGap:f,align:p,justify:g,wrap:y,direction:b,..._}=n,k=On({name:"Flex",classes:VY,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l}),M=ia(),N=hY(),j=fY({styleProps:{gap:c,rowGap:d,columnGap:f,align:p,justify:g,wrap:y,direction:b},theme:M,data:IOe});return w.jsxs(w.Fragment,{children:[j.hasResponsiveStyles&&w.jsx(dY,{selector:`.${N}`,styles:j.styles,media:j.media}),w.jsx($t,{ref:e,...k("root",{className:N,style:Qx(j.inlineStyles)}),..._})]})});WP.classes=VY;WP.displayName="@mantine/core/Flex";var jY={root:"m_b6d8b162"};function NOe(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const OOe={inherit:!1},POe=(t,{variant:e,lineClamp:n,gradient:r,size:o,color:i})=>({root:{"--text-fz":ks(o),"--text-lh":lMe(o),"--text-gradient":e==="gradient"?FI(r,t):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":i?_c(i,t):void 0}}),xc=ts((t,e)=>{const n=bt("Text",OOe,t),{lineClamp:r,truncate:o,inline:i,inherit:s,gradient:a,span:l,__staticSelector:c,vars:d,className:f,style:p,classNames:g,styles:y,unstyled:b,variant:_,mod:k,size:M,...N}=n,j=On({name:["Text",c],props:n,classes:jY,className:f,style:p,classNames:g,styles:y,unstyled:b,vars:d,varsResolver:POe});return w.jsx($t,{...j("root",{focusable:!0}),ref:e,component:l?"span":"p",variant:_,mod:[{"data-truncate":NOe(o),"data-line-clamp":typeof r=="number","data-inline":i,"data-inherit":s},k],size:M,...N})});xc.classes=jY;xc.displayName="@mantine/core/Text";function YP({size:t,style:e,...n}){const r=t!==void 0?{width:ze(t),height:ze(t),...e}:e;return w.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:w.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}const BY=E.createContext(null),DOe=BY.Provider;function LOe(){return{withinGroup:!!E.useContext(BY)}}var cE={group:"m_11def92b",root:"m_f85678b6",image:"m_11f8ac07",placeholder:"m_104cd71f"};const VOe={},jOe=(t,{spacing:e})=>({group:{"--ag-spacing":h0(e)}}),XP=Fn((t,e)=>{const n=bt("AvatarGroup",VOe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,spacing:c,...d}=n,f=On({name:"AvatarGroup",classes:cE,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:jOe,rootSelector:"group"});return w.jsx(DOe,{value:!0,children:w.jsx($t,{ref:e,...f("group"),...d})})});XP.classes=cE;XP.displayName="@mantine/core/AvatarGroup";function BOe(t){return w.jsx("svg",{...t,"data-avatar-placeholder-icon":!0,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function $Oe(t){let e=0;for(let n=0;n<t.length;n+=1){const r=t.charCodeAt(n);e=(e<<5)-e+r,e|=0}return e}const FOe=["blue","cyan","grape","green","indigo","lime","orange","pink","red","teal","violet"];function HOe(t,e=FOe){const n=$Oe(t),r=Math.abs(n)%e.length;return e[r]}function UOe(t,e=2){const n=t.split(" ");return n.length===1?t.slice(0,e).toUpperCase():n.map(r=>r[0]).slice(0,e).join("").toUpperCase()}const zOe={},GOe=(t,{size:e,radius:n,variant:r,gradient:o,color:i,autoContrast:s,name:a,allowedInitialsColors:l})=>{const c=i==="initials"&&typeof a=="string"?HOe(a,l):i,d=t.variantColorResolver({color:c||"gray",theme:t,gradient:o,variant:r||"light",autoContrast:s});return{root:{"--avatar-size":_r(e,"avatar-size"),"--avatar-radius":n===void 0?void 0:Fi(n),"--avatar-bg":c||r?d.background:void 0,"--avatar-color":c||r?d.color:void 0,"--avatar-bd":c||r?d.border:void 0}}},uE=ts((t,e)=>{const n=bt("Avatar",zOe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,src:c,alt:d,radius:f,color:p,gradient:g,imageProps:y,children:b,autoContrast:_,mod:k,name:M,allowedInitialsColors:N,...j}=n,B=LOe(),[F,D]=E.useState(!c),R=On({name:"Avatar",props:n,classes:cE,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:GOe});return E.useEffect(()=>D(!c),[c]),w.jsx($t,{...R("root"),mod:[{"within-group":B.withinGroup},k],ref:e,...j,children:F?w.jsx("span",{...R("placeholder"),title:d,children:b||typeof M=="string"&&UOe(M)||w.jsx(BOe,{})}):w.jsx("img",{...y,...R("image"),src:c,alt:d,onError:I=>{D(!0),y?.onError?.(I)}})})});uE.classes=cE;uE.displayName="@mantine/core/Avatar";uE.Group=XP;var $Y={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const qOe={},KOe=(t,{radius:e,color:n,gradient:r,variant:o,size:i,autoContrast:s})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:s});return{root:{"--badge-height":_r(i,"badge-height"),"--badge-padding-x":_r(i,"badge-padding-x"),"--badge-fz":_r(i,"badge-fz"),"--badge-radius":e===void 0?void 0:Fi(e),"--badge-bg":n||o?a.background:void 0,"--badge-color":n||o?a.color:void 0,"--badge-bd":n||o?a.border:void 0,"--badge-dot-color":o==="dot"?_c(n,t):void 0}}},QP=ts((t,e)=>{const n=bt("Badge",qOe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,radius:c,color:d,gradient:f,leftSection:p,rightSection:g,children:y,variant:b,fullWidth:_,autoContrast:k,circle:M,mod:N,...j}=n,B=On({name:"Badge",props:n,classes:$Y,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:KOe});return w.jsxs($t,{variant:b,mod:[{block:_,circle:M,"with-right-section":!!g,"with-left-section":!!p},N],...B("root",{variant:b}),ref:e,...j,children:[p&&w.jsx("span",{...B("section"),"data-position":"left",children:p}),w.jsx("span",{...B("label"),children:y}),g&&w.jsx("span",{...B("section"),"data-position":"right",children:g})]})});QP.classes=$Y;QP.displayName="@mantine/core/Badge";var Xg={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const q$={orientation:"horizontal"},WOe=(t,{borderWidth:e})=>({group:{"--button-border-width":ze(e)}}),ZP=Fn((t,e)=>{const n=bt("ButtonGroup",q$,t),{className:r,style:o,classNames:i,styles:s,unstyled:a,orientation:l,vars:c,borderWidth:d,variant:f,mod:p,...g}=bt("ButtonGroup",q$,t),y=On({name:"ButtonGroup",props:n,classes:Xg,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:c,varsResolver:WOe,rootSelector:"group"});return w.jsx($t,{...y("group"),ref:e,variant:f,mod:[{"data-orientation":l},p],role:"group",...g})});ZP.classes=Xg;ZP.displayName="@mantine/core/ButtonGroup";const K$={},YOe=(t,{radius:e,color:n,gradient:r,variant:o,autoContrast:i,size:s})=>{const a=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:i});return{groupSection:{"--section-height":_r(s,"section-height"),"--section-padding-x":_r(s,"section-padding-x"),"--section-fz":s?.includes("compact")?ks(s.replace("compact-","")):ks(s),"--section-radius":e===void 0?void 0:Fi(e),"--section-bg":n||o?a.background:void 0,"--section-color":a.color,"--section-bd":n||o?a.border:void 0}}},JP=Fn((t,e)=>{const n=bt("ButtonGroupSection",K$,t),{className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,variant:c,gradient:d,radius:f,autoContrast:p,...g}=bt("ButtonGroupSection",K$,t),y=On({name:"ButtonGroupSection",props:n,classes:Xg,className:r,style:o,classNames:i,styles:s,unstyled:a,vars:l,varsResolver:YOe,rootSelector:"groupSection"});return w.jsx($t,{...y("groupSection"),ref:e,variant:c,...g})});JP.classes=Xg;JP.displayName="@mantine/core/ButtonGroupSection";const XOe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${ze(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},QOe={},ZOe=(t,{radius:e,color:n,gradient:r,variant:o,size:i,justify:s,autoContrast:a})=>{const l=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:r,variant:o||"filled",autoContrast:a});return{root:{"--button-justify":s,"--button-height":_r(i,"button-height"),"--button-padding-x":_r(i,"button-padding-x"),"--button-fz":i?.includes("compact")?ks(i.replace("compact-","")):ks(i),"--button-radius":e===void 0?void 0:Fi(e),"--button-bg":n||o?l.background:void 0,"--button-hover":n||o?l.hover:void 0,"--button-color":l.color,"--button-bd":n||o?l.border:void 0,"--button-hover-color":n||o?l.hoverColor:void 0}}},Ol=ts((t,e)=>{const n=bt("Button",QOe,t),{style:r,vars:o,className:i,color:s,disabled:a,children:l,leftSection:c,rightSection:d,fullWidth:f,variant:p,radius:g,loading:y,loaderProps:b,gradient:_,classNames:k,styles:M,unstyled:N,"data-disabled":j,autoContrast:B,mod:F,...D}=n,R=On({name:"Button",props:n,classes:Xg,className:i,style:r,classNames:k,styles:M,unstyled:N,vars:o,varsResolver:ZOe}),I=!!c,L=!!d;return w.jsxs(vp,{ref:e,...R("root",{active:!a&&!y&&!j}),unstyled:N,variant:p,disabled:a||y,mod:[{disabled:a||j,loading:y,block:f,"with-left-section":I,"with-right-section":L},F],...D,children:[w.jsx(bp,{mounted:!!y,transition:XOe,duration:150,children:z=>w.jsx($t,{component:"span",...R("loader",{style:z}),"aria-hidden":!0,children:w.jsx(Vf,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...b})})}),w.jsxs("span",{...R("inner"),children:[c&&w.jsx($t,{component:"span",...R("section"),mod:{position:"left"},children:c}),w.jsx($t,{component:"span",mod:{loading:y},...R("label"),children:l}),d&&w.jsx($t,{component:"span",...R("section"),mod:{position:"right"},children:d})]})]})});Ol.classes=Xg;Ol.displayName="@mantine/core/Button";Ol.Group=ZP;Ol.GroupSection=JP;const[JOe,ePe]=Zx("Card component was not found in tree");var eD={root:"m_e615b15f",section:"m_599a2148"};const tPe={},dE=ts((t,e)=>{const n=bt("CardSection",tPe,t),{classNames:r,className:o,style:i,styles:s,vars:a,withBorder:l,inheritPadding:c,mod:d,...f}=n,p=ePe();return w.jsx($t,{ref:e,mod:[{"with-border":l,"inherit-padding":c},d],...p.getStyles("section",{className:o,style:i,styles:s,classNames:r}),...f})});dE.classes=eD;dE.displayName="@mantine/core/CardSection";const nPe={},rPe=(t,{padding:e})=>({root:{"--card-padding":h0(e)}}),v0=ts((t,e)=>{const n=bt("Card",nPe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,children:c,padding:d,...f}=n,p=On({name:"Card",props:n,classes:eD,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:rPe}),g=E.Children.toArray(c),y=g.map((b,_)=>typeof b=="object"&&b&&"type"in b&&b.type===dE?E.cloneElement(b,{"data-first-section":_===0||void 0,"data-last-section":_===g.length-1||void 0}):b);return w.jsx(JOe,{value:{getStyles:p},children:w.jsx($P,{ref:e,unstyled:a,...p("root"),...f,children:y})})});v0.classes=eD;v0.displayName="@mantine/core/Card";v0.Section=dE;const[oPe,iPe]=NP(),sPe={};function FY(t){const{value:e,defaultValue:n,onChange:r,multiple:o,children:i}=bt("ChipGroup",sPe,t),[s,a]=qg({value:e,defaultValue:n,finalValue:o?[]:null,onChange:r}),l=d=>Array.isArray(s)?s.includes(d):d===s,c=d=>{const f=d.currentTarget.value;Array.isArray(s)?a(s.includes(f)?s.filter(p=>p!==f):[...s,f]):a(f)};return w.jsx(oPe,{value:{isChipSelected:l,onChange:c,multiple:o},children:i})}FY.displayName="@mantine/core/ChipGroup";var HY={root:"m_f59ffda3",label:"m_be049a53","label--outline":"m_3904c1af","label--filled":"m_fa109255","label--light":"m_f7e165c3",iconWrapper:"m_9ac86df9",checkIcon:"m_d6d72580",input:"m_bde07329"};const aPe={type:"checkbox"},lPe=(t,{size:e,radius:n,variant:r,color:o,autoContrast:i})=>{const s=t.variantColorResolver({color:o||t.primaryColor,theme:t,variant:r||"filled",autoContrast:i});return{root:{"--chip-fz":ks(e),"--chip-size":_r(e,"chip-size"),"--chip-radius":n===void 0?void 0:Fi(n),"--chip-checked-padding":_r(e,"chip-checked-padding"),"--chip-padding":_r(e,"chip-padding"),"--chip-icon-size":_r(e,"chip-icon-size"),"--chip-bg":o||r?s.background:void 0,"--chip-hover":o||r?s.hover:void 0,"--chip-color":o||r?s.color:void 0,"--chip-bd":o||r?s.border:void 0,"--chip-spacing":_r(e,"chip-spacing")}}},fE=Fn((t,e)=>{const n=bt("Chip",aPe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,id:c,checked:d,defaultChecked:f,onChange:p,value:g,wrapperProps:y,type:b,disabled:_,children:k,size:M,variant:N,icon:j,rootRef:B,autoContrast:F,mod:D,...R}=n,I=On({name:"Chip",classes:HY,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:lPe}),L=iPe(),z=p0(c),{styleProps:q,rest:H}=nE(R),[ne,re]=qg({value:d,defaultValue:f,finalValue:!1,onChange:p}),V=L?{checked:L.isChipSelected(g),onChange:Q=>{L.onChange(Q),p?.(Q.currentTarget.checked)},type:L.multiple?"checkbox":"radio"}:{},U=V.checked||ne;return w.jsxs($t,{size:M,variant:N,ref:B,mod:D,...I("root"),...q,...y,children:[w.jsx("input",{type:b,...I("input"),checked:U,onChange:Q=>re(Q.currentTarget.checked),id:z,disabled:_,ref:e,value:g,...V,...H}),w.jsxs("label",{htmlFor:z,"data-checked":U||void 0,"data-disabled":_||void 0,...I("label",{variant:N||"filled"}),children:[U&&w.jsx("span",{...I("iconWrapper"),children:j||w.jsx(YP,{...I("checkIcon")})}),w.jsx("span",{children:k})]})]})});fE.classes=HY;fE.displayName="@mantine/core/Chip";fE.Group=FY;var UY={root:"m_3eebeb36",label:"m_9e365f20"};const cPe={orientation:"horizontal"},uPe=(t,{color:e,variant:n,size:r})=>({root:{"--divider-color":e?_c(e,t):void 0,"--divider-border-style":n,"--divider-size":_r(r,"divider-size")}}),tD=Fn((t,e)=>{const n=bt("Divider",cPe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,color:c,orientation:d,label:f,labelPosition:p,mod:g,...y}=n,b=On({name:"Divider",classes:UY,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:uPe});return w.jsx($t,{ref:e,mod:[{orientation:d,"with-label":!!f},g],...b("root"),...y,role:"separator",children:f&&w.jsx($t,{component:"span",mod:{position:p},...b("label"),children:f})})});tD.classes=UY;tD.displayName="@mantine/core/Divider";const dPe={multiple:!1},zY=E.forwardRef((t,e)=>{const{onChange:n,children:r,multiple:o,accept:i,name:s,form:a,resetRef:l,disabled:c,capture:d,inputProps:f,...p}=bt("FileButton",dPe,t),g=E.useRef(null),y=()=>{!c&&g.current?.click()},b=k=>{n(o?Array.from(k.currentTarget.files):k.currentTarget.files[0]||null)};return KS(l,()=>{g.current&&(g.current.value="")}),w.jsxs(w.Fragment,{children:[w.jsx("input",{style:{display:"none"},type:"file",accept:i,multiple:o,onChange:b,ref:Fu(e,g),name:s,form:a,capture:d,...f}),r({onClick:y,...p})]})});zY.displayName="@mantine/core/FileButton";const fPe=({value:t})=>w.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(t)?t.map(e=>e.name).join(", "):t?.name}),hPe={valueComponent:fPe},nD=Fn((t,e)=>{const n=bt("FileInput",hPe,t),{unstyled:r,vars:o,onChange:i,value:s,defaultValue:a,multiple:l,accept:c,name:d,form:f,valueComponent:p,clearable:g,clearButtonProps:y,readOnly:b,capture:_,fileInputProps:k,rightSection:M,size:N,placeholder:j,component:B,resetRef:F,classNames:D,styles:R,...I}=n,L=E.useRef(null),{resolvedClassNames:z,resolvedStyles:q}=tE({classNames:D,styles:R,props:n}),[H,ne]=qg({value:s,defaultValue:a,onChange:i,finalValue:l?[]:null}),re=Array.isArray(H)?H.length!==0:H!==null,V=M||(g&&re&&!b?w.jsx(oE,{...y,variant:"subtle",onClick:()=>ne(l?[]:null),size:N,unstyled:r}):null);E.useEffect(()=>{(Array.isArray(H)&&H.length===0||H===null)&&L.current?.()},[H]);const U=p;return w.jsx(zY,{onChange:ne,multiple:l,accept:c,name:d,form:f,resetRef:Fu(L,F),disabled:b,capture:_,inputProps:k,children:Q=>w.jsx(Yg,{component:B||"button",ref:e,rightSection:V,...Q,...I,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:r,size:N,classNames:D,styles:R,children:re?w.jsx(U,{value:H}):w.jsx(na.Placeholder,{__staticSelector:"FileInput",classNames:z,styles:q,children:j})})})});nD.classes=Yg.classes;nD.displayName="@mantine/core/FileInput";const pPe=nD;function mPe({open:t,close:e,openDelay:n,closeDelay:r}){const o=E.useRef(-1),i=E.useRef(-1),s=()=>{window.clearTimeout(o.current),window.clearTimeout(i.current)},a=()=>{s(),n===0||n===void 0?t():o.current=window.setTimeout(t,n)},l=()=>{s(),r===0||r===void 0?e():i.current=window.setTimeout(e,r)};return E.useEffect(()=>s,[]),{openDropdown:a,closeDropdown:l}}var GY={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const W$={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:f0("overlay")},gPe=(t,{zIndex:e})=>({root:{"--lo-z-index":e?.toString()}}),rD=Fn((t,e)=>{const n=bt("LoadingOverlay",W$,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,transitionProps:c,loaderProps:d,overlayProps:f,visible:p,zIndex:g,...y}=n,b=ia(),_=On({name:"LoadingOverlay",classes:GY,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:gPe}),k={...W$.overlayProps,...f};return w.jsx(bp,{transition:"fade",...c,mounted:!!p,children:M=>w.jsxs($t,{..._("root",{style:M}),ref:e,...y,children:[w.jsx(Vf,{..._("loader"),unstyled:a,...d}),w.jsx(xb,{...k,..._("overlay"),darkHidden:!0,unstyled:a,color:f?.color||b.white}),w.jsx(xb,{...k,..._("overlay"),lightHidden:!0,unstyled:a,color:f?.color||b.colors.dark[5]})]})})});rD.classes=GY;rD.displayName="@mantine/core/LoadingOverlay";const[yPe,b0]=Zx("Menu component was not found in the tree");var Qg={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const vPe={},oD=Fn((t,e)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,...a}=bt("MenuDivider",vPe,t),l=b0();return w.jsx($t,{ref:e,...l.getStyles("divider",{className:r,style:o,styles:i,classNames:n}),...a})});oD.classes=Qg;oD.displayName="@mantine/core/MenuDivider";const bPe={},iD=Fn((t,e)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,onMouseEnter:a,onMouseLeave:l,onKeyDown:c,children:d,...f}=bt("MenuDropdown",bPe,t),p=E.useRef(null),g=b0(),y=oc(c,k=>{(k.key==="ArrowUp"||k.key==="ArrowDown")&&(k.preventDefault(),p.current?.querySelectorAll("[data-menu-item]:not(:disabled)")[0]?.focus())}),b=oc(a,()=>(g.trigger==="hover"||g.trigger==="click-hover")&&g.openDropdown()),_=oc(l,()=>(g.trigger==="hover"||g.trigger==="click-hover")&&g.closeDropdown());return w.jsxs(Lf.Dropdown,{...f,onMouseEnter:b,onMouseLeave:_,role:"menu","aria-orientation":"vertical",ref:Fu(e,p),...g.getStyles("dropdown",{className:r,style:o,styles:i,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:y,children:[g.withInitialFocusPlaceholder&&w.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),d]})});iD.classes=Qg;iD.displayName="@mantine/core/MenuDropdown";const wPe={},sD=ts((t,e)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,color:a,closeMenuOnClick:l,leftSection:c,rightSection:d,children:f,disabled:p,"data-disabled":g,...y}=bt("MenuItem",wPe,t),b=b0(),_=ia(),{dir:k}=g0(),M=E.useRef(null),N=b.getItemIndex(M.current),j=y,B=oc(j.onMouseLeave,()=>b.setHovered(-1)),F=oc(j.onMouseEnter,()=>b.setHovered(b.getItemIndex(M.current))),D=oc(j.onClick,()=>{g||(typeof l=="boolean"?l&&b.closeDropdownImmediately():b.closeOnItemClick&&b.closeDropdownImmediately())}),R=oc(j.onFocus,()=>b.setHovered(b.getItemIndex(M.current))),I=a?_.variantColorResolver({color:a,theme:_,variant:"light"}):void 0,L=a?Kg({color:a,theme:_}):null;return w.jsxs(vp,{...y,unstyled:b.unstyled,tabIndex:b.menuItemTabIndex,onFocus:R,...b.getStyles("item",{className:r,style:o,styles:i,classNames:n}),ref:Fu(M,e),role:"menuitem",disabled:p,"data-menu-item":!0,"data-disabled":p||g||void 0,"data-hovered":b.hovered===N?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:F,onMouseLeave:B,onClick:D,onKeyDown:QW({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:b.loop,dir:k,orientation:"vertical",onKeyDown:j.onKeyDown}),__vars:{"--menu-item-color":L?.isThemeColor&&L?.shade===void 0?`var(--mantine-color-${L.color}-6)`:I?.color,"--menu-item-hover":I?.hover},children:[c&&w.jsx("div",{...b.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"left",children:c}),f&&w.jsx("div",{...b.getStyles("itemLabel",{styles:i,classNames:n}),children:f}),d&&w.jsx("div",{...b.getStyles("itemSection",{styles:i,classNames:n}),"data-position":"right",children:d})]})});sD.classes=Qg;sD.displayName="@mantine/core/MenuItem";const CPe={},aD=Fn((t,e)=>{const{classNames:n,className:r,style:o,styles:i,vars:s,...a}=bt("MenuLabel",CPe,t),l=b0();return w.jsx($t,{ref:e,...l.getStyles("label",{className:r,style:o,styles:i,classNames:n}),...a})});aD.classes=Qg;aD.displayName="@mantine/core/MenuLabel";const SPe={refProp:"ref"},qY=E.forwardRef((t,e)=>{const{children:n,refProp:r,...o}=bt("MenuTarget",SPe,t);if(!d0(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const i=b0(),s=n.props,a=oc(s.onClick,()=>{i.trigger==="click"?i.toggleDropdown():i.trigger==="click-hover"&&(i.setOpenedViaClick(!0),i.opened||i.openDropdown())}),l=oc(s.onMouseEnter,()=>(i.trigger==="hover"||i.trigger==="click-hover")&&i.openDropdown()),c=oc(s.onMouseLeave,()=>{(i.trigger==="hover"||i.trigger==="click-hover"&&!i.openedViaClick)&&i.closeDropdown()});return w.jsx(Lf.Target,{refProp:r,popupType:"menu",ref:e,...o,children:E.cloneElement(n,{onClick:a,onMouseEnter:l,onMouseLeave:c,"data-expanded":i.opened?!0:void 0})})});qY.displayName="@mantine/core/MenuTarget";const _Pe={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Yr(t){const e=bt("Menu",_Pe,t),{children:n,onOpen:r,onClose:o,opened:i,defaultOpened:s,trapFocus:a,onChange:l,closeOnItemClick:c,loop:d,closeOnEscape:f,trigger:p,openDelay:g,closeDelay:y,classNames:b,styles:_,unstyled:k,variant:M,vars:N,menuItemTabIndex:j,keepMounted:B,withInitialFocusPlaceholder:F,...D}=e,R=On({name:"Menu",classes:Qg,props:e,classNames:b,styles:_,unstyled:k}),[I,{setHovered:L,resetHovered:z}]=uMe(),[q,H]=qg({value:i,defaultValue:s,finalValue:!1,onChange:l}),[ne,re]=E.useState(!1),V=()=>{H(!1),re(!1),q&&o?.()},U=()=>{H(!0),!q&&r?.()},Q=()=>{q?V():U()},{openDropdown:J,closeDropdown:Y}=mPe({open:U,close:V,closeDelay:y,openDelay:g}),se=ce=>cMe("[data-menu-item]","[data-menu-dropdown]",ce),{resolvedClassNames:te,resolvedStyles:ie}=tE({classNames:b,styles:_,props:e});return Ef(()=>{z()},[q]),w.jsx(yPe,{value:{getStyles:R,opened:q,toggleDropdown:Q,getItemIndex:se,hovered:I,setHovered:L,openedViaClick:ne,setOpenedViaClick:re,closeOnItemClick:c,closeDropdown:p==="click"?V:Y,openDropdown:p==="click"?U:J,closeDropdownImmediately:V,loop:d,trigger:p,unstyled:k,menuItemTabIndex:j,withInitialFocusPlaceholder:F},children:w.jsx(Lf,{...D,opened:q,onChange:Q,defaultOpened:s,trapFocus:B?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:te,styles:ie,unstyled:k,variant:M,keepMounted:B,children:n})})}Yr.extend=t=>t;Yr.withProps=LNe(Yr);Yr.classes=Qg;Yr.displayName="@mantine/core/Menu";Yr.Item=sD;Yr.Label=aD;Yr.Dropdown=iD;Yr.Target=qY;Yr.Divider=oD;const xPe={duration:100,transition:"fade"};function EPe(t,e){return{...xPe,...e,...t}}function kPe({offset:t,position:e,defaultOpened:n}){const[r,o]=E.useState(n),i=E.useRef(null),{x:s,y:a,elements:l,refs:c,update:d,placement:f}=Gg({placement:e,middleware:[Tf({crossAxis:!0,padding:5,rootBoundary:"document"})]}),p=f.includes("right")?t:e.includes("left")?t*-1:0,g=f.includes("bottom")?t:e.includes("top")?t*-1:0,y=E.useCallback(({clientX:b,clientY:_})=>{c.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:b,y:_,left:b+p,top:_+g,right:b,bottom:_}}})},[l.reference]);return E.useEffect(()=>{if(c.floating.current){const b=i.current;b.addEventListener("mousemove",y);const _=wu(c.floating.current);return _.forEach(k=>{k.addEventListener("scroll",d)}),()=>{b.removeEventListener("mousemove",y),_.forEach(k=>{k.removeEventListener("scroll",d)})}}},[l.reference,c.floating.current,d,y,r]),{handleMouseMove:y,x:s,y:a,opened:r,setOpened:o,boundaryRef:i,floating:c.setFloating}}var hE={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const TPe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:f0("popover")},APe=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Fi(e),"--tooltip-bg":n?_c(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),lD=Fn((t,e)=>{const n=bt("TooltipFloating",TPe,t),{children:r,refProp:o,withinPortal:i,style:s,className:a,classNames:l,styles:c,unstyled:d,radius:f,color:p,label:g,offset:y,position:b,multiline:_,zIndex:k,disabled:M,defaultOpened:N,variant:j,vars:B,portalProps:F,...D}=n,R=ia(),I=On({name:"TooltipFloating",props:n,classes:hE,className:a,style:s,classNames:l,styles:c,unstyled:d,rootSelector:"tooltip",vars:B,varsResolver:APe}),{handleMouseMove:L,x:z,y:q,opened:H,boundaryRef:ne,floating:re,setOpened:V}=kPe({offset:y,position:b,defaultOpened:N});if(!d0(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const U=Fu(ne,OP(r),e),Q=r.props,J=se=>{Q.onMouseEnter?.(se),L(se),V(!0)},Y=se=>{Q.onMouseLeave?.(se),V(!1)};return w.jsxs(w.Fragment,{children:[w.jsx(y0,{...F,withinPortal:i,children:w.jsx($t,{...D,...I("tooltip",{style:{...pY(s,R),zIndex:k,display:!M&&H?"block":"none",top:(q&&Math.round(q))??"",left:(z&&Math.round(z))??""}}),variant:j,ref:re,mod:{multiline:_},children:g})}),E.cloneElement(r,{...Q,[o]:U,onMouseEnter:J,onMouseLeave:Y})]})});lD.classes=hE;lD.displayName="@mantine/core/TooltipFloating";const KY=E.createContext(!1),RPe=KY.Provider,IPe=()=>E.useContext(KY),MPe={openDelay:0,closeDelay:0};function cD(t){const{openDelay:e,closeDelay:n,children:r}=bt("TooltipGroup",MPe,t);return w.jsx(RPe,{value:!0,children:w.jsx(jAe,{delay:{open:e,close:n},children:r})})}cD.displayName="@mantine/core/TooltipGroup";cD.extend=t=>t;function NPe(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function OPe(t){const e=NPe(t.middlewares),n=[Ml(t.offset)];return e.shift&&n.push(Tf(typeof e.shift=="boolean"?{padding:8}:{padding:8,...e.shift})),e.flip&&n.push(typeof e.flip=="boolean"?Ha():Ha(e.flip)),n.push(BM({element:t.arrowRef,padding:t.arrowOffset})),e.inline?n.push(typeof e.inline=="boolean"?pv():pv(e.inline)):t.inline&&n.push(pv()),n}function PPe(t){const[e,n]=E.useState(t.defaultOpened),o=typeof t.opened=="boolean"?t.opened:e,i=IPe(),s=p0(),a=E.useCallback(F=>{n(F),F&&M(s)},[s]),{x:l,y:c,context:d,refs:f,update:p,placement:g,middlewareData:{arrow:{x:y,y:b}={}}}=Gg({strategy:t.strategy,placement:t.position,open:o,onOpenChange:a,middleware:OPe(t)}),{delay:_,currentId:k,setCurrentId:M}=BAe(d,{id:s}),{getReferenceProps:N,getFloatingProps:j}=sW([LAe(d,{enabled:t.events?.hover,delay:i?_:{open:t.openDelay,close:t.closeDelay},mouseOnly:!t.events?.touch}),QAe(d,{enabled:t.events?.focus,visibleOnly:!0}),JAe(d,{role:"tooltip"}),iW(d,{enabled:typeof t.opened>"u"})]);AY({opened:o,position:t.position,positionDependencies:t.positionDependencies,floating:{refs:f,update:p}}),Ef(()=>{t.onPositionChange?.(g)},[g]);const B=o&&k&&k!==s;return{x:l,y:c,arrowX:y,arrowY:b,reference:f.setReference,floating:f.setFloating,getFloatingProps:j,getReferenceProps:N,isGroupPhase:B,opened:o,placement:g}}const Y$={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:f0("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},DPe=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:Fi(e),"--tooltip-bg":n?_c(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Zg=Fn((t,e)=>{const n=bt("Tooltip",Y$,t),{children:r,position:o,refProp:i,label:s,openDelay:a,closeDelay:l,onPositionChange:c,opened:d,defaultOpened:f,withinPortal:p,radius:g,color:y,classNames:b,styles:_,unstyled:k,style:M,className:N,withArrow:j,arrowSize:B,arrowOffset:F,arrowRadius:D,arrowPosition:R,offset:I,transitionProps:L,multiline:z,events:q,zIndex:H,disabled:ne,positionDependencies:re,onClick:V,onMouseEnter:U,onMouseLeave:Q,inline:J,variant:Y,keepMounted:se,vars:te,portalProps:ie,mod:ce,floatingStrategy:ae,middlewares:ye,...we}=bt("Tooltip",Y$,n),{dir:Be}=g0(),Ie=E.useRef(null),Ge=PPe({position:SY(Be,o),closeDelay:l,openDelay:a,onPositionChange:c,opened:d,defaultOpened:f,events:q,arrowRef:Ie,arrowOffset:F,offset:typeof I=="number"?I+(j?B/2:0):I,positionDependencies:[...re,r],inline:J,strategy:ae,middlewares:ye}),it=On({name:"Tooltip",props:n,classes:hE,className:N,style:M,classNames:b,styles:_,unstyled:k,rootSelector:"tooltip",vars:te,varsResolver:DPe});if(!d0(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Xe=Fu(Ge.reference,OP(r),e),zt=EPe(L,{duration:100,transition:"fade"}),un=r.props;return w.jsxs(w.Fragment,{children:[w.jsx(y0,{...ie,withinPortal:p,children:w.jsx(bp,{...zt,keepMounted:se,mounted:!ne&&!!Ge.opened,duration:Ge.isGroupPhase?10:zt.duration,children:Pt=>w.jsxs($t,{...we,"data-fixed":ae==="fixed"||void 0,variant:Y,mod:[{multiline:z},ce],...Ge.getFloatingProps({ref:Ge.floating,className:it("tooltip").className,style:{...it("tooltip").style,...Pt,zIndex:H,top:Ge.y??0,left:Ge.x??0}}),children:[s,w.jsx(FP,{ref:Ie,arrowX:Ge.arrowX,arrowY:Ge.arrowY,visible:j,position:Ge.placement,arrowSize:B,arrowOffset:F,arrowRadius:D,arrowPosition:R,...it("arrow")})]})})}),E.cloneElement(r,Ge.getReferenceProps({onClick:V,onMouseEnter:U,onMouseLeave:Q,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:Rl(N,un.className),...un,[i]:Xe}))]})});Zg.classes=hE;Zg.displayName="@mantine/core/Tooltip";Zg.Floating=lD;Zg.Group=cD;var WY={root:"m_18320242","skeleton-fade":"m_299c329c"};const LPe={visible:!0,animate:!0},VPe=(t,{width:e,height:n,radius:r,circle:o})=>({root:{"--skeleton-height":ze(n),"--skeleton-width":ze(o?n:e),"--skeleton-radius":o?"1000px":r===void 0?void 0:Fi(r)}}),YS=Fn((t,e)=>{const n=bt("Skeleton",LPe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,width:c,height:d,circle:f,visible:p,radius:g,animate:y,mod:b,..._}=n,k=On({name:"Skeleton",classes:WY,props:n,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:VPe});return w.jsx($t,{ref:e,...k("root"),mod:[{visible:p,animate:y},b],..._})});YS.classes=WY;YS.displayName="@mantine/core/Skeleton";var YY={root:"m_6d731127"};const jPe={gap:"md",align:"stretch",justify:"flex-start"},BPe=(t,{gap:e,align:n,justify:r})=>({root:{"--stack-gap":h0(e),"--stack-align":n,"--stack-justify":r}}),w0=Fn((t,e)=>{const n=bt("Stack",jPe,t),{classNames:r,className:o,style:i,styles:s,unstyled:a,vars:l,align:c,justify:d,gap:f,variant:p,...g}=n,y=On({name:"Stack",props:n,classes:YY,className:o,style:i,classNames:r,styles:s,unstyled:a,vars:l,varsResolver:BPe});return w.jsx($t,{ref:e,...y("root"),variant:p,...g})});w0.classes=YY;w0.displayName="@mantine/core/Stack";const[$Pe,uD]=Zx("Tabs component was not found in the tree");var C0={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const FPe={},dD=Fn((t,e)=>{const n=bt("TabsList",FPe,t),{children:r,className:o,grow:i,justify:s,classNames:a,styles:l,style:c,mod:d,...f}=n,p=uD();return w.jsx($t,{...f,...p.getStyles("list",{className:o,style:c,classNames:a,styles:l,props:n,variant:p.variant}),ref:e,role:"tablist",variant:p.variant,mod:[{grow:i,orientation:p.orientation,placement:p.orientation==="vertical"&&p.placement,inverted:p.inverted},d],"aria-orientation":p.orientation,__vars:{"--tabs-justify":s},children:r})});dD.classes=C0;dD.displayName="@mantine/core/TabsList";const HPe={},fD=Fn((t,e)=>{const n=bt("TabsPanel",HPe,t),{children:r,className:o,value:i,classNames:s,styles:a,style:l,mod:c,keepMounted:d,...f}=n,p=uD(),g=p.value===i,y=p.keepMounted||d||g?r:null;return w.jsx($t,{...f,...p.getStyles("panel",{className:o,classNames:s,styles:a,style:[l,g?void 0:{display:"none"}],props:n}),ref:e,mod:[{orientation:p.orientation},c],role:"tabpanel",id:p.getPanelId(i),"aria-labelledby":p.getTabId(i),children:y})});fD.classes=C0;fD.displayName="@mantine/core/TabsPanel";const UPe={},hD=Fn((t,e)=>{const n=bt("TabsTab",UPe,t),{className:r,children:o,rightSection:i,leftSection:s,value:a,onClick:l,onKeyDown:c,disabled:d,color:f,style:p,classNames:g,styles:y,vars:b,mod:_,tabIndex:k,...M}=n,N=ia(),{dir:j}=g0(),B=uD(),F=a===B.value,D=I=>{B.onChange(B.allowTabDeactivation&&a===B.value?null:a),l?.(I)},R={classNames:g,styles:y,props:n};return w.jsxs(vp,{...M,...B.getStyles("tab",{className:r,style:p,variant:B.variant,...R}),disabled:d,unstyled:B.unstyled,variant:B.variant,mod:[{active:F,disabled:d,orientation:B.orientation,inverted:B.inverted,placement:B.orientation==="vertical"&&B.placement},_],ref:e,role:"tab",id:B.getTabId(a),"aria-selected":F,tabIndex:k!==void 0?k:F||B.value===null?0:-1,"aria-controls":B.getPanelId(a),onClick:D,__vars:{"--tabs-color":f?_c(f,N):void 0},onKeyDown:QW({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:B.activateTabWithKeyboard,loop:B.loop,orientation:B.orientation||"horizontal",dir:j,onKeyDown:c}),children:[s&&w.jsx("span",{...B.getStyles("tabSection",R),"data-position":"left",children:s}),o&&w.jsx("span",{...B.getStyles("tabLabel",R),children:o}),i&&w.jsx("span",{...B.getStyles("tabSection",R),"data-position":"right",children:i})]})});hD.classes=C0;hD.displayName="@mantine/core/TabsTab";const X$="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",zPe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},GPe=(t,{radius:e,color:n,autoContrast:r})=>({root:{"--tabs-radius":Fi(e),"--tabs-color":_c(n,t),"--tabs-text-color":gNe(r,t)?aY({color:n,theme:t,autoContrast:r}):void 0}}),vu=Fn((t,e)=>{const n=bt("Tabs",zPe,t),{defaultValue:r,value:o,onChange:i,orientation:s,children:a,loop:l,id:c,activateTabWithKeyboard:d,allowTabDeactivation:f,variant:p,color:g,radius:y,inverted:b,placement:_,keepMounted:k,classNames:M,styles:N,unstyled:j,className:B,style:F,vars:D,autoContrast:R,mod:I,...L}=n,z=p0(c),[q,H]=qg({value:o,defaultValue:r,finalValue:null,onChange:i}),ne=On({name:"Tabs",props:n,classes:C0,className:B,style:F,classNames:M,styles:N,unstyled:j,vars:D,varsResolver:GPe});return w.jsx($Pe,{value:{placement:_,value:q,orientation:s,id:z,loop:l,activateTabWithKeyboard:d,getTabId:A$(`${z}-tab`,X$),getPanelId:A$(`${z}-panel`,X$),onChange:H,allowTabDeactivation:f,variant:p,color:g,radius:y,inverted:b,keepMounted:k,unstyled:j,getStyles:ne},children:w.jsx($t,{ref:e,id:z,variant:p,mod:[{orientation:s,inverted:s==="horizontal"&&b,placement:s==="vertical"&&_},I],...ne("root"),...L,children:a})})});vu.classes=C0;vu.displayName="@mantine/core/Tabs";vu.Tab=hD;vu.Panel=fD;vu.List=dD;const qPe={},pE=Fn((t,e)=>{const n=bt("TextInput",qPe,t);return w.jsx(Yg,{component:"input",ref:e,...n,__staticSelector:"TextInput"})});pE.classes=Yg.classes;pE.displayName="@mantine/core/TextInput";const XY=(t,e,n=!1)=>{const r=[];function o(i,s="--bn"){for(const a in i){const l=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c=`${s}-${l}`;typeof i[a]!="object"?(typeof i[a]=="number"&&(i[a]=`${i[a]}px`),n?e.style.removeProperty(c):e.style.setProperty(c,i[a].toString())):o(i[a],c)}}return o(t),r},Q$=(t,e)=>XY(t,e),KPe={colors:{editor:{text:void 0,background:void 0},menu:{text:void 0,background:void 0},tooltip:{text:void 0,background:void 0},hovered:{text:void 0,background:void 0},selected:{text:void 0,background:void 0},disabled:{text:void 0,background:void 0},shadow:void 0,border:void 0,sideMenu:void 0,highlights:{gray:{text:void 0,background:void 0},brown:{text:void 0,background:void 0},red:{text:void 0,background:void 0},orange:{text:void 0,background:void 0},yellow:{text:void 0,background:void 0},green:{text:void 0,background:void 0},blue:{text:void 0,background:void 0},purple:{text:void 0,background:void 0},pink:{text:void 0,background:void 0}}},borderRadius:void 0,fontFamily:void 0},WPe=t=>XY(KPe,t,!0),QY=t=>w.jsxs(w0,{gap:0,className:"bn-tooltip",children:[w.jsx(xc,{size:"sm",lineClamp:5,children:t.mainTooltip}),t.secondaryTooltip&&w.jsx(xc,{size:"xs",lineClamp:5,children:t.secondaryTooltip})]}),a2=E.forwardRef((t,e)=>{const{className:n,children:r,mainTooltip:o,secondaryTooltip:i,icon:s,isSelected:a,isDisabled:l,onClick:c,label:d,variant:f,...p}=t;on(p,!1);const[g,y]=E.useState(!1),b=r?w.jsx(Ol,{"aria-label":d,className:n,onMouseDown:_=>{vI()&&_.currentTarget.focus()},onClick:_=>{y(!0),c?.(_)},onPointerLeave:()=>y(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:f==="compact"?"compact-xs":"xs",disabled:l||!1,ref:e,...p,children:r}):w.jsx(wp,{className:n,"aria-label":d,onMouseDown:_=>{vI()&&_.currentTarget.focus()},onClick:_=>{y(!0),c?.(_)},onPointerLeave:()=>y(!1),"aria-pressed":a,"data-selected":a||void 0,"data-test":o?o.slice(0,1).toLowerCase()+o.replace(/\s+/g,"").slice(1):void 0,size:f==="compact"?20:30,disabled:l||!1,ref:e,...p,children:s});return o?w.jsx(Zg,{disabled:g,withinPortal:!1,label:w.jsx(QY,{mainTooltip:o,secondaryTooltip:i}),children:b}):b}),YPe=E.forwardRef((t,e)=>{const{className:n,text:r,icon:o,isSelected:i,mainTooltip:s,secondaryTooltip:a,onClick:l,onMouseEnter:c,...d}=t;on(d,!1);const[f,p]=E.useState(!1),g=w.jsxs(fE,{className:n,checked:i===!0,wrapperProps:{onMouseEnter:c,onMouseLeave:()=>p(!1),onClick:y=>{p(!0),l?.(y)}},variant:"light",icon:null,ref:e,children:[w.jsx("span",{children:o}),w.jsx("span",{children:r})]});return!s||f?g:w.jsx(Zg,{refProp:"rootRef",withinPortal:!1,label:w.jsx(QY,{mainTooltip:s,secondaryTooltip:a}),children:g})}),XPe=E.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return on(o),w.jsx(pi,{className:n,ref:e,children:r})}),QPe=E.forwardRef((t,e)=>{const{className:n,children:r,headerText:o,selected:i,onFocus:s,onBlur:a,tabIndex:l,...c}=t;on(c,!1);const d=E.useRef(null);return E.useEffect(()=>{var f;i&&((f=d.current)==null||f.scrollIntoView({behavior:"smooth",block:"center"}))},[i]),w.jsxs(v0,{className:Er(n,i?"selected":""),onFocus:s,onBlur:a,tabIndex:l,ref:EP([e,d]),children:[o&&w.jsx(xc,{className:"bn-header-text",children:o}),r]})}),ZPe=E.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return on(o,!1),w.jsx(v0.Section,{className:n,ref:e,children:r})}),JPe=E.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return on(o,!1),w.jsx(tD,{className:n,label:w.jsx(xc,{children:r}),ref:e})}),eDe=E.forwardRef((t,e)=>{const{authorInfo:n,timeString:r,edited:o,...i}=t,s=Zt();return on(i,!1),n==="loading"?w.jsxs(pi,{children:[w.jsx(YS,{height:24,width:24}),w.jsx("div",{children:w.jsx(YS,{height:12,width:100})})]}):w.jsxs(pi,{children:[w.jsx(uE,{src:n.avatarUrl,alt:n.username,radius:"xl",size:"sm",color:"initials"}),w.jsxs(xc,{fz:"sm",fw:"bold",children:[n.username,w.jsxs(xc,{fz:"xs",c:"dimmed",span:!0,ml:"xs",children:[r," ",o&&`(${s.comments.edited})`]})]})]})}),tDe=E.forwardRef((t,e)=>{const{className:n,showActions:r,authorInfo:o,timeString:i,edited:s,actions:a,children:l,...c}=t,{hovered:d,ref:f}=EMe(),{focused:p,ref:g}=rY(),y=EP([e,f]);return on(c,!1),w.jsxs(pi,{pos:"relative",ref:y,className:n,children:[a&&(r===!0||r===void 0||r==="hover"&&d||p)?w.jsx(pi,{ref:g,style:{position:"absolute",right:0,top:0,zIndex:10},children:a}):null,w.jsx(eDe,{...t}),l]})}),nDe=E.forwardRef((t,e)=>{const{className:n,autoFocus:r,onFocus:o,onBlur:i,editor:s,editable:a,...l}=t;return on(l,!1),w.jsx(nX,{autoFocus:r,className:n,editor:t.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:a,ref:e,onFocus:o,onBlur:i,children:w.jsx(TP,{formattingToolbar:rDe})})}),rDe=()=>{const t=jW([]).filter(e=>e.key!=="nestBlockButton"&&e.key!=="unnestBlockButton");return w.jsx(kP,{blockTypeSelectItems:[],children:t})},oDe=E.forwardRef((t,e)=>{const{className:n,name:r,label:o,variant:i,icon:s,value:a,autoFocus:l,placeholder:c,disabled:d,onKeyDown:f,onChange:p,onSubmit:g,autoComplete:y,rightSection:b,..._}=t;return on(_),w.jsx(pE,{size:"xs",className:Er(n||"",i==="large"?"bn-mt-input-large":""),ref:e,name:r,label:o,leftSection:s,value:a,autoFocus:l,"data-autofocus":l?"true":void 0,rightSection:b,placeholder:c,disabled:d,onKeyDown:f,onChange:p,onSubmit:g,autoComplete:y})});var ZY={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Z$=De.createContext&&De.createContext(ZY),iDe=["attr","size","title"];function sDe(t,e){if(t==null)return{};var n=aDe(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aDe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function XS(){return XS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},XS.apply(this,arguments)}function J$(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function QS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?J$(Object(n),!0).forEach(function(r){lDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lDe(t,e,n){return e=cDe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cDe(t){var e=uDe(t,"string");return typeof e=="symbol"?e:e+""}function uDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JY(t){return t&&t.map((e,n)=>De.createElement(e.tag,QS({key:n},e.attr),JY(e.child)))}function eX(t){return e=>De.createElement(dDe,XS({attr:QS({},t.attr)},e),JY(t.child))}function dDe(t){var e=n=>{var{attr:r,size:o,title:i}=t,s=sDe(t,iDe),a=o||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),De.createElement("svg",XS({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:QS(QS({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&De.createElement("title",null,i),t.children)};return Z$!==void 0?De.createElement(Z$.Consumer,null,n=>e(n)):e(ZY)}function fDe(t){return eX({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(t)}function hDe(t){return eX({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(t)}const tX=E.createContext(void 0),pDe=E.forwardRef((t,e)=>{const{children:n,onOpenChange:r,position:o,sub:i,...s}=t;on(s);const[a,l]=E.useState(!1),c=E.useRef(null),d=E.useRef(void 0),f=E.useCallback(()=>{d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{l(!1)},250)},[]),p=E.useCallback(()=>{d.current&&clearTimeout(d.current),l(!0)},[]);return w.jsx(tX.Provider,{value:{onMenuMouseOver:p,onMenuMouseLeave:f},children:w.jsx(Yr.Item,{className:"bn-menu-item bn-mt-sub-menu-item",ref:m0(e,c),onMouseOver:p,onMouseLeave:f,children:w.jsx(Yr,{portalProps:{target:c.current?c.current.parentElement:void 0},middlewares:{flip:!0,shift:!0,inline:!1,size:!0},trigger:"hover",opened:a,onChange:r,position:o,children:n})})})}),mDe=t=>{const{children:e,onOpenChange:n,position:r,sub:o,...i}=t;return on(i),o?w.jsx(pDe,{...t}):w.jsx(Yr,{withinPortal:!1,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},onChange:n,position:r,children:e})},gDe=E.forwardRef((t,e)=>{const{className:n,children:r,icon:o,checked:i,subTrigger:s,onClick:a,...l}=t;return on(l,!1),s?w.jsxs("div",{onClick:c=>{c.preventDefault(),c.stopPropagation()},ref:e,...l,children:[r,w.jsx(hDe,{size:15})]}):w.jsx(Yr.Item,{className:n,ref:e,leftSection:o,rightSection:i?w.jsx(YP,{size:10}):i===!1?w.jsx("div",{className:"bn-tick-space"}):null,onClick:a,...l,children:r})}),yDe=t=>{const{children:e,sub:n,...r}=t;return on(r),w.jsx(Yr.Target,{children:e})},vDe=E.forwardRef((t,e)=>{const{className:n,children:r,sub:o,...i}=t;on(i);const s=E.useContext(tX);return w.jsx(Yr.Dropdown,{className:n,ref:e,onMouseOver:s?.onMenuMouseOver,onMouseLeave:s?.onMenuMouseLeave,children:r})}),bDe=E.forwardRef((t,e)=>{const{className:n,...r}=t;return on(r),w.jsx(Yr.Divider,{className:n,ref:e})}),wDe=E.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return on(o),w.jsx(Yr.Label,{className:n,ref:e,children:r})}),CDe=E.forwardRef((t,e)=>{const{className:n,children:r,icon:o,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,label:c,...d}=t;return on(d,!1),o?w.jsx(wp,{size:24,className:n,ref:e,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":c,...d,children:o}):w.jsx(Ol,{className:n,ref:e,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":c,...d,children:r})}),SDe=E.forwardRef((t,e)=>{const{className:n,tabs:r,defaultOpenTab:o,openTab:i,setOpenTab:s,loading:a,...l}=t;return on(l),w.jsx(pi,{className:n,ref:e,children:w.jsxs(vu,{value:i,defaultValue:o,onChange:s,children:[a&&w.jsx(rD,{visible:a}),w.jsx(vu.List,{children:r.map(c=>w.jsx(vu.Tab,{"data-test":`${c.name.toLowerCase()}-tab`,value:c.name,children:c.name},c.name))}),r.map(c=>w.jsx(vu.Panel,{value:c.name,children:c.tabPanel},c.name))]})})}),_De=E.forwardRef((t,e)=>{const{className:n,children:r,onClick:o,label:i,...s}=t;return on(s),w.jsx(Ol,{size:"xs","aria-label":i,className:n,ref:e,onClick:o,...s,children:r})}),xDe=E.forwardRef((t,e)=>{const{className:n,accept:r,value:o,placeholder:i,onChange:s,...a}=t;return on(a),w.jsx(pPe,{size:"xs",className:n,ref:e,accept:r,value:o,placeholder:i,onChange:s,...a})}),EDe=E.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return on(o),w.jsx("div",{className:n,ref:e,children:r})}),kDe=E.forwardRef((t,e)=>{const{className:n,value:r,placeholder:o,onKeyDown:i,onChange:s,...a}=t;return on(a),w.jsx(pE,{size:"xs","data-test":"embed-input",className:n,ref:e,value:r,placeholder:o,onKeyDown:i,onChange:s})}),TDe=t=>{const{opened:e,position:n,children:r,...o}=t;return on(o),w.jsx(Lf,{withinPortal:!1,opened:e,position:n,children:r})},ADe=t=>{const{children:e,...n}=t;return on(n),w.jsx(UP,{children:e})},RDe=E.forwardRef((t,e)=>{const{className:n,children:r,variant:o,...i}=t;return on(i),w.jsx(rE,{className:n,ref:e,children:r})}),IDe=E.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return on(o,!1),w.jsx(pi,{align:"center",gap:0,className:n,ref:e,...o,children:r})}),MDe=E.forwardRef((t,e)=>{const{className:n,children:r,icon:o,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,label:c,...d}=t;return on(d,!1),o?w.jsx(wp,{size:24,className:n,ref:e,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":c,...d,children:o}):w.jsx(Ol,{className:n,ref:e,onClick:i,onDragEnd:s,onDragStart:a,draggable:l,"aria-label":c,...d,children:r})}),NDe=E.forwardRef((t,e)=>{const{className:n,children:r,id:o,...i}=t;return on(i),w.jsx(w0,{gap:0,className:n,ref:e,id:o,role:"listbox",children:r})}),ODe=E.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return on(o),w.jsx(pi,{className:n,ref:e,children:w.jsx(pi,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),PDe=E.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:o,item:i,id:s,...a}=t;on(a);const l=E.useRef(null);return E.useEffect(()=>{if(!l.current||!r)return;const c=WW(l.current,document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),w.jsxs(pi,{gap:0,className:n,ref:m0(e,l),id:s,role:"option",onMouseDown:c=>c.preventDefault(),onClick:o,"aria-selected":r||void 0,children:[i.icon&&w.jsx(pi,{className:"bn-mt-suggestion-menu-item-section","data-position":"left",children:i.icon}),w.jsxs(w0,{gap:0,className:"bn-mt-suggestion-menu-item-body",children:[w.jsx(xc,{className:"bn-mt-suggestion-menu-item-title",children:i.title}),w.jsx(xc,{className:"bn-mt-suggestion-menu-item-subtitle",children:i.subtext})]}),i.badge&&w.jsx(pi,{"data-position":"right",className:"bn-mt-suggestion-menu-item-section",children:w.jsx(QP,{size:"xs",children:i.badge})})]})}),DDe=E.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return on(o),w.jsx(pi,{className:n,ref:e,children:r})}),LDe=E.forwardRef((t,e)=>{const{className:n,...r}=t;return on(r),w.jsx(Vf,{className:n,type:"dots",size:16,ref:e})}),VDe=E.forwardRef((t,e)=>{const{className:n,children:r,id:o,columns:i,...s}=t;return on(s),w.jsx("div",{className:n,style:{gridTemplateColumns:`repeat(${i}, 1fr)`},ref:e,id:o,role:"grid",children:r})}),jDe=E.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...i}=t;return on(i),w.jsx(pi,{className:n,style:{gridColumn:`1 / ${o+1}`},ref:e,children:w.jsx(pi,{className:"bn-mt-suggestion-menu-item-title",children:r})})}),BDe=E.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:o,item:i,id:s,...a}=t;on(a);const l=E.useRef(null);return E.useEffect(()=>{if(!l.current||!r)return;const c=WW(l.current,document.querySelector(".bn-grid-suggestion-menu"));c==="top"?l.current.scrollIntoView(!0):c==="bottom"&&l.current.scrollIntoView(!1)},[r]),w.jsx("div",{className:n,ref:m0(e,l),id:s,role:"option",onClick:o,"aria-selected":r||void 0,children:i.icon})}),$De=E.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...i}=t;return on(i),w.jsx(Vf,{className:n,style:{gridColumn:`1 / ${o+1}`},type:"dots",ref:e})}),FDe=E.forwardRef((t,e)=>{const{children:n,className:r,onMouseDown:o,onClick:i,...s}=t;return on(s,!1),w.jsx(Ol,{className:r,ref:e,onMouseDown:o,onClick:i,...s,children:n})}),HDe=E.forwardRef((t,e)=>{const{className:n,children:r,draggable:o,onDragStart:i,onDragEnd:s,style:a,label:l,...c}=t;return on(c,!1),w.jsx(Ol,{className:n,ref:e,"aria-label":l,draggable:o,onDragStart:i,onDragEnd:s,style:a,...c,children:r})}),l2=E.forwardRef((t,e)=>{const{className:n,children:r,onMouseEnter:o,onMouseLeave:i,variant:s,...a}=t;on(a);const{ref:l,focused:c}=rY(),d=nY(c),f=m0(e,l,d);return w.jsx(WP,{className:n,ref:f,role:"toolbar",onMouseEnter:o,onMouseLeave:i,gap:s==="action-toolbar"?2:void 0,children:r})}),c2=E.forwardRef((t,e)=>{const{className:n,items:r,isDisabled:o,...i}=t;on(i);const s=r.filter(a=>a.isSelected)[0];return s?w.jsxs(Yr,{withinPortal:!1,transitionProps:{exitDuration:0},disabled:o,middlewares:{flip:!0,shift:!0,inline:!1,size:!0},children:[w.jsx(Yr.Target,{children:w.jsx(Ol,{onMouseDown:a=>{vI()&&a.currentTarget.focus()},leftSection:s.icon,rightSection:w.jsx(fDe,{}),size:"xs",variant:"subtle",disabled:o,children:s.text})}),w.jsx(Yr.Dropdown,{className:n,ref:e,children:r.map(a=>w.jsx(Yr.Item,{onClick:a.onClick,leftSection:a.icon,rightSection:a.isSelected?w.jsx(YP,{size:10,className:"bn-tick-icon"}):w.jsx("div",{className:"bn-tick-space"}),disabled:a.isDisabled,children:a.text},a.text))})]}):null}),UDe={FormattingToolbar:{Root:l2,Button:a2,Select:c2},FilePanel:{Root:SDe,Button:_De,FileInput:xDe,TabPanel:EDe,TextInput:kDe},GridSuggestionMenu:{Root:VDe,Item:BDe,EmptyItem:jDe,Loader:$De},LinkToolbar:{Root:l2,Button:a2,Select:c2},SideMenu:{Root:IDe,Button:MDe},SuggestionMenu:{Root:NDe,Item:PDe,EmptyItem:ODe,Label:DDe,Loader:LDe},TableHandle:{Root:HDe,ExtendButton:FDe},Generic:{Badge:{Root:YPe,Group:XPe},Form:{Root:t=>w.jsx("div",{children:t.children}),TextInput:oDe},Menu:{Root:mDe,Trigger:yDe,Dropdown:vDe,Divider:bDe,Label:wDe,Item:gDe,Button:CDe},Popover:{Root:TDe,Trigger:ADe,Content:RDe},Toolbar:{Root:l2,Button:a2,Select:c2}},Comments:{Comment:tDe,Editor:nDe,Card:QPe,CardSection:ZPe,ExpandSectionsPrompt:JPe}},zDe={activeClassName:""},nX=t=>{const{className:e,theme:n,...r}=t,o=Mc(),i=zW(),s=o?.colorSchemePreference||i,a=E.useCallback(c=>{if(c&&(WPe(c),typeof n=="object")){if("light"in n&&"dark"in n){Q$(n[s==="dark"?"dark":"light"],c);return}Q$(n,c);return}},[s,n]),l=typeof n=="string"?n:s!=="no-preference"?s:"light";return w.jsx(hW.Provider,{value:UDe,children:w.jsx(uY,{theme:zDe,cssVariablesSelector:".bn-mantine",getRootElement:()=>{},children:w.jsx(NIe,{"data-mantine-color-scheme":l,className:Er("bn-mantine",e||""),theme:typeof n=="object"?void 0:n,...r,ref:a})})})};var e9=1,GDe=.9,qDe=.8,KDe=.17,u2=.1,d2=.999,WDe=.9999,YDe=.99,XDe=/[\\\/_+.#"@\[\(\{&]/,QDe=/[\\\/_+.#"@\[\(\{&]/g,ZDe=/[\s-]/,rX=/[\s-]/g;function zI(t,e,n,r,o,i,s){if(i===e.length)return o===t.length?e9:YDe;var a=`${o},${i}`;if(s[a]!==void 0)return s[a];for(var l=r.charAt(i),c=n.indexOf(l,o),d=0,f,p,g,y;c>=0;)f=zI(t,e,n,r,c+1,i+1,s),f>d&&(c===o?f*=e9:XDe.test(t.charAt(c-1))?(f*=qDe,g=t.slice(o,c-1).match(QDe),g&&o>0&&(f*=Math.pow(d2,g.length))):ZDe.test(t.charAt(c-1))?(f*=GDe,y=t.slice(o,c-1).match(rX),y&&o>0&&(f*=Math.pow(d2,y.length))):(f*=KDe,o>0&&(f*=Math.pow(d2,c-o))),t.charAt(c)!==e.charAt(i)&&(f*=WDe)),(f<u2&&n.charAt(c-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(c-1)!==r.charAt(i))&&(p=zI(t,e,n,r,c+1,i+2,s),p*u2>f&&(f=p*u2)),f>d&&(d=f),c=n.indexOf(l,c+1);return s[a]=d,d}function t9(t){return t.toLowerCase().replace(rX," ")}function JDe(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,zI(t,e,t9(t),t9(e),0,0,{})}var Jy='[cmdk-group=""]',f2='[cmdk-group-items=""]',e4e='[cmdk-group-heading=""]',oX='[cmdk-item=""]',n9=`${oX}:not([aria-disabled="true"])`,GI="cmdk-item-select",vm="data-value",t4e=(t,e,n)=>JDe(t,e,n),iX=E.createContext(void 0),S0=()=>E.useContext(iX),sX=E.createContext(void 0),pD=()=>E.useContext(sX),aX=E.createContext(void 0),lX=E.forwardRef((t,e)=>{let n=bm(()=>{var te,ie;return{search:"",value:(ie=(te=t.value)!=null?te:t.defaultValue)!=null?ie:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=bm(()=>new Set),o=bm(()=>new Map),i=bm(()=>new Map),s=bm(()=>new Set),a=cX(t),{label:l,children:c,value:d,onValueChange:f,filter:p,shouldFilter:g,loop:y,disablePointerSelection:b=!1,vimBindings:_=!0,...k}=t,M=hi(),N=hi(),j=hi(),B=E.useRef(null),F=f4e();sp(()=>{if(d!==void 0){let te=d.trim();n.current.value=te,D.emit()}},[d]),sp(()=>{F(6,H)},[]);let D=E.useMemo(()=>({subscribe:te=>(s.current.add(te),()=>s.current.delete(te)),snapshot:()=>n.current,setState:(te,ie,ce)=>{var ae,ye,we,Be;if(!Object.is(n.current[te],ie)){if(n.current[te]=ie,te==="search")q(),L(),F(1,z);else if(te==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Ie=document.getElementById(j);Ie?Ie.focus():(ae=document.getElementById(M))==null||ae.focus()}if(F(7,()=>{var Ie;n.current.selectedItemId=(Ie=ne())==null?void 0:Ie.id,D.emit()}),ce||F(5,H),((ye=a.current)==null?void 0:ye.value)!==void 0){let Ie=ie??"";(Be=(we=a.current).onValueChange)==null||Be.call(we,Ie);return}}D.emit()}},emit:()=>{s.current.forEach(te=>te())}}),[]),R=E.useMemo(()=>({value:(te,ie,ce)=>{var ae;ie!==((ae=i.current.get(te))==null?void 0:ae.value)&&(i.current.set(te,{value:ie,keywords:ce}),n.current.filtered.items.set(te,I(ie,ce)),F(2,()=>{L(),D.emit()}))},item:(te,ie)=>(r.current.add(te),ie&&(o.current.has(ie)?o.current.get(ie).add(te):o.current.set(ie,new Set([te]))),F(3,()=>{q(),L(),n.current.value||z(),D.emit()}),()=>{i.current.delete(te),r.current.delete(te),n.current.filtered.items.delete(te);let ce=ne();F(4,()=>{q(),ce?.getAttribute("id")===te&&z(),D.emit()})}),group:te=>(o.current.has(te)||o.current.set(te,new Set),()=>{i.current.delete(te),o.current.delete(te)}),filter:()=>a.current.shouldFilter,label:l||t["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:M,inputId:j,labelId:N,listInnerRef:B}),[]);function I(te,ie){var ce,ae;let ye=(ae=(ce=a.current)==null?void 0:ce.filter)!=null?ae:t4e;return te?ye(te,n.current.search,ie):0}function L(){if(!n.current.search||a.current.shouldFilter===!1)return;let te=n.current.filtered.items,ie=[];n.current.filtered.groups.forEach(ae=>{let ye=o.current.get(ae),we=0;ye.forEach(Be=>{let Ie=te.get(Be);we=Math.max(Ie,we)}),ie.push([ae,we])});let ce=B.current;re().sort((ae,ye)=>{var we,Be;let Ie=ae.getAttribute("id"),Ge=ye.getAttribute("id");return((we=te.get(Ge))!=null?we:0)-((Be=te.get(Ie))!=null?Be:0)}).forEach(ae=>{let ye=ae.closest(f2);ye?ye.appendChild(ae.parentElement===ye?ae:ae.closest(`${f2} > *`)):ce.appendChild(ae.parentElement===ce?ae:ae.closest(`${f2} > *`))}),ie.sort((ae,ye)=>ye[1]-ae[1]).forEach(ae=>{var ye;let we=(ye=B.current)==null?void 0:ye.querySelector(`${Jy}[${vm}="${encodeURIComponent(ae[0])}"]`);we?.parentElement.appendChild(we)})}function z(){let te=re().find(ce=>ce.getAttribute("aria-disabled")!=="true"),ie=te?.getAttribute(vm);D.setState("value",ie||void 0)}function q(){var te,ie,ce,ae;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let ye=0;for(let we of r.current){let Be=(ie=(te=i.current.get(we))==null?void 0:te.value)!=null?ie:"",Ie=(ae=(ce=i.current.get(we))==null?void 0:ce.keywords)!=null?ae:[],Ge=I(Be,Ie);n.current.filtered.items.set(we,Ge),Ge>0&&ye++}for(let[we,Be]of o.current)for(let Ie of Be)if(n.current.filtered.items.get(Ie)>0){n.current.filtered.groups.add(we);break}n.current.filtered.count=ye}function H(){var te,ie,ce;let ae=ne();ae&&(((te=ae.parentElement)==null?void 0:te.firstChild)===ae&&((ce=(ie=ae.closest(Jy))==null?void 0:ie.querySelector(e4e))==null||ce.scrollIntoView({block:"nearest"})),ae.scrollIntoView({block:"nearest"}))}function ne(){var te;return(te=B.current)==null?void 0:te.querySelector(`${oX}[aria-selected="true"]`)}function re(){var te;return Array.from(((te=B.current)==null?void 0:te.querySelectorAll(n9))||[])}function V(te){let ie=re()[te];ie&&D.setState("value",ie.getAttribute(vm))}function U(te){var ie;let ce=ne(),ae=re(),ye=ae.findIndex(Be=>Be===ce),we=ae[ye+te];(ie=a.current)!=null&&ie.loop&&(we=ye+te<0?ae[ae.length-1]:ye+te===ae.length?ae[0]:ae[ye+te]),we&&D.setState("value",we.getAttribute(vm))}function Q(te){let ie=ne(),ce=ie?.closest(Jy),ae;for(;ce&&!ae;)ce=te>0?u4e(ce,Jy):d4e(ce,Jy),ae=ce?.querySelector(n9);ae?D.setState("value",ae.getAttribute(vm)):U(te)}let J=()=>V(re().length-1),Y=te=>{te.preventDefault(),te.metaKey?J():te.altKey?Q(1):U(1)},se=te=>{te.preventDefault(),te.metaKey?V(0):te.altKey?Q(-1):U(-1)};return E.createElement(Rt.div,{ref:e,tabIndex:-1,...k,"cmdk-root":"",onKeyDown:te=>{var ie;(ie=k.onKeyDown)==null||ie.call(k,te);let ce=te.nativeEvent.isComposing||te.keyCode===229;if(!(te.defaultPrevented||ce))switch(te.key){case"n":case"j":{_&&te.ctrlKey&&Y(te);break}case"ArrowDown":{Y(te);break}case"p":case"k":{_&&te.ctrlKey&&se(te);break}case"ArrowUp":{se(te);break}case"Home":{te.preventDefault(),V(0);break}case"End":{te.preventDefault(),J();break}case"Enter":{te.preventDefault();let ae=ne();if(ae){let ye=new Event(GI);ae.dispatchEvent(ye)}}}}},E.createElement("label",{"cmdk-label":"",htmlFor:R.inputId,id:R.labelId,style:p4e},l),mE(t,te=>E.createElement(sX.Provider,{value:D},E.createElement(iX.Provider,{value:R},te))))}),n4e=E.forwardRef((t,e)=>{var n,r;let o=hi(),i=E.useRef(null),s=E.useContext(aX),a=S0(),l=cX(t),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:s?.forceMount;sp(()=>{if(!c)return a.item(o,s?.id)},[c]);let d=uX(o,i,[t.value,t.children,i],t.keywords),f=pD(),p=kf(F=>F.value&&F.value===d.current),g=kf(F=>c||a.filter()===!1?!0:F.search?F.filtered.items.get(o)>0:!0);E.useEffect(()=>{let F=i.current;if(!(!F||t.disabled))return F.addEventListener(GI,y),()=>F.removeEventListener(GI,y)},[g,t.onSelect,t.disabled]);function y(){var F,D;b(),(D=(F=l.current).onSelect)==null||D.call(F,d.current)}function b(){f.setState("value",d.current,!0)}if(!g)return null;let{disabled:_,value:k,onSelect:M,forceMount:N,keywords:j,...B}=t;return E.createElement(Rt.div,{ref:Au(i,e),...B,id:o,"cmdk-item":"",role:"option","aria-disabled":!!_,"aria-selected":!!p,"data-disabled":!!_,"data-selected":!!p,onPointerMove:_||a.getDisablePointerSelection()?void 0:b,onClick:_?void 0:y},t.children)}),r4e=E.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:o,...i}=t,s=hi(),a=E.useRef(null),l=E.useRef(null),c=hi(),d=S0(),f=kf(g=>o||d.filter()===!1?!0:g.search?g.filtered.groups.has(s):!0);sp(()=>d.group(s),[]),uX(s,a,[t.value,t.heading,l]);let p=E.useMemo(()=>({id:s,forceMount:o}),[o]);return E.createElement(Rt.div,{ref:Au(a,e),...i,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},n&&E.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),mE(t,g=>E.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},E.createElement(aX.Provider,{value:p},g))))}),o4e=E.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,o=E.useRef(null),i=kf(s=>!s.search);return!n&&!i?null:E.createElement(Rt.div,{ref:Au(o,e),...r,"cmdk-separator":"",role:"separator"})}),i4e=E.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,o=t.value!=null,i=pD(),s=kf(c=>c.search),a=kf(c=>c.selectedItemId),l=S0();return E.useEffect(()=>{t.value!=null&&i.setState("search",t.value)},[t.value]),E.createElement(Rt.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":a,id:l.inputId,type:"text",value:o?t.value:s,onChange:c=>{o||i.setState("search",c.target.value),n?.(c.target.value)}})}),s4e=E.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...o}=t,i=E.useRef(null),s=E.useRef(null),a=kf(c=>c.selectedItemId),l=S0();return E.useEffect(()=>{if(s.current&&i.current){let c=s.current,d=i.current,f,p=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let g=c.offsetHeight;d.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return p.observe(c),()=>{cancelAnimationFrame(f),p.unobserve(c)}}},[]),E.createElement(Rt.div,{ref:Au(i,e),...o,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":r,id:l.listId},mE(t,c=>E.createElement("div",{ref:Au(s,l.listInnerRef),"cmdk-list-sizer":""},c)))}),a4e=E.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:o,contentClassName:i,container:s,...a}=t;return E.createElement(I_,{open:n,onOpenChange:r},E.createElement(M_,{container:s},E.createElement(N_,{"cmdk-overlay":"",className:o}),E.createElement(O_,{"aria-label":t.label,"cmdk-dialog":"",className:i},E.createElement(lX,{ref:e,...a}))))}),l4e=E.forwardRef((t,e)=>kf(n=>n.filtered.count===0)?E.createElement(Rt.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),c4e=E.forwardRef((t,e)=>{let{progress:n,children:r,label:o="Loading...",...i}=t;return E.createElement(Rt.div,{ref:e,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},mE(t,s=>E.createElement("div",{"aria-hidden":!0},s)))}),Jg=Object.assign(lX,{List:s4e,Item:n4e,Input:i4e,Group:r4e,Separator:o4e,Dialog:a4e,Empty:l4e,Loading:c4e});function u4e(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function d4e(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function cX(t){let e=E.useRef(t);return sp(()=>{e.current=t}),e}var sp=typeof window>"u"?E.useEffect:E.useLayoutEffect;function bm(t){let e=E.useRef();return e.current===void 0&&(e.current=t()),e}function kf(t){let e=pD(),n=()=>t(e.snapshot());return E.useSyncExternalStore(e.subscribe,n,n)}function uX(t,e,n,r=[]){let o=E.useRef(),i=S0();return sp(()=>{var s;let a=(()=>{var c;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(c=d.current.textContent)==null?void 0:c.trim():o.current}})(),l=r.map(c=>c.trim());i.value(t,a,l),(s=e.current)==null||s.setAttribute(vm,a),o.current=a}),o}var f4e=()=>{let[t,e]=E.useState(),n=bm(()=>new Map);return sp(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,o)=>{n.current.set(r,o),e({})}};function h4e(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function mE({asChild:t,children:e},n){return t&&E.isValidElement(e)?E.cloneElement(h4e(e),{ref:e.ref},n(e.props.children)):n(e)}var p4e={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function dX({...t}){return w.jsx(I_,{"data-slot":"dialog",...t})}function m4e({...t}){return w.jsx(M_,{"data-slot":"dialog-portal",...t})}function g4e({...t}){return w.jsx(Eg,{"data-slot":"dialog-close",...t})}function y4e({className:t,...e}){return w.jsx(N_,{"data-slot":"dialog-overlay",className:dt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function fX({className:t,children:e,showCloseButton:n=!0,...r}){return w.jsxs(m4e,{"data-slot":"dialog-portal",children:[w.jsx(y4e,{}),w.jsxs(O_,{"data-slot":"dialog-content",className:dt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:[e,n&&w.jsxs(Eg,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[w.jsx(s8,{}),w.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function v4e({className:t,...e}){return w.jsx("div",{"data-slot":"dialog-header",className:dt("flex flex-col gap-2 text-center sm:text-left",t),...e})}function b4e({className:t,...e}){return w.jsx("div",{"data-slot":"dialog-footer",className:dt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function ZS({className:t,...e}){return w.jsx(IM,{"data-slot":"dialog-title",className:dt("text-lg leading-none font-semibold",t),...e})}function hX({className:t,...e}){return w.jsx(MM,{"data-slot":"dialog-description",className:dt("text-muted-foreground text-sm",t),...e})}function JS({className:t,...e}){return w.jsx(Jg,{"data-slot":"command",className:dt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...e})}function w4e({title:t="Command Palette",description:e="Search for a command to run...",children:n,className:r,showCloseButton:o=!0,...i}){return w.jsxs(dX,{...i,children:[w.jsxs(v4e,{className:"sr-only",children:[w.jsx(ZS,{children:t}),w.jsx(hX,{children:e})]}),w.jsx(fX,{className:dt("overflow-hidden p-0",r),showCloseButton:o,children:w.jsx(JS,{className:"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:n})})]})}function e_({className:t,...e}){return w.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[w.jsx(i8,{className:"size-4 shrink-0 opacity-50"}),w.jsx(Jg.Input,{"data-slot":"command-input",className:dt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...e})]})}function t_({className:t,...e}){return w.jsx(Jg.List,{"data-slot":"command-list",className:dt("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...e})}function n_({...t}){return w.jsx(Jg.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function r_({className:t,...e}){return w.jsx(Jg.Group,{"data-slot":"command-group",className:dt("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...e})}function o_({className:t,...e}){return w.jsx(Jg.Item,{"data-slot":"command-item",className:dt("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}var gE="Popover",[pX,B9e]=ra(gE,[Af]),_0=Af(),[C4e,jf]=pX(gE),mX=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:s=!1}=t,a=_0(e),l=E.useRef(null),[c,d]=E.useState(!1),[f,p]=Ru({prop:r,defaultProp:o??!1,onChange:i,caller:gE});return w.jsx(j_,{...a,children:w.jsx(C4e,{scope:e,contentId:hi(),triggerRef:l,open:f,onOpenChange:p,onOpenToggle:E.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:c,onCustomAnchorAdd:E.useCallback(()=>d(!0),[]),onCustomAnchorRemove:E.useCallback(()=>d(!1),[]),modal:s,children:n})})};mX.displayName=gE;var gX="PopoverAnchor",S4e=E.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=jf(gX,n),i=_0(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:a}=o;return E.useEffect(()=>(s(),()=>a()),[s,a]),w.jsx(Lb,{...i,...r,ref:e})});S4e.displayName=gX;var yX="PopoverTrigger",vX=E.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=jf(yX,n),i=_0(n),s=vn(e,o.triggerRef),a=w.jsx(Rt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":_X(o.open),...r,ref:s,onClick:at(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?a:w.jsx(Lb,{asChild:!0,...i,children:a})});vX.displayName=yX;var mD="PopoverPortal",[_4e,x4e]=pX(mD,{forceMount:void 0}),bX=t=>{const{__scopePopover:e,forceMount:n,children:r,container:o}=t,i=jf(mD,e);return w.jsx(_4e,{scope:e,forceMount:n,children:w.jsx(oa,{present:n||i.open,children:w.jsx(xg,{asChild:!0,container:o,children:r})})})};bX.displayName=mD;var bg="PopoverContent",wX=E.forwardRef((t,e)=>{const n=x4e(bg,t.__scopePopover),{forceMount:r=n.forceMount,...o}=t,i=jf(bg,t.__scopePopover);return w.jsx(oa,{present:r||i.open,children:i.modal?w.jsx(k4e,{...o,ref:e}):w.jsx(T4e,{...o,ref:e})})});wX.displayName=bg;var E4e=sf("PopoverContent.RemoveScroll"),k4e=E.forwardRef((t,e)=>{const n=jf(bg,t.__scopePopover),r=E.useRef(null),o=vn(e,r),i=E.useRef(!1);return E.useEffect(()=>{const s=r.current;if(s)return A_(s)},[]),w.jsx(Ob,{as:E4e,allowPinchZoom:!0,children:w.jsx(CX,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:at(t.onCloseAutoFocus,s=>{s.preventDefault(),i.current||n.triggerRef.current?.focus()}),onPointerDownOutside:at(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:at(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),T4e=E.forwardRef((t,e)=>{const n=jf(bg,t.__scopePopover),r=E.useRef(!1),o=E.useRef(!1);return w.jsx(CX,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const s=i.target;n.triggerRef.current?.contains(s)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),CX=E.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:d,...f}=t,p=jf(bg,n),g=_0(n);return k_(),w.jsx(Nb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:w.jsx(_g,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:w.jsx(B_,{"data-state":_X(p.open),role:"dialog",id:p.contentId,...g,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),SX="PopoverClose",A4e=E.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=jf(SX,n);return w.jsx(Rt.button,{type:"button",...r,ref:e,onClick:at(t.onClick,()=>o.onOpenChange(!1))})});A4e.displayName=SX;var R4e="PopoverArrow",I4e=E.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=_0(n);return w.jsx($_,{...o,...r,ref:e})});I4e.displayName=R4e;function _X(t){return t?"open":"closed"}var M4e=mX,N4e=vX,O4e=bX,P4e=wX;function qI({...t}){return w.jsx(M4e,{"data-slot":"popover",...t})}function KI({...t}){return w.jsx(N4e,{"data-slot":"popover-trigger",...t})}function WI({className:t,align:e="center",sideOffset:n=4,...r}){return w.jsx(O4e,{children:w.jsx(P4e,{"data-slot":"popover-content",align:e,sideOffset:n,className:dt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...r})})}function r9({classorbook:t}){const e=U_(()=>Zn.ClassorBook.toArray(),[],[]),{pageClass:n,setPageClass:r,pageBook:o,setPageBook:i,SyncedQueue:s,isReadingMode:a}=_l(),[l,c]=E.useState(!1),d=Array.from(new Set(e.map(f=>f.classId)));return t==="class"?w.jsxs(qI,{open:l,onOpenChange:c,children:[w.jsx(KI,{asChild:!0,className:"mx-2",children:w.jsxs(ic,{inert:!!a,variant:"outline",role:"combobox","aria-expanded":l,className:"justify-between",children:[n?e.find(f=>f.classId===n)?.classId:`Select ${t}`,w.jsx(M2,{className:"opacity-50"})]})}),w.jsx(WI,{className:"w-[350px] p-0",children:w.jsxs(JS,{children:[w.jsx(e_,{placeholder:`Search ${t}`,className:"h-9"}),w.jsxs(t_,{children:[w.jsx(n_,{children:"No framework found."}),w.jsx(r_,{children:d.map(f=>w.jsxs(o_,{value:f,onSelect:p=>{r(p===n?"":p),i(""),c(!1)},children:[w.jsxs("div",{className:"flex gap-2 items-center",children:[w.jsx(ig,{keyName:f}),w.jsx("span",{children:f})]}),w.jsx(cC,{className:dt("ml-auto",n===f?"opacity-100":"opacity-0")})]},f))})]})]})})]}):w.jsxs(qI,{open:l,onOpenChange:c,children:[w.jsx(KI,{asChild:!0,className:"mx-2",children:w.jsxs(ic,{inert:!!a,variant:"outline",role:"combobox","aria-expanded":l,className:"justify-between",children:[o?e.find(f=>f.bookId===o)?.bookId:`Select ${t}`,w.jsx(M2,{className:"opacity-50"})]})}),w.jsx(WI,{className:"w-[350px] p-0",children:w.jsxs(JS,{children:[w.jsx(e_,{placeholder:`Search ${t}`,className:"h-9",onKeyDown:async f=>{if(f.key==="F2"){const p=prompt("Enter class name:",n),g=prompt("Enter book name:");if(!p||!g)return;if(r(p),i(g),await Zn.ClassorBook.where({classId:p,bookId:g}).first())Kr.error("Duplicate Error",{description:"Alread Present"});else{const b={id:R7(),classId:p,bookId:g};await Zn.ClassorBook.add(b),await s(b.id,"ClassorBook","add")}}}}),w.jsxs(t_,{children:[w.jsx(n_,{children:"No framework found."}),w.jsx(r_,{children:e.filter(f=>f.classId===n).map(f=>w.jsxs(o_,{value:f.bookId,onSelect:p=>{i(p===o?"":p),c(!1)},children:[w.jsxs("div",{className:"flex gap-2 items-center",children:[w.jsx(ig,{keyName:f.bookId}),w.jsx("span",{children:f.bookId})]}),w.jsx(cC,{className:dt("ml-auto",n===f.bookId?"opacity-100":"opacity-0")})]},f.bookId))})]})]})})]})}let yo=class extends Error{constructor(e){super(e),this.name="ShikiError"}};function D4e(t){return gD(t)}function gD(t){return Array.isArray(t)?L4e(t):t instanceof RegExp?t:typeof t=="object"?V4e(t):t}function L4e(t){let e=[];for(let n=0,r=t.length;n<r;n++)e[n]=gD(t[n]);return e}function V4e(t){let e={};for(let n in t)e[n]=gD(t[n]);return e}function xX(t,...e){return e.forEach(n=>{for(let r in n)t[r]=n[r]}),t}function EX(t){const e=~t.lastIndexOf("/")||~t.lastIndexOf("\\");return e===0?t:~e===t.length-1?EX(t.substring(0,t.length-1)):t.substr(~e+1)}var h2=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Cw=class{static hasCaptures(t){return t===null?!1:(h2.lastIndex=0,h2.test(t))}static replaceCaptures(t,e,n){return t.replace(h2,(r,o,i,s)=>{let a=n[parseInt(o||i,10)];if(a){let l=e.substring(a.start,a.end);for(;l[0]===".";)l=l.substring(1);switch(s){case"downcase":return l.toLowerCase();case"upcase":return l.toUpperCase();default:return l}}else return r})}};function kX(t,e){return t<e?-1:t>e?1:0}function TX(t,e){if(t===null&&e===null)return 0;if(!t)return-1;if(!e)return 1;let n=t.length,r=e.length;if(n===r){for(let o=0;o<n;o++){let i=kX(t[o],e[o]);if(i!==0)return i}return 0}return n-r}function o9(t){return!!(/^#[0-9a-f]{6}$/i.test(t)||/^#[0-9a-f]{8}$/i.test(t)||/^#[0-9a-f]{3}$/i.test(t)||/^#[0-9a-f]{4}$/i.test(t))}function AX(t){return t.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var RX=class{constructor(t){this.fn=t}cache=new Map;get(t){if(this.cache.has(t))return this.cache.get(t);const e=this.fn(t);return this.cache.set(t,e),e}},i_=class{constructor(t,e,n){this._colorMap=t,this._defaults=e,this._root=n}static createFromRawTheme(t,e){return this.createFromParsedTheme($4e(t),e)}static createFromParsedTheme(t,e){return H4e(t,e)}_cachedMatchRoot=new RX(t=>this._root.match(t));getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(t){if(t===null)return this._defaults;const e=t.scopeName,r=this._cachedMatchRoot.get(e).find(o=>j4e(t.parent,o.parentScopes));return r?new IX(r.fontStyle,r.foreground,r.background):null}},p2=class iC{constructor(e,n){this.parent=e,this.scopeName=n}static push(e,n){for(const r of n)e=new iC(e,r);return e}static from(...e){let n=null;for(let r=0;r<e.length;r++)n=new iC(n,e[r]);return n}push(e){return new iC(this,e)}getSegments(){let e=this;const n=[];for(;e;)n.push(e.scopeName),e=e.parent;return n.reverse(),n}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push(r.scopeName),r=r.parent;return r===e?n.reverse():void 0}};function j4e(t,e){if(e.length===0)return!0;for(let n=0;n<e.length;n++){let r=e[n],o=!1;if(r===">"){if(n===e.length-1)return!1;r=e[++n],o=!0}for(;t&&!B4e(t.scopeName,r);){if(o)return!1;t=t.parent}if(!t)return!1;t=t.parent}return!0}function B4e(t,e){return e===t||t.startsWith(e)&&t[e.length]==="."}var IX=class{constructor(t,e,n){this.fontStyle=t,this.foregroundId=e,this.backgroundId=n}};function $4e(t){if(!t)return[];if(!t.settings||!Array.isArray(t.settings))return[];let e=t.settings,n=[],r=0;for(let o=0,i=e.length;o<i;o++){let s=e[o];if(!s.settings)continue;let a;if(typeof s.scope=="string"){let f=s.scope;f=f.replace(/^[,]+/,""),f=f.replace(/[,]+$/,""),a=f.split(",")}else Array.isArray(s.scope)?a=s.scope:a=[""];let l=-1;if(typeof s.settings.fontStyle=="string"){l=0;let f=s.settings.fontStyle.split(" ");for(let p=0,g=f.length;p<g;p++)switch(f[p]){case"italic":l=l|1;break;case"bold":l=l|2;break;case"underline":l=l|4;break;case"strikethrough":l=l|8;break}}let c=null;typeof s.settings.foreground=="string"&&o9(s.settings.foreground)&&(c=s.settings.foreground);let d=null;typeof s.settings.background=="string"&&o9(s.settings.background)&&(d=s.settings.background);for(let f=0,p=a.length;f<p;f++){let y=a[f].trim().split(" "),b=y[y.length-1],_=null;y.length>1&&(_=y.slice(0,y.length-1),_.reverse()),n[r++]=new F4e(b,_,o,l,c,d)}}return n}var F4e=class{constructor(t,e,n,r,o,i){this.scope=t,this.parentScopes=e,this.index=n,this.fontStyle=r,this.foreground=o,this.background=i}},Oi=(t=>(t[t.NotSet=-1]="NotSet",t[t.None=0]="None",t[t.Italic=1]="Italic",t[t.Bold=2]="Bold",t[t.Underline=4]="Underline",t[t.Strikethrough=8]="Strikethrough",t))(Oi||{});function H4e(t,e){t.sort((l,c)=>{let d=kX(l.scope,c.scope);return d!==0||(d=TX(l.parentScopes,c.parentScopes),d!==0)?d:l.index-c.index});let n=0,r="#000000",o="#ffffff";for(;t.length>=1&&t[0].scope==="";){let l=t.shift();l.fontStyle!==-1&&(n=l.fontStyle),l.foreground!==null&&(r=l.foreground),l.background!==null&&(o=l.background)}let i=new U4e(e),s=new IX(n,i.getId(r),i.getId(o)),a=new G4e(new YI(0,null,-1,0,0),[]);for(let l=0,c=t.length;l<c;l++){let d=t[l];a.insert(0,d.scope,d.parentScopes,d.fontStyle,i.getId(d.foreground),i.getId(d.background))}return new i_(i,s,a)}var U4e=class{_isFrozen;_lastColorId;_id2color;_color2id;constructor(t){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(t)){this._isFrozen=!0;for(let e=0,n=t.length;e<n;e++)this._color2id[t[e]]=e,this._id2color[e]=t[e]}else this._isFrozen=!1}getId(t){if(t===null)return 0;t=t.toUpperCase();let e=this._color2id[t];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${t}`);return e=++this._lastColorId,this._color2id[t]=e,this._id2color[e]=t,e}getColorMap(){return this._id2color.slice(0)}},z4e=Object.freeze([]),YI=class MX{scopeDepth;parentScopes;fontStyle;foreground;background;constructor(e,n,r,o,i){this.scopeDepth=e,this.parentScopes=n||z4e,this.fontStyle=r,this.foreground=o,this.background=i}clone(){return new MX(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let n=[];for(let r=0,o=e.length;r<o;r++)n[r]=e[r].clone();return n}acceptOverwrite(e,n,r,o){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,n!==-1&&(this.fontStyle=n),r!==0&&(this.foreground=r),o!==0&&(this.background=o)}},G4e=class XI{constructor(e,n=[],r={}){this._mainRule=e,this._children=r,this._rulesWithParentScopes=n}_rulesWithParentScopes;static _cmpBySpecificity(e,n){if(e.scopeDepth!==n.scopeDepth)return n.scopeDepth-e.scopeDepth;let r=0,o=0;for(;e.parentScopes[r]===">"&&r++,n.parentScopes[o]===">"&&o++,!(r>=e.parentScopes.length||o>=n.parentScopes.length);){const i=n.parentScopes[o].length-e.parentScopes[r].length;if(i!==0)return i;r++,o++}return n.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let r=e.indexOf("."),o,i;if(r===-1?(o=e,i=""):(o=e.substring(0,r),i=e.substring(r+1)),this._children.hasOwnProperty(o))return this._children[o].match(i)}const n=this._rulesWithParentScopes.concat(this._mainRule);return n.sort(XI._cmpBySpecificity),n}insert(e,n,r,o,i,s){if(n===""){this._doInsertHere(e,r,o,i,s);return}let a=n.indexOf("."),l,c;a===-1?(l=n,c=""):(l=n.substring(0,a),c=n.substring(a+1));let d;this._children.hasOwnProperty(l)?d=this._children[l]:(d=new XI(this._mainRule.clone(),YI.cloneArr(this._rulesWithParentScopes)),this._children[l]=d),d.insert(e+1,c,r,o,i,s)}_doInsertHere(e,n,r,o,i){if(n===null){this._mainRule.acceptOverwrite(e,r,o,i);return}for(let s=0,a=this._rulesWithParentScopes.length;s<a;s++){let l=this._rulesWithParentScopes[s];if(TX(l.parentScopes,n)===0){l.acceptOverwrite(e,r,o,i);return}}r===-1&&(r=this._mainRule.fontStyle),o===0&&(o=this._mainRule.foreground),i===0&&(i=this._mainRule.background),this._rulesWithParentScopes.push(new YI(e,n,r,o,i))}},wg=class ka{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const n=ka.getLanguageId(e),r=ka.getTokenType(e),o=ka.getFontStyle(e),i=ka.getForeground(e),s=ka.getBackground(e);console.log({languageId:n,tokenType:r,fontStyle:o,foreground:i,background:s})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,n,r,o,i,s,a){let l=ka.getLanguageId(e),c=ka.getTokenType(e),d=ka.containsBalancedBrackets(e)?1:0,f=ka.getFontStyle(e),p=ka.getForeground(e),g=ka.getBackground(e);return n!==0&&(l=n),r!==8&&(c=r),o!==null&&(d=o?1:0),i!==-1&&(f=i),s!==0&&(p=s),a!==0&&(g=a),(l<<0|c<<8|d<<10|f<<11|p<<15|g<<24)>>>0}};function s_(t,e){const n=[],r=q4e(t);let o=r.next();for(;o!==null;){let l=0;if(o.length===2&&o.charAt(1)===":"){switch(o.charAt(0)){case"R":l=1;break;case"L":l=-1;break;default:console.log(`Unknown priority ${o} in scope selector`)}o=r.next()}let c=s();if(n.push({matcher:c,priority:l}),o!==",")break;o=r.next()}return n;function i(){if(o==="-"){o=r.next();const l=i();return c=>!!l&&!l(c)}if(o==="("){o=r.next();const l=a();return o===")"&&(o=r.next()),l}if(i9(o)){const l=[];do l.push(o),o=r.next();while(i9(o));return c=>e(l,c)}return null}function s(){const l=[];let c=i();for(;c;)l.push(c),c=i();return d=>l.every(f=>f(d))}function a(){const l=[];let c=s();for(;c&&(l.push(c),o==="|"||o===",");){do o=r.next();while(o==="|"||o===",");c=s()}return d=>l.some(f=>f(d))}}function i9(t){return!!t&&!!t.match(/[\w\.:]+/)}function q4e(t){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,n=e.exec(t);return{next:()=>{if(!n)return null;const r=n[0];return n=e.exec(t),r}}}function NX(t){typeof t.dispose=="function"&&t.dispose()}var Eb=class{constructor(t){this.scopeName=t}toKey(){return this.scopeName}},K4e=class{constructor(t,e){this.scopeName=t,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},W4e=class{_references=[];_seenReferenceKeys=new Set;get references(){return this._references}visitedRule=new Set;add(t){const e=t.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(t))}},Y4e=class{constructor(t,e){this.repo=t,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Eb(this.initialScopeName)]}seenFullScopeRequests=new Set;seenPartialScopeRequests=new Set;Q;processQueue(){const t=this.Q;this.Q=[];const e=new W4e;for(const n of t)X4e(n,this.initialScopeName,this.repo,e);for(const n of e.references)if(n instanceof Eb){if(this.seenFullScopeRequests.has(n.scopeName))continue;this.seenFullScopeRequests.add(n.scopeName),this.Q.push(n)}else{if(this.seenFullScopeRequests.has(n.scopeName)||this.seenPartialScopeRequests.has(n.toKey()))continue;this.seenPartialScopeRequests.add(n.toKey()),this.Q.push(n)}}};function X4e(t,e,n,r){const o=n.lookup(t.scopeName);if(!o){if(t.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const i=n.lookup(e);t instanceof Eb?sC({baseGrammar:i,selfGrammar:o},r):QI(t.ruleName,{baseGrammar:i,selfGrammar:o,repository:o.repository},r);const s=n.injections(t.scopeName);if(s)for(const a of s)r.add(new Eb(a))}function QI(t,e,n){if(e.repository&&e.repository[t]){const r=e.repository[t];a_([r],e,n)}}function sC(t,e){t.selfGrammar.patterns&&Array.isArray(t.selfGrammar.patterns)&&a_(t.selfGrammar.patterns,{...t,repository:t.selfGrammar.repository},e),t.selfGrammar.injections&&a_(Object.values(t.selfGrammar.injections),{...t,repository:t.selfGrammar.repository},e)}function a_(t,e,n){for(const r of t){if(n.visitedRule.has(r))continue;n.visitedRule.add(r);const o=r.repository?xX({},e.repository,r.repository):e.repository;Array.isArray(r.patterns)&&a_(r.patterns,{...e,repository:o},n);const i=r.include;if(!i)continue;const s=OX(i);switch(s.kind){case 0:sC({...e,selfGrammar:e.baseGrammar},n);break;case 1:sC(e,n);break;case 2:QI(s.ruleName,{...e,repository:o},n);break;case 3:case 4:const a=s.scopeName===e.selfGrammar.scopeName?e.selfGrammar:s.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(a){const l={baseGrammar:e.baseGrammar,selfGrammar:a,repository:o};s.kind===4?QI(s.ruleName,l,n):sC(l,n)}else s.kind===4?n.add(new K4e(s.scopeName,s.ruleName)):n.add(new Eb(s.scopeName));break}}}var Q4e=class{kind=0},Z4e=class{kind=1},J4e=class{constructor(t){this.ruleName=t}kind=2},eLe=class{constructor(t){this.scopeName=t}kind=3},tLe=class{constructor(t,e){this.scopeName=t,this.ruleName=e}kind=4};function OX(t){if(t==="$base")return new Q4e;if(t==="$self")return new Z4e;const e=t.indexOf("#");if(e===-1)return new eLe(t);if(e===0)return new J4e(t.substring(1));{const n=t.substring(0,e),r=t.substring(e+1);return new tLe(n,r)}}var nLe=/\\(\d+)/,s9=/\\(\d+)/g,rLe=-1,PX=-2;var x0=class{$location;id;_nameIsCapturing;_name;_contentNameIsCapturing;_contentName;constructor(t,e,n,r){this.$location=t,this.id=e,this._name=n||null,this._nameIsCapturing=Cw.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=Cw.hasCaptures(this._contentName)}get debugName(){const t=this.$location?`${EX(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${t}`}getName(t,e){return!this._nameIsCapturing||this._name===null||t===null||e===null?this._name:Cw.replaceCaptures(this._name,t,e)}getContentName(t,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Cw.replaceCaptures(this._contentName,t,e)}},oLe=class extends x0{retokenizeCapturedWithRuleId;constructor(t,e,n,r,o){super(t,e,n,r),this.retokenizeCapturedWithRuleId=o}dispose(){}collectPatterns(t,e){throw new Error("Not supported!")}compile(t,e){throw new Error("Not supported!")}compileAG(t,e,n,r){throw new Error("Not supported!")}},iLe=class extends x0{_match;captures;_cachedCompiledPatterns;constructor(t,e,n,r,o){super(t,e,n,null),this._match=new kb(r,this.id),this.captures=o,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(t,e){e.push(this._match)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Tb,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},a9=class extends x0{hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,o){super(t,e,n,r),this.patterns=o.patterns,this.hasMissingPatterns=o.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(t,e){for(const n of this.patterns)t.getRule(n).collectPatterns(t,e)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Tb,this.collectPatterns(t,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},ZI=class extends x0{_begin;beginCaptures;_end;endHasBackReferences;endCaptures;applyEndPatternLast;hasMissingPatterns;patterns;_cachedCompiledPatterns;constructor(t,e,n,r,o,i,s,a,l,c){super(t,e,n,r),this._begin=new kb(o,this.id),this.beginCaptures=i,this._end=new kb(s||"￿",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=a,this.applyEndPatternLast=l||!1,this.patterns=c.patterns,this.hasMissingPatterns=c.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(t,e){return this._end.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t,e).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t,e).compileAG(t,n,r)}_getCachedCompiledPatterns(t,e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Tb;for(const n of this.patterns)t.getRule(n).collectPatterns(t,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,e):this._cachedCompiledPatterns.setSource(0,e)),this._cachedCompiledPatterns}},l_=class extends x0{_begin;beginCaptures;whileCaptures;_while;whileHasBackReferences;hasMissingPatterns;patterns;_cachedCompiledPatterns;_cachedCompiledWhilePatterns;constructor(t,e,n,r,o,i,s,a,l){super(t,e,n,r),this._begin=new kb(o,this.id),this.beginCaptures=i,this.whileCaptures=a,this._while=new kb(s,PX),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=l.patterns,this.hasMissingPatterns=l.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(t,e){return this._while.resolveBackReferences(t,e)}collectPatterns(t,e){e.push(this._begin)}compile(t,e){return this._getCachedCompiledPatterns(t).compile(t)}compileAG(t,e,n,r){return this._getCachedCompiledPatterns(t).compileAG(t,n,r)}_getCachedCompiledPatterns(t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Tb;for(const e of this.patterns)t.getRule(e).collectPatterns(t,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(t,e){return this._getCachedCompiledWhilePatterns(t,e).compile(t)}compileWhileAG(t,e,n,r){return this._getCachedCompiledWhilePatterns(t,e).compileAG(t,n,r)}_getCachedCompiledWhilePatterns(t,e){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Tb,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,e||"￿"),this._cachedCompiledWhilePatterns}},DX=class ki{static createCaptureRule(e,n,r,o,i){return e.registerRule(s=>new oLe(n,s,r,o,i))}static getCompiledRuleId(e,n,r){return e.id||n.registerRule(o=>{if(e.id=o,e.match)return new iLe(e.$vscodeTextmateLocation,e.id,e.name,e.match,ki._compileCaptures(e.captures,n,r));if(typeof e.begin>"u"){e.repository&&(r=xX({},r,e.repository));let i=e.patterns;return typeof i>"u"&&e.include&&(i=[{include:e.include}]),new a9(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,ki._compilePatterns(i,n,r))}return e.while?new l_(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,ki._compileCaptures(e.beginCaptures||e.captures,n,r),e.while,ki._compileCaptures(e.whileCaptures||e.captures,n,r),ki._compilePatterns(e.patterns,n,r)):new ZI(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,ki._compileCaptures(e.beginCaptures||e.captures,n,r),e.end,ki._compileCaptures(e.endCaptures||e.captures,n,r),e.applyEndPatternLast,ki._compilePatterns(e.patterns,n,r))}),e.id}static _compileCaptures(e,n,r){let o=[];if(e){let i=0;for(const s in e){if(s==="$vscodeTextmateLocation")continue;const a=parseInt(s,10);a>i&&(i=a)}for(let s=0;s<=i;s++)o[s]=null;for(const s in e){if(s==="$vscodeTextmateLocation")continue;const a=parseInt(s,10);let l=0;e[s].patterns&&(l=ki.getCompiledRuleId(e[s],n,r)),o[a]=ki.createCaptureRule(n,e[s].$vscodeTextmateLocation,e[s].name,e[s].contentName,l)}}return o}static _compilePatterns(e,n,r){let o=[];if(e)for(let i=0,s=e.length;i<s;i++){const a=e[i];let l=-1;if(a.include){const c=OX(a.include);switch(c.kind){case 0:case 1:l=ki.getCompiledRuleId(r[a.include],n,r);break;case 2:let d=r[c.ruleName];d&&(l=ki.getCompiledRuleId(d,n,r));break;case 3:case 4:const f=c.scopeName,p=c.kind===4?c.ruleName:null,g=n.getExternalGrammar(f,r);if(g)if(p){let y=g.repository[p];y&&(l=ki.getCompiledRuleId(y,n,g.repository))}else l=ki.getCompiledRuleId(g.repository.$self,n,g.repository);break}}else l=ki.getCompiledRuleId(a,n,r);if(l!==-1){const c=n.getRule(l);let d=!1;if((c instanceof a9||c instanceof ZI||c instanceof l_)&&c.hasMissingPatterns&&c.patterns.length===0&&(d=!0),d)continue;o.push(l)}}return{patterns:o,hasMissingPatterns:(e?e.length:0)!==o.length}}},kb=class LX{source;ruleId;hasAnchor;hasBackReferences;_anchorCache;constructor(e,n){if(e&&typeof e=="string"){const r=e.length;let o=0,i=[],s=!1;for(let a=0;a<r;a++)if(e.charAt(a)==="\\"&&a+1<r){const c=e.charAt(a+1);c==="z"?(i.push(e.substring(o,a)),i.push("$(?!\\n)(?<!\\n)"),o=a+2):(c==="A"||c==="G")&&(s=!0),a++}this.hasAnchor=s,o===0?this.source=e:(i.push(e.substring(o,r)),this.source=i.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=n,typeof this.source=="string"?this.hasBackReferences=nLe.test(this.source):this.hasBackReferences=!1}clone(){return new LX(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,n){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let r=n.map(o=>e.substring(o.start,o.end));return s9.lastIndex=0,this.source.replace(s9,(o,i)=>AX(r[parseInt(i,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],n=[],r=[],o=[],i,s,a,l;for(i=0,s=this.source.length;i<s;i++)a=this.source.charAt(i),e[i]=a,n[i]=a,r[i]=a,o[i]=a,a==="\\"&&i+1<s&&(l=this.source.charAt(i+1),l==="A"?(e[i+1]="￿",n[i+1]="￿",r[i+1]="A",o[i+1]="A"):l==="G"?(e[i+1]="￿",n[i+1]="G",r[i+1]="￿",o[i+1]="G"):(e[i+1]=l,n[i+1]=l,r[i+1]=l,o[i+1]=l),i++);return{A0_G0:e.join(""),A0_G1:n.join(""),A1_G0:r.join(""),A1_G1:o.join("")}}resolveAnchors(e,n){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Tb=class{_items;_hasAnchors;_cached;_anchorCache;constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(t){this._items.push(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}unshift(t){this._items.unshift(t),this._hasAnchors=this._hasAnchors||t.hasAnchor}length(){return this._items.length}setSource(t,e){this._items[t].source!==e&&(this._disposeCaches(),this._items[t].setSource(e))}compile(t){if(!this._cached){let e=this._items.map(n=>n.source);this._cached=new l9(t,e,this._items.map(n=>n.ruleId))}return this._cached}compileAG(t,e,n){return this._hasAnchors?e?n?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A1_G0):n?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(t,e,n)),this._anchorCache.A0_G0):this.compile(t)}_resolveAnchors(t,e,n){let r=this._items.map(o=>o.resolveAnchors(e,n));return new l9(t,r,this._items.map(o=>o.ruleId))}},l9=class{constructor(t,e,n){this.regExps=e,this.rules=n,this.scanner=t.createOnigScanner(e)}scanner;dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const t=[];for(let e=0,n=this.rules.length;e<n;e++)t.push("   - "+this.rules[e]+": "+this.regExps[e]);return t.join(`
`)}findNextMatchSync(t,e,n){const r=this.scanner.findNextMatchSync(t,e,n);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}},m2=class{constructor(t,e){this.languageId=t,this.tokenType=e}},sLe=class JI{_defaultAttributes;_embeddedLanguagesMatcher;constructor(e,n){this._defaultAttributes=new m2(e,8),this._embeddedLanguagesMatcher=new aLe(Object.entries(n||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?JI._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}static _NULL_SCOPE_METADATA=new m2(0,0);_getBasicScopeAttributes=new RX(e=>{const n=this._scopeToLanguage(e),r=this._toStandardTokenType(e);return new m2(n,r)});_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const n=e.match(JI.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 8;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}static STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/},aLe=class{values;scopesRegExp;constructor(t){if(t.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(t);const e=t.map(([n,r])=>AX(n));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(t){if(!this.scopesRegExp)return;const e=t.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},c9=class{constructor(t,e){this.stack=t,this.stoppedEarly=e}};function VX(t,e,n,r,o,i,s,a){const l=e.content.length;let c=!1,d=-1;if(s){const g=lLe(t,e,n,r,o,i);o=g.stack,r=g.linePos,n=g.isFirstLine,d=g.anchorPosition}const f=Date.now();for(;!c;){if(a!==0&&Date.now()-f>a)return new c9(o,!0);p()}return new c9(o,!1);function p(){const g=cLe(t,e,n,r,o,d);if(!g){i.produce(o,l),c=!0;return}const y=g.captureIndices,b=g.matchedRuleId,_=y&&y.length>0?y[0].end>r:!1;if(b===rLe){const k=o.getRule(t);i.produce(o,y[0].start),o=o.withContentNameScopesList(o.nameScopesList),dv(t,e,n,o,i,k.endCaptures,y),i.produce(o,y[0].end);const M=o;if(o=o.parent,d=M.getAnchorPos(),!_&&M.getEnterPos()===r){o=M,i.produce(o,l),c=!0;return}}else{const k=t.getRule(b);i.produce(o,y[0].start);const M=o,N=k.getName(e.content,y),j=o.contentNameScopesList.pushAttributed(N,t);if(o=o.push(b,r,d,y[0].end===l,null,j,j),k instanceof ZI){const B=k;dv(t,e,n,o,i,B.beginCaptures,y),i.produce(o,y[0].end),d=y[0].end;const F=B.getContentName(e.content,y),D=j.pushAttributed(F,t);if(o=o.withContentNameScopesList(D),B.endHasBackReferences&&(o=o.withEndRule(B.getEndWithResolvedBackReferences(e.content,y))),!_&&M.hasSameRuleAs(o)){o=o.pop(),i.produce(o,l),c=!0;return}}else if(k instanceof l_){const B=k;dv(t,e,n,o,i,B.beginCaptures,y),i.produce(o,y[0].end),d=y[0].end;const F=B.getContentName(e.content,y),D=j.pushAttributed(F,t);if(o=o.withContentNameScopesList(D),B.whileHasBackReferences&&(o=o.withEndRule(B.getWhileWithResolvedBackReferences(e.content,y))),!_&&M.hasSameRuleAs(o)){o=o.pop(),i.produce(o,l),c=!0;return}}else if(dv(t,e,n,o,i,k.captures,y),i.produce(o,y[0].end),o=o.pop(),!_){o=o.safePop(),i.produce(o,l),c=!0;return}}y[0].end>r&&(r=y[0].end,n=!1)}}function lLe(t,e,n,r,o,i){let s=o.beginRuleCapturedEOL?0:-1;const a=[];for(let l=o;l;l=l.pop()){const c=l.getRule(t);c instanceof l_&&a.push({rule:c,stack:l})}for(let l=a.pop();l;l=a.pop()){const{ruleScanner:c,findOptions:d}=fLe(l.rule,t,l.stack.endRule,n,r===s),f=c.findNextMatchSync(e,r,d);if(f){if(f.ruleId!==PX){o=l.stack.pop();break}f.captureIndices&&f.captureIndices.length&&(i.produce(l.stack,f.captureIndices[0].start),dv(t,e,n,l.stack,i,l.rule.whileCaptures,f.captureIndices),i.produce(l.stack,f.captureIndices[0].end),s=f.captureIndices[0].end,f.captureIndices[0].end>r&&(r=f.captureIndices[0].end,n=!1))}else{o=l.stack.pop();break}}return{stack:o,linePos:r,anchorPosition:s,isFirstLine:n}}function cLe(t,e,n,r,o,i){const s=uLe(t,e,n,r,o,i),a=t.getInjections();if(a.length===0)return s;const l=dLe(a,t,e,n,r,o,i);if(!l)return s;if(!s)return l;const c=s.captureIndices[0].start,d=l.captureIndices[0].start;return d<c||l.priorityMatch&&d===c?l:s}function uLe(t,e,n,r,o,i){const s=o.getRule(t),{ruleScanner:a,findOptions:l}=jX(s,t,o.endRule,n,r===i),c=a.findNextMatchSync(e,r,l);return c?{captureIndices:c.captureIndices,matchedRuleId:c.ruleId}:null}function dLe(t,e,n,r,o,i,s){let a=Number.MAX_VALUE,l=null,c,d=0;const f=i.contentNameScopesList.getScopeNames();for(let p=0,g=t.length;p<g;p++){const y=t[p];if(!y.matcher(f))continue;const b=e.getRule(y.ruleId),{ruleScanner:_,findOptions:k}=jX(b,e,null,r,o===s),M=_.findNextMatchSync(n,o,k);if(!M)continue;const N=M.captureIndices[0].start;if(!(N>=a)&&(a=N,l=M.captureIndices,c=M.ruleId,d=y.priority,a===o))break}return l?{priorityMatch:d===-1,captureIndices:l,matchedRuleId:c}:null}function jX(t,e,n,r,o){return{ruleScanner:t.compileAG(e,n,r,o),findOptions:0}}function fLe(t,e,n,r,o){return{ruleScanner:t.compileWhileAG(e,n,r,o),findOptions:0}}function dv(t,e,n,r,o,i,s){if(i.length===0)return;const a=e.content,l=Math.min(i.length,s.length),c=[],d=s[0].end;for(let f=0;f<l;f++){const p=i[f];if(p===null)continue;const g=s[f];if(g.length===0)continue;if(g.start>d)break;for(;c.length>0&&c[c.length-1].endPos<=g.start;)o.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop();if(c.length>0?o.produceFromScopes(c[c.length-1].scopes,g.start):o.produce(r,g.start),p.retokenizeCapturedWithRuleId){const b=p.getName(a,s),_=r.contentNameScopesList.pushAttributed(b,t),k=p.getContentName(a,s),M=_.pushAttributed(k,t),N=r.push(p.retokenizeCapturedWithRuleId,g.start,-1,!1,null,_,M),j=t.createOnigString(a.substring(0,g.end));VX(t,j,n&&g.start===0,g.start,N,o,!1,0),NX(j);continue}const y=p.getName(a,s);if(y!==null){const _=(c.length>0?c[c.length-1].scopes:r.contentNameScopesList).pushAttributed(y,t);c.push(new hLe(_,g.end))}}for(;c.length>0;)o.produceFromScopes(c[c.length-1].scopes,c[c.length-1].endPos),c.pop()}var hLe=class{scopes;endPos;constructor(t,e){this.scopes=t,this.endPos=e}};function pLe(t,e,n,r,o,i,s,a){return new gLe(t,e,n,r,o,i,s,a)}function u9(t,e,n,r,o){const i=s_(e,c_),s=DX.getCompiledRuleId(n,r,o.repository);for(const a of i)t.push({debugSelector:e,matcher:a.matcher,ruleId:s,grammar:o,priority:a.priority})}function c_(t,e){if(e.length<t.length)return!1;let n=0;return t.every(r=>{for(let o=n;o<e.length;o++)if(mLe(e[o],r))return n=o+1,!0;return!1})}function mLe(t,e){if(!t)return!1;if(t===e)return!0;const n=e.length;return t.length>n&&t.substr(0,n)===e&&t[n]==="."}var gLe=class{constructor(t,e,n,r,o,i,s,a){if(this._rootScopeName=t,this.balancedBracketSelectors=i,this._onigLib=a,this._basicScopeAttributesProvider=new sLe(n,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=s,this._grammar=d9(e,null),this._injections=null,this._tokenTypeMatchers=[],o)for(const l of Object.keys(o)){const c=s_(l,c_);for(const d of c)this._tokenTypeMatchers.push({matcher:d.matcher,type:o[l]})}}_rootId;_lastRuleId;_ruleId2desc;_includedGrammars;_grammarRepository;_grammar;_injections;_basicScopeAttributesProvider;_tokenTypeMatchers;get themeProvider(){return this._grammarRepository}dispose(){for(const t of this._ruleId2desc)t&&t.dispose()}createOnigScanner(t){return this._onigLib.createOnigScanner(t)}createOnigString(t){return this._onigLib.createOnigString(t)}getMetadataForScope(t){return this._basicScopeAttributesProvider.getBasicScopeAttributes(t)}_collectInjections(){const t={lookup:o=>o===this._rootScopeName?this._grammar:this.getExternalGrammar(o),injections:o=>this._grammarRepository.injections(o)},e=[],n=this._rootScopeName,r=t.lookup(n);if(r){const o=r.injections;if(o)for(let s in o)u9(e,s,o[s],this,r);const i=this._grammarRepository.injections(n);i&&i.forEach(s=>{const a=this.getExternalGrammar(s);if(a){const l=a.injectionSelector;l&&u9(e,l,a,this,a)}})}return e.sort((o,i)=>o.priority-i.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(t){const e=++this._lastRuleId,n=t(e);return this._ruleId2desc[e]=n,n}getRule(t){return this._ruleId2desc[t]}getExternalGrammar(t,e){if(this._includedGrammars[t])return this._includedGrammars[t];if(this._grammarRepository){const n=this._grammarRepository.lookup(t);if(n)return this._includedGrammars[t]=d9(n,e&&e.$base),this._includedGrammars[t]}}tokenizeLine(t,e,n=0){const r=this._tokenize(t,e,!1,n);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(t,e,n=0){const r=this._tokenize(t,e,!0,n);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(t,e,n,r){this._rootId===-1&&(this._rootId=DX.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let o;if(!e||e===eM.NULL){o=!0;const c=this._basicScopeAttributesProvider.getDefaultAttributes(),d=this.themeProvider.getDefaults(),f=wg.set(0,c.languageId,c.tokenType,null,d.fontStyle,d.foregroundId,d.backgroundId),p=this.getRule(this._rootId).getName(null,null);let g;p?g=Lv.createRootAndLookUpScopeName(p,f,this):g=Lv.createRoot("unknown",f),e=new eM(null,this._rootId,-1,-1,!1,null,g,g)}else o=!1,e.reset();t=t+`
`;const i=this.createOnigString(t),s=i.content.length,a=new vLe(n,t,this._tokenTypeMatchers,this.balancedBracketSelectors),l=VX(this,i,o,0,e,a,!0,r);return NX(i),{lineLength:s,lineTokens:a,ruleStack:l.stack,stoppedEarly:l.stoppedEarly}}};function d9(t,e){return t=D4e(t),t.repository=t.repository||{},t.repository.$self={$vscodeTextmateLocation:t.$vscodeTextmateLocation,patterns:t.patterns,name:t.scopeName},t.repository.$base=e||t.repository.$self,t}var Lv=class Xl{constructor(e,n,r){this.parent=e,this.scopePath=n,this.tokenAttributes=r}static fromExtension(e,n){let r=e,o=e?.scopePath??null;for(const i of n)o=p2.push(o,i.scopeNames),r=new Xl(r,o,i.encodedTokenAttributes);return r}static createRoot(e,n){return new Xl(null,new p2(null,e),n)}static createRootAndLookUpScopeName(e,n,r){const o=r.getMetadataForScope(e),i=new p2(null,e),s=r.themeProvider.themeMatch(i),a=Xl.mergeAttributes(n,o,s);return new Xl(null,i,a)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Xl.equals(this,e)}static equals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.scopeName!==n.scopeName||e.tokenAttributes!==n.tokenAttributes)return!1;e=e.parent,n=n.parent}while(!0)}static mergeAttributes(e,n,r){let o=-1,i=0,s=0;return r!==null&&(o=r.fontStyle,i=r.foregroundId,s=r.backgroundId),wg.set(e,n.languageId,n.tokenType,null,o,i,s)}pushAttributed(e,n){if(e===null)return this;if(e.indexOf(" ")===-1)return Xl._pushAttributed(this,e,n);const r=e.split(/ /g);let o=this;for(const i of r)o=Xl._pushAttributed(o,i,n);return o}static _pushAttributed(e,n,r){const o=r.getMetadataForScope(n),i=e.scopePath.push(n),s=r.themeProvider.themeMatch(i),a=Xl.mergeAttributes(e.tokenAttributes,o,s);return new Xl(e,i,a)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const n=[];let r=this;for(;r&&r!==e;)n.push({encodedTokenAttributes:r.tokenAttributes,scopeNames:r.scopePath.getExtensionIfDefined(r.parent?.scopePath??null)}),r=r.parent;return r===e?n.reverse():void 0}},eM=class mh{constructor(e,n,r,o,i,s,a,l){this.parent=e,this.ruleId=n,this.beginRuleCapturedEOL=i,this.endRule=s,this.nameScopesList=a,this.contentNameScopesList=l,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=r,this._anchorPos=o}_stackElementBrand=void 0;static NULL=new mh(null,0,0,0,!1,null,null,null);_enterPos;_anchorPos;depth;equals(e){return e===null?!1:mh._equals(this,e)}static _equals(e,n){return e===n?!0:this._structuralEquals(e,n)?Lv.equals(e.contentNameScopesList,n.contentNameScopesList):!1}static _structuralEquals(e,n){do{if(e===n||!e&&!n)return!0;if(!e||!n||e.depth!==n.depth||e.ruleId!==n.ruleId||e.endRule!==n.endRule)return!1;e=e.parent,n=n.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){mh._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,n,r,o,i,s,a){return new mh(this,e,n,r,o,i,s,a)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,n){return this.parent&&(n=this.parent._writeString(e,n)),e[n++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,n}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new mh(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let n=this;for(;n&&n._enterPos===e._enterPos;){if(n.ruleId===e.ruleId)return!0;n=n.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,n){const r=Lv.fromExtension(e?.nameScopesList??null,n.nameScopesList);return new mh(e,n.ruleId,n.enterPos??-1,n.anchorPos??-1,n.beginRuleCapturedEOL,n.endRule,r,Lv.fromExtension(r,n.contentNameScopesList))}},yLe=class{balancedBracketScopes;unbalancedBracketScopes;allowAny=!1;constructor(t,e){this.balancedBracketScopes=t.flatMap(n=>n==="*"?(this.allowAny=!0,[]):s_(n,c_).map(r=>r.matcher)),this.unbalancedBracketScopes=e.flatMap(n=>s_(n,c_).map(r=>r.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(t){for(const e of this.unbalancedBracketScopes)if(e(t))return!1;for(const e of this.balancedBracketScopes)if(e(t))return!0;return this.allowAny}},vLe=class{constructor(t,e,n,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=t,this._tokenTypeOverrides=n,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}_emitBinaryTokens;_lineText;_tokens;_binaryTokens;_lastTokenEndIndex;_tokenTypeOverrides;produce(t,e){this.produceFromScopes(t.contentNameScopesList,e)}produceFromScopes(t,e){if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let r=t?.tokenAttributes??0,o=!1;if(this.balancedBracketSelectors?.matchesAlways&&(o=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const i=t?.getScopeNames()??[];for(const s of this._tokenTypeOverrides)s.matcher(i)&&(r=wg.set(r,0,s.type,null,-1,0,0));this.balancedBracketSelectors&&(o=this.balancedBracketSelectors.match(i))}if(o&&(r=wg.set(r,0,8,o,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===r){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(r),this._lastTokenEndIndex=e;return}const n=t?.getScopeNames()??[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:n}),this._lastTokenEndIndex=e}getResult(t,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(t,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(t,e),this._binaryTokens[this._binaryTokens.length-2]=0);const n=new Uint32Array(this._binaryTokens.length);for(let r=0,o=this._binaryTokens.length;r<o;r++)n[r]=this._binaryTokens[r];return n}},bLe=class{constructor(t,e){this._onigLib=e,this._theme=t}_grammars=new Map;_rawGrammars=new Map;_injectionGrammars=new Map;_theme;dispose(){for(const t of this._grammars.values())t.dispose()}setTheme(t){this._theme=t}getColorMap(){return this._theme.getColorMap()}addGrammar(t,e){this._rawGrammars.set(t.scopeName,t),e&&this._injectionGrammars.set(t.scopeName,e)}lookup(t){return this._rawGrammars.get(t)}injections(t){return this._injectionGrammars.get(t)}getDefaults(){return this._theme.getDefaults()}themeMatch(t){return this._theme.match(t)}grammarForScopeName(t,e,n,r,o){if(!this._grammars.has(t)){let i=this._rawGrammars.get(t);if(!i)return null;this._grammars.set(t,pLe(t,i,e,n,r,o,this,this._onigLib))}return this._grammars.get(t)}},wLe=class{_options;_syncRegistry;_ensureGrammarCache;constructor(e){this._options=e,this._syncRegistry=new bLe(i_.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,n){this._syncRegistry.setTheme(i_.createFromRawTheme(e,n))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,n,r){return this.loadGrammarWithConfiguration(e,n,{embeddedLanguages:r})}loadGrammarWithConfiguration(e,n,r){return this._loadGrammar(e,n,r.embeddedLanguages,r.tokenTypes,new yLe(r.balancedBracketSelectors||[],r.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}_loadGrammar(e,n,r,o,i){const s=new Y4e(this._syncRegistry,e);for(;s.Q.length>0;)s.Q.map(a=>this._loadSingleGrammar(a.scopeName)),s.processQueue();return this._grammarForScopeName(e,n,r,o,i)}_loadSingleGrammar(e){this._ensureGrammarCache.has(e)||(this._doLoadSingleGrammar(e),this._ensureGrammarCache.set(e,!0))}_doLoadSingleGrammar(e){const n=this._options.loadGrammar(e);if(n){const r=typeof this._options.getInjections=="function"?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(n,r)}}addGrammar(e,n=[],r=0,o=null){return this._syncRegistry.addGrammar(e,n),this._grammarForScopeName(e.scopeName,r,o)}_grammarForScopeName(e,n=0,r=null,o=null,i=null){return this._syncRegistry.grammarForScopeName(e,n,r,o,i)}},tM=eM.NULL;const CLe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];class E0{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}E0.prototype.normal={};E0.prototype.property={};E0.prototype.space=void 0;function BX(t,e){const n={},r={};for(const o of t)Object.assign(n,o.property),Object.assign(r,o.normal);return new E0(n,r,e)}function nM(t){return t.toLowerCase()}class Is{constructor(e,n){this.attribute=n,this.property=e}}Is.prototype.attribute="";Is.prototype.booleanish=!1;Is.prototype.boolean=!1;Is.prototype.commaOrSpaceSeparated=!1;Is.prototype.commaSeparated=!1;Is.prototype.defined=!1;Is.prototype.mustUseProperty=!1;Is.prototype.number=!1;Is.prototype.overloadedBoolean=!1;Is.prototype.property="";Is.prototype.spaceSeparated=!1;Is.prototype.space=void 0;let SLe=0;const rn=Cp(),mo=Cp(),rM=Cp(),Qe=Cp(),wr=Cp(),Gm=Cp(),Hs=Cp();function Cp(){return 2**++SLe}const oM=Object.freeze(Object.defineProperty({__proto__:null,boolean:rn,booleanish:mo,commaOrSpaceSeparated:Hs,commaSeparated:Gm,number:Qe,overloadedBoolean:rM,spaceSeparated:wr},Symbol.toStringTag,{value:"Module"})),g2=Object.keys(oM);class yD extends Is{constructor(e,n,r,o){let i=-1;if(super(e,n),f9(this,"space",o),typeof r=="number")for(;++i<g2.length;){const s=g2[i];f9(this,g2[i],(r&oM[s])===oM[s])}}}yD.prototype.defined=!0;function f9(t,e,n){n&&(t[e]=n)}function ey(t){const e={},n={};for(const[r,o]of Object.entries(t.properties)){const i=new yD(r,t.transform(t.attributes||{},r),o,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),e[r]=i,n[nM(r)]=r,n[nM(i.attribute)]=r}return new E0(e,n,t.space)}const $X=ey({properties:{ariaActiveDescendant:null,ariaAtomic:mo,ariaAutoComplete:null,ariaBusy:mo,ariaChecked:mo,ariaColCount:Qe,ariaColIndex:Qe,ariaColSpan:Qe,ariaControls:wr,ariaCurrent:null,ariaDescribedBy:wr,ariaDetails:null,ariaDisabled:mo,ariaDropEffect:wr,ariaErrorMessage:null,ariaExpanded:mo,ariaFlowTo:wr,ariaGrabbed:mo,ariaHasPopup:null,ariaHidden:mo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:wr,ariaLevel:Qe,ariaLive:null,ariaModal:mo,ariaMultiLine:mo,ariaMultiSelectable:mo,ariaOrientation:null,ariaOwns:wr,ariaPlaceholder:null,ariaPosInSet:Qe,ariaPressed:mo,ariaReadOnly:mo,ariaRelevant:null,ariaRequired:mo,ariaRoleDescription:wr,ariaRowCount:Qe,ariaRowIndex:Qe,ariaRowSpan:Qe,ariaSelected:mo,ariaSetSize:Qe,ariaSort:null,ariaValueMax:Qe,ariaValueMin:Qe,ariaValueNow:Qe,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function FX(t,e){return e in t?t[e]:e}function HX(t,e){return FX(t,e.toLowerCase())}const _Le=ey({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Gm,acceptCharset:wr,accessKey:wr,action:null,allow:null,allowFullScreen:rn,allowPaymentRequest:rn,allowUserMedia:rn,alt:null,as:null,async:rn,autoCapitalize:null,autoComplete:wr,autoFocus:rn,autoPlay:rn,blocking:wr,capture:null,charSet:null,checked:rn,cite:null,className:wr,cols:Qe,colSpan:null,content:null,contentEditable:mo,controls:rn,controlsList:wr,coords:Qe|Gm,crossOrigin:null,data:null,dateTime:null,decoding:null,default:rn,defer:rn,dir:null,dirName:null,disabled:rn,download:rM,draggable:mo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:rn,formTarget:null,headers:wr,height:Qe,hidden:rM,high:Qe,href:null,hrefLang:null,htmlFor:wr,httpEquiv:wr,id:null,imageSizes:null,imageSrcSet:null,inert:rn,inputMode:null,integrity:null,is:null,isMap:rn,itemId:null,itemProp:wr,itemRef:wr,itemScope:rn,itemType:wr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:rn,low:Qe,manifest:null,max:null,maxLength:Qe,media:null,method:null,min:null,minLength:Qe,multiple:rn,muted:rn,name:null,nonce:null,noModule:rn,noValidate:rn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:rn,optimum:Qe,pattern:null,ping:wr,placeholder:null,playsInline:rn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:rn,referrerPolicy:null,rel:wr,required:rn,reversed:rn,rows:Qe,rowSpan:Qe,sandbox:wr,scope:null,scoped:rn,seamless:rn,selected:rn,shadowRootClonable:rn,shadowRootDelegatesFocus:rn,shadowRootMode:null,shape:null,size:Qe,sizes:null,slot:null,span:Qe,spellCheck:mo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Qe,step:null,style:null,tabIndex:Qe,target:null,title:null,translate:null,type:null,typeMustMatch:rn,useMap:null,value:mo,width:Qe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:wr,axis:null,background:null,bgColor:null,border:Qe,borderColor:null,bottomMargin:Qe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:rn,declare:rn,event:null,face:null,frame:null,frameBorder:null,hSpace:Qe,leftMargin:Qe,link:null,longDesc:null,lowSrc:null,marginHeight:Qe,marginWidth:Qe,noResize:rn,noHref:rn,noShade:rn,noWrap:rn,object:null,profile:null,prompt:null,rev:null,rightMargin:Qe,rules:null,scheme:null,scrolling:mo,standby:null,summary:null,text:null,topMargin:Qe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Qe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:rn,disableRemotePlayback:rn,prefix:null,property:null,results:Qe,security:null,unselectable:null},space:"html",transform:HX}),xLe=ey({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Hs,accentHeight:Qe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Qe,amplitude:Qe,arabicForm:null,ascent:Qe,attributeName:null,attributeType:null,azimuth:Qe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Qe,by:null,calcMode:null,capHeight:Qe,className:wr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Qe,diffuseConstant:Qe,direction:null,display:null,dur:null,divisor:Qe,dominantBaseline:null,download:rn,dx:null,dy:null,edgeMode:null,editable:null,elevation:Qe,enableBackground:null,end:null,event:null,exponent:Qe,externalResourcesRequired:null,fill:null,fillOpacity:Qe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Gm,g2:Gm,glyphName:Gm,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Qe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Qe,horizOriginX:Qe,horizOriginY:Qe,id:null,ideographic:Qe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Qe,k:Qe,k1:Qe,k2:Qe,k3:Qe,k4:Qe,kernelMatrix:Hs,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Qe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Qe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Qe,overlineThickness:Qe,paintOrder:null,panose1:null,path:null,pathLength:Qe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:wr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Qe,pointsAtY:Qe,pointsAtZ:Qe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Hs,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Hs,rev:Hs,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Hs,requiredFeatures:Hs,requiredFonts:Hs,requiredFormats:Hs,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Qe,specularExponent:Qe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Qe,strikethroughThickness:Qe,string:null,stroke:null,strokeDashArray:Hs,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Qe,strokeOpacity:Qe,strokeWidth:null,style:null,surfaceScale:Qe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Hs,tabIndex:Qe,tableValues:null,target:null,targetX:Qe,targetY:Qe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Hs,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Qe,underlineThickness:Qe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Qe,values:null,vAlphabetic:Qe,vMathematical:Qe,vectorEffect:null,vHanging:Qe,vIdeographic:Qe,version:null,vertAdvY:Qe,vertOriginX:Qe,vertOriginY:Qe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Qe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:FX}),UX=ey({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),zX=ey({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:HX}),GX=ey({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),ELe=/[A-Z]/g,h9=/-[a-z]/g,kLe=/^data[-\w.:]+$/i;function TLe(t,e){const n=nM(e);let r=e,o=Is;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&kLe.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(h9,RLe);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!h9.test(i)){let s=i.replace(ELe,ALe);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}o=yD}return new o(r,e)}function ALe(t){return"-"+t.toLowerCase()}function RLe(t){return t.charAt(1).toUpperCase()}const ILe=BX([$X,_Le,UX,zX,GX],"html"),qX=BX([$X,xLe,UX,zX,GX],"svg"),p9={}.hasOwnProperty;function MLe(t,e){const n=e||{};function r(o,...i){let s=r.invalid;const a=r.handlers;if(o&&p9.call(o,t)){const l=String(o[t]);s=p9.call(a,l)?a[l]:r.unknown}if(s)return s.call(this,o,...i)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const NLe=/["&'<>`]/g,OLe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,PLe=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,DLe=/[|\\{}()[\]^$+*?.]/g,m9=new WeakMap;function LLe(t,e){if(t=t.replace(e.subset?VLe(e.subset):NLe,r),e.subset||e.escapeOnly)return t;return t.replace(OLe,n).replace(PLe,r);function n(o,i,s){return e.format((o.charCodeAt(0)-55296)*1024+o.charCodeAt(1)-56320+65536,s.charCodeAt(i+2),e)}function r(o,i,s){return e.format(o.charCodeAt(0),s.charCodeAt(i+1),e)}}function VLe(t){let e=m9.get(t);return e||(e=jLe(t),m9.set(t,e)),e}function jLe(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(DLe,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}const BLe=/[\dA-Fa-f]/;function $Le(t,e,n){const r="&#x"+t.toString(16).toUpperCase();return n&&e&&!BLe.test(String.fromCharCode(e))?r:r+";"}const FLe=/\d/;function HLe(t,e,n){const r="&#"+String(t);return n&&e&&!FLe.test(String.fromCharCode(e))?r:r+";"}const ULe=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],y2={nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",fnof:"ƒ",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",bull:"•",hellip:"…",prime:"′",Prime:"″",oline:"‾",frasl:"⁄",weierp:"℘",image:"ℑ",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",permil:"‰",lsaquo:"‹",rsaquo:"›",euro:"€"},zLe=["cent","copy","divide","gt","lt","not","para","times"],KX={}.hasOwnProperty,iM={};let Sw;for(Sw in y2)KX.call(y2,Sw)&&(iM[y2[Sw]]=Sw);const GLe=/[^\dA-Za-z]/;function qLe(t,e,n,r){const o=String.fromCharCode(t);if(KX.call(iM,o)){const i=iM[o],s="&"+i;return n&&ULe.includes(i)&&!zLe.includes(i)&&(!r||e&&e!==61&&GLe.test(String.fromCharCode(e)))?s:s+";"}return""}function KLe(t,e,n){let r=$Le(t,e,n.omitOptionalSemicolons),o;if((n.useNamedReferences||n.useShortestReferences)&&(o=qLe(t,e,n.omitOptionalSemicolons,n.attribute)),(n.useShortestReferences||!o)&&n.useShortestReferences){const i=HLe(t,e,n.omitOptionalSemicolons);i.length<r.length&&(r=i)}return o&&(!n.useShortestReferences||o.length<r.length)?o:r}function qm(t,e){return LLe(t,Object.assign({format:KLe},e))}const WLe=/^>|^->|<!--|-->|--!>|<!-$/g,YLe=[">"],XLe=["<",">"];function QLe(t,e,n,r){return r.settings.bogusComments?"<?"+qm(t.value,Object.assign({},r.settings.characterReferences,{subset:YLe}))+">":"<!--"+t.value.replace(WLe,o)+"-->";function o(i){return qm(i,Object.assign({},r.settings.characterReferences,{subset:XLe}))}}function ZLe(t,e,n,r){return"<!"+(r.settings.upperDoctype?"DOCTYPE":"doctype")+(r.settings.tightDoctype?"":" ")+"html>"}function g9(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,o=n.indexOf(e);for(;o!==-1;)r++,o=n.indexOf(e,o+e.length);return r}function H9e(t){const e=[],n=String(t||"");let r=n.indexOf(","),o=0,i=!1;for(;!i;){r===-1&&(r=n.length,i=!0);const s=n.slice(o,r).trim();(s||!i)&&e.push(s),o=r+1,r=n.indexOf(",",o)}return e}function JLe(t,e){const n=e||{};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}function U9e(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function e3e(t){return t.join(" ").trim()}const t3e=/[ \t\n\f\r]/g;function vD(t){return typeof t=="object"?t.type==="text"?y9(t.value):!1:y9(t)}function y9(t){return t.replace(t3e,"")===""}const Mo=YX(1),WX=YX(-1),n3e=[];function YX(t){return e;function e(n,r,o){const i=n?n.children:n3e;let s=(r||0)+t,a=i[s];if(!o)for(;a&&vD(a);)s+=t,a=i[s];return a}}const r3e={}.hasOwnProperty;function XX(t){return e;function e(n,r,o){return r3e.call(t,n.tagName)&&t[n.tagName](n,r,o)}}const bD=XX({body:i3e,caption:v2,colgroup:v2,dd:c3e,dt:l3e,head:v2,html:o3e,li:a3e,optgroup:u3e,option:d3e,p:s3e,rp:v9,rt:v9,tbody:h3e,td:b9,tfoot:p3e,th:b9,thead:f3e,tr:m3e});function v2(t,e,n){const r=Mo(n,e,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&vD(r.value.charAt(0)))}function o3e(t,e,n){const r=Mo(n,e);return!r||r.type!=="comment"}function i3e(t,e,n){const r=Mo(n,e);return!r||r.type!=="comment"}function s3e(t,e,n){const r=Mo(n,e);return r?r.type==="element"&&(r.tagName==="address"||r.tagName==="article"||r.tagName==="aside"||r.tagName==="blockquote"||r.tagName==="details"||r.tagName==="div"||r.tagName==="dl"||r.tagName==="fieldset"||r.tagName==="figcaption"||r.tagName==="figure"||r.tagName==="footer"||r.tagName==="form"||r.tagName==="h1"||r.tagName==="h2"||r.tagName==="h3"||r.tagName==="h4"||r.tagName==="h5"||r.tagName==="h6"||r.tagName==="header"||r.tagName==="hgroup"||r.tagName==="hr"||r.tagName==="main"||r.tagName==="menu"||r.tagName==="nav"||r.tagName==="ol"||r.tagName==="p"||r.tagName==="pre"||r.tagName==="section"||r.tagName==="table"||r.tagName==="ul"):!n||!(n.type==="element"&&(n.tagName==="a"||n.tagName==="audio"||n.tagName==="del"||n.tagName==="ins"||n.tagName==="map"||n.tagName==="noscript"||n.tagName==="video"))}function a3e(t,e,n){const r=Mo(n,e);return!r||r.type==="element"&&r.tagName==="li"}function l3e(t,e,n){const r=Mo(n,e);return!!(r&&r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd"))}function c3e(t,e,n){const r=Mo(n,e);return!r||r.type==="element"&&(r.tagName==="dt"||r.tagName==="dd")}function v9(t,e,n){const r=Mo(n,e);return!r||r.type==="element"&&(r.tagName==="rp"||r.tagName==="rt")}function u3e(t,e,n){const r=Mo(n,e);return!r||r.type==="element"&&r.tagName==="optgroup"}function d3e(t,e,n){const r=Mo(n,e);return!r||r.type==="element"&&(r.tagName==="option"||r.tagName==="optgroup")}function f3e(t,e,n){const r=Mo(n,e);return!!(r&&r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot"))}function h3e(t,e,n){const r=Mo(n,e);return!r||r.type==="element"&&(r.tagName==="tbody"||r.tagName==="tfoot")}function p3e(t,e,n){return!Mo(n,e)}function m3e(t,e,n){const r=Mo(n,e);return!r||r.type==="element"&&r.tagName==="tr"}function b9(t,e,n){const r=Mo(n,e);return!r||r.type==="element"&&(r.tagName==="td"||r.tagName==="th")}const g3e=XX({body:b3e,colgroup:w3e,head:v3e,html:y3e,tbody:C3e});function y3e(t){const e=Mo(t,-1);return!e||e.type!=="comment"}function v3e(t){const e=new Set;for(const r of t.children)if(r.type==="element"&&(r.tagName==="base"||r.tagName==="title")){if(e.has(r.tagName))return!1;e.add(r.tagName)}const n=t.children[0];return!n||n.type==="element"}function b3e(t){const e=Mo(t,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&vD(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function w3e(t,e,n){const r=WX(n,e),o=Mo(t,-1,!0);return n&&r&&r.type==="element"&&r.tagName==="colgroup"&&bD(r,n.children.indexOf(r),n)?!1:!!(o&&o.type==="element"&&o.tagName==="col")}function C3e(t,e,n){const r=WX(n,e),o=Mo(t,-1);return n&&r&&r.type==="element"&&(r.tagName==="thead"||r.tagName==="tbody")&&bD(r,n.children.indexOf(r),n)?!1:!!(o&&o.type==="element"&&o.tagName==="tr")}const _w={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function S3e(t,e,n,r){const o=r.schema,i=o.space==="svg"?!1:r.settings.omitOptionalTags;let s=o.space==="svg"?r.settings.closeEmptyElements:r.settings.voids.includes(t.tagName.toLowerCase());const a=[];let l;o.space==="html"&&t.tagName==="svg"&&(r.schema=qX);const c=_3e(r,t.properties),d=r.all(o.space==="html"&&t.tagName==="template"?t.content:t);return r.schema=o,d&&(s=!1),(c||!i||!g3e(t,e,n))&&(a.push("<",t.tagName,c?" "+c:""),s&&(o.space==="svg"||r.settings.closeSelfClosing)&&(l=c.charAt(c.length-1),(!r.settings.tightSelfClosing||l==="/"||l&&l!=='"'&&l!=="'")&&a.push(" "),a.push("/")),a.push(">")),a.push(d),!s&&(!i||!bD(t,e,n))&&a.push("</"+t.tagName+">"),a.join("")}function _3e(t,e){const n=[];let r=-1,o;if(e){for(o in e)if(e[o]!==null&&e[o]!==void 0){const i=x3e(t,o,e[o]);i&&n.push(i)}}for(;++r<n.length;){const i=t.settings.tightAttributes?n[r].charAt(n[r].length-1):void 0;r!==n.length-1&&i!=='"'&&i!=="'"&&(n[r]+=" ")}return n.join("")}function x3e(t,e,n){const r=TLe(t.schema,e),o=t.settings.allowParseErrors&&t.schema.space==="html"?0:1,i=t.settings.allowDangerousCharacters?0:1;let s=t.quote,a;if(r.overloadedBoolean&&(n===r.attribute||n==="")?n=!0:(r.boolean||r.overloadedBoolean)&&(typeof n!="string"||n===r.attribute||n==="")&&(n=!!n),n==null||n===!1||typeof n=="number"&&Number.isNaN(n))return"";const l=qm(r.attribute,Object.assign({},t.settings.characterReferences,{subset:_w.name[o][i]}));return n===!0||(n=Array.isArray(n)?(r.commaSeparated?JLe:e3e)(n,{padLeft:!t.settings.tightCommaSeparatedLists}):String(n),t.settings.collapseEmptyAttributes&&!n)?l:(t.settings.preferUnquoted&&(a=qm(n,Object.assign({},t.settings.characterReferences,{attribute:!0,subset:_w.unquoted[o][i]}))),a!==n&&(t.settings.quoteSmart&&g9(n,s)>g9(n,t.alternative)&&(s=t.alternative),a=s+qm(n,Object.assign({},t.settings.characterReferences,{subset:(s==="'"?_w.single:_w.double)[o][i],attribute:!0}))+s),l+(a&&"="+a))}const E3e=["<","&"];function QX(t,e,n,r){return n&&n.type==="element"&&(n.tagName==="script"||n.tagName==="style")?t.value:qm(t.value,Object.assign({},r.settings.characterReferences,{subset:E3e}))}function k3e(t,e,n,r){return r.settings.allowDangerousHtml?t.value:QX(t,e,n,r)}function T3e(t,e,n,r){return r.all(t)}const A3e=MLe("type",{invalid:R3e,unknown:I3e,handlers:{comment:QLe,doctype:ZLe,element:S3e,raw:k3e,root:T3e,text:QX}});function R3e(t){throw new Error("Expected node, not `"+t+"`")}function I3e(t){const e=t;throw new Error("Cannot compile unknown node `"+e.type+"`")}const M3e={},N3e={},O3e=[];function P3e(t,e){const n=e||M3e,r=n.quote||'"',o=r==='"'?"'":'"';if(r!=='"'&&r!=="'")throw new Error("Invalid quote `"+r+"`, expected `'` or `\"`");return{one:D3e,all:L3e,settings:{omitOptionalTags:n.omitOptionalTags||!1,allowParseErrors:n.allowParseErrors||!1,allowDangerousCharacters:n.allowDangerousCharacters||!1,quoteSmart:n.quoteSmart||!1,preferUnquoted:n.preferUnquoted||!1,tightAttributes:n.tightAttributes||!1,upperDoctype:n.upperDoctype||!1,tightDoctype:n.tightDoctype||!1,bogusComments:n.bogusComments||!1,tightCommaSeparatedLists:n.tightCommaSeparatedLists||!1,tightSelfClosing:n.tightSelfClosing||!1,collapseEmptyAttributes:n.collapseEmptyAttributes||!1,allowDangerousHtml:n.allowDangerousHtml||!1,voids:n.voids||CLe,characterReferences:n.characterReferences||N3e,closeSelfClosing:n.closeSelfClosing||!1,closeEmptyElements:n.closeEmptyElements||!1},schema:n.space==="svg"?qX:ILe,quote:r,alternative:o}.one(Array.isArray(t)?{type:"root",children:t}:t,void 0,void 0)}function D3e(t,e,n){return A3e(t,e,n,this)}function L3e(t){const e=[],n=t&&t.children||O3e;let r=-1;for(;++r<n.length;)e[r]=this.one(n[r],r,t);return e.join("")}function u_(t,e){const n=typeof t=="string"?{}:{...t.colorReplacements},r=typeof t=="string"?t:t.name;for(const[o,i]of Object.entries(e?.colorReplacements||{}))typeof i=="string"?n[o]=i:o===r&&Object.assign(n,i);return n}function of(t,e){return t&&(e?.[t?.toLowerCase()]||t)}function V3e(t){return Array.isArray(t)?t:[t]}async function ZX(t){return Promise.resolve(typeof t=="function"?t():t).then(e=>e.default||e)}function wD(t){return!t||["plaintext","txt","text","plain"].includes(t)}function JX(t){return t==="ansi"||wD(t)}function CD(t){return t==="none"}function eQ(t){return CD(t)}function tQ(t,e){if(!e)return t;t.properties||={},t.properties.class||=[],typeof t.properties.class=="string"&&(t.properties.class=t.properties.class.split(/\s+/g)),Array.isArray(t.properties.class)||(t.properties.class=[]);const n=Array.isArray(e)?e:e.split(/\s+/g);for(const r of n)r&&!t.properties.class.includes(r)&&t.properties.class.push(r);return t}function yE(t,e=!1){const n=t.split(/(\r?\n)/g);let r=0;const o=[];for(let i=0;i<n.length;i+=2){const s=e?n[i]+(n[i+1]||""):n[i];o.push([s,r]),r+=n[i].length,r+=n[i+1]?.length||0}return o}function j3e(t){const e=yE(t,!0).map(([o])=>o);function n(o){if(o===t.length)return{line:e.length-1,character:e[e.length-1].length};let i=o,s=0;for(const a of e){if(i<a.length)break;i-=a.length,s++}return{line:s,character:i}}function r(o,i){let s=0;for(let a=0;a<o;a++)s+=e[a].length;return s+=i,s}return{lines:e,indexToPos:n,posToIndex:r}}const SD="light-dark()",B3e=["color","background-color"];function $3e(t,e){let n=0;const r=[];for(const o of e)o>n&&r.push({...t,content:t.content.slice(n,o),offset:t.offset+n}),n=o;return n<t.content.length&&r.push({...t,content:t.content.slice(n),offset:t.offset+n}),r}function F3e(t,e){const n=Array.from(e instanceof Set?e:new Set(e)).sort((r,o)=>r-o);return n.length?t.map(r=>r.flatMap(o=>{const i=n.filter(s=>o.offset<s&&s<o.offset+o.content.length).map(s=>s-o.offset).sort((s,a)=>s-a);return i.length?$3e(o,i):o})):t}function H3e(t,e,n,r,o="css-vars"){const i={content:t.content,explanation:t.explanation,offset:t.offset},s=e.map(d=>d_(t.variants[d])),a=new Set(s.flatMap(d=>Object.keys(d))),l={},c=(d,f)=>{const p=f==="color"?"":f==="background-color"?"-bg":`-${f}`;return n+e[d]+(f==="color"?"":p)};return s.forEach((d,f)=>{for(const p of a){const g=d[p]||"inherit";if(f===0&&r&&B3e.includes(p))if(r===SD&&s.length>1){const y=e.findIndex(M=>M==="light"),b=e.findIndex(M=>M==="dark");if(y===-1||b===-1)throw new yo('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const _=s[y][p]||"inherit",k=s[b][p]||"inherit";l[p]=`light-dark(${_}, ${k})`,o==="css-vars"&&(l[c(f,p)]=g)}else l[p]=g;else o==="css-vars"&&(l[c(f,p)]=g)}}),i.htmlStyle=l,i}function d_(t){const e={};if(t.color&&(e.color=t.color),t.bgColor&&(e["background-color"]=t.bgColor),t.fontStyle){t.fontStyle&Oi.Italic&&(e["font-style"]="italic"),t.fontStyle&Oi.Bold&&(e["font-weight"]="bold");const n=[];t.fontStyle&Oi.Underline&&n.push("underline"),t.fontStyle&Oi.Strikethrough&&n.push("line-through"),n.length&&(e["text-decoration"]=n.join(" "))}return e}function sM(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const nQ=new WeakMap;function vE(t,e){nQ.set(t,e)}function Ab(t){return nQ.get(t)}class ty{_stacks={};lang;get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(e,n){return new ty(Object.fromEntries(V3e(n).map(r=>[r,tM])),e)}constructor(...e){if(e.length===2){const[n,r]=e;this.lang=r,this._stacks=n}else{const[n,r,o]=e;this.lang=r,this._stacks={[o]:n}}}getInternalStack(e=this.theme){return this._stacks[e]}getScopes(e=this.theme){return U3e(this._stacks[e])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function U3e(t){const e=[],n=new Set;function r(o){if(n.has(o))return;n.add(o);const i=o?.nameScopesList?.scopeName;i&&e.push(i),o.parent&&r(o.parent)}return r(t),e}function z3e(t,e){if(!(t instanceof ty))throw new yo("Invalid grammar state");return t.getInternalStack(e)}function G3e(){const t=new WeakMap;function e(n){if(!t.has(n.meta)){let r=function(s){if(typeof s=="number"){if(s<0||s>n.source.length)throw new yo(`Invalid decoration offset: ${s}. Code length: ${n.source.length}`);return{...o.indexToPos(s),offset:s}}else{const a=o.lines[s.line];if(a===void 0)throw new yo(`Invalid decoration position ${JSON.stringify(s)}. Lines length: ${o.lines.length}`);if(s.character<0||s.character>a.length)throw new yo(`Invalid decoration position ${JSON.stringify(s)}. Line ${s.line} length: ${a.length}`);return{...s,offset:o.posToIndex(s.line,s.character)}}};const o=j3e(n.source),i=(n.options.decorations||[]).map(s=>({...s,start:r(s.start),end:r(s.end)}));q3e(i),t.set(n.meta,{decorations:i,converter:o,source:n.source})}return t.get(n.meta)}return{name:"shiki:decorations",tokens(n){if(!this.options.decorations?.length)return;const o=e(this).decorations.flatMap(s=>[s.start.offset,s.end.offset]);return F3e(n,o)},code(n){if(!this.options.decorations?.length)return;const r=e(this),o=Array.from(n.children).filter(d=>d.type==="element"&&d.tagName==="span");if(o.length!==r.converter.lines.length)throw new yo(`Number of lines in code element (${o.length}) does not match the number of lines in the source (${r.converter.lines.length}). Failed to apply decorations.`);function i(d,f,p,g){const y=o[d];let b="",_=-1,k=-1;if(f===0&&(_=0),p===0&&(k=0),p===Number.POSITIVE_INFINITY&&(k=y.children.length),_===-1||k===-1)for(let N=0;N<y.children.length;N++)b+=rQ(y.children[N]),_===-1&&b.length===f&&(_=N+1),k===-1&&b.length===p&&(k=N+1);if(_===-1)throw new yo(`Failed to find start index for decoration ${JSON.stringify(g.start)}`);if(k===-1)throw new yo(`Failed to find end index for decoration ${JSON.stringify(g.end)}`);const M=y.children.slice(_,k);if(!g.alwaysWrap&&M.length===y.children.length)a(y,g,"line");else if(!g.alwaysWrap&&M.length===1&&M[0].type==="element")a(M[0],g,"token");else{const N={type:"element",tagName:"span",properties:{},children:M};a(N,g,"wrapper"),y.children.splice(_,M.length,N)}}function s(d,f){o[d]=a(o[d],f,"line")}function a(d,f,p){const g=f.properties||{},y=f.transform||(b=>b);return d.tagName=f.tagName||"span",d.properties={...d.properties,...g,class:d.properties.class},f.properties?.class&&tQ(d,f.properties.class),d=y(d,p)||d,d}const l=[],c=r.decorations.sort((d,f)=>f.start.offset-d.start.offset||d.end.offset-f.end.offset);for(const d of c){const{start:f,end:p}=d;if(f.line===p.line)i(f.line,f.character,p.character,d);else if(f.line<p.line){i(f.line,f.character,Number.POSITIVE_INFINITY,d);for(let g=f.line+1;g<p.line;g++)l.unshift(()=>s(g,d));i(p.line,0,p.character,d)}}l.forEach(d=>d())}}}function q3e(t){for(let e=0;e<t.length;e++){const n=t[e];if(n.start.offset>n.end.offset)throw new yo(`Invalid decoration range: ${JSON.stringify(n.start)} - ${JSON.stringify(n.end)}`);for(let r=e+1;r<t.length;r++){const o=t[r],i=n.start.offset<=o.start.offset&&o.start.offset<n.end.offset,s=n.start.offset<o.end.offset&&o.end.offset<=n.end.offset,a=o.start.offset<=n.start.offset&&n.start.offset<o.end.offset,l=o.start.offset<n.end.offset&&n.end.offset<=o.end.offset;if(i||s||a||l){if(i&&s||a&&l||a&&n.start.offset===n.end.offset||s&&o.start.offset===o.end.offset)continue;throw new yo(`Decorations ${JSON.stringify(n.start)} and ${JSON.stringify(o.start)} intersect.`)}}}}function rQ(t){return t.type==="text"?t.value:t.type==="element"?t.children.map(rQ).join(""):""}const K3e=[G3e()];function f_(t){return[...t.transformers||[],...K3e]}var Rh=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],b2={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function W3e(t,e){const n=t.indexOf("\x1B",e);if(n!==-1&&t[n+1]==="["){const r=t.indexOf("m",n);if(r!==-1)return{sequence:t.substring(n+2,r).split(";"),startPosition:n,position:r+1}}return{position:t.length}}function w9(t){const e=t.shift();if(e==="2"){const n=t.splice(0,3).map(r=>Number.parseInt(r));return n.length!==3||n.some(r=>Number.isNaN(r))?void 0:{type:"rgb",rgb:n}}else if(e==="5"){const n=t.shift();if(n)return{type:"table",index:Number(n)}}}function Y3e(t){const e=[];for(;t.length>0;){const n=t.shift();if(!n)continue;const r=Number.parseInt(n);if(!Number.isNaN(r))if(r===0)e.push({type:"resetAll"});else if(r<=9)b2[r]&&e.push({type:"setDecoration",value:b2[r]});else if(r<=29){const o=b2[r-20];o&&(e.push({type:"resetDecoration",value:o}),o==="dim"&&e.push({type:"resetDecoration",value:"bold"}))}else if(r<=37)e.push({type:"setForegroundColor",value:{type:"named",name:Rh[r-30]}});else if(r===38){const o=w9(t);o&&e.push({type:"setForegroundColor",value:o})}else if(r===39)e.push({type:"resetForegroundColor"});else if(r<=47)e.push({type:"setBackgroundColor",value:{type:"named",name:Rh[r-40]}});else if(r===48){const o=w9(t);o&&e.push({type:"setBackgroundColor",value:o})}else r===49?e.push({type:"resetBackgroundColor"}):r===53?e.push({type:"setDecoration",value:"overline"}):r===55?e.push({type:"resetDecoration",value:"overline"}):r>=90&&r<=97?e.push({type:"setForegroundColor",value:{type:"named",name:Rh[r-90+8]}}):r>=100&&r<=107&&e.push({type:"setBackgroundColor",value:{type:"named",name:Rh[r-100+8]}})}return e}function X3e(){let t=null,e=null,n=new Set;return{parse(r){const o=[];let i=0;do{const s=W3e(r,i),a=s.sequence?r.substring(i,s.startPosition):r.substring(i);if(a.length>0&&o.push({value:a,foreground:t,background:e,decorations:new Set(n)}),s.sequence){const l=Y3e(s.sequence);for(const c of l)c.type==="resetAll"?(t=null,e=null,n.clear()):c.type==="resetForegroundColor"?t=null:c.type==="resetBackgroundColor"?e=null:c.type==="resetDecoration"&&n.delete(c.value);for(const c of l)c.type==="setForegroundColor"?t=c.value:c.type==="setBackgroundColor"?e=c.value:c.type==="setDecoration"&&n.add(c.value)}i=s.position}while(i<r.length);return o}}}var Q3e={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function Z3e(t=Q3e){function e(a){return t[a]}function n(a){return`#${a.map(l=>Math.max(0,Math.min(l,255)).toString(16).padStart(2,"0")).join("")}`}let r;function o(){if(r)return r;r=[];for(let c=0;c<Rh.length;c++)r.push(e(Rh[c]));let a=[0,95,135,175,215,255];for(let c=0;c<6;c++)for(let d=0;d<6;d++)for(let f=0;f<6;f++)r.push(n([a[c],a[d],a[f]]));let l=8;for(let c=0;c<24;c++,l+=10)r.push(n([l,l,l]));return r}function i(a){return o()[a]}function s(a){switch(a.type){case"named":return e(a.name);case"rgb":return n(a.rgb);case"table":return i(a.index)}}return{value:s}}function J3e(t,e,n){const r=u_(t,n),o=yE(e),i=Z3e(Object.fromEntries(Rh.map(a=>[a,t.colors?.[`terminal.ansi${a[0].toUpperCase()}${a.substring(1)}`]]))),s=X3e();return o.map(a=>s.parse(a[0]).map(l=>{let c,d;l.decorations.has("reverse")?(c=l.background?i.value(l.background):t.bg,d=l.foreground?i.value(l.foreground):t.fg):(c=l.foreground?i.value(l.foreground):t.fg,d=l.background?i.value(l.background):void 0),c=of(c,r),d=of(d,r),l.decorations.has("dim")&&(c=e5e(c));let f=Oi.None;return l.decorations.has("bold")&&(f|=Oi.Bold),l.decorations.has("italic")&&(f|=Oi.Italic),l.decorations.has("underline")&&(f|=Oi.Underline),l.decorations.has("strikethrough")&&(f|=Oi.Strikethrough),{content:l.value,offset:a[1],color:c,bgColor:d,fontStyle:f}}))}function e5e(t){const e=t.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/);if(e)if(e[3]){const r=Math.round(Number.parseInt(e[3],16)/2).toString(16).padStart(2,"0");return`#${e[1]}${e[2]}${r}`}else return e[2]?`#${e[1]}${e[2]}80`:`#${Array.from(e[1]).map(r=>`${r}${r}`).join("")}80`;const n=t.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return n?`var(${n[1]}-dim)`:t}function _D(t,e,n={}){const{lang:r="text",theme:o=t.getLoadedThemes()[0]}=n;if(wD(r)||CD(o))return yE(e).map(l=>[{content:l[0],offset:l[1]}]);const{theme:i,colorMap:s}=t.setTheme(o);if(r==="ansi")return J3e(i,e,n);const a=t.getLanguage(r);if(n.grammarState){if(n.grammarState.lang!==a.name)throw new yo(`Grammar state language "${n.grammarState.lang}" does not match highlight language "${a.name}"`);if(!n.grammarState.themes.includes(i.name))throw new yo(`Grammar state themes "${n.grammarState.themes}" do not contain highlight theme "${i.name}"`)}return n5e(e,a,i,s,n)}function t5e(...t){if(t.length===2)return Ab(t[1]);const[e,n,r={}]=t,{lang:o="text",theme:i=e.getLoadedThemes()[0]}=r;if(wD(o)||CD(i))throw new yo("Plain language does not have grammar state");if(o==="ansi")throw new yo("ANSI language does not have grammar state");const{theme:s,colorMap:a}=e.setTheme(i),l=e.getLanguage(o);return new ty(h_(n,l,s,a,r).stateStack,l.name,s.name)}function n5e(t,e,n,r,o){const i=h_(t,e,n,r,o),s=new ty(h_(t,e,n,r,o).stateStack,e.name,n.name);return vE(i.tokens,s),i.tokens}function h_(t,e,n,r,o){const i=u_(n,o),{tokenizeMaxLineLength:s=0,tokenizeTimeLimit:a=500}=o,l=yE(t);let c=o.grammarState?z3e(o.grammarState,n.name)??tM:o.grammarContextCode!=null?h_(o.grammarContextCode,e,n,r,{...o,grammarState:void 0,grammarContextCode:void 0}).stateStack:tM,d=[];const f=[];for(let p=0,g=l.length;p<g;p++){const[y,b]=l[p];if(y===""){d=[],f.push([]);continue}if(s>0&&y.length>=s){d=[],f.push([{content:y,offset:b,color:"",fontStyle:0}]);continue}let _,k,M;o.includeExplanation&&(_=e.tokenizeLine(y,c,a),k=_.tokens,M=0);const N=e.tokenizeLine2(y,c,a),j=N.tokens.length/2;for(let B=0;B<j;B++){const F=N.tokens[2*B],D=B+1<j?N.tokens[2*B+2]:y.length;if(F===D)continue;const R=N.tokens[2*B+1],I=of(r[wg.getForeground(R)],i),L=wg.getFontStyle(R),z={content:y.substring(F,D),offset:b+F,color:I,fontStyle:L};if(o.includeExplanation){const q=[];if(o.includeExplanation!=="scopeName")for(const ne of n.settings){let re;switch(typeof ne.scope){case"string":re=ne.scope.split(/,/).map(V=>V.trim());break;case"object":re=ne.scope;break;default:continue}q.push({settings:ne,selectors:re.map(V=>V.split(/ /))})}z.explanation=[];let H=0;for(;F+H<D;){const ne=k[M],re=y.substring(ne.startIndex,ne.endIndex);H+=re.length,z.explanation.push({content:re,scopes:o.includeExplanation==="scopeName"?r5e(ne.scopes):o5e(q,ne.scopes)}),M+=1}}d.push(z)}f.push(d),d=[],c=N.ruleStack}return{tokens:f,stateStack:c}}function r5e(t){return t.map(e=>({scopeName:e}))}function o5e(t,e){const n=[];for(let r=0,o=e.length;r<o;r++){const i=e[r];n[r]={scopeName:i,themeMatches:s5e(t,i,e.slice(0,r))}}return n}function C9(t,e){return t===e||e.substring(0,t.length)===t&&e[t.length]==="."}function i5e(t,e,n){if(!C9(t[t.length-1],e))return!1;let r=t.length-2,o=n.length-1;for(;r>=0&&o>=0;)C9(t[r],n[o])&&(r-=1),o-=1;return r===-1}function s5e(t,e,n){const r=[];for(const{selectors:o,settings:i}of t)for(const s of o)if(i5e(s,e,n)){r.push(i);break}return r}function oQ(t,e,n){const r=Object.entries(n.themes).filter(l=>l[1]).map(l=>({color:l[0],theme:l[1]})),o=r.map(l=>{const c=_D(t,e,{...n,theme:l.theme}),d=Ab(c),f=typeof l.theme=="string"?l.theme:l.theme.name;return{tokens:c,state:d,theme:f}}),i=a5e(...o.map(l=>l.tokens)),s=i[0].map((l,c)=>l.map((d,f)=>{const p={content:d.content,variants:{},offset:d.offset};return"includeExplanation"in n&&n.includeExplanation&&(p.explanation=d.explanation),i.forEach((g,y)=>{const{content:b,explanation:_,offset:k,...M}=g[c][f];p.variants[r[y].color]=M}),p})),a=o[0].state?new ty(Object.fromEntries(o.map(l=>[l.theme,l.state?.getInternalStack(l.theme)])),o[0].state.lang):void 0;return a&&vE(s,a),s}function a5e(...t){const e=t.map(()=>[]),n=t.length;for(let r=0;r<t[0].length;r++){const o=t.map(l=>l[r]),i=e.map(()=>[]);e.forEach((l,c)=>l.push(i[c]));const s=o.map(()=>0),a=o.map(l=>l[0]);for(;a.every(l=>l);){const l=Math.min(...a.map(c=>c.content.length));for(let c=0;c<n;c++){const d=a[c];d.content.length===l?(i[c].push(d),s[c]+=1,a[c]=o[c][s[c]]):(i[c].push({...d,content:d.content.slice(0,l)}),a[c]={...d,content:d.content.slice(l),offset:d.offset+l})}}}return e}function p_(t,e,n){let r,o,i,s,a,l;if("themes"in n){const{defaultColor:c="light",cssVariablePrefix:d="--shiki-",colorsRendering:f="css-vars"}=n,p=Object.entries(n.themes).filter(k=>k[1]).map(k=>({color:k[0],theme:k[1]})).sort((k,M)=>k.color===c?-1:M.color===c?1:0);if(p.length===0)throw new yo("`themes` option must not be empty");const g=oQ(t,e,n);if(l=Ab(g),c&&SD!==c&&!p.find(k=>k.color===c))throw new yo(`\`themes\` option must contain the defaultColor key \`${c}\``);const y=p.map(k=>t.getTheme(k.theme)),b=p.map(k=>k.color);i=g.map(k=>k.map(M=>H3e(M,b,d,c,f))),l&&vE(i,l);const _=p.map(k=>u_(k.theme,n));o=S9(p,y,_,d,c,"fg",f),r=S9(p,y,_,d,c,"bg",f),s=`shiki-themes ${y.map(k=>k.name).join(" ")}`,a=c?void 0:[o,r].join(";")}else if("theme"in n){const c=u_(n.theme,n);i=_D(t,e,n);const d=t.getTheme(n.theme);r=of(d.bg,c),o=of(d.fg,c),s=d.name,l=Ab(i)}else throw new yo("Invalid options, either `theme` or `themes` must be provided");return{tokens:i,fg:o,bg:r,themeName:s,rootStyle:a,grammarState:l}}function S9(t,e,n,r,o,i,s){return t.map((a,l)=>{const c=of(e[l][i],n[l])||"inherit",d=`${r+a.color}${i==="bg"?"-bg":""}:${c}`;if(l===0&&o){if(o===SD&&t.length>1){const f=t.findIndex(b=>b.color==="light"),p=t.findIndex(b=>b.color==="dark");if(f===-1||p===-1)throw new yo('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const g=of(e[f][i],n[f])||"inherit",y=of(e[p][i],n[p])||"inherit";return`light-dark(${g}, ${y});${d}`}return c}return s==="css-vars"?d:null}).filter(a=>!!a).join(";")}function m_(t,e,n,r={meta:{},options:n,codeToHast:(o,i)=>m_(t,o,i),codeToTokens:(o,i)=>p_(t,o,i)}){let o=e;for(const y of f_(n))o=y.preprocess?.call(r,o,n)||o;let{tokens:i,fg:s,bg:a,themeName:l,rootStyle:c,grammarState:d}=p_(t,o,n);const{mergeWhitespaces:f=!0,mergeSameStyleTokens:p=!1}=n;f===!0?i=c5e(i):f==="never"&&(i=u5e(i)),p&&(i=d5e(i));const g={...r,get source(){return o}};for(const y of f_(n))i=y.tokens?.call(g,i)||i;return l5e(i,{...n,fg:s,bg:a,themeName:l,rootStyle:c},g,d)}function l5e(t,e,n,r=Ab(t)){const o=f_(e),i=[],s={type:"root",children:[]},{structure:a="classic",tabindex:l="0"}=e;let c={type:"element",tagName:"pre",properties:{class:`shiki ${e.themeName||""}`,style:e.rootStyle||`background-color:${e.bg};color:${e.fg}`,...l!==!1&&l!=null?{tabindex:l.toString()}:{},...Object.fromEntries(Array.from(Object.entries(e.meta||{})).filter(([y])=>!y.startsWith("_")))},children:[]},d={type:"element",tagName:"code",properties:{},children:i};const f=[],p={...n,structure:a,addClassToHast:tQ,get source(){return n.source},get tokens(){return t},get options(){return e},get root(){return s},get pre(){return c},get code(){return d},get lines(){return f}};if(t.forEach((y,b)=>{b&&(a==="inline"?s.children.push({type:"element",tagName:"br",properties:{},children:[]}):a==="classic"&&i.push({type:"text",value:`
`}));let _={type:"element",tagName:"span",properties:{class:"line"},children:[]},k=0;for(const M of y){let N={type:"element",tagName:"span",properties:{...M.htmlAttrs},children:[{type:"text",value:M.content}]};const j=sM(M.htmlStyle||d_(M));j&&(N.properties.style=j);for(const B of o)N=B?.span?.call(p,N,b+1,k,_,M)||N;a==="inline"?s.children.push(N):a==="classic"&&_.children.push(N),k+=M.content.length}if(a==="classic"){for(const M of o)_=M?.line?.call(p,_,b+1)||_;f.push(_),i.push(_)}}),a==="classic"){for(const y of o)d=y?.code?.call(p,d)||d;c.children.push(d);for(const y of o)c=y?.pre?.call(p,c)||c;s.children.push(c)}let g=s;for(const y of o)g=y?.root?.call(p,g)||g;return r&&vE(g,r),g}function c5e(t){return t.map(e=>{const n=[];let r="",o=0;return e.forEach((i,s)=>{const l=!(i.fontStyle&&(i.fontStyle&Oi.Underline||i.fontStyle&Oi.Strikethrough));l&&i.content.match(/^\s+$/)&&e[s+1]?(o||(o=i.offset),r+=i.content):r?(l?n.push({...i,offset:o,content:r+i.content}):n.push({content:r,offset:o},i),o=0,r=""):n.push(i)}),n})}function u5e(t){return t.map(e=>e.flatMap(n=>{if(n.content.match(/^\s+$/))return n;const r=n.content.match(/^(\s*)(.*?)(\s*)$/);if(!r)return n;const[,o,i,s]=r;if(!o&&!s)return n;const a=[{...n,offset:n.offset+o.length,content:i}];return o&&a.unshift({content:o,offset:n.offset}),s&&a.push({content:s,offset:n.offset+o.length+i.length}),a}))}function d5e(t){return t.map(e=>{const n=[];for(const r of e){if(n.length===0){n.push({...r});continue}const o=n[n.length-1],i=sM(o.htmlStyle||d_(o)),s=sM(r.htmlStyle||d_(r)),a=o.fontStyle&&(o.fontStyle&Oi.Underline||o.fontStyle&Oi.Strikethrough),l=r.fontStyle&&(r.fontStyle&Oi.Underline||r.fontStyle&Oi.Strikethrough);!a&&!l&&i===s?o.content+=r.content:n.push({...r})}return n})}const f5e=P3e;function h5e(t,e,n){const r={meta:{},options:n,codeToHast:(i,s)=>m_(t,i,s),codeToTokens:(i,s)=>p_(t,i,s)};let o=f5e(m_(t,e,n,r));for(const i of f_(n))o=i.postprocess?.call(r,o,n)||o;return o}const _9={light:"#333333",dark:"#bbbbbb"},x9={light:"#fffffe",dark:"#1e1e1e"},E9="__shiki_resolved";function xD(t){if(t?.[E9])return t;const e={...t};e.tokenColors&&!e.settings&&(e.settings=e.tokenColors,delete e.tokenColors),e.type||="dark",e.colorReplacements={...e.colorReplacements},e.settings||=[];let{bg:n,fg:r}=e;if(!n||!r){const a=e.settings?e.settings.find(l=>!l.name&&!l.scope):void 0;a?.settings?.foreground&&(r=a.settings.foreground),a?.settings?.background&&(n=a.settings.background),!r&&e?.colors?.["editor.foreground"]&&(r=e.colors["editor.foreground"]),!n&&e?.colors?.["editor.background"]&&(n=e.colors["editor.background"]),r||(r=e.type==="light"?_9.light:_9.dark),n||(n=e.type==="light"?x9.light:x9.dark),e.fg=r,e.bg=n}e.settings[0]&&e.settings[0].settings&&!e.settings[0].scope||e.settings.unshift({settings:{foreground:e.fg,background:e.bg}});let o=0;const i=new Map;function s(a){if(i.has(a))return i.get(a);o+=1;const l=`#${o.toString(16).padStart(8,"0").toLowerCase()}`;return e.colorReplacements?.[`#${l}`]?s(a):(i.set(a,l),l)}e.settings=e.settings.map(a=>{const l=a.settings?.foreground&&!a.settings.foreground.startsWith("#"),c=a.settings?.background&&!a.settings.background.startsWith("#");if(!l&&!c)return a;const d={...a,settings:{...a.settings}};if(l){const f=s(a.settings.foreground);e.colorReplacements[f]=a.settings.foreground,d.settings.foreground=f}if(c){const f=s(a.settings.background);e.colorReplacements[f]=a.settings.background,d.settings.background=f}return d});for(const a of Object.keys(e.colors||{}))if((a==="editor.foreground"||a==="editor.background"||a.startsWith("terminal.ansi"))&&!e.colors[a]?.startsWith("#")){const l=s(e.colors[a]);e.colorReplacements[l]=e.colors[a],e.colors[a]=l}return Object.defineProperty(e,E9,{enumerable:!1,writable:!1,value:!0}),e}async function iQ(t){return Array.from(new Set((await Promise.all(t.filter(e=>!JX(e)).map(async e=>await ZX(e).then(n=>Array.isArray(n)?n:[n])))).flat()))}async function sQ(t){return(await Promise.all(t.map(async n=>eQ(n)?null:xD(await ZX(n))))).filter(n=>!!n)}let p5e=3;function m5e(t,e=3){e>p5e||console.trace(`[SHIKI DEPRECATE]: ${t}`)}class km extends Error{constructor(e){super(e),this.name="ShikiError"}}class g5e extends wLe{constructor(e,n,r,o={}){super(e),this._resolver=e,this._themes=n,this._langs=r,this._alias=o,this._themes.map(i=>this.loadTheme(i)),this.loadLanguages(this._langs)}_resolvedThemes=new Map;_resolvedGrammars=new Map;_langMap=new Map;_langGraph=new Map;_textmateThemeCache=new WeakMap;_loadedThemesCache=null;_loadedLanguagesCache=null;getTheme(e){return typeof e=="string"?this._resolvedThemes.get(e):this.loadTheme(e)}loadTheme(e){const n=xD(e);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(e){let n=this._textmateThemeCache.get(e);n||(n=i_.createFromRawTheme(e),this._textmateThemeCache.set(e,n)),this._syncRegistry.setTheme(n)}getGrammar(e){if(this._alias[e]){const n=new Set([e]);for(;this._alias[e];){if(e=this._alias[e],n.has(e))throw new km(`Circular alias \`${Array.from(n).join(" -> ")} -> ${e}\``);n.add(e)}}return this._resolvedGrammars.get(e)}loadLanguage(e){if(this.getGrammar(e.name))return;const n=new Set([...this._langMap.values()].filter(i=>i.embeddedLangsLazy?.includes(e.name)));this._resolver.addLanguage(e);const r={balancedBracketSelectors:e.balancedBracketSelectors||["*"],unbalancedBracketSelectors:e.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(e.scopeName,e);const o=this.loadGrammarWithConfiguration(e.scopeName,1,r);if(o.name=e.name,this._resolvedGrammars.set(e.name,o),e.aliases&&e.aliases.forEach(i=>{this._alias[i]=e.name}),this._loadedLanguagesCache=null,n.size)for(const i of n)this._resolvedGrammars.delete(i.name),this._loadedLanguagesCache=null,this._syncRegistry?._injectionGrammars?.delete(i.scopeName),this._syncRegistry?._grammars?.delete(i.scopeName),this.loadLanguage(this._langMap.get(i.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(e){for(const o of e)this.resolveEmbeddedLanguages(o);const n=Array.from(this._langGraph.entries()),r=n.filter(([o,i])=>!i);if(r.length){const o=n.filter(([i,s])=>s&&s.embeddedLangs?.some(a=>r.map(([l])=>l).includes(a))).filter(i=>!r.includes(i));throw new km(`Missing languages ${r.map(([i])=>`\`${i}\``).join(", ")}, required by ${o.map(([i])=>`\`${i}\``).join(", ")}`)}for(const[o,i]of n)this._resolver.addLanguage(i);for(const[o,i]of n)this.loadLanguage(i)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(e){if(this._langMap.set(e.name,e),this._langGraph.set(e.name,e),e.embeddedLangs)for(const n of e.embeddedLangs)this._langGraph.set(n,this._langMap.get(n))}}class y5e{_langs=new Map;_scopeToLang=new Map;_injections=new Map;_onigLib;constructor(e,n){this._onigLib={createOnigScanner:r=>e.createScanner(r),createOnigString:r=>e.createString(r)},n.forEach(r=>this.addLanguage(r))}get onigLib(){return this._onigLib}getLangRegistration(e){return this._langs.get(e)}loadGrammar(e){return this._scopeToLang.get(e)}addLanguage(e){this._langs.set(e.name,e),e.aliases&&e.aliases.forEach(n=>{this._langs.set(n,e)}),this._scopeToLang.set(e.scopeName,e),e.injectTo&&e.injectTo.forEach(n=>{this._injections.get(n)||this._injections.set(n,[]),this._injections.get(n).push(e.scopeName)})}getInjections(e){const n=e.split(".");let r=[];for(let o=1;o<=n.length;o++){const i=n.slice(0,o).join(".");r=[...r,...this._injections.get(i)||[]]}return r}}let ev=0;function v5e(t){ev+=1,t.warnings!==!1&&ev>=10&&ev%10===0&&console.warn(`[Shiki] ${ev} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let e=!1;if(!t.engine)throw new km("`engine` option is required for synchronous mode");const n=(t.langs||[]).flat(1),r=(t.themes||[]).flat(1).map(xD),o=new y5e(t.engine,n),i=new g5e(o,r,n,t.langAlias);let s;function a(M){_();const N=i.getGrammar(typeof M=="string"?M:M.name);if(!N)throw new km(`Language \`${M}\` not found, you may need to load it first`);return N}function l(M){if(M==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};_();const N=i.getTheme(M);if(!N)throw new km(`Theme \`${M}\` not found, you may need to load it first`);return N}function c(M){_();const N=l(M);s!==M&&(i.setTheme(N),s=M);const j=i.getColorMap();return{theme:N,colorMap:j}}function d(){return _(),i.getLoadedThemes()}function f(){return _(),i.getLoadedLanguages()}function p(...M){_(),i.loadLanguages(M.flat(1))}async function g(...M){return p(await iQ(M))}function y(...M){_();for(const N of M.flat(1))i.loadTheme(N)}async function b(...M){return _(),y(await sQ(M))}function _(){if(e)throw new km("Shiki instance has been disposed")}function k(){e||(e=!0,i.dispose(),ev-=1)}return{setTheme:c,getTheme:l,getLanguage:a,getLoadedThemes:d,getLoadedLanguages:f,loadLanguage:g,loadLanguageSync:p,loadTheme:b,loadThemeSync:y,dispose:k,[Symbol.dispose]:k}}async function b5e(t){t.engine||m5e("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[e,n,r]=await Promise.all([sQ(t.themes||[]),iQ(t.langs||[]),t.engine]);return v5e({...t,themes:e,langs:n,engine:r})}async function w5e(t){const e=await b5e(t);return{getLastGrammarState:(...n)=>t5e(e,...n),codeToTokensBase:(n,r)=>_D(e,n,r),codeToTokensWithThemes:(n,r)=>oQ(e,n,r),codeToTokens:(n,r)=>p_(e,n,r),codeToHast:(n,r)=>m_(e,n,r),codeToHtml:(n,r)=>h5e(e,n,r),getBundledLanguages:()=>({}),getBundledThemes:()=>({}),...e,getInternalContext:()=>e}}function C5e(t){const e=t.langs,n=t.themes,r=t.engine;async function o(i){function s(f){if(typeof f=="string"){if(JX(f))return[];f=i.langAlias?.[f]||f;const p=e[f];if(!p)throw new yo(`Language \`${f}\` is not included in this bundle. You may want to load it from external source.`);return p}return f}function a(f){if(eQ(f))return"none";if(typeof f=="string"){const p=n[f];if(!p)throw new yo(`Theme \`${f}\` is not included in this bundle. You may want to load it from external source.`);return p}return f}const l=(i.themes??[]).map(f=>a(f)),c=(i.langs??[]).map(f=>s(f)),d=await w5e({engine:i.engine??r(),...i,themes:l,langs:c});return{...d,loadLanguage(...f){return d.loadLanguage(...f.map(s))},loadTheme(...f){return d.loadTheme(...f.map(a))},getBundledLanguages(){return e},getBundledThemes(){return n}}}return o}function ny(t){if([...t].length!==1)throw new Error(`Expected "${t}" to be a single code point`);return t.codePointAt(0)}function S5e(t,e,n){return t.has(e)||t.set(e,n),t.get(e)}const ED=new Set(["alnum","alpha","ascii","blank","cntrl","digit","graph","lower","print","punct","space","upper","word","xdigit"]),Ho=String.raw;function ry(t,e){if(t==null)throw new Error(e??"Value expected");return t}const aQ=Ho`\[\^?`,lQ=`c.? | C(?:-.?)?|${Ho`[pP]\{(?:\^?[-\x20_]*[A-Za-z][-\x20\w]*\})?`}|${Ho`x[89A-Fa-f]\p{AHex}(?:\\x[89A-Fa-f]\p{AHex})*`}|${Ho`u(?:\p{AHex}{4})? | x\{[^\}]*\}? | x\p{AHex}{0,2}`}|${Ho`o\{[^\}]*\}?`}|${Ho`\d{1,3}`}`,kD=/[?*+][?+]?|\{(?:\d+(?:,\d*)?|,\d+)\}\??/,xw=new RegExp(Ho`
  \\ (?:
    ${lQ}
    | [gk]<[^>]*>?
    | [gk]'[^']*'?
    | .
  )
  | \( (?:
    \? (?:
      [:=!>({]
      | <[=!]
      | <[^>]*>
      | '[^']*'
      | ~\|?
      | #(?:[^)\\]|\\.?)*
      | [^:)]*[:)]
    )?
    | \*[^\)]*\)?
  )?
  | (?:${kD.source})+
  | ${aQ}
  | .
`.replace(/\s+/g,""),"gsu"),w2=new RegExp(Ho`
  \\ (?:
    ${lQ}
    | .
  )
  | \[:(?:\^?\p{Alpha}+|\^):\]
  | ${aQ}
  | &&
  | .
`.replace(/\s+/g,""),"gsu");function _5e(t,e={}){const n={flags:"",...e,rules:{captureGroup:!1,singleline:!1,...e.rules}};if(typeof t!="string")throw new Error("String expected as pattern");const r=H5e(n.flags),o=[r.extended],i={captureGroup:n.rules.captureGroup,getCurrentModX(){return o.at(-1)},numOpenGroups:0,popModX(){o.pop()},pushModX(f){o.push(f)},replaceCurrentModX(f){o[o.length-1]=f},singleline:n.rules.singleline};let s=[],a;for(xw.lastIndex=0;a=xw.exec(t);){const f=x5e(i,t,a[0],xw.lastIndex);f.tokens?s.push(...f.tokens):f.token&&s.push(f.token),f.lastIndex!==void 0&&(xw.lastIndex=f.lastIndex)}const l=[];let c=0;s.filter(f=>f.type==="GroupOpen").forEach(f=>{f.kind==="capturing"?f.number=++c:f.raw==="("&&l.push(f)}),c||l.forEach((f,p)=>{f.kind="capturing",f.number=p+1});const d=c||l.length;return{tokens:s.map(f=>f.type==="EscapedNumber"?z5e(f,d):f).flat(),flags:r}}function x5e(t,e,n,r){const[o,i]=n;if(n==="["||n==="[^"){const s=E5e(e,n,r);return{tokens:s.tokens,lastIndex:s.lastIndex}}if(o==="\\"){if("AbBGyYzZ".includes(i))return{token:k9(n,n)};if(/^\\g[<']/.test(n)){if(!/^\\g(?:<[^>]+>|'[^']+')$/.test(n))throw new Error(`Invalid group name "${n}"`);return{token:D5e(n)}}if(/^\\k[<']/.test(n)){if(!/^\\k(?:<[^>]+>|'[^']+')$/.test(n))throw new Error(`Invalid group name "${n}"`);return{token:uQ(n)}}if(i==="K")return{token:dQ("keep",n)};if(i==="N"||i==="R")return{token:Ih("newline",n,{negate:i==="N"})};if(i==="O")return{token:Ih("any",n)};if(i==="X")return{token:Ih("text_segment",n)};const s=cQ(n,{inCharClass:!1});return Array.isArray(s)?{tokens:s}:{token:s}}if(o==="("){if(i==="*")return{token:B5e(n)};if(n==="(?{")throw new Error(`Unsupported callout "${n}"`);if(n.startsWith("(?#")){if(e[r]!==")")throw new Error('Unclosed comment group "(?#"');return{lastIndex:r+1}}if(/^\(\?[-imx]+[:)]$/.test(n))return{token:j5e(n,t)};if(t.pushModX(t.getCurrentModX()),t.numOpenGroups++,n==="("&&!t.captureGroup||n==="(?:")return{token:wm("group",n)};if(n==="(?>")return{token:wm("atomic",n)};if(n==="(?="||n==="(?!"||n==="(?<="||n==="(?<!")return{token:wm(n[2]==="<"?"lookbehind":"lookahead",n,{negate:n.endsWith("!")})};if(n==="("&&t.captureGroup||n.startsWith("(?<")&&n.endsWith(">")||n.startsWith("(?'")&&n.endsWith("'"))return{token:wm("capturing",n,{...n!=="("&&{name:n.slice(3,-1)}})};if(n.startsWith("(?~")){if(n==="(?~|")throw new Error(`Unsupported absence function kind "${n}"`);return{token:wm("absence_repeater",n)}}throw n==="(?("?new Error(`Unsupported conditional "${n}"`):new Error(`Invalid or unsupported group option "${n}"`)}if(n===")"){if(t.popModX(),t.numOpenGroups--,t.numOpenGroups<0)throw new Error('Unmatched ")"');return{token:N5e(n)}}if(t.getCurrentModX()){if(n==="#"){const s=e.indexOf(`
`,r);return{lastIndex:s===-1?e.length:s}}if(/^\s$/.test(n)){const s=/\s+/y;return s.lastIndex=r,{lastIndex:s.exec(e)?s.lastIndex:r}}}if(n===".")return{token:Ih("dot",n)};if(n==="^"||n==="$"){const s=t.singleline?{"^":Ho`\A`,$:Ho`\Z`}[n]:n;return{token:k9(s,n)}}return n==="|"?{token:T5e(n)}:kD.test(n)?{tokens:G5e(n)}:{token:bu(ny(n),n)}}function E5e(t,e,n){const r=[T9(e[1]==="^",e)];let o=1,i;for(w2.lastIndex=n;i=w2.exec(t);){const s=i[0];if(s[0]==="["&&s[1]!==":")o++,r.push(T9(s[1]==="^",s));else if(s==="]"){if(r.at(-1).type==="CharacterClassOpen")r.push(bu(93,s));else if(o--,r.push(A5e(s)),!o)break}else{const a=k5e(s);Array.isArray(a)?r.push(...a):r.push(a)}}return{tokens:r,lastIndex:w2.lastIndex||t.length}}function k5e(t){if(t[0]==="\\")return cQ(t,{inCharClass:!0});if(t[0]==="["){const e=/\[:(?<negate>\^?)(?<name>[a-z]+):\]/.exec(t);if(!e||!ED.has(e.groups.name))throw new Error(`Invalid POSIX class "${t}"`);return Ih("posix",t,{value:e.groups.name,negate:!!e.groups.negate})}return t==="-"?R5e(t):t==="&&"?I5e(t):bu(ny(t),t)}function cQ(t,{inCharClass:e}){const n=t[1];if(n==="c"||n==="C")return V5e(t);if("dDhHsSwW".includes(n))return $5e(t);if(t.startsWith(Ho`\o{`))throw new Error(`Incomplete, invalid, or unsupported octal code point "${t}"`);if(/^\\[pP]\{/.test(t)){if(t.length===3)throw new Error(`Incomplete or invalid Unicode property "${t}"`);return F5e(t)}if(new RegExp("^\\\\x[89A-Fa-f]\\p{AHex}","u").test(t))try{const r=t.split(/\\x/).slice(1).map(s=>parseInt(s,16)),o=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}).decode(new Uint8Array(r)),i=new TextEncoder;return[...o].map(s=>{const a=[...i.encode(s)].map(l=>`\\x${l.toString(16)}`).join("");return bu(ny(s),a)})}catch{throw new Error(`Multibyte code "${t}" incomplete or invalid in Oniguruma`)}if(n==="u"||n==="x")return bu(U5e(t),t);if(A9.has(n))return bu(A9.get(n),t);if(/\d/.test(n))return M5e(e,t);if(t==="\\")throw new Error(Ho`Incomplete escape "\"`);if(n==="M")throw new Error(`Unsupported meta "${t}"`);if([...t].length===2)return bu(t.codePointAt(1),t);throw new Error(`Unexpected escape "${t}"`)}function T5e(t){return{type:"Alternator",raw:t}}function k9(t,e){return{type:"Assertion",kind:t,raw:e}}function uQ(t){return{type:"Backreference",raw:t}}function bu(t,e){return{type:"Character",value:t,raw:e}}function A5e(t){return{type:"CharacterClassClose",raw:t}}function R5e(t){return{type:"CharacterClassHyphen",raw:t}}function I5e(t){return{type:"CharacterClassIntersector",raw:t}}function T9(t,e){return{type:"CharacterClassOpen",negate:t,raw:e}}function Ih(t,e,n={}){return{type:"CharacterSet",kind:t,...n,raw:e}}function dQ(t,e,n={}){return t==="keep"?{type:"Directive",kind:t,raw:e}:{type:"Directive",kind:t,flags:ry(n.flags),raw:e}}function M5e(t,e){return{type:"EscapedNumber",inCharClass:t,raw:e}}function N5e(t){return{type:"GroupClose",raw:t}}function wm(t,e,n={}){return{type:"GroupOpen",kind:t,...n,raw:e}}function O5e(t,e,n,r){return{type:"NamedCallout",kind:t,tag:e,arguments:n,raw:r}}function P5e(t,e,n,r){return{type:"Quantifier",kind:t,min:e,max:n,raw:r}}function D5e(t){return{type:"Subroutine",raw:t}}const L5e=new Set(["COUNT","CMP","ERROR","FAIL","MAX","MISMATCH","SKIP","TOTAL_COUNT"]),A9=new Map([["a",7],["b",8],["e",27],["f",12],["n",10],["r",13],["t",9],["v",11]]);function V5e(t){const e=t[1]==="c"?t[2]:t[3];if(!e||!/[A-Za-z]/.test(e))throw new Error(`Unsupported control character "${t}"`);return bu(ny(e.toUpperCase())-64,t)}function j5e(t,e){let{on:n,off:r}=/^\(\?(?<on>[imx]*)(?:-(?<off>[-imx]*))?/.exec(t).groups;r??="";const o=(e.getCurrentModX()||n.includes("x"))&&!r.includes("x"),i=I9(n),s=I9(r),a={};if(i&&(a.enable=i),s&&(a.disable=s),t.endsWith(")"))return e.replaceCurrentModX(o),dQ("flags",t,{flags:a});if(t.endsWith(":"))return e.pushModX(o),e.numOpenGroups++,wm("group",t,{...(i||s)&&{flags:a}});throw new Error(`Unexpected flag modifier "${t}"`)}function B5e(t){const e=/\(\*(?<name>[A-Za-z_]\w*)?(?:\[(?<tag>(?:[A-Za-z_]\w*)?)\])?(?:\{(?<args>[^}]*)\})?\)/.exec(t);if(!e)throw new Error(`Incomplete or invalid named callout "${t}"`);const{name:n,tag:r,args:o}=e.groups;if(!n)throw new Error(`Invalid named callout "${t}"`);if(r==="")throw new Error(`Named callout tag with empty value not allowed "${t}"`);const i=o?o.split(",").filter(d=>d!=="").map(d=>/^[+-]?\d+$/.test(d)?+d:d):[],[s,a,l]=i,c=L5e.has(n)?n.toLowerCase():"custom";switch(c){case"fail":case"mismatch":case"skip":if(i.length>0)throw new Error(`Named callout arguments not allowed "${i}"`);break;case"error":if(i.length>1)throw new Error(`Named callout allows only one argument "${i}"`);if(typeof s=="string")throw new Error(`Named callout argument must be a number "${s}"`);break;case"max":if(!i.length||i.length>2)throw new Error(`Named callout must have one or two arguments "${i}"`);if(typeof s=="string"&&!/^[A-Za-z_]\w*$/.test(s))throw new Error(`Named callout argument one must be a tag or number "${s}"`);if(i.length===2&&(typeof a=="number"||!/^[<>X]$/.test(a)))throw new Error(`Named callout optional argument two must be '<', '>', or 'X' "${a}"`);break;case"count":case"total_count":if(i.length>1)throw new Error(`Named callout allows only one argument "${i}"`);if(i.length===1&&(typeof s=="number"||!/^[<>X]$/.test(s)))throw new Error(`Named callout optional argument must be '<', '>', or 'X' "${s}"`);break;case"cmp":if(i.length!==3)throw new Error(`Named callout must have three arguments "${i}"`);if(typeof s=="string"&&!/^[A-Za-z_]\w*$/.test(s))throw new Error(`Named callout argument one must be a tag or number "${s}"`);if(typeof a=="number"||!/^(?:[<>!=]=|[<>])$/.test(a))throw new Error(`Named callout argument two must be '==', '!=', '>', '<', '>=', or '<=' "${a}"`);if(typeof l=="string"&&!/^[A-Za-z_]\w*$/.test(l))throw new Error(`Named callout argument three must be a tag or number "${l}"`);break;case"custom":throw new Error(`Undefined callout name "${n}"`);default:throw new Error(`Unexpected named callout kind "${c}"`)}return O5e(c,r??null,o?.split(",")??null,t)}function R9(t){let e=null,n,r;if(t[0]==="{"){const{minStr:o,maxStr:i}=/^\{(?<minStr>\d*)(?:,(?<maxStr>\d*))?/.exec(t).groups,s=1e5;if(+o>s||i&&+i>s)throw new Error("Quantifier value unsupported in Oniguruma");if(n=+o,r=i===void 0?+o:i===""?1/0:+i,n>r&&(e="possessive",[n,r]=[r,n]),t.endsWith("?")){if(e==="possessive")throw new Error('Unsupported possessive interval quantifier chain with "?"');e="lazy"}else e||(e="greedy")}else n=t[0]==="+"?1:0,r=t[0]==="?"?1:1/0,e=t[1]==="+"?"possessive":t[1]==="?"?"lazy":"greedy";return P5e(e,n,r,t)}function $5e(t){const e=t[1].toLowerCase();return Ih({d:"digit",h:"hex",s:"space",w:"word"}[e],t,{negate:t[1]!==e})}function F5e(t){const{p:e,neg:n,value:r}=/^\\(?<p>[pP])\{(?<neg>\^?)(?<value>[^}]+)/.exec(t).groups;return Ih("property",t,{value:r,negate:e==="P"&&!n||e==="p"&&!!n})}function I9(t){const e={};return t.includes("i")&&(e.ignoreCase=!0),t.includes("m")&&(e.dotAll=!0),t.includes("x")&&(e.extended=!0),Object.keys(e).length?e:null}function H5e(t){const e={ignoreCase:!1,dotAll:!1,extended:!1,digitIsAscii:!1,posixIsAscii:!1,spaceIsAscii:!1,wordIsAscii:!1,textSegmentMode:null};for(let n=0;n<t.length;n++){const r=t[n];if(!"imxDPSWy".includes(r))throw new Error(`Invalid flag "${r}"`);if(r==="y"){if(!/^y{[gw]}/.test(t.slice(n)))throw new Error('Invalid or unspecified flag "y" mode');e.textSegmentMode=t[n+2]==="g"?"grapheme":"word",n+=3;continue}e[{i:"ignoreCase",m:"dotAll",x:"extended",D:"digitIsAscii",P:"posixIsAscii",S:"spaceIsAscii",W:"wordIsAscii"}[r]]=!0}return e}function U5e(t){if(new RegExp("^(?:\\\\u(?!\\p{AHex}{4})|\\\\x(?!\\p{AHex}{1,2}|\\{\\p{AHex}{1,8}\\}))","u").test(t))throw new Error(`Incomplete or invalid escape "${t}"`);const e=t[2]==="{"?new RegExp("^\\\\x\\{\\s*(?<hex>\\p{AHex}+)","u").exec(t).groups.hex:t.slice(2);return parseInt(e,16)}function z5e(t,e){const{raw:n,inCharClass:r}=t,o=n.slice(1);if(!r&&(o!=="0"&&o.length===1||o[0]!=="0"&&+o<=e))return[uQ(n)];const i=[],s=o.match(/^[0-7]+|\d/g);for(let a=0;a<s.length;a++){const l=s[a];let c;if(a===0&&l!=="8"&&l!=="9"){if(c=parseInt(l,8),c>127)throw new Error(Ho`Octal encoded byte above 177 unsupported "${n}"`)}else c=ny(l);i.push(bu(c,(a===0?"\\":"")+l))}return i}function G5e(t){const e=[],n=new RegExp(kD,"gy");let r;for(;r=n.exec(t);){const o=r[0];if(o[0]==="{"){const i=/^\{(?<min>\d+),(?<max>\d+)\}\??$/.exec(o);if(i){const{min:s,max:a}=i.groups;if(+s>+a&&o.endsWith("?")){n.lastIndex--,e.push(R9(o.slice(0,-1)));continue}}}e.push(R9(o))}return e}function fQ(t,e){if(!Array.isArray(t.body))throw new Error("Expected node with body array");if(t.body.length!==1)return!1;const n=t.body[0];return!e||Object.keys(e).every(r=>e[r]===n[r])}function q5e(t){return K5e.has(t.type)}const K5e=new Set(["AbsenceFunction","Backreference","CapturingGroup","Character","CharacterClass","CharacterSet","Group","Quantifier","Subroutine"]);function hQ(t,e={}){const n={flags:"",normalizeUnknownPropertyNames:!1,skipBackrefValidation:!1,skipLookbehindValidation:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...e,rules:{captureGroup:!1,singleline:!1,...e.rules}},r=_5e(t,{flags:n.flags,rules:{captureGroup:n.rules.captureGroup,singleline:n.rules.singleline}}),o=(p,g)=>{const y=r.tokens[i.nextIndex];switch(i.parent=p,i.nextIndex++,y.type){case"Alternator":return ap();case"Assertion":return W5e(y);case"Backreference":return Y5e(y,i);case"Character":return bE(y.value,{useLastValid:!!g.isCheckingRangeEnd});case"CharacterClassHyphen":return X5e(y,i,g);case"CharacterClassOpen":return Q5e(y,i,g);case"CharacterSet":return Z5e(y,i);case"Directive":return oVe(y.kind,{flags:y.flags});case"GroupOpen":return J5e(y,i,g);case"NamedCallout":return sVe(y.kind,y.tag,y.arguments);case"Quantifier":return eVe(y,i);case"Subroutine":return tVe(y,i);default:throw new Error(`Unexpected token type "${y.type}"`)}},i={capturingGroups:[],hasNumberedRef:!1,namedGroupsByName:new Map,nextIndex:0,normalizeUnknownPropertyNames:n.normalizeUnknownPropertyNames,parent:null,skipBackrefValidation:n.skipBackrefValidation,skipLookbehindValidation:n.skipLookbehindValidation,skipPropertyNameValidation:n.skipPropertyNameValidation,subroutines:[],tokens:r.tokens,unicodePropertyMap:n.unicodePropertyMap,walk:o},s=lVe(iVe(r.flags));let a=s.body[0];for(;i.nextIndex<r.tokens.length;){const p=o(a,{});p.type==="Alternative"?(s.body.push(p),a=p):a.body.push(p)}const{capturingGroups:l,hasNumberedRef:c,namedGroupsByName:d,subroutines:f}=i;if(c&&d.size&&!n.rules.captureGroup)throw new Error("Numbered backref/subroutine not allowed when using named capture");for(const{ref:p}of f)if(typeof p=="number"){if(p>l.length)throw new Error("Subroutine uses a group number that's not defined");p&&(l[p-1].isSubroutined=!0)}else if(d.has(p)){if(d.get(p).length>1)throw new Error(Ho`Subroutine uses a duplicate group name "\g<${p}>"`);d.get(p)[0].isSubroutined=!0}else throw new Error(Ho`Subroutine uses a group name that's not defined "\g<${p}>"`);return s}function W5e({kind:t}){return aM(ry({"^":"line_start",$:"line_end","\\A":"string_start","\\b":"word_boundary","\\B":"word_boundary","\\G":"search_start","\\y":"text_segment_boundary","\\Y":"text_segment_boundary","\\z":"string_end","\\Z":"string_end_newline"}[t],`Unexpected assertion kind "${t}"`),{negate:t===Ho`\B`||t===Ho`\Y`})}function Y5e({raw:t},e){const n=/^\\k[<']/.test(t),r=n?t.slice(3,-1):t.slice(1),o=(i,s=!1)=>{const a=e.capturingGroups.length;let l=!1;if(i>a)if(e.skipBackrefValidation)l=!0;else throw new Error(`Not enough capturing groups defined to the left "${t}"`);return e.hasNumberedRef=!0,lM(s?a+1-i:i,{orphan:l})};if(n){const i=/^(?<sign>-?)0*(?<num>[1-9]\d*)$/.exec(r);if(i)return o(+i.groups.num,!!i.groups.sign);if(/[-+]/.test(r))throw new Error(`Invalid backref name "${t}"`);if(!e.namedGroupsByName.has(r))throw new Error(`Group name not defined to the left "${t}"`);return lM(r)}return o(+r)}function X5e(t,e,n){const{tokens:r,walk:o}=e,i=e.parent,s=i.body.at(-1),a=r[e.nextIndex];if(!n.isCheckingRangeEnd&&s&&s.type!=="CharacterClass"&&s.type!=="CharacterClassRange"&&a&&a.type!=="CharacterClassOpen"&&a.type!=="CharacterClassClose"&&a.type!=="CharacterClassIntersector"){const l=o(i,{...n,isCheckingRangeEnd:!0});if(s.type==="Character"&&l.type==="Character")return i.body.pop(),rVe(s,l);throw new Error("Invalid character class range")}return bE(ny("-"))}function Q5e({negate:t},e,n){const{tokens:r,walk:o}=e,i=r[e.nextIndex],s=[aC()];let a=O9(i);for(;a.type!=="CharacterClassClose";){if(a.type==="CharacterClassIntersector")s.push(aC()),e.nextIndex++;else{const c=s.at(-1);c.body.push(o(c,n))}a=O9(r[e.nextIndex],i)}const l=aC({negate:t});return s.length===1?l.body=s[0].body:(l.kind="intersection",l.body=s.map(c=>c.body.length===1?c.body[0]:c)),e.nextIndex++,l}function Z5e({kind:t,negate:e,value:n},r){const{normalizeUnknownPropertyNames:o,skipPropertyNameValidation:i,unicodePropertyMap:s}=r;if(t==="property"){const a=wE(n);if(ED.has(a)&&!s?.has(a))t="posix",n=a;else return Cm(n,{negate:e,normalizeUnknownPropertyNames:o,skipPropertyNameValidation:i,unicodePropertyMap:s})}return t==="posix"?aVe(n,{negate:e}):cM(t,{negate:e})}function J5e(t,e,n){const{tokens:r,capturingGroups:o,namedGroupsByName:i,skipLookbehindValidation:s,walk:a}=e,l=cVe(t),c=l.type==="AbsenceFunction",d=N9(l),f=d&&l.negate;if(l.type==="CapturingGroup"&&(o.push(l),l.name&&S5e(i,l.name,[]).push(l)),c&&n.isInAbsenceFunction)throw new Error("Nested absence function not supported by Oniguruma");let p=P9(r[e.nextIndex]);for(;p.type!=="GroupClose";){if(p.type==="Alternator")l.body.push(ap()),e.nextIndex++;else{const g=l.body.at(-1),y=a(g,{...n,isInAbsenceFunction:n.isInAbsenceFunction||c,isInLookbehind:n.isInLookbehind||d,isInNegLookbehind:n.isInNegLookbehind||f});if(g.body.push(y),(d||n.isInLookbehind)&&!s){const b="Lookbehind includes a pattern not allowed by Oniguruma";if(f||n.isInNegLookbehind){if(M9(y)||y.type==="CapturingGroup")throw new Error(b)}else if(M9(y)||N9(y)&&y.negate)throw new Error(b)}}p=P9(r[e.nextIndex])}return e.nextIndex++,l}function eVe({kind:t,min:e,max:n},r){const o=r.parent,i=o.body.at(-1);if(!i||!q5e(i))throw new Error("Quantifier requires a repeatable token");const s=mQ(t,e,n,i);return o.body.pop(),s}function tVe({raw:t},e){const{capturingGroups:n,subroutines:r}=e;let o=t.slice(3,-1);const i=/^(?<sign>[-+]?)0*(?<num>[1-9]\d*)$/.exec(o);if(i){const a=+i.groups.num,l=n.length;if(e.hasNumberedRef=!0,o={"":a,"+":l+a,"-":l+1-a}[i.groups.sign],o<1)throw new Error("Invalid subroutine number")}else o==="0"&&(o=0);const s=gQ(o);return r.push(s),s}function nVe(t,e){return{type:"AbsenceFunction",kind:t,body:k0(e?.body)}}function ap(t){return{type:"Alternative",body:yQ(t?.body)}}function aM(t,e){const n={type:"Assertion",kind:t};return(t==="word_boundary"||t==="text_segment_boundary")&&(n.negate=!!e?.negate),n}function lM(t,e){const n=!!e?.orphan;return{type:"Backreference",ref:t,...n&&{orphan:n}}}function pQ(t,e){const n={name:void 0,isSubroutined:!1,...e};if(n.name!==void 0&&!uVe(n.name))throw new Error(`Group name "${n.name}" invalid in Oniguruma`);return{type:"CapturingGroup",number:t,...n.name&&{name:n.name},...n.isSubroutined&&{isSubroutined:n.isSubroutined},body:k0(e?.body)}}function bE(t,e){const n={useLastValid:!1,...e};if(t>1114111){const r=t.toString(16);if(n.useLastValid)t=1114111;else throw t>1310719?new Error(`Invalid code point out of range "\\x{${r}}"`):new Error(`Invalid code point out of range in JS "\\x{${r}}"`)}return{type:"Character",value:t}}function aC(t){const e={kind:"union",negate:!1,...t};return{type:"CharacterClass",kind:e.kind,negate:e.negate,body:yQ(t?.body)}}function rVe(t,e){if(e.value<t.value)throw new Error("Character class range out of order");return{type:"CharacterClassRange",min:t,max:e}}function cM(t,e){const n=!!e?.negate,r={type:"CharacterSet",kind:t};return(t==="digit"||t==="hex"||t==="newline"||t==="space"||t==="word")&&(r.negate=n),(t==="text_segment"||t==="newline"&&!n)&&(r.variableLength=!0),r}function oVe(t,e={}){if(t==="keep")return{type:"Directive",kind:t};if(t==="flags")return{type:"Directive",kind:t,flags:ry(e.flags)};throw new Error(`Unexpected directive kind "${t}"`)}function iVe(t){return{type:"Flags",...t}}function fl(t){const e=t?.atomic,n=t?.flags;if(e&&n)throw new Error("Atomic group cannot have flags");return{type:"Group",...e&&{atomic:e},...n&&{flags:n},body:k0(t?.body)}}function wh(t){const e={behind:!1,negate:!1,...t};return{type:"LookaroundAssertion",kind:e.behind?"lookbehind":"lookahead",negate:e.negate,body:k0(t?.body)}}function sVe(t,e,n){return{type:"NamedCallout",kind:t,tag:e,arguments:n}}function aVe(t,e){const n=!!e?.negate;if(!ED.has(t))throw new Error(`Invalid POSIX class "${t}"`);return{type:"CharacterSet",kind:"posix",value:t,negate:n}}function mQ(t,e,n,r){if(e>n)throw new Error("Invalid reversed quantifier range");return{type:"Quantifier",kind:t,min:e,max:n,body:r}}function lVe(t,e){return{type:"Regex",body:k0(e?.body),flags:t}}function gQ(t){return{type:"Subroutine",ref:t}}function Cm(t,e){const n={negate:!1,normalizeUnknownPropertyNames:!1,skipPropertyNameValidation:!1,unicodePropertyMap:null,...e};let r=n.unicodePropertyMap?.get(wE(t));if(!r){if(n.normalizeUnknownPropertyNames)r=dVe(t);else if(n.unicodePropertyMap&&!n.skipPropertyNameValidation)throw new Error(Ho`Invalid Unicode property "\p{${t}}"`)}return{type:"CharacterSet",kind:"property",value:r??t,negate:n.negate}}function cVe({flags:t,kind:e,name:n,negate:r,number:o}){switch(e){case"absence_repeater":return nVe("repeater");case"atomic":return fl({atomic:!0});case"capturing":return pQ(o,{name:n});case"group":return fl({flags:t});case"lookahead":case"lookbehind":return wh({behind:e==="lookbehind",negate:r});default:throw new Error(`Unexpected group kind "${e}"`)}}function k0(t){if(t===void 0)t=[ap()];else if(!Array.isArray(t)||!t.length||!t.every(e=>e.type==="Alternative"))throw new Error("Invalid body; expected array of one or more Alternative nodes");return t}function yQ(t){if(t===void 0)t=[];else if(!Array.isArray(t)||!t.every(e=>!!e.type))throw new Error("Invalid body; expected array of nodes");return t}function M9(t){return t.type==="LookaroundAssertion"&&t.kind==="lookahead"}function N9(t){return t.type==="LookaroundAssertion"&&t.kind==="lookbehind"}function uVe(t){return/^[\p{Alpha}\p{Pc}][^)]*$/u.test(t)}function dVe(t){return t.trim().replace(/[- _]+/g,"_").replace(/[A-Z][a-z]+(?=[A-Z])/g,"$&_").replace(/[A-Za-z]+/g,e=>e[0].toUpperCase()+e.slice(1).toLowerCase())}function wE(t){return t.replace(/[- _]+/g,"").toLowerCase()}function O9(t,e){return ry(t,`${e?.type==="Character"&&e.value===93?"Empty":"Unclosed"} character class`)}function P9(t){return ry(t,"Unclosed group")}function Vv(t,e,n=null){function r(i,s){for(let a=0;a<i.length;a++){const l=o(i[a],s,a,i);a=Math.max(-1,a+l)}}function o(i,s=null,a=null,l=null){let c=0,d=!1;const f={node:i,parent:s,key:a,container:l,root:t,remove(){Ew(l).splice(Math.max(0,lm(a)+c),1),c--,d=!0},removeAllNextSiblings(){return Ew(l).splice(lm(a)+1)},removeAllPrevSiblings(){const k=lm(a)+c;return c-=k,Ew(l).splice(0,Math.max(0,k))},replaceWith(k,M={}){const N=!!M.traverse;l?l[Math.max(0,lm(a)+c)]=k:ry(s,"Can't replace root node")[a]=k,N&&o(k,s,a,l),d=!0},replaceWithMultiple(k,M={}){const N=!!M.traverse;if(Ew(l).splice(Math.max(0,lm(a)+c),1,...k),c+=k.length-1,N){let j=0;for(let B=0;B<k.length;B++)j+=o(k[B],s,lm(a)+B+j,l)}d=!0},skip(){d=!0}},{type:p}=i,g=e["*"],y=e[p],b=typeof g=="function"?g:g?.enter,_=typeof y=="function"?y:y?.enter;if(b?.(f,n),_?.(f,n),!d)switch(p){case"AbsenceFunction":case"CapturingGroup":case"Group":r(i.body,i);break;case"Alternative":case"CharacterClass":r(i.body,i);break;case"Assertion":case"Backreference":case"Character":case"CharacterSet":case"Directive":case"Flags":case"NamedCallout":case"Subroutine":break;case"CharacterClassRange":o(i.min,i,"min"),o(i.max,i,"max");break;case"LookaroundAssertion":r(i.body,i);break;case"Quantifier":o(i.body,i,"body");break;case"Regex":r(i.body,i),o(i.flags,i,"flags");break;default:throw new Error(`Unexpected node type "${p}"`)}return y?.exit?.(f,n),g?.exit?.(f,n),c}return o(t),t}function Ew(t){if(!Array.isArray(t))throw new Error("Container expected");return t}function lm(t){if(typeof t!="number")throw new Error("Numeric key expected");return t}const fVe=String.raw`\(\?(?:[:=!>A-Za-z\-]|<[=!]|\(DEFINE\))`;function hVe(t,e){for(let n=0;n<t.length;n++)t[n]>=e&&t[n]++}function pVe(t,e,n,r){return t.slice(0,e)+r+t.slice(e+n.length)}const Va=Object.freeze({DEFAULT:"DEFAULT",CHAR_CLASS:"CHAR_CLASS"});function TD(t,e,n,r){const o=new RegExp(String.raw`${e}|(?<$skip>\[\^?|\\?.)`,"gsu"),i=[!1];let s=0,a="";for(const l of t.matchAll(o)){const{0:c,groups:{$skip:d}}=l;if(!d&&(!r||r===Va.DEFAULT==!s)){n instanceof Function?a+=n(l,{context:s?Va.CHAR_CLASS:Va.DEFAULT,negated:i[i.length-1]}):a+=n;continue}c[0]==="["?(s++,i.push(c[1]==="^")):c==="]"&&s&&(s--,i.pop()),a+=c}return a}function vQ(t,e,n,r){TD(t,e,n,r)}function mVe(t,e,n=0,r){if(!new RegExp(e,"su").test(t))return null;const o=new RegExp(`${e}|(?<$skip>\\\\?.)`,"gsu");o.lastIndex=n;let i=0,s;for(;s=o.exec(t);){const{0:a,groups:{$skip:l}}=s;if(!l&&(!r||r===Va.DEFAULT==!i))return s;a==="["?i++:a==="]"&&i&&i--,o.lastIndex==s.index&&o.lastIndex++}return null}function kw(t,e,n){return!!mVe(t,e,0,n)}function gVe(t,e){const n=/\\?./gsu;n.lastIndex=e;let r=t.length,o=0,i=1,s;for(;s=n.exec(t);){const[a]=s;if(a==="[")o++;else if(o)a==="]"&&o--;else if(a==="(")i++;else if(a===")"&&(i--,!i)){r=s.index;break}}return t.slice(e,r)}const D9=new RegExp(String.raw`(?<noncapturingStart>${fVe})|(?<capturingStart>\((?:\?<[^>]+>)?)|\\?.`,"gsu");function yVe(t,e){const n=e?.hiddenCaptures??[];let r=e?.captureTransfers??new Map;if(!/\(\?>/.test(t))return{pattern:t,captureTransfers:r,hiddenCaptures:n};const o="(?>",i="(?:(?=(",s=[0],a=[];let l=0,c=0,d=NaN,f;do{f=!1;let p=0,g=0,y=!1,b;for(D9.lastIndex=Number.isNaN(d)?0:d+i.length;b=D9.exec(t);){const{0:_,index:k,groups:{capturingStart:M,noncapturingStart:N}}=b;if(_==="[")p++;else if(p)_==="]"&&p--;else if(_===o&&!y)d=k,y=!0;else if(y&&N)g++;else if(M)y?g++:(l++,s.push(l+c));else if(_===")"&&y){if(!g){c++;const j=l+c;if(t=`${t.slice(0,d)}${i}${t.slice(d+o.length,k)}))<$$${j}>)${t.slice(k+1)}`,f=!0,a.push(j),hVe(n,j),r.size){const B=new Map;r.forEach((F,D)=>{B.set(D>=j?D+1:D,F.map(R=>R>=j?R+1:R))}),r=B}break}g--}}}while(f);return n.push(...a),t=TD(t,String.raw`\\(?<backrefNum>[1-9]\d*)|<\$\$(?<wrappedBackrefNum>\d+)>`,({0:p,groups:{backrefNum:g,wrappedBackrefNum:y}})=>{if(g){const b=+g;if(b>s.length-1)throw new Error(`Backref "${p}" greater than number of captures`);return`\\${s[b]}`}return`\\${y}`},Va.DEFAULT),{pattern:t,captureTransfers:r,hiddenCaptures:n}}const bQ=String.raw`(?:[?*+]|\{\d+(?:,\d*)?\})`,C2=new RegExp(String.raw`
\\(?: \d+
  | c[A-Za-z]
  | [gk]<[^>]+>
  | [pPu]\{[^\}]+\}
  | u[A-Fa-f\d]{4}
  | x[A-Fa-f\d]{2}
  )
| \((?: \? (?: [:=!>]
  | <(?:[=!]|[^>]+>)
  | [A-Za-z\-]+:
  | \(DEFINE\)
  ))?
| (?<qBase>${bQ})(?<qMod>[?+]?)(?<invalidQ>[?*+\{]?)
| \\?.
`.replace(/\s+/g,""),"gsu");function vVe(t){if(!new RegExp(`${bQ}\\+`).test(t))return{pattern:t};const e=[];let n=null,r=null,o="",i=0,s;for(C2.lastIndex=0;s=C2.exec(t);){const{0:a,index:l,groups:{qBase:c,qMod:d,invalidQ:f}}=s;if(a==="[")i||(r=l),i++;else if(a==="]")i?i--:r=null;else if(!i)if(d==="+"&&o&&!o.startsWith("(")){if(f)throw new Error(`Invalid quantifier "${a}"`);let p=-1;if(/^\{\d+\}$/.test(c))t=pVe(t,l+c.length,d,"");else{if(o===")"||o==="]"){const g=o===")"?n:r;if(g===null)throw new Error(`Invalid unmatched "${o}"`);t=`${t.slice(0,g)}(?>${t.slice(g,l)}${c})${t.slice(l+a.length)}`}else t=`${t.slice(0,l-o.length)}(?>${o}${c})${t.slice(l+a.length)}`;p+=4}C2.lastIndex+=p}else a[0]==="("?e.push(l):a===")"&&(n=e.length?e.pop():null);o=a}return{pattern:t}}const Da=String.raw,bVe=Da`\\g<(?<gRNameOrNum>[^>&]+)&R=(?<gRDepth>[^>]+)>`,uM=Da`\(\?R=(?<rDepth>[^\)]+)\)|${bVe}`,CE=Da`\(\?<(?![=!])(?<captureName>[^>]+)>`,wQ=Da`${CE}|(?<unnamed>\()(?!\?)`,hh=new RegExp(Da`${CE}|${uM}|\(\?|\\?.`,"gsu"),S2="Cannot use multiple overlapping recursions";function wVe(t,e){const{hiddenCaptures:n,mode:r}={hiddenCaptures:[],mode:"plugin",...e};let o=e?.captureTransfers??new Map;if(!new RegExp(uM,"su").test(t))return{pattern:t,captureTransfers:o,hiddenCaptures:n};if(r==="plugin"&&kw(t,Da`\(\?\(DEFINE\)`,Va.DEFAULT))throw new Error("DEFINE groups cannot be used with recursion");const i=[],s=kw(t,Da`\\[1-9]`,Va.DEFAULT),a=new Map,l=[];let c=!1,d=0,f=0,p;for(hh.lastIndex=0;p=hh.exec(t);){const{0:g,groups:{captureName:y,rDepth:b,gRNameOrNum:_,gRDepth:k}}=p;if(g==="[")d++;else if(d)g==="]"&&d--;else if(b){if(L9(b),c)throw new Error(S2);if(s)throw new Error(`${r==="external"?"Backrefs":"Numbered backrefs"} cannot be used with global recursion`);const M=t.slice(0,p.index),N=t.slice(hh.lastIndex);if(kw(N,uM,Va.DEFAULT))throw new Error(S2);const j=+b-1;t=V9(M,N,j,!1,n,i,f),o=B9(o,M,j,i.length,0,f);break}else if(_){L9(k);let M=!1;for(const q of l)if(q.name===_||q.num===+_){if(M=!0,q.hasRecursedWithin)throw new Error(S2);break}if(!M)throw new Error(Da`Recursive \g cannot be used outside the referenced group "${r==="external"?_:Da`\g<${_}&R=${k}>`}"`);const N=a.get(_),j=gVe(t,N);if(s&&kw(j,Da`${CE}|\((?!\?)`,Va.DEFAULT))throw new Error(`${r==="external"?"Backrefs":"Numbered backrefs"} cannot be used with recursion of capturing groups`);const B=t.slice(N,p.index),F=j.slice(B.length+g.length),D=i.length,R=+k-1,I=V9(B,F,R,!0,n,i,f);o=B9(o,B,R,i.length-D,D,f);const L=t.slice(0,N),z=t.slice(N+j.length);t=`${L}${I}${z}`,hh.lastIndex+=I.length-g.length-B.length-F.length,l.forEach(q=>q.hasRecursedWithin=!0),c=!0}else if(y)f++,a.set(String(f),hh.lastIndex),a.set(y,hh.lastIndex),l.push({num:f,name:y});else if(g[0]==="("){const M=g==="(";M&&(f++,a.set(String(f),hh.lastIndex)),l.push(M?{num:f}:{})}else g===")"&&l.pop()}return n.push(...i),{pattern:t,captureTransfers:o,hiddenCaptures:n}}function L9(t){const e=`Max depth must be integer between 2 and 100; used ${t}`;if(!/^[1-9]\d*$/.test(t))throw new Error(e);if(t=+t,t<2||t>100)throw new Error(e)}function V9(t,e,n,r,o,i,s){const a=new Set;r&&vQ(t+e,CE,({groups:{captureName:c}})=>{a.add(c)},Va.DEFAULT);const l=[n,r?a:null,o,i,s];return`${t}${j9(`(?:${t}`,"forward",...l)}(?:)${j9(`${e})`,"backward",...l)}${e}`}function j9(t,e,n,r,o,i,s){const l=d=>e==="forward"?d+2:n-d+2-1;let c="";for(let d=0;d<n;d++){const f=l(d);c+=TD(t,Da`${wQ}|\\k<(?<backref>[^>]+)>`,({0:p,groups:{captureName:g,unnamed:y,backref:b}})=>{if(b&&r&&!r.has(b))return p;const _=`_$${f}`;if(y||g){const k=s+i.length+1;return i.push(k),CVe(o,k),y?p:`(?<${g}${_}>`}return Da`\k<${b}${_}>`},Va.DEFAULT)}return c}function CVe(t,e){for(let n=0;n<t.length;n++)t[n]>=e&&t[n]++}function B9(t,e,n,r,o,i){if(t.size&&r){let s=0;vQ(e,wQ,()=>s++,Va.DEFAULT);const a=i-s+o,l=new Map;return t.forEach((c,d)=>{const f=(r-s*n)/n,p=s*n,g=d>a+s?d+r:d,y=[];for(const b of c)if(b<=a)y.push(b);else if(b>a+s+f)y.push(b+r);else if(b<=a+s)for(let _=0;_<=n;_++)y.push(b+s*_);else for(let _=0;_<=n;_++)y.push(b+p+f*_);l.set(g,y)}),l}return t}var Ao=String.fromCodePoint,Xt=String.raw,Tu={flagGroups:(()=>{try{new RegExp("(?i:)")}catch{return!1}return!0})(),unicodeSets:(()=>{try{new RegExp("","v")}catch{return!1}return!0})()};Tu.bugFlagVLiteralHyphenIsRange=Tu.unicodeSets?(()=>{try{new RegExp(Xt`[\d\-a]`,"v")}catch{return!0}return!1})():!1;Tu.bugNestedClassIgnoresNegation=Tu.unicodeSets&&new RegExp("[[^a]]","v").test("a");function g_(t,{enable:e,disable:n}){return{dotAll:!n?.dotAll&&!!(e?.dotAll||t.dotAll),ignoreCase:!n?.ignoreCase&&!!(e?.ignoreCase||t.ignoreCase)}}function Rb(t,e,n){return t.has(e)||t.set(e,n),t.get(e)}function dM(t,e){return $9[t]>=$9[e]}function SVe(t,e){if(t==null)throw new Error(e??"Value expected");return t}var $9={ES2025:2025,ES2024:2024,ES2018:2018},_Ve={auto:"auto",ES2025:"ES2025",ES2024:"ES2024",ES2018:"ES2018"};function CQ(t={}){if({}.toString.call(t)!=="[object Object]")throw new Error("Unexpected options");if(t.target!==void 0&&!_Ve[t.target])throw new Error(`Unexpected target "${t.target}"`);const e={accuracy:"default",avoidSubclass:!1,flags:"",global:!1,hasIndices:!1,lazyCompileLength:1/0,target:"auto",verbose:!1,...t,rules:{allowOrphanBackrefs:!1,asciiWordBoundaries:!1,captureGroup:!1,recursionLimit:20,singleline:!1,...t.rules}};return e.target==="auto"&&(e.target=Tu.flagGroups?"ES2025":Tu.unicodeSets?"ES2024":"ES2018"),e}var xVe="[	-\r ]",EVe=new Set([Ao(304),Ao(305)]),iu=Xt`[\p{L}\p{M}\p{N}\p{Pc}]`;function SQ(t){if(EVe.has(t))return[t];const e=new Set,n=t.toLowerCase(),r=n.toUpperCase(),o=AVe.get(n),i=kVe.get(n),s=TVe.get(n);return[...r].length===1&&e.add(r),s&&e.add(s),o&&e.add(o),e.add(n),i&&e.add(i),[...e]}var AD=new Map(`C Other
Cc Control cntrl
Cf Format
Cn Unassigned
Co Private_Use
Cs Surrogate
L Letter
LC Cased_Letter
Ll Lowercase_Letter
Lm Modifier_Letter
Lo Other_Letter
Lt Titlecase_Letter
Lu Uppercase_Letter
M Mark Combining_Mark
Mc Spacing_Mark
Me Enclosing_Mark
Mn Nonspacing_Mark
N Number
Nd Decimal_Number digit
Nl Letter_Number
No Other_Number
P Punctuation punct
Pc Connector_Punctuation
Pd Dash_Punctuation
Pe Close_Punctuation
Pf Final_Punctuation
Pi Initial_Punctuation
Po Other_Punctuation
Ps Open_Punctuation
S Symbol
Sc Currency_Symbol
Sk Modifier_Symbol
Sm Math_Symbol
So Other_Symbol
Z Separator
Zl Line_Separator
Zp Paragraph_Separator
Zs Space_Separator
ASCII
ASCII_Hex_Digit AHex
Alphabetic Alpha
Any
Assigned
Bidi_Control Bidi_C
Bidi_Mirrored Bidi_M
Case_Ignorable CI
Cased
Changes_When_Casefolded CWCF
Changes_When_Casemapped CWCM
Changes_When_Lowercased CWL
Changes_When_NFKC_Casefolded CWKCF
Changes_When_Titlecased CWT
Changes_When_Uppercased CWU
Dash
Default_Ignorable_Code_Point DI
Deprecated Dep
Diacritic Dia
Emoji
Emoji_Component EComp
Emoji_Modifier EMod
Emoji_Modifier_Base EBase
Emoji_Presentation EPres
Extended_Pictographic ExtPict
Extender Ext
Grapheme_Base Gr_Base
Grapheme_Extend Gr_Ext
Hex_Digit Hex
IDS_Binary_Operator IDSB
IDS_Trinary_Operator IDST
ID_Continue IDC
ID_Start IDS
Ideographic Ideo
Join_Control Join_C
Logical_Order_Exception LOE
Lowercase Lower
Math
Noncharacter_Code_Point NChar
Pattern_Syntax Pat_Syn
Pattern_White_Space Pat_WS
Quotation_Mark QMark
Radical
Regional_Indicator RI
Sentence_Terminal STerm
Soft_Dotted SD
Terminal_Punctuation Term
Unified_Ideograph UIdeo
Uppercase Upper
Variation_Selector VS
White_Space space
XID_Continue XIDC
XID_Start XIDS`.split(/\s/).map(t=>[wE(t),t])),kVe=new Map([["s",Ao(383)],[Ao(383),"s"]]),TVe=new Map([[Ao(223),Ao(7838)],[Ao(107),Ao(8490)],[Ao(229),Ao(8491)],[Ao(969),Ao(8486)]]),AVe=new Map([Rd(453),Rd(456),Rd(459),Rd(498),..._2(8072,8079),..._2(8088,8095),..._2(8104,8111),Rd(8124),Rd(8140),Rd(8188)]),RVe=new Map([["alnum",Xt`[\p{Alpha}\p{Nd}]`],["alpha",Xt`\p{Alpha}`],["ascii",Xt`\p{ASCII}`],["blank",Xt`[\p{Zs}\t]`],["cntrl",Xt`\p{Cc}`],["digit",Xt`\p{Nd}`],["graph",Xt`[\P{space}&&\P{Cc}&&\P{Cn}&&\P{Cs}]`],["lower",Xt`\p{Lower}`],["print",Xt`[[\P{space}&&\P{Cc}&&\P{Cn}&&\P{Cs}]\p{Zs}]`],["punct",Xt`[\p{P}\p{S}]`],["space",Xt`\p{space}`],["upper",Xt`\p{Upper}`],["word",Xt`[\p{Alpha}\p{M}\p{Nd}\p{Pc}]`],["xdigit",Xt`\p{AHex}`]]);function IVe(t,e){const n=[];for(let r=t;r<=e;r++)n.push(r);return n}function Rd(t){const e=Ao(t);return[e.toLowerCase(),e]}function _2(t,e){return IVe(t,e).map(n=>Rd(n))}var _Q=new Set(["Lower","Lowercase","Upper","Uppercase","Ll","Lowercase_Letter","Lt","Titlecase_Letter","Lu","Uppercase_Letter"]);function MVe(t,e){const n={accuracy:"default",asciiWordBoundaries:!1,avoidSubclass:!1,bestEffortTarget:"ES2025",...e};xQ(t);const r={accuracy:n.accuracy,asciiWordBoundaries:n.asciiWordBoundaries,avoidSubclass:n.avoidSubclass,flagDirectivesByAlt:new Map,jsGroupNameMap:new Map,minTargetEs2024:dM(n.bestEffortTarget,"ES2024"),passedLookbehind:!1,strategy:null,subroutineRefMap:new Map,supportedGNodes:new Set,digitIsAscii:t.flags.digitIsAscii,spaceIsAscii:t.flags.spaceIsAscii,wordIsAscii:t.flags.wordIsAscii};Vv(t,NVe,r);const o={dotAll:t.flags.dotAll,ignoreCase:t.flags.ignoreCase},i={currentFlags:o,prevFlags:null,globalFlags:o,groupOriginByCopy:new Map,groupsByName:new Map,multiplexCapturesToLeftByRef:new Map,openRefs:new Map,reffedNodesByReferencer:new Map,subroutineRefMap:r.subroutineRefMap};Vv(t,OVe,i);const s={groupsByName:i.groupsByName,highestOrphanBackref:0,numCapturesToLeft:0,reffedNodesByReferencer:i.reffedNodesByReferencer};return Vv(t,PVe,s),t._originMap=i.groupOriginByCopy,t._strategy=r.strategy,t}var NVe={AbsenceFunction({node:t,parent:e,replaceWith:n}){const{body:r,kind:o}=t;if(o==="repeater"){const i=fl();i.body[0].body.push(wh({negate:!0,body:r}),Cm("Any"));const s=fl();s.body[0].body.push(mQ("greedy",0,1/0,i)),n(oo(s,e),{traverse:!0})}else throw new Error('Unsupported absence function "(?~|"')},Alternative:{enter({node:t,parent:e,key:n},{flagDirectivesByAlt:r}){const o=t.body.filter(i=>i.kind==="flags");for(let i=n+1;i<e.body.length;i++){const s=e.body[i];Rb(r,s,[]).push(...o)}},exit({node:t},{flagDirectivesByAlt:e}){if(e.get(t)?.length){const n=kQ(e.get(t));if(n){const r=fl({flags:n});r.body[0].body=t.body,t.body=[oo(r,t)]}}}},Assertion({node:t,parent:e,key:n,container:r,root:o,remove:i,replaceWith:s},a){const{kind:l,negate:c}=t,{asciiWordBoundaries:d,avoidSubclass:f,supportedGNodes:p,wordIsAscii:g}=a;if(l==="text_segment_boundary")throw new Error(`Unsupported text segment boundary "\\${c?"Y":"y"}"`);if(l==="line_end")s(oo(wh({body:[ap({body:[aM("string_end")]}),ap({body:[bE(10)]})]}),e));else if(l==="line_start")s(oo(su(Xt`(?<=\A|\n(?!\z))`,{skipLookbehindValidation:!0}),e));else if(l==="search_start")if(p.has(t))o.flags.sticky=!0,i();else{const y=r[n-1];if(y&&$Ve(y))s(oo(wh({negate:!0}),e));else{if(f)throw new Error(Xt`Uses "\G" in a way that requires a subclass`);s(Id(aM("string_start"),e)),a.strategy="clip_search"}}else if(!(l==="string_end"||l==="string_start"))if(l==="string_end_newline")s(oo(su(Xt`(?=\n?\z)`),e));else if(l==="word_boundary"){if(!g&&!d){const y=`(?:(?<=${iu})(?!${iu})|(?<!${iu})(?=${iu}))`,b=`(?:(?<=${iu})(?=${iu})|(?<!${iu})(?!${iu}))`;s(oo(su(c?b:y),e))}}else throw new Error(`Unexpected assertion kind "${l}"`)},Backreference({node:t},{jsGroupNameMap:e}){let{ref:n}=t;typeof n=="string"&&!E2(n)&&(n=x2(n,e),t.ref=n)},CapturingGroup({node:t},{jsGroupNameMap:e,subroutineRefMap:n}){let{name:r}=t;r&&!E2(r)&&(r=x2(r,e),t.name=r),n.set(t.number,t),r&&n.set(r,t)},CharacterClassRange({node:t,parent:e,replaceWith:n}){if(e.kind==="intersection"){const r=aC({body:[t]});n(oo(r,e),{traverse:!0})}},CharacterSet({node:t,parent:e,replaceWith:n},{accuracy:r,minTargetEs2024:o,digitIsAscii:i,spaceIsAscii:s,wordIsAscii:a}){const{kind:l,negate:c,value:d}=t;if(i&&(l==="digit"||d==="digit")){n(Id(cM("digit",{negate:c}),e));return}if(s&&(l==="space"||d==="space")){n(oo(k2(su(xVe),c),e));return}if(a&&(l==="word"||d==="word")){n(Id(cM("word",{negate:c}),e));return}if(l==="any")n(Id(Cm("Any"),e));else if(l==="digit")n(Id(Cm("Nd",{negate:c}),e));else if(l!=="dot")if(l==="text_segment"){if(r==="strict")throw new Error(Xt`Use of "\X" requires non-strict accuracy`);const f="\\p{Emoji}(?:\\p{EMod}|\\uFE0F\\u20E3?|[\\x{E0020}-\\x{E007E}]+\\x{E007F})?",p=Xt`\p{RI}{2}|${f}(?:\u200D${f})*`;n(oo(su(Xt`(?>\r\n|${o?Xt`\p{RGI_Emoji}`:p}|\P{M}\p{M}*)`,{skipPropertyNameValidation:!0}),e))}else if(l==="hex")n(Id(Cm("AHex",{negate:c}),e));else if(l==="newline")n(oo(su(c?`[^
]`:`(?>\r
?|[
\v\f\u2028\u2029])`),e));else if(l==="posix")if(!o&&(d==="graph"||d==="print")){if(r==="strict")throw new Error(`POSIX class "${d}" requires min target ES2024 or non-strict accuracy`);let f={graph:"!-~",print:" -~"}[d];c&&(f=`\0-${Ao(f.codePointAt(0)-1)}${Ao(f.codePointAt(2)+1)}-􏿿`),n(oo(su(`[${f}]`),e))}else n(oo(k2(su(RVe.get(d)),c),e));else if(l==="property")AD.has(wE(d))||(t.key="sc");else if(l==="space")n(Id(Cm("space",{negate:c}),e));else if(l==="word")n(oo(k2(su(iu),c),e));else throw new Error(`Unexpected character set kind "${l}"`)},Directive({node:t,parent:e,root:n,remove:r,replaceWith:o,removeAllPrevSiblings:i,removeAllNextSiblings:s}){const{kind:a,flags:l}=t;if(a==="flags")if(!l.enable&&!l.disable)r();else{const c=fl({flags:l});c.body[0].body=s(),o(oo(c,e),{traverse:!0})}else if(a==="keep"){const c=n.body[0],f=n.body.length===1&&fQ(c,{type:"Group"})&&c.body[0].body.length===1?c.body[0]:n;if(e.parent!==f||f.body.length>1)throw new Error(Xt`Uses "\K" in a way that's unsupported`);const p=wh({behind:!0});p.body[0].body=i(),o(oo(p,e))}else throw new Error(`Unexpected directive kind "${a}"`)},Flags({node:t,parent:e}){if(t.posixIsAscii)throw new Error('Unsupported flag "P"');if(t.textSegmentMode==="word")throw new Error('Unsupported flag "y{w}"');["digitIsAscii","extended","posixIsAscii","spaceIsAscii","wordIsAscii","textSegmentMode"].forEach(n=>delete t[n]),Object.assign(t,{global:!1,hasIndices:!1,multiline:!1,sticky:t.sticky??!1}),e.options={disable:{x:!0,n:!0},force:{v:!0}}},Group({node:t}){if(!t.flags)return;const{enable:e,disable:n}=t.flags;e?.extended&&delete e.extended,n?.extended&&delete n.extended,e?.dotAll&&n?.dotAll&&delete e.dotAll,e?.ignoreCase&&n?.ignoreCase&&delete e.ignoreCase,e&&!Object.keys(e).length&&delete t.flags.enable,n&&!Object.keys(n).length&&delete t.flags.disable,!t.flags.enable&&!t.flags.disable&&delete t.flags},LookaroundAssertion({node:t},e){const{kind:n}=t;n==="lookbehind"&&(e.passedLookbehind=!0)},NamedCallout({node:t,parent:e,replaceWith:n}){const{kind:r}=t;if(r==="fail")n(oo(wh({negate:!0}),e));else throw new Error(`Unsupported named callout "(*${r.toUpperCase()}"`)},Quantifier({node:t}){if(t.body.type==="Quantifier"){const e=fl();e.body[0].body.push(t.body),t.body=oo(e,t)}},Regex:{enter({node:t},{supportedGNodes:e}){const n=[];let r=!1,o=!1;for(const i of t.body)if(i.body.length===1&&i.body[0].kind==="search_start")i.body.pop();else{const s=AQ(i.body);s?(r=!0,Array.isArray(s)?n.push(...s):n.push(s)):o=!0}r&&!o&&n.forEach(i=>e.add(i))},exit(t,{accuracy:e,passedLookbehind:n,strategy:r}){if(e==="strict"&&n&&r)throw new Error(Xt`Uses "\G" in a way that requires non-strict accuracy`)}},Subroutine({node:t},{jsGroupNameMap:e}){let{ref:n}=t;typeof n=="string"&&!E2(n)&&(n=x2(n,e),t.ref=n)}},OVe={Backreference({node:t},{multiplexCapturesToLeftByRef:e,reffedNodesByReferencer:n}){const{orphan:r,ref:o}=t;r||n.set(t,[...e.get(o).map(({node:i})=>i)])},CapturingGroup:{enter({node:t,parent:e,replaceWith:n,skip:r},{groupOriginByCopy:o,groupsByName:i,multiplexCapturesToLeftByRef:s,openRefs:a,reffedNodesByReferencer:l}){const c=o.get(t);if(c&&a.has(t.number)){const f=Id(F9(t.number),e);l.set(f,a.get(t.number)),n(f);return}a.set(t.number,t),s.set(t.number,[]),t.name&&Rb(s,t.name,[]);const d=s.get(t.name??t.number);for(let f=0;f<d.length;f++){const p=d[f];if(c===p.node||c&&c===p.origin||t===p.origin){d.splice(f,1);break}}if(s.get(t.number).push({node:t,origin:c}),t.name&&s.get(t.name).push({node:t,origin:c}),t.name){const f=Rb(i,t.name,new Map);let p=!1;if(c)p=!0;else for(const g of f.values())if(!g.hasDuplicateNameToRemove){p=!0;break}i.get(t.name).set(t,{node:t,hasDuplicateNameToRemove:p})}},exit({node:t},{openRefs:e}){e.delete(t.number)}},Group:{enter({node:t},e){e.prevFlags=e.currentFlags,t.flags&&(e.currentFlags=g_(e.currentFlags,t.flags))},exit(t,e){e.currentFlags=e.prevFlags}},Subroutine({node:t,parent:e,replaceWith:n},r){const{isRecursive:o,ref:i}=t;if(o){let d=e;for(;(d=d.parent)&&!(d.type==="CapturingGroup"&&(d.name===i||d.number===i)););r.reffedNodesByReferencer.set(t,d);return}const s=r.subroutineRefMap.get(i),a=i===0,l=a?F9(0):EQ(s,r.groupOriginByCopy,null);let c=l;if(!a){const d=kQ(VVe(s,p=>p.type==="Group"&&!!p.flags)),f=d?g_(r.globalFlags,d):r.globalFlags;DVe(f,r.currentFlags)||(c=fl({flags:jVe(f)}),c.body[0].body.push(l))}n(oo(c,e),{traverse:!a})}},PVe={Backreference({node:t,parent:e,replaceWith:n},r){if(t.orphan){r.highestOrphanBackref=Math.max(r.highestOrphanBackref,t.ref);return}const i=r.reffedNodesByReferencer.get(t).filter(s=>LVe(s,t));if(!i.length)n(oo(wh({negate:!0}),e));else if(i.length>1){const s=fl({atomic:!0,body:i.reverse().map(a=>ap({body:[lM(a.number)]}))});n(oo(s,e))}else t.ref=i[0].number},CapturingGroup({node:t},e){t.number=++e.numCapturesToLeft,t.name&&e.groupsByName.get(t.name).get(t).hasDuplicateNameToRemove&&delete t.name},Regex:{exit({node:t},e){const n=Math.max(e.highestOrphanBackref-e.numCapturesToLeft,0);for(let r=0;r<n;r++){const o=pQ();t.body.at(-1).body.push(o)}}},Subroutine({node:t},e){!t.isRecursive||t.ref===0||(t.ref=e.reffedNodesByReferencer.get(t).number)}};function xQ(t){Vv(t,{"*"({node:e,parent:n}){e.parent=n}})}function DVe(t,e){return t.dotAll===e.dotAll&&t.ignoreCase===e.ignoreCase}function LVe(t,e){let n=e;do{if(n.type==="Regex")return!1;if(n.type==="Alternative")continue;if(n===t)return!1;const r=TQ(n.parent);for(const o of r){if(o===n)break;if(o===t||RQ(o,t))return!0}}while(n=n.parent);throw new Error("Unexpected path")}function EQ(t,e,n,r){const o=Array.isArray(t)?[]:{};for(const[i,s]of Object.entries(t))i==="parent"?o.parent=Array.isArray(n)?r:n:s&&typeof s=="object"?o[i]=EQ(s,e,o,n):(i==="type"&&s==="CapturingGroup"&&e.set(o,e.get(t)??t),o[i]=s);return o}function F9(t){const e=gQ(t);return e.isRecursive=!0,e}function VVe(t,e){const n=[];for(;t=t.parent;)(!e||e(t))&&n.push(t);return n}function x2(t,e){if(e.has(t))return e.get(t);const n=`$${e.size}_${t.replace(/^[^$_\p{IDS}]|[^$\u200C\u200D\p{IDC}]/ug,"_")}`;return e.set(t,n),n}function kQ(t){const e=["dotAll","ignoreCase"],n={enable:{},disable:{}};return t.forEach(({flags:r})=>{e.forEach(o=>{r.enable?.[o]&&(delete n.disable[o],n.enable[o]=!0),r.disable?.[o]&&(n.disable[o]=!0)})}),Object.keys(n.enable).length||delete n.enable,Object.keys(n.disable).length||delete n.disable,n.enable||n.disable?n:null}function jVe({dotAll:t,ignoreCase:e}){const n={};return(t||e)&&(n.enable={},t&&(n.enable.dotAll=!0),e&&(n.enable.ignoreCase=!0)),(!t||!e)&&(n.disable={},!t&&(n.disable.dotAll=!0),!e&&(n.disable.ignoreCase=!0)),n}function TQ(t){if(!t)throw new Error("Node expected");const{body:e}=t;return Array.isArray(e)?e:e?[e]:null}function AQ(t){const e=t.find(n=>n.kind==="search_start"||FVe(n,{negate:!1})||!BVe(n));if(!e)return null;if(e.kind==="search_start")return e;if(e.type==="LookaroundAssertion")return e.body[0].body[0];if(e.type==="CapturingGroup"||e.type==="Group"){const n=[];for(const r of e.body){const o=AQ(r.body);if(!o)return null;Array.isArray(o)?n.push(...o):n.push(o)}return n}return null}function RQ(t,e){const n=TQ(t)??[];for(const r of n)if(r===e||RQ(r,e))return!0;return!1}function BVe({type:t}){return t==="Assertion"||t==="Directive"||t==="LookaroundAssertion"}function $Ve(t){const e=["Character","CharacterClass","CharacterSet"];return e.includes(t.type)||t.type==="Quantifier"&&t.min&&e.includes(t.body.type)}function FVe(t,e){const n={negate:null,...e};return t.type==="LookaroundAssertion"&&(n.negate===null||t.negate===n.negate)&&t.body.length===1&&fQ(t.body[0],{type:"Assertion",kind:"search_start"})}function E2(t){return/^[$_\p{IDS}][$\u200C\u200D\p{IDC}]*$/u.test(t)}function su(t,e){const r=hQ(t,{...e,unicodePropertyMap:AD}).body;return r.length>1||r[0].body.length>1?fl({body:r}):r[0].body[0]}function k2(t,e){return t.negate=e,t}function Id(t,e){return t.parent=e,t}function oo(t,e){return xQ(t),t.parent=e,t}function HVe(t,e){const n=CQ(e),r=dM(n.target,"ES2024"),o=dM(n.target,"ES2025"),i=n.rules.recursionLimit;if(!Number.isInteger(i)||i<2||i>20)throw new Error("Invalid recursionLimit; use 2-20");let s=null,a=null;if(!o){const g=[t.flags.ignoreCase];Vv(t,UVe,{getCurrentModI:()=>g.at(-1),popModI(){g.pop()},pushModI(y){g.push(y)},setHasCasedChar(){g.at(-1)?s=!0:a=!0}})}const l={dotAll:t.flags.dotAll,ignoreCase:!!((t.flags.ignoreCase||s)&&!a)};let c=t;const d={accuracy:n.accuracy,appliedGlobalFlags:l,captureMap:new Map,currentFlags:{dotAll:t.flags.dotAll,ignoreCase:t.flags.ignoreCase},inCharClass:!1,lastNode:c,originMap:t._originMap,recursionLimit:i,useAppliedIgnoreCase:!!(!o&&s&&a),useFlagMods:o,useFlagV:r,verbose:n.verbose};function f(g){return d.lastNode=c,c=g,SVe(zVe[g.type],`Unexpected node type "${g.type}"`)(g,d,f)}const p={pattern:t.body.map(f).join("|"),flags:f(t.flags),options:{...t.options}};return r||(delete p.options.force.v,p.options.disable.v=!0,p.options.unicodeSetsPlugin=null),p._captureTransfers=new Map,p._hiddenCaptures=[],d.captureMap.forEach((g,y)=>{g.hidden&&p._hiddenCaptures.push(y),g.transferTo&&Rb(p._captureTransfers,g.transferTo,[]).push(y)}),p}var UVe={"*":{enter({node:t},e){if(U9(t)){const n=e.getCurrentModI();e.pushModI(t.flags?g_({ignoreCase:n},t.flags).ignoreCase:n)}},exit({node:t},e){U9(t)&&e.popModI()}},Backreference(t,e){e.setHasCasedChar()},Character({node:t},e){RD(Ao(t.value))&&e.setHasCasedChar()},CharacterClassRange({node:t,skip:e},n){e(),IQ(t,{firstOnly:!0}).length&&n.setHasCasedChar()},CharacterSet({node:t},e){t.kind==="property"&&_Q.has(t.value)&&e.setHasCasedChar()}},zVe={Alternative({body:t},e,n){return t.map(n).join("")},Assertion({kind:t,negate:e}){if(t==="string_end")return"$";if(t==="string_start")return"^";if(t==="word_boundary")return e?Xt`\B`:Xt`\b`;throw new Error(`Unexpected assertion kind "${t}"`)},Backreference({ref:t},e){if(typeof t!="number")throw new Error("Unexpected named backref in transformed AST");if(!e.useFlagMods&&e.accuracy==="strict"&&e.currentFlags.ignoreCase&&!e.captureMap.get(t).ignoreCase)throw new Error("Use of case-insensitive backref to case-sensitive group requires target ES2025 or non-strict accuracy");return"\\"+t},CapturingGroup(t,e,n){const{body:r,name:o,number:i}=t,s={ignoreCase:e.currentFlags.ignoreCase},a=e.originMap.get(t);return a&&(s.hidden=!0,i>a.number&&(s.transferTo=a.number)),e.captureMap.set(i,s),`(${o?`?<${o}>`:""}${r.map(n).join("|")})`},Character({value:t},e){const n=Ao(t),r=cm(t,{escDigit:e.lastNode.type==="Backreference",inCharClass:e.inCharClass,useFlagV:e.useFlagV});if(r!==n)return r;if(e.useAppliedIgnoreCase&&e.currentFlags.ignoreCase&&RD(n)){const o=SQ(n);return e.inCharClass?o.join(""):o.length>1?`[${o.join("")}]`:o[0]}return n},CharacterClass(t,e,n){const{kind:r,negate:o,parent:i}=t;let{body:s}=t;if(r==="intersection"&&!e.useFlagV)throw new Error("Use of class intersection requires min target ES2024");Tu.bugFlagVLiteralHyphenIsRange&&e.useFlagV&&s.some(z9)&&(s=[bE(45),...s.filter(c=>!z9(c))]);const a=()=>`[${o?"^":""}${s.map(n).join(r==="intersection"?"&&":"")}]`;if(!e.inCharClass){if((!e.useFlagV||Tu.bugNestedClassIgnoresNegation)&&!o){const d=s.filter(f=>f.type==="CharacterClass"&&f.kind==="union"&&f.negate);if(d.length){const f=fl(),p=f.body[0];return f.parent=i,p.parent=f,s=s.filter(g=>!d.includes(g)),t.body=s,s.length?(t.parent=p,p.body.push(t)):f.body.pop(),d.forEach(g=>{const y=ap({body:[g]});g.parent=y,y.parent=f,f.body.push(y)}),n(f)}}e.inCharClass=!0;const c=a();return e.inCharClass=!1,c}const l=s[0];if(r==="union"&&!o&&l&&((!e.useFlagV||!e.verbose)&&i.kind==="union"&&!(Tu.bugFlagVLiteralHyphenIsRange&&e.useFlagV)||!e.verbose&&i.kind==="intersection"&&s.length===1&&l.type!=="CharacterClassRange"))return s.map(n).join("");if(!e.useFlagV&&i.type==="CharacterClass")throw new Error("Use of nested character class requires min target ES2024");return a()},CharacterClassRange(t,e){const n=t.min.value,r=t.max.value,o={escDigit:!1,inCharClass:!0,useFlagV:e.useFlagV},i=cm(n,o),s=cm(r,o),a=new Set;if(e.useAppliedIgnoreCase&&e.currentFlags.ignoreCase){const l=IQ(t);YVe(l).forEach(d=>{a.add(Array.isArray(d)?`${cm(d[0],o)}-${cm(d[1],o)}`:cm(d,o))})}return`${i}-${s}${[...a].join("")}`},CharacterSet({kind:t,negate:e,value:n,key:r},o){if(t==="dot")return o.currentFlags.dotAll?o.appliedGlobalFlags.dotAll||o.useFlagMods?".":"[^]":Xt`[^\n]`;if(t==="digit")return e?Xt`\D`:Xt`\d`;if(t==="property"){if(o.useAppliedIgnoreCase&&o.currentFlags.ignoreCase&&_Q.has(n))throw new Error(`Unicode property "${n}" can't be case-insensitive when other chars have specific case`);return`${e?Xt`\P`:Xt`\p`}{${r?`${r}=`:""}${n}}`}if(t==="word")return e?Xt`\W`:Xt`\w`;throw new Error(`Unexpected character set kind "${t}"`)},Flags(t,e){return(e.appliedGlobalFlags.ignoreCase?"i":"")+(t.dotAll?"s":"")+(t.sticky?"y":"")},Group({atomic:t,body:e,flags:n,parent:r},o,i){const s=o.currentFlags;n&&(o.currentFlags=g_(s,n));const a=e.map(i).join("|"),l=!o.verbose&&e.length===1&&r.type!=="Quantifier"&&!t&&(!o.useFlagMods||!n)?a:`(?${XVe(t,n,o.useFlagMods)}${a})`;return o.currentFlags=s,l},LookaroundAssertion({body:t,kind:e,negate:n},r,o){return`(?${`${e==="lookahead"?"":"<"}${n?"!":"="}`}${t.map(o).join("|")})`},Quantifier(t,e,n){return n(t.body)+QVe(t)},Subroutine({isRecursive:t,ref:e},n){if(!t)throw new Error("Unexpected non-recursive subroutine in transformed AST");const r=n.recursionLimit;return e===0?`(?R=${r})`:Xt`\g<${e}&R=${r}>`}},GVe=new Set(["$","(",")","*","+",".","?","[","\\","]","^","{","|","}"]),qVe=new Set(["-","\\","]","^","["]),KVe=new Set(["(",")","-","/","[","\\","]","^","{","|","}","!","#","$","%","&","*","+",",",".",":",";","<","=",">","?","@","`","~"]),H9=new Map([[9,Xt`\t`],[10,Xt`\n`],[11,Xt`\v`],[12,Xt`\f`],[13,Xt`\r`],[8232,Xt`\u2028`],[8233,Xt`\u2029`],[65279,Xt`\uFEFF`]]),WVe=new RegExp("^\\p{Cased}$","u");function RD(t){return WVe.test(t)}function IQ(t,e){const n=!!e?.firstOnly,r=t.min.value,o=t.max.value,i=[];if(r<65&&(o===65535||o>=131071)||r===65536&&o>=131071)return i;for(let s=r;s<=o;s++){const a=Ao(s);if(!RD(a))continue;const l=SQ(a).filter(c=>{const d=c.codePointAt(0);return d<r||d>o});if(l.length&&(i.push(...l),n))break}return i}function cm(t,{escDigit:e,inCharClass:n,useFlagV:r}){if(H9.has(t))return H9.get(t);if(t<32||t>126&&t<160||t>262143||e&&ZVe(t))return t>255?`\\u{${t.toString(16).toUpperCase()}}`:`\\x${t.toString(16).toUpperCase().padStart(2,"0")}`;const o=n?r?KVe:qVe:GVe,i=Ao(t);return(o.has(i)?"\\":"")+i}function YVe(t){const e=t.map(o=>o.codePointAt(0)).sort((o,i)=>o-i),n=[];let r=null;for(let o=0;o<e.length;o++)e[o+1]===e[o]+1?r??=e[o]:r===null?n.push(e[o]):(n.push([r,e[o]]),r=null);return n}function XVe(t,e,n){if(t)return">";let r="";if(e&&n){const{enable:o,disable:i}=e;r=(o?.ignoreCase?"i":"")+(o?.dotAll?"s":"")+(i?"-":"")+(i?.ignoreCase?"i":"")+(i?.dotAll?"s":"")}return`${r}:`}function QVe({kind:t,max:e,min:n}){let r;return!n&&e===1?r="?":!n&&e===1/0?r="*":n===1&&e===1/0?r="+":n===e?r=`{${n}}`:r=`{${n},${e===1/0?"":e}}`,r+{greedy:"",lazy:"?",possessive:"+"}[t]}function U9({type:t}){return t==="CapturingGroup"||t==="Group"||t==="LookaroundAssertion"}function ZVe(t){return t>47&&t<58}function z9({type:t,value:e}){return t==="Character"&&e===45}var JVe=class fM extends RegExp{#t=new Map;#e=null;#r;#n=null;#o=null;rawOptions={};get source(){return this.#r||"(?:)"}constructor(e,n,r){const o=!!r?.lazyCompile;if(e instanceof RegExp){if(r)throw new Error("Cannot provide options when copying a regexp");const i=e;super(i,n),this.#r=i.source,i instanceof fM&&(this.#t=i.#t,this.#n=i.#n,this.#o=i.#o,this.rawOptions=i.rawOptions)}else{const i={hiddenCaptures:[],strategy:null,transfers:[],...r};super(o?"":e,n),this.#r=e,this.#t=tje(i.hiddenCaptures,i.transfers),this.#o=i.strategy,this.rawOptions=r??{}}o||(this.#e=this)}exec(e){if(!this.#e){const{lazyCompile:o,...i}=this.rawOptions;this.#e=new fM(this.#r,this.flags,i)}const n=this.global||this.sticky,r=this.lastIndex;if(this.#o==="clip_search"&&n&&r){this.lastIndex=0;const o=this.#i(e.slice(r));return o&&(eje(o,r,e,this.hasIndices),this.lastIndex+=r),o}return this.#i(e)}#i(e){this.#e.lastIndex=this.lastIndex;const n=super.exec.call(this.#e,e);if(this.lastIndex=this.#e.lastIndex,!n||!this.#t.size)return n;const r=[...n];n.length=1;let o;this.hasIndices&&(o=[...n.indices],n.indices.length=1);const i=[0];for(let s=1;s<r.length;s++){const{hidden:a,transferTo:l}=this.#t.get(s)??{};if(a?i.push(null):(i.push(n.length),n.push(r[s]),this.hasIndices&&n.indices.push(o[s])),l&&r[s]!==void 0){const c=i[l];if(!c)throw new Error(`Invalid capture transfer to "${c}"`);if(n[c]=r[s],this.hasIndices&&(n.indices[c]=o[s]),n.groups){this.#n||(this.#n=nje(this.source));const d=this.#n.get(l);d&&(n.groups[d]=r[s],this.hasIndices&&(n.indices.groups[d]=o[s]))}}}return n}};function eje(t,e,n,r){if(t.index+=e,t.input=n,r){const o=t.indices;for(let s=0;s<o.length;s++){const a=o[s];a&&(o[s]=[a[0]+e,a[1]+e])}const i=o.groups;i&&Object.keys(i).forEach(s=>{const a=i[s];a&&(i[s]=[a[0]+e,a[1]+e])})}}function tje(t,e){const n=new Map;for(const r of t)n.set(r,{hidden:!0});for(const[r,o]of e)for(const i of o)Rb(n,i,{}).transferTo=r;return n}function nje(t){const e=/(?<capture>\((?:\?<(?![=!])(?<name>[^>]+)>|(?!\?)))|\\?./gsu,n=new Map;let r=0,o=0,i;for(;i=e.exec(t);){const{0:s,groups:{capture:a,name:l}}=i;s==="["?r++:r?s==="]"&&r--:a&&(o++,l&&n.set(o,l))}return n}function rje(t,e){const n=oje(t,e);return n.options?new JVe(n.pattern,n.flags,n.options):new RegExp(n.pattern,n.flags)}function oje(t,e){const n=CQ(e),r=hQ(t,{flags:n.flags,normalizeUnknownPropertyNames:!0,rules:{captureGroup:n.rules.captureGroup,singleline:n.rules.singleline},skipBackrefValidation:n.rules.allowOrphanBackrefs,unicodePropertyMap:AD}),o=MVe(r,{accuracy:n.accuracy,asciiWordBoundaries:n.rules.asciiWordBoundaries,avoidSubclass:n.avoidSubclass,bestEffortTarget:n.target}),i=HVe(o,n),s=wVe(i.pattern,{captureTransfers:i._captureTransfers,hiddenCaptures:i._hiddenCaptures,mode:"external"}),a=vVe(s.pattern),l=yVe(a.pattern,{captureTransfers:s.captureTransfers,hiddenCaptures:s.hiddenCaptures}),c={pattern:l.pattern,flags:`${n.hasIndices?"d":""}${n.global?"g":""}${i.flags}${i.options.disable.v?"u":"v"}`};if(n.avoidSubclass){if(n.lazyCompileLength!==1/0)throw new Error("Lazy compilation requires subclass")}else{const d=l.hiddenCaptures.sort((y,b)=>y-b),f=Array.from(l.captureTransfers),p=o._strategy,g=c.pattern.length>=n.lazyCompileLength;(d.length||f.length||p||g)&&(c.options={...d.length&&{hiddenCaptures:d},...f.length&&{transfers:f},...p&&{strategy:p},...g&&{lazyCompile:g}})}return c}const G9=4294967295;class ije{constructor(e,n={}){this.patterns=e,this.options=n;const{forgiving:r=!1,cache:o,regexConstructor:i}=n;if(!i)throw new Error("Option `regexConstructor` is not provided");this.regexps=e.map(s=>{if(typeof s!="string")return s;const a=o?.get(s);if(a){if(a instanceof RegExp)return a;if(r)return null;throw a}try{const l=i(s);return o?.set(s,l),l}catch(l){if(o?.set(s,l),r)return null;throw l}})}regexps;findNextMatchSync(e,n,r){const o=typeof e=="string"?e:e.content,i=[];function s(a,l,c=0){return{index:a,captureIndices:l.indices.map(d=>d==null?{start:G9,end:G9,length:0}:{start:d[0]+c,end:d[1]+c,length:d[1]-d[0]})}}for(let a=0;a<this.regexps.length;a++){const l=this.regexps[a];if(l)try{l.lastIndex=n;const c=l.exec(o);if(!c)continue;if(c.index===n)return s(a,c,0);i.push([a,c,0])}catch(c){if(this.options.forgiving)continue;throw c}}if(i.length){const a=Math.min(...i.map(l=>l[1].index));for(const[l,c,d]of i)if(c.index===a)return s(l,c,d)}return null}}function sje(t,e){return rje(t,{global:!0,hasIndices:!0,lazyCompileLength:3e3,rules:{allowOrphanBackrefs:!0,asciiWordBoundaries:!0,captureGroup:!0,recursionLimit:5,singleline:!0},...e})}function aje(t={}){const e=Object.assign({target:"auto",cache:new Map},t);return e.regexConstructor||=n=>sje(n,{target:e.target}),{createScanner(n){return new ije(n,e)},createString(n){return{content:n}}}}const lje={c:()=>et(()=>import("./c-00UMkd0_.js"),[]),cpp:()=>et(()=>import("./cpp-B41OejNQ.js"),__vite__mapDeps([24,25,26,27,28])),"c++":()=>et(()=>import("./cpp-B41OejNQ.js"),__vite__mapDeps([24,25,26,27,28])),css:()=>et(()=>import("./css-Ba4iZVJU.js"),[]),glsl:()=>et(()=>import("./glsl-XaVKT3us.js"),__vite__mapDeps([26,27])),graphql:()=>et(()=>import("./graphql-CsTf1nXt.js"),__vite__mapDeps([29,30,31,32,33])),gql:()=>et(()=>import("./graphql-CsTf1nXt.js"),__vite__mapDeps([29,30,31,32,33])),haml:()=>et(()=>import("./haml-y6ZlyoUX.js"),__vite__mapDeps([34,30,35])),html:()=>et(()=>import("./html-B70SOtXk.js"),__vite__mapDeps([36,30,35])),java:()=>et(()=>import("./java-DebBBbJF.js"),[]),javascript:()=>et(()=>import("./javascript-rIR2uHHM.js"),[]),js:()=>et(()=>import("./javascript-rIR2uHHM.js"),[]),json:()=>et(()=>import("./json-CAhrKACI.js"),[]),jsonc:()=>et(()=>import("./jsonc-hsrVBXzx.js"),[]),jsonl:()=>et(()=>import("./jsonl-BjDRLQe5.js"),[]),jsx:()=>et(()=>import("./jsx-BEJ8hti2.js"),[]),julia:()=>et(()=>import("./julia-Bsq_Wxjs.js"),__vite__mapDeps([37,24,25,26,27,28,38,30,39])),jl:()=>et(()=>import("./julia-Bsq_Wxjs.js"),__vite__mapDeps([37,24,25,26,27,28,38,30,39])),less:()=>et(()=>import("./less-ZyznLYc8.js"),[]),markdown:()=>et(()=>import("./markdown-BW8ntiIS.js"),[]),md:()=>et(()=>import("./markdown-BW8ntiIS.js"),[]),mdx:()=>et(()=>import("./mdx-Clz3KXo-.js"),[]),php:()=>et(()=>import("./php-ouCHicdK.js"),__vite__mapDeps([40,36,30,35,41,42,28,43])),postcss:()=>et(()=>import("./postcss-B6Y8ymK-.js"),[]),pug:()=>et(()=>import("./pug-BIhlSSzb.js"),__vite__mapDeps([44,30,35,36])),jade:()=>et(()=>import("./pug-BIhlSSzb.js"),__vite__mapDeps([44,30,35,36])),python:()=>et(()=>import("./python-BoZJIzkW.js"),[]),py:()=>et(()=>import("./python-BoZJIzkW.js"),[]),r:()=>et(()=>import("./r-oUZ2FLAW.js"),[]),regexp:()=>et(()=>import("./regexp-YoNQ8D_6.js"),[]),regex:()=>et(()=>import("./regexp-YoNQ8D_6.js"),[]),sass:()=>et(()=>import("./sass-pz5lImlE.js"),[]),scss:()=>et(()=>import("./scss-DZyPL35B.js"),__vite__mapDeps([45,35])),shellscript:()=>et(()=>import("./shellscript-C5hMhjGx.js"),[]),bash:()=>et(()=>import("./shellscript-C5hMhjGx.js"),[]),sh:()=>et(()=>import("./shellscript-C5hMhjGx.js"),[]),shell:()=>et(()=>import("./shellscript-C5hMhjGx.js"),[]),zsh:()=>et(()=>import("./shellscript-C5hMhjGx.js"),[]),sql:()=>et(()=>import("./sql-DtrFjDzF.js"),[]),svelte:()=>et(()=>import("./svelte-5DfidACN.js"),__vite__mapDeps([46,30,31,35,47])),typescript:()=>et(()=>import("./typescript-2q5-wJRm.js"),[]),ts:()=>et(()=>import("./typescript-2q5-wJRm.js"),[]),vue:()=>et(()=>import("./vue-BTGJLnBN.js"),__vite__mapDeps([48,35,30,31,43,36])),"vue-html":()=>et(()=>import("./vue-html-BY_chM9H.js"),__vite__mapDeps([49,48,35,30,31,43,36])),wasm:()=>et(()=>import("./wasm-BzdluPJ6.js"),[]),wgsl:()=>et(()=>import("./wgsl-BphOKwv5.js"),[]),xml:()=>et(()=>import("./xml-BGDL4sz7.js"),__vite__mapDeps([41,42])),yaml:()=>et(()=>import("./yaml-CpnjaWiz.js"),[]),yml:()=>et(()=>import("./yaml-CpnjaWiz.js"),[]),tsx:()=>et(()=>import("./tsx-CF6OCgoc.js"),[]),typescriptreact:()=>et(()=>import("./tsx-CF6OCgoc.js"),[]),haskell:()=>et(()=>import("./haskell-DONOHxti.js"),[]),hs:()=>et(()=>import("./haskell-DONOHxti.js"),[]),"c#":()=>et(()=>import("./csharp-C5Fp3xEp.js"),[]),csharp:()=>et(()=>import("./csharp-C5Fp3xEp.js"),[]),cs:()=>et(()=>import("./csharp-C5Fp3xEp.js"),[]),latex:()=>et(()=>import("./latex-DJ20RoIt.js"),__vite__mapDeps([50,39])),lua:()=>et(()=>import("./lua-G6E-MZGd.js"),__vite__mapDeps([51,27])),mermaid:()=>et(()=>import("./mermaid-Bne7fylA.js"),[]),mmd:()=>et(()=>import("./mermaid-Bne7fylA.js"),[]),ruby:()=>et(()=>import("./ruby-CZhShINw.js"),__vite__mapDeps([52,36,30,35,34,41,42,28,29,31,32,33,24,25,26,27,53,51,54])),rb:()=>et(()=>import("./ruby-CZhShINw.js"),__vite__mapDeps([52,36,30,35,34,41,42,28,29,31,32,33,24,25,26,27,53,51,54])),rust:()=>et(()=>import("./rust-DYFNg61u.js"),[]),rs:()=>et(()=>import("./rust-DYFNg61u.js"),[]),scala:()=>et(()=>import("./scala-jr1efaIq.js"),[]),swift:()=>et(()=>import("./swift-fve9TYiY.js"),[]),kotlin:()=>et(()=>import("./kotlin-C0NAYCpC.js"),[]),kt:()=>et(()=>import("./kotlin-C0NAYCpC.js"),[]),kts:()=>et(()=>import("./kotlin-C0NAYCpC.js"),[]),"objective-c":()=>et(()=>import("./objective-c-CaBb6aOr.js"),[]),objc:()=>et(()=>import("./objective-c-CaBb6aOr.js"),[])},cje={"github-dark":()=>et(()=>import("./github-dark-DHJKELXO.js"),[]),"github-light":()=>et(()=>import("./github-light-DAi9KRSo.js"),[])},uje=C5e({langs:lje,themes:cje,engine:()=>aje()}),dje={defaultLanguage:"javascript",supportedLanguages:{text:{name:"Plain Text",aliases:["text","txt","plain"]},c:{name:"C",aliases:["c"]},cpp:{name:"C++",aliases:["cpp","c++"]},css:{name:"CSS",aliases:["css"]},glsl:{name:"GLSL",aliases:["glsl"]},graphql:{name:"GraphQL",aliases:["graphql","gql"]},haml:{name:"Ruby Haml",aliases:["haml"]},html:{name:"HTML",aliases:["html"]},java:{name:"Java",aliases:["java"]},javascript:{name:"JavaScript",aliases:["javascript","js"]},json:{name:"JSON",aliases:["json"]},jsonc:{name:"JSON with Comments",aliases:["jsonc"]},jsonl:{name:"JSON Lines",aliases:["jsonl"]},jsx:{name:"JSX",aliases:["jsx"]},julia:{name:"Julia",aliases:["julia","jl"]},less:{name:"Less",aliases:["less"]},markdown:{name:"Markdown",aliases:["markdown","md"]},mdx:{name:"MDX",aliases:["mdx"]},php:{name:"PHP",aliases:["php"]},postcss:{name:"PostCSS",aliases:["postcss"]},pug:{name:"Pug",aliases:["pug","jade"]},python:{name:"Python",aliases:["python","py"]},r:{name:"R",aliases:["r"]},regexp:{name:"RegExp",aliases:["regexp","regex"]},sass:{name:"Sass",aliases:["sass"]},scss:{name:"SCSS",aliases:["scss"]},shellscript:{name:"Shell",aliases:["shellscript","bash","sh","shell","zsh"]},sql:{name:"SQL",aliases:["sql"]},svelte:{name:"Svelte",aliases:["svelte"]},typescript:{name:"TypeScript",aliases:["typescript","ts"]},vue:{name:"Vue",aliases:["vue"]},"vue-html":{name:"Vue HTML",aliases:["vue-html"]},wasm:{name:"WebAssembly",aliases:["wasm"]},wgsl:{name:"WGSL",aliases:["wgsl"]},xml:{name:"XML",aliases:["xml"]},yaml:{name:"YAML",aliases:["yaml","yml"]},tsx:{name:"TSX",aliases:["tsx","typescriptreact"]},haskell:{name:"Haskell",aliases:["haskell","hs"]},csharp:{name:"C#",aliases:["c#","csharp","cs"]},latex:{name:"LaTeX",aliases:["latex"]},lua:{name:"Lua",aliases:["lua"]},mermaid:{name:"Mermaid",aliases:["mermaid","mmd"]},ruby:{name:"Ruby",aliases:["ruby","rb"]},rust:{name:"Rust",aliases:["rust","rs"]},scala:{name:"Scala",aliases:["scala"]},swift:{name:"Swift",aliases:["swift"]},kotlin:{name:"Kotlin",aliases:["kotlin","kt","kts"]},"objective-c":{name:"Objective C",aliases:["objective-c","objc"]}},createHighlighter:()=>uje({themes:["github-dark","github-light"],langs:[]})};function fje(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function MQ(t,e){return new Promise(function(n,r){let o;return hje(t).then(function(i){try{return o=i,n(new Blob([e.slice(0,2),o,e.slice(2)],{type:"image/jpeg"}))}catch(s){return r(s)}},r)})}const hje=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:o}})=>{const i=new DataView(o);let s=0;if(i.getUint16(s)!==65496)return n("not a valid JPEG");for(s+=2;;){const a=i.getUint16(s);if(a===65498)break;const l=i.getUint16(s+2);if(a===65505&&i.getUint32(s+4)===1165519206){const c=s+10;let d;switch(i.getUint16(c)){case 18761:d=!0;break;case 19789:d=!1;break;default:return n("TIFF header contains invalid endian")}if(i.getUint16(c+2,d)!==42)return n("TIFF header contains invalid version");const f=i.getUint32(c+4,d),p=c+f+2+12*i.getUint16(c+f,d);for(let g=c+f+2;g<p;g+=12)if(i.getUint16(g,d)==274){if(i.getUint16(g+2,d)!==3)return n("Orientation data type is invalid");if(i.getUint32(g+4,d)!==1)return n("Orientation data count is invalid");i.setUint16(g+8,1,d);break}return e(o.slice(s,s+2+l))}s+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var y_={},pje={get exports(){return y_},set exports(t){y_=t}};(function(t){var e,n,r={};pje.exports=r,r.parse=function(o,i){for(var s=r.bin.readUshort,a=r.bin.readUint,l=0,c={},d=new Uint8Array(o),f=d.length-4;a(d,f)!=101010256;)f--;l=f,l+=4;var p=s(d,l+=4);s(d,l+=2);var g=a(d,l+=2),y=a(d,l+=4);l+=4,l=y;for(var b=0;b<p;b++){a(d,l),l+=4,l+=4,l+=4,a(d,l+=4),g=a(d,l+=4);var _=a(d,l+=4),k=s(d,l+=4),M=s(d,l+2),N=s(d,l+4);l+=6;var j=a(d,l+=8);l+=4,l+=k+M+N,r._readLocal(d,j,c,g,_,i)}return c},r._readLocal=function(o,i,s,a,l,c){var d=r.bin.readUshort,f=r.bin.readUint;f(o,i),d(o,i+=4),d(o,i+=2);var p=d(o,i+=2);f(o,i+=2),f(o,i+=4),i+=4;var g=d(o,i+=8),y=d(o,i+=2);i+=2;var b=r.bin.readUTF8(o,i,g);if(i+=g,i+=y,c)s[b]={size:l,csize:a};else{var _=new Uint8Array(o.buffer,i);if(p==0)s[b]=new Uint8Array(_.buffer.slice(i,i+a));else{if(p!=8)throw"unknown compression method: "+p;var k=new Uint8Array(l);r.inflateRaw(_,k),s[b]=k}}},r.inflateRaw=function(o,i){return r.F.inflate(o,i)},r.inflate=function(o,i){return o[0],o[1],r.inflateRaw(new Uint8Array(o.buffer,o.byteOffset+2,o.length-6),i)},r.deflate=function(o,i){i==null&&(i={level:6});var s=0,a=new Uint8Array(50+Math.floor(1.1*o.length));a[s]=120,a[s+1]=156,s+=2,s=r.F.deflateRaw(o,a,s,i.level);var l=r.adler(o,0,o.length);return a[s+0]=l>>>24&255,a[s+1]=l>>>16&255,a[s+2]=l>>>8&255,a[s+3]=l>>>0&255,new Uint8Array(a.buffer,0,s+4)},r.deflateRaw=function(o,i){i==null&&(i={level:6});var s=new Uint8Array(50+Math.floor(1.1*o.length)),a=r.F.deflateRaw(o,s,a,i.level);return new Uint8Array(s.buffer,0,a)},r.encode=function(o,i){i==null&&(i=!1);var s=0,a=r.bin.writeUint,l=r.bin.writeUshort,c={};for(var d in o){var f=!r._noNeed(d)&&!i,p=o[d],g=r.crc.crc(p,0,p.length);c[d]={cpr:f,usize:p.length,crc:g,file:f?r.deflateRaw(p):p}}for(var d in c)s+=c[d].file.length+30+46+2*r.bin.sizeUTF8(d);s+=22;var y=new Uint8Array(s),b=0,_=[];for(var d in c){var k=c[d];_.push(b),b=r._writeHeader(y,b,d,k,0)}var M=0,N=b;for(var d in c)k=c[d],_.push(b),b=r._writeHeader(y,b,d,k,1,_[M++]);var j=b-N;return a(y,b,101010256),b+=4,l(y,b+=4,M),l(y,b+=2,M),a(y,b+=2,j),a(y,b+=4,N),b+=4,b+=2,y.buffer},r._noNeed=function(o){var i=o.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(i)!=-1},r._writeHeader=function(o,i,s,a,l,c){var d=r.bin.writeUint,f=r.bin.writeUshort,p=a.file;return d(o,i,l==0?67324752:33639248),i+=4,l==1&&(i+=2),f(o,i,20),f(o,i+=2,0),f(o,i+=2,a.cpr?8:0),d(o,i+=2,0),d(o,i+=4,a.crc),d(o,i+=4,p.length),d(o,i+=4,a.usize),f(o,i+=4,r.bin.sizeUTF8(s)),f(o,i+=2,0),i+=2,l==1&&(i+=2,i+=2,d(o,i+=6,c),i+=4),i+=r.bin.writeUTF8(o,i,s),l==0&&(o.set(p,i),i+=p.length),i},r.crc={table:function(){for(var o=new Uint32Array(256),i=0;i<256;i++){for(var s=i,a=0;a<8;a++)1&s?s=3988292384^s>>>1:s>>>=1;o[i]=s}return o}(),update:function(o,i,s,a){for(var l=0;l<a;l++)o=r.crc.table[255&(o^i[s+l])]^o>>>8;return o},crc:function(o,i,s){return 4294967295^r.crc.update(4294967295,o,i,s)}},r.adler=function(o,i,s){for(var a=1,l=0,c=i,d=i+s;c<d;){for(var f=Math.min(c+5552,d);c<f;)l+=a+=o[c++];a%=65521,l%=65521}return l<<16|a},r.bin={readUshort:function(o,i){return o[i]|o[i+1]<<8},writeUshort:function(o,i,s){o[i]=255&s,o[i+1]=s>>8&255},readUint:function(o,i){return 16777216*o[i+3]+(o[i+2]<<16|o[i+1]<<8|o[i])},writeUint:function(o,i,s){o[i]=255&s,o[i+1]=s>>8&255,o[i+2]=s>>16&255,o[i+3]=s>>24&255},readASCII:function(o,i,s){for(var a="",l=0;l<s;l++)a+=String.fromCharCode(o[i+l]);return a},writeASCII:function(o,i,s){for(var a=0;a<s.length;a++)o[i+a]=s.charCodeAt(a)},pad:function(o){return o.length<2?"0"+o:o},readUTF8:function(o,i,s){for(var a,l="",c=0;c<s;c++)l+="%"+r.bin.pad(o[i+c].toString(16));try{a=decodeURIComponent(l)}catch{return r.bin.readASCII(o,i,s)}return a},writeUTF8:function(o,i,s){for(var a=s.length,l=0,c=0;c<a;c++){var d=s.charCodeAt(c);if((4294967168&d)==0)o[i+l]=d,l++;else if((4294965248&d)==0)o[i+l]=192|d>>6,o[i+l+1]=128|d>>0&63,l+=2;else if((4294901760&d)==0)o[i+l]=224|d>>12,o[i+l+1]=128|d>>6&63,o[i+l+2]=128|d>>0&63,l+=3;else{if((4292870144&d)!=0)throw"e";o[i+l]=240|d>>18,o[i+l+1]=128|d>>12&63,o[i+l+2]=128|d>>6&63,o[i+l+3]=128|d>>0&63,l+=4}}return l},sizeUTF8:function(o){for(var i=o.length,s=0,a=0;a<i;a++){var l=o.charCodeAt(a);if((4294967168&l)==0)s++;else if((4294965248&l)==0)s+=2;else if((4294901760&l)==0)s+=3;else{if((4292870144&l)!=0)throw"e";s+=4}}return s}},r.F={},r.F.deflateRaw=function(o,i,s,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],c=r.F.U,d=r.F._goodIndex;r.F._hash;var f=r.F._putsE,p=0,g=s<<3,y=0,b=o.length;if(a==0){for(;p<b;)f(i,g,p+(z=Math.min(65535,b-p))==b?1:0),g=r.F._copyExact(o,p,z,i,g+8),p+=z;return g>>>3}var _=c.lits,k=c.strt,M=c.prev,N=0,j=0,B=0,F=0,D=0,R=0;for(b>2&&(k[R=r.F._hash(o,0)]=0),p=0;p<b;p++){if(D=R,p+1<b-2){R=r.F._hash(o,p+1);var I=p+1&32767;M[I]=k[R],k[R]=I}if(y<=p){(N>14e3||j>26697)&&b-p>100&&(y<p&&(_[N]=p-y,N+=2,y=p),g=r.F._writeBlock(p==b-1||y==b?1:0,_,N,F,o,B,p-B,i,g),N=j=F=0,B=p);var L=0;p<b-2&&(L=r.F._bestMatch(o,p,M,D,Math.min(l[2],b-p),l[3]));var z=L>>>16,q=65535&L;if(L!=0){q=65535&L;var H=d(z=L>>>16,c.of0);c.lhst[257+H]++;var ne=d(q,c.df0);c.dhst[ne]++,F+=c.exb[H]+c.dxb[ne],_[N]=z<<23|p-y,_[N+1]=q<<16|H<<8|ne,N+=2,y=p+z}else c.lhst[o[p]]++;j++}}for(B==p&&o.length!=0||(y<p&&(_[N]=p-y,N+=2,y=p),g=r.F._writeBlock(1,_,N,F,o,B,p-B,i,g),N=0,j=0,N=j=F=0,B=p);(7&g)!=0;)g++;return g>>>3},r.F._bestMatch=function(o,i,s,a,l,c){var d=32767&i,f=s[d],p=d-f+32768&32767;if(f==d||a!=r.F._hash(o,i-p))return 0;for(var g=0,y=0,b=Math.min(32767,i);p<=b&&--c!=0&&f!=d;){if(g==0||o[i+g]==o[i+g-p]){var _=r.F._howLong(o,i,p);if(_>g){if(y=p,(g=_)>=l)break;p+2<_&&(_=p+2);for(var k=0,M=0;M<_-2;M++){var N=i-p+M+32768&32767,j=N-s[N]+32768&32767;j>k&&(k=j,f=N)}}}p+=(d=f)-(f=s[d])+32768&32767}return g<<16|y},r.F._howLong=function(o,i,s){if(o[i]!=o[i-s]||o[i+1]!=o[i+1-s]||o[i+2]!=o[i+2-s])return 0;var a=i,l=Math.min(o.length,i+258);for(i+=3;i<l&&o[i]==o[i-s];)i++;return i-a},r.F._hash=function(o,i){return(o[i]<<8|o[i+1])+(o[i+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(o,i,s,a,l,c,d,f,p){var g,y,b,_,k,M,N,j,B,F=r.F.U,D=r.F._putsF,R=r.F._putsE;F.lhst[256]++,y=(g=r.F.getTrees())[0],b=g[1],_=g[2],k=g[3],M=g[4],N=g[5],j=g[6],B=g[7];var I=32+((p+3&7)==0?0:8-(p+3&7))+(d<<3),L=a+r.F.contSize(F.fltree,F.lhst)+r.F.contSize(F.fdtree,F.dhst),z=a+r.F.contSize(F.ltree,F.lhst)+r.F.contSize(F.dtree,F.dhst);z+=14+3*N+r.F.contSize(F.itree,F.ihst)+(2*F.ihst[16]+3*F.ihst[17]+7*F.ihst[18]);for(var q=0;q<286;q++)F.lhst[q]=0;for(q=0;q<30;q++)F.dhst[q]=0;for(q=0;q<19;q++)F.ihst[q]=0;var H=I<L&&I<z?0:L<z?1:2;if(D(f,p,o),D(f,p+1,H),p+=3,H==0){for(;(7&p)!=0;)p++;p=r.F._copyExact(l,c,d,f,p)}else{var ne,re;if(H==1&&(ne=F.fltree,re=F.fdtree),H==2){r.F.makeCodes(F.ltree,y),r.F.revCodes(F.ltree,y),r.F.makeCodes(F.dtree,b),r.F.revCodes(F.dtree,b),r.F.makeCodes(F.itree,_),r.F.revCodes(F.itree,_),ne=F.ltree,re=F.dtree,R(f,p,k-257),R(f,p+=5,M-1),R(f,p+=5,N-4),p+=4;for(var V=0;V<N;V++)R(f,p+3*V,F.itree[1+(F.ordr[V]<<1)]);p+=3*N,p=r.F._codeTiny(j,F.itree,f,p),p=r.F._codeTiny(B,F.itree,f,p)}for(var U=c,Q=0;Q<s;Q+=2){for(var J=i[Q],Y=J>>>23,se=U+(8388607&J);U<se;)p=r.F._writeLit(l[U++],ne,f,p);if(Y!=0){var te=i[Q+1],ie=te>>16,ce=te>>8&255,ae=255&te;R(f,p=r.F._writeLit(257+ce,ne,f,p),Y-F.of0[ce]),p+=F.exb[ce],D(f,p=r.F._writeLit(ae,re,f,p),ie-F.df0[ae]),p+=F.dxb[ae],U+=Y}}p=r.F._writeLit(256,ne,f,p)}return p},r.F._copyExact=function(o,i,s,a,l){var c=l>>>3;return a[c]=s,a[c+1]=s>>>8,a[c+2]=255-a[c],a[c+3]=255-a[c+1],c+=4,a.set(new Uint8Array(o.buffer,i,s),c),l+(s+4<<3)},r.F.getTrees=function(){for(var o=r.F.U,i=r.F._hufTree(o.lhst,o.ltree,15),s=r.F._hufTree(o.dhst,o.dtree,15),a=[],l=r.F._lenCodes(o.ltree,a),c=[],d=r.F._lenCodes(o.dtree,c),f=0;f<a.length;f+=2)o.ihst[a[f]]++;for(f=0;f<c.length;f+=2)o.ihst[c[f]]++;for(var p=r.F._hufTree(o.ihst,o.itree,7),g=19;g>4&&o.itree[1+(o.ordr[g-1]<<1)]==0;)g--;return[i,s,p,l,d,g,a,c]},r.F.getSecond=function(o){for(var i=[],s=0;s<o.length;s+=2)i.push(o[s+1]);return i},r.F.nonZero=function(o){for(var i="",s=0;s<o.length;s+=2)o[s+1]!=0&&(i+=(s>>1)+",");return i},r.F.contSize=function(o,i){for(var s=0,a=0;a<i.length;a++)s+=i[a]*o[1+(a<<1)];return s},r.F._codeTiny=function(o,i,s,a){for(var l=0;l<o.length;l+=2){var c=o[l],d=o[l+1];a=r.F._writeLit(c,i,s,a);var f=c==16?2:c==17?3:7;c>15&&(r.F._putsE(s,a,d,f),a+=f)}return a},r.F._lenCodes=function(o,i){for(var s=o.length;s!=2&&o[s-1]==0;)s-=2;for(var a=0;a<s;a+=2){var l=o[a+1],c=a+3<s?o[a+3]:-1,d=a+5<s?o[a+5]:-1,f=a==0?-1:o[a-1];if(l==0&&c==l&&d==l){for(var p=a+5;p+2<s&&o[p+2]==l;)p+=2;(g=Math.min(p+1-a>>>1,138))<11?i.push(17,g-3):i.push(18,g-11),a+=2*g-2}else if(l==f&&c==l&&d==l){for(p=a+5;p+2<s&&o[p+2]==l;)p+=2;var g=Math.min(p+1-a>>>1,6);i.push(16,g-3),a+=2*g-2}else i.push(l,0)}return s>>>1},r.F._hufTree=function(o,i,s){var a=[],l=o.length,c=i.length,d=0;for(d=0;d<c;d+=2)i[d]=0,i[d+1]=0;for(d=0;d<l;d++)o[d]!=0&&a.push({lit:d,f:o[d]});var f=a.length,p=a.slice(0);if(f==0)return 0;if(f==1){var g=a[0].lit;return p=g==0?1:0,i[1+(g<<1)]=1,i[1+(p<<1)]=1,1}a.sort(function(j,B){return j.f-B.f});var y=a[0],b=a[1],_=0,k=1,M=2;for(a[0]={lit:-1,f:y.f+b.f,l:y,r:b,d:0};k!=f-1;)y=_!=k&&(M==f||a[_].f<a[M].f)?a[_++]:a[M++],b=_!=k&&(M==f||a[_].f<a[M].f)?a[_++]:a[M++],a[k++]={lit:-1,f:y.f+b.f,l:y,r:b};var N=r.F.setDepth(a[k-1],0);for(N>s&&(r.F.restrictDepth(p,s,N),N=s),d=0;d<f;d++)i[1+(p[d].lit<<1)]=p[d].d;return N},r.F.setDepth=function(o,i){return o.lit!=-1?(o.d=i,i):Math.max(r.F.setDepth(o.l,i+1),r.F.setDepth(o.r,i+1))},r.F.restrictDepth=function(o,i,s){var a=0,l=1<<s-i,c=0;for(o.sort(function(f,p){return p.d==f.d?f.f-p.f:p.d-f.d}),a=0;a<o.length&&o[a].d>i;a++){var d=o[a].d;o[a].d=i,c+=l-(1<<s-d)}for(c>>>=s-i;c>0;)(d=o[a].d)<i?(o[a].d++,c-=1<<i-d-1):a++;for(;a>=0;a--)o[a].d==i&&c<0&&(o[a].d--,c++);c!=0&&console.log("debt left")},r.F._goodIndex=function(o,i){var s=0;return i[16|s]<=o&&(s|=16),i[8|s]<=o&&(s|=8),i[4|s]<=o&&(s|=4),i[2|s]<=o&&(s|=2),i[1|s]<=o&&(s|=1),s},r.F._writeLit=function(o,i,s,a){return r.F._putsF(s,a,i[o<<1]),a+i[1+(o<<1)]},r.F.inflate=function(o,i){var s=Uint8Array;if(o[0]==3&&o[1]==0)return i||new s(0);var a=r.F,l=a._bitsF,c=a._bitsE,d=a._decodeTiny,f=a.makeCodes,p=a.codes2map,g=a._get17,y=a.U,b=i==null;b&&(i=new s(o.length>>>2<<3));for(var _,k,M=0,N=0,j=0,B=0,F=0,D=0,R=0,I=0,L=0;M==0;)if(M=l(o,L,1),N=l(o,L+1,2),L+=3,N!=0){if(b&&(i=r.F._check(i,I+(1<<17))),N==1&&(_=y.flmap,k=y.fdmap,D=511,R=31),N==2){j=c(o,L,5)+257,B=c(o,L+5,5)+1,F=c(o,L+10,4)+4,L+=14;for(var z=0;z<38;z+=2)y.itree[z]=0,y.itree[z+1]=0;var q=1;for(z=0;z<F;z++){var H=c(o,L+3*z,3);y.itree[1+(y.ordr[z]<<1)]=H,H>q&&(q=H)}L+=3*F,f(y.itree,q),p(y.itree,q,y.imap),_=y.lmap,k=y.dmap,L=d(y.imap,(1<<q)-1,j+B,o,L,y.ttree);var ne=a._copyOut(y.ttree,0,j,y.ltree);D=(1<<ne)-1;var re=a._copyOut(y.ttree,j,B,y.dtree);R=(1<<re)-1,f(y.ltree,ne),p(y.ltree,ne,_),f(y.dtree,re),p(y.dtree,re,k)}for(;;){var V=_[g(o,L)&D];L+=15&V;var U=V>>>4;if(!(U>>>8))i[I++]=U;else{if(U==256)break;var Q=I+U-254;if(U>264){var J=y.ldef[U-257];Q=I+(J>>>3)+c(o,L,7&J),L+=7&J}var Y=k[g(o,L)&R];L+=15&Y;var se=Y>>>4,te=y.ddef[se],ie=(te>>>4)+l(o,L,15&te);for(L+=15&te,b&&(i=r.F._check(i,I+(1<<17)));I<Q;)i[I]=i[I++-ie],i[I]=i[I++-ie],i[I]=i[I++-ie],i[I]=i[I++-ie];I=Q}}}else{(7&L)!=0&&(L+=8-(7&L));var ce=4+(L>>>3),ae=o[ce-4]|o[ce-3]<<8;b&&(i=r.F._check(i,I+ae)),i.set(new s(o.buffer,o.byteOffset+ce,ae),I),L=ce+ae<<3,I+=ae}return i.length==I?i:i.slice(0,I)},r.F._check=function(o,i){var s=o.length;if(i<=s)return o;var a=new Uint8Array(Math.max(s<<1,i));return a.set(o,0),a},r.F._decodeTiny=function(o,i,s,a,l,c){for(var d=r.F._bitsE,f=r.F._get17,p=0;p<s;){var g=o[f(a,l)&i];l+=15&g;var y=g>>>4;if(y<=15)c[p]=y,p++;else{var b=0,_=0;y==16?(_=3+d(a,l,2),l+=2,b=c[p-1]):y==17?(_=3+d(a,l,3),l+=3):y==18&&(_=11+d(a,l,7),l+=7);for(var k=p+_;p<k;)c[p]=b,p++}}return l},r.F._copyOut=function(o,i,s,a){for(var l=0,c=0,d=a.length>>>1;c<s;){var f=o[c+i];a[c<<1]=0,a[1+(c<<1)]=f,f>l&&(l=f),c++}for(;c<d;)a[c<<1]=0,a[1+(c<<1)]=0,c++;return l},r.F.makeCodes=function(o,i){for(var s,a,l,c,d=r.F.U,f=o.length,p=d.bl_count,g=0;g<=i;g++)p[g]=0;for(g=1;g<f;g+=2)p[o[g]]++;var y=d.next_code;for(s=0,p[0]=0,a=1;a<=i;a++)s=s+p[a-1]<<1,y[a]=s;for(l=0;l<f;l+=2)(c=o[l+1])!=0&&(o[l]=y[c],y[c]++)},r.F.codes2map=function(o,i,s){for(var a=o.length,l=r.F.U.rev15,c=0;c<a;c+=2)if(o[c+1]!=0)for(var d=c>>1,f=o[c+1],p=d<<4|f,g=i-f,y=o[c]<<g,b=y+(1<<g);y!=b;)s[l[y]>>>15-i]=p,y++},r.F.revCodes=function(o,i){for(var s=r.F.U.rev15,a=15-i,l=0;l<o.length;l+=2){var c=o[l]<<i-o[l+1];o[l]=s[c]>>>a}},r.F._putsE=function(o,i,s){s<<=7&i;var a=i>>>3;o[a]|=s,o[a+1]|=s>>>8},r.F._putsF=function(o,i,s){s<<=7&i;var a=i>>>3;o[a]|=s,o[a+1]|=s>>>8,o[a+2]|=s>>>16},r.F._bitsE=function(o,i,s){return(o[i>>>3]|o[1+(i>>>3)]<<8)>>>(7&i)&(1<<s)-1},r.F._bitsF=function(o,i,s){return(o[i>>>3]|o[1+(i>>>3)]<<8|o[2+(i>>>3)]<<16)>>>(7&i)&(1<<s)-1},r.F._get17=function(o,i){return(o[i>>>3]|o[1+(i>>>3)]<<8|o[2+(i>>>3)]<<16)>>>(7&i)},r.F._get25=function(o,i){return(o[i>>>3]|o[1+(i>>>3)]<<8|o[2+(i>>>3)]<<16|o[3+(i>>>3)]<<24)>>>(7&i)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var o=r.F.U,i=0;i<32768;i++){var s=i;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,o.rev15[i]=(s>>>16|s<<16)>>>17}function a(l,c,d){for(;c--!=0;)l.push(0,d)}for(i=0;i<32;i++)o.ldef[i]=o.of0[i]<<3|o.exb[i],o.ddef[i]=o.df0[i]<<4|o.dxb[i];a(o.fltree,144,8),a(o.fltree,112,9),a(o.fltree,24,7),a(o.fltree,8,8),r.F.makeCodes(o.fltree,9),r.F.codes2map(o.fltree,9,o.flmap),r.F.revCodes(o.fltree,9),a(o.fdtree,32,5),r.F.makeCodes(o.fdtree,5),r.F.codes2map(o.fdtree,5,o.fdmap),r.F.revCodes(o.fdtree,5),a(o.itree,19,0),a(o.ltree,286,0),a(o.dtree,30,0),a(o.ttree,320,0)}()})();var mje=fje({__proto__:null,default:y_},[y_]);const ll=function(){var t={nextZero(d,f){for(;d[f]!=0;)f++;return f},readUshort:(d,f)=>d[f]<<8|d[f+1],writeUshort(d,f,p){d[f]=p>>8&255,d[f+1]=255&p},readUint:(d,f)=>16777216*d[f]+(d[f+1]<<16|d[f+2]<<8|d[f+3]),writeUint(d,f,p){d[f]=p>>24&255,d[f+1]=p>>16&255,d[f+2]=p>>8&255,d[f+3]=255&p},readASCII(d,f,p){let g="";for(let y=0;y<p;y++)g+=String.fromCharCode(d[f+y]);return g},writeASCII(d,f,p){for(let g=0;g<p.length;g++)d[f+g]=p.charCodeAt(g)},readBytes(d,f,p){const g=[];for(let y=0;y<p;y++)g.push(d[f+y]);return g},pad:d=>d.length<2?`0${d}`:d,readUTF8(d,f,p){let g,y="";for(let b=0;b<p;b++)y+=`%${t.pad(d[f+b].toString(16))}`;try{g=decodeURIComponent(y)}catch{return t.readASCII(d,f,p)}return g}};function e(d,f,p,g){const y=f*p,b=i(g),_=Math.ceil(f*b/8),k=new Uint8Array(4*y),M=new Uint32Array(k.buffer),{ctype:N}=g,{depth:j}=g,B=t.readUshort;if(N==6){const J=y<<2;if(j==8)for(var F=0;F<J;F+=4)k[F]=d[F],k[F+1]=d[F+1],k[F+2]=d[F+2],k[F+3]=d[F+3];if(j==16)for(F=0;F<J;F++)k[F]=d[F<<1]}else if(N==2){const J=g.tabs.tRNS;if(J==null){if(j==8)for(F=0;F<y;F++){var D=3*F;M[F]=255<<24|d[D+2]<<16|d[D+1]<<8|d[D]}if(j==16)for(F=0;F<y;F++)D=6*F,M[F]=255<<24|d[D+4]<<16|d[D+2]<<8|d[D]}else{var R=J[0];const Y=J[1],se=J[2];if(j==8)for(F=0;F<y;F++){var I=F<<2;D=3*F,M[F]=255<<24|d[D+2]<<16|d[D+1]<<8|d[D],d[D]==R&&d[D+1]==Y&&d[D+2]==se&&(k[I+3]=0)}if(j==16)for(F=0;F<y;F++)I=F<<2,D=6*F,M[F]=255<<24|d[D+4]<<16|d[D+2]<<8|d[D],B(d,D)==R&&B(d,D+2)==Y&&B(d,D+4)==se&&(k[I+3]=0)}}else if(N==3){const J=g.tabs.PLTE,Y=g.tabs.tRNS,se=Y?Y.length:0;if(j==1)for(var L=0;L<p;L++){var z=L*_,q=L*f;for(F=0;F<f;F++){I=q+F<<2;var H=3*(ne=d[z+(F>>3)]>>7-((7&F)<<0)&1);k[I]=J[H],k[I+1]=J[H+1],k[I+2]=J[H+2],k[I+3]=ne<se?Y[ne]:255}}if(j==2)for(L=0;L<p;L++)for(z=L*_,q=L*f,F=0;F<f;F++)I=q+F<<2,H=3*(ne=d[z+(F>>2)]>>6-((3&F)<<1)&3),k[I]=J[H],k[I+1]=J[H+1],k[I+2]=J[H+2],k[I+3]=ne<se?Y[ne]:255;if(j==4)for(L=0;L<p;L++)for(z=L*_,q=L*f,F=0;F<f;F++)I=q+F<<2,H=3*(ne=d[z+(F>>1)]>>4-((1&F)<<2)&15),k[I]=J[H],k[I+1]=J[H+1],k[I+2]=J[H+2],k[I+3]=ne<se?Y[ne]:255;if(j==8)for(F=0;F<y;F++){var ne;I=F<<2,H=3*(ne=d[F]),k[I]=J[H],k[I+1]=J[H+1],k[I+2]=J[H+2],k[I+3]=ne<se?Y[ne]:255}}else if(N==4){if(j==8)for(F=0;F<y;F++){I=F<<2;var re=d[V=F<<1];k[I]=re,k[I+1]=re,k[I+2]=re,k[I+3]=d[V+1]}if(j==16)for(F=0;F<y;F++){var V;I=F<<2,re=d[V=F<<2],k[I]=re,k[I+1]=re,k[I+2]=re,k[I+3]=d[V+2]}}else if(N==0)for(R=g.tabs.tRNS?g.tabs.tRNS:-1,L=0;L<p;L++){const J=L*_,Y=L*f;if(j==1)for(var U=0;U<f;U++){var Q=(re=255*(d[J+(U>>>3)]>>>7-(7&U)&1))==255*R?0:255;M[Y+U]=Q<<24|re<<16|re<<8|re}else if(j==2)for(U=0;U<f;U++)Q=(re=85*(d[J+(U>>>2)]>>>6-((3&U)<<1)&3))==85*R?0:255,M[Y+U]=Q<<24|re<<16|re<<8|re;else if(j==4)for(U=0;U<f;U++)Q=(re=17*(d[J+(U>>>1)]>>>4-((1&U)<<2)&15))==17*R?0:255,M[Y+U]=Q<<24|re<<16|re<<8|re;else if(j==8)for(U=0;U<f;U++)Q=(re=d[J+U])==R?0:255,M[Y+U]=Q<<24|re<<16|re<<8|re;else if(j==16)for(U=0;U<f;U++)re=d[J+(U<<1)],Q=B(d,J+(U<<1))==R?0:255,M[Y+U]=Q<<24|re<<16|re<<8|re}return k}function n(d,f,p,g){const y=i(d),b=Math.ceil(p*y/8),_=new Uint8Array((b+1+d.interlace)*g);return f=d.tabs.CgBI?o(f,_):r(f,_),d.interlace==0?f=s(f,d,0,p,g):d.interlace==1&&(f=function(M,N){const j=N.width,B=N.height,F=i(N),D=F>>3,R=Math.ceil(j*F/8),I=new Uint8Array(B*R);let L=0;const z=[0,0,4,0,2,0,1],q=[0,4,0,2,0,1,0],H=[8,8,8,4,4,2,2],ne=[8,8,4,4,2,2,1];let re=0;for(;re<7;){const U=H[re],Q=ne[re];let J=0,Y=0,se=z[re];for(;se<B;)se+=U,Y++;let te=q[re];for(;te<j;)te+=Q,J++;const ie=Math.ceil(J*F/8);s(M,N,L,J,Y);let ce=0,ae=z[re];for(;ae<B;){let ye=q[re],we=L+ce*ie<<3;for(;ye<j;){var V;if(F==1&&(V=(V=M[we>>3])>>7-(7&we)&1,I[ae*R+(ye>>3)]|=V<<7-((7&ye)<<0)),F==2&&(V=(V=M[we>>3])>>6-(7&we)&3,I[ae*R+(ye>>2)]|=V<<6-((3&ye)<<1)),F==4&&(V=(V=M[we>>3])>>4-(7&we)&15,I[ae*R+(ye>>1)]|=V<<4-((1&ye)<<2)),F>=8){const Be=ae*R+ye*D;for(let Ie=0;Ie<D;Ie++)I[Be+Ie]=M[(we>>3)+Ie]}we+=F,ye+=Q}ce++,ae+=U}J*Y!=0&&(L+=Y*(1+ie)),re+=1}return I}(f,d)),f}function r(d,f){return o(new Uint8Array(d.buffer,2,d.length-6),f)}var o=function(){const d={H:{}};return d.H.N=function(f,p){const g=Uint8Array;let y,b,_=0,k=0,M=0,N=0,j=0,B=0,F=0,D=0,R=0;if(f[0]==3&&f[1]==0)return p||new g(0);const I=d.H,L=I.b,z=I.e,q=I.R,H=I.n,ne=I.A,re=I.Z,V=I.m,U=p==null;for(U&&(p=new g(f.length>>>2<<5));_==0;)if(_=L(f,R,1),k=L(f,R+1,2),R+=3,k!=0){if(U&&(p=d.H.W(p,D+(1<<17))),k==1&&(y=V.J,b=V.h,B=511,F=31),k==2){M=z(f,R,5)+257,N=z(f,R+5,5)+1,j=z(f,R+10,4)+4,R+=14;let J=1;for(var Q=0;Q<38;Q+=2)V.Q[Q]=0,V.Q[Q+1]=0;for(Q=0;Q<j;Q++){const te=z(f,R+3*Q,3);V.Q[1+(V.X[Q]<<1)]=te,te>J&&(J=te)}R+=3*j,H(V.Q,J),ne(V.Q,J,V.u),y=V.w,b=V.d,R=q(V.u,(1<<J)-1,M+N,f,R,V.v);const Y=I.V(V.v,0,M,V.C);B=(1<<Y)-1;const se=I.V(V.v,M,N,V.D);F=(1<<se)-1,H(V.C,Y),ne(V.C,Y,y),H(V.D,se),ne(V.D,se,b)}for(;;){const J=y[re(f,R)&B];R+=15&J;const Y=J>>>4;if(!(Y>>>8))p[D++]=Y;else{if(Y==256)break;{let se=D+Y-254;if(Y>264){const ye=V.q[Y-257];se=D+(ye>>>3)+z(f,R,7&ye),R+=7&ye}const te=b[re(f,R)&F];R+=15&te;const ie=te>>>4,ce=V.c[ie],ae=(ce>>>4)+L(f,R,15&ce);for(R+=15&ce;D<se;)p[D]=p[D++-ae],p[D]=p[D++-ae],p[D]=p[D++-ae],p[D]=p[D++-ae];D=se}}}}else{(7&R)!=0&&(R+=8-(7&R));const J=4+(R>>>3),Y=f[J-4]|f[J-3]<<8;U&&(p=d.H.W(p,D+Y)),p.set(new g(f.buffer,f.byteOffset+J,Y),D),R=J+Y<<3,D+=Y}return p.length==D?p:p.slice(0,D)},d.H.W=function(f,p){const g=f.length;if(p<=g)return f;const y=new Uint8Array(g<<1);return y.set(f,0),y},d.H.R=function(f,p,g,y,b,_){const k=d.H.e,M=d.H.Z;let N=0;for(;N<g;){const j=f[M(y,b)&p];b+=15&j;const B=j>>>4;if(B<=15)_[N]=B,N++;else{let F=0,D=0;B==16?(D=3+k(y,b,2),b+=2,F=_[N-1]):B==17?(D=3+k(y,b,3),b+=3):B==18&&(D=11+k(y,b,7),b+=7);const R=N+D;for(;N<R;)_[N]=F,N++}}return b},d.H.V=function(f,p,g,y){let b=0,_=0;const k=y.length>>>1;for(;_<g;){const M=f[_+p];y[_<<1]=0,y[1+(_<<1)]=M,M>b&&(b=M),_++}for(;_<k;)y[_<<1]=0,y[1+(_<<1)]=0,_++;return b},d.H.n=function(f,p){const g=d.H.m,y=f.length;let b,_,k,M;const N=g.j;for(var j=0;j<=p;j++)N[j]=0;for(j=1;j<y;j+=2)N[f[j]]++;const B=g.K;for(b=0,N[0]=0,_=1;_<=p;_++)b=b+N[_-1]<<1,B[_]=b;for(k=0;k<y;k+=2)M=f[k+1],M!=0&&(f[k]=B[M],B[M]++)},d.H.A=function(f,p,g){const y=f.length,b=d.H.m.r;for(let _=0;_<y;_+=2)if(f[_+1]!=0){const k=_>>1,M=f[_+1],N=k<<4|M,j=p-M;let B=f[_]<<j;const F=B+(1<<j);for(;B!=F;)g[b[B]>>>15-p]=N,B++}},d.H.l=function(f,p){const g=d.H.m.r,y=15-p;for(let b=0;b<f.length;b+=2){const _=f[b]<<p-f[b+1];f[b]=g[_]>>>y}},d.H.M=function(f,p,g){g<<=7&p;const y=p>>>3;f[y]|=g,f[y+1]|=g>>>8},d.H.I=function(f,p,g){g<<=7&p;const y=p>>>3;f[y]|=g,f[y+1]|=g>>>8,f[y+2]|=g>>>16},d.H.e=function(f,p,g){return(f[p>>>3]|f[1+(p>>>3)]<<8)>>>(7&p)&(1<<g)-1},d.H.b=function(f,p,g){return(f[p>>>3]|f[1+(p>>>3)]<<8|f[2+(p>>>3)]<<16)>>>(7&p)&(1<<g)-1},d.H.Z=function(f,p){return(f[p>>>3]|f[1+(p>>>3)]<<8|f[2+(p>>>3)]<<16)>>>(7&p)},d.H.i=function(f,p){return(f[p>>>3]|f[1+(p>>>3)]<<8|f[2+(p>>>3)]<<16|f[3+(p>>>3)]<<24)>>>(7&p)},d.H.m=function(){const f=Uint16Array,p=Uint32Array;return{K:new f(16),j:new f(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new f(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new p(32),J:new f(512),_:[],h:new f(32),$:[],w:new f(32768),C:[],v:[],d:new f(32768),D:[],u:new f(512),Q:[],r:new f(32768),s:new p(286),Y:new p(30),a:new p(19),t:new p(15e3),k:new f(65536),g:new f(32768)}}(),function(){const f=d.H.m;for(var p=0;p<32768;p++){let y=p;y=(2863311530&y)>>>1|(1431655765&y)<<1,y=(3435973836&y)>>>2|(858993459&y)<<2,y=(4042322160&y)>>>4|(252645135&y)<<4,y=(4278255360&y)>>>8|(16711935&y)<<8,f.r[p]=(y>>>16|y<<16)>>>17}function g(y,b,_){for(;b--!=0;)y.push(0,_)}for(p=0;p<32;p++)f.q[p]=f.S[p]<<3|f.T[p],f.c[p]=f.p[p]<<4|f.z[p];g(f._,144,8),g(f._,112,9),g(f._,24,7),g(f._,8,8),d.H.n(f._,9),d.H.A(f._,9,f.J),d.H.l(f._,9),g(f.$,32,5),d.H.n(f.$,5),d.H.A(f.$,5,f.h),d.H.l(f.$,5),g(f.Q,19,0),g(f.C,286,0),g(f.D,30,0),g(f.v,320,0)}(),d.H.N}();function i(d){return[1,null,3,1,2,null,4][d.ctype]*d.depth}function s(d,f,p,g,y){let b=i(f);const _=Math.ceil(g*b/8);let k,M;b=Math.ceil(b/8);let N=d[p],j=0;if(N>1&&(d[p]=[0,0,1][N-2]),N==3)for(j=b;j<_;j++)d[j+1]=d[j+1]+(d[j+1-b]>>>1)&255;for(let B=0;B<y;B++)if(k=p+B*_,M=k+B+1,N=d[M-1],j=0,N==0)for(;j<_;j++)d[k+j]=d[M+j];else if(N==1){for(;j<b;j++)d[k+j]=d[M+j];for(;j<_;j++)d[k+j]=d[M+j]+d[k+j-b]}else if(N==2)for(;j<_;j++)d[k+j]=d[M+j]+d[k+j-_];else if(N==3){for(;j<b;j++)d[k+j]=d[M+j]+(d[k+j-_]>>>1);for(;j<_;j++)d[k+j]=d[M+j]+(d[k+j-_]+d[k+j-b]>>>1)}else{for(;j<b;j++)d[k+j]=d[M+j]+a(0,d[k+j-_],0);for(;j<_;j++)d[k+j]=d[M+j]+a(d[k+j-b],d[k+j-_],d[k+j-b-_])}return d}function a(d,f,p){const g=d+f-p,y=g-d,b=g-f,_=g-p;return y*y<=b*b&&y*y<=_*_?d:b*b<=_*_?f:p}function l(d,f,p){p.width=t.readUint(d,f),f+=4,p.height=t.readUint(d,f),f+=4,p.depth=d[f],f++,p.ctype=d[f],f++,p.compress=d[f],f++,p.filter=d[f],f++,p.interlace=d[f],f++}function c(d,f,p,g,y,b,_,k,M){const N=Math.min(f,y),j=Math.min(p,b);let B=0,F=0;for(let re=0;re<j;re++)for(let V=0;V<N;V++)if(_>=0&&k>=0?(B=re*f+V<<2,F=(k+re)*y+_+V<<2):(B=(-k+re)*f-_+V<<2,F=re*y+V<<2),M==0)g[F]=d[B],g[F+1]=d[B+1],g[F+2]=d[B+2],g[F+3]=d[B+3];else if(M==1){var D=d[B+3]*.00392156862745098,R=d[B]*D,I=d[B+1]*D,L=d[B+2]*D,z=g[F+3]*(1/255),q=g[F]*z,H=g[F+1]*z,ne=g[F+2]*z;const U=1-D,Q=D+z*U,J=Q==0?0:1/Q;g[F+3]=255*Q,g[F+0]=(R+q*U)*J,g[F+1]=(I+H*U)*J,g[F+2]=(L+ne*U)*J}else if(M==2)D=d[B+3],R=d[B],I=d[B+1],L=d[B+2],z=g[F+3],q=g[F],H=g[F+1],ne=g[F+2],D==z&&R==q&&I==H&&L==ne?(g[F]=0,g[F+1]=0,g[F+2]=0,g[F+3]=0):(g[F]=R,g[F+1]=I,g[F+2]=L,g[F+3]=D);else if(M==3){if(D=d[B+3],R=d[B],I=d[B+1],L=d[B+2],z=g[F+3],q=g[F],H=g[F+1],ne=g[F+2],D==z&&R==q&&I==H&&L==ne)continue;if(D<220&&z>20)return!1}return!0}return{decode:function(f){const p=new Uint8Array(f);let g=8;const y=t,b=y.readUshort,_=y.readUint,k={tabs:{},frames:[]},M=new Uint8Array(p.length);let N,j=0,B=0;const F=[137,80,78,71,13,10,26,10];for(var D=0;D<8;D++)if(p[D]!=F[D])throw"The input is not a PNG file!";for(;g<p.length;){const re=y.readUint(p,g);g+=4;const V=y.readASCII(p,g,4);if(g+=4,V=="IHDR")l(p,g,k);else if(V=="iCCP"){for(var R=g;p[R]!=0;)R++;y.readASCII(p,g,R-g),p[R+1];const U=p.slice(R+2,g+re);let Q=null;try{Q=r(U)}catch{Q=o(U)}k.tabs[V]=Q}else if(V=="CgBI")k.tabs[V]=p.slice(g,g+4);else if(V=="IDAT"){for(D=0;D<re;D++)M[j+D]=p[g+D];j+=re}else if(V=="acTL")k.tabs[V]={num_frames:_(p,g),num_plays:_(p,g+4)},N=new Uint8Array(p.length);else if(V=="fcTL"){B!=0&&((ne=k.frames[k.frames.length-1]).data=n(k,N.slice(0,B),ne.rect.width,ne.rect.height),B=0);const U={x:_(p,g+12),y:_(p,g+16),width:_(p,g+4),height:_(p,g+8)};let Q=b(p,g+22);Q=b(p,g+20)/(Q==0?100:Q);const J={rect:U,delay:Math.round(1e3*Q),dispose:p[g+24],blend:p[g+25]};k.frames.push(J)}else if(V=="fdAT"){for(D=0;D<re-4;D++)N[B+D]=p[g+D+4];B+=re-4}else if(V=="pHYs")k.tabs[V]=[y.readUint(p,g),y.readUint(p,g+4),p[g+8]];else if(V=="cHRM")for(k.tabs[V]=[],D=0;D<8;D++)k.tabs[V].push(y.readUint(p,g+4*D));else if(V=="tEXt"||V=="zTXt"){k.tabs[V]==null&&(k.tabs[V]={});var I=y.nextZero(p,g),L=y.readASCII(p,g,I-g),z=g+re-I-1;if(V=="tEXt")H=y.readASCII(p,I+1,z);else{var q=r(p.slice(I+2,I+2+z));H=y.readUTF8(q,0,q.length)}k.tabs[V][L]=H}else if(V=="iTXt"){k.tabs[V]==null&&(k.tabs[V]={}),I=0,R=g,I=y.nextZero(p,R),L=y.readASCII(p,R,I-R);const U=p[R=I+1];var H;p[R+1],R+=2,I=y.nextZero(p,R),y.readASCII(p,R,I-R),R=I+1,I=y.nextZero(p,R),y.readUTF8(p,R,I-R),z=re-((R=I+1)-g),U==0?H=y.readUTF8(p,R,z):(q=r(p.slice(R,R+z)),H=y.readUTF8(q,0,q.length)),k.tabs[V][L]=H}else if(V=="PLTE")k.tabs[V]=y.readBytes(p,g,re);else if(V=="hIST"){const U=k.tabs.PLTE.length/3;for(k.tabs[V]=[],D=0;D<U;D++)k.tabs[V].push(b(p,g+2*D))}else if(V=="tRNS")k.ctype==3?k.tabs[V]=y.readBytes(p,g,re):k.ctype==0?k.tabs[V]=b(p,g):k.ctype==2&&(k.tabs[V]=[b(p,g),b(p,g+2),b(p,g+4)]);else if(V=="gAMA")k.tabs[V]=y.readUint(p,g)/1e5;else if(V=="sRGB")k.tabs[V]=p[g];else if(V=="bKGD")k.ctype==0||k.ctype==4?k.tabs[V]=[b(p,g)]:k.ctype==2||k.ctype==6?k.tabs[V]=[b(p,g),b(p,g+2),b(p,g+4)]:k.ctype==3&&(k.tabs[V]=p[g]);else if(V=="IEND")break;g+=re,y.readUint(p,g),g+=4}var ne;return B!=0&&((ne=k.frames[k.frames.length-1]).data=n(k,N.slice(0,B),ne.rect.width,ne.rect.height)),k.data=n(k,M,k.width,k.height),delete k.compress,delete k.interlace,delete k.filter,k},toRGBA8:function(f){const p=f.width,g=f.height;if(f.tabs.acTL==null)return[e(f.data,p,g,f).buffer];const y=[];f.frames[0].data==null&&(f.frames[0].data=f.data);const b=p*g*4,_=new Uint8Array(b),k=new Uint8Array(b),M=new Uint8Array(b);for(let j=0;j<f.frames.length;j++){const B=f.frames[j],F=B.rect.x,D=B.rect.y,R=B.rect.width,I=B.rect.height,L=e(B.data,R,I,f);if(j!=0)for(var N=0;N<b;N++)M[N]=_[N];if(B.blend==0?c(L,R,I,_,p,g,F,D,0):B.blend==1&&c(L,R,I,_,p,g,F,D,1),y.push(_.buffer.slice(0)),B.dispose!=0){if(B.dispose==1)c(k,R,I,_,p,g,F,D,0);else if(B.dispose==2)for(N=0;N<b;N++)_[N]=M[N]}}return y},_paeth:a,_copyTile:c,_bin:t}}();(function(){const{_copyTile:t}=ll,{_bin:e}=ll,n=ll._paeth;var r={table:function(){const R=new Uint32Array(256);for(let I=0;I<256;I++){let L=I;for(let z=0;z<8;z++)1&L?L=3988292384^L>>>1:L>>>=1;R[I]=L}return R}(),update(R,I,L,z){for(let q=0;q<z;q++)R=r.table[255&(R^I[L+q])]^R>>>8;return R},crc:(R,I,L)=>4294967295^r.update(4294967295,R,I,L)};function o(R,I,L,z){I[L]+=R[0]*z>>4,I[L+1]+=R[1]*z>>4,I[L+2]+=R[2]*z>>4,I[L+3]+=R[3]*z>>4}function i(R){return Math.max(0,Math.min(255,R))}function s(R,I){const L=R[0]-I[0],z=R[1]-I[1],q=R[2]-I[2],H=R[3]-I[3];return L*L+z*z+q*q+H*H}function a(R,I,L,z,q,H,ne){ne==null&&(ne=1);const re=z.length,V=[];for(var U=0;U<re;U++){const ae=z[U];V.push([ae>>>0&255,ae>>>8&255,ae>>>16&255,ae>>>24&255])}for(U=0;U<re;U++){let ae=4294967295;for(var Q=0,J=0;J<re;J++){var Y=s(V[U],V[J]);J!=U&&Y<ae&&(ae=Y,Q=J)}}const se=new Uint32Array(q.buffer),te=new Int16Array(I*L*4),ie=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(U=0;U<ie.length;U++)ie[U]=255*((ie[U]+.5)/16-.5);for(let ae=0;ae<L;ae++)for(let ye=0;ye<I;ye++){var ce;U=4*(ae*I+ye),ne!=2?ce=[i(R[U]+te[U]),i(R[U+1]+te[U+1]),i(R[U+2]+te[U+2]),i(R[U+3]+te[U+3])]:(Y=ie[4*(3&ae)+(3&ye)],ce=[i(R[U]+Y),i(R[U+1]+Y),i(R[U+2]+Y),i(R[U+3]+Y)]),Q=0;let we=16777215;for(J=0;J<re;J++){const Ge=s(ce,V[J]);Ge<we&&(we=Ge,Q=J)}const Be=V[Q],Ie=[ce[0]-Be[0],ce[1]-Be[1],ce[2]-Be[2],ce[3]-Be[3]];ne==1&&(ye!=I-1&&o(Ie,te,U+4,7),ae!=L-1&&(ye!=0&&o(Ie,te,U+4*I-4,3),o(Ie,te,U+4*I,5),ye!=I-1&&o(Ie,te,U+4*I+4,1))),H[U>>2]=Q,se[U>>2]=z[Q]}}function l(R,I,L,z,q){q==null&&(q={});const{crc:H}=r,ne=e.writeUint,re=e.writeUshort,V=e.writeASCII;let U=8;const Q=R.frames.length>1;let J,Y=!1,se=33+(Q?20:0);if(q.sRGB!=null&&(se+=13),q.pHYs!=null&&(se+=21),q.iCCP!=null&&(J=pako.deflate(q.iCCP),se+=21+J.length+4),R.ctype==3){for(var te=R.plte.length,ie=0;ie<te;ie++)R.plte[ie]>>>24!=255&&(Y=!0);se+=8+3*te+4+(Y?8+1*te+4:0)}for(var ce=0;ce<R.frames.length;ce++)Q&&(se+=38),se+=(Be=R.frames[ce]).cimg.length+12,ce!=0&&(se+=4);se+=12;const ae=new Uint8Array(se),ye=[137,80,78,71,13,10,26,10];for(ie=0;ie<8;ie++)ae[ie]=ye[ie];if(ne(ae,U,13),U+=4,V(ae,U,"IHDR"),U+=4,ne(ae,U,I),U+=4,ne(ae,U,L),U+=4,ae[U]=R.depth,U++,ae[U]=R.ctype,U++,ae[U]=0,U++,ae[U]=0,U++,ae[U]=0,U++,ne(ae,U,H(ae,U-17,17)),U+=4,q.sRGB!=null&&(ne(ae,U,1),U+=4,V(ae,U,"sRGB"),U+=4,ae[U]=q.sRGB,U++,ne(ae,U,H(ae,U-5,5)),U+=4),q.iCCP!=null){const Ie=13+J.length;ne(ae,U,Ie),U+=4,V(ae,U,"iCCP"),U+=4,V(ae,U,"ICC profile"),U+=11,U+=2,ae.set(J,U),U+=J.length,ne(ae,U,H(ae,U-(Ie+4),Ie+4)),U+=4}if(q.pHYs!=null&&(ne(ae,U,9),U+=4,V(ae,U,"pHYs"),U+=4,ne(ae,U,q.pHYs[0]),U+=4,ne(ae,U,q.pHYs[1]),U+=4,ae[U]=q.pHYs[2],U++,ne(ae,U,H(ae,U-13,13)),U+=4),Q&&(ne(ae,U,8),U+=4,V(ae,U,"acTL"),U+=4,ne(ae,U,R.frames.length),U+=4,ne(ae,U,q.loop!=null?q.loop:0),U+=4,ne(ae,U,H(ae,U-12,12)),U+=4),R.ctype==3){for(ne(ae,U,3*(te=R.plte.length)),U+=4,V(ae,U,"PLTE"),U+=4,ie=0;ie<te;ie++){const Ie=3*ie,Ge=R.plte[ie],it=255&Ge,Xe=Ge>>>8&255,zt=Ge>>>16&255;ae[U+Ie+0]=it,ae[U+Ie+1]=Xe,ae[U+Ie+2]=zt}if(U+=3*te,ne(ae,U,H(ae,U-3*te-4,3*te+4)),U+=4,Y){for(ne(ae,U,te),U+=4,V(ae,U,"tRNS"),U+=4,ie=0;ie<te;ie++)ae[U+ie]=R.plte[ie]>>>24&255;U+=te,ne(ae,U,H(ae,U-te-4,te+4)),U+=4}}let we=0;for(ce=0;ce<R.frames.length;ce++){var Be=R.frames[ce];Q&&(ne(ae,U,26),U+=4,V(ae,U,"fcTL"),U+=4,ne(ae,U,we++),U+=4,ne(ae,U,Be.rect.width),U+=4,ne(ae,U,Be.rect.height),U+=4,ne(ae,U,Be.rect.x),U+=4,ne(ae,U,Be.rect.y),U+=4,re(ae,U,z[ce]),U+=2,re(ae,U,1e3),U+=2,ae[U]=Be.dispose,U++,ae[U]=Be.blend,U++,ne(ae,U,H(ae,U-30,30)),U+=4);const Ie=Be.cimg;ne(ae,U,(te=Ie.length)+(ce==0?0:4)),U+=4;const Ge=U;V(ae,U,ce==0?"IDAT":"fdAT"),U+=4,ce!=0&&(ne(ae,U,we++),U+=4),ae.set(Ie,U),U+=te,ne(ae,U,H(ae,Ge,U-Ge)),U+=4}return ne(ae,U,0),U+=4,V(ae,U,"IEND"),U+=4,ne(ae,U,H(ae,U-4,4)),U+=4,ae.buffer}function c(R,I,L){for(let z=0;z<R.frames.length;z++){const q=R.frames[z];q.rect.width;const H=q.rect.height,ne=new Uint8Array(H*q.bpl+H);q.cimg=g(q.img,H,q.bpp,q.bpl,ne,I,L)}}function d(R,I,L,z,q){const H=q[0],ne=q[1],re=q[2],V=q[3],U=q[4],Q=q[5];let J=6,Y=8,se=255;for(var te=0;te<R.length;te++){const Pn=new Uint8Array(R[te]);for(var ie=Pn.length,ce=0;ce<ie;ce+=4)se&=Pn[ce+3]}const ae=se!=255,ye=function(kt,hn,sn,Ft,Wt,En){const Jt=[];for(var pn=0;pn<kt.length;pn++){const Gn=new Uint8Array(kt[pn]),Dr=new Uint32Array(Gn.buffer);var Dn;let Nn=0,Ar=0,Rr=hn,qn=sn,st=Ft?1:0;if(pn!=0){const Xo=En||Ft||pn==1||Jt[pn-2].dispose!=0?1:2;let Xr=0,Fr=1e9;for(let tt=0;tt<Xo;tt++){var Gt=new Uint8Array(kt[pn-1-tt]);const Qo=new Uint32Array(kt[pn-1-tt]);let Ir=hn,Qr=sn,yt=-1,Vn=-1;for(let Yn=0;Yn<sn;Yn++)for(let sr=0;sr<hn;sr++)Dr[bn=Yn*hn+sr]!=Qo[bn]&&(sr<Ir&&(Ir=sr),sr>yt&&(yt=sr),Yn<Qr&&(Qr=Yn),Yn>Vn&&(Vn=Yn));yt==-1&&(Ir=Qr=yt=Vn=0),Wt&&((1&Ir)==1&&Ir--,(1&Qr)==1&&Qr--);const Wn=(yt-Ir+1)*(Vn-Qr+1);Wn<Fr&&(Fr=Wn,Xr=tt,Nn=Ir,Ar=Qr,Rr=yt-Ir+1,qn=Vn-Qr+1)}Gt=new Uint8Array(kt[pn-1-Xr]),Xr==1&&(Jt[pn-1].dispose=2),Dn=new Uint8Array(Rr*qn*4),t(Gt,hn,sn,Dn,Rr,qn,-Nn,-Ar,0),st=t(Gn,hn,sn,Dn,Rr,qn,-Nn,-Ar,3)?1:0,st==1?p(Gn,hn,sn,Dn,{x:Nn,y:Ar,width:Rr,height:qn}):t(Gn,hn,sn,Dn,Rr,qn,-Nn,-Ar,0)}else Dn=Gn.slice(0);Jt.push({rect:{x:Nn,y:Ar,width:Rr,height:qn},img:Dn,blend:st,dispose:0})}if(Ft)for(pn=0;pn<Jt.length;pn++){if((Ln=Jt[pn]).blend==1)continue;const Gn=Ln.rect,Dr=Jt[pn-1].rect,Nn=Math.min(Gn.x,Dr.x),Ar=Math.min(Gn.y,Dr.y),Rr={x:Nn,y:Ar,width:Math.max(Gn.x+Gn.width,Dr.x+Dr.width)-Nn,height:Math.max(Gn.y+Gn.height,Dr.y+Dr.height)-Ar};Jt[pn-1].dispose=1,pn-1!=0&&f(kt,hn,sn,Jt,pn-1,Rr,Wt),f(kt,hn,sn,Jt,pn,Rr,Wt)}let qt=0;if(kt.length!=1)for(var bn=0;bn<Jt.length;bn++){var Ln;qt+=(Ln=Jt[bn]).rect.width*Ln.rect.height}return Jt}(R,I,L,H,ne,re),we={},Be=[],Ie=[];if(z!=0){const Pn=[];for(ce=0;ce<ye.length;ce++)Pn.push(ye[ce].img.buffer);const kt=function(Wt){let En=0;for(var Jt=0;Jt<Wt.length;Jt++)En+=Wt[Jt].byteLength;const pn=new Uint8Array(En);let Dn=0;for(Jt=0;Jt<Wt.length;Jt++){const Gt=new Uint8Array(Wt[Jt]),qt=Gt.length;for(let bn=0;bn<qt;bn+=4){let Ln=Gt[bn],Gn=Gt[bn+1],Dr=Gt[bn+2];const Nn=Gt[bn+3];Nn==0&&(Ln=Gn=Dr=0),pn[Dn+bn]=Ln,pn[Dn+bn+1]=Gn,pn[Dn+bn+2]=Dr,pn[Dn+bn+3]=Nn}Dn+=qt}return pn.buffer}(Pn),hn=b(kt,z);for(ce=0;ce<hn.plte.length;ce++)Be.push(hn.plte[ce].est.rgba);let sn=0;for(ce=0;ce<ye.length;ce++){const Ft=(it=ye[ce]).img.length;var Ge=new Uint8Array(hn.inds.buffer,sn>>2,Ft>>2);Ie.push(Ge);const Wt=new Uint8Array(hn.abuf,sn,Ft);Q&&a(it.img,it.rect.width,it.rect.height,Be,Wt,Ge),it.img.set(Wt),sn+=Ft}}else for(te=0;te<ye.length;te++){var it=ye[te];const Pn=new Uint32Array(it.img.buffer);var Xe=it.rect.width;for(ie=Pn.length,Ge=new Uint8Array(ie),Ie.push(Ge),ce=0;ce<ie;ce++){const kt=Pn[ce];if(ce!=0&&kt==Pn[ce-1])Ge[ce]=Ge[ce-1];else if(ce>Xe&&kt==Pn[ce-Xe])Ge[ce]=Ge[ce-Xe];else{let hn=we[kt];if(hn==null&&(we[kt]=hn=Be.length,Be.push(kt),Be.length>=300))break;Ge[ce]=hn}}}const zt=Be.length;for(zt<=256&&U==0&&(Y=zt<=2?1:zt<=4?2:zt<=16?4:8,Y=Math.max(Y,V)),te=0;te<ye.length;te++){(it=ye[te]).rect.x,it.rect.y,Xe=it.rect.width;const Pn=it.rect.height;let kt=it.img;new Uint32Array(kt.buffer);let hn=4*Xe,sn=4;if(zt<=256&&U==0){hn=Math.ceil(Y*Xe/8);var un=new Uint8Array(hn*Pn);const Ft=Ie[te];for(let Wt=0;Wt<Pn;Wt++){ce=Wt*hn;const En=Wt*Xe;if(Y==8)for(var Pt=0;Pt<Xe;Pt++)un[ce+Pt]=Ft[En+Pt];else if(Y==4)for(Pt=0;Pt<Xe;Pt++)un[ce+(Pt>>1)]|=Ft[En+Pt]<<4-4*(1&Pt);else if(Y==2)for(Pt=0;Pt<Xe;Pt++)un[ce+(Pt>>2)]|=Ft[En+Pt]<<6-2*(3&Pt);else if(Y==1)for(Pt=0;Pt<Xe;Pt++)un[ce+(Pt>>3)]|=Ft[En+Pt]<<7-1*(7&Pt)}kt=un,J=3,sn=1}else if(ae==0&&ye.length==1){un=new Uint8Array(Xe*Pn*3);const Ft=Xe*Pn;for(ce=0;ce<Ft;ce++){const Wt=3*ce,En=4*ce;un[Wt]=kt[En],un[Wt+1]=kt[En+1],un[Wt+2]=kt[En+2]}kt=un,J=2,sn=3,hn=3*Xe}it.img=kt,it.bpl=hn,it.bpp=sn}return{ctype:J,depth:Y,plte:Be,frames:ye}}function f(R,I,L,z,q,H,ne){const re=Uint8Array,V=Uint32Array,U=new re(R[q-1]),Q=new V(R[q-1]),J=q+1<R.length?new re(R[q+1]):null,Y=new re(R[q]),se=new V(Y.buffer);let te=I,ie=L,ce=-1,ae=-1;for(let we=0;we<H.height;we++)for(let Be=0;Be<H.width;Be++){const Ie=H.x+Be,Ge=H.y+we,it=Ge*I+Ie,Xe=se[it];Xe==0||z[q-1].dispose==0&&Q[it]==Xe&&(J==null||J[4*it+3]!=0)||(Ie<te&&(te=Ie),Ie>ce&&(ce=Ie),Ge<ie&&(ie=Ge),Ge>ae&&(ae=Ge))}ce==-1&&(te=ie=ce=ae=0),ne&&((1&te)==1&&te--,(1&ie)==1&&ie--),H={x:te,y:ie,width:ce-te+1,height:ae-ie+1};const ye=z[q];ye.rect=H,ye.blend=1,ye.img=new Uint8Array(H.width*H.height*4),z[q-1].dispose==0?(t(U,I,L,ye.img,H.width,H.height,-H.x,-H.y,0),p(Y,I,L,ye.img,H)):t(Y,I,L,ye.img,H.width,H.height,-H.x,-H.y,0)}function p(R,I,L,z,q){t(R,I,L,z,q.width,q.height,-q.x,-q.y,2)}function g(R,I,L,z,q,H,ne){const re=[];let V,U=[0,1,2,3,4];H!=-1?U=[H]:(I*z>5e5||L==1)&&(U=[0]),ne&&(V={level:0});const Q=mje;for(var J=0;J<U.length;J++){for(let te=0;te<I;te++)y(q,R,te,z,L,U[J]);re.push(Q.deflate(q,V))}let Y,se=1e9;for(J=0;J<re.length;J++)re[J].length<se&&(Y=J,se=re[J].length);return re[Y]}function y(R,I,L,z,q,H){const ne=L*z;let re=ne+L;if(R[re]=H,re++,H==0)if(z<500)for(var V=0;V<z;V++)R[re+V]=I[ne+V];else R.set(new Uint8Array(I.buffer,ne,z),re);else if(H==1){for(V=0;V<q;V++)R[re+V]=I[ne+V];for(V=q;V<z;V++)R[re+V]=I[ne+V]-I[ne+V-q]+256&255}else if(L==0){for(V=0;V<q;V++)R[re+V]=I[ne+V];if(H==2)for(V=q;V<z;V++)R[re+V]=I[ne+V];if(H==3)for(V=q;V<z;V++)R[re+V]=I[ne+V]-(I[ne+V-q]>>1)+256&255;if(H==4)for(V=q;V<z;V++)R[re+V]=I[ne+V]-n(I[ne+V-q],0,0)+256&255}else{if(H==2)for(V=0;V<z;V++)R[re+V]=I[ne+V]+256-I[ne+V-z]&255;if(H==3){for(V=0;V<q;V++)R[re+V]=I[ne+V]+256-(I[ne+V-z]>>1)&255;for(V=q;V<z;V++)R[re+V]=I[ne+V]+256-(I[ne+V-z]+I[ne+V-q]>>1)&255}if(H==4){for(V=0;V<q;V++)R[re+V]=I[ne+V]+256-n(0,I[ne+V-z],0)&255;for(V=q;V<z;V++)R[re+V]=I[ne+V]+256-n(I[ne+V-q],I[ne+V-z],I[ne+V-q-z])&255}}}function b(R,I){const L=new Uint8Array(R),z=L.slice(0),q=new Uint32Array(z.buffer),H=_(z,I),ne=H[0],re=H[1],V=L.length,U=new Uint8Array(V>>2);let Q;if(L.length<2e7)for(var J=0;J<V;J+=4)Q=k(ne,Y=L[J]*(1/255),se=L[J+1]*(1/255),te=L[J+2]*(1/255),ie=L[J+3]*(1/255)),U[J>>2]=Q.ind,q[J>>2]=Q.est.rgba;else for(J=0;J<V;J+=4){var Y=L[J]*.00392156862745098,se=L[J+1]*(1/255),te=L[J+2]*(1/255),ie=L[J+3]*(1/255);for(Q=ne;Q.left;)Q=M(Q.est,Y,se,te,ie)<=0?Q.left:Q.right;U[J>>2]=Q.ind,q[J>>2]=Q.est.rgba}return{abuf:z.buffer,inds:U,plte:re}}function _(R,I,L){L==null&&(L=1e-4);const z=new Uint32Array(R.buffer),q={i0:0,i1:R.length,bst:null,est:null,tdst:0,left:null,right:null};q.bst=B(R,q.i0,q.i1),q.est=F(q.bst);const H=[q];for(;H.length<I;){let re=0,V=0;for(var ne=0;ne<H.length;ne++)H[ne].est.L>re&&(re=H[ne].est.L,V=ne);if(re<L)break;const U=H[V],Q=N(R,z,U.i0,U.i1,U.est.e,U.est.eMq255);if(U.i0>=Q||U.i1<=Q){U.est.L=0;continue}const J={i0:U.i0,i1:Q,bst:null,est:null,tdst:0,left:null,right:null};J.bst=B(R,J.i0,J.i1),J.est=F(J.bst);const Y={i0:Q,i1:U.i1,bst:null,est:null,tdst:0,left:null,right:null};for(Y.bst={R:[],m:[],N:U.bst.N-J.bst.N},ne=0;ne<16;ne++)Y.bst.R[ne]=U.bst.R[ne]-J.bst.R[ne];for(ne=0;ne<4;ne++)Y.bst.m[ne]=U.bst.m[ne]-J.bst.m[ne];Y.est=F(Y.bst),U.left=J,U.right=Y,H[V]=J,H.push(Y)}for(H.sort((re,V)=>V.bst.N-re.bst.N),ne=0;ne<H.length;ne++)H[ne].ind=ne;return[q,H]}function k(R,I,L,z,q){if(R.left==null)return R.tdst=function(J,Y,se,te,ie){const ce=Y-J[0],ae=se-J[1],ye=te-J[2],we=ie-J[3];return ce*ce+ae*ae+ye*ye+we*we}(R.est.q,I,L,z,q),R;const H=M(R.est,I,L,z,q);let ne=R.left,re=R.right;H>0&&(ne=R.right,re=R.left);const V=k(ne,I,L,z,q);if(V.tdst<=H*H)return V;const U=k(re,I,L,z,q);return U.tdst<V.tdst?U:V}function M(R,I,L,z,q){const{e:H}=R;return H[0]*I+H[1]*L+H[2]*z+H[3]*q-R.eMq}function N(R,I,L,z,q,H){for(z-=4;L<z;){for(;j(R,L,q)<=H;)L+=4;for(;j(R,z,q)>H;)z-=4;if(L>=z)break;const ne=I[L>>2];I[L>>2]=I[z>>2],I[z>>2]=ne,L+=4,z-=4}for(;j(R,L,q)>H;)L-=4;return L+4}function j(R,I,L){return R[I]*L[0]+R[I+1]*L[1]+R[I+2]*L[2]+R[I+3]*L[3]}function B(R,I,L){const z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],q=[0,0,0,0],H=L-I>>2;for(let ne=I;ne<L;ne+=4){const re=R[ne]*.00392156862745098,V=R[ne+1]*(1/255),U=R[ne+2]*(1/255),Q=R[ne+3]*(1/255);q[0]+=re,q[1]+=V,q[2]+=U,q[3]+=Q,z[0]+=re*re,z[1]+=re*V,z[2]+=re*U,z[3]+=re*Q,z[5]+=V*V,z[6]+=V*U,z[7]+=V*Q,z[10]+=U*U,z[11]+=U*Q,z[15]+=Q*Q}return z[4]=z[1],z[8]=z[2],z[9]=z[6],z[12]=z[3],z[13]=z[7],z[14]=z[11],{R:z,m:q,N:H}}function F(R){const{R:I}=R,{m:L}=R,{N:z}=R,q=L[0],H=L[1],ne=L[2],re=L[3],V=z==0?0:1/z,U=[I[0]-q*q*V,I[1]-q*H*V,I[2]-q*ne*V,I[3]-q*re*V,I[4]-H*q*V,I[5]-H*H*V,I[6]-H*ne*V,I[7]-H*re*V,I[8]-ne*q*V,I[9]-ne*H*V,I[10]-ne*ne*V,I[11]-ne*re*V,I[12]-re*q*V,I[13]-re*H*V,I[14]-re*ne*V,I[15]-re*re*V],Q=U,J=D;let Y=[Math.random(),Math.random(),Math.random(),Math.random()],se=0,te=0;if(z!=0)for(let ce=0;ce<16&&(Y=J.multVec(Q,Y),te=Math.sqrt(J.dot(Y,Y)),Y=J.sml(1/te,Y),!(ce!=0&&Math.abs(te-se)<1e-9));ce++)se=te;const ie=[q*V,H*V,ne*V,re*V];return{Cov:U,q:ie,e:Y,L:se,eMq255:J.dot(J.sml(255,ie),Y),eMq:J.dot(Y,ie),rgba:(Math.round(255*ie[3])<<24|Math.round(255*ie[2])<<16|Math.round(255*ie[1])<<8|Math.round(255*ie[0])<<0)>>>0}}var D={multVec:(R,I)=>[R[0]*I[0]+R[1]*I[1]+R[2]*I[2]+R[3]*I[3],R[4]*I[0]+R[5]*I[1]+R[6]*I[2]+R[7]*I[3],R[8]*I[0]+R[9]*I[1]+R[10]*I[2]+R[11]*I[3],R[12]*I[0]+R[13]*I[1]+R[14]*I[2]+R[15]*I[3]],dot:(R,I)=>R[0]*I[0]+R[1]*I[1]+R[2]*I[2]+R[3]*I[3],sml:(R,I)=>[R*I[0],R*I[1],R*I[2],R*I[3]]};ll.encode=function(I,L,z,q,H,ne,re){q==null&&(q=0),re==null&&(re=!1);const V=d(I,L,z,q,[!1,!1,!1,0,re,!1]);return c(V,-1),l(V,L,z,H,ne)},ll.encodeLL=function(I,L,z,q,H,ne,re,V){const U={ctype:0+(q==1?0:2)+(H==0?0:4),depth:ne,frames:[]},Q=(q+H)*ne,J=Q*L;for(let Y=0;Y<I.length;Y++)U.frames.push({rect:{x:0,y:0,width:L,height:z},img:new Uint8Array(I[Y]),blend:0,dispose:1,bpp:Math.ceil(Q/8),bpl:Math.ceil(J/8)});return c(U,0,!0),l(U,L,z,re,V)},ll.encode.compress=d,ll.encode.dither=a,ll.quantize=b,ll.quantize.getKDtree=_,ll.quantize.getNearest=k})();const NQ={toArrayBuffer(t,e){const n=t.width,r=t.height,o=n<<2,i=t.getContext("2d").getImageData(0,0,n,r),s=new Uint32Array(i.data.buffer),a=(32*n+31)/32<<2,l=a*r,c=122+l,d=new ArrayBuffer(c),f=new DataView(d),p=1<<20;let g,y,b,_,k=p,M=0,N=0,j=0;function B(R){f.setUint16(N,R,!0),N+=2}function F(R){f.setUint32(N,R,!0),N+=4}function D(R){N+=R}B(19778),F(c),D(4),F(122),F(108),F(n),F(-r>>>0),B(1),B(32),F(3),F(l),F(2835),F(2835),D(8),F(16711680),F(65280),F(255),F(4278190080),F(1466527264),function R(){for(;M<r&&k>0;){for(_=122+M*a,g=0;g<o;)k--,y=s[j++],b=y>>>24,f.setUint32(_+g,y<<8|b),g+=4;M++}j<s.length?(k=p,setTimeout(R,NQ._dly)):e(d)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var Cs={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},gje={[Cs.CHROME]:16384,[Cs.FIREFOX]:11180,[Cs.DESKTOP_SAFARI]:16384,[Cs.IE]:8192,[Cs.IOS]:4096,[Cs.ETC]:8192};const ID=typeof window<"u",OQ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,v_=ID&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),yje=(ID||OQ)&&(v_&&v_.getOriginalSymbol(window,"File")||typeof File<"u"&&File),PQ=(ID||OQ)&&(v_&&v_.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function MD(t,e,n=Date.now()){return new Promise(r=>{const o=t.split(","),i=o[0].match(/:(.*?);/)[1],s=globalThis.atob(o[1]);let a=s.length;const l=new Uint8Array(a);for(;a--;)l[a]=s.charCodeAt(a);const c=new Blob([l],{type:i});c.name=e,c.lastModified=n,r(c)})}function DQ(t){return new Promise((e,n)=>{const r=new PQ;r.onload=()=>e(r.result),r.onerror=o=>n(o),r.readAsDataURL(t)})}function LQ(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=o=>n(o),r.src=t})}function Mh(){if(Mh.cachedResult!==void 0)return Mh.cachedResult;let t=Cs.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=Cs.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=Cs.IOS:/Safari/i.test(e)?t=Cs.DESKTOP_SAFARI:/Firefox/i.test(e)?t=Cs.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=Cs.IE),Mh.cachedResult=t,Mh.cachedResult}function VQ(t,e){const n=Mh(),r=gje[n];let o=t,i=e,s=o*i;const a=o>i?i/o:o/i;for(;s>r*r;){const l=(r+o)/2,c=(r+i)/2;l<c?(i=c,o=c*a):(i=l*a,o=l),s=o*i}return{width:o,height:i}}function SE(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function jQ(t,e){const{width:n,height:r}=VQ(t.width,t.height),[o,i]=SE(n,r);return e&&/jpe?g/.test(e)&&(i.fillStyle="white",i.fillRect(0,0,o.width,o.height)),i.drawImage(t,0,0,o.width,o.height),o}function lC(){return lC.cachedResult!==void 0||(lC.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),lC.cachedResult}function b_(t,e={}){return new Promise(function(n,r){let o,i;var s=function(){try{return i=jQ(o,e.fileType||t.type),n([o,i])}catch(l){return r(l)}},a=function(l){try{var c=function(d){try{throw d}catch(f){return r(f)}};try{let d;return DQ(t).then(function(f){try{return d=f,LQ(d).then(function(p){try{return o=p,function(){try{return s()}catch(g){return r(g)}}()}catch(g){return c(g)}},c)}catch(p){return c(p)}},c)}catch(d){c(d)}}catch(d){return r(d)}};try{if(lC()||[Cs.DESKTOP_SAFARI,Cs.MOBILE_SAFARI].includes(Mh()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return o=l,s()}catch{return a()}},a)}catch{a()}})}function w_(t,e,n,r,o=1){return new Promise(function(i,s){let a;if(e==="image/png"){let c,d,f;return c=t.getContext("2d"),{data:d}=c.getImageData(0,0,t.width,t.height),f=ll.encode([d.buffer],t.width,t.height,4096*o),a=new Blob([f],{type:e}),a.name=n,a.lastModified=r,l.call(this)}{let c=function(){return l.call(this)};if(e==="image/bmp")return new Promise(d=>NQ.toBlob(t,d)).then((function(d){try{return a=d,a.name=n,a.lastModified=r,c.call(this)}catch(f){return s(f)}}).bind(this),s);{let d=function(){return c.call(this)};if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:o}).then((function(f){try{return a=f,a.name=n,a.lastModified=r,d.call(this)}catch(p){return s(p)}}).bind(this),s);{let f;return f=t.toDataURL(e,o),MD(f,n,r).then((function(p){try{return a=p,d.call(this)}catch(g){return s(g)}}).bind(this),s)}}}function l(){return i(a)}})}function tc(t){t.width=0,t.height=0}function Tm(){return new Promise(function(t,e){let n,r,o,i;return Tm.cachedResult!==void 0?t(Tm.cachedResult):MD("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return n=s,b_(n).then(function(a){try{return r=a[1],w_(r,n.type,n.name,n.lastModified).then(function(l){try{return o=l,tc(r),b_(o).then(function(c){try{return i=c[0],Tm.cachedResult=i.width===1&&i.height===2,t(Tm.cachedResult)}catch(d){return e(d)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)}catch(a){return e(a)}},e)})}function BQ(t){return new Promise((e,n)=>{const r=new PQ;r.onload=o=>{const i=new DataView(o.target.result);if(i.getUint16(0,!1)!=65496)return e(-2);const s=i.byteLength;let a=2;for(;a<s;){if(i.getUint16(a+2,!1)<=8)return e(-1);const l=i.getUint16(a,!1);if(a+=2,l==65505){if(i.getUint32(a+=2,!1)!=1165519206)return e(-1);const c=i.getUint16(a+=6,!1)==18761;a+=i.getUint32(a+4,c);const d=i.getUint16(a,c);a+=2;for(let f=0;f<d;f++)if(i.getUint16(a+12*f,c)==274)return e(i.getUint16(a+12*f+8,c))}else{if((65280&l)!=65280)break;a+=i.getUint16(a,!1)}}return e(-1)},r.onerror=o=>n(o),r.readAsArrayBuffer(t)})}function $Q(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:o}=e;let i,s=t;return isFinite(o)&&(n>o||r>o)&&([s,i]=SE(n,r),n>r?(s.width=o,s.height=r/n*o):(s.width=n/r*o,s.height=o),i.drawImage(t,0,0,s.width,s.height),tc(t)),s}function FQ(t,e){const{width:n}=t,{height:r}=t,[o,i]=SE(n,r);switch(e>4&&e<9?(o.width=r,o.height=n):(o.width=n,o.height=r),e){case 2:i.transform(-1,0,0,1,n,0);break;case 3:i.transform(-1,0,0,-1,n,r);break;case 4:i.transform(1,0,0,-1,0,r);break;case 5:i.transform(0,1,1,0,0,0);break;case 6:i.transform(0,1,-1,0,r,0);break;case 7:i.transform(0,-1,-1,0,r,n);break;case 8:i.transform(0,-1,1,0,0,n)}return i.drawImage(t,0,0,n,r),tc(t),o}function q9(t,e,n=0){return new Promise(function(r,o){let i,s,a,l,c,d,f,p,g,y,b,_,k,M,N,j,B,F,D,R;function I(z=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;i+=z,e.onProgress(Math.min(i,100))}function L(z){if(e.signal&&e.signal.aborted)throw e.signal.reason;i=Math.min(Math.max(z,i),100),e.onProgress(i)}return i=n,s=e.maxIteration||10,a=1024*e.maxSizeMB*1024,I(),b_(t,e).then((function(z){try{return[,l]=z,I(),c=$Q(l,e),I(),new Promise(function(q,H){var ne;if(!(ne=e.exifOrientation))return BQ(t).then((function(V){try{return ne=V,re.call(this)}catch(U){return H(U)}}).bind(this),H);function re(){return q(ne)}return re.call(this)}).then((function(q){try{return d=q,I(),Tm().then((function(H){try{return f=H?c:FQ(c,d),I(),p=e.initialQuality||1,g=e.fileType||t.type,w_(f,g,t.name,t.lastModified,p).then((function(ne){try{{let V=function(){if(s--&&(N>a||N>k)){let Q,J;return Q=R?.95*D.width:D.width,J=R?.95*D.height:D.height,[B,F]=SE(Q,J),F.drawImage(D,0,0,Q,J),p*=g==="image/png"?.85:.95,w_(B,g,t.name,t.lastModified,p).then(function(Y){try{return j=Y,tc(D),D=B,N=j.size,L(Math.min(99,Math.floor((M-N)/(M-a)*100))),V}catch(se){return o(se)}},o)}return[1]},U=function(){return tc(D),tc(B),tc(c),tc(f),tc(l),L(100),r(j)};if(y=ne,I(),b=y.size>a,_=y.size>t.size,!b&&!_)return L(100),r(y);var re;return k=t.size,M=y.size,N=M,D=f,R=!e.alwaysKeepResolution&&b,(re=(function(Q){for(;Q;){if(Q.then)return void Q.then(re,o);try{if(Q.pop){if(Q.length)return Q.pop()?U.call(this):Q;Q=V}else Q=Q.call(this)}catch(J){return o(J)}}}).bind(this))(V)}}catch(V){return o(V)}}).bind(this),o)}catch(ne){return o(ne)}}).bind(this),o)}catch(H){return o(H)}}).bind(this),o)}catch(q){return o(q)}}).bind(this),o)})}const vje=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let T2;function bje(t,e){return new Promise((n,r)=>{T2||(T2=function(s){const a=[];return a.push(s),URL.createObjectURL(new Blob(a))}(vje));const o=new Worker(T2);o.addEventListener("message",function(s){if(e.signal&&e.signal.aborted)o.terminate();else if(s.data.progress===void 0){if(s.data.error)return r(new Error(s.data.error)),void o.terminate();n(s.data.file),o.terminate()}else e.onProgress(s.data.progress)}),o.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),o.terminate()}),o.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function ai(t,e){return new Promise(function(n,r){let o,i,s,a,l,c;if(o={...e},s=0,{onProgress:a}=o,o.maxSizeMB=o.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof o.useWebWorker!="boolean"||o.useWebWorker,delete o.useWebWorker,o.onProgress=g=>{s=g,typeof a=="function"&&a(s)},!(t instanceof Blob||t instanceof yje))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||c)return q9(t,o).then((function(g){try{return i=g,p.call(this)}catch(y){return r(y)}}).bind(this),r);var d=(function(){try{return p.call(this)}catch(g){return r(g)}}).bind(this),f=function(g){try{return q9(t,o).then(function(y){try{return i=y,d()}catch(b){return r(b)}},r)}catch(y){return r(y)}};try{return o.libURL=o.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",bje(t,o).then(function(g){try{return i=g,d()}catch{return f()}},f)}catch{f()}function p(){try{i.name=t.name,i.lastModified=t.lastModified}catch{}try{o.preserveExif&&t.type==="image/jpeg"&&(!o.fileType||o.fileType&&o.fileType===t.type)&&(i=MQ(t,i))}catch{}return n(i)}})}ai.getDataUrlFromFile=DQ,ai.getFilefromDataUrl=MD,ai.loadImage=LQ,ai.drawImageInCanvas=jQ,ai.drawFileInCanvas=b_,ai.canvasToFile=w_,ai.getExifOrientation=BQ,ai.handleMaxWidthOrHeight=$Q,ai.followExifOrientation=FQ,ai.cleanupCanvasMemory=tc,ai.isAutoOrientationInBrowser=Tm,ai.approximateBelowMaximumCanvasSizeOfBrowser=VQ,ai.copyExifWithoutOrientation=MQ,ai.getBrowserName=Mh,ai.version="2.0.2";function K9(t,[e,n]){return Math.min(n,Math.max(e,t))}function ND(t){const e=t+"CollectionProvider",[n,r]=ra(e),[o,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=b=>{const{scope:_,children:k}=b,M=De.useRef(null),N=De.useRef(new Map).current;return w.jsx(o,{scope:_,itemMap:N,collectionRef:M,children:k})};s.displayName=e;const a=t+"CollectionSlot",l=sf(a),c=De.forwardRef((b,_)=>{const{scope:k,children:M}=b,N=i(a,k),j=vn(_,N.collectionRef);return w.jsx(l,{ref:j,children:M})});c.displayName=a;const d=t+"CollectionItemSlot",f="data-radix-collection-item",p=sf(d),g=De.forwardRef((b,_)=>{const{scope:k,children:M,...N}=b,j=De.useRef(null),B=vn(_,j),F=i(d,k);return De.useEffect(()=>(F.itemMap.set(j,{ref:j,...N}),()=>void F.itemMap.delete(j))),w.jsx(p,{[f]:"",ref:B,children:M})});g.displayName=d;function y(b){const _=i(t+"CollectionConsumer",b);return De.useCallback(()=>{const M=_.collectionRef.current;if(!M)return[];const N=Array.from(M.querySelectorAll(`[${f}]`));return Array.from(_.itemMap.values()).sort((F,D)=>N.indexOf(F.ref.current)-N.indexOf(D.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:s,Slot:c,ItemSlot:g},y,r]}var wje=E.createContext(void 0);function _E(t){const e=E.useContext(wje);return t||e||"ltr"}function OD(t){const e=E.useRef({value:t,previous:t});return E.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Cje=[" ","Enter","ArrowUp","ArrowDown"],Sje=[" ","Enter"],lp="Select",[xE,EE,_je]=ND(lp),[oy,z9e]=ra(lp,[_je,Af]),kE=Af(),[xje,Bf]=oy(lp),[Eje,kje]=oy(lp),HQ=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:o,onOpenChange:i,value:s,defaultValue:a,onValueChange:l,dir:c,name:d,autoComplete:f,disabled:p,required:g,form:y}=t,b=kE(e),[_,k]=E.useState(null),[M,N]=E.useState(null),[j,B]=E.useState(!1),F=_E(c),[D,R]=Ru({prop:r,defaultProp:o??!1,onChange:i,caller:lp}),[I,L]=Ru({prop:s,defaultProp:a,onChange:l,caller:lp}),z=E.useRef(null),q=_?y||!!_.closest("form"):!0,[H,ne]=E.useState(new Set),re=Array.from(H).map(V=>V.props.value).join(";");return w.jsx(j_,{...b,children:w.jsxs(xje,{required:g,scope:e,trigger:_,onTriggerChange:k,valueNode:M,onValueNodeChange:N,valueNodeHasChildren:j,onValueNodeHasChildrenChange:B,contentId:hi(),value:I,onValueChange:L,open:D,onOpenChange:R,dir:F,triggerPointerDownPosRef:z,disabled:p,children:[w.jsx(xE.Provider,{scope:e,children:w.jsx(Eje,{scope:t.__scopeSelect,onNativeOptionAdd:E.useCallback(V=>{ne(U=>new Set(U).add(V))},[]),onNativeOptionRemove:E.useCallback(V=>{ne(U=>{const Q=new Set(U);return Q.delete(V),Q})},[]),children:n})}),q?w.jsxs(uZ,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:f,value:I,onChange:V=>L(V.target.value),disabled:p,form:y,children:[I===void 0?w.jsx("option",{value:""}):null,Array.from(H)]},re):null]})})};HQ.displayName=lp;var UQ="SelectTrigger",zQ=E.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...o}=t,i=kE(n),s=Bf(UQ,n),a=s.disabled||r,l=vn(e,s.onTriggerChange),c=EE(n),d=E.useRef("touch"),[f,p,g]=fZ(b=>{const _=c().filter(N=>!N.disabled),k=_.find(N=>N.value===s.value),M=hZ(_,b,k);M!==void 0&&s.onValueChange(M.value)}),y=b=>{a||(s.onOpenChange(!0),g()),b&&(s.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return w.jsx(Lb,{asChild:!0,...i,children:w.jsx(Rt.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":dZ(s.value)?"":void 0,...o,ref:l,onClick:at(o.onClick,b=>{b.currentTarget.focus(),d.current!=="mouse"&&y(b)}),onPointerDown:at(o.onPointerDown,b=>{d.current=b.pointerType;const _=b.target;_.hasPointerCapture(b.pointerId)&&_.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(y(b),b.preventDefault())}),onKeyDown:at(o.onKeyDown,b=>{const _=f.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&p(b.key),!(_&&b.key===" ")&&Cje.includes(b.key)&&(y(),b.preventDefault())})})})});zQ.displayName=UQ;var GQ="SelectValue",qQ=E.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:o,children:i,placeholder:s="",...a}=t,l=Bf(GQ,n),{onValueNodeHasChildrenChange:c}=l,d=i!==void 0,f=vn(e,l.onValueNodeChange);return Vi(()=>{c(d)},[c,d]),w.jsx(Rt.span,{...a,ref:f,style:{pointerEvents:"none"},children:dZ(l.value)?w.jsx(w.Fragment,{children:s}):i})});qQ.displayName=GQ;var Tje="SelectIcon",KQ=E.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...o}=t;return w.jsx(Rt.span,{"aria-hidden":!0,...o,ref:e,children:r||"▼"})});KQ.displayName=Tje;var Aje="SelectPortal",WQ=t=>w.jsx(xg,{asChild:!0,...t});WQ.displayName=Aje;var cp="SelectContent",YQ=E.forwardRef((t,e)=>{const n=Bf(cp,t.__scopeSelect),[r,o]=E.useState();if(Vi(()=>{o(new DocumentFragment)},[]),!n.open){const i=r;return i?Ts.createPortal(w.jsx(XQ,{scope:t.__scopeSelect,children:w.jsx(xE.Slot,{scope:t.__scopeSelect,children:w.jsx("div",{children:t.children})})}),i):null}return w.jsx(QQ,{...t,ref:e})});YQ.displayName=cp;var cl=10,[XQ,$f]=oy(cp),Rje="SelectContentImpl",Ije=sf("SelectContent.RemoveScroll"),QQ=E.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:i,onPointerDownOutside:s,side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:y,hideWhenDetached:b,avoidCollisions:_,...k}=t,M=Bf(cp,n),[N,j]=E.useState(null),[B,F]=E.useState(null),D=vn(e,we=>j(we)),[R,I]=E.useState(null),[L,z]=E.useState(null),q=EE(n),[H,ne]=E.useState(!1),re=E.useRef(!1);E.useEffect(()=>{if(N)return A_(N)},[N]),k_();const V=E.useCallback(we=>{const[Be,...Ie]=q().map(Xe=>Xe.ref.current),[Ge]=Ie.slice(-1),it=document.activeElement;for(const Xe of we)if(Xe===it||(Xe?.scrollIntoView({block:"nearest"}),Xe===Be&&B&&(B.scrollTop=0),Xe===Ge&&B&&(B.scrollTop=B.scrollHeight),Xe?.focus(),document.activeElement!==it))return},[q,B]),U=E.useCallback(()=>V([R,N]),[V,R,N]);E.useEffect(()=>{H&&U()},[H,U]);const{onOpenChange:Q,triggerPointerDownPosRef:J}=M;E.useEffect(()=>{if(N){let we={x:0,y:0};const Be=Ge=>{we={x:Math.abs(Math.round(Ge.pageX)-(J.current?.x??0)),y:Math.abs(Math.round(Ge.pageY)-(J.current?.y??0))}},Ie=Ge=>{we.x<=10&&we.y<=10?Ge.preventDefault():N.contains(Ge.target)||Q(!1),document.removeEventListener("pointermove",Be),J.current=null};return J.current!==null&&(document.addEventListener("pointermove",Be),document.addEventListener("pointerup",Ie,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Be),document.removeEventListener("pointerup",Ie,{capture:!0})}}},[N,Q,J]),E.useEffect(()=>{const we=()=>Q(!1);return window.addEventListener("blur",we),window.addEventListener("resize",we),()=>{window.removeEventListener("blur",we),window.removeEventListener("resize",we)}},[Q]);const[Y,se]=fZ(we=>{const Be=q().filter(it=>!it.disabled),Ie=Be.find(it=>it.ref.current===document.activeElement),Ge=hZ(Be,we,Ie);Ge&&setTimeout(()=>Ge.ref.current.focus())}),te=E.useCallback((we,Be,Ie)=>{const Ge=!re.current&&!Ie;(M.value!==void 0&&M.value===Be||Ge)&&(I(we),Ge&&(re.current=!0))},[M.value]),ie=E.useCallback(()=>N?.focus(),[N]),ce=E.useCallback((we,Be,Ie)=>{const Ge=!re.current&&!Ie;(M.value!==void 0&&M.value===Be||Ge)&&z(we)},[M.value]),ae=r==="popper"?hM:ZQ,ye=ae===hM?{side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:y,hideWhenDetached:b,avoidCollisions:_}:{};return w.jsx(XQ,{scope:n,content:N,viewport:B,onViewportChange:F,itemRefCallback:te,selectedItem:R,onItemLeave:ie,itemTextRefCallback:ce,focusSelectedItem:U,selectedItemText:L,position:r,isPositioned:H,searchRef:Y,children:w.jsx(Ob,{as:Ije,allowPinchZoom:!0,children:w.jsx(Nb,{asChild:!0,trapped:M.open,onMountAutoFocus:we=>{we.preventDefault()},onUnmountAutoFocus:at(o,we=>{M.trigger?.focus({preventScroll:!0}),we.preventDefault()}),children:w.jsx(_g,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:we=>we.preventDefault(),onDismiss:()=>M.onOpenChange(!1),children:w.jsx(ae,{role:"listbox",id:M.contentId,"data-state":M.open?"open":"closed",dir:M.dir,onContextMenu:we=>we.preventDefault(),...k,...ye,onPlaced:()=>ne(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...k.style},onKeyDown:at(k.onKeyDown,we=>{const Be=we.ctrlKey||we.altKey||we.metaKey;if(we.key==="Tab"&&we.preventDefault(),!Be&&we.key.length===1&&se(we.key),["ArrowUp","ArrowDown","Home","End"].includes(we.key)){let Ge=q().filter(it=>!it.disabled).map(it=>it.ref.current);if(["ArrowUp","End"].includes(we.key)&&(Ge=Ge.slice().reverse()),["ArrowUp","ArrowDown"].includes(we.key)){const it=we.target,Xe=Ge.indexOf(it);Ge=Ge.slice(Xe+1)}setTimeout(()=>V(Ge)),we.preventDefault()}})})})})})})});QQ.displayName=Rje;var Mje="SelectItemAlignedPosition",ZQ=E.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...o}=t,i=Bf(cp,n),s=$f(cp,n),[a,l]=E.useState(null),[c,d]=E.useState(null),f=vn(e,D=>d(D)),p=EE(n),g=E.useRef(!1),y=E.useRef(!0),{viewport:b,selectedItem:_,selectedItemText:k,focusSelectedItem:M}=s,N=E.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&b&&_&&k){const D=i.trigger.getBoundingClientRect(),R=c.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),L=k.getBoundingClientRect();if(i.dir!=="rtl"){const it=L.left-R.left,Xe=I.left-it,zt=D.left-Xe,un=D.width+zt,Pt=Math.max(un,R.width),Pn=window.innerWidth-cl,kt=K9(Xe,[cl,Math.max(cl,Pn-Pt)]);a.style.minWidth=un+"px",a.style.left=kt+"px"}else{const it=R.right-L.right,Xe=window.innerWidth-I.right-it,zt=window.innerWidth-D.right-Xe,un=D.width+zt,Pt=Math.max(un,R.width),Pn=window.innerWidth-cl,kt=K9(Xe,[cl,Math.max(cl,Pn-Pt)]);a.style.minWidth=un+"px",a.style.right=kt+"px"}const z=p(),q=window.innerHeight-cl*2,H=b.scrollHeight,ne=window.getComputedStyle(c),re=parseInt(ne.borderTopWidth,10),V=parseInt(ne.paddingTop,10),U=parseInt(ne.borderBottomWidth,10),Q=parseInt(ne.paddingBottom,10),J=re+V+H+Q+U,Y=Math.min(_.offsetHeight*5,J),se=window.getComputedStyle(b),te=parseInt(se.paddingTop,10),ie=parseInt(se.paddingBottom,10),ce=D.top+D.height/2-cl,ae=q-ce,ye=_.offsetHeight/2,we=_.offsetTop+ye,Be=re+V+we,Ie=J-Be;if(Be<=ce){const it=z.length>0&&_===z[z.length-1].ref.current;a.style.bottom="0px";const Xe=c.clientHeight-b.offsetTop-b.offsetHeight,zt=Math.max(ae,ye+(it?ie:0)+Xe+U),un=Be+zt;a.style.height=un+"px"}else{const it=z.length>0&&_===z[0].ref.current;a.style.top="0px";const zt=Math.max(ce,re+b.offsetTop+(it?te:0)+ye)+Ie;a.style.height=zt+"px",b.scrollTop=Be-ce+b.offsetTop}a.style.margin=`${cl}px 0`,a.style.minHeight=Y+"px",a.style.maxHeight=q+"px",r?.(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,a,c,b,_,k,i.dir,r]);Vi(()=>N(),[N]);const[j,B]=E.useState();Vi(()=>{c&&B(window.getComputedStyle(c).zIndex)},[c]);const F=E.useCallback(D=>{D&&y.current===!0&&(N(),M?.(),y.current=!1)},[N,M]);return w.jsx(Oje,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:g,onScrollButtonChange:F,children:w.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:w.jsx(Rt.div,{...o,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});ZQ.displayName=Mje;var Nje="SelectPopperPosition",hM=E.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=cl,...i}=t,s=kE(n);return w.jsx(B_,{...s,...i,ref:e,align:r,collisionPadding:o,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});hM.displayName=Nje;var[Oje,PD]=oy(cp,{}),pM="SelectViewport",JQ=E.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...o}=t,i=$f(pM,n),s=PD(pM,n),a=vn(e,i.onViewportChange),l=E.useRef(0);return w.jsxs(w.Fragment,{children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),w.jsx(xE.Slot,{scope:n,children:w.jsx(Rt.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:at(o.onScroll,c=>{const d=c.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=s;if(p?.current&&f){const g=Math.abs(l.current-d.scrollTop);if(g>0){const y=window.innerHeight-cl*2,b=parseFloat(f.style.minHeight),_=parseFloat(f.style.height),k=Math.max(b,_);if(k<y){const M=k+g,N=Math.min(y,M),j=M-N;f.style.height=N+"px",f.style.bottom==="0px"&&(d.scrollTop=j>0?j:0,f.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});JQ.displayName=pM;var eZ="SelectGroup",[Pje,Dje]=oy(eZ),Lje=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=hi();return w.jsx(Pje,{scope:n,id:o,children:w.jsx(Rt.div,{role:"group","aria-labelledby":o,...r,ref:e})})});Lje.displayName=eZ;var tZ="SelectLabel",Vje=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=Dje(tZ,n);return w.jsx(Rt.div,{id:o.id,...r,ref:e})});Vje.displayName=tZ;var C_="SelectItem",[jje,nZ]=oy(C_),rZ=E.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:i,...s}=t,a=Bf(C_,n),l=$f(C_,n),c=a.value===r,[d,f]=E.useState(i??""),[p,g]=E.useState(!1),y=vn(e,M=>l.itemRefCallback?.(M,r,o)),b=hi(),_=E.useRef("touch"),k=()=>{o||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return w.jsx(jje,{scope:n,value:r,disabled:o,textId:b,isSelected:c,onItemTextChange:E.useCallback(M=>{f(N=>N||(M?.textContent??"").trim())},[]),children:w.jsx(xE.ItemSlot,{scope:n,value:r,disabled:o,textValue:d,children:w.jsx(Rt.div,{role:"option","aria-labelledby":b,"data-highlighted":p?"":void 0,"aria-selected":c&&p,"data-state":c?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...s,ref:y,onFocus:at(s.onFocus,()=>g(!0)),onBlur:at(s.onBlur,()=>g(!1)),onClick:at(s.onClick,()=>{_.current!=="mouse"&&k()}),onPointerUp:at(s.onPointerUp,()=>{_.current==="mouse"&&k()}),onPointerDown:at(s.onPointerDown,M=>{_.current=M.pointerType}),onPointerMove:at(s.onPointerMove,M=>{_.current=M.pointerType,o?l.onItemLeave?.():_.current==="mouse"&&M.currentTarget.focus({preventScroll:!0})}),onPointerLeave:at(s.onPointerLeave,M=>{M.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:at(s.onKeyDown,M=>{l.searchRef?.current!==""&&M.key===" "||(Sje.includes(M.key)&&k(),M.key===" "&&M.preventDefault())})})})})});rZ.displayName=C_;var fv="SelectItemText",oZ=E.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:o,...i}=t,s=Bf(fv,n),a=$f(fv,n),l=nZ(fv,n),c=kje(fv,n),[d,f]=E.useState(null),p=vn(e,k=>f(k),l.onItemTextChange,k=>a.itemTextRefCallback?.(k,l.value,l.disabled)),g=d?.textContent,y=E.useMemo(()=>w.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:b,onNativeOptionRemove:_}=c;return Vi(()=>(b(y),()=>_(y)),[b,_,y]),w.jsxs(w.Fragment,{children:[w.jsx(Rt.span,{id:l.textId,...i,ref:p}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Ts.createPortal(i.children,s.valueNode):null]})});oZ.displayName=fv;var iZ="SelectItemIndicator",sZ=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return nZ(iZ,n).isSelected?w.jsx(Rt.span,{"aria-hidden":!0,...r,ref:e}):null});sZ.displayName=iZ;var mM="SelectScrollUpButton",aZ=E.forwardRef((t,e)=>{const n=$f(mM,t.__scopeSelect),r=PD(mM,t.__scopeSelect),[o,i]=E.useState(!1),s=vn(e,r.onScrollButtonChange);return Vi(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?w.jsx(cZ,{...t,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});aZ.displayName=mM;var gM="SelectScrollDownButton",lZ=E.forwardRef((t,e)=>{const n=$f(gM,t.__scopeSelect),r=PD(gM,t.__scopeSelect),[o,i]=E.useState(!1),s=vn(e,r.onScrollButtonChange);return Vi(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;i(d)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?w.jsx(cZ,{...t,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});lZ.displayName=gM;var cZ=E.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=t,i=$f("SelectScrollButton",n),s=E.useRef(null),a=EE(n),l=E.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return E.useEffect(()=>()=>l(),[l]),Vi(()=>{a().find(d=>d.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[a]),w.jsx(Rt.div,{"aria-hidden":!0,...o,ref:e,style:{flexShrink:0,...o.style},onPointerDown:at(o.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:at(o.onPointerMove,()=>{i.onItemLeave?.(),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:at(o.onPointerLeave,()=>{l()})})}),Bje="SelectSeparator",$je=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return w.jsx(Rt.div,{"aria-hidden":!0,...r,ref:e})});$je.displayName=Bje;var yM="SelectArrow",Fje=E.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=kE(n),i=Bf(yM,n),s=$f(yM,n);return i.open&&s.position==="popper"?w.jsx($_,{...o,...r,ref:e}):null});Fje.displayName=yM;var Hje="SelectBubbleInput",uZ=E.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const o=E.useRef(null),i=vn(r,o),s=OD(e);return E.useEffect(()=>{const a=o.current;if(!a)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==e&&d){const f=new Event("change",{bubbles:!0});d.call(a,e),a.dispatchEvent(f)}},[s,e]),w.jsx(Rt.select,{...n,style:{...g7,...n.style},ref:i,defaultValue:e})});uZ.displayName=Hje;function dZ(t){return t===""||t===void 0}function fZ(t){const e=gc(t),n=E.useRef(""),r=E.useRef(0),o=E.useCallback(s=>{const a=n.current+s;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=E.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return E.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,i]}function hZ(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let s=Uje(t,Math.max(i,0));o.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.textValue.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function Uje(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var zje=HQ,Gje=zQ,qje=qQ,Kje=KQ,Wje=WQ,Yje=YQ,Xje=JQ,Qje=rZ,Zje=oZ,Jje=sZ,e6e=aZ,t6e=lZ;function n6e({...t}){return w.jsx(zje,{"data-slot":"select",...t})}function r6e({...t}){return w.jsx(qje,{"data-slot":"select-value",...t})}function o6e({className:t,size:e="default",children:n,...r}){return w.jsxs(Gje,{"data-slot":"select-trigger","data-size":e,className:dt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[n,w.jsx(Kje,{asChild:!0,children:w.jsx(o8,{className:"size-4 opacity-50"})})]})}function i6e({className:t,children:e,position:n="popper",...r}){return w.jsx(Wje,{children:w.jsxs(Yje,{"data-slot":"select-content",className:dt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[w.jsx(s6e,{}),w.jsx(Xje,{className:dt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),w.jsx(a6e,{})]})})}function A2({className:t,children:e,...n}){return w.jsxs(Qje,{"data-slot":"select-item",className:dt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[w.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:w.jsx(Jje,{children:w.jsx(cC,{className:"size-4"})})}),w.jsx(Zje,{children:e})]})}function s6e({className:t,...e}){return w.jsx(e6e,{"data-slot":"select-scroll-up-button",className:dt("flex cursor-default items-center justify-center py-1",t),...e,children:w.jsx(Nte,{className:"size-4"})})}function a6e({className:t,...e}){return w.jsx(t6e,{"data-slot":"select-scroll-down-button",className:dt("flex cursor-default items-center justify-center py-1",t),...e,children:w.jsx(o8,{className:"size-4"})})}const l6e=es({name:"arabic",content:"inline*",group:"blockContent",parseHTML(){return[{tag:"div[data-content-type=arabic]",contentElement:".bn-inline-content"}]},renderHTML({HTMLAttributes:t}){return["div",{...t,"data-content-type":"arabic",dir:"rtl",class:"bn-block arabic text-right py-2 px-2 rounded-md"},["div",{class:"bn-inline-content"},0]]},addKeyboardShortcuts(){return{"ctrl-Alt-y":()=>{const t=pr(this.editor.state);return t.isBlockContainer?this.editor.commands.command(Uo(t.bnBlock.beforePos,{type:"arabic"})):!1}}}}),c6e=za(l6e,{}),u6e=t=>({title:"Arabic",subtext:"Alert for emphasizing text",content:"inline",onItemClick:()=>qr(t,{type:"arabic"}),aliases:["arabic","ارابیچ"],group:"blockContent",badge:"Ctrl + Alt + a"}),d6e=es({name:"urdu",content:"inline*",group:"blockContent",parseHTML(){return[{tag:"div[data-content-type=urdu]",contentElement:".bn-inline-content"}]},renderHTML({HTMLAttributes:t}){return["div",{...t,"data-content-type":"urdu",dir:"rtl",class:"bn-block urdu text-right py-2 px-2 rounded-md"},["div",{class:"bn-inline-content"},0]]},addKeyboardShortcuts(){return{"ctrl-Alt-u":()=>{const t=pr(this.editor.state);return t.isBlockContainer?this.editor.commands.command(Uo(t.bnBlock.beforePos,{type:"urdu"})):!1}}}}),f6e=za(d6e,{}),h6e=t=>({title:"Urdu",subtext:"Alert for emphasizing text",content:"inline",onItemClick:()=>qr(t,{type:"urdu"}),aliases:["urdu","ئردئ"],group:"blockContent",badge:"Ctrl + Alt + u"}),p6e=ZIe({type:"font",propSchema:"string"},{render:t=>w.jsx("span",{style:{fontFamily:t.value},ref:t.contentRef})}),m6e=()=>{const t=Et(),e=St(),n=t.getSelection(),o=(Array.isArray(n)?n[0]:void 0)?.styles?.font??"Inter, SF Pro Display, -apple-system, sans serif";return w.jsx(e.FormattingToolbar.Select,{items:[{text:"English",icon:null,onClick:()=>t.addStyles({font:"urdu"}),isSelected:o==="Inter, SF Pro Display, -apple-system, sans serif"},{text:"Urdu",icon:null,onClick:()=>t.addStyles({font:"urdu"}),isSelected:o==="urdu"},{text:"Arabic",icon:null,onClick:()=>t.addStyles({font:"arabic"}),isSelected:o==="arabic"}]})},g6e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10 15.5L16 12L10 8.5V15.5ZM21.8 8.001C21.76 7.844 21.686 7.696 21.58 7.568C21.473 7.44 21.337 7.337 21.183 7.268C20.25 6.85 12 6.85 12 6.85C12 6.85 3.75 6.85 2.817 7.268C2.663 7.337 2.527 7.44 2.42 7.568C2.314 7.696 2.24 7.844 2.2 8.001C1.95 9.25 1.95 12 1.95 12C1.95 12 1.95 14.75 2.2 15.999C2.24 16.156 2.314 16.304 2.42 16.432C2.527 16.56 2.663 16.663 2.817 16.732C3.75 17.15 12 17.15 12 17.15C12 17.15 20.25 17.15 21.183 16.732C21.337 16.663 21.473 16.56 21.58 16.432C21.686 16.304 21.76 16.156 21.8 15.999C22.05 14.75 22.05 12 22.05 12C22.05 12 22.05 9.25 21.8 8.001Z"/></svg>',y6e={textAlignment:Br.textAlignment,backgroundColor:Br.backgroundColor,name:{default:""},showPreview:{default:!0},url:{default:""},caption:{default:""},previewWidth:{default:void 0,type:"number"}},v6e={type:"youtube",propSchema:y6e,content:"none",isFileBlock:!0,fileBlockAccept:[]},b6e=(t,e)=>{const n=document.createElement("div");n.innerHTML=g6e;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("iframe");return o.className="bn-visual-media youtube-embed",o.src=S6e(t.props.url),o.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",o.allowFullscreen=!0,o.frameBorder="0",o.contentEditable="false",r.appendChild(o),sP(t,e,{dom:r},r,"Embed YouTube",n.firstElementChild)},w6e=t=>{let e="";if((t.tagName==="IFRAME"||t.tagName==="A")&&(e=t.src||t.href||""),!e)return;const r=e.match(/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/)?.[1];if(r)return{url:`https://www.youtube.com/embed/${r}`}},C6e=Ug(v6e,{render:b6e,parse:w6e});function S6e(t){const e=t.match(/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return e?`https://www.youtube.com/embed/${e[1]}`:""}const _6e=t=>({title:"YouTube",subtext:"Embed a YouTube video",content:"block",onItemClick:()=>qr(t,{type:"youtube",props:{url:"",caption:"",previewWidth:320,name:"",showPreview:!0,textAlignment:"left",backgroundColor:"default"}}),aliases:["youtube","yt","يوتيوب"],group:"blockContent",badge:"Ctrl + Alt + y"});var x6e="Label",pZ=E.forwardRef((t,e)=>w.jsx(Rt.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));pZ.displayName=x6e;var E6e=pZ;function DD({className:t,...e}){return w.jsx(E6e,{"data-slot":"label",className:dt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}var TE="Switch",[k6e,G9e]=ra(TE),[T6e,A6e]=k6e(TE),mZ=E.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:o,defaultChecked:i,required:s,disabled:a,value:l="on",onCheckedChange:c,form:d,...f}=t,[p,g]=E.useState(null),y=vn(e,N=>g(N)),b=E.useRef(!1),_=p?d||!!p.closest("form"):!0,[k,M]=Ru({prop:o,defaultProp:i??!1,onChange:c,caller:TE});return w.jsxs(T6e,{scope:n,checked:k,disabled:a,children:[w.jsx(Rt.button,{type:"button",role:"switch","aria-checked":k,"aria-required":s,"data-state":bZ(k),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:y,onClick:at(t.onClick,N=>{M(j=>!j),_&&(b.current=N.isPropagationStopped(),b.current||N.stopPropagation())})}),_&&w.jsx(vZ,{control:p,bubbles:!b.current,name:r,value:l,checked:k,required:s,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});mZ.displayName=TE;var gZ="SwitchThumb",yZ=E.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,o=A6e(gZ,n);return w.jsx(Rt.span,{"data-state":bZ(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:e})});yZ.displayName=gZ;var R6e="SwitchBubbleInput",vZ=E.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...o},i)=>{const s=E.useRef(null),a=vn(s,i),l=OD(n),c=$M(e);return E.useEffect(()=>{const d=s.current;if(!d)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&g){const y=new Event("click",{bubbles:r});g.call(d,n),d.dispatchEvent(y)}},[l,n,r]),w.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:a,style:{...o.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});vZ.displayName=R6e;function bZ(t){return t?"checked":"unchecked"}var I6e=mZ,M6e=yZ;function wZ({className:t,...e}){return w.jsx(I6e,{"data-slot":"switch",className:dt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:w.jsx(M6e,{"data-slot":"switch-thumb",className:dt("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const N6e=Kx.create({blockSpecs:{...Gx,urdu:f6e,arabic:c6e,youtube:C6e},styleSpecs:{...qx,font:p6e}});function O6e(){const{openSidebar:t,setOpenSidebar:e,pageTitle:n,setPageTitle:r,pageGuess:o,setPageGuess:i,setPageContent:s,pageClass:a,pageBook:l,pageContent:c,pagePriority:d,setPagePriority:f,nanoPageId:p,SyncedQueue:g,setIsReadingMode:y,isReadingMode:b,setOpenQuiz:_}=_l(),[k,M]=E.useState(null),N=[{type:"paragraph",content:[{type:"text",text:"",styles:{}}]}];async function j(B){const F=await ai(B,{maxSizeMB:.1,useWebWorker:!0,initialQuality:.4,maxWidthOrHeight:1024});console.log(F.size);const D=await ai.getDataUrlFromFile(F);return console.log("Base64 String:",D),D}return E.useEffect(()=>{(async()=>{let F;try{F=c&&c!==""?JSON.parse(c):N}catch{F=N}const D=await UK.create({codeBlock:dje,schema:N6e,initialContent:F,uploadFile:j});M(D)})()},[c]),w.jsxs(dC,{open:t,onOpenChange:e,children:[w.jsx(AM,{className:"hidden",children:"Edit Page"}),w.jsxs(fC,{className:"w-full sm:max-w-1/2 overflow-y-auto overflow-x-hidden",children:[w.jsx("input",{inert:!!b,className:"text-xl font-bold w-full bg-transparent focus:outline-none px-2",value:n,placeholder:"Page Title",onChange:B=>r(B.target.value)}),w.jsx("input",{inert:!!b,className:"w-full bg-transparent focus:outline-none px-2 text-muted-foreground text-sm",value:o,placeholder:"Page Guess",onChange:B=>i(B.target.value)}),w.jsxs("div",{className:"grid grid-cols-2",children:[w.jsx(r9,{classorbook:"class"}),w.jsx(r9,{classorbook:"book"})]}),w.jsxs("div",{className:"grid grid-cols-2",children:[w.jsxs(n6e,{disabled:!!b,value:d,onValueChange:B=>f(B),children:[w.jsx(o6e,{className:"w-auto mx-2",children:w.jsx(r6e,{placeholder:"Select a fruit"})}),w.jsxs(i6e,{children:[w.jsx(A2,{value:"low",children:"low"}),w.jsx(A2,{value:"medium",children:"medium"}),w.jsx(A2,{value:"high",children:"high"})]})]}),w.jsxs("div",{className:"border border-slate-400/30 mx-2 rounded-md px-2 justify-between flex items-center",children:[w.jsx(DD,{"data-key":"r",htmlFor:"readingmode",children:"Reading Mode"}),w.jsx(wZ,{id:"readingmode",checked:b,onCheckedChange:y}),w.jsx(ic,{variant:"outline",onClick:()=>_(!0),children:"Quiz"})]})]}),w.jsx("div",{className:"grid flex-1 gap-6 px-4 w-full",children:k&&w.jsxs(nX,{editable:!b,editor:k,theme:"light",spellCheck:!b,slashMenu:!1,children:[w.jsx(TP,{formattingToolbar:()=>w.jsxs(kP,{children:[w.jsx(VW,{},"blockTypeSelect"),w.jsx(m6e,{},"customButton"),w.jsx(OW,{},"fileCaptionButton"),w.jsx(PW,{},"replaceFileButton"),w.jsx(hu,{basicTextStyle:"bold"},"boldStyleButton"),w.jsx(hu,{basicTextStyle:"italic"},"italicStyleButton"),w.jsx(hu,{basicTextStyle:"underline"},"underlineStyleButton"),w.jsx(hu,{basicTextStyle:"strike"},"strikeStyleButton"),w.jsx(hu,{basicTextStyle:"code"},"codeStyleButton"),w.jsx(zm,{textAlignment:"left"},"textAlignLeftButton"),w.jsx(zm,{textAlignment:"center"},"textAlignCenterButton"),w.jsx(zm,{textAlignment:"right"},"textAlignRightButton"),w.jsx(IW,{},"colorStyleButton"),w.jsx(DW,{},"nestBlockButton"),w.jsx(LW,{},"unnestBlockButton"),w.jsx(NW,{},"createLinkButton")]})}),w.jsx(UW,{triggerCharacter:"/",getItems:async B=>{const F=HW(k),D=F.findLastIndex(R=>R.group==="basics");return F.splice(D+1,0,h6e(k),u6e(k),_6e(k)),wK(F,B)}})]})}),w.jsxs(q8,{children:[w.jsx(ic,{inert:!!b,type:"submit",onClick:async()=>{const B=k?JSON.stringify(k.topLevelBlocks,null,2):c||"";s(B);try{await Zn.Items.add({id:p,title:n,guess:o,content:B,renderRange:0,renderDate:new Date().getTime(),classId:a,bookId:l,priority:d}),await g(p,"Items","add"),Kr.success("add",{description:p,duration:100})}catch(F){const D=F;D.name==="ConstraintError"?(await Zn.Items.update(p,{id:p,title:n,guess:o,content:B,renderDate:new Date().getTime(),classId:a,bookId:l,priority:d}),await g(p,"Items","update"),Kr.success("updated",{description:p,duration:100})):Kr.error("Something went wrong to save or update doc",{description:D.message,duration:7e3})}},children:"Save changes"}),w.jsx(G8,{asChild:!0,children:w.jsx(ic,{variant:"outline",children:"Close"})})]})]})]})}var CZ="AlertDialog",[P6e,q9e]=ra(CZ,[I8]),Hu=I8(),SZ=t=>{const{__scopeAlertDialog:e,...n}=t,r=Hu(e);return w.jsx(I_,{...r,...n,modal:!0})};SZ.displayName=CZ;var D6e="AlertDialogTrigger",_Z=E.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,o=Hu(n);return w.jsx(ioe,{...o,...r,ref:e})});_Z.displayName=D6e;var L6e="AlertDialogPortal",xZ=t=>{const{__scopeAlertDialog:e,...n}=t,r=Hu(e);return w.jsx(M_,{...r,...n})};xZ.displayName=L6e;var V6e="AlertDialogOverlay",EZ=E.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,o=Hu(n);return w.jsx(N_,{...o,...r,ref:e})});EZ.displayName=V6e;var Km="AlertDialogContent",[j6e,B6e]=P6e(Km),$6e=e8("AlertDialogContent"),kZ=E.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...o}=t,i=Hu(n),s=E.useRef(null),a=vn(e,s),l=E.useRef(null);return w.jsx(toe,{contentName:Km,titleName:TZ,docsSlug:"alert-dialog",children:w.jsx(j6e,{scope:n,cancelRef:l,children:w.jsxs(O_,{role:"alertdialog",...i,...o,ref:a,onOpenAutoFocus:at(o.onOpenAutoFocus,c=>{c.preventDefault(),l.current?.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[w.jsx($6e,{children:r}),w.jsx(H6e,{contentRef:s})]})})})});kZ.displayName=Km;var TZ="AlertDialogTitle",AZ=E.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,o=Hu(n);return w.jsx(IM,{...o,...r,ref:e})});AZ.displayName=TZ;var RZ="AlertDialogDescription",IZ=E.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,o=Hu(n);return w.jsx(MM,{...o,...r,ref:e})});IZ.displayName=RZ;var F6e="AlertDialogAction",MZ=E.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,o=Hu(n);return w.jsx(Eg,{...o,...r,ref:e})});MZ.displayName=F6e;var NZ="AlertDialogCancel",OZ=E.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:o}=B6e(NZ,n),i=Hu(n),s=vn(e,o);return w.jsx(Eg,{...i,...r,ref:s})});OZ.displayName=NZ;var H6e=({contentRef:t})=>{const e=`\`${Km}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Km}\` by passing a \`${RZ}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Km}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return E.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},U6e=SZ,z6e=_Z,G6e=xZ,q6e=EZ,K6e=kZ,W6e=MZ,Y6e=OZ,X6e=AZ,Q6e=IZ;function PZ({...t}){return w.jsx(U6e,{"data-slot":"alert-dialog",...t})}function Z6e({...t}){return w.jsx(z6e,{"data-slot":"alert-dialog-trigger",...t})}function J6e({...t}){return w.jsx(G6e,{"data-slot":"alert-dialog-portal",...t})}function eBe({className:t,...e}){return w.jsx(q6e,{"data-slot":"alert-dialog-overlay",className:dt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function DZ({className:t,...e}){return w.jsxs(J6e,{children:[w.jsx(eBe,{}),w.jsx(K6e,{"data-slot":"alert-dialog-content",className:dt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...e})]})}function LZ({className:t,...e}){return w.jsx("div",{"data-slot":"alert-dialog-header",className:dt("flex flex-col gap-2 text-center sm:text-left",t),...e})}function VZ({className:t,...e}){return w.jsx("div",{"data-slot":"alert-dialog-footer",className:dt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function jZ({className:t,...e}){return w.jsx(X6e,{"data-slot":"alert-dialog-title",className:dt("text-lg font-semibold",t),...e})}function BZ({className:t,...e}){return w.jsx(Q6e,{"data-slot":"alert-dialog-description",className:dt("text-muted-foreground text-sm",t),...e})}function $Z({className:t,...e}){return w.jsx(W6e,{className:dt(x_(),t),...e})}function FZ({className:t,...e}){return w.jsx(Y6e,{className:dt(x_({variant:"outline"}),t),...e})}var R2="rovingFocusGroup.onEntryFocus",tBe={bubbles:!1,cancelable:!0},T0="RovingFocusGroup",[vM,HZ,nBe]=ND(T0),[rBe,AE]=ra(T0,[nBe]),[oBe,iBe]=rBe(T0),UZ=E.forwardRef((t,e)=>w.jsx(vM.Provider,{scope:t.__scopeRovingFocusGroup,children:w.jsx(vM.Slot,{scope:t.__scopeRovingFocusGroup,children:w.jsx(sBe,{...t,ref:e})})}));UZ.displayName=T0;var sBe=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...f}=t,p=E.useRef(null),g=vn(e,p),y=_E(i),[b,_]=Ru({prop:s,defaultProp:a??null,onChange:l,caller:T0}),[k,M]=E.useState(!1),N=gc(c),j=HZ(n),B=E.useRef(!1),[F,D]=E.useState(0);return E.useEffect(()=>{const R=p.current;if(R)return R.addEventListener(R2,N),()=>R.removeEventListener(R2,N)},[N]),w.jsx(oBe,{scope:n,orientation:r,dir:y,loop:o,currentTabStopId:b,onItemFocus:E.useCallback(R=>_(R),[_]),onItemShiftTab:E.useCallback(()=>M(!0),[]),onFocusableItemAdd:E.useCallback(()=>D(R=>R+1),[]),onFocusableItemRemove:E.useCallback(()=>D(R=>R-1),[]),children:w.jsx(Rt.div,{tabIndex:k||F===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:at(t.onMouseDown,()=>{B.current=!0}),onFocus:at(t.onFocus,R=>{const I=!B.current;if(R.target===R.currentTarget&&I&&!k){const L=new CustomEvent(R2,tBe);if(R.currentTarget.dispatchEvent(L),!L.defaultPrevented){const z=j().filter(V=>V.focusable),q=z.find(V=>V.active),H=z.find(V=>V.id===b),re=[q,H,...z].filter(Boolean).map(V=>V.ref.current);qZ(re,d)}}B.current=!1}),onBlur:at(t.onBlur,()=>M(!1))})})}),zZ="RovingFocusGroupItem",GZ=E.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:i,children:s,...a}=t,l=hi(),c=i||l,d=iBe(zZ,n),f=d.currentTabStopId===c,p=HZ(n),{onFocusableItemAdd:g,onFocusableItemRemove:y,currentTabStopId:b}=d;return E.useEffect(()=>{if(r)return g(),()=>y()},[r,g,y]),w.jsx(vM.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:w.jsx(Rt.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...a,ref:e,onMouseDown:at(t.onMouseDown,_=>{r?d.onItemFocus(c):_.preventDefault()}),onFocus:at(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:at(t.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){d.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const k=cBe(_,d.orientation,d.dir);if(k!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let N=p().filter(j=>j.focusable).map(j=>j.ref.current);if(k==="last")N.reverse();else if(k==="prev"||k==="next"){k==="prev"&&N.reverse();const j=N.indexOf(_.currentTarget);N=d.loop?uBe(N,j+1):N.slice(j+1)}setTimeout(()=>qZ(N))}}),children:typeof s=="function"?s({isCurrentTabStop:f,hasTabStop:b!=null}):s})})});GZ.displayName=zZ;var aBe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function lBe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function cBe(t,e,n){const r=lBe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return aBe[r]}function qZ(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function uBe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var KZ=UZ,WZ=GZ,bM=["Enter"," "],dBe=["ArrowDown","PageUp","Home"],YZ=["ArrowUp","PageDown","End"],fBe=[...dBe,...YZ],hBe={ltr:[...bM,"ArrowRight"],rtl:[...bM,"ArrowLeft"]},pBe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},A0="Menu",[Ib,mBe,gBe]=ND(A0),[Sp,XZ]=ra(A0,[gBe,Af,AE]),RE=Af(),QZ=AE(),[yBe,_p]=Sp(A0),[vBe,R0]=Sp(A0),ZZ=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:o,onOpenChange:i,modal:s=!0}=t,a=RE(e),[l,c]=E.useState(null),d=E.useRef(!1),f=gc(i),p=_E(o);return E.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),w.jsx(j_,{...a,children:w.jsx(yBe,{scope:e,open:n,onOpenChange:f,content:l,onContentChange:c,children:w.jsx(vBe,{scope:e,onClose:E.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:p,modal:s,children:r})})})};ZZ.displayName=A0;var bBe="MenuAnchor",LD=E.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=RE(n);return w.jsx(Lb,{...o,...r,ref:e})});LD.displayName=bBe;var VD="MenuPortal",[wBe,JZ]=Sp(VD,{forceMount:void 0}),eJ=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:o}=t,i=_p(VD,e);return w.jsx(wBe,{scope:e,forceMount:n,children:w.jsx(oa,{present:n||i.open,children:w.jsx(xg,{asChild:!0,container:o,children:r})})})};eJ.displayName=VD;var $a="MenuContent",[CBe,jD]=Sp($a),tJ=E.forwardRef((t,e)=>{const n=JZ($a,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,i=_p($a,t.__scopeMenu),s=R0($a,t.__scopeMenu);return w.jsx(Ib.Provider,{scope:t.__scopeMenu,children:w.jsx(oa,{present:r||i.open,children:w.jsx(Ib.Slot,{scope:t.__scopeMenu,children:s.modal?w.jsx(SBe,{...o,ref:e}):w.jsx(_Be,{...o,ref:e})})})})}),SBe=E.forwardRef((t,e)=>{const n=_p($a,t.__scopeMenu),r=E.useRef(null),o=vn(e,r);return E.useEffect(()=>{const i=r.current;if(i)return A_(i)},[]),w.jsx(BD,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:at(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),_Be=E.forwardRef((t,e)=>{const n=_p($a,t.__scopeMenu);return w.jsx(BD,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),xBe=sf("MenuContent.ScrollLock"),BD=E.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:g,disableOutsideScroll:y,...b}=t,_=_p($a,n),k=R0($a,n),M=RE(n),N=QZ(n),j=mBe(n),[B,F]=E.useState(null),D=E.useRef(null),R=vn(e,D,_.onContentChange),I=E.useRef(0),L=E.useRef(""),z=E.useRef(0),q=E.useRef(null),H=E.useRef("right"),ne=E.useRef(0),re=y?Ob:E.Fragment,V=y?{as:xBe,allowPinchZoom:!0}:void 0,U=J=>{const Y=L.current+J,se=j().filter(we=>!we.disabled),te=document.activeElement,ie=se.find(we=>we.ref.current===te)?.textValue,ce=se.map(we=>we.textValue),ae=LBe(ce,Y,ie),ye=se.find(we=>we.textValue===ae)?.ref.current;(function we(Be){L.current=Be,window.clearTimeout(I.current),Be!==""&&(I.current=window.setTimeout(()=>we(""),1e3))})(Y),ye&&setTimeout(()=>ye.focus())};E.useEffect(()=>()=>window.clearTimeout(I.current),[]),k_();const Q=E.useCallback(J=>H.current===q.current?.side&&jBe(J,q.current?.area),[]);return w.jsx(CBe,{scope:n,searchRef:L,onItemEnter:E.useCallback(J=>{Q(J)&&J.preventDefault()},[Q]),onItemLeave:E.useCallback(J=>{Q(J)||(D.current?.focus(),F(null))},[Q]),onTriggerLeave:E.useCallback(J=>{Q(J)&&J.preventDefault()},[Q]),pointerGraceTimerRef:z,onPointerGraceIntentChange:E.useCallback(J=>{q.current=J},[]),children:w.jsx(re,{...V,children:w.jsx(Nb,{asChild:!0,trapped:o,onMountAutoFocus:at(i,J=>{J.preventDefault(),D.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:w.jsx(_g,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:g,children:w.jsx(KZ,{asChild:!0,...N,dir:k.dir,orientation:"vertical",loop:r,currentTabStopId:B,onCurrentTabStopIdChange:F,onEntryFocus:at(l,J=>{k.isUsingKeyboardRef.current||J.preventDefault()}),preventScrollOnEntryFocus:!0,children:w.jsx(B_,{role:"menu","aria-orientation":"vertical","data-state":yJ(_.open),"data-radix-menu-content":"",dir:k.dir,...M,...b,ref:R,style:{outline:"none",...b.style},onKeyDown:at(b.onKeyDown,J=>{const se=J.target.closest("[data-radix-menu-content]")===J.currentTarget,te=J.ctrlKey||J.altKey||J.metaKey,ie=J.key.length===1;se&&(J.key==="Tab"&&J.preventDefault(),!te&&ie&&U(J.key));const ce=D.current;if(J.target!==ce||!fBe.includes(J.key))return;J.preventDefault();const ye=j().filter(we=>!we.disabled).map(we=>we.ref.current);YZ.includes(J.key)&&ye.reverse(),PBe(ye)}),onBlur:at(t.onBlur,J=>{J.currentTarget.contains(J.target)||(window.clearTimeout(I.current),L.current="")}),onPointerMove:at(t.onPointerMove,Mb(J=>{const Y=J.target,se=ne.current!==J.clientX;if(J.currentTarget.contains(Y)&&se){const te=J.clientX>ne.current?"right":"left";H.current=te,ne.current=J.clientX}}))})})})})})})});tJ.displayName=$a;var EBe="MenuGroup",$D=E.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return w.jsx(Rt.div,{role:"group",...r,ref:e})});$D.displayName=EBe;var kBe="MenuLabel",nJ=E.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return w.jsx(Rt.div,{...r,ref:e})});nJ.displayName=kBe;var S_="MenuItem",W9="menu.itemSelect",IE=E.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...o}=t,i=E.useRef(null),s=R0(S_,t.__scopeMenu),a=jD(S_,t.__scopeMenu),l=vn(e,i),c=E.useRef(!1),d=()=>{const f=i.current;if(!n&&f){const p=new CustomEvent(W9,{bubbles:!0,cancelable:!0});f.addEventListener(W9,g=>r?.(g),{once:!0}),y8(f,p),p.defaultPrevented?c.current=!1:s.onClose()}};return w.jsx(rJ,{...o,ref:l,disabled:n,onClick:at(t.onClick,d),onPointerDown:f=>{t.onPointerDown?.(f),c.current=!0},onPointerUp:at(t.onPointerUp,f=>{c.current||f.currentTarget?.click()}),onKeyDown:at(t.onKeyDown,f=>{const p=a.searchRef.current!=="";n||p&&f.key===" "||bM.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});IE.displayName=S_;var rJ=E.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...i}=t,s=jD(S_,n),a=QZ(n),l=E.useRef(null),c=vn(e,l),[d,f]=E.useState(!1),[p,g]=E.useState("");return E.useEffect(()=>{const y=l.current;y&&g((y.textContent??"").trim())},[i.children]),w.jsx(Ib.ItemSlot,{scope:n,disabled:r,textValue:o??p,children:w.jsx(WZ,{asChild:!0,...a,focusable:!r,children:w.jsx(Rt.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:at(t.onPointerMove,Mb(y=>{r?s.onItemLeave(y):(s.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:at(t.onPointerLeave,Mb(y=>s.onItemLeave(y))),onFocus:at(t.onFocus,()=>f(!0)),onBlur:at(t.onBlur,()=>f(!1))})})})}),TBe="MenuCheckboxItem",oJ=E.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return w.jsx(cJ,{scope:t.__scopeMenu,checked:n,children:w.jsx(IE,{role:"menuitemcheckbox","aria-checked":__(n)?"mixed":n,...o,ref:e,"data-state":HD(n),onSelect:at(o.onSelect,()=>r?.(__(n)?!0:!n),{checkForDefaultPrevented:!1})})})});oJ.displayName=TBe;var iJ="MenuRadioGroup",[ABe,RBe]=Sp(iJ,{value:void 0,onValueChange:()=>{}}),sJ=E.forwardRef((t,e)=>{const{value:n,onValueChange:r,...o}=t,i=gc(r);return w.jsx(ABe,{scope:t.__scopeMenu,value:n,onValueChange:i,children:w.jsx($D,{...o,ref:e})})});sJ.displayName=iJ;var aJ="MenuRadioItem",lJ=E.forwardRef((t,e)=>{const{value:n,...r}=t,o=RBe(aJ,t.__scopeMenu),i=n===o.value;return w.jsx(cJ,{scope:t.__scopeMenu,checked:i,children:w.jsx(IE,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":HD(i),onSelect:at(r.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});lJ.displayName=aJ;var FD="MenuItemIndicator",[cJ,IBe]=Sp(FD,{checked:!1}),uJ=E.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...o}=t,i=IBe(FD,n);return w.jsx(oa,{present:r||__(i.checked)||i.checked===!0,children:w.jsx(Rt.span,{...o,ref:e,"data-state":HD(i.checked)})})});uJ.displayName=FD;var MBe="MenuSeparator",dJ=E.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return w.jsx(Rt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});dJ.displayName=MBe;var NBe="MenuArrow",fJ=E.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=RE(n);return w.jsx($_,{...o,...r,ref:e})});fJ.displayName=NBe;var OBe="MenuSub",[K9e,hJ]=Sp(OBe),hv="MenuSubTrigger",pJ=E.forwardRef((t,e)=>{const n=_p(hv,t.__scopeMenu),r=R0(hv,t.__scopeMenu),o=hJ(hv,t.__scopeMenu),i=jD(hv,t.__scopeMenu),s=E.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:t.__scopeMenu},d=E.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return E.useEffect(()=>d,[d]),E.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),w.jsx(LD,{asChild:!0,...c,children:w.jsx(rJ,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":yJ(n.open),...t,ref:Au(e,o.onTriggerChange),onClick:f=>{t.onClick?.(f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:at(t.onPointerMove,Mb(f=>{i.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:at(t.onPointerLeave,Mb(f=>{d();const p=n.content?.getBoundingClientRect();if(p){const g=n.content?.dataset.side,y=g==="right",b=y?-5:5,_=p[y?"left":"right"],k=p[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+b,y:f.clientY},{x:_,y:p.top},{x:k,y:p.top},{x:k,y:p.bottom},{x:_,y:p.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:at(t.onKeyDown,f=>{const p=i.searchRef.current!=="";t.disabled||p&&f.key===" "||hBe[r.dir].includes(f.key)&&(n.onOpenChange(!0),n.content?.focus(),f.preventDefault())})})})});pJ.displayName=hv;var mJ="MenuSubContent",gJ=E.forwardRef((t,e)=>{const n=JZ($a,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,i=_p($a,t.__scopeMenu),s=R0($a,t.__scopeMenu),a=hJ(mJ,t.__scopeMenu),l=E.useRef(null),c=vn(e,l);return w.jsx(Ib.Provider,{scope:t.__scopeMenu,children:w.jsx(oa,{present:r||i.open,children:w.jsx(Ib.Slot,{scope:t.__scopeMenu,children:w.jsx(BD,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:c,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{s.isUsingKeyboardRef.current&&l.current?.focus(),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:at(t.onFocusOutside,d=>{d.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:at(t.onEscapeKeyDown,d=>{s.onClose(),d.preventDefault()}),onKeyDown:at(t.onKeyDown,d=>{const f=d.currentTarget.contains(d.target),p=pBe[s.dir].includes(d.key);f&&p&&(i.onOpenChange(!1),a.trigger?.focus(),d.preventDefault())})})})})})});gJ.displayName=mJ;function yJ(t){return t?"open":"closed"}function __(t){return t==="indeterminate"}function HD(t){return __(t)?"indeterminate":t?"checked":"unchecked"}function PBe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function DBe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function LBe(t,e,n){const o=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let s=DBe(t,Math.max(i,0));o.length===1&&(s=s.filter(c=>c!==n));const l=s.find(c=>c.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function VBe(t,e){const{x:n,y:r}=t;let o=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const a=e[i],l=e[s],c=a.x,d=a.y,f=l.x,p=l.y;d>r!=p>r&&n<(f-c)*(r-d)/(p-d)+c&&(o=!o)}return o}function jBe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return VBe(n,e)}function Mb(t){return e=>e.pointerType==="mouse"?t(e):void 0}var BBe=ZZ,$Be=LD,FBe=eJ,HBe=tJ,UBe=$D,zBe=nJ,GBe=IE,qBe=oJ,KBe=sJ,WBe=lJ,YBe=uJ,XBe=dJ,QBe=fJ,ZBe=pJ,JBe=gJ,ME="DropdownMenu",[e$e,W9e]=ra(ME,[XZ]),ns=XZ(),[t$e,vJ]=e$e(ME),bJ=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:o,defaultOpen:i,onOpenChange:s,modal:a=!0}=t,l=ns(e),c=E.useRef(null),[d,f]=Ru({prop:o,defaultProp:i??!1,onChange:s,caller:ME});return w.jsx(t$e,{scope:e,triggerId:hi(),triggerRef:c,contentId:hi(),open:d,onOpenChange:f,onOpenToggle:E.useCallback(()=>f(p=>!p),[f]),modal:a,children:w.jsx(BBe,{...l,open:d,onOpenChange:f,dir:r,modal:a,children:n})})};bJ.displayName=ME;var wJ="DropdownMenuTrigger",CJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=t,i=vJ(wJ,n),s=ns(n);return w.jsx($Be,{asChild:!0,...s,children:w.jsx(Rt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:Au(e,i.triggerRef),onPointerDown:at(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:at(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});CJ.displayName=wJ;var n$e="DropdownMenuPortal",SJ=t=>{const{__scopeDropdownMenu:e,...n}=t,r=ns(e);return w.jsx(FBe,{...r,...n})};SJ.displayName=n$e;var _J="DropdownMenuContent",xJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=vJ(_J,n),i=ns(n),s=E.useRef(!1);return w.jsx(HBe,{id:o.contentId,"aria-labelledby":o.triggerId,...i,...r,ref:e,onCloseAutoFocus:at(t.onCloseAutoFocus,a=>{s.current||o.triggerRef.current?.focus(),s.current=!1,a.preventDefault()}),onInteractOutside:at(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;(!o.modal||d)&&(s.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xJ.displayName=_J;var r$e="DropdownMenuGroup",o$e=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ns(n);return w.jsx(UBe,{...o,...r,ref:e})});o$e.displayName=r$e;var i$e="DropdownMenuLabel",EJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ns(n);return w.jsx(zBe,{...o,...r,ref:e})});EJ.displayName=i$e;var s$e="DropdownMenuItem",kJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ns(n);return w.jsx(GBe,{...o,...r,ref:e})});kJ.displayName=s$e;var a$e="DropdownMenuCheckboxItem",l$e=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ns(n);return w.jsx(qBe,{...o,...r,ref:e})});l$e.displayName=a$e;var c$e="DropdownMenuRadioGroup",u$e=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ns(n);return w.jsx(KBe,{...o,...r,ref:e})});u$e.displayName=c$e;var d$e="DropdownMenuRadioItem",f$e=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ns(n);return w.jsx(WBe,{...o,...r,ref:e})});f$e.displayName=d$e;var h$e="DropdownMenuItemIndicator",p$e=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ns(n);return w.jsx(YBe,{...o,...r,ref:e})});p$e.displayName=h$e;var m$e="DropdownMenuSeparator",TJ=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ns(n);return w.jsx(XBe,{...o,...r,ref:e})});TJ.displayName=m$e;var g$e="DropdownMenuArrow",y$e=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ns(n);return w.jsx(QBe,{...o,...r,ref:e})});y$e.displayName=g$e;var v$e="DropdownMenuSubTrigger",b$e=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ns(n);return w.jsx(ZBe,{...o,...r,ref:e})});b$e.displayName=v$e;var w$e="DropdownMenuSubContent",C$e=E.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=ns(n);return w.jsx(JBe,{...o,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});C$e.displayName=w$e;var S$e=bJ,_$e=CJ,x$e=SJ,E$e=xJ,k$e=EJ,T$e=kJ,A$e=TJ;function R$e({...t}){return w.jsx(S$e,{"data-slot":"dropdown-menu",...t})}function I$e({...t}){return w.jsx(_$e,{"data-slot":"dropdown-menu-trigger",...t})}function M$e({className:t,sideOffset:e=4,...n}){return w.jsx(x$e,{children:w.jsx(E$e,{"data-slot":"dropdown-menu-content",sideOffset:e,className:dt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...n})})}function I2({className:t,inset:e,variant:n="default",...r}){return w.jsx(T$e,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":n,className:dt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function N$e({className:t,inset:e,...n}){return w.jsx(k$e,{"data-slot":"dropdown-menu-label","data-inset":e,className:dt("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...n})}function O$e({className:t,...e}){return w.jsx(A$e,{"data-slot":"dropdown-menu-separator",className:dt("bg-border -mx-1 my-1 h-px",t),...e})}const wM=I7((t,e)=>({open:!1,options:null,resolve:void 0,show:n=>new Promise(r=>{t({open:!0,options:n,resolve:r})}),close:()=>{const n=e().resolve;n?.(!1),t({open:!1,options:null,resolve:void 0})}}));function P$e({className:t,...e}){return w.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:dt("mx-auto flex w-full justify-center",t),...e})}function D$e({className:t,...e}){return w.jsx("ul",{"data-slot":"pagination-content",className:dt("flex flex-row items-center gap-1",t),...e})}function Y9({...t}){return w.jsx("li",{"data-slot":"pagination-item",...t})}function AJ({className:t,isActive:e,size:n="icon",...r}){return w.jsx("a",{"aria-current":e?"page":void 0,"data-slot":"pagination-link","data-active":e,className:dt(x_({variant:e?"outline":"ghost",size:n}),t),...r})}function L$e({className:t,...e}){return w.jsxs(AJ,{"aria-label":"Go to previous page",size:"default",className:dt("gap-1 px-2.5 sm:pl-2.5",t),...e,children:[w.jsx(Ate,{}),w.jsx("span",{className:"hidden sm:block",children:"Previous"})]})}function V$e({className:t,...e}){return w.jsxs(AJ,{"aria-label":"Go to next page",size:"default",className:dt("gap-1 px-2.5 sm:pr-2.5",t),...e,children:[w.jsx("span",{className:"hidden sm:block",children:"Next"}),w.jsx(Ite,{})]})}function j$e(){const{setOpenSidebar:t,setPageTitle:e,setPageGuess:n,setPageContent:r,setPageClass:o,setPageBook:i,setNanoPageId:s,setPagePriority:a,SyncedQueue:l,selectedFilter:c,renderRangeData:d,isRenderingMode:f}=_l(),[p,g]=E.useState(0),y=Cse(c,p),b={high:1,medium:2,low:3},_=y.sort((I,L)=>(b[I.priority]||99)-(b[L.priority]||99)),k=()=>({header:"ID",size:50,thClassName:"p-2",cell:({row:I})=>{const L=I.original;return w.jsx(w.Fragment,{children:w.jsxs(R$e,{children:[w.jsx(I$e,{className:"flex items-center justify-center w-full h-full",children:w.jsx(Ute,{})}),w.jsxs(M$e,{className:"w-56",align:"start",children:[w.jsx(N$e,{children:"My Account"}),w.jsx(O$e,{}),w.jsx(I2,{onClick:()=>{navigator.clipboard.writeText(L.id),Kr.success("Success copy id",{description:L.id})},children:"Copy Id"}),w.jsx(I2,{onClick:()=>{t(!0),s(L.id),e(L.title),n(L.guess),a(L.priority),r(L.content??'[{type: "paragraph",content: [{type: "text",text: "",styles: {},},],},]'),o(L.classId),i(L.bookId)},children:"Open page"}),w.jsx(I2,{onClick:async()=>{await wM.getState().show({title:"Delete this post?",description:"This cannot be undone.",actionLabel:"Delete",cancelLabel:"Cancel"})?(Zn.Items.delete(L.id),await l(L.id,"Items","delete"),Kr.success("deleted item",{description:L.id})):console.log("User canceled")},children:"Delete"})]})]})})}}),M=()=>({header:"Title",size:250,cell:({row:I})=>{const L=I.original;return w.jsx("div",{className:"p-2 group font-bold relative cursor-pointer",children:w.jsxs("span",{className:"flex gap-1 items-center",onClick:z=>{z.currentTarget.children[1].classList.toggle("blur-sm")},children:[w.jsx(ig,{keyName:L.bookId}),w.jsx("span",{className:`${f?"blur-sm":null}`,children:L.title})]})})}}),N=()=>({header:"Range",size:100,cell:({row:I})=>{const L=I.original;return w.jsx("div",{className:"p-2",children:w.jsxs(PZ,{children:[w.jsx(Z6e,{className:"w-full rounded-md text-sm font-medium  bg-primary text-primary-foreground shadow-xs hover:bg-primary/90 h-9 px-4 py-2",children:d[L.renderRange||0].label}),w.jsxs(DZ,{children:[w.jsxs(LZ,{children:[w.jsx(jZ,{children:"Are you absolutely sure?"}),w.jsx(BZ,{children:"Are you want to render after given date then ok other wise cancel"})]}),w.jsxs(VZ,{children:[w.jsx(FZ,{onClick:async()=>{if(f)try{await Zn.Items.update(L.id,{...L,renderRange:1,renderDate:new Date().getTime()+d[String(1)].time}),await l(L.id,"Items","update"),Kr.success("Page already present successfully updated",{description:L.id})}catch(z){console.error("❌ Failed to update progress:",z)}else Kr.error("Switch to render Mode For Render Feature")},children:"Cancel"}),w.jsx($Z,{onClick:async()=>{if(f)try{const z=Math.min((L?.renderRange??0)+1,9);await Zn.Items.update(L.id,{...L,renderRange:z,renderDate:new Date().getTime()+d[String(z)].time}),await l(L.id,"Items","update"),Kr.success("Page already present successfully updated",{description:L.id})}catch(z){console.error("❌ Failed to update progress:",z)}else Kr.error("Switch to render Mode For Render Feature")},children:"Continue"})]})]})]})})}}),j=()=>({header:"Guess",size:300,cell:({row:I})=>{const L=I.original;return w.jsx("div",{className:"p-2",children:L.guess})}}),B=I=>({header:I==="classId"?"Class":"Book",cell:({row:L})=>{const z=L.original,q=I==="classId"?z.classId.trim():z.bookId.trim()||"placeholder";return w.jsxs("div",{className:"p-2 text-center flex items-center gap-2",children:[w.jsx(ig,{keyName:q}),w.jsx("span",{children:I==="classId"?z.classId.trim():z.bookId.trim()})]})}}),F=()=>({header:"Priority",tdClassName:"text-center",cell:({row:I})=>{const L=I.original;return w.jsx("span",{className:`${L.priority==="high"?"bg-green-200/50 text-green-800":L.priority==="medium"?"bg-yellow-200/50 text-yellow-800":"bg-red-200/50 text-red-800"} p-1 rounded-md block mx-2
         `,children:L.priority})}}),D=E.useMemo(()=>[k(),M(),N(),j(),B("classId"),B("bookId"),F()],[f]),R=Dme({data:_,columns:D,getCoreRowModel:Mme()});return w.jsxs("div",{className:"overflow-scroll table-wrapper",children:[w.jsxs("table",{className:"table-fixed border-collapse w-full",children:[w.jsx("thead",{children:R.getHeaderGroups().map(I=>w.jsx("tr",{children:I.headers.map(L=>w.jsx("th",{className:`border bg-gray-100 ${L.column?.columnDef?.className||""} ${L.column?.columnDef?.thClassName||""}`,style:{width:L.column.getSize()},children:L.isPlaceholder?null:vj(L.column.columnDef.header,L.getContext())},L.id))},I.id))}),w.jsx("tbody",{children:R.getRowModel().rows.map(I=>w.jsx("tr",{children:I.getVisibleCells().map(L=>w.jsx("td",{className:`border ${L.column?.columnDef?.className||""} ${L.column?.columnDef?.tdClassName||""}`,style:{width:L.column.getSize()},children:vj(L.column.columnDef.cell,L.getContext())},L.id))},I.id))})]}),w.jsx(P$e,{children:w.jsxs(D$e,{className:"w-full flex justify-between items-center",children:[w.jsx(Y9,{children:w.jsx(L$e,{href:"#",onClick:()=>{p>0&&g(I=>I-1)}})}),w.jsx(Y9,{children:w.jsx(V$e,{href:"#",onClick:()=>{_.length===30&&g(I=>I+1)}})})]})}),w.jsx(O6e,{})]})}function B$e(){const{openCommandSearch:t,setOpenCommandSearch:e}=_l(),[n,r]=E.useState(""),[o,i]=E.useState([]),{setOpenSidebar:s,setPageTitle:a,setPageGuess:l,setPageContent:c,setPageClass:d,setPageBook:f,setPagePriority:p,setNanoPageId:g}=_l();return E.useEffect(()=>{(async()=>{if(!n){i([]);return}const b=n.toLowerCase(),_=await Zn.Items.filter(k=>k.id.toLowerCase().includes(b)||k.guess.toLowerCase().includes(b)||k.title.toLowerCase().includes(b)||k.content.toLowerCase().includes(b)||k.bookId.toLowerCase().includes(b)||k.priority.toLowerCase().includes(b)).toArray();i(_),console.log(_)})()},[n]),w.jsxs(w4e,{open:t,onOpenChange:e,children:[w.jsx(e_,{placeholder:"Type a command or search...",value:n,onValueChange:r}),w.jsxs(t_,{children:[o.length===0&&w.jsx(n_,{children:"No results found."}),w.jsx(r_,{heading:"Results",children:o.map(y=>(console.log(y.priority),w.jsxs(o_,{value:`${y.title} ${y.priority} ${y.bookId} ${y.id} ${y.guess}`,onSelect:()=>{e(!1),s(!0),g(y.id),a(y.title),l(y.guess),p(y.priority),c(y.content??'[{type: "paragraph",content: [{type: "text",text: "",styles: {},},],},]'),d(y.classId),f(y.bookId)},className:"flex flex-col items-start",children:[w.jsx("div",{className:"font-medium w-full",children:y.title}),w.jsx("span",{children:y.guess}),w.jsxs("div",{className:"text-xs text-muted-foreground flex justify-between gap-2 w-full",children:[w.jsx("span",{children:y.id}),w.jsx("span",{children:y.priority}),w.jsx("span",{children:y.classId}),w.jsx("span",{children:y.bookId}),w.jsx("span",{children:y.renderRange})]})]},y.id)))})]})]})}const $$e=()=>{const{open:t,options:e,close:n}=wM(),r=wM(s=>s.resolve);if(!e)return null;const o=()=>{r?.(!0),n()},i=()=>{r?.(!1),n()};return w.jsx(PZ,{open:t,onOpenChange:i,children:w.jsxs(DZ,{children:[w.jsxs(LZ,{children:[w.jsx(jZ,{children:e.title}),w.jsx(BZ,{children:e.description})]}),w.jsxs(VZ,{children:[w.jsx(FZ,{onClick:i,children:e.cancelLabel||"Cancel"}),w.jsx($Z,{onClick:o,children:e.actionLabel||"Confirm"})]})]})})};function F$e(){const t=U_(()=>Zn.Icons.toArray(),[])||[],{SyncedQueue:e,openIcon:n,setOpenIcon:r}=_l(),[o,i]=E.useState(!1),[s,a]=E.useState("Quran");return w.jsxs(dX,{open:n,onOpenChange:r,children:[w.jsx(ZS,{className:"hidden",children:"Edit Icon"}),w.jsxs(fX,{className:"sm:max-w-[425px]",children:[w.jsx(hX,{className:"sr-only",children:"Select or edit an icon"}),w.jsxs(qI,{open:o,onOpenChange:i,children:[w.jsx(KI,{asChild:!0,className:"mx-2",children:w.jsxs(ic,{variant:"outline",role:"combobox","aria-expanded":o,className:"justify-between",children:[t?t.find(l=>l.value===s)?.value:"Select icon",w.jsx(M2,{className:"opacity-50"})]})}),w.jsx(WI,{className:"w-[350px] p-0",children:w.jsxs(JS,{children:[w.jsx(e_,{placeholder:"Search Icon",className:"h-9",onKeyDown:async l=>{if(l.key==="F2"){const c=prompt("Enter icon name:"),d=prompt("Enter icon URL:");if(!c||!d)return;a(c);const f={value:c,url:d};await Zn.Icons.put(f),await e(c,"Icons","add")}}}),w.jsxs(t_,{children:[w.jsx(n_,{children:"No framework found."}),w.jsx(r_,{children:t.filter(l=>l.value).map(l=>w.jsxs(o_,{value:l.value,onSelect:c=>{a(c===s?"":c),i(!1)},children:[w.jsxs("div",{className:"flex gap-2 items-center w-full justify-between",children:[w.jsxs("div",{className:"flex gap-2 items-center",children:[w.jsx("img",{src:t.find(c=>c.value===l.value)?.url||t.find(c=>c.value==="placeholder")?.url,className:"h-6 aspect-square"}),w.jsx("span",{children:l.value})]}),w.jsx("span",{className:"justify-self-end",onClick:async()=>{const c=prompt("Enter icon name:"),d=prompt("Enter icon URL:");if(!c||!d)return;a(c);const f={value:c,url:d};await Zn.Icons.delete(f.value),await Zn.Icons.put(f),await e(f.value,"Icons","delete"),await e(c,"Icons","add")},children:w.jsx(Qte,{})})]}),w.jsx(cC,{className:dt("ml-auto",s===l.value?"opacity-100":"opacity-0")})]},l.value))})]})]})})]}),w.jsx(b4e,{children:w.jsx(g4e,{asChild:!0,children:w.jsx(ic,{children:"Cancel"})})})]})]})}function H$e({className:t,...e}){return w.jsx("div",{"data-slot":"card",className:dt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...e})}function U$e({className:t,...e}){return w.jsx("div",{"data-slot":"card-content",className:dt("px-6",t),...e})}var UD="Radio",[z$e,RJ]=ra(UD),[G$e,q$e]=z$e(UD),IJ=E.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:o=!1,required:i,disabled:s,value:a="on",onCheck:l,form:c,...d}=t,[f,p]=E.useState(null),g=vn(e,_=>p(_)),y=E.useRef(!1),b=f?c||!!f.closest("form"):!0;return w.jsxs(G$e,{scope:n,checked:o,disabled:s,children:[w.jsx(Rt.button,{type:"button",role:"radio","aria-checked":o,"data-state":PJ(o),"data-disabled":s?"":void 0,disabled:s,value:a,...d,ref:g,onClick:at(t.onClick,_=>{o||l?.(),b&&(y.current=_.isPropagationStopped(),y.current||_.stopPropagation())})}),b&&w.jsx(OJ,{control:f,bubbles:!y.current,name:r,value:a,checked:o,required:i,disabled:s,form:c,style:{transform:"translateX(-100%)"}})]})});IJ.displayName=UD;var MJ="RadioIndicator",NJ=E.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...o}=t,i=q$e(MJ,n);return w.jsx(oa,{present:r||i.checked,children:w.jsx(Rt.span,{"data-state":PJ(i.checked),"data-disabled":i.disabled?"":void 0,...o,ref:e})})});NJ.displayName=MJ;var K$e="RadioBubbleInput",OJ=E.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:r=!0,...o},i)=>{const s=E.useRef(null),a=vn(s,i),l=OD(n),c=$M(e);return E.useEffect(()=>{const d=s.current;if(!d)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==n&&g){const y=new Event("click",{bubbles:r});g.call(d,n),d.dispatchEvent(y)}},[l,n,r]),w.jsx(Rt.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:a,style:{...o.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});OJ.displayName=K$e;function PJ(t){return t?"checked":"unchecked"}var W$e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],NE="RadioGroup",[Y$e,Y9e]=ra(NE,[AE,RJ]),DJ=AE(),LJ=RJ(),[X$e,Q$e]=Y$e(NE),VJ=E.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:o,value:i,required:s=!1,disabled:a=!1,orientation:l,dir:c,loop:d=!0,onValueChange:f,...p}=t,g=DJ(n),y=_E(c),[b,_]=Ru({prop:i,defaultProp:o??null,onChange:f,caller:NE});return w.jsx(X$e,{scope:n,name:r,required:s,disabled:a,value:b,onValueChange:_,children:w.jsx(KZ,{asChild:!0,...g,orientation:l,dir:y,loop:d,children:w.jsx(Rt.div,{role:"radiogroup","aria-required":s,"aria-orientation":l,"data-disabled":a?"":void 0,dir:y,...p,ref:e})})})});VJ.displayName=NE;var jJ="RadioGroupItem",BJ=E.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...o}=t,i=Q$e(jJ,n),s=i.disabled||r,a=DJ(n),l=LJ(n),c=E.useRef(null),d=vn(e,c),f=i.value===o.value,p=E.useRef(!1);return E.useEffect(()=>{const g=b=>{W$e.includes(b.key)&&(p.current=!0)},y=()=>p.current=!1;return document.addEventListener("keydown",g),document.addEventListener("keyup",y),()=>{document.removeEventListener("keydown",g),document.removeEventListener("keyup",y)}},[]),w.jsx(WZ,{asChild:!0,...a,focusable:!s,active:f,children:w.jsx(IJ,{disabled:s,required:i.required,checked:f,...l,...o,name:i.name,ref:d,onCheck:()=>i.onValueChange(o.value),onKeyDown:at(g=>{g.key==="Enter"&&g.preventDefault()}),onFocus:at(o.onFocus,()=>{p.current&&c.current?.click()})})})});BJ.displayName=jJ;var Z$e="RadioGroupIndicator",$J=E.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,o=LJ(n);return w.jsx(NJ,{...o,...r,ref:e})});$J.displayName=Z$e;var J$e=VJ,e9e=BJ,t9e=$J;function n9e({className:t,...e}){return w.jsx(J$e,{"data-slot":"radio-group",className:dt("grid gap-3",t),...e})}function r9e({className:t,...e}){return w.jsx(e9e,{"data-slot":"radio-group-item",className:dt("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:w.jsx(t9e,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:w.jsx(Dte,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}const o9e=Ri.object({properties:{quiz:Ri.array({items:Ri.object({properties:{question:Ri.string(),options:Ri.array({items:Ri.object({properties:{option:Ri.string(),detail:Ri.string(),isCorrect:Ri.boolean()}})})}})})}}),i9e=cpe(hpe,{model:"gemini-2.5-flash",generationConfig:{responseMimeType:"application/json",responseSchema:o9e}});function s9e(){const{openQuiz:t,setOpenQuiz:e,pageContent:n}=_l(),[r,o]=E.useState([]),[i,s]=E.useState(0),[a,l]=E.useState(null),[c,d]=E.useState(!1);if(E.useEffect(()=>{if(!t)return;const p=prompt("first instructures of content");(async()=>{try{const _=(await i9e.generateContent(p+" "+n)).response.text().replace(/```json|```/g,"").trim(),k=JSON.parse(_);o(k.quiz??[]),s(0),l(null),d(!1)}catch{o([])}})()},[t]),!r.length)return w.jsxs(dC,{open:t,onOpenChange:e,children:[w.jsx(ZS,{className:"hidden",children:"Edit Page"}),w.jsx(fC,{className:"w-full p-4 sm:max-w-1/2 overflow-y-auto overflow-x-hidden",children:w.jsx("div",{className:"text-center py-10 text-gray-500",children:"Loading quiz..."})})]});const f=r[i].options.findIndex(p=>p.isCorrect);return w.jsxs(dC,{open:t,onOpenChange:e,children:[w.jsx(ZS,{className:"hidden",children:"Edit Page"}),w.jsxs(fC,{className:"w-full p-4 sm:max-w-1/2 overflow-y-auto overflow-x-hidden pt-16",children:[w.jsx(H$e,{children:w.jsx(U$e,{children:w.jsx("p",{className:"text-base font-medium",children:r[i].question})})}),w.jsx(n9e,{onValueChange:p=>{if(c)return;const g=r[i].options.findIndex(y=>y.option===p);l(g),d(!0)},className:"space-y-2",children:r[i].options.map((p,g)=>{let y="",b=!1;return a!==null&&c&&(g===f?(y="bg-green-100 text-green-900",b=a===f||a!==f):g===a&&(y=p.isCorrect?"bg-green-100 text-green-900":"bg-red-100 text-red-900",b=a!==f)),w.jsxs("div",{className:`flex flex-col items-start space-x-2 border border-slate-400/30 rounded-md ${y} mb-2`,onClick:()=>{c||(l(g),d(!0))},children:[w.jsxs("div",{className:"flex items-center w-full",children:[w.jsx(r9e,{className:"hidden",value:p.option,id:`option-${g}`,disabled:c}),w.jsx(DD,{className:"p-4 w-full h-full font-bold",htmlFor:`option-${g}`,children:p.option})]}),b&&p.detail&&w.jsx("div",{className:`w-full text-xs p-2 ${g===f?"bg-green-100 text-green-900":"bg-red-100 text-red-900"} rounded-b-md px-4`,children:p.detail})]},g)})}),i<r.length-1&&w.jsx(ic,{className:"mt-4",onClick:()=>{s(p=>p+1),l(null),d(!1)},disabled:!c,children:"Next"}),w.jsx(q8,{children:w.jsx(G8,{asChild:!0,children:w.jsx(ic,{variant:"outline",children:"Close"})})})]})]})}function a9e({children:t}){const{isRenderingMode:e,setIsRenderingMode:n}=_l();return w.jsxs(nse,{children:[w.jsx(zpe,{}),w.jsxs("main",{className:"flex flex-col h-screen w-full overflow-hidden",children:[w.jsxs("div",{className:"flex gap-2 justify-between",children:[w.jsx(ose,{}),w.jsx("div",{className:"flex gap-2 mr-2",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(DD,{"data-key":"e",htmlFor:"renderingmode",children:"Renders Mode"}),w.jsx(wZ,{id:"renderingmode",checked:e,onCheckedChange:n})]})})]}),w.jsx(j$e,{}),t||null]}),w.jsx(B$e,{}),w.jsx(F$e,{}),w.jsx($$e,{}),w.jsx(s9e,{})]})}var l9e=(t,e,n,r,o,i,s,a)=>{let l=document.documentElement,c=["light","dark"];function d(g){(Array.isArray(t)?t:[t]).forEach(y=>{let b=y==="class",_=b&&i?o.map(k=>i[k]||k):o;b?(l.classList.remove(..._),l.classList.add(i&&i[g]?i[g]:g)):l.setAttribute(y,g)}),f(g)}function f(g){a&&c.includes(g)&&(l.style.colorScheme=g)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let g=localStorage.getItem(e)||n,y=s&&g==="system"?p():g;d(y)}catch{}},c9e=E.createContext(void 0),u9e={setTheme:t=>{},themes:[]},d9e=()=>{var t;return(t=E.useContext(c9e))!=null?t:u9e};E.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:o,defaultTheme:i,value:s,themes:a,nonce:l,scriptProps:c})=>{let d=JSON.stringify([n,e,i,t,a,s,r,o]).slice(1,-1);return E.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${l9e.toString()})(${d})`}})});const f9e=({...t})=>{const{theme:e="system"}=d9e();return w.jsx($pe,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})};function h9e(){const{setSyncLoading:t}=_l();return E.useEffect(()=>{(async()=>(await Upe(),VC(t),setInterval(()=>{VC(t)},6e4)))(),window.addEventListener("keydown",e=>{const n=e.key.toLowerCase();if(e.ctrlKey&&e.altKey){const r=document.querySelector(`[data-key="${n}"]`);r instanceof HTMLElement&&(e.preventDefault(),r.click())}})},[]),w.jsxs(w.Fragment,{children:[w.jsx(a9e,{}),w.jsx(f9e,{position:"bottom-right",expand:!1,richColors:!0})]})}function p9e(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:i,onRegisterError:s}=t;let a,l;const c=async(f=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await et(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/BSP-Note/sw.js",{scope:"/BSP-Note/",type:"classic"})).catch(f=>{s?.(f)}),!a)return;a.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),a.addEventListener("installed",f=>{f.isUpdate||r?.()}),a.register({immediate:e}).then(f=>{i?i("/BSP-Note/sw.js",f):o?.(f)}).catch(f=>{s?.(f)})}}return l=d(),c}const X9="1.0.10";p9e({immediate:!0,onRegisteredSW(t,e){e&&(e.update(),localStorage.getItem("app_version")!==X9&&(localStorage.setItem("app_version",X9),e.waiting&&(e.waiting.postMessage({type:"SKIP_WAITING"}),e.waiting.addEventListener("statechange",n=>{n.target.state==="activated"&&window.location.reload()}))))}});Z9.createRoot(document.getElementById("root")).render(w.jsx(E.StrictMode,{children:w.jsx(h9e,{})}));export{JVe as E,H9e as a,g9 as c,TLe as f,CM as g,ILe as h,nM as n,U9e as p,qX as s,P3e as t,vD as w,MLe as z};
